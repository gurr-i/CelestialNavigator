var LB=Object.defineProperty;var DB=(n,e,t)=>e in n?LB(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var pt=(n,e,t)=>DB(n,typeof e!="symbol"?e+"":e,t);function NB(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function U_(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var yC={exports:{}},Eg={},xC={exports:{}},kt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lh=Symbol.for("react.element"),FB=Symbol.for("react.portal"),UB=Symbol.for("react.fragment"),OB=Symbol.for("react.strict_mode"),kB=Symbol.for("react.profiler"),zB=Symbol.for("react.provider"),HB=Symbol.for("react.context"),GB=Symbol.for("react.forward_ref"),VB=Symbol.for("react.suspense"),WB=Symbol.for("react.memo"),jB=Symbol.for("react.lazy"),u1=Symbol.iterator;function XB(n){return n===null||typeof n!="object"?null:(n=u1&&n[u1]||n["@@iterator"],typeof n=="function"?n:null)}var _C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},AC=Object.assign,SC={};function nu(n,e,t){this.props=n,this.context=e,this.refs=SC,this.updater=t||_C}nu.prototype.isReactComponent={};nu.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};nu.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function MC(){}MC.prototype=nu.prototype;function O_(n,e,t){this.props=n,this.context=e,this.refs=SC,this.updater=t||_C}var k_=O_.prototype=new MC;k_.constructor=O_;AC(k_,nu.prototype);k_.isPureReactComponent=!0;var d1=Array.isArray,wC=Object.prototype.hasOwnProperty,z_={current:null},EC={key:!0,ref:!0,__self:!0,__source:!0};function bC(n,e,t){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)wC.call(e,i)&&!EC.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:lh,type:n,key:s,ref:o,props:r,_owner:z_.current}}function JB(n,e){return{$$typeof:lh,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function H_(n){return typeof n=="object"&&n!==null&&n.$$typeof===lh}function KB(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var h1=/\/+/g;function Pv(n,e){return typeof n=="object"&&n!==null&&n.key!=null?KB(""+n.key):e.toString(36)}function Kp(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case lh:case FB:o=!0}}if(o)return o=n,r=r(o),n=i===""?"."+Pv(o,0):i,d1(r)?(t="",n!=null&&(t=n.replace(h1,"$&/")+"/"),Kp(r,e,t,"",function(c){return c})):r!=null&&(H_(r)&&(r=JB(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(h1,"$&/")+"/")+n)),e.push(r)),1;if(o=0,i=i===""?".":i+":",d1(n))for(var a=0;a<n.length;a++){s=n[a];var l=i+Pv(s,a);o+=Kp(s,e,t,l,r)}else if(l=XB(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=i+Pv(s,a++),o+=Kp(s,e,t,l,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function If(n,e,t){if(n==null)return n;var i=[],r=0;return Kp(n,i,"","",function(s){return e.call(t,s,r++)}),i}function YB(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Oi={current:null},Yp={transition:null},QB={ReactCurrentDispatcher:Oi,ReactCurrentBatchConfig:Yp,ReactCurrentOwner:z_};function CC(){throw Error("act(...) is not supported in production builds of React.")}kt.Children={map:If,forEach:function(n,e,t){If(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return If(n,function(){e++}),e},toArray:function(n){return If(n,function(e){return e})||[]},only:function(n){if(!H_(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};kt.Component=nu;kt.Fragment=UB;kt.Profiler=kB;kt.PureComponent=O_;kt.StrictMode=OB;kt.Suspense=VB;kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QB;kt.act=CC;kt.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=AC({},n.props),r=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=z_.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)wC.call(e,l)&&!EC.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:lh,type:n.type,key:r,ref:s,props:i,_owner:o}};kt.createContext=function(n){return n={$$typeof:HB,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:zB,_context:n},n.Consumer=n};kt.createElement=bC;kt.createFactory=function(n){var e=bC.bind(null,n);return e.type=n,e};kt.createRef=function(){return{current:null}};kt.forwardRef=function(n){return{$$typeof:GB,render:n}};kt.isValidElement=H_;kt.lazy=function(n){return{$$typeof:jB,_payload:{_status:-1,_result:n},_init:YB}};kt.memo=function(n,e){return{$$typeof:WB,type:n,compare:e===void 0?null:e}};kt.startTransition=function(n){var e=Yp.transition;Yp.transition={};try{n()}finally{Yp.transition=e}};kt.unstable_act=CC;kt.useCallback=function(n,e){return Oi.current.useCallback(n,e)};kt.useContext=function(n){return Oi.current.useContext(n)};kt.useDebugValue=function(){};kt.useDeferredValue=function(n){return Oi.current.useDeferredValue(n)};kt.useEffect=function(n,e){return Oi.current.useEffect(n,e)};kt.useId=function(){return Oi.current.useId()};kt.useImperativeHandle=function(n,e,t){return Oi.current.useImperativeHandle(n,e,t)};kt.useInsertionEffect=function(n,e){return Oi.current.useInsertionEffect(n,e)};kt.useLayoutEffect=function(n,e){return Oi.current.useLayoutEffect(n,e)};kt.useMemo=function(n,e){return Oi.current.useMemo(n,e)};kt.useReducer=function(n,e,t){return Oi.current.useReducer(n,e,t)};kt.useRef=function(n){return Oi.current.useRef(n)};kt.useState=function(n){return Oi.current.useState(n)};kt.useSyncExternalStore=function(n,e,t){return Oi.current.useSyncExternalStore(n,e,t)};kt.useTransition=function(){return Oi.current.useTransition()};kt.version="18.3.1";xC.exports=kt;var z=xC.exports;const xs=U_(z),qB=NB({__proto__:null,default:xs},[z]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZB=z,$B=Symbol.for("react.element"),eL=Symbol.for("react.fragment"),tL=Object.prototype.hasOwnProperty,nL=ZB.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,iL={key:!0,ref:!0,__self:!0,__source:!0};function TC(n,e,t){var i,r={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)tL.call(e,i)&&!iL.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:$B,type:n,key:s,ref:o,props:r,_owner:nL.current}}Eg.Fragment=eL;Eg.jsx=TC;Eg.jsxs=TC;yC.exports=Eg;var L=yC.exports,_x={},RC={exports:{}},dr={},IC={exports:{}},PC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(D,W){var j=D.length;D.push(W);e:for(;0<j;){var Z=j-1>>>1,me=D[Z];if(0<r(me,W))D[Z]=W,D[j]=me,j=Z;else break e}}function t(D){return D.length===0?null:D[0]}function i(D){if(D.length===0)return null;var W=D[0],j=D.pop();if(j!==W){D[0]=j;e:for(var Z=0,me=D.length,Be=me>>>1;Z<Be;){var re=2*(Z+1)-1,xe=D[re],Ee=re+1,_e=D[Ee];if(0>r(xe,j))Ee<me&&0>r(_e,xe)?(D[Z]=_e,D[Ee]=j,Z=Ee):(D[Z]=xe,D[re]=j,Z=re);else if(Ee<me&&0>r(_e,j))D[Z]=_e,D[Ee]=j,Z=Ee;else break e}}return W}function r(D,W){var j=D.sortIndex-W.sortIndex;return j!==0?j:D.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,f=null,p=3,m=!1,y=!1,A=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(D){for(var W=t(c);W!==null;){if(W.callback===null)i(c);else if(W.startTime<=D)i(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=t(c)}}function w(D){if(A=!1,M(D),!y)if(t(l)!==null)y=!0,te(C);else{var W=t(c);W!==null&&le(w,W.startTime-D)}}function C(D,W){y=!1,A&&(A=!1,g(B),B=-1),m=!0;var j=p;try{for(M(W),f=t(l);f!==null&&(!(f.expirationTime>W)||D&&!U());){var Z=f.callback;if(typeof Z=="function"){f.callback=null,p=f.priorityLevel;var me=Z(f.expirationTime<=W);W=n.unstable_now(),typeof me=="function"?f.callback=me:f===t(l)&&i(l),M(W)}else i(l);f=t(l)}if(f!==null)var Be=!0;else{var re=t(c);re!==null&&le(w,re.startTime-W),Be=!1}return Be}finally{f=null,p=j,m=!1}}var R=!1,P=null,B=-1,I=5,b=-1;function U(){return!(n.unstable_now()-b<I)}function H(){if(P!==null){var D=n.unstable_now();b=D;var W=!0;try{W=P(!0,D)}finally{W?X():(R=!1,P=null)}}else R=!1}var X;if(typeof _=="function")X=function(){_(H)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,ne=ee.port2;ee.port1.onmessage=H,X=function(){ne.postMessage(null)}}else X=function(){x(H,0)};function te(D){P=D,R||(R=!0,X())}function le(D,W){B=x(function(){D(n.unstable_now())},W)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(D){D.callback=null},n.unstable_continueExecution=function(){y||m||(y=!0,te(C))},n.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<D?Math.floor(1e3/D):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(D){switch(p){case 1:case 2:case 3:var W=3;break;default:W=p}var j=p;p=W;try{return D()}finally{p=j}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(D,W){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var j=p;p=D;try{return W()}finally{p=j}},n.unstable_scheduleCallback=function(D,W,j){var Z=n.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?Z+j:Z):j=Z,D){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=j+me,D={id:h++,callback:W,priorityLevel:D,startTime:j,expirationTime:me,sortIndex:-1},j>Z?(D.sortIndex=j,e(c,D),t(l)===null&&D===t(c)&&(A?(g(B),B=-1):A=!0,le(w,j-Z))):(D.sortIndex=me,e(l,D),y||m||(y=!0,te(C))),D},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(D){var W=p;return function(){var j=p;p=W;try{return D.apply(this,arguments)}finally{p=j}}}})(PC);IC.exports=PC;var rL=IC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sL=z,ur=rL;function Ce(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var BC=new Set,Bd={};function Ml(n,e){Gc(n,e),Gc(n+"Capture",e)}function Gc(n,e){for(Bd[n]=e,n=0;n<e.length;n++)BC.add(e[n])}var $s=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ax=Object.prototype.hasOwnProperty,oL=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f1={},p1={};function aL(n){return Ax.call(p1,n)?!0:Ax.call(f1,n)?!1:oL.test(n)?p1[n]=!0:(f1[n]=!0,!1)}function lL(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function cL(n,e,t,i){if(e===null||typeof e>"u"||lL(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ki(n,e,t,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var oi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){oi[n]=new ki(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];oi[e]=new ki(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){oi[n]=new ki(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){oi[n]=new ki(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){oi[n]=new ki(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){oi[n]=new ki(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){oi[n]=new ki(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){oi[n]=new ki(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){oi[n]=new ki(n,5,!1,n.toLowerCase(),null,!1,!1)});var G_=/[\-:]([a-z])/g;function V_(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(G_,V_);oi[e]=new ki(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(G_,V_);oi[e]=new ki(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(G_,V_);oi[e]=new ki(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){oi[n]=new ki(n,1,!1,n.toLowerCase(),null,!1,!1)});oi.xlinkHref=new ki("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){oi[n]=new ki(n,1,!1,n.toLowerCase(),null,!0,!0)});function W_(n,e,t,i){var r=oi.hasOwnProperty(e)?oi[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(cL(e,t,r,i)&&(t=null),i||r===null?aL(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var uo=sL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Pf=Symbol.for("react.element"),pc=Symbol.for("react.portal"),mc=Symbol.for("react.fragment"),j_=Symbol.for("react.strict_mode"),Sx=Symbol.for("react.profiler"),LC=Symbol.for("react.provider"),DC=Symbol.for("react.context"),X_=Symbol.for("react.forward_ref"),Mx=Symbol.for("react.suspense"),wx=Symbol.for("react.suspense_list"),J_=Symbol.for("react.memo"),No=Symbol.for("react.lazy"),NC=Symbol.for("react.offscreen"),m1=Symbol.iterator;function Pu(n){return n===null||typeof n!="object"?null:(n=m1&&n[m1]||n["@@iterator"],typeof n=="function"?n:null)}var An=Object.assign,Bv;function ad(n){if(Bv===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Bv=e&&e[1]||""}return`
`+Bv+n}var Lv=!1;function Dv(n,e){if(!n||Lv)return"";Lv=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){i=c}n.call(e.prototype)}else{try{throw Error()}catch(c){i=c}n()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{Lv=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?ad(n):""}function uL(n){switch(n.tag){case 5:return ad(n.type);case 16:return ad("Lazy");case 13:return ad("Suspense");case 19:return ad("SuspenseList");case 0:case 2:case 15:return n=Dv(n.type,!1),n;case 11:return n=Dv(n.type.render,!1),n;case 1:return n=Dv(n.type,!0),n;default:return""}}function Ex(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case mc:return"Fragment";case pc:return"Portal";case Sx:return"Profiler";case j_:return"StrictMode";case Mx:return"Suspense";case wx:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case DC:return(n.displayName||"Context")+".Consumer";case LC:return(n._context.displayName||"Context")+".Provider";case X_:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case J_:return e=n.displayName||null,e!==null?e:Ex(n.type)||"Memo";case No:e=n._payload,n=n._init;try{return Ex(n(e))}catch{}}return null}function dL(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ex(e);case 8:return e===j_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function $o(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function FC(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function hL(n){var e=FC(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Bf(n){n._valueTracker||(n._valueTracker=hL(n))}function UC(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=FC(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function cm(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function bx(n,e){var t=e.checked;return An({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function g1(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=$o(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function OC(n,e){e=e.checked,e!=null&&W_(n,"checked",e,!1)}function Cx(n,e){OC(n,e);var t=$o(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?Tx(n,e.type,t):e.hasOwnProperty("defaultValue")&&Tx(n,e.type,$o(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function v1(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function Tx(n,e,t){(e!=="number"||cm(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var ld=Array.isArray;function Ic(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+$o(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function Rx(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ce(91));return An({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function y1(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Ce(92));if(ld(t)){if(1<t.length)throw Error(Ce(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:$o(t)}}function kC(n,e){var t=$o(e.value),i=$o(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function x1(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function zC(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ix(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?zC(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Lf,HC=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Lf=Lf||document.createElement("div"),Lf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Lf.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Ld(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var pd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fL=["Webkit","ms","Moz","O"];Object.keys(pd).forEach(function(n){fL.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),pd[e]=pd[n]})});function GC(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||pd.hasOwnProperty(n)&&pd[n]?(""+e).trim():e+"px"}function VC(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=GC(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var pL=An({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Px(n,e){if(e){if(pL[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ce(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ce(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ce(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ce(62))}}function Bx(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lx=null;function K_(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Dx=null,Pc=null,Bc=null;function _1(n){if(n=dh(n)){if(typeof Dx!="function")throw Error(Ce(280));var e=n.stateNode;e&&(e=Ig(e),Dx(n.stateNode,n.type,e))}}function WC(n){Pc?Bc?Bc.push(n):Bc=[n]:Pc=n}function jC(){if(Pc){var n=Pc,e=Bc;if(Bc=Pc=null,_1(n),e)for(n=0;n<e.length;n++)_1(e[n])}}function XC(n,e){return n(e)}function JC(){}var Nv=!1;function KC(n,e,t){if(Nv)return n(e,t);Nv=!0;try{return XC(n,e,t)}finally{Nv=!1,(Pc!==null||Bc!==null)&&(JC(),jC())}}function Dd(n,e){var t=n.stateNode;if(t===null)return null;var i=Ig(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Ce(231,e,typeof t));return t}var Nx=!1;if($s)try{var Bu={};Object.defineProperty(Bu,"passive",{get:function(){Nx=!0}}),window.addEventListener("test",Bu,Bu),window.removeEventListener("test",Bu,Bu)}catch{Nx=!1}function mL(n,e,t,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(h){this.onError(h)}}var md=!1,um=null,dm=!1,Fx=null,gL={onError:function(n){md=!0,um=n}};function vL(n,e,t,i,r,s,o,a,l){md=!1,um=null,mL.apply(gL,arguments)}function yL(n,e,t,i,r,s,o,a,l){if(vL.apply(this,arguments),md){if(md){var c=um;md=!1,um=null}else throw Error(Ce(198));dm||(dm=!0,Fx=c)}}function wl(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function YC(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function A1(n){if(wl(n)!==n)throw Error(Ce(188))}function xL(n){var e=n.alternate;if(!e){if(e=wl(n),e===null)throw Error(Ce(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return A1(r),n;if(s===i)return A1(r),e;s=s.sibling}throw Error(Ce(188))}if(t.return!==i.return)t=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===t){o=!0,t=r,i=s;break}if(a===i){o=!0,i=r,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,i=r;break}if(a===i){o=!0,i=s,t=r;break}a=a.sibling}if(!o)throw Error(Ce(189))}}if(t.alternate!==i)throw Error(Ce(190))}if(t.tag!==3)throw Error(Ce(188));return t.stateNode.current===t?n:e}function QC(n){return n=xL(n),n!==null?qC(n):null}function qC(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=qC(n);if(e!==null)return e;n=n.sibling}return null}var ZC=ur.unstable_scheduleCallback,S1=ur.unstable_cancelCallback,_L=ur.unstable_shouldYield,AL=ur.unstable_requestPaint,Pn=ur.unstable_now,SL=ur.unstable_getCurrentPriorityLevel,Y_=ur.unstable_ImmediatePriority,$C=ur.unstable_UserBlockingPriority,hm=ur.unstable_NormalPriority,ML=ur.unstable_LowPriority,eT=ur.unstable_IdlePriority,bg=null,fs=null;function wL(n){if(fs&&typeof fs.onCommitFiberRoot=="function")try{fs.onCommitFiberRoot(bg,n,void 0,(n.current.flags&128)===128)}catch{}}var jr=Math.clz32?Math.clz32:CL,EL=Math.log,bL=Math.LN2;function CL(n){return n>>>=0,n===0?32:31-(EL(n)/bL|0)|0}var Df=64,Nf=4194304;function cd(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function fm(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~r;a!==0?i=cd(a):(s&=o,s!==0&&(i=cd(s)))}else o=t&~r,o!==0?i=cd(o):s!==0&&(i=cd(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-jr(e),r=1<<t,i|=n[t],e&=~r;return i}function TL(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function RL(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-jr(s),a=1<<o,l=r[o];l===-1?(!(a&t)||a&i)&&(r[o]=TL(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function Ux(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function tT(){var n=Df;return Df<<=1,!(Df&4194240)&&(Df=64),n}function Fv(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function ch(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-jr(e),n[e]=t}function IL(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-jr(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function Q_(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-jr(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var qt=0;function nT(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var iT,q_,rT,sT,oT,Ox=!1,Ff=[],Wo=null,jo=null,Xo=null,Nd=new Map,Fd=new Map,Uo=[],PL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function M1(n,e){switch(n){case"focusin":case"focusout":Wo=null;break;case"dragenter":case"dragleave":jo=null;break;case"mouseover":case"mouseout":Xo=null;break;case"pointerover":case"pointerout":Nd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fd.delete(e.pointerId)}}function Lu(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=dh(e),e!==null&&q_(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function BL(n,e,t,i,r){switch(e){case"focusin":return Wo=Lu(Wo,n,e,t,i,r),!0;case"dragenter":return jo=Lu(jo,n,e,t,i,r),!0;case"mouseover":return Xo=Lu(Xo,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return Nd.set(s,Lu(Nd.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Fd.set(s,Lu(Fd.get(s)||null,n,e,t,i,r)),!0}return!1}function aT(n){var e=ja(n.target);if(e!==null){var t=wl(e);if(t!==null){if(e=t.tag,e===13){if(e=YC(t),e!==null){n.blockedOn=e,oT(n.priority,function(){rT(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Qp(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=kx(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);Lx=i,t.target.dispatchEvent(i),Lx=null}else return e=dh(t),e!==null&&q_(e),n.blockedOn=t,!1;e.shift()}return!0}function w1(n,e,t){Qp(n)&&t.delete(e)}function LL(){Ox=!1,Wo!==null&&Qp(Wo)&&(Wo=null),jo!==null&&Qp(jo)&&(jo=null),Xo!==null&&Qp(Xo)&&(Xo=null),Nd.forEach(w1),Fd.forEach(w1)}function Du(n,e){n.blockedOn===e&&(n.blockedOn=null,Ox||(Ox=!0,ur.unstable_scheduleCallback(ur.unstable_NormalPriority,LL)))}function Ud(n){function e(r){return Du(r,n)}if(0<Ff.length){Du(Ff[0],n);for(var t=1;t<Ff.length;t++){var i=Ff[t];i.blockedOn===n&&(i.blockedOn=null)}}for(Wo!==null&&Du(Wo,n),jo!==null&&Du(jo,n),Xo!==null&&Du(Xo,n),Nd.forEach(e),Fd.forEach(e),t=0;t<Uo.length;t++)i=Uo[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<Uo.length&&(t=Uo[0],t.blockedOn===null);)aT(t),t.blockedOn===null&&Uo.shift()}var Lc=uo.ReactCurrentBatchConfig,pm=!0;function DL(n,e,t,i){var r=qt,s=Lc.transition;Lc.transition=null;try{qt=1,Z_(n,e,t,i)}finally{qt=r,Lc.transition=s}}function NL(n,e,t,i){var r=qt,s=Lc.transition;Lc.transition=null;try{qt=4,Z_(n,e,t,i)}finally{qt=r,Lc.transition=s}}function Z_(n,e,t,i){if(pm){var r=kx(n,e,t,i);if(r===null)Xv(n,e,i,mm,t),M1(n,i);else if(BL(r,n,e,t,i))i.stopPropagation();else if(M1(n,i),e&4&&-1<PL.indexOf(n)){for(;r!==null;){var s=dh(r);if(s!==null&&iT(s),s=kx(n,e,t,i),s===null&&Xv(n,e,i,mm,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else Xv(n,e,i,null,t)}}var mm=null;function kx(n,e,t,i){if(mm=null,n=K_(i),n=ja(n),n!==null)if(e=wl(n),e===null)n=null;else if(t=e.tag,t===13){if(n=YC(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return mm=n,null}function lT(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(SL()){case Y_:return 1;case $C:return 4;case hm:case ML:return 16;case eT:return 536870912;default:return 16}default:return 16}}var Ho=null,$_=null,qp=null;function cT(){if(qp)return qp;var n,e=$_,t=e.length,i,r="value"in Ho?Ho.value:Ho.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===r[s-i];i++);return qp=r.slice(n,1<i?1-i:void 0)}function Zp(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Uf(){return!0}function E1(){return!1}function hr(n){function e(t,i,r,s,o){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Uf:E1,this.isPropagationStopped=E1,this}return An(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Uf)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Uf)},persist:function(){},isPersistent:Uf}),e}var iu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},eA=hr(iu),uh=An({},iu,{view:0,detail:0}),FL=hr(uh),Uv,Ov,Nu,Cg=An({},uh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tA,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Nu&&(Nu&&n.type==="mousemove"?(Uv=n.screenX-Nu.screenX,Ov=n.screenY-Nu.screenY):Ov=Uv=0,Nu=n),Uv)},movementY:function(n){return"movementY"in n?n.movementY:Ov}}),b1=hr(Cg),UL=An({},Cg,{dataTransfer:0}),OL=hr(UL),kL=An({},uh,{relatedTarget:0}),kv=hr(kL),zL=An({},iu,{animationName:0,elapsedTime:0,pseudoElement:0}),HL=hr(zL),GL=An({},iu,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),VL=hr(GL),WL=An({},iu,{data:0}),C1=hr(WL),jL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},XL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},JL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function KL(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=JL[n])?!!e[n]:!1}function tA(){return KL}var YL=An({},uh,{key:function(n){if(n.key){var e=jL[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Zp(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?XL[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tA,charCode:function(n){return n.type==="keypress"?Zp(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Zp(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),QL=hr(YL),qL=An({},Cg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T1=hr(qL),ZL=An({},uh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tA}),$L=hr(ZL),eD=An({},iu,{propertyName:0,elapsedTime:0,pseudoElement:0}),tD=hr(eD),nD=An({},Cg,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),iD=hr(nD),rD=[9,13,27,32],nA=$s&&"CompositionEvent"in window,gd=null;$s&&"documentMode"in document&&(gd=document.documentMode);var sD=$s&&"TextEvent"in window&&!gd,uT=$s&&(!nA||gd&&8<gd&&11>=gd),R1=" ",I1=!1;function dT(n,e){switch(n){case"keyup":return rD.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hT(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var gc=!1;function oD(n,e){switch(n){case"compositionend":return hT(e);case"keypress":return e.which!==32?null:(I1=!0,R1);case"textInput":return n=e.data,n===R1&&I1?null:n;default:return null}}function aD(n,e){if(gc)return n==="compositionend"||!nA&&dT(n,e)?(n=cT(),qp=$_=Ho=null,gc=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return uT&&e.locale!=="ko"?null:e.data;default:return null}}var lD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function P1(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!lD[n.type]:e==="textarea"}function fT(n,e,t,i){WC(i),e=gm(e,"onChange"),0<e.length&&(t=new eA("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var vd=null,Od=null;function cD(n){wT(n,0)}function Tg(n){var e=xc(n);if(UC(e))return n}function uD(n,e){if(n==="change")return e}var pT=!1;if($s){var zv;if($s){var Hv="oninput"in document;if(!Hv){var B1=document.createElement("div");B1.setAttribute("oninput","return;"),Hv=typeof B1.oninput=="function"}zv=Hv}else zv=!1;pT=zv&&(!document.documentMode||9<document.documentMode)}function L1(){vd&&(vd.detachEvent("onpropertychange",mT),Od=vd=null)}function mT(n){if(n.propertyName==="value"&&Tg(Od)){var e=[];fT(e,Od,n,K_(n)),KC(cD,e)}}function dD(n,e,t){n==="focusin"?(L1(),vd=e,Od=t,vd.attachEvent("onpropertychange",mT)):n==="focusout"&&L1()}function hD(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Tg(Od)}function fD(n,e){if(n==="click")return Tg(e)}function pD(n,e){if(n==="input"||n==="change")return Tg(e)}function mD(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Jr=typeof Object.is=="function"?Object.is:mD;function kd(n,e){if(Jr(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!Ax.call(e,r)||!Jr(n[r],e[r]))return!1}return!0}function D1(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function N1(n,e){var t=D1(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=D1(t)}}function gT(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?gT(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function vT(){for(var n=window,e=cm();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=cm(n.document)}return e}function iA(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function gD(n){var e=vT(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&gT(t.ownerDocument.documentElement,t)){if(i!==null&&iA(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=N1(t,s);var o=N1(t,i);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var vD=$s&&"documentMode"in document&&11>=document.documentMode,vc=null,zx=null,yd=null,Hx=!1;function F1(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Hx||vc==null||vc!==cm(i)||(i=vc,"selectionStart"in i&&iA(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),yd&&kd(yd,i)||(yd=i,i=gm(zx,"onSelect"),0<i.length&&(e=new eA("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=vc)))}function Of(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var yc={animationend:Of("Animation","AnimationEnd"),animationiteration:Of("Animation","AnimationIteration"),animationstart:Of("Animation","AnimationStart"),transitionend:Of("Transition","TransitionEnd")},Gv={},yT={};$s&&(yT=document.createElement("div").style,"AnimationEvent"in window||(delete yc.animationend.animation,delete yc.animationiteration.animation,delete yc.animationstart.animation),"TransitionEvent"in window||delete yc.transitionend.transition);function Rg(n){if(Gv[n])return Gv[n];if(!yc[n])return n;var e=yc[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in yT)return Gv[n]=e[t];return n}var xT=Rg("animationend"),_T=Rg("animationiteration"),AT=Rg("animationstart"),ST=Rg("transitionend"),MT=new Map,U1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ra(n,e){MT.set(n,e),Ml(e,[n])}for(var Vv=0;Vv<U1.length;Vv++){var Wv=U1[Vv],yD=Wv.toLowerCase(),xD=Wv[0].toUpperCase()+Wv.slice(1);ra(yD,"on"+xD)}ra(xT,"onAnimationEnd");ra(_T,"onAnimationIteration");ra(AT,"onAnimationStart");ra("dblclick","onDoubleClick");ra("focusin","onFocus");ra("focusout","onBlur");ra(ST,"onTransitionEnd");Gc("onMouseEnter",["mouseout","mouseover"]);Gc("onMouseLeave",["mouseout","mouseover"]);Gc("onPointerEnter",["pointerout","pointerover"]);Gc("onPointerLeave",["pointerout","pointerover"]);Ml("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ml("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ml("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ml("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ml("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ml("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ud="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_D=new Set("cancel close invalid load scroll toggle".split(" ").concat(ud));function O1(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,yL(i,e,void 0,n),n.currentTarget=null}function wT(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;O1(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;O1(r,a,c),s=l}}}if(dm)throw n=Fx,dm=!1,Fx=null,n}function ln(n,e){var t=e[Xx];t===void 0&&(t=e[Xx]=new Set);var i=n+"__bubble";t.has(i)||(ET(e,n,2,!1),t.add(i))}function jv(n,e,t){var i=0;e&&(i|=4),ET(t,n,i,e)}var kf="_reactListening"+Math.random().toString(36).slice(2);function zd(n){if(!n[kf]){n[kf]=!0,BC.forEach(function(t){t!=="selectionchange"&&(_D.has(t)||jv(t,!1,n),jv(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[kf]||(e[kf]=!0,jv("selectionchange",!1,e))}}function ET(n,e,t,i){switch(lT(e)){case 1:var r=DL;break;case 4:r=NL;break;default:r=Z_}t=r.bind(null,e,t,n),r=void 0,!Nx||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function Xv(n,e,t,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=ja(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}KC(function(){var c=s,h=K_(t),f=[];e:{var p=MT.get(n);if(p!==void 0){var m=eA,y=n;switch(n){case"keypress":if(Zp(t)===0)break e;case"keydown":case"keyup":m=QL;break;case"focusin":y="focus",m=kv;break;case"focusout":y="blur",m=kv;break;case"beforeblur":case"afterblur":m=kv;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=b1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=OL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=$L;break;case xT:case _T:case AT:m=HL;break;case ST:m=tD;break;case"scroll":m=FL;break;case"wheel":m=iD;break;case"copy":case"cut":case"paste":m=VL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=T1}var A=(e&4)!==0,x=!A&&n==="scroll",g=A?p!==null?p+"Capture":null:p;A=[];for(var _=c,M;_!==null;){M=_;var w=M.stateNode;if(M.tag===5&&w!==null&&(M=w,g!==null&&(w=Dd(_,g),w!=null&&A.push(Hd(_,w,M)))),x)break;_=_.return}0<A.length&&(p=new m(p,y,null,t,h),f.push({event:p,listeners:A}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",p&&t!==Lx&&(y=t.relatedTarget||t.fromElement)&&(ja(y)||y[eo]))break e;if((m||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,m?(y=t.relatedTarget||t.toElement,m=c,y=y?ja(y):null,y!==null&&(x=wl(y),y!==x||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=c),m!==y)){if(A=b1,w="onMouseLeave",g="onMouseEnter",_="mouse",(n==="pointerout"||n==="pointerover")&&(A=T1,w="onPointerLeave",g="onPointerEnter",_="pointer"),x=m==null?p:xc(m),M=y==null?p:xc(y),p=new A(w,_+"leave",m,t,h),p.target=x,p.relatedTarget=M,w=null,ja(h)===c&&(A=new A(g,_+"enter",y,t,h),A.target=M,A.relatedTarget=x,w=A),x=w,m&&y)t:{for(A=m,g=y,_=0,M=A;M;M=jl(M))_++;for(M=0,w=g;w;w=jl(w))M++;for(;0<_-M;)A=jl(A),_--;for(;0<M-_;)g=jl(g),M--;for(;_--;){if(A===g||g!==null&&A===g.alternate)break t;A=jl(A),g=jl(g)}A=null}else A=null;m!==null&&k1(f,p,m,A,!1),y!==null&&x!==null&&k1(f,x,y,A,!0)}}e:{if(p=c?xc(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var C=uD;else if(P1(p))if(pT)C=pD;else{C=hD;var R=dD}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(C=fD);if(C&&(C=C(n,c))){fT(f,C,t,h);break e}R&&R(n,p,c),n==="focusout"&&(R=p._wrapperState)&&R.controlled&&p.type==="number"&&Tx(p,"number",p.value)}switch(R=c?xc(c):window,n){case"focusin":(P1(R)||R.contentEditable==="true")&&(vc=R,zx=c,yd=null);break;case"focusout":yd=zx=vc=null;break;case"mousedown":Hx=!0;break;case"contextmenu":case"mouseup":case"dragend":Hx=!1,F1(f,t,h);break;case"selectionchange":if(vD)break;case"keydown":case"keyup":F1(f,t,h)}var P;if(nA)e:{switch(n){case"compositionstart":var B="onCompositionStart";break e;case"compositionend":B="onCompositionEnd";break e;case"compositionupdate":B="onCompositionUpdate";break e}B=void 0}else gc?dT(n,t)&&(B="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(B="onCompositionStart");B&&(uT&&t.locale!=="ko"&&(gc||B!=="onCompositionStart"?B==="onCompositionEnd"&&gc&&(P=cT()):(Ho=h,$_="value"in Ho?Ho.value:Ho.textContent,gc=!0)),R=gm(c,B),0<R.length&&(B=new C1(B,n,null,t,h),f.push({event:B,listeners:R}),P?B.data=P:(P=hT(t),P!==null&&(B.data=P)))),(P=sD?oD(n,t):aD(n,t))&&(c=gm(c,"onBeforeInput"),0<c.length&&(h=new C1("onBeforeInput","beforeinput",null,t,h),f.push({event:h,listeners:c}),h.data=P))}wT(f,e)})}function Hd(n,e,t){return{instance:n,listener:e,currentTarget:t}}function gm(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Dd(n,t),s!=null&&i.unshift(Hd(n,s,r)),s=Dd(n,e),s!=null&&i.push(Hd(n,s,r))),n=n.return}return i}function jl(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function k1(n,e,t,i,r){for(var s=e._reactName,o=[];t!==null&&t!==i;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=Dd(t,s),l!=null&&o.unshift(Hd(t,l,a))):r||(l=Dd(t,s),l!=null&&o.push(Hd(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var AD=/\r\n?/g,SD=/\u0000|\uFFFD/g;function z1(n){return(typeof n=="string"?n:""+n).replace(AD,`
`).replace(SD,"")}function zf(n,e,t){if(e=z1(e),z1(n)!==e&&t)throw Error(Ce(425))}function vm(){}var Gx=null,Vx=null;function Wx(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var jx=typeof setTimeout=="function"?setTimeout:void 0,MD=typeof clearTimeout=="function"?clearTimeout:void 0,H1=typeof Promise=="function"?Promise:void 0,wD=typeof queueMicrotask=="function"?queueMicrotask:typeof H1<"u"?function(n){return H1.resolve(null).then(n).catch(ED)}:jx;function ED(n){setTimeout(function(){throw n})}function Jv(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),Ud(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);Ud(e)}function Jo(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function G1(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var ru=Math.random().toString(36).slice(2),ds="__reactFiber$"+ru,Gd="__reactProps$"+ru,eo="__reactContainer$"+ru,Xx="__reactEvents$"+ru,bD="__reactListeners$"+ru,CD="__reactHandles$"+ru;function ja(n){var e=n[ds];if(e)return e;for(var t=n.parentNode;t;){if(e=t[eo]||t[ds]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=G1(n);n!==null;){if(t=n[ds])return t;n=G1(n)}return e}n=t,t=n.parentNode}return null}function dh(n){return n=n[ds]||n[eo],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function xc(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Ce(33))}function Ig(n){return n[Gd]||null}var Jx=[],_c=-1;function sa(n){return{current:n}}function cn(n){0>_c||(n.current=Jx[_c],Jx[_c]=null,_c--)}function rn(n,e){_c++,Jx[_c]=n.current,n.current=e}var ea={},Ei=sa(ea),Qi=sa(!1),cl=ea;function Vc(n,e){var t=n.type.contextTypes;if(!t)return ea;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function qi(n){return n=n.childContextTypes,n!=null}function ym(){cn(Qi),cn(Ei)}function V1(n,e,t){if(Ei.current!==ea)throw Error(Ce(168));rn(Ei,e),rn(Qi,t)}function bT(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(Ce(108,dL(n)||"Unknown",r));return An({},t,i)}function xm(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ea,cl=Ei.current,rn(Ei,n),rn(Qi,Qi.current),!0}function W1(n,e,t){var i=n.stateNode;if(!i)throw Error(Ce(169));t?(n=bT(n,e,cl),i.__reactInternalMemoizedMergedChildContext=n,cn(Qi),cn(Ei),rn(Ei,n)):cn(Qi),rn(Qi,t)}var zs=null,Pg=!1,Kv=!1;function CT(n){zs===null?zs=[n]:zs.push(n)}function TD(n){Pg=!0,CT(n)}function oa(){if(!Kv&&zs!==null){Kv=!0;var n=0,e=qt;try{var t=zs;for(qt=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}zs=null,Pg=!1}catch(r){throw zs!==null&&(zs=zs.slice(n+1)),ZC(Y_,oa),r}finally{qt=e,Kv=!1}}return null}var Ac=[],Sc=0,_m=null,Am=0,wr=[],Er=0,ul=null,js=1,Xs="";function Oa(n,e){Ac[Sc++]=Am,Ac[Sc++]=_m,_m=n,Am=e}function TT(n,e,t){wr[Er++]=js,wr[Er++]=Xs,wr[Er++]=ul,ul=n;var i=js;n=Xs;var r=32-jr(i)-1;i&=~(1<<r),t+=1;var s=32-jr(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,js=1<<32-jr(e)+r|t<<r|i,Xs=s+n}else js=1<<s|t<<r|i,Xs=n}function rA(n){n.return!==null&&(Oa(n,1),TT(n,1,0))}function sA(n){for(;n===_m;)_m=Ac[--Sc],Ac[Sc]=null,Am=Ac[--Sc],Ac[Sc]=null;for(;n===ul;)ul=wr[--Er],wr[Er]=null,Xs=wr[--Er],wr[Er]=null,js=wr[--Er],wr[Er]=null}var ar=null,or=null,fn=!1,Vr=null;function RT(n,e){var t=Tr(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function j1(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,ar=n,or=Jo(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,ar=n,or=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=ul!==null?{id:js,overflow:Xs}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Tr(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,ar=n,or=null,!0):!1;default:return!1}}function Kx(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Yx(n){if(fn){var e=or;if(e){var t=e;if(!j1(n,e)){if(Kx(n))throw Error(Ce(418));e=Jo(t.nextSibling);var i=ar;e&&j1(n,e)?RT(i,t):(n.flags=n.flags&-4097|2,fn=!1,ar=n)}}else{if(Kx(n))throw Error(Ce(418));n.flags=n.flags&-4097|2,fn=!1,ar=n}}}function X1(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;ar=n}function Hf(n){if(n!==ar)return!1;if(!fn)return X1(n),fn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!Wx(n.type,n.memoizedProps)),e&&(e=or)){if(Kx(n))throw IT(),Error(Ce(418));for(;e;)RT(n,e),e=Jo(e.nextSibling)}if(X1(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Ce(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){or=Jo(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}or=null}}else or=ar?Jo(n.stateNode.nextSibling):null;return!0}function IT(){for(var n=or;n;)n=Jo(n.nextSibling)}function Wc(){or=ar=null,fn=!1}function oA(n){Vr===null?Vr=[n]:Vr.push(n)}var RD=uo.ReactCurrentBatchConfig;function Fu(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Ce(309));var i=t.stateNode}if(!i)throw Error(Ce(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(Ce(284));if(!t._owner)throw Error(Ce(290,n))}return n}function Gf(n,e){throw n=Object.prototype.toString.call(e),Error(Ce(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function J1(n){var e=n._init;return e(n._payload)}function PT(n){function e(g,_){if(n){var M=g.deletions;M===null?(g.deletions=[_],g.flags|=16):M.push(_)}}function t(g,_){if(!n)return null;for(;_!==null;)e(g,_),_=_.sibling;return null}function i(g,_){for(g=new Map;_!==null;)_.key!==null?g.set(_.key,_):g.set(_.index,_),_=_.sibling;return g}function r(g,_){return g=qo(g,_),g.index=0,g.sibling=null,g}function s(g,_,M){return g.index=M,n?(M=g.alternate,M!==null?(M=M.index,M<_?(g.flags|=2,_):M):(g.flags|=2,_)):(g.flags|=1048576,_)}function o(g){return n&&g.alternate===null&&(g.flags|=2),g}function a(g,_,M,w){return _===null||_.tag!==6?(_=ty(M,g.mode,w),_.return=g,_):(_=r(_,M),_.return=g,_)}function l(g,_,M,w){var C=M.type;return C===mc?h(g,_,M.props.children,w,M.key):_!==null&&(_.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===No&&J1(C)===_.type)?(w=r(_,M.props),w.ref=Fu(g,_,M),w.return=g,w):(w=sm(M.type,M.key,M.props,null,g.mode,w),w.ref=Fu(g,_,M),w.return=g,w)}function c(g,_,M,w){return _===null||_.tag!==4||_.stateNode.containerInfo!==M.containerInfo||_.stateNode.implementation!==M.implementation?(_=ny(M,g.mode,w),_.return=g,_):(_=r(_,M.children||[]),_.return=g,_)}function h(g,_,M,w,C){return _===null||_.tag!==7?(_=il(M,g.mode,w,C),_.return=g,_):(_=r(_,M),_.return=g,_)}function f(g,_,M){if(typeof _=="string"&&_!==""||typeof _=="number")return _=ty(""+_,g.mode,M),_.return=g,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Pf:return M=sm(_.type,_.key,_.props,null,g.mode,M),M.ref=Fu(g,null,_),M.return=g,M;case pc:return _=ny(_,g.mode,M),_.return=g,_;case No:var w=_._init;return f(g,w(_._payload),M)}if(ld(_)||Pu(_))return _=il(_,g.mode,M,null),_.return=g,_;Gf(g,_)}return null}function p(g,_,M,w){var C=_!==null?_.key:null;if(typeof M=="string"&&M!==""||typeof M=="number")return C!==null?null:a(g,_,""+M,w);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Pf:return M.key===C?l(g,_,M,w):null;case pc:return M.key===C?c(g,_,M,w):null;case No:return C=M._init,p(g,_,C(M._payload),w)}if(ld(M)||Pu(M))return C!==null?null:h(g,_,M,w,null);Gf(g,M)}return null}function m(g,_,M,w,C){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(M)||null,a(_,g,""+w,C);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Pf:return g=g.get(w.key===null?M:w.key)||null,l(_,g,w,C);case pc:return g=g.get(w.key===null?M:w.key)||null,c(_,g,w,C);case No:var R=w._init;return m(g,_,M,R(w._payload),C)}if(ld(w)||Pu(w))return g=g.get(M)||null,h(_,g,w,C,null);Gf(_,w)}return null}function y(g,_,M,w){for(var C=null,R=null,P=_,B=_=0,I=null;P!==null&&B<M.length;B++){P.index>B?(I=P,P=null):I=P.sibling;var b=p(g,P,M[B],w);if(b===null){P===null&&(P=I);break}n&&P&&b.alternate===null&&e(g,P),_=s(b,_,B),R===null?C=b:R.sibling=b,R=b,P=I}if(B===M.length)return t(g,P),fn&&Oa(g,B),C;if(P===null){for(;B<M.length;B++)P=f(g,M[B],w),P!==null&&(_=s(P,_,B),R===null?C=P:R.sibling=P,R=P);return fn&&Oa(g,B),C}for(P=i(g,P);B<M.length;B++)I=m(P,g,B,M[B],w),I!==null&&(n&&I.alternate!==null&&P.delete(I.key===null?B:I.key),_=s(I,_,B),R===null?C=I:R.sibling=I,R=I);return n&&P.forEach(function(U){return e(g,U)}),fn&&Oa(g,B),C}function A(g,_,M,w){var C=Pu(M);if(typeof C!="function")throw Error(Ce(150));if(M=C.call(M),M==null)throw Error(Ce(151));for(var R=C=null,P=_,B=_=0,I=null,b=M.next();P!==null&&!b.done;B++,b=M.next()){P.index>B?(I=P,P=null):I=P.sibling;var U=p(g,P,b.value,w);if(U===null){P===null&&(P=I);break}n&&P&&U.alternate===null&&e(g,P),_=s(U,_,B),R===null?C=U:R.sibling=U,R=U,P=I}if(b.done)return t(g,P),fn&&Oa(g,B),C;if(P===null){for(;!b.done;B++,b=M.next())b=f(g,b.value,w),b!==null&&(_=s(b,_,B),R===null?C=b:R.sibling=b,R=b);return fn&&Oa(g,B),C}for(P=i(g,P);!b.done;B++,b=M.next())b=m(P,g,B,b.value,w),b!==null&&(n&&b.alternate!==null&&P.delete(b.key===null?B:b.key),_=s(b,_,B),R===null?C=b:R.sibling=b,R=b);return n&&P.forEach(function(H){return e(g,H)}),fn&&Oa(g,B),C}function x(g,_,M,w){if(typeof M=="object"&&M!==null&&M.type===mc&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case Pf:e:{for(var C=M.key,R=_;R!==null;){if(R.key===C){if(C=M.type,C===mc){if(R.tag===7){t(g,R.sibling),_=r(R,M.props.children),_.return=g,g=_;break e}}else if(R.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===No&&J1(C)===R.type){t(g,R.sibling),_=r(R,M.props),_.ref=Fu(g,R,M),_.return=g,g=_;break e}t(g,R);break}else e(g,R);R=R.sibling}M.type===mc?(_=il(M.props.children,g.mode,w,M.key),_.return=g,g=_):(w=sm(M.type,M.key,M.props,null,g.mode,w),w.ref=Fu(g,_,M),w.return=g,g=w)}return o(g);case pc:e:{for(R=M.key;_!==null;){if(_.key===R)if(_.tag===4&&_.stateNode.containerInfo===M.containerInfo&&_.stateNode.implementation===M.implementation){t(g,_.sibling),_=r(_,M.children||[]),_.return=g,g=_;break e}else{t(g,_);break}else e(g,_);_=_.sibling}_=ny(M,g.mode,w),_.return=g,g=_}return o(g);case No:return R=M._init,x(g,_,R(M._payload),w)}if(ld(M))return y(g,_,M,w);if(Pu(M))return A(g,_,M,w);Gf(g,M)}return typeof M=="string"&&M!==""||typeof M=="number"?(M=""+M,_!==null&&_.tag===6?(t(g,_.sibling),_=r(_,M),_.return=g,g=_):(t(g,_),_=ty(M,g.mode,w),_.return=g,g=_),o(g)):t(g,_)}return x}var jc=PT(!0),BT=PT(!1),Sm=sa(null),Mm=null,Mc=null,aA=null;function lA(){aA=Mc=Mm=null}function cA(n){var e=Sm.current;cn(Sm),n._currentValue=e}function Qx(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function Dc(n,e){Mm=n,aA=Mc=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Ji=!0),n.firstContext=null)}function Pr(n){var e=n._currentValue;if(aA!==n)if(n={context:n,memoizedValue:e,next:null},Mc===null){if(Mm===null)throw Error(Ce(308));Mc=n,Mm.dependencies={lanes:0,firstContext:n}}else Mc=Mc.next=n;return e}var Xa=null;function uA(n){Xa===null?Xa=[n]:Xa.push(n)}function LT(n,e,t,i){var r=e.interleaved;return r===null?(t.next=t,uA(e)):(t.next=r.next,r.next=t),e.interleaved=t,to(n,i)}function to(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Fo=!1;function dA(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function DT(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Ks(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Ko(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,Wt&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,to(n,t)}return r=i.interleaved,r===null?(e.next=e,uA(i)):(e.next=r.next,r.next=e),i.interleaved=e,to(n,t)}function $p(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,Q_(n,t)}}function K1(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function wm(n,e,t,i){var r=n.updateQueue;Fo=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=n.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var f=r.baseState;o=0,h=c=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((i&p)===p){h!==null&&(h=h.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=n,A=a;switch(p=e,m=t,A.tag){case 1:if(y=A.payload,typeof y=="function"){f=y.call(m,f,p);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=A.payload,p=typeof y=="function"?y.call(m,f,p):y,p==null)break e;f=An({},f,p);break e;case 2:Fo=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=r.effects,p===null?r.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=m,l=f):h=h.next=m,o|=p;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;p=a,a=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(!0);if(h===null&&(l=f),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);hl|=o,n.lanes=o,n.memoizedState=f}}function Y1(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(Ce(191,r));r.call(i)}}}var hh={},ps=sa(hh),Vd=sa(hh),Wd=sa(hh);function Ja(n){if(n===hh)throw Error(Ce(174));return n}function hA(n,e){switch(rn(Wd,e),rn(Vd,n),rn(ps,hh),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ix(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=Ix(e,n)}cn(ps),rn(ps,e)}function Xc(){cn(ps),cn(Vd),cn(Wd)}function NT(n){Ja(Wd.current);var e=Ja(ps.current),t=Ix(e,n.type);e!==t&&(rn(Vd,n),rn(ps,t))}function fA(n){Vd.current===n&&(cn(ps),cn(Vd))}var gn=sa(0);function Em(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Yv=[];function pA(){for(var n=0;n<Yv.length;n++)Yv[n]._workInProgressVersionPrimary=null;Yv.length=0}var em=uo.ReactCurrentDispatcher,Qv=uo.ReactCurrentBatchConfig,dl=0,_n=null,Vn=null,$n=null,bm=!1,xd=!1,jd=0,ID=0;function mi(){throw Error(Ce(321))}function mA(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Jr(n[t],e[t]))return!1;return!0}function gA(n,e,t,i,r,s){if(dl=s,_n=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,em.current=n===null||n.memoizedState===null?DD:ND,n=t(i,r),xd){s=0;do{if(xd=!1,jd=0,25<=s)throw Error(Ce(301));s+=1,$n=Vn=null,e.updateQueue=null,em.current=FD,n=t(i,r)}while(xd)}if(em.current=Cm,e=Vn!==null&&Vn.next!==null,dl=0,$n=Vn=_n=null,bm=!1,e)throw Error(Ce(300));return n}function vA(){var n=jd!==0;return jd=0,n}function us(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $n===null?_n.memoizedState=$n=n:$n=$n.next=n,$n}function Br(){if(Vn===null){var n=_n.alternate;n=n!==null?n.memoizedState:null}else n=Vn.next;var e=$n===null?_n.memoizedState:$n.next;if(e!==null)$n=e,Vn=n;else{if(n===null)throw Error(Ce(310));Vn=n,n={memoizedState:Vn.memoizedState,baseState:Vn.baseState,baseQueue:Vn.baseQueue,queue:Vn.queue,next:null},$n===null?_n.memoizedState=$n=n:$n=$n.next=n}return $n}function Xd(n,e){return typeof e=="function"?e(n):e}function qv(n){var e=Br(),t=e.queue;if(t===null)throw Error(Ce(311));t.lastRenderedReducer=n;var i=Vn,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((dl&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:n(i,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=i):l=l.next=f,_n.lanes|=h,hl|=h}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,Jr(i,e.memoizedState)||(Ji=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,_n.lanes|=s,hl|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Zv(n){var e=Br(),t=e.queue;if(t===null)throw Error(Ce(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do s=n(s,o.action),o=o.next;while(o!==r);Jr(s,e.memoizedState)||(Ji=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function FT(){}function UT(n,e){var t=_n,i=Br(),r=e(),s=!Jr(i.memoizedState,r);if(s&&(i.memoizedState=r,Ji=!0),i=i.queue,yA(zT.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||$n!==null&&$n.memoizedState.tag&1){if(t.flags|=2048,Jd(9,kT.bind(null,t,i,r,e),void 0,null),ei===null)throw Error(Ce(349));dl&30||OT(t,e,r)}return r}function OT(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=_n.updateQueue,e===null?(e={lastEffect:null,stores:null},_n.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function kT(n,e,t,i){e.value=t,e.getSnapshot=i,HT(e)&&GT(n)}function zT(n,e,t){return t(function(){HT(e)&&GT(n)})}function HT(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Jr(n,t)}catch{return!0}}function GT(n){var e=to(n,1);e!==null&&Xr(e,n,1,-1)}function Q1(n){var e=us();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xd,lastRenderedState:n},e.queue=n,n=n.dispatch=LD.bind(null,_n,n),[e.memoizedState,n]}function Jd(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=_n.updateQueue,e===null?(e={lastEffect:null,stores:null},_n.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function VT(){return Br().memoizedState}function tm(n,e,t,i){var r=us();_n.flags|=n,r.memoizedState=Jd(1|e,t,void 0,i===void 0?null:i)}function Bg(n,e,t,i){var r=Br();i=i===void 0?null:i;var s=void 0;if(Vn!==null){var o=Vn.memoizedState;if(s=o.destroy,i!==null&&mA(i,o.deps)){r.memoizedState=Jd(e,t,s,i);return}}_n.flags|=n,r.memoizedState=Jd(1|e,t,s,i)}function q1(n,e){return tm(8390656,8,n,e)}function yA(n,e){return Bg(2048,8,n,e)}function WT(n,e){return Bg(4,2,n,e)}function jT(n,e){return Bg(4,4,n,e)}function XT(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function JT(n,e,t){return t=t!=null?t.concat([n]):null,Bg(4,4,XT.bind(null,e,n),t)}function xA(){}function KT(n,e){var t=Br();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&mA(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function YT(n,e){var t=Br();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&mA(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function QT(n,e,t){return dl&21?(Jr(t,e)||(t=tT(),_n.lanes|=t,hl|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Ji=!0),n.memoizedState=t)}function PD(n,e){var t=qt;qt=t!==0&&4>t?t:4,n(!0);var i=Qv.transition;Qv.transition={};try{n(!1),e()}finally{qt=t,Qv.transition=i}}function qT(){return Br().memoizedState}function BD(n,e,t){var i=Qo(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},ZT(n))$T(e,t);else if(t=LT(n,e,t,i),t!==null){var r=Ni();Xr(t,n,i,r),eR(t,e,i)}}function LD(n,e,t){var i=Qo(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(ZT(n))$T(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(r.hasEagerState=!0,r.eagerState=a,Jr(a,o)){var l=e.interleaved;l===null?(r.next=r,uA(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}t=LT(n,e,r,i),t!==null&&(r=Ni(),Xr(t,n,i,r),eR(t,e,i))}}function ZT(n){var e=n.alternate;return n===_n||e!==null&&e===_n}function $T(n,e){xd=bm=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function eR(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,Q_(n,t)}}var Cm={readContext:Pr,useCallback:mi,useContext:mi,useEffect:mi,useImperativeHandle:mi,useInsertionEffect:mi,useLayoutEffect:mi,useMemo:mi,useReducer:mi,useRef:mi,useState:mi,useDebugValue:mi,useDeferredValue:mi,useTransition:mi,useMutableSource:mi,useSyncExternalStore:mi,useId:mi,unstable_isNewReconciler:!1},DD={readContext:Pr,useCallback:function(n,e){return us().memoizedState=[n,e===void 0?null:e],n},useContext:Pr,useEffect:q1,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,tm(4194308,4,XT.bind(null,e,n),t)},useLayoutEffect:function(n,e){return tm(4194308,4,n,e)},useInsertionEffect:function(n,e){return tm(4,2,n,e)},useMemo:function(n,e){var t=us();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=us();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=BD.bind(null,_n,n),[i.memoizedState,n]},useRef:function(n){var e=us();return n={current:n},e.memoizedState=n},useState:Q1,useDebugValue:xA,useDeferredValue:function(n){return us().memoizedState=n},useTransition:function(){var n=Q1(!1),e=n[0];return n=PD.bind(null,n[1]),us().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=_n,r=us();if(fn){if(t===void 0)throw Error(Ce(407));t=t()}else{if(t=e(),ei===null)throw Error(Ce(349));dl&30||OT(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,q1(zT.bind(null,i,s,n),[n]),i.flags|=2048,Jd(9,kT.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=us(),e=ei.identifierPrefix;if(fn){var t=Xs,i=js;t=(i&~(1<<32-jr(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=jd++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=ID++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},ND={readContext:Pr,useCallback:KT,useContext:Pr,useEffect:yA,useImperativeHandle:JT,useInsertionEffect:WT,useLayoutEffect:jT,useMemo:YT,useReducer:qv,useRef:VT,useState:function(){return qv(Xd)},useDebugValue:xA,useDeferredValue:function(n){var e=Br();return QT(e,Vn.memoizedState,n)},useTransition:function(){var n=qv(Xd)[0],e=Br().memoizedState;return[n,e]},useMutableSource:FT,useSyncExternalStore:UT,useId:qT,unstable_isNewReconciler:!1},FD={readContext:Pr,useCallback:KT,useContext:Pr,useEffect:yA,useImperativeHandle:JT,useInsertionEffect:WT,useLayoutEffect:jT,useMemo:YT,useReducer:Zv,useRef:VT,useState:function(){return Zv(Xd)},useDebugValue:xA,useDeferredValue:function(n){var e=Br();return Vn===null?e.memoizedState=n:QT(e,Vn.memoizedState,n)},useTransition:function(){var n=Zv(Xd)[0],e=Br().memoizedState;return[n,e]},useMutableSource:FT,useSyncExternalStore:UT,useId:qT,unstable_isNewReconciler:!1};function zr(n,e){if(n&&n.defaultProps){e=An({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function qx(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:An({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Lg={isMounted:function(n){return(n=n._reactInternals)?wl(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=Ni(),r=Qo(n),s=Ks(i,r);s.payload=e,t!=null&&(s.callback=t),e=Ko(n,s,r),e!==null&&(Xr(e,n,r,i),$p(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=Ni(),r=Qo(n),s=Ks(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Ko(n,s,r),e!==null&&(Xr(e,n,r,i),$p(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Ni(),i=Qo(n),r=Ks(t,i);r.tag=2,e!=null&&(r.callback=e),e=Ko(n,r,i),e!==null&&(Xr(e,n,i,t),$p(e,n,i))}};function Z1(n,e,t,i,r,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!kd(t,i)||!kd(r,s):!0}function tR(n,e,t){var i=!1,r=ea,s=e.contextType;return typeof s=="object"&&s!==null?s=Pr(s):(r=qi(e)?cl:Ei.current,i=e.contextTypes,s=(i=i!=null)?Vc(n,r):ea),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Lg,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function $1(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&Lg.enqueueReplaceState(e,e.state,null)}function Zx(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs={},dA(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Pr(s):(s=qi(e)?cl:Ei.current,r.context=Vc(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(qx(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Lg.enqueueReplaceState(r,r.state,null),wm(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function Jc(n,e){try{var t="",i=e;do t+=uL(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r,digest:null}}function $v(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function $x(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var UD=typeof WeakMap=="function"?WeakMap:Map;function nR(n,e,t){t=Ks(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){Rm||(Rm=!0,c_=i),$x(n,e)},t}function iR(n,e,t){t=Ks(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){$x(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){$x(n,e),typeof i!="function"&&(Yo===null?Yo=new Set([this]):Yo.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function ew(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new UD;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=qD.bind(null,n,e,t),e.then(n,n))}function tw(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function nw(n,e,t,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Ks(-1,1),e.tag=2,Ko(t,e,1))),t.lanes|=1),n)}var OD=uo.ReactCurrentOwner,Ji=!1;function Bi(n,e,t,i){e.child=n===null?BT(e,null,t,i):jc(e,n.child,t,i)}function iw(n,e,t,i,r){t=t.render;var s=e.ref;return Dc(e,r),i=gA(n,e,t,i,s,r),t=vA(),n!==null&&!Ji?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,no(n,e,r)):(fn&&t&&rA(e),e.flags|=1,Bi(n,e,i,r),e.child)}function rw(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!CA(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,rR(n,e,s,i,r)):(n=sm(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&r)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:kd,t(o,i)&&n.ref===e.ref)return no(n,e,r)}return e.flags|=1,n=qo(s,i),n.ref=e.ref,n.return=e,e.child=n}function rR(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(kd(s,i)&&n.ref===e.ref)if(Ji=!1,e.pendingProps=i=s,(n.lanes&r)!==0)n.flags&131072&&(Ji=!0);else return e.lanes=n.lanes,no(n,e,r)}return e_(n,e,t,i,r)}function sR(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},rn(Ec,sr),sr|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,rn(Ec,sr),sr|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:t,rn(Ec,sr),sr|=i}else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,rn(Ec,sr),sr|=i;return Bi(n,e,r,t),e.child}function oR(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function e_(n,e,t,i,r){var s=qi(t)?cl:Ei.current;return s=Vc(e,s),Dc(e,r),t=gA(n,e,t,i,s,r),i=vA(),n!==null&&!Ji?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,no(n,e,r)):(fn&&i&&rA(e),e.flags|=1,Bi(n,e,t,r),e.child)}function sw(n,e,t,i,r){if(qi(t)){var s=!0;xm(e)}else s=!1;if(Dc(e,r),e.stateNode===null)nm(n,e),tR(e,t,i),Zx(e,t,i,r),i=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=Pr(c):(c=qi(t)?cl:Ei.current,c=Vc(e,c));var h=t.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&$1(e,o,i,c),Fo=!1;var p=e.memoizedState;o.state=p,wm(e,i,o,r),l=e.memoizedState,a!==i||p!==l||Qi.current||Fo?(typeof h=="function"&&(qx(e,t,h,i),l=e.memoizedState),(a=Fo||Z1(e,t,a,i,p,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,DT(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:zr(e.type,a),o.props=c,f=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Pr(l):(l=qi(t)?cl:Ei.current,l=Vc(e,l));var m=t.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&$1(e,o,i,l),Fo=!1,p=e.memoizedState,o.state=p,wm(e,i,o,r);var y=e.memoizedState;a!==f||p!==y||Qi.current||Fo?(typeof m=="function"&&(qx(e,t,m,i),y=e.memoizedState),(c=Fo||Z1(e,t,c,i,p,y,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=y),o.props=i,o.state=y,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),i=!1)}return t_(n,e,t,i,s,r)}function t_(n,e,t,i,r,s){oR(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&W1(e,t,!1),no(n,e,s);i=e.stateNode,OD.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=jc(e,n.child,null,s),e.child=jc(e,null,a,s)):Bi(n,e,a,s),e.memoizedState=i.state,r&&W1(e,t,!0),e.child}function aR(n){var e=n.stateNode;e.pendingContext?V1(n,e.pendingContext,e.pendingContext!==e.context):e.context&&V1(n,e.context,!1),hA(n,e.containerInfo)}function ow(n,e,t,i,r){return Wc(),oA(r),e.flags|=256,Bi(n,e,t,i),e.child}var n_={dehydrated:null,treeContext:null,retryLane:0};function i_(n){return{baseLanes:n,cachePool:null,transitions:null}}function lR(n,e,t){var i=e.pendingProps,r=gn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),rn(gn,r&1),n===null)return Yx(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,n=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Fg(o,i,0,null),n=il(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=i_(t),e.memoizedState=n_,n):_A(e,o));if(r=n.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return kD(n,e,o,i,a,r,t);if(s){s=i.fallback,o=e.mode,r=n.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=qo(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=qo(a,s):(s=il(s,o,t,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=n.child.memoizedState,o=o===null?i_(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=n_,i}return s=n.child,n=s.sibling,i=qo(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function _A(n,e){return e=Fg({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Vf(n,e,t,i){return i!==null&&oA(i),jc(e,n.child,null,t),n=_A(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function kD(n,e,t,i,r,s,o){if(t)return e.flags&256?(e.flags&=-257,i=$v(Error(Ce(422))),Vf(n,e,o,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Fg({mode:"visible",children:i.children},r,0,null),s=il(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&jc(e,n.child,null,o),e.child.memoizedState=i_(o),e.memoizedState=n_,s);if(!(e.mode&1))return Vf(n,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(Ce(419)),i=$v(s,i,void 0),Vf(n,e,o,i)}if(a=(o&n.childLanes)!==0,Ji||a){if(i=ei,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,to(n,r),Xr(i,n,r,-1))}return bA(),i=$v(Error(Ce(421))),Vf(n,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=ZD.bind(null,n),r._reactRetry=e,null):(n=s.treeContext,or=Jo(r.nextSibling),ar=e,fn=!0,Vr=null,n!==null&&(wr[Er++]=js,wr[Er++]=Xs,wr[Er++]=ul,js=n.id,Xs=n.overflow,ul=e),e=_A(e,i.children),e.flags|=4096,e)}function aw(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),Qx(n.return,e,t)}function ey(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function cR(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Bi(n,e,i.children,t),i=gn.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&aw(n,t,e);else if(n.tag===19)aw(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(rn(gn,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&Em(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),ey(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&Em(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}ey(e,!0,t,null,s);break;case"together":ey(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function nm(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function no(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),hl|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Ce(153));if(e.child!==null){for(n=e.child,t=qo(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=qo(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function zD(n,e,t){switch(e.tag){case 3:aR(e),Wc();break;case 5:NT(e);break;case 1:qi(e.type)&&xm(e);break;case 4:hA(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;rn(Sm,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(rn(gn,gn.current&1),e.flags|=128,null):t&e.child.childLanes?lR(n,e,t):(rn(gn,gn.current&1),n=no(n,e,t),n!==null?n.sibling:null);rn(gn,gn.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return cR(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),rn(gn,gn.current),i)break;return null;case 22:case 23:return e.lanes=0,sR(n,e,t)}return no(n,e,t)}var uR,r_,dR,hR;uR=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};r_=function(){};dR=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,Ja(ps.current);var s=null;switch(t){case"input":r=bx(n,r),i=bx(n,i),s=[];break;case"select":r=An({},r,{value:void 0}),i=An({},i,{value:void 0}),s=[];break;case"textarea":r=Rx(n,r),i=Rx(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=vm)}Px(t,i);var o;t=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Bd.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Bd.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ln("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};hR=function(n,e,t,i){t!==i&&(e.flags|=4)};function Uu(n,e){if(!fn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function gi(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function HD(n,e,t){var i=e.pendingProps;switch(sA(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gi(e),null;case 1:return qi(e.type)&&ym(),gi(e),null;case 3:return i=e.stateNode,Xc(),cn(Qi),cn(Ei),pA(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(Hf(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Vr!==null&&(h_(Vr),Vr=null))),r_(n,e),gi(e),null;case 5:fA(e);var r=Ja(Wd.current);if(t=e.type,n!==null&&e.stateNode!=null)dR(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Ce(166));return gi(e),null}if(n=Ja(ps.current),Hf(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[ds]=e,i[Gd]=s,n=(e.mode&1)!==0,t){case"dialog":ln("cancel",i),ln("close",i);break;case"iframe":case"object":case"embed":ln("load",i);break;case"video":case"audio":for(r=0;r<ud.length;r++)ln(ud[r],i);break;case"source":ln("error",i);break;case"img":case"image":case"link":ln("error",i),ln("load",i);break;case"details":ln("toggle",i);break;case"input":g1(i,s),ln("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},ln("invalid",i);break;case"textarea":y1(i,s),ln("invalid",i)}Px(t,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&zf(i.textContent,a,n),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&zf(i.textContent,a,n),r=["children",""+a]):Bd.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ln("scroll",i)}switch(t){case"input":Bf(i),v1(i,s,!0);break;case"textarea":Bf(i),x1(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=vm)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=zC(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[ds]=e,n[Gd]=i,uR(n,e,!1,!1),e.stateNode=n;e:{switch(o=Bx(t,i),t){case"dialog":ln("cancel",n),ln("close",n),r=i;break;case"iframe":case"object":case"embed":ln("load",n),r=i;break;case"video":case"audio":for(r=0;r<ud.length;r++)ln(ud[r],n);r=i;break;case"source":ln("error",n),r=i;break;case"img":case"image":case"link":ln("error",n),ln("load",n),r=i;break;case"details":ln("toggle",n),r=i;break;case"input":g1(n,i),r=bx(n,i),ln("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=An({},i,{value:void 0}),ln("invalid",n);break;case"textarea":y1(n,i),r=Rx(n,i),ln("invalid",n);break;default:r=i}Px(t,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?VC(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&HC(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Ld(n,l):typeof l=="number"&&Ld(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Bd.hasOwnProperty(s)?l!=null&&s==="onScroll"&&ln("scroll",n):l!=null&&W_(n,s,l,o))}switch(t){case"input":Bf(n),v1(n,i,!1);break;case"textarea":Bf(n),x1(n);break;case"option":i.value!=null&&n.setAttribute("value",""+$o(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?Ic(n,!!i.multiple,s,!1):i.defaultValue!=null&&Ic(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=vm)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return gi(e),null;case 6:if(n&&e.stateNode!=null)hR(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Ce(166));if(t=Ja(Wd.current),Ja(ps.current),Hf(e)){if(i=e.stateNode,t=e.memoizedProps,i[ds]=e,(s=i.nodeValue!==t)&&(n=ar,n!==null))switch(n.tag){case 3:zf(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&zf(i.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[ds]=e,e.stateNode=i}return gi(e),null;case 13:if(cn(gn),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(fn&&or!==null&&e.mode&1&&!(e.flags&128))IT(),Wc(),e.flags|=98560,s=!1;else if(s=Hf(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(Ce(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ce(317));s[ds]=e}else Wc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;gi(e),s=!1}else Vr!==null&&(h_(Vr),Vr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||gn.current&1?Wn===0&&(Wn=3):bA())),e.updateQueue!==null&&(e.flags|=4),gi(e),null);case 4:return Xc(),r_(n,e),n===null&&zd(e.stateNode.containerInfo),gi(e),null;case 10:return cA(e.type._context),gi(e),null;case 17:return qi(e.type)&&ym(),gi(e),null;case 19:if(cn(gn),s=e.memoizedState,s===null)return gi(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)Uu(s,!1);else{if(Wn!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Em(n),o!==null){for(e.flags|=128,Uu(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return rn(gn,gn.current&1|2),e.child}n=n.sibling}s.tail!==null&&Pn()>Kc&&(e.flags|=128,i=!0,Uu(s,!1),e.lanes=4194304)}else{if(!i)if(n=Em(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Uu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!fn)return gi(e),null}else 2*Pn()-s.renderingStartTime>Kc&&t!==1073741824&&(e.flags|=128,i=!0,Uu(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Pn(),e.sibling=null,t=gn.current,rn(gn,i?t&1|2:t&1),e):(gi(e),null);case 22:case 23:return EA(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?sr&1073741824&&(gi(e),e.subtreeFlags&6&&(e.flags|=8192)):gi(e),null;case 24:return null;case 25:return null}throw Error(Ce(156,e.tag))}function GD(n,e){switch(sA(e),e.tag){case 1:return qi(e.type)&&ym(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Xc(),cn(Qi),cn(Ei),pA(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return fA(e),null;case 13:if(cn(gn),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Ce(340));Wc()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return cn(gn),null;case 4:return Xc(),null;case 10:return cA(e.type._context),null;case 22:case 23:return EA(),null;case 24:return null;default:return null}}var Wf=!1,Ai=!1,VD=typeof WeakSet=="function"?WeakSet:Set,Ye=null;function wc(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){wn(n,e,i)}else t.current=null}function s_(n,e,t){try{t()}catch(i){wn(n,e,i)}}var lw=!1;function WD(n,e){if(Gx=pm,n=vT(),iA(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,h=0,f=n,p=null;t:for(;;){for(var m;f!==t||r!==0&&f.nodeType!==3||(a=o+r),f!==s||i!==0&&f.nodeType!==3||(l=o+i),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===n)break t;if(p===t&&++c===r&&(a=o),p===s&&++h===i&&(l=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(Vx={focusedElem:n,selectionRange:t},pm=!1,Ye=e;Ye!==null;)if(e=Ye,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Ye=n;else for(;Ye!==null;){e=Ye;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var A=y.memoizedProps,x=y.memoizedState,g=e.stateNode,_=g.getSnapshotBeforeUpdate(e.elementType===e.type?A:zr(e.type,A),x);g.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var M=e.stateNode.containerInfo;M.nodeType===1?M.textContent="":M.nodeType===9&&M.documentElement&&M.removeChild(M.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ce(163))}}catch(w){wn(e,e.return,w)}if(n=e.sibling,n!==null){n.return=e.return,Ye=n;break}Ye=e.return}return y=lw,lw=!1,y}function _d(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&s_(e,t,s)}r=r.next}while(r!==i)}}function Dg(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function o_(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function fR(n){var e=n.alternate;e!==null&&(n.alternate=null,fR(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[ds],delete e[Gd],delete e[Xx],delete e[bD],delete e[CD])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function pR(n){return n.tag===5||n.tag===3||n.tag===4}function cw(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||pR(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function a_(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=vm));else if(i!==4&&(n=n.child,n!==null))for(a_(n,e,t),n=n.sibling;n!==null;)a_(n,e,t),n=n.sibling}function l_(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(l_(n,e,t),n=n.sibling;n!==null;)l_(n,e,t),n=n.sibling}var ni=null,Gr=!1;function Mo(n,e,t){for(t=t.child;t!==null;)mR(n,e,t),t=t.sibling}function mR(n,e,t){if(fs&&typeof fs.onCommitFiberUnmount=="function")try{fs.onCommitFiberUnmount(bg,t)}catch{}switch(t.tag){case 5:Ai||wc(t,e);case 6:var i=ni,r=Gr;ni=null,Mo(n,e,t),ni=i,Gr=r,ni!==null&&(Gr?(n=ni,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):ni.removeChild(t.stateNode));break;case 18:ni!==null&&(Gr?(n=ni,t=t.stateNode,n.nodeType===8?Jv(n.parentNode,t):n.nodeType===1&&Jv(n,t),Ud(n)):Jv(ni,t.stateNode));break;case 4:i=ni,r=Gr,ni=t.stateNode.containerInfo,Gr=!0,Mo(n,e,t),ni=i,Gr=r;break;case 0:case 11:case 14:case 15:if(!Ai&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&s_(t,e,o),r=r.next}while(r!==i)}Mo(n,e,t);break;case 1:if(!Ai&&(wc(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){wn(t,e,a)}Mo(n,e,t);break;case 21:Mo(n,e,t);break;case 22:t.mode&1?(Ai=(i=Ai)||t.memoizedState!==null,Mo(n,e,t),Ai=i):Mo(n,e,t);break;default:Mo(n,e,t)}}function uw(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new VD),e.forEach(function(i){var r=$D.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function Fr(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ni=a.stateNode,Gr=!1;break e;case 3:ni=a.stateNode.containerInfo,Gr=!0;break e;case 4:ni=a.stateNode.containerInfo,Gr=!0;break e}a=a.return}if(ni===null)throw Error(Ce(160));mR(s,o,r),ni=null,Gr=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){wn(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)gR(e,n),e=e.sibling}function gR(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Fr(e,n),cs(n),i&4){try{_d(3,n,n.return),Dg(3,n)}catch(A){wn(n,n.return,A)}try{_d(5,n,n.return)}catch(A){wn(n,n.return,A)}}break;case 1:Fr(e,n),cs(n),i&512&&t!==null&&wc(t,t.return);break;case 5:if(Fr(e,n),cs(n),i&512&&t!==null&&wc(t,t.return),n.flags&32){var r=n.stateNode;try{Ld(r,"")}catch(A){wn(n,n.return,A)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&OC(r,s),Bx(a,o);var c=Bx(a,s);for(o=0;o<l.length;o+=2){var h=l[o],f=l[o+1];h==="style"?VC(r,f):h==="dangerouslySetInnerHTML"?HC(r,f):h==="children"?Ld(r,f):W_(r,h,f,c)}switch(a){case"input":Cx(r,s);break;case"textarea":kC(r,s);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Ic(r,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?Ic(r,!!s.multiple,s.defaultValue,!0):Ic(r,!!s.multiple,s.multiple?[]:"",!1))}r[Gd]=s}catch(A){wn(n,n.return,A)}}break;case 6:if(Fr(e,n),cs(n),i&4){if(n.stateNode===null)throw Error(Ce(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(A){wn(n,n.return,A)}}break;case 3:if(Fr(e,n),cs(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{Ud(e.containerInfo)}catch(A){wn(n,n.return,A)}break;case 4:Fr(e,n),cs(n);break;case 13:Fr(e,n),cs(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(MA=Pn())),i&4&&uw(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(Ai=(c=Ai)||h,Fr(e,n),Ai=c):Fr(e,n),cs(n),i&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!h&&n.mode&1)for(Ye=n,h=n.child;h!==null;){for(f=Ye=h;Ye!==null;){switch(p=Ye,m=p.child,p.tag){case 0:case 11:case 14:case 15:_d(4,p,p.return);break;case 1:wc(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){i=p,t=p.return;try{e=i,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(A){wn(i,t,A)}}break;case 5:wc(p,p.return);break;case 22:if(p.memoizedState!==null){hw(f);continue}}m!==null?(m.return=p,Ye=m):hw(f)}h=h.sibling}e:for(h=null,f=n;;){if(f.tag===5){if(h===null){h=f;try{r=f.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=GC("display",o))}catch(A){wn(n,n.return,A)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(A){wn(n,n.return,A)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Fr(e,n),cs(n),i&4&&uw(n);break;case 21:break;default:Fr(e,n),cs(n)}}function cs(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(pR(t)){var i=t;break e}t=t.return}throw Error(Ce(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Ld(r,""),i.flags&=-33);var s=cw(n);l_(n,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=cw(n);a_(n,a,o);break;default:throw Error(Ce(161))}}catch(l){wn(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function jD(n,e,t){Ye=n,vR(n)}function vR(n,e,t){for(var i=(n.mode&1)!==0;Ye!==null;){var r=Ye,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Wf;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Ai;a=Wf;var c=Ai;if(Wf=o,(Ai=l)&&!c)for(Ye=r;Ye!==null;)o=Ye,l=o.child,o.tag===22&&o.memoizedState!==null?fw(r):l!==null?(l.return=o,Ye=l):fw(r);for(;s!==null;)Ye=s,vR(s),s=s.sibling;Ye=r,Wf=a,Ai=c}dw(n)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Ye=s):dw(n)}}function dw(n){for(;Ye!==null;){var e=Ye;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ai||Dg(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Ai)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:zr(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Y1(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}Y1(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Ud(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ce(163))}Ai||e.flags&512&&o_(e)}catch(p){wn(e,e.return,p)}}if(e===n){Ye=null;break}if(t=e.sibling,t!==null){t.return=e.return,Ye=t;break}Ye=e.return}}function hw(n){for(;Ye!==null;){var e=Ye;if(e===n){Ye=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Ye=t;break}Ye=e.return}}function fw(n){for(;Ye!==null;){var e=Ye;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Dg(4,e)}catch(l){wn(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){wn(e,r,l)}}var s=e.return;try{o_(e)}catch(l){wn(e,s,l)}break;case 5:var o=e.return;try{o_(e)}catch(l){wn(e,o,l)}}}catch(l){wn(e,e.return,l)}if(e===n){Ye=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ye=a;break}Ye=e.return}}var XD=Math.ceil,Tm=uo.ReactCurrentDispatcher,AA=uo.ReactCurrentOwner,Ir=uo.ReactCurrentBatchConfig,Wt=0,ei=null,kn=null,ii=0,sr=0,Ec=sa(0),Wn=0,Kd=null,hl=0,Ng=0,SA=0,Ad=null,Xi=null,MA=0,Kc=1/0,Us=null,Rm=!1,c_=null,Yo=null,jf=!1,Go=null,Im=0,Sd=0,u_=null,im=-1,rm=0;function Ni(){return Wt&6?Pn():im!==-1?im:im=Pn()}function Qo(n){return n.mode&1?Wt&2&&ii!==0?ii&-ii:RD.transition!==null?(rm===0&&(rm=tT()),rm):(n=qt,n!==0||(n=window.event,n=n===void 0?16:lT(n.type)),n):1}function Xr(n,e,t,i){if(50<Sd)throw Sd=0,u_=null,Error(Ce(185));ch(n,t,i),(!(Wt&2)||n!==ei)&&(n===ei&&(!(Wt&2)&&(Ng|=t),Wn===4&&Oo(n,ii)),Zi(n,i),t===1&&Wt===0&&!(e.mode&1)&&(Kc=Pn()+500,Pg&&oa()))}function Zi(n,e){var t=n.callbackNode;RL(n,e);var i=fm(n,n===ei?ii:0);if(i===0)t!==null&&S1(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&S1(t),e===1)n.tag===0?TD(pw.bind(null,n)):CT(pw.bind(null,n)),wD(function(){!(Wt&6)&&oa()}),t=null;else{switch(nT(i)){case 1:t=Y_;break;case 4:t=$C;break;case 16:t=hm;break;case 536870912:t=eT;break;default:t=hm}t=ER(t,yR.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function yR(n,e){if(im=-1,rm=0,Wt&6)throw Error(Ce(327));var t=n.callbackNode;if(Nc()&&n.callbackNode!==t)return null;var i=fm(n,n===ei?ii:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=Pm(n,i);else{e=i;var r=Wt;Wt|=2;var s=_R();(ei!==n||ii!==e)&&(Us=null,Kc=Pn()+500,nl(n,e));do try{YD();break}catch(a){xR(n,a)}while(!0);lA(),Tm.current=s,Wt=r,kn!==null?e=0:(ei=null,ii=0,e=Wn)}if(e!==0){if(e===2&&(r=Ux(n),r!==0&&(i=r,e=d_(n,r))),e===1)throw t=Kd,nl(n,0),Oo(n,i),Zi(n,Pn()),t;if(e===6)Oo(n,i);else{if(r=n.current.alternate,!(i&30)&&!JD(r)&&(e=Pm(n,i),e===2&&(s=Ux(n),s!==0&&(i=s,e=d_(n,s))),e===1))throw t=Kd,nl(n,0),Oo(n,i),Zi(n,Pn()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error(Ce(345));case 2:ka(n,Xi,Us);break;case 3:if(Oo(n,i),(i&130023424)===i&&(e=MA+500-Pn(),10<e)){if(fm(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){Ni(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=jx(ka.bind(null,n,Xi,Us),e);break}ka(n,Xi,Us);break;case 4:if(Oo(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var o=31-jr(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Pn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*XD(i/1960))-i,10<i){n.timeoutHandle=jx(ka.bind(null,n,Xi,Us),i);break}ka(n,Xi,Us);break;case 5:ka(n,Xi,Us);break;default:throw Error(Ce(329))}}}return Zi(n,Pn()),n.callbackNode===t?yR.bind(null,n):null}function d_(n,e){var t=Ad;return n.current.memoizedState.isDehydrated&&(nl(n,e).flags|=256),n=Pm(n,e),n!==2&&(e=Xi,Xi=t,e!==null&&h_(e)),n}function h_(n){Xi===null?Xi=n:Xi.push.apply(Xi,n)}function JD(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!Jr(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Oo(n,e){for(e&=~SA,e&=~Ng,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-jr(e),i=1<<t;n[t]=-1,e&=~i}}function pw(n){if(Wt&6)throw Error(Ce(327));Nc();var e=fm(n,0);if(!(e&1))return Zi(n,Pn()),null;var t=Pm(n,e);if(n.tag!==0&&t===2){var i=Ux(n);i!==0&&(e=i,t=d_(n,i))}if(t===1)throw t=Kd,nl(n,0),Oo(n,e),Zi(n,Pn()),t;if(t===6)throw Error(Ce(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,ka(n,Xi,Us),Zi(n,Pn()),null}function wA(n,e){var t=Wt;Wt|=1;try{return n(e)}finally{Wt=t,Wt===0&&(Kc=Pn()+500,Pg&&oa())}}function fl(n){Go!==null&&Go.tag===0&&!(Wt&6)&&Nc();var e=Wt;Wt|=1;var t=Ir.transition,i=qt;try{if(Ir.transition=null,qt=1,n)return n()}finally{qt=i,Ir.transition=t,Wt=e,!(Wt&6)&&oa()}}function EA(){sr=Ec.current,cn(Ec)}function nl(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,MD(t)),kn!==null)for(t=kn.return;t!==null;){var i=t;switch(sA(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&ym();break;case 3:Xc(),cn(Qi),cn(Ei),pA();break;case 5:fA(i);break;case 4:Xc();break;case 13:cn(gn);break;case 19:cn(gn);break;case 10:cA(i.type._context);break;case 22:case 23:EA()}t=t.return}if(ei=n,kn=n=qo(n.current,null),ii=sr=e,Wn=0,Kd=null,SA=Ng=hl=0,Xi=Ad=null,Xa!==null){for(e=0;e<Xa.length;e++)if(t=Xa[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}t.pending=i}Xa=null}return n}function xR(n,e){do{var t=kn;try{if(lA(),em.current=Cm,bm){for(var i=_n.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}bm=!1}if(dl=0,$n=Vn=_n=null,xd=!1,jd=0,AA.current=null,t===null||t.return===null){Wn=1,Kd=e,kn=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=ii,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=tw(o);if(m!==null){m.flags&=-257,nw(m,o,a,s,e),m.mode&1&&ew(s,c,e),e=m,l=c;var y=e.updateQueue;if(y===null){var A=new Set;A.add(l),e.updateQueue=A}else y.add(l);break e}else{if(!(e&1)){ew(s,c,e),bA();break e}l=Error(Ce(426))}}else if(fn&&a.mode&1){var x=tw(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),nw(x,o,a,s,e),oA(Jc(l,a));break e}}s=l=Jc(l,a),Wn!==4&&(Wn=2),Ad===null?Ad=[s]:Ad.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=nR(s,l,e);K1(s,g);break e;case 1:a=l;var _=s.type,M=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(Yo===null||!Yo.has(M)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=iR(s,a,e);K1(s,w);break e}}s=s.return}while(s!==null)}SR(t)}catch(C){e=C,kn===t&&t!==null&&(kn=t=t.return);continue}break}while(!0)}function _R(){var n=Tm.current;return Tm.current=Cm,n===null?Cm:n}function bA(){(Wn===0||Wn===3||Wn===2)&&(Wn=4),ei===null||!(hl&268435455)&&!(Ng&268435455)||Oo(ei,ii)}function Pm(n,e){var t=Wt;Wt|=2;var i=_R();(ei!==n||ii!==e)&&(Us=null,nl(n,e));do try{KD();break}catch(r){xR(n,r)}while(!0);if(lA(),Wt=t,Tm.current=i,kn!==null)throw Error(Ce(261));return ei=null,ii=0,Wn}function KD(){for(;kn!==null;)AR(kn)}function YD(){for(;kn!==null&&!_L();)AR(kn)}function AR(n){var e=wR(n.alternate,n,sr);n.memoizedProps=n.pendingProps,e===null?SR(n):kn=e,AA.current=null}function SR(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=GD(t,e),t!==null){t.flags&=32767,kn=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Wn=6,kn=null;return}}else if(t=HD(t,e,sr),t!==null){kn=t;return}if(e=e.sibling,e!==null){kn=e;return}kn=e=n}while(e!==null);Wn===0&&(Wn=5)}function ka(n,e,t){var i=qt,r=Ir.transition;try{Ir.transition=null,qt=1,QD(n,e,t,i)}finally{Ir.transition=r,qt=i}return null}function QD(n,e,t,i){do Nc();while(Go!==null);if(Wt&6)throw Error(Ce(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Ce(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(IL(n,s),n===ei&&(kn=ei=null,ii=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||jf||(jf=!0,ER(hm,function(){return Nc(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Ir.transition,Ir.transition=null;var o=qt;qt=1;var a=Wt;Wt|=4,AA.current=null,WD(n,t),gR(t,n),gD(Vx),pm=!!Gx,Vx=Gx=null,n.current=t,jD(t),AL(),Wt=a,qt=o,Ir.transition=s}else n.current=t;if(jf&&(jf=!1,Go=n,Im=r),s=n.pendingLanes,s===0&&(Yo=null),wL(t.stateNode),Zi(n,Pn()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],i(r.value,{componentStack:r.stack,digest:r.digest});if(Rm)throw Rm=!1,n=c_,c_=null,n;return Im&1&&n.tag!==0&&Nc(),s=n.pendingLanes,s&1?n===u_?Sd++:(Sd=0,u_=n):Sd=0,oa(),null}function Nc(){if(Go!==null){var n=nT(Im),e=Ir.transition,t=qt;try{if(Ir.transition=null,qt=16>n?16:n,Go===null)var i=!1;else{if(n=Go,Go=null,Im=0,Wt&6)throw Error(Ce(331));var r=Wt;for(Wt|=4,Ye=n.current;Ye!==null;){var s=Ye,o=s.child;if(Ye.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Ye=c;Ye!==null;){var h=Ye;switch(h.tag){case 0:case 11:case 15:_d(8,h,s)}var f=h.child;if(f!==null)f.return=h,Ye=f;else for(;Ye!==null;){h=Ye;var p=h.sibling,m=h.return;if(fR(h),h===c){Ye=null;break}if(p!==null){p.return=m,Ye=p;break}Ye=m}}}var y=s.alternate;if(y!==null){var A=y.child;if(A!==null){y.child=null;do{var x=A.sibling;A.sibling=null,A=x}while(A!==null)}}Ye=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ye=o;else e:for(;Ye!==null;){if(s=Ye,s.flags&2048)switch(s.tag){case 0:case 11:case 15:_d(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,Ye=g;break e}Ye=s.return}}var _=n.current;for(Ye=_;Ye!==null;){o=Ye;var M=o.child;if(o.subtreeFlags&2064&&M!==null)M.return=o,Ye=M;else e:for(o=_;Ye!==null;){if(a=Ye,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Dg(9,a)}}catch(C){wn(a,a.return,C)}if(a===o){Ye=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,Ye=w;break e}Ye=a.return}}if(Wt=r,oa(),fs&&typeof fs.onPostCommitFiberRoot=="function")try{fs.onPostCommitFiberRoot(bg,n)}catch{}i=!0}return i}finally{qt=t,Ir.transition=e}}return!1}function mw(n,e,t){e=Jc(t,e),e=nR(n,e,1),n=Ko(n,e,1),e=Ni(),n!==null&&(ch(n,1,e),Zi(n,e))}function wn(n,e,t){if(n.tag===3)mw(n,n,t);else for(;e!==null;){if(e.tag===3){mw(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Yo===null||!Yo.has(i))){n=Jc(t,n),n=iR(e,n,1),e=Ko(e,n,1),n=Ni(),e!==null&&(ch(e,1,n),Zi(e,n));break}}e=e.return}}function qD(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=Ni(),n.pingedLanes|=n.suspendedLanes&t,ei===n&&(ii&t)===t&&(Wn===4||Wn===3&&(ii&130023424)===ii&&500>Pn()-MA?nl(n,0):SA|=t),Zi(n,e)}function MR(n,e){e===0&&(n.mode&1?(e=Nf,Nf<<=1,!(Nf&130023424)&&(Nf=4194304)):e=1);var t=Ni();n=to(n,e),n!==null&&(ch(n,e,t),Zi(n,t))}function ZD(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),MR(n,t)}function $D(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(Ce(314))}i!==null&&i.delete(e),MR(n,t)}var wR;wR=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Qi.current)Ji=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Ji=!1,zD(n,e,t);Ji=!!(n.flags&131072)}else Ji=!1,fn&&e.flags&1048576&&TT(e,Am,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;nm(n,e),n=e.pendingProps;var r=Vc(e,Ei.current);Dc(e,t),r=gA(null,e,i,n,r,t);var s=vA();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,qi(i)?(s=!0,xm(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,dA(e),r.updater=Lg,e.stateNode=r,r._reactInternals=e,Zx(e,i,n,t),e=t_(null,e,i,!0,s,t)):(e.tag=0,fn&&s&&rA(e),Bi(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(nm(n,e),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=tN(i),n=zr(i,n),r){case 0:e=e_(null,e,i,n,t);break e;case 1:e=sw(null,e,i,n,t);break e;case 11:e=iw(null,e,i,n,t);break e;case 14:e=rw(null,e,i,zr(i.type,n),t);break e}throw Error(Ce(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:zr(i,r),e_(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:zr(i,r),sw(n,e,i,r,t);case 3:e:{if(aR(e),n===null)throw Error(Ce(387));i=e.pendingProps,s=e.memoizedState,r=s.element,DT(n,e),wm(e,i,null,t);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Jc(Error(Ce(423)),e),e=ow(n,e,i,t,r);break e}else if(i!==r){r=Jc(Error(Ce(424)),e),e=ow(n,e,i,t,r);break e}else for(or=Jo(e.stateNode.containerInfo.firstChild),ar=e,fn=!0,Vr=null,t=BT(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Wc(),i===r){e=no(n,e,t);break e}Bi(n,e,i,t)}e=e.child}return e;case 5:return NT(e),n===null&&Yx(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,o=r.children,Wx(i,r)?o=null:s!==null&&Wx(i,s)&&(e.flags|=32),oR(n,e),Bi(n,e,o,t),e.child;case 6:return n===null&&Yx(e),null;case 13:return lR(n,e,t);case 4:return hA(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=jc(e,null,i,t):Bi(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:zr(i,r),iw(n,e,i,r,t);case 7:return Bi(n,e,e.pendingProps,t),e.child;case 8:return Bi(n,e,e.pendingProps.children,t),e.child;case 12:return Bi(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,rn(Sm,i._currentValue),i._currentValue=o,s!==null)if(Jr(s.value,o)){if(s.children===r.children&&!Qi.current){e=no(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Ks(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),Qx(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Ce(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),Qx(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Bi(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Dc(e,t),r=Pr(r),i=i(r),e.flags|=1,Bi(n,e,i,t),e.child;case 14:return i=e.type,r=zr(i,e.pendingProps),r=zr(i.type,r),rw(n,e,i,r,t);case 15:return rR(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:zr(i,r),nm(n,e),e.tag=1,qi(i)?(n=!0,xm(e)):n=!1,Dc(e,t),tR(e,i,r),Zx(e,i,r,t),t_(null,e,i,!0,n,t);case 19:return cR(n,e,t);case 22:return sR(n,e,t)}throw Error(Ce(156,e.tag))};function ER(n,e){return ZC(n,e)}function eN(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tr(n,e,t,i){return new eN(n,e,t,i)}function CA(n){return n=n.prototype,!(!n||!n.isReactComponent)}function tN(n){if(typeof n=="function")return CA(n)?1:0;if(n!=null){if(n=n.$$typeof,n===X_)return 11;if(n===J_)return 14}return 2}function qo(n,e){var t=n.alternate;return t===null?(t=Tr(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function sm(n,e,t,i,r,s){var o=2;if(i=n,typeof n=="function")CA(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case mc:return il(t.children,r,s,e);case j_:o=8,r|=8;break;case Sx:return n=Tr(12,t,e,r|2),n.elementType=Sx,n.lanes=s,n;case Mx:return n=Tr(13,t,e,r),n.elementType=Mx,n.lanes=s,n;case wx:return n=Tr(19,t,e,r),n.elementType=wx,n.lanes=s,n;case NC:return Fg(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case LC:o=10;break e;case DC:o=9;break e;case X_:o=11;break e;case J_:o=14;break e;case No:o=16,i=null;break e}throw Error(Ce(130,n==null?n:typeof n,""))}return e=Tr(o,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function il(n,e,t,i){return n=Tr(7,n,i,e),n.lanes=t,n}function Fg(n,e,t,i){return n=Tr(22,n,i,e),n.elementType=NC,n.lanes=t,n.stateNode={isHidden:!1},n}function ty(n,e,t){return n=Tr(6,n,null,e),n.lanes=t,n}function ny(n,e,t){return e=Tr(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function nN(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fv(0),this.expirationTimes=Fv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fv(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function TA(n,e,t,i,r,s,o,a,l){return n=new nN(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Tr(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},dA(s),n}function iN(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pc,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function bR(n){if(!n)return ea;n=n._reactInternals;e:{if(wl(n)!==n||n.tag!==1)throw Error(Ce(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(qi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ce(171))}if(n.tag===1){var t=n.type;if(qi(t))return bT(n,t,e)}return e}function CR(n,e,t,i,r,s,o,a,l){return n=TA(t,i,!0,n,r,s,o,a,l),n.context=bR(null),t=n.current,i=Ni(),r=Qo(t),s=Ks(i,r),s.callback=e??null,Ko(t,s,r),n.current.lanes=r,ch(n,r,i),Zi(n,i),n}function Ug(n,e,t,i){var r=e.current,s=Ni(),o=Qo(r);return t=bR(t),e.context===null?e.context=t:e.pendingContext=t,e=Ks(s,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=Ko(r,e,o),n!==null&&(Xr(n,r,o,s),$p(n,r,o)),o}function Bm(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function gw(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function RA(n,e){gw(n,e),(n=n.alternate)&&gw(n,e)}function rN(){return null}var TR=typeof reportError=="function"?reportError:function(n){console.error(n)};function IA(n){this._internalRoot=n}Og.prototype.render=IA.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Ce(409));Ug(n,e,null,null)};Og.prototype.unmount=IA.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;fl(function(){Ug(null,n,null,null)}),e[eo]=null}};function Og(n){this._internalRoot=n}Og.prototype.unstable_scheduleHydration=function(n){if(n){var e=sT();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Uo.length&&e!==0&&e<Uo[t].priority;t++);Uo.splice(t,0,n),t===0&&aT(n)}};function PA(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function kg(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function vw(){}function sN(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=Bm(o);s.call(c)}}var o=CR(e,i,n,0,null,!1,!1,"",vw);return n._reactRootContainer=o,n[eo]=o.current,zd(n.nodeType===8?n.parentNode:n),fl(),o}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=Bm(l);a.call(c)}}var l=TA(n,0,!1,null,null,!1,!1,"",vw);return n._reactRootContainer=l,n[eo]=l.current,zd(n.nodeType===8?n.parentNode:n),fl(function(){Ug(e,l,t,i)}),l}function zg(n,e,t,i,r){var s=t._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=Bm(o);a.call(l)}}Ug(e,o,n,r)}else o=sN(t,e,n,r,i);return Bm(o)}iT=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=cd(e.pendingLanes);t!==0&&(Q_(e,t|1),Zi(e,Pn()),!(Wt&6)&&(Kc=Pn()+500,oa()))}break;case 13:fl(function(){var i=to(n,1);if(i!==null){var r=Ni();Xr(i,n,1,r)}}),RA(n,1)}};q_=function(n){if(n.tag===13){var e=to(n,134217728);if(e!==null){var t=Ni();Xr(e,n,134217728,t)}RA(n,134217728)}};rT=function(n){if(n.tag===13){var e=Qo(n),t=to(n,e);if(t!==null){var i=Ni();Xr(t,n,e,i)}RA(n,e)}};sT=function(){return qt};oT=function(n,e){var t=qt;try{return qt=n,e()}finally{qt=t}};Dx=function(n,e,t){switch(e){case"input":if(Cx(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=Ig(i);if(!r)throw Error(Ce(90));UC(i),Cx(i,r)}}}break;case"textarea":kC(n,t);break;case"select":e=t.value,e!=null&&Ic(n,!!t.multiple,e,!1)}};XC=wA;JC=fl;var oN={usingClientEntryPoint:!1,Events:[dh,xc,Ig,WC,jC,wA]},Ou={findFiberByHostInstance:ja,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},aN={bundleType:Ou.bundleType,version:Ou.version,rendererPackageName:Ou.rendererPackageName,rendererConfig:Ou.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:uo.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=QC(n),n===null?null:n.stateNode},findFiberByHostInstance:Ou.findFiberByHostInstance||rN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xf.isDisabled&&Xf.supportsFiber)try{bg=Xf.inject(aN),fs=Xf}catch{}}dr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oN;dr.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!PA(e))throw Error(Ce(200));return iN(n,e,null,t)};dr.createRoot=function(n,e){if(!PA(n))throw Error(Ce(299));var t=!1,i="",r=TR;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=TA(n,1,!1,null,null,t,!1,i,r),n[eo]=e.current,zd(n.nodeType===8?n.parentNode:n),new IA(e)};dr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Ce(188)):(n=Object.keys(n).join(","),Error(Ce(268,n)));return n=QC(e),n=n===null?null:n.stateNode,n};dr.flushSync=function(n){return fl(n)};dr.hydrate=function(n,e,t){if(!kg(e))throw Error(Ce(200));return zg(null,n,e,!0,t)};dr.hydrateRoot=function(n,e,t){if(!PA(n))throw Error(Ce(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",o=TR;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=CR(e,null,n,1,t??null,r,!1,s,o),n[eo]=e.current,zd(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new Og(e)};dr.render=function(n,e,t){if(!kg(e))throw Error(Ce(200));return zg(null,n,e,!1,t)};dr.unmountComponentAtNode=function(n){if(!kg(n))throw Error(Ce(40));return n._reactRootContainer?(fl(function(){zg(null,null,n,!1,function(){n._reactRootContainer=null,n[eo]=null})}),!0):!1};dr.unstable_batchedUpdates=wA;dr.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!kg(t))throw Error(Ce(200));if(n==null||n._reactInternals===void 0)throw Error(Ce(38));return zg(n,e,t,!1,i)};dr.version="18.3.1-next-f1338f8080-20240426";function RR(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(RR)}catch(n){console.error(n)}}RR(),RC.exports=dr;var lN=RC.exports,IR,yw=lN;IR=_x.createRoot=yw.createRoot,_x.hydrateRoot=yw.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Lm(){return Lm=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Lm.apply(this,arguments)}var Ka;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Ka||(Ka={}));const xw="popstate";function cN(n){n===void 0&&(n={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return f_("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(i,r){return typeof r=="string"?r:BR(r)}return dN(e,t,null,n)}function PR(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function uN(){return Math.random().toString(36).substr(2,8)}function _w(n,e){return{usr:n.state,key:n.key,idx:e}}function f_(n,e,t,i){return t===void 0&&(t=null),Lm({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?LR(e):e,{state:t,key:e&&e.key||i||uN()})}function BR(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function LR(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function dN(n,e,t,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=Ka.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(Lm({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function f(){a=Ka.Pop;let x=h(),g=x==null?null:x-c;c=x,l&&l({action:a,location:A.location,delta:g})}function p(x,g){a=Ka.Push;let _=f_(A.location,x,g);c=h()+1;let M=_w(_,c),w=A.createHref(_);try{o.pushState(M,"",w)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;r.location.assign(w)}s&&l&&l({action:a,location:A.location,delta:1})}function m(x,g){a=Ka.Replace;let _=f_(A.location,x,g);c=h();let M=_w(_,c),w=A.createHref(_);o.replaceState(M,"",w),s&&l&&l({action:a,location:A.location,delta:0})}function y(x){let g=r.location.origin!=="null"?r.location.origin:r.location.href,_=typeof x=="string"?x:BR(x);return _=_.replace(/ $/,"%20"),PR(g,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,g)}let A={get action(){return a},get location(){return n(r,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(xw,f),l=x,()=>{r.removeEventListener(xw,f),l=null}},createHref(x){return e(r,x)},createURL:y,encodeLocation(x){let g=y(x);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:p,replace:m,go(x){return o.go(x)}};return A}var Aw;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Aw||(Aw={}));function hN(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}const DR=["post","put","patch","delete"];new Set(DR);const fN=["get",...DR];new Set(fN);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function p_(){return p_=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},p_.apply(this,arguments)}const pN=z.createContext(null),NR=z.createContext(null);function mN(){return z.useContext(NR)!=null}function gN(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function vN(n){let{basename:e="/",children:t=null,location:i,navigationType:r=Ka.Pop,navigator:s,static:o=!1,future:a}=n;mN()&&PR(!1);let l=e.replace(/^\/*/,"/"),c=z.useMemo(()=>({basename:l,navigator:s,static:o,future:p_({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=LR(i));let{pathname:h="/",search:f="",hash:p="",state:m=null,key:y="default"}=i,A=z.useMemo(()=>{let x=hN(h,l);return x==null?null:{location:{pathname:x,search:f,hash:p,state:m,key:y},navigationType:r}},[l,h,f,p,m,y,r]);return A==null?null:z.createElement(pN.Provider,{value:c},z.createElement(NR.Provider,{children:t,value:A}))}new Promise(()=>{});/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const yN="6";try{window.__reactRouterVersion=yN}catch{}const xN="startTransition",Sw=qB[xN];function _N(n){let{basename:e,children:t,future:i,window:r}=n,s=z.useRef();s.current==null&&(s.current=cN({window:r,v5Compat:!0}));let o=s.current,[a,l]=z.useState({action:o.action,location:o.location}),{v7_startTransition:c}=i||{},h=z.useCallback(f=>{c&&Sw?Sw(()=>l(f)):l(f)},[l,c]);return z.useLayoutEffect(()=>o.listen(h),[o,h]),z.useEffect(()=>gN(i),[i]),z.createElement(vN,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:i})}var Mw;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Mw||(Mw={}));var ww;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(ww||(ww={}));/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const El="170",za={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Ha={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},FR=0,m_=1,UR=2,AN=3,OR=0,Hg=1,Md=2,Hr=3,Kr=0,ri=1,Cr=2,Ys=0,rl=1,Dm=2,g_=3,v_=4,kR=5,ko=100,zR=101,HR=102,GR=103,VR=104,WR=200,jR=201,XR=202,JR=203,Nm=204,Fm=205,KR=206,YR=207,QR=208,qR=209,ZR=210,$R=211,eI=212,tI=213,nI=214,Um=0,Om=1,km=2,pl=3,zm=4,Hm=5,Gm=6,Vm=7,fh=0,iI=1,rI=2,ms=0,sI=1,oI=2,aI=3,BA=4,lI=5,cI=6,uI=7,y_="attached",dI="detached",Gg=300,io=301,ta=302,Yd=303,Qd=304,su=306,Yr=1e3,Ki=1001,ml=1002,zn=1003,ph=1004,SN=1004,Vo=1005,MN=1005,$t=1006,sl=1007,wN=1007,Yi=1008,EN=1008,Qr=1009,LA=1010,DA=1011,Yc=1012,Vg=1013,ro=1014,Di=1015,aa=1016,Wg=1017,jg=1018,gl=1020,NA=35902,FA=1021,UA=1022,Mi=1023,OA=1024,kA=1025,ol=1026,vl=1027,Xg=1028,mh=1029,zA=1030,Jg=1031,bN=1032,Kg=1033,wd=33776,Ed=33777,bd=33778,Cd=33779,Wm=35840,jm=35841,Xm=35842,Jm=35843,Km=36196,Ym=37492,Qm=37496,qm=37808,Zm=37809,$m=37810,eg=37811,tg=37812,ng=37813,ig=37814,rg=37815,sg=37816,og=37817,ag=37818,lg=37819,cg=37820,ug=37821,Td=36492,dg=36494,hg=36495,HA=36283,fg=36284,pg=36285,mg=36286,hI=2200,fI=2201,pI=2202,yl=2300,na=2301,om=2302,Ya=2400,Qa=2401,qd=2402,Yg=2500,GA=2501,VA=0,gh=1,xl=2,mI=3200,gI=3201,CN=3202,TN=3203,la=0,vI=1,Vs="",In="srgb",bi="srgb-linear",vh="linear",Qt="srgb",RN=0,Ga=7680,IN=7681,PN=7682,BN=7683,LN=34055,DN=34056,NN=5386,FN=512,UN=513,ON=514,kN=515,zN=516,HN=517,GN=518,x_=519,yI=512,xI=513,_I=514,WA=515,AI=516,SI=517,MI=518,wI=519,Zd=35044,VN=35048,WN=35040,jN=35045,XN=35049,JN=35041,KN=35046,YN=35050,QN=35042,qN="100",__="300 es",hs=2e3,$d=2001;let Ss=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}};const vi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Ew=1234567;const al=Math.PI/180,Qc=180/Math.PI;function lr(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(vi[n&255]+vi[n>>8&255]+vi[n>>16&255]+vi[n>>24&255]+"-"+vi[e&255]+vi[e>>8&255]+"-"+vi[e>>16&15|64]+vi[e>>24&255]+"-"+vi[t&63|128]+vi[t>>8&255]+"-"+vi[t>>16&255]+vi[t>>24&255]+vi[i&255]+vi[i>>8&255]+vi[i>>16&255]+vi[i>>24&255]).toLowerCase()}function En(n,e,t){return Math.max(e,Math.min(t,n))}function jA(n,e){return(n%e+e)%e}function ZN(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function $N(n,e,t){return n!==e?(t-n)/(e-n):0}function Rd(n,e,t){return(1-t)*n+t*e}function eF(n,e,t,i){return Rd(n,e,1-Math.exp(-t*i))}function tF(n,e=1){return e-Math.abs(jA(n,e*2)-e)}function nF(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function iF(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function rF(n,e){return n+Math.floor(Math.random()*(e-n+1))}function sF(n,e){return n+Math.random()*(e-n)}function oF(n){return n*(.5-Math.random())}function aF(n){n!==void 0&&(Ew=n);let e=Ew+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function lF(n){return n*al}function cF(n){return n*Qc}function uF(n){return(n&n-1)===0&&n!==0}function dF(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function hF(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function fF(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+i)/2),h=o((e+i)/2),f=s((e-i)/2),p=o((e-i)/2),m=s((i-e)/2),y=o((i-e)/2);switch(r){case"XYX":n.set(a*h,l*f,l*p,a*c);break;case"YZY":n.set(l*p,a*h,l*f,a*c);break;case"ZXZ":n.set(l*f,l*p,a*h,a*c);break;case"XZX":n.set(a*h,l*y,l*m,a*c);break;case"YXY":n.set(l*m,a*h,l*y,a*c);break;case"ZYZ":n.set(l*y,l*m,a*h,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Li(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Mt(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const XA={DEG2RAD:al,RAD2DEG:Qc,generateUUID:lr,clamp:En,euclideanModulo:jA,mapLinear:ZN,inverseLerp:$N,lerp:Rd,damp:eF,pingpong:tF,smoothstep:nF,smootherstep:iF,randInt:rF,randFloat:sF,randFloatSpread:oF,seededRandom:aF,degToRad:lF,radToDeg:cF,isPowerOfTwo:uF,ceilPowerOfTwo:dF,floorPowerOfTwo:hF,setQuaternionFromProperEuler:fF,normalize:Mt,denormalize:Li};class ue{constructor(e=0,t=0){ue.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(En(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class St{constructor(e,t,i,r,s,o,a,l,c){St.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,c)}set(e,t,i,r,s,o,a,l,c){const h=this.elements;return h[0]=e,h[1]=r,h[2]=a,h[3]=t,h[4]=s,h[5]=l,h[6]=i,h[7]=o,h[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],h=i[4],f=i[7],p=i[2],m=i[5],y=i[8],A=r[0],x=r[3],g=r[6],_=r[1],M=r[4],w=r[7],C=r[2],R=r[5],P=r[8];return s[0]=o*A+a*_+l*C,s[3]=o*x+a*M+l*R,s[6]=o*g+a*w+l*P,s[1]=c*A+h*_+f*C,s[4]=c*x+h*M+f*R,s[7]=c*g+h*w+f*P,s[2]=p*A+m*_+y*C,s[5]=p*x+m*M+y*R,s[8]=p*g+m*w+y*P,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8];return t*o*h-t*a*c-i*s*h+i*a*l+r*s*c-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8],f=h*o-a*c,p=a*l-h*s,m=c*s-o*l,y=t*f+i*p+r*m;if(y===0)return this.set(0,0,0,0,0,0,0,0,0);const A=1/y;return e[0]=f*A,e[1]=(r*c-h*i)*A,e[2]=(a*i-r*o)*A,e[3]=p*A,e[4]=(h*t-r*l)*A,e[5]=(r*s-a*t)*A,e[6]=m*A,e[7]=(i*l-c*t)*A,e[8]=(o*t-i*s)*A,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(iy.makeScale(e,t)),this}rotate(e){return this.premultiply(iy.makeRotation(-e)),this}translate(e,t){return this.premultiply(iy.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const iy=new St;function EI(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const pF={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function bc(n,e){return new pF[n](e)}function eh(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function bI(){const n=eh("canvas");return n.style.display="block",n}const bw={};function dd(n){n in bw||(bw[n]=!0,console.warn(n))}function mF(n,e,t){return new Promise(function(i,r){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:i()}}setTimeout(s,t)})}function gF(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function vF(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const Ft={enabled:!0,workingColorSpace:bi,spaces:{},convert:function(n,e,t){return this.enabled===!1||e===t||!e||!t||(this.spaces[e].transfer===Qt&&(n.r=Qs(n.r),n.g=Qs(n.g),n.b=Qs(n.b)),this.spaces[e].primaries!==this.spaces[t].primaries&&(n.applyMatrix3(this.spaces[e].toXYZ),n.applyMatrix3(this.spaces[t].fromXYZ)),this.spaces[t].transfer===Qt&&(n.r=Fc(n.r),n.g=Fc(n.g),n.b=Fc(n.b))),n},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)},getPrimaries:function(n){return this.spaces[n].primaries},getTransfer:function(n){return n===Vs?vh:this.spaces[n].transfer},getLuminanceCoefficients:function(n,e=this.workingColorSpace){return n.fromArray(this.spaces[e].luminanceCoefficients)},define:function(n){Object.assign(this.spaces,n)},_getMatrix:function(n,e,t){return n.copy(this.spaces[e].toXYZ).multiply(this.spaces[t].fromXYZ)},_getDrawingBufferColorSpace:function(n){return this.spaces[n].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(n=this.workingColorSpace){return this.spaces[n].workingColorSpaceConfig.unpackColorSpace}};function Qs(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Fc(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const Cw=[.64,.33,.3,.6,.15,.06],Tw=[.2126,.7152,.0722],Rw=[.3127,.329],Iw=new St().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),Pw=new St().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);Ft.define({[bi]:{primaries:Cw,whitePoint:Rw,transfer:vh,toXYZ:Iw,fromXYZ:Pw,luminanceCoefficients:Tw,workingColorSpaceConfig:{unpackColorSpace:In},outputColorSpaceConfig:{drawingBufferColorSpace:In}},[In]:{primaries:Cw,whitePoint:Rw,transfer:Qt,toXYZ:Iw,fromXYZ:Pw,luminanceCoefficients:Tw,outputColorSpaceConfig:{drawingBufferColorSpace:In}}});let Xl;class CI{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Xl===void 0&&(Xl=eh("canvas")),Xl.width=e.width,Xl.height=e.height;const i=Xl.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Xl}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=eh("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Qs(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Qs(t[i]/255)*255):t[i]=Qs(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let yF=0;class qa{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:yF++}),this.uuid=lr(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(ry(r[o].image)):s.push(ry(r[o]))}else s=ry(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function ry(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?CI.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let xF=0;class tn extends Ss{constructor(e=tn.DEFAULT_IMAGE,t=tn.DEFAULT_MAPPING,i=Ki,r=Ki,s=$t,o=Yi,a=Mi,l=Qr,c=tn.DEFAULT_ANISOTROPY,h=Vs){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:xF++}),this.uuid=lr(),this.name="",this.source=new qa(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new ue(0,0),this.repeat=new ue(1,1),this.center=new ue(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new St,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=h,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Gg)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Yr:e.x=e.x-Math.floor(e.x);break;case Ki:e.x=e.x<0?0:1;break;case ml:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Yr:e.y=e.y-Math.floor(e.y);break;case Ki:e.y=e.y<0?0:1;break;case ml:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}tn.DEFAULT_IMAGE=null;tn.DEFAULT_MAPPING=Gg;tn.DEFAULT_ANISOTROPY=1;class Gt{constructor(e=0,t=0,i=0,r=1){Gt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,c=l[0],h=l[4],f=l[8],p=l[1],m=l[5],y=l[9],A=l[2],x=l[6],g=l[10];if(Math.abs(h-p)<.01&&Math.abs(f-A)<.01&&Math.abs(y-x)<.01){if(Math.abs(h+p)<.1&&Math.abs(f+A)<.1&&Math.abs(y+x)<.1&&Math.abs(c+m+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const M=(c+1)/2,w=(m+1)/2,C=(g+1)/2,R=(h+p)/4,P=(f+A)/4,B=(y+x)/4;return M>w&&M>C?M<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(M),r=R/i,s=P/i):w>C?w<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(w),i=R/r,s=B/r):C<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(C),i=P/s,r=B/s),this.set(i,r,s,t),this}let _=Math.sqrt((x-y)*(x-y)+(f-A)*(f-A)+(p-h)*(p-h));return Math.abs(_)<.001&&(_=1),this.x=(x-y)/_,this.y=(f-A)/_,this.z=(p-h)/_,this.w=Math.acos((c+m+g-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class TI extends Ss{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Gt(0,0,e,t),this.scissorTest=!1,this.viewport=new Gt(0,0,e,t);const r={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:$t,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const s=new tn(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];const o=i.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,r=e.textures.length;i<r;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new qa(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class ai extends TI{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class Qg extends tn{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=zn,this.minFilter=zn,this.wrapR=Ki,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class _F extends ai{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new Qg(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class JA extends tn{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=zn,this.minFilter=zn,this.wrapR=Ki,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class AF extends ai{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new JA(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class sn{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],c=i[r+1],h=i[r+2],f=i[r+3];const p=s[o+0],m=s[o+1],y=s[o+2],A=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=h,e[t+3]=f;return}if(a===1){e[t+0]=p,e[t+1]=m,e[t+2]=y,e[t+3]=A;return}if(f!==A||l!==p||c!==m||h!==y){let x=1-a;const g=l*p+c*m+h*y+f*A,_=g>=0?1:-1,M=1-g*g;if(M>Number.EPSILON){const C=Math.sqrt(M),R=Math.atan2(C,g*_);x=Math.sin(x*R)/C,a=Math.sin(a*R)/C}const w=a*_;if(l=l*x+p*w,c=c*x+m*w,h=h*x+y*w,f=f*x+A*w,x===1-a){const C=1/Math.sqrt(l*l+c*c+h*h+f*f);l*=C,c*=C,h*=C,f*=C}}e[t]=l,e[t+1]=c,e[t+2]=h,e[t+3]=f}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],c=i[r+2],h=i[r+3],f=s[o],p=s[o+1],m=s[o+2],y=s[o+3];return e[t]=a*y+h*f+l*m-c*p,e[t+1]=l*y+h*p+c*f-a*m,e[t+2]=c*y+h*m+a*p-l*f,e[t+3]=h*y-a*f-l*p-c*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),h=a(r/2),f=a(s/2),p=l(i/2),m=l(r/2),y=l(s/2);switch(o){case"XYZ":this._x=p*h*f+c*m*y,this._y=c*m*f-p*h*y,this._z=c*h*y+p*m*f,this._w=c*h*f-p*m*y;break;case"YXZ":this._x=p*h*f+c*m*y,this._y=c*m*f-p*h*y,this._z=c*h*y-p*m*f,this._w=c*h*f+p*m*y;break;case"ZXY":this._x=p*h*f-c*m*y,this._y=c*m*f+p*h*y,this._z=c*h*y+p*m*f,this._w=c*h*f-p*m*y;break;case"ZYX":this._x=p*h*f-c*m*y,this._y=c*m*f+p*h*y,this._z=c*h*y-p*m*f,this._w=c*h*f+p*m*y;break;case"YZX":this._x=p*h*f+c*m*y,this._y=c*m*f+p*h*y,this._z=c*h*y-p*m*f,this._w=c*h*f-p*m*y;break;case"XZY":this._x=p*h*f-c*m*y,this._y=c*m*f-p*h*y,this._z=c*h*y+p*m*f,this._w=c*h*f+p*m*y;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],h=t[6],f=t[10],p=i+a+f;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(h-l)*m,this._y=(s-c)*m,this._z=(o-r)*m}else if(i>a&&i>f){const m=2*Math.sqrt(1+i-a-f);this._w=(h-l)/m,this._x=.25*m,this._y=(r+o)/m,this._z=(s+c)/m}else if(a>f){const m=2*Math.sqrt(1+a-i-f);this._w=(s-c)/m,this._x=(r+o)/m,this._y=.25*m,this._z=(l+h)/m}else{const m=2*Math.sqrt(1+f-i-a);this._w=(o-r)/m,this._x=(s+c)/m,this._y=(l+h)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(En(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,h=t._w;return this._x=i*h+o*a+r*c-s*l,this._y=r*h+o*l+s*a-i*c,this._z=s*h+o*c+i*l-r*a,this._w=o*h-i*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*i+t*this._x,this._y=m*r+t*this._y,this._z=m*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),h=Math.atan2(c,a),f=Math.sin((1-t)*h)/c,p=Math.sin(t*h)/c;return this._w=o*f+this._w*p,this._x=i*f+this._x*p,this._y=r*f+this._y*p,this._z=s*f+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class N{constructor(e=0,t=0,i=0){N.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Bw.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Bw.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*r-a*i),h=2*(a*t-s*r),f=2*(s*i-o*t);return this.x=t+l*c+o*f-a*h,this.y=i+l*h+a*c-s*f,this.z=r+l*f+s*h-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return sy.copy(this).projectOnVector(e),this.sub(sy)}reflect(e){return this.sub(sy.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(En(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const sy=new N,Bw=new sn;class si{constructor(e=new N(1/0,1/0,1/0),t=new N(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Ur.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Ur.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Ur.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,Ur):Ur.fromBufferAttribute(s,o),Ur.applyMatrix4(e.matrixWorld),this.expandByPoint(Ur);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Jf.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),Jf.copy(i.boundingBox)),Jf.applyMatrix4(e.matrixWorld),this.union(Jf)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Ur),Ur.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ku),Kf.subVectors(this.max,ku),Jl.subVectors(e.a,ku),Kl.subVectors(e.b,ku),Yl.subVectors(e.c,ku),wo.subVectors(Kl,Jl),Eo.subVectors(Yl,Kl),Sa.subVectors(Jl,Yl);let t=[0,-wo.z,wo.y,0,-Eo.z,Eo.y,0,-Sa.z,Sa.y,wo.z,0,-wo.x,Eo.z,0,-Eo.x,Sa.z,0,-Sa.x,-wo.y,wo.x,0,-Eo.y,Eo.x,0,-Sa.y,Sa.x,0];return!oy(t,Jl,Kl,Yl,Kf)||(t=[1,0,0,0,1,0,0,0,1],!oy(t,Jl,Kl,Yl,Kf))?!1:(Yf.crossVectors(wo,Eo),t=[Yf.x,Yf.y,Yf.z],oy(t,Jl,Kl,Yl,Kf))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Ur).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Ur).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Rs[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Rs[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Rs[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Rs[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Rs[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Rs[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Rs[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Rs[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Rs),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Rs=[new N,new N,new N,new N,new N,new N,new N,new N],Ur=new N,Jf=new si,Jl=new N,Kl=new N,Yl=new N,wo=new N,Eo=new N,Sa=new N,ku=new N,Kf=new N,Yf=new N,Ma=new N;function oy(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){Ma.fromArray(n,s);const a=r.x*Math.abs(Ma.x)+r.y*Math.abs(Ma.y)+r.z*Math.abs(Ma.z),l=e.dot(Ma),c=t.dot(Ma),h=i.dot(Ma);if(Math.max(-Math.max(l,c,h),Math.min(l,c,h))>a)return!1}return!0}const SF=new si,zu=new N,ay=new N;let Hn=class{constructor(e=new N,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):SF.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;zu.subVectors(e,this.center);const t=zu.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(zu,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(ay.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(zu.copy(e.center).add(ay)),this.expandByPoint(zu.copy(e.center).sub(ay))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}};const Is=new N,ly=new N,Qf=new N,bo=new N,cy=new N,qf=new N,uy=new N;class _s{constructor(e=new N,t=new N(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Is)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Is.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Is.copy(this.origin).addScaledVector(this.direction,t),Is.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){ly.copy(e).add(t).multiplyScalar(.5),Qf.copy(t).sub(e).normalize(),bo.copy(this.origin).sub(ly);const s=e.distanceTo(t)*.5,o=-this.direction.dot(Qf),a=bo.dot(this.direction),l=-bo.dot(Qf),c=bo.lengthSq(),h=Math.abs(1-o*o);let f,p,m,y;if(h>0)if(f=o*l-a,p=o*a-l,y=s*h,f>=0)if(p>=-y)if(p<=y){const A=1/h;f*=A,p*=A,m=f*(f+o*p+2*a)+p*(o*f+p+2*l)+c}else p=s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+c;else p=-s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+c;else p<=-y?(f=Math.max(0,-(-o*s+a)),p=f>0?-s:Math.min(Math.max(-s,-l),s),m=-f*f+p*(p+2*l)+c):p<=y?(f=0,p=Math.min(Math.max(-s,-l),s),m=p*(p+2*l)+c):(f=Math.max(0,-(o*s+a)),p=f>0?s:Math.min(Math.max(-s,-l),s),m=-f*f+p*(p+2*l)+c);else p=o>0?-s:s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,f),r&&r.copy(ly).addScaledVector(Qf,p),m}intersectSphere(e,t){Is.subVectors(e.center,this.origin);const i=Is.dot(this.direction),r=Is.dot(Is)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const c=1/this.direction.x,h=1/this.direction.y,f=1/this.direction.z,p=this.origin;return c>=0?(i=(e.min.x-p.x)*c,r=(e.max.x-p.x)*c):(i=(e.max.x-p.x)*c,r=(e.min.x-p.x)*c),h>=0?(s=(e.min.y-p.y)*h,o=(e.max.y-p.y)*h):(s=(e.max.y-p.y)*h,o=(e.min.y-p.y)*h),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),f>=0?(a=(e.min.z-p.z)*f,l=(e.max.z-p.z)*f):(a=(e.max.z-p.z)*f,l=(e.min.z-p.z)*f),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,Is)!==null}intersectTriangle(e,t,i,r,s){cy.subVectors(t,e),qf.subVectors(i,e),uy.crossVectors(cy,qf);let o=this.direction.dot(uy),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;bo.subVectors(this.origin,e);const l=a*this.direction.dot(qf.crossVectors(bo,qf));if(l<0)return null;const c=a*this.direction.dot(cy.cross(bo));if(c<0||l+c>o)return null;const h=-a*bo.dot(uy);return h<0?null:this.at(h/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Xe{constructor(e,t,i,r,s,o,a,l,c,h,f,p,m,y,A,x){Xe.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,c,h,f,p,m,y,A,x)}set(e,t,i,r,s,o,a,l,c,h,f,p,m,y,A,x){const g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=r,g[1]=s,g[5]=o,g[9]=a,g[13]=l,g[2]=c,g[6]=h,g[10]=f,g[14]=p,g[3]=m,g[7]=y,g[11]=A,g[15]=x,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Xe().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Ql.setFromMatrixColumn(e,0).length(),s=1/Ql.setFromMatrixColumn(e,1).length(),o=1/Ql.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),h=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){const p=o*h,m=o*f,y=a*h,A=a*f;t[0]=l*h,t[4]=-l*f,t[8]=c,t[1]=m+y*c,t[5]=p-A*c,t[9]=-a*l,t[2]=A-p*c,t[6]=y+m*c,t[10]=o*l}else if(e.order==="YXZ"){const p=l*h,m=l*f,y=c*h,A=c*f;t[0]=p+A*a,t[4]=y*a-m,t[8]=o*c,t[1]=o*f,t[5]=o*h,t[9]=-a,t[2]=m*a-y,t[6]=A+p*a,t[10]=o*l}else if(e.order==="ZXY"){const p=l*h,m=l*f,y=c*h,A=c*f;t[0]=p-A*a,t[4]=-o*f,t[8]=y+m*a,t[1]=m+y*a,t[5]=o*h,t[9]=A-p*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const p=o*h,m=o*f,y=a*h,A=a*f;t[0]=l*h,t[4]=y*c-m,t[8]=p*c+A,t[1]=l*f,t[5]=A*c+p,t[9]=m*c-y,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const p=o*l,m=o*c,y=a*l,A=a*c;t[0]=l*h,t[4]=A-p*f,t[8]=y*f+m,t[1]=f,t[5]=o*h,t[9]=-a*h,t[2]=-c*h,t[6]=m*f+y,t[10]=p-A*f}else if(e.order==="XZY"){const p=o*l,m=o*c,y=a*l,A=a*c;t[0]=l*h,t[4]=-f,t[8]=c*h,t[1]=p*f+A,t[5]=o*h,t[9]=m*f-y,t[2]=y*f-m,t[6]=a*h,t[10]=A*f+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(MF,e,wF)}lookAt(e,t,i){const r=this.elements;return ir.subVectors(e,t),ir.lengthSq()===0&&(ir.z=1),ir.normalize(),Co.crossVectors(i,ir),Co.lengthSq()===0&&(Math.abs(i.z)===1?ir.x+=1e-4:ir.z+=1e-4,ir.normalize(),Co.crossVectors(i,ir)),Co.normalize(),Zf.crossVectors(ir,Co),r[0]=Co.x,r[4]=Zf.x,r[8]=ir.x,r[1]=Co.y,r[5]=Zf.y,r[9]=ir.y,r[2]=Co.z,r[6]=Zf.z,r[10]=ir.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],h=i[1],f=i[5],p=i[9],m=i[13],y=i[2],A=i[6],x=i[10],g=i[14],_=i[3],M=i[7],w=i[11],C=i[15],R=r[0],P=r[4],B=r[8],I=r[12],b=r[1],U=r[5],H=r[9],X=r[13],ee=r[2],ne=r[6],te=r[10],le=r[14],D=r[3],W=r[7],j=r[11],Z=r[15];return s[0]=o*R+a*b+l*ee+c*D,s[4]=o*P+a*U+l*ne+c*W,s[8]=o*B+a*H+l*te+c*j,s[12]=o*I+a*X+l*le+c*Z,s[1]=h*R+f*b+p*ee+m*D,s[5]=h*P+f*U+p*ne+m*W,s[9]=h*B+f*H+p*te+m*j,s[13]=h*I+f*X+p*le+m*Z,s[2]=y*R+A*b+x*ee+g*D,s[6]=y*P+A*U+x*ne+g*W,s[10]=y*B+A*H+x*te+g*j,s[14]=y*I+A*X+x*le+g*Z,s[3]=_*R+M*b+w*ee+C*D,s[7]=_*P+M*U+w*ne+C*W,s[11]=_*B+M*H+w*te+C*j,s[15]=_*I+M*X+w*le+C*Z,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],h=e[2],f=e[6],p=e[10],m=e[14],y=e[3],A=e[7],x=e[11],g=e[15];return y*(+s*l*f-r*c*f-s*a*p+i*c*p+r*a*m-i*l*m)+A*(+t*l*m-t*c*p+s*o*p-r*o*m+r*c*h-s*l*h)+x*(+t*c*f-t*a*m-s*o*f+i*o*m+s*a*h-i*c*h)+g*(-r*a*h-t*l*f+t*a*p+r*o*f-i*o*p+i*l*h)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8],f=e[9],p=e[10],m=e[11],y=e[12],A=e[13],x=e[14],g=e[15],_=f*x*c-A*p*c+A*l*m-a*x*m-f*l*g+a*p*g,M=y*p*c-h*x*c-y*l*m+o*x*m+h*l*g-o*p*g,w=h*A*c-y*f*c+y*a*m-o*A*m-h*a*g+o*f*g,C=y*f*l-h*A*l-y*a*p+o*A*p+h*a*x-o*f*x,R=t*_+i*M+r*w+s*C;if(R===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/R;return e[0]=_*P,e[1]=(A*p*s-f*x*s-A*r*m+i*x*m+f*r*g-i*p*g)*P,e[2]=(a*x*s-A*l*s+A*r*c-i*x*c-a*r*g+i*l*g)*P,e[3]=(f*l*s-a*p*s-f*r*c+i*p*c+a*r*m-i*l*m)*P,e[4]=M*P,e[5]=(h*x*s-y*p*s+y*r*m-t*x*m-h*r*g+t*p*g)*P,e[6]=(y*l*s-o*x*s-y*r*c+t*x*c+o*r*g-t*l*g)*P,e[7]=(o*p*s-h*l*s+h*r*c-t*p*c-o*r*m+t*l*m)*P,e[8]=w*P,e[9]=(y*f*s-h*A*s-y*i*m+t*A*m+h*i*g-t*f*g)*P,e[10]=(o*A*s-y*a*s+y*i*c-t*A*c-o*i*g+t*a*g)*P,e[11]=(h*a*s-o*f*s-h*i*c+t*f*c+o*i*m-t*a*m)*P,e[12]=C*P,e[13]=(h*A*r-y*f*r+y*i*p-t*A*p-h*i*x+t*f*x)*P,e[14]=(y*a*r-o*A*r-y*i*l+t*A*l+o*i*x-t*a*x)*P,e[15]=(o*f*r-h*a*r+h*i*l-t*f*l-o*i*p+t*a*p)*P,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,c=s*o,h=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,h*a+i,h*l-r*o,0,c*l-r*a,h*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,h=o+o,f=a+a,p=s*c,m=s*h,y=s*f,A=o*h,x=o*f,g=a*f,_=l*c,M=l*h,w=l*f,C=i.x,R=i.y,P=i.z;return r[0]=(1-(A+g))*C,r[1]=(m+w)*C,r[2]=(y-M)*C,r[3]=0,r[4]=(m-w)*R,r[5]=(1-(p+g))*R,r[6]=(x+_)*R,r[7]=0,r[8]=(y+M)*P,r[9]=(x-_)*P,r[10]=(1-(p+A))*P,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Ql.set(r[0],r[1],r[2]).length();const o=Ql.set(r[4],r[5],r[6]).length(),a=Ql.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Or.copy(this);const c=1/s,h=1/o,f=1/a;return Or.elements[0]*=c,Or.elements[1]*=c,Or.elements[2]*=c,Or.elements[4]*=h,Or.elements[5]*=h,Or.elements[6]*=h,Or.elements[8]*=f,Or.elements[9]*=f,Or.elements[10]*=f,t.setFromRotationMatrix(Or),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o,a=hs){const l=this.elements,c=2*s/(t-e),h=2*s/(i-r),f=(t+e)/(t-e),p=(i+r)/(i-r);let m,y;if(a===hs)m=-(o+s)/(o-s),y=-2*o*s/(o-s);else if(a===$d)m=-o/(o-s),y=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=f,l[12]=0,l[1]=0,l[5]=h,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=y,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,o,a=hs){const l=this.elements,c=1/(t-e),h=1/(i-r),f=1/(o-s),p=(t+e)*c,m=(i+r)*h;let y,A;if(a===hs)y=(o+s)*f,A=-2*f;else if(a===$d)y=s*f,A=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*h,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=A,l[14]=-y,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Ql=new N,Or=new Xe,MF=new N(0,0,0),wF=new N(1,1,1),Co=new N,Zf=new N,ir=new N,Lw=new Xe,Dw=new sn;class Fi{constructor(e=0,t=0,i=0,r=Fi.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],c=r[5],h=r[9],f=r[2],p=r[6],m=r[10];switch(t){case"XYZ":this._y=Math.asin(En(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,c),this._z=0);break;case"YXZ":this._x=Math.asin(-En(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin(En(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-f,m),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-En(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(En(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,c),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-En(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-h,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return Lw.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Lw,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Dw.setFromEuler(this),this.setFromQuaternion(Dw,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Fi.DEFAULT_ORDER="XYZ";class ll{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let EF=0;const Nw=new N,ql=new sn,Ps=new Xe,$f=new N,Hu=new N,bF=new N,CF=new sn,Fw=new N(1,0,0),Uw=new N(0,1,0),Ow=new N(0,0,1),kw={type:"added"},TF={type:"removed"},Zl={type:"childadded",child:null},dy={type:"childremoved",child:null};class Rt extends Ss{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:EF++}),this.uuid=lr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Rt.DEFAULT_UP.clone();const e=new N,t=new Fi,i=new sn,r=new N(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Xe},normalMatrix:{value:new St}}),this.matrix=new Xe,this.matrixWorld=new Xe,this.matrixAutoUpdate=Rt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Rt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new ll,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return ql.setFromAxisAngle(e,t),this.quaternion.multiply(ql),this}rotateOnWorldAxis(e,t){return ql.setFromAxisAngle(e,t),this.quaternion.premultiply(ql),this}rotateX(e){return this.rotateOnAxis(Fw,e)}rotateY(e){return this.rotateOnAxis(Uw,e)}rotateZ(e){return this.rotateOnAxis(Ow,e)}translateOnAxis(e,t){return Nw.copy(e).applyQuaternion(this.quaternion),this.position.add(Nw.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Fw,e)}translateY(e){return this.translateOnAxis(Uw,e)}translateZ(e){return this.translateOnAxis(Ow,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Ps.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?$f.copy(e):$f.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Hu.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ps.lookAt(Hu,$f,this.up):Ps.lookAt($f,Hu,this.up),this.quaternion.setFromRotationMatrix(Ps),r&&(Ps.extractRotation(r.matrixWorld),ql.setFromRotationMatrix(Ps),this.quaternion.premultiply(ql.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(kw),Zl.child=e,this.dispatchEvent(Zl),Zl.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(TF),dy.child=e,this.dispatchEvent(dy),dy.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Ps.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Ps.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ps),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(kw),Zl.child=e,this.dispatchEvent(Zl),Zl.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Hu,e,bF),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Hu,CF,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,h=l.length;c<h;c++){const f=l[c];s(e.shapes,f)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),h=o(e.images),f=o(e.shapes),p=o(e.skeletons),m=o(e.animations),y=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),h.length>0&&(i.images=h),f.length>0&&(i.shapes=f),p.length>0&&(i.skeletons=p),m.length>0&&(i.animations=m),y.length>0&&(i.nodes=y)}return i.object=r,i;function o(a){const l=[];for(const c in a){const h=a[c];delete h.metadata,l.push(h)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}Rt.DEFAULT_UP=new N(0,1,0);Rt.DEFAULT_MATRIX_AUTO_UPDATE=!0;Rt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const kr=new N,Bs=new N,hy=new N,Ls=new N,$l=new N,ec=new N,zw=new N,fy=new N,py=new N,my=new N,gy=new Gt,vy=new Gt,yy=new Gt;class Si{constructor(e=new N,t=new N,i=new N){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),kr.subVectors(e,t),r.cross(kr);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){kr.subVectors(r,t),Bs.subVectors(i,t),hy.subVectors(e,t);const o=kr.dot(kr),a=kr.dot(Bs),l=kr.dot(hy),c=Bs.dot(Bs),h=Bs.dot(hy),f=o*c-a*a;if(f===0)return s.set(0,0,0),null;const p=1/f,m=(c*l-a*h)*p,y=(o*h-a*l)*p;return s.set(1-m-y,y,m)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Ls)===null?!1:Ls.x>=0&&Ls.y>=0&&Ls.x+Ls.y<=1}static getInterpolation(e,t,i,r,s,o,a,l){return this.getBarycoord(e,t,i,r,Ls)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,Ls.x),l.addScaledVector(o,Ls.y),l.addScaledVector(a,Ls.z),l)}static getInterpolatedAttribute(e,t,i,r,s,o){return gy.setScalar(0),vy.setScalar(0),yy.setScalar(0),gy.fromBufferAttribute(e,t),vy.fromBufferAttribute(e,i),yy.fromBufferAttribute(e,r),o.setScalar(0),o.addScaledVector(gy,s.x),o.addScaledVector(vy,s.y),o.addScaledVector(yy,s.z),o}static isFrontFacing(e,t,i,r){return kr.subVectors(i,t),Bs.subVectors(e,t),kr.cross(Bs).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return kr.subVectors(this.c,this.b),Bs.subVectors(this.a,this.b),kr.cross(Bs).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Si.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Si.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return Si.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return Si.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Si.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;$l.subVectors(r,i),ec.subVectors(s,i),fy.subVectors(e,i);const l=$l.dot(fy),c=ec.dot(fy);if(l<=0&&c<=0)return t.copy(i);py.subVectors(e,r);const h=$l.dot(py),f=ec.dot(py);if(h>=0&&f<=h)return t.copy(r);const p=l*f-h*c;if(p<=0&&l>=0&&h<=0)return o=l/(l-h),t.copy(i).addScaledVector($l,o);my.subVectors(e,s);const m=$l.dot(my),y=ec.dot(my);if(y>=0&&m<=y)return t.copy(s);const A=m*c-l*y;if(A<=0&&c>=0&&y<=0)return a=c/(c-y),t.copy(i).addScaledVector(ec,a);const x=h*y-m*f;if(x<=0&&f-h>=0&&m-y>=0)return zw.subVectors(s,r),a=(f-h)/(f-h+(m-y)),t.copy(r).addScaledVector(zw,a);const g=1/(x+A+p);return o=A*g,a=p*g,t.copy(i).addScaledVector($l,o).addScaledVector(ec,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const RI={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},To={h:0,s:0,l:0},ep={h:0,s:0,l:0};function xy(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class Ie{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=In){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Ft.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=Ft.workingColorSpace){return this.r=e,this.g=t,this.b=i,Ft.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=Ft.workingColorSpace){if(e=jA(e,1),t=En(t,0,1),i=En(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=xy(o,s,e+1/3),this.g=xy(o,s,e),this.b=xy(o,s,e-1/3)}return Ft.toWorkingColorSpace(this,r),this}setStyle(e,t=In){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=In){const i=RI[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Qs(e.r),this.g=Qs(e.g),this.b=Qs(e.b),this}copyLinearToSRGB(e){return this.r=Fc(e.r),this.g=Fc(e.g),this.b=Fc(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=In){return Ft.fromWorkingColorSpace(yi.copy(this),e),Math.round(En(yi.r*255,0,255))*65536+Math.round(En(yi.g*255,0,255))*256+Math.round(En(yi.b*255,0,255))}getHexString(e=In){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Ft.workingColorSpace){Ft.fromWorkingColorSpace(yi.copy(this),t);const i=yi.r,r=yi.g,s=yi.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,c;const h=(a+o)/2;if(a===o)l=0,c=0;else{const f=o-a;switch(c=h<=.5?f/(o+a):f/(2-o-a),o){case i:l=(r-s)/f+(r<s?6:0);break;case r:l=(s-i)/f+2;break;case s:l=(i-r)/f+4;break}l/=6}return e.h=l,e.s=c,e.l=h,e}getRGB(e,t=Ft.workingColorSpace){return Ft.fromWorkingColorSpace(yi.copy(this),t),e.r=yi.r,e.g=yi.g,e.b=yi.b,e}getStyle(e=In){Ft.fromWorkingColorSpace(yi.copy(this),e);const t=yi.r,i=yi.g,r=yi.b;return e!==In?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(To),this.setHSL(To.h+e,To.s+t,To.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(To),e.getHSL(ep);const i=Rd(To.h,ep.h,t),r=Rd(To.s,ep.s,t),s=Rd(To.l,ep.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const yi=new Ie;Ie.NAMES=RI;let RF=0;class pn extends Ss{static get type(){return"Material"}get type(){return this.constructor.type}set type(e){}constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:RF++}),this.uuid=lr(),this.name="",this.blending=rl,this.side=Kr,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Nm,this.blendDst=Fm,this.blendEquation=ko,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ie(0,0,0),this.blendAlpha=0,this.depthFunc=pl,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=x_,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Ga,this.stencilZFail=Ga,this.stencilZPass=Ga,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==rl&&(i.blending=this.blending),this.side!==Kr&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==Nm&&(i.blendSrc=this.blendSrc),this.blendDst!==Fm&&(i.blendDst=this.blendDst),this.blendEquation!==ko&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==pl&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==x_&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Ga&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Ga&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Ga&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class xn extends pn{static get type(){return"MeshBasicMaterial"}constructor(e){super(),this.isMeshBasicMaterial=!0,this.color=new Ie(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Fi,this.combine=fh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Ws=IF();function IF(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):c<-14?(i[l]=1024>>-c-14,i[l|256]=1024>>-c-14|32768,r[l]=-c-1,r[l|256]=-c-1):c<=15?(i[l]=c+15<<10,i[l|256]=c+15<<10|32768,r[l]=13,r[l|256]=13):c<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,h=0;for(;!(c&8388608);)c<<=1,h-=8388608;c&=-8388609,h+=947912704,s[l]=c|h}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function ji(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=En(n,-65504,65504),Ws.floatView[0]=n;const e=Ws.uint32View[0],t=e>>23&511;return Ws.baseTable[t]+((e&8388607)>>Ws.shiftTable[t])}function hd(n){const e=n>>10;return Ws.uint32View[0]=Ws.mantissaTable[Ws.offsetTable[e]+(n&1023)]+Ws.exponentTable[e],Ws.floatView[0]}const PF={toHalfFloat:ji,fromHalfFloat:hd},Fn=new N,tp=new ue;class yt{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=Zd,this.updateRanges=[],this.gpuType=Di,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)tp.fromBufferAttribute(this,t),tp.applyMatrix3(e),this.setXY(t,tp.x,tp.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Fn.fromBufferAttribute(this,t),Fn.applyMatrix3(e),this.setXYZ(t,Fn.x,Fn.y,Fn.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Fn.fromBufferAttribute(this,t),Fn.applyMatrix4(e),this.setXYZ(t,Fn.x,Fn.y,Fn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Fn.fromBufferAttribute(this,t),Fn.applyNormalMatrix(e),this.setXYZ(t,Fn.x,Fn.y,Fn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Fn.fromBufferAttribute(this,t),Fn.transformDirection(e),this.setXYZ(t,Fn.x,Fn.y,Fn.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Li(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Mt(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Li(t,this.array)),t}setX(e,t){return this.normalized&&(t=Mt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Li(t,this.array)),t}setY(e,t){return this.normalized&&(t=Mt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Li(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Mt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Li(t,this.array)),t}setW(e,t){return this.normalized&&(t=Mt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Mt(t,this.array),i=Mt(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Mt(t,this.array),i=Mt(i,this.array),r=Mt(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=Mt(t,this.array),i=Mt(i,this.array),r=Mt(r,this.array),s=Mt(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Zd&&(e.usage=this.usage),e}}class BF extends yt{constructor(e,t,i){super(new Int8Array(e),t,i)}}class LF extends yt{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class DF extends yt{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class NF extends yt{constructor(e,t,i){super(new Int16Array(e),t,i)}}class KA extends yt{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class FF extends yt{constructor(e,t,i){super(new Int32Array(e),t,i)}}class YA extends yt{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class UF extends yt{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=hd(this.array[e*this.itemSize]);return this.normalized&&(t=Li(t,this.array)),t}setX(e,t){return this.normalized&&(t=Mt(t,this.array)),this.array[e*this.itemSize]=ji(t),this}getY(e){let t=hd(this.array[e*this.itemSize+1]);return this.normalized&&(t=Li(t,this.array)),t}setY(e,t){return this.normalized&&(t=Mt(t,this.array)),this.array[e*this.itemSize+1]=ji(t),this}getZ(e){let t=hd(this.array[e*this.itemSize+2]);return this.normalized&&(t=Li(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Mt(t,this.array)),this.array[e*this.itemSize+2]=ji(t),this}getW(e){let t=hd(this.array[e*this.itemSize+3]);return this.normalized&&(t=Li(t,this.array)),t}setW(e,t){return this.normalized&&(t=Mt(t,this.array)),this.array[e*this.itemSize+3]=ji(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Mt(t,this.array),i=Mt(i,this.array)),this.array[e+0]=ji(t),this.array[e+1]=ji(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Mt(t,this.array),i=Mt(i,this.array),r=Mt(r,this.array)),this.array[e+0]=ji(t),this.array[e+1]=ji(i),this.array[e+2]=ji(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=Mt(t,this.array),i=Mt(i,this.array),r=Mt(r,this.array),s=Mt(s,this.array)),this.array[e+0]=ji(t),this.array[e+1]=ji(i),this.array[e+2]=ji(r),this.array[e+3]=ji(s),this}}class et extends yt{constructor(e,t,i){super(new Float32Array(e),t,i)}}let OF=0;const Ar=new Xe,_y=new Rt,tc=new N,rr=new si,Gu=new si,Zn=new N;class gt extends Ss{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:OF++}),this.uuid=lr(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(EI(e)?YA:KA)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new St().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ar.makeRotationFromQuaternion(e),this.applyMatrix4(Ar),this}rotateX(e){return Ar.makeRotationX(e),this.applyMatrix4(Ar),this}rotateY(e){return Ar.makeRotationY(e),this.applyMatrix4(Ar),this}rotateZ(e){return Ar.makeRotationZ(e),this.applyMatrix4(Ar),this}translate(e,t,i){return Ar.makeTranslation(e,t,i),this.applyMatrix4(Ar),this}scale(e,t,i){return Ar.makeScale(e,t,i),this.applyMatrix4(Ar),this}lookAt(e){return _y.lookAt(e),_y.updateMatrix(),this.applyMatrix4(_y.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(tc).negate(),this.translate(tc.x,tc.y,tc.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const i=[];for(let r=0,s=e.length;r<s;r++){const o=e[r];i.push(o.x,o.y,o.z||0)}this.setAttribute("position",new et(i,3))}else{for(let i=0,r=t.count;i<r;i++){const s=e[i];t.setXYZ(i,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new si);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new N(-1/0,-1/0,-1/0),new N(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];rr.setFromBufferAttribute(s),this.morphTargetsRelative?(Zn.addVectors(this.boundingBox.min,rr.min),this.boundingBox.expandByPoint(Zn),Zn.addVectors(this.boundingBox.max,rr.max),this.boundingBox.expandByPoint(Zn)):(this.boundingBox.expandByPoint(rr.min),this.boundingBox.expandByPoint(rr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Hn);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new N,1/0);return}if(e){const i=this.boundingSphere.center;if(rr.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];Gu.setFromBufferAttribute(a),this.morphTargetsRelative?(Zn.addVectors(rr.min,Gu.min),rr.expandByPoint(Zn),Zn.addVectors(rr.max,Gu.max),rr.expandByPoint(Zn)):(rr.expandByPoint(Gu.min),rr.expandByPoint(Gu.max))}rr.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)Zn.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Zn));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,h=a.count;c<h;c++)Zn.fromBufferAttribute(a,c),l&&(tc.fromBufferAttribute(e,c),Zn.add(tc)),r=Math.max(r,i.distanceToSquared(Zn))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new yt(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let B=0;B<i.count;B++)a[B]=new N,l[B]=new N;const c=new N,h=new N,f=new N,p=new ue,m=new ue,y=new ue,A=new N,x=new N;function g(B,I,b){c.fromBufferAttribute(i,B),h.fromBufferAttribute(i,I),f.fromBufferAttribute(i,b),p.fromBufferAttribute(s,B),m.fromBufferAttribute(s,I),y.fromBufferAttribute(s,b),h.sub(c),f.sub(c),m.sub(p),y.sub(p);const U=1/(m.x*y.y-y.x*m.y);isFinite(U)&&(A.copy(h).multiplyScalar(y.y).addScaledVector(f,-m.y).multiplyScalar(U),x.copy(f).multiplyScalar(m.x).addScaledVector(h,-y.x).multiplyScalar(U),a[B].add(A),a[I].add(A),a[b].add(A),l[B].add(x),l[I].add(x),l[b].add(x))}let _=this.groups;_.length===0&&(_=[{start:0,count:e.count}]);for(let B=0,I=_.length;B<I;++B){const b=_[B],U=b.start,H=b.count;for(let X=U,ee=U+H;X<ee;X+=3)g(e.getX(X+0),e.getX(X+1),e.getX(X+2))}const M=new N,w=new N,C=new N,R=new N;function P(B){C.fromBufferAttribute(r,B),R.copy(C);const I=a[B];M.copy(I),M.sub(C.multiplyScalar(C.dot(I))).normalize(),w.crossVectors(R,I);const U=w.dot(l[B])<0?-1:1;o.setXYZW(B,M.x,M.y,M.z,U)}for(let B=0,I=_.length;B<I;++B){const b=_[B],U=b.start,H=b.count;for(let X=U,ee=U+H;X<ee;X+=3)P(e.getX(X+0)),P(e.getX(X+1)),P(e.getX(X+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new yt(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let p=0,m=i.count;p<m;p++)i.setXYZ(p,0,0,0);const r=new N,s=new N,o=new N,a=new N,l=new N,c=new N,h=new N,f=new N;if(e)for(let p=0,m=e.count;p<m;p+=3){const y=e.getX(p+0),A=e.getX(p+1),x=e.getX(p+2);r.fromBufferAttribute(t,y),s.fromBufferAttribute(t,A),o.fromBufferAttribute(t,x),h.subVectors(o,s),f.subVectors(r,s),h.cross(f),a.fromBufferAttribute(i,y),l.fromBufferAttribute(i,A),c.fromBufferAttribute(i,x),a.add(h),l.add(h),c.add(h),i.setXYZ(y,a.x,a.y,a.z),i.setXYZ(A,l.x,l.y,l.z),i.setXYZ(x,c.x,c.y,c.z)}else for(let p=0,m=t.count;p<m;p+=3)r.fromBufferAttribute(t,p+0),s.fromBufferAttribute(t,p+1),o.fromBufferAttribute(t,p+2),h.subVectors(o,s),f.subVectors(r,s),h.cross(f),i.setXYZ(p+0,h.x,h.y,h.z),i.setXYZ(p+1,h.x,h.y,h.z),i.setXYZ(p+2,h.x,h.y,h.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Zn.fromBufferAttribute(e,t),Zn.normalize(),e.setXYZ(t,Zn.x,Zn.y,Zn.z)}toNonIndexed(){function e(a,l){const c=a.array,h=a.itemSize,f=a.normalized,p=new c.constructor(l.length*h);let m=0,y=0;for(let A=0,x=l.length;A<x;A++){a.isInterleavedBufferAttribute?m=l[A]*a.data.stride+a.offset:m=l[A]*h;for(let g=0;g<h;g++)p[y++]=c[m++]}return new yt(p,h,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new gt,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],c=e(l,i);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let h=0,f=c.length;h<f;h++){const p=c[h],m=e(p,i);l.push(m)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],h=[];for(let f=0,p=c.length;f<p;f++){const m=c[f];h.push(m.toJSON(e.data))}h.length>0&&(r[l]=h,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const c in r){const h=r[c];this.setAttribute(c,h.clone(t))}const s=e.morphAttributes;for(const c in s){const h=[],f=s[c];for(let p=0,m=f.length;p<m;p++)h.push(f[p].clone(t));this.morphAttributes[c]=h}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,h=o.length;c<h;c++){const f=o[c];this.addGroup(f.start,f.count,f.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Hw=new Xe,wa=new _s,np=new Hn,Gw=new N,ip=new N,rp=new N,sp=new N,Ay=new N,op=new N,Vw=new N,ap=new N;class Yt extends Rt{constructor(e=new gt,t=new xn){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){op.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const h=a[l],f=s[l];h!==0&&(Ay.fromBufferAttribute(f,e),o?op.addScaledVector(Ay,h):op.addScaledVector(Ay.sub(t),h))}t.add(op)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),np.copy(i.boundingSphere),np.applyMatrix4(s),wa.copy(e.ray).recast(e.near),!(np.containsPoint(wa.origin)===!1&&(wa.intersectSphere(np,Gw)===null||wa.origin.distanceToSquared(Gw)>(e.far-e.near)**2))&&(Hw.copy(s).invert(),wa.copy(e.ray).applyMatrix4(Hw),!(i.boundingBox!==null&&wa.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,wa)))}_computeIntersections(e,t,i){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,h=s.attributes.uv1,f=s.attributes.normal,p=s.groups,m=s.drawRange;if(a!==null)if(Array.isArray(o))for(let y=0,A=p.length;y<A;y++){const x=p[y],g=o[x.materialIndex],_=Math.max(x.start,m.start),M=Math.min(a.count,Math.min(x.start+x.count,m.start+m.count));for(let w=_,C=M;w<C;w+=3){const R=a.getX(w),P=a.getX(w+1),B=a.getX(w+2);r=lp(this,g,e,i,c,h,f,R,P,B),r&&(r.faceIndex=Math.floor(w/3),r.face.materialIndex=x.materialIndex,t.push(r))}}else{const y=Math.max(0,m.start),A=Math.min(a.count,m.start+m.count);for(let x=y,g=A;x<g;x+=3){const _=a.getX(x),M=a.getX(x+1),w=a.getX(x+2);r=lp(this,o,e,i,c,h,f,_,M,w),r&&(r.faceIndex=Math.floor(x/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(o))for(let y=0,A=p.length;y<A;y++){const x=p[y],g=o[x.materialIndex],_=Math.max(x.start,m.start),M=Math.min(l.count,Math.min(x.start+x.count,m.start+m.count));for(let w=_,C=M;w<C;w+=3){const R=w,P=w+1,B=w+2;r=lp(this,g,e,i,c,h,f,R,P,B),r&&(r.faceIndex=Math.floor(w/3),r.face.materialIndex=x.materialIndex,t.push(r))}}else{const y=Math.max(0,m.start),A=Math.min(l.count,m.start+m.count);for(let x=y,g=A;x<g;x+=3){const _=x,M=x+1,w=x+2;r=lp(this,o,e,i,c,h,f,_,M,w),r&&(r.faceIndex=Math.floor(x/3),t.push(r))}}}}function kF(n,e,t,i,r,s,o,a){let l;if(e.side===ri?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side===Kr,a),l===null)return null;ap.copy(a),ap.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(ap);return c<t.near||c>t.far?null:{distance:c,point:ap.clone(),object:n}}function lp(n,e,t,i,r,s,o,a,l,c){n.getVertexPosition(a,ip),n.getVertexPosition(l,rp),n.getVertexPosition(c,sp);const h=kF(n,e,t,i,ip,rp,sp,Vw);if(h){const f=new N;Si.getBarycoord(Vw,ip,rp,sp,f),r&&(h.uv=Si.getInterpolatedAttribute(r,a,l,c,f,new ue)),s&&(h.uv1=Si.getInterpolatedAttribute(s,a,l,c,f,new ue)),o&&(h.normal=Si.getInterpolatedAttribute(o,a,l,c,f,new N),h.normal.dot(i.direction)>0&&h.normal.multiplyScalar(-1));const p={a,b:l,c,normal:new N,materialIndex:0};Si.getNormal(ip,rp,sp,p.normal),h.face=p,h.barycoord=f}return h}class ca extends gt{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],h=[],f=[];let p=0,m=0;y("z","y","x",-1,-1,i,t,e,o,s,0),y("z","y","x",1,-1,i,t,-e,o,s,1),y("x","z","y",1,1,e,i,t,r,o,2),y("x","z","y",1,-1,e,i,-t,r,o,3),y("x","y","z",1,-1,e,t,i,r,s,4),y("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new et(c,3)),this.setAttribute("normal",new et(h,3)),this.setAttribute("uv",new et(f,2));function y(A,x,g,_,M,w,C,R,P,B,I){const b=w/P,U=C/B,H=w/2,X=C/2,ee=R/2,ne=P+1,te=B+1;let le=0,D=0;const W=new N;for(let j=0;j<te;j++){const Z=j*U-X;for(let me=0;me<ne;me++){const Be=me*b-H;W[A]=Be*_,W[x]=Z*M,W[g]=ee,c.push(W.x,W.y,W.z),W[A]=0,W[x]=0,W[g]=R>0?1:-1,h.push(W.x,W.y,W.z),f.push(me/P),f.push(1-j/B),le+=1}}for(let j=0;j<B;j++)for(let Z=0;Z<P;Z++){const me=p+Z+ne*j,Be=p+Z+ne*(j+1),re=p+(Z+1)+ne*(j+1),xe=p+(Z+1)+ne*j;l.push(me,Be,xe),l.push(Be,re,xe),D+=6}a.addGroup(m,D,I),m+=D,p+=le}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ca(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function qc(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Pi(n){const e={};for(let t=0;t<n.length;t++){const i=qc(n[t]);for(const r in i)e[r]=i[r]}return e}function zF(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function II(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Ft.workingColorSpace}const PI={clone:qc,merge:Pi};var HF=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,GF=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class wi extends pn{static get type(){return"ShaderMaterial"}constructor(e){super(),this.isShaderMaterial=!0,this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=HF,this.fragmentShader=GF,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=qc(e.uniforms),this.uniformsGroups=zF(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class yh extends Rt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Xe,this.projectionMatrix=new Xe,this.projectionMatrixInverse=new Xe,this.coordinateSystem=hs}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Ro=new N,Ww=new ue,jw=new ue;let vn=class extends yh{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Qc*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(al*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Qc*2*Math.atan(Math.tan(al*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Ro.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Ro.x,Ro.y).multiplyScalar(-e/Ro.z),Ro.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Ro.x,Ro.y).multiplyScalar(-e/Ro.z)}getViewSize(e,t){return this.getViewBounds(e,Ww,jw),t.subVectors(jw,Ww)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(al*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/c,r*=o.width/l,i*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}};const nc=-90,ic=1;class BI extends Rt{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new vn(nc,ic,e,t);r.layers=this.layers,this.add(r);const s=new vn(nc,ic,e,t);s.layers=this.layers,this.add(s);const o=new vn(nc,ic,e,t);o.layers=this.layers,this.add(o);const a=new vn(nc,ic,e,t);a.layers=this.layers,this.add(a);const l=new vn(nc,ic,e,t);l.layers=this.layers,this.add(l);const c=new vn(nc,ic,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,a,l]=t;for(const c of t)this.remove(c);if(e===hs)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===$d)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,h]=this.children,f=e.getRenderTarget(),p=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),y=e.xr.enabled;e.xr.enabled=!1;const A=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,c),i.texture.generateMipmaps=A,e.setRenderTarget(i,5,r),e.render(t,h),e.setRenderTarget(f,p,m),e.xr.enabled=y,i.texture.needsPMREMUpdate=!0}}class xh extends tn{constructor(e,t,i,r,s,o,a,l,c,h){e=e!==void 0?e:[],t=t!==void 0?t:io,super(e,t,i,r,s,o,a,l,c,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class LI extends ai{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new xh(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:$t}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new ca(5,5,5),s=new wi({name:"CubemapFromEquirect",uniforms:qc(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:ri,blending:Ys});s.uniforms.tEquirect.value=t;const o=new Yt(r,s),a=t.minFilter;return t.minFilter===Yi&&(t.minFilter=$t),new BI(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const Sy=new N,VF=new N,WF=new St;class br{constructor(e=new N(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=Sy.subVectors(i,t).cross(VF.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(Sy),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||WF.getNormalMatrix(e),r=this.coplanarPoint(Sy).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Ea=new Hn,cp=new N;class _h{constructor(e=new br,t=new br,i=new br,r=new br,s=new br,o=new br){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=hs){const i=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],l=r[3],c=r[4],h=r[5],f=r[6],p=r[7],m=r[8],y=r[9],A=r[10],x=r[11],g=r[12],_=r[13],M=r[14],w=r[15];if(i[0].setComponents(l-s,p-c,x-m,w-g).normalize(),i[1].setComponents(l+s,p+c,x+m,w+g).normalize(),i[2].setComponents(l+o,p+h,x+y,w+_).normalize(),i[3].setComponents(l-o,p-h,x-y,w-_).normalize(),i[4].setComponents(l-a,p-f,x-A,w-M).normalize(),t===hs)i[5].setComponents(l+a,p+f,x+A,w+M).normalize();else if(t===$d)i[5].setComponents(a,f,A,M).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Ea.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Ea.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Ea)}intersectsSprite(e){return Ea.center.set(0,0,0),Ea.radius=.7071067811865476,Ea.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ea)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(cp.x=r.normal.x>0?e.max.x:e.min.x,cp.y=r.normal.y>0?e.max.y:e.min.y,cp.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(cp)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function DI(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function jF(n){const e=new WeakMap;function t(a,l){const c=a.array,h=a.usage,f=c.byteLength,p=n.createBuffer();n.bindBuffer(l,p),n.bufferData(l,c,h),a.onUploadCallback();let m;if(c instanceof Float32Array)m=n.FLOAT;else if(c instanceof Uint16Array)a.isFloat16BufferAttribute?m=n.HALF_FLOAT:m=n.UNSIGNED_SHORT;else if(c instanceof Int16Array)m=n.SHORT;else if(c instanceof Uint32Array)m=n.UNSIGNED_INT;else if(c instanceof Int32Array)m=n.INT;else if(c instanceof Int8Array)m=n.BYTE;else if(c instanceof Uint8Array)m=n.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)m=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:p,type:m,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:f}}function i(a,l,c){const h=l.array,f=l.updateRanges;if(n.bindBuffer(c,a),f.length===0)n.bufferSubData(c,0,h);else{f.sort((m,y)=>m.start-y.start);let p=0;for(let m=1;m<f.length;m++){const y=f[p],A=f[m];A.start<=y.start+y.count+1?y.count=Math.max(y.count,A.start+A.count-y.start):(++p,f[p]=A)}f.length=p+1;for(let m=0,y=f.length;m<y;m++){const A=f[m];n.bufferSubData(c,A.start*h.BYTES_PER_ELEMENT,h,A.start,A.count)}l.clearUpdateRanges()}l.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(n.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const h=e.get(a);(!h||h.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const c=e.get(a);if(c===void 0)e.set(a,t(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(c.buffer,a,l),c.version=a.version}}return{get:r,remove:s,update:o}}class bl extends gt{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),c=a+1,h=l+1,f=e/a,p=t/l,m=[],y=[],A=[],x=[];for(let g=0;g<h;g++){const _=g*p-o;for(let M=0;M<c;M++){const w=M*f-s;y.push(w,-_,0),A.push(0,0,1),x.push(M/a),x.push(1-g/l)}}for(let g=0;g<l;g++)for(let _=0;_<a;_++){const M=_+c*g,w=_+c*(g+1),C=_+1+c*(g+1),R=_+1+c*g;m.push(M,w,R),m.push(w,C,R)}this.setIndex(m),this.setAttribute("position",new et(y,3)),this.setAttribute("normal",new et(A,3)),this.setAttribute("uv",new et(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new bl(e.width,e.height,e.widthSegments,e.heightSegments)}}var XF=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,JF=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,KF=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,YF=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,QF=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,qF=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,ZF=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,$F=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,e3=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,t3=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,n3=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,i3=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,r3=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,s3=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,o3=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,a3=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,l3=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,c3=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,u3=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,d3=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,h3=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,f3=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,p3=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,m3=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,g3=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,v3=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,y3=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,x3=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,_3=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,A3=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,S3="gl_FragColor = linearToOutputTexel( gl_FragColor );",M3=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,w3=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,E3=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,b3=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,C3=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,T3=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,R3=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,I3=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,P3=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,B3=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,L3=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,D3=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,N3=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,F3=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,U3=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,O3=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,k3=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,z3=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,H3=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,G3=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,V3=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,W3=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,j3=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,X3=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,J3=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,K3=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Y3=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Q3=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,q3=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Z3=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,$3=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,eU=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,tU=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,nU=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,iU=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,rU=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,sU=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,oU=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,aU=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,lU=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,cU=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,uU=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,dU=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,hU=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,fU=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,pU=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,mU=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,gU=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,vU=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,yU=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,xU=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,_U=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,AU=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,SU=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,MU=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,wU=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,EU=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,bU=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,CU=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,TU=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,RU=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,IU=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,PU=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,BU=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,LU=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,DU=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,NU=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,FU=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,UU=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,OU=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,kU=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,zU=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,HU=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,GU=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,VU=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,WU=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const jU=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,XU=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,JU=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,KU=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,YU=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,QU=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,qU=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,ZU=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,$U=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,eO=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,tO=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,nO=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,iO=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,rO=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,sO=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,oO=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,aO=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,lO=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,cO=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,uO=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,dO=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,hO=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,fO=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,pO=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,mO=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,gO=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vO=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,yO=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,xO=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,_O=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,AO=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,SO=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,MO=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,wO=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,bt={alphahash_fragment:XF,alphahash_pars_fragment:JF,alphamap_fragment:KF,alphamap_pars_fragment:YF,alphatest_fragment:QF,alphatest_pars_fragment:qF,aomap_fragment:ZF,aomap_pars_fragment:$F,batching_pars_vertex:e3,batching_vertex:t3,begin_vertex:n3,beginnormal_vertex:i3,bsdfs:r3,iridescence_fragment:s3,bumpmap_pars_fragment:o3,clipping_planes_fragment:a3,clipping_planes_pars_fragment:l3,clipping_planes_pars_vertex:c3,clipping_planes_vertex:u3,color_fragment:d3,color_pars_fragment:h3,color_pars_vertex:f3,color_vertex:p3,common:m3,cube_uv_reflection_fragment:g3,defaultnormal_vertex:v3,displacementmap_pars_vertex:y3,displacementmap_vertex:x3,emissivemap_fragment:_3,emissivemap_pars_fragment:A3,colorspace_fragment:S3,colorspace_pars_fragment:M3,envmap_fragment:w3,envmap_common_pars_fragment:E3,envmap_pars_fragment:b3,envmap_pars_vertex:C3,envmap_physical_pars_fragment:O3,envmap_vertex:T3,fog_vertex:R3,fog_pars_vertex:I3,fog_fragment:P3,fog_pars_fragment:B3,gradientmap_pars_fragment:L3,lightmap_pars_fragment:D3,lights_lambert_fragment:N3,lights_lambert_pars_fragment:F3,lights_pars_begin:U3,lights_toon_fragment:k3,lights_toon_pars_fragment:z3,lights_phong_fragment:H3,lights_phong_pars_fragment:G3,lights_physical_fragment:V3,lights_physical_pars_fragment:W3,lights_fragment_begin:j3,lights_fragment_maps:X3,lights_fragment_end:J3,logdepthbuf_fragment:K3,logdepthbuf_pars_fragment:Y3,logdepthbuf_pars_vertex:Q3,logdepthbuf_vertex:q3,map_fragment:Z3,map_pars_fragment:$3,map_particle_fragment:eU,map_particle_pars_fragment:tU,metalnessmap_fragment:nU,metalnessmap_pars_fragment:iU,morphinstance_vertex:rU,morphcolor_vertex:sU,morphnormal_vertex:oU,morphtarget_pars_vertex:aU,morphtarget_vertex:lU,normal_fragment_begin:cU,normal_fragment_maps:uU,normal_pars_fragment:dU,normal_pars_vertex:hU,normal_vertex:fU,normalmap_pars_fragment:pU,clearcoat_normal_fragment_begin:mU,clearcoat_normal_fragment_maps:gU,clearcoat_pars_fragment:vU,iridescence_pars_fragment:yU,opaque_fragment:xU,packing:_U,premultiplied_alpha_fragment:AU,project_vertex:SU,dithering_fragment:MU,dithering_pars_fragment:wU,roughnessmap_fragment:EU,roughnessmap_pars_fragment:bU,shadowmap_pars_fragment:CU,shadowmap_pars_vertex:TU,shadowmap_vertex:RU,shadowmask_pars_fragment:IU,skinbase_vertex:PU,skinning_pars_vertex:BU,skinning_vertex:LU,skinnormal_vertex:DU,specularmap_fragment:NU,specularmap_pars_fragment:FU,tonemapping_fragment:UU,tonemapping_pars_fragment:OU,transmission_fragment:kU,transmission_pars_fragment:zU,uv_pars_fragment:HU,uv_pars_vertex:GU,uv_vertex:VU,worldpos_vertex:WU,background_vert:jU,background_frag:XU,backgroundCube_vert:JU,backgroundCube_frag:KU,cube_vert:YU,cube_frag:QU,depth_vert:qU,depth_frag:ZU,distanceRGBA_vert:$U,distanceRGBA_frag:eO,equirect_vert:tO,equirect_frag:nO,linedashed_vert:iO,linedashed_frag:rO,meshbasic_vert:sO,meshbasic_frag:oO,meshlambert_vert:aO,meshlambert_frag:lO,meshmatcap_vert:cO,meshmatcap_frag:uO,meshnormal_vert:dO,meshnormal_frag:hO,meshphong_vert:fO,meshphong_frag:pO,meshphysical_vert:mO,meshphysical_frag:gO,meshtoon_vert:vO,meshtoon_frag:yO,points_vert:xO,points_frag:_O,shadow_vert:AO,shadow_frag:SO,sprite_vert:MO,sprite_frag:wO},Ne={common:{diffuse:{value:new Ie(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new St},alphaMap:{value:null},alphaMapTransform:{value:new St},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new St}},envmap:{envMap:{value:null},envMapRotation:{value:new St},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new St}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new St}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new St},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new St},normalScale:{value:new ue(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new St},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new St}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new St}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new St}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ie(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ie(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new St},alphaTest:{value:0},uvTransform:{value:new St}},sprite:{diffuse:{value:new Ie(16777215)},opacity:{value:1},center:{value:new ue(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new St},alphaMap:{value:null},alphaMapTransform:{value:new St},alphaTest:{value:0}}},Wr={basic:{uniforms:Pi([Ne.common,Ne.specularmap,Ne.envmap,Ne.aomap,Ne.lightmap,Ne.fog]),vertexShader:bt.meshbasic_vert,fragmentShader:bt.meshbasic_frag},lambert:{uniforms:Pi([Ne.common,Ne.specularmap,Ne.envmap,Ne.aomap,Ne.lightmap,Ne.emissivemap,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,Ne.fog,Ne.lights,{emissive:{value:new Ie(0)}}]),vertexShader:bt.meshlambert_vert,fragmentShader:bt.meshlambert_frag},phong:{uniforms:Pi([Ne.common,Ne.specularmap,Ne.envmap,Ne.aomap,Ne.lightmap,Ne.emissivemap,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,Ne.fog,Ne.lights,{emissive:{value:new Ie(0)},specular:{value:new Ie(1118481)},shininess:{value:30}}]),vertexShader:bt.meshphong_vert,fragmentShader:bt.meshphong_frag},standard:{uniforms:Pi([Ne.common,Ne.envmap,Ne.aomap,Ne.lightmap,Ne.emissivemap,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,Ne.roughnessmap,Ne.metalnessmap,Ne.fog,Ne.lights,{emissive:{value:new Ie(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:bt.meshphysical_vert,fragmentShader:bt.meshphysical_frag},toon:{uniforms:Pi([Ne.common,Ne.aomap,Ne.lightmap,Ne.emissivemap,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,Ne.gradientmap,Ne.fog,Ne.lights,{emissive:{value:new Ie(0)}}]),vertexShader:bt.meshtoon_vert,fragmentShader:bt.meshtoon_frag},matcap:{uniforms:Pi([Ne.common,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,Ne.fog,{matcap:{value:null}}]),vertexShader:bt.meshmatcap_vert,fragmentShader:bt.meshmatcap_frag},points:{uniforms:Pi([Ne.points,Ne.fog]),vertexShader:bt.points_vert,fragmentShader:bt.points_frag},dashed:{uniforms:Pi([Ne.common,Ne.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:bt.linedashed_vert,fragmentShader:bt.linedashed_frag},depth:{uniforms:Pi([Ne.common,Ne.displacementmap]),vertexShader:bt.depth_vert,fragmentShader:bt.depth_frag},normal:{uniforms:Pi([Ne.common,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,{opacity:{value:1}}]),vertexShader:bt.meshnormal_vert,fragmentShader:bt.meshnormal_frag},sprite:{uniforms:Pi([Ne.sprite,Ne.fog]),vertexShader:bt.sprite_vert,fragmentShader:bt.sprite_frag},background:{uniforms:{uvTransform:{value:new St},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:bt.background_vert,fragmentShader:bt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new St}},vertexShader:bt.backgroundCube_vert,fragmentShader:bt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:bt.cube_vert,fragmentShader:bt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:bt.equirect_vert,fragmentShader:bt.equirect_frag},distanceRGBA:{uniforms:Pi([Ne.common,Ne.displacementmap,{referencePosition:{value:new N},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:bt.distanceRGBA_vert,fragmentShader:bt.distanceRGBA_frag},shadow:{uniforms:Pi([Ne.lights,Ne.fog,{color:{value:new Ie(0)},opacity:{value:1}}]),vertexShader:bt.shadow_vert,fragmentShader:bt.shadow_frag}};Wr.physical={uniforms:Pi([Wr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new St},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new St},clearcoatNormalScale:{value:new ue(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new St},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new St},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new St},sheen:{value:0},sheenColor:{value:new Ie(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new St},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new St},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new St},transmissionSamplerSize:{value:new ue},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new St},attenuationDistance:{value:0},attenuationColor:{value:new Ie(0)},specularColor:{value:new Ie(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new St},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new St},anisotropyVector:{value:new ue},anisotropyMap:{value:null},anisotropyMapTransform:{value:new St}}]),vertexShader:bt.meshphysical_vert,fragmentShader:bt.meshphysical_frag};const up={r:0,b:0,g:0},ba=new Fi,EO=new Xe;function bO(n,e,t,i,r,s,o){const a=new Ie(0);let l=s===!0?0:1,c,h,f=null,p=0,m=null;function y(_){let M=_.isScene===!0?_.background:null;return M&&M.isTexture&&(M=(_.backgroundBlurriness>0?t:e).get(M)),M}function A(_){let M=!1;const w=y(_);w===null?g(a,l):w&&w.isColor&&(g(w,1),M=!0);const C=n.xr.getEnvironmentBlendMode();C==="additive"?i.buffers.color.setClear(0,0,0,1,o):C==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||M)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function x(_,M){const w=y(M);w&&(w.isCubeTexture||w.mapping===su)?(h===void 0&&(h=new Yt(new ca(1,1,1),new wi({name:"BackgroundCubeMaterial",uniforms:qc(Wr.backgroundCube.uniforms),vertexShader:Wr.backgroundCube.vertexShader,fragmentShader:Wr.backgroundCube.fragmentShader,side:ri,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(C,R,P){this.matrixWorld.copyPosition(P.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(h)),ba.copy(M.backgroundRotation),ba.x*=-1,ba.y*=-1,ba.z*=-1,w.isCubeTexture&&w.isRenderTargetTexture===!1&&(ba.y*=-1,ba.z*=-1),h.material.uniforms.envMap.value=w,h.material.uniforms.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=M.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=M.backgroundIntensity,h.material.uniforms.backgroundRotation.value.setFromMatrix4(EO.makeRotationFromEuler(ba)),h.material.toneMapped=Ft.getTransfer(w.colorSpace)!==Qt,(f!==w||p!==w.version||m!==n.toneMapping)&&(h.material.needsUpdate=!0,f=w,p=w.version,m=n.toneMapping),h.layers.enableAll(),_.unshift(h,h.geometry,h.material,0,0,null)):w&&w.isTexture&&(c===void 0&&(c=new Yt(new bl(2,2),new wi({name:"BackgroundMaterial",uniforms:qc(Wr.background.uniforms),vertexShader:Wr.background.vertexShader,fragmentShader:Wr.background.fragmentShader,side:Kr,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=w,c.material.uniforms.backgroundIntensity.value=M.backgroundIntensity,c.material.toneMapped=Ft.getTransfer(w.colorSpace)!==Qt,w.matrixAutoUpdate===!0&&w.updateMatrix(),c.material.uniforms.uvTransform.value.copy(w.matrix),(f!==w||p!==w.version||m!==n.toneMapping)&&(c.material.needsUpdate=!0,f=w,p=w.version,m=n.toneMapping),c.layers.enableAll(),_.unshift(c,c.geometry,c.material,0,0,null))}function g(_,M){_.getRGB(up,II(n)),i.buffers.color.setClear(up.r,up.g,up.b,M,o)}return{getClearColor:function(){return a},setClearColor:function(_,M=1){a.set(_),l=M,g(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(_){l=_,g(a,l)},render:A,addToRenderList:x}}function CO(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=p(null);let s=r,o=!1;function a(b,U,H,X,ee){let ne=!1;const te=f(X,H,U);s!==te&&(s=te,c(s.object)),ne=m(b,X,H,ee),ne&&y(b,X,H,ee),ee!==null&&e.update(ee,n.ELEMENT_ARRAY_BUFFER),(ne||o)&&(o=!1,w(b,U,H,X),ee!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(ee).buffer))}function l(){return n.createVertexArray()}function c(b){return n.bindVertexArray(b)}function h(b){return n.deleteVertexArray(b)}function f(b,U,H){const X=H.wireframe===!0;let ee=i[b.id];ee===void 0&&(ee={},i[b.id]=ee);let ne=ee[U.id];ne===void 0&&(ne={},ee[U.id]=ne);let te=ne[X];return te===void 0&&(te=p(l()),ne[X]=te),te}function p(b){const U=[],H=[],X=[];for(let ee=0;ee<t;ee++)U[ee]=0,H[ee]=0,X[ee]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:U,enabledAttributes:H,attributeDivisors:X,object:b,attributes:{},index:null}}function m(b,U,H,X){const ee=s.attributes,ne=U.attributes;let te=0;const le=H.getAttributes();for(const D in le)if(le[D].location>=0){const j=ee[D];let Z=ne[D];if(Z===void 0&&(D==="instanceMatrix"&&b.instanceMatrix&&(Z=b.instanceMatrix),D==="instanceColor"&&b.instanceColor&&(Z=b.instanceColor)),j===void 0||j.attribute!==Z||Z&&j.data!==Z.data)return!0;te++}return s.attributesNum!==te||s.index!==X}function y(b,U,H,X){const ee={},ne=U.attributes;let te=0;const le=H.getAttributes();for(const D in le)if(le[D].location>=0){let j=ne[D];j===void 0&&(D==="instanceMatrix"&&b.instanceMatrix&&(j=b.instanceMatrix),D==="instanceColor"&&b.instanceColor&&(j=b.instanceColor));const Z={};Z.attribute=j,j&&j.data&&(Z.data=j.data),ee[D]=Z,te++}s.attributes=ee,s.attributesNum=te,s.index=X}function A(){const b=s.newAttributes;for(let U=0,H=b.length;U<H;U++)b[U]=0}function x(b){g(b,0)}function g(b,U){const H=s.newAttributes,X=s.enabledAttributes,ee=s.attributeDivisors;H[b]=1,X[b]===0&&(n.enableVertexAttribArray(b),X[b]=1),ee[b]!==U&&(n.vertexAttribDivisor(b,U),ee[b]=U)}function _(){const b=s.newAttributes,U=s.enabledAttributes;for(let H=0,X=U.length;H<X;H++)U[H]!==b[H]&&(n.disableVertexAttribArray(H),U[H]=0)}function M(b,U,H,X,ee,ne,te){te===!0?n.vertexAttribIPointer(b,U,H,ee,ne):n.vertexAttribPointer(b,U,H,X,ee,ne)}function w(b,U,H,X){A();const ee=X.attributes,ne=H.getAttributes(),te=U.defaultAttributeValues;for(const le in ne){const D=ne[le];if(D.location>=0){let W=ee[le];if(W===void 0&&(le==="instanceMatrix"&&b.instanceMatrix&&(W=b.instanceMatrix),le==="instanceColor"&&b.instanceColor&&(W=b.instanceColor)),W!==void 0){const j=W.normalized,Z=W.itemSize,me=e.get(W);if(me===void 0)continue;const Be=me.buffer,re=me.type,xe=me.bytesPerElement,Ee=re===n.INT||re===n.UNSIGNED_INT||W.gpuType===Vg;if(W.isInterleavedBufferAttribute){const _e=W.data,qe=_e.stride,rt=W.offset;if(_e.isInstancedInterleavedBuffer){for(let at=0;at<D.locationSize;at++)g(D.location+at,_e.meshPerAttribute);b.isInstancedMesh!==!0&&X._maxInstanceCount===void 0&&(X._maxInstanceCount=_e.meshPerAttribute*_e.count)}else for(let at=0;at<D.locationSize;at++)x(D.location+at);n.bindBuffer(n.ARRAY_BUFFER,Be);for(let at=0;at<D.locationSize;at++)M(D.location+at,Z/D.locationSize,re,j,qe*xe,(rt+Z/D.locationSize*at)*xe,Ee)}else{if(W.isInstancedBufferAttribute){for(let _e=0;_e<D.locationSize;_e++)g(D.location+_e,W.meshPerAttribute);b.isInstancedMesh!==!0&&X._maxInstanceCount===void 0&&(X._maxInstanceCount=W.meshPerAttribute*W.count)}else for(let _e=0;_e<D.locationSize;_e++)x(D.location+_e);n.bindBuffer(n.ARRAY_BUFFER,Be);for(let _e=0;_e<D.locationSize;_e++)M(D.location+_e,Z/D.locationSize,re,j,Z*xe,Z/D.locationSize*_e*xe,Ee)}}else if(te!==void 0){const j=te[le];if(j!==void 0)switch(j.length){case 2:n.vertexAttrib2fv(D.location,j);break;case 3:n.vertexAttrib3fv(D.location,j);break;case 4:n.vertexAttrib4fv(D.location,j);break;default:n.vertexAttrib1fv(D.location,j)}}}}_()}function C(){B();for(const b in i){const U=i[b];for(const H in U){const X=U[H];for(const ee in X)h(X[ee].object),delete X[ee];delete U[H]}delete i[b]}}function R(b){if(i[b.id]===void 0)return;const U=i[b.id];for(const H in U){const X=U[H];for(const ee in X)h(X[ee].object),delete X[ee];delete U[H]}delete i[b.id]}function P(b){for(const U in i){const H=i[U];if(H[b.id]===void 0)continue;const X=H[b.id];for(const ee in X)h(X[ee].object),delete X[ee];delete H[b.id]}}function B(){I(),o=!0,s!==r&&(s=r,c(s.object))}function I(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:B,resetDefaultState:I,dispose:C,releaseStatesOfGeometry:R,releaseStatesOfProgram:P,initAttributes:A,enableAttribute:x,disableUnusedAttributes:_}}function TO(n,e,t){let i;function r(c){i=c}function s(c,h){n.drawArrays(i,c,h),t.update(h,i,1)}function o(c,h,f){f!==0&&(n.drawArraysInstanced(i,c,h,f),t.update(h,i,f))}function a(c,h,f){if(f===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,c,0,h,0,f);let m=0;for(let y=0;y<f;y++)m+=h[y];t.update(m,i,1)}function l(c,h,f,p){if(f===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let y=0;y<c.length;y++)o(c[y],h[y],p[y]);else{m.multiDrawArraysInstancedWEBGL(i,c,0,h,0,p,0,f);let y=0;for(let A=0;A<f;A++)y+=h[A]*p[A];t.update(y,i,1)}}this.setMode=r,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function RO(n,e,t,i){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const P=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(P){return!(P!==Mi&&i.convert(P)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(P){const B=P===aa&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(P!==Qr&&i.convert(P)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&P!==Di&&!B)}function l(P){if(P==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";P="mediump"}return P==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=t.precision!==void 0?t.precision:"highp";const h=l(c);h!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",h,"instead."),c=h);const f=t.logarithmicDepthBuffer===!0,p=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),m=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),y=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),A=n.getParameter(n.MAX_TEXTURE_SIZE),x=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),g=n.getParameter(n.MAX_VERTEX_ATTRIBS),_=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),M=n.getParameter(n.MAX_VARYING_VECTORS),w=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),C=y>0,R=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:c,logarithmicDepthBuffer:f,reverseDepthBuffer:p,maxTextures:m,maxVertexTextures:y,maxTextureSize:A,maxCubemapSize:x,maxAttributes:g,maxVertexUniforms:_,maxVaryings:M,maxFragmentUniforms:w,vertexTextures:C,maxSamples:R}}function IO(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new br,a=new St,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,p){const m=f.length!==0||p||i!==0||r;return r=p,i=f.length,m},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(f,p){t=h(f,p,0)},this.setState=function(f,p,m){const y=f.clippingPlanes,A=f.clipIntersection,x=f.clipShadows,g=n.get(f);if(!r||y===null||y.length===0||s&&!x)s?h(null):c();else{const _=s?0:i,M=_*4;let w=g.clippingState||null;l.value=w,w=h(y,p,M,m);for(let C=0;C!==M;++C)w[C]=t[C];g.clippingState=w,this.numIntersection=A?this.numPlanes:0,this.numPlanes+=_}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function h(f,p,m,y){const A=f!==null?f.length:0;let x=null;if(A!==0){if(x=l.value,y!==!0||x===null){const g=m+A*4,_=p.matrixWorldInverse;a.getNormalMatrix(_),(x===null||x.length<g)&&(x=new Float32Array(g));for(let M=0,w=m;M!==A;++M,w+=4)o.copy(f[M]).applyMatrix4(_,a),o.normal.toArray(x,w),x[w+3]=o.constant}l.value=x,l.needsUpdate=!0}return e.numPlanes=A,e.numIntersection=0,x}}function PO(n){let e=new WeakMap;function t(o,a){return a===Yd?o.mapping=io:a===Qd&&(o.mapping=ta),o}function i(o){if(o&&o.isTexture){const a=o.mapping;if(a===Yd||a===Qd)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new LI(l.height);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",r),t(c.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class gs extends yh{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=h*this.view.offsetY,l=a-h*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Cc=4,Xw=[.125,.215,.35,.446,.526,.582],Wa=20,My=new gs,Jw=new Ie;let wy=null,Ey=0,by=0,Cy=!1;const Va=(1+Math.sqrt(5))/2,rc=1/Va,Kw=[new N(-Va,rc,0),new N(Va,rc,0),new N(-rc,0,Va),new N(rc,0,Va),new N(0,Va,-rc),new N(0,Va,rc),new N(-1,1,-1),new N(1,1,-1),new N(-1,1,1),new N(1,1,1)];class A_{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){wy=this._renderer.getRenderTarget(),Ey=this._renderer.getActiveCubeFace(),by=this._renderer.getActiveMipmapLevel(),Cy=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=qw(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Qw(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(wy,Ey,by),this._renderer.xr.enabled=Cy,e.scissorTest=!1,dp(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===io||e.mapping===ta?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),wy=this._renderer.getRenderTarget(),Ey=this._renderer.getActiveCubeFace(),by=this._renderer.getActiveMipmapLevel(),Cy=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:$t,minFilter:$t,generateMipmaps:!1,type:aa,format:Mi,colorSpace:bi,depthBuffer:!1},r=Yw(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Yw(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=BO(s)),this._blurMaterial=LO(s,e,t)}return r}_compileMaterial(e){const t=new Yt(this._lodPlanes[0],e);this._renderer.compile(t,My)}_sceneToCubeUV(e,t,i,r){const a=new vn(90,1,t,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],h=this._renderer,f=h.autoClear,p=h.toneMapping;h.getClearColor(Jw),h.toneMapping=ms,h.autoClear=!1;const m=new xn({name:"PMREM.Background",side:ri,depthWrite:!1,depthTest:!1}),y=new Yt(new ca,m);let A=!1;const x=e.background;x?x.isColor&&(m.color.copy(x),e.background=null,A=!0):(m.color.copy(Jw),A=!0);for(let g=0;g<6;g++){const _=g%3;_===0?(a.up.set(0,l[g],0),a.lookAt(c[g],0,0)):_===1?(a.up.set(0,0,l[g]),a.lookAt(0,c[g],0)):(a.up.set(0,l[g],0),a.lookAt(0,0,c[g]));const M=this._cubeSize;dp(r,_*M,g>2?M:0,M,M),h.setRenderTarget(r),A&&h.render(y,a),h.render(e,a)}y.geometry.dispose(),y.material.dispose(),h.toneMapping=p,h.autoClear=f,e.background=x}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===io||e.mapping===ta;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=qw()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Qw());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Yt(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;dp(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,My)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=Kw[(r-s-1)%Kw.length];this._blur(e,s-1,s,o,a)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const h=3,f=new Yt(this._lodPlanes[r],c),p=c.uniforms,m=this._sizeLods[i]-1,y=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*Wa-1),A=s/y,x=isFinite(s)?1+Math.floor(h*A):Wa;x>Wa&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${x} samples when the maximum is set to ${Wa}`);const g=[];let _=0;for(let P=0;P<Wa;++P){const B=P/A,I=Math.exp(-B*B/2);g.push(I),P===0?_+=I:P<x&&(_+=2*I)}for(let P=0;P<g.length;P++)g[P]=g[P]/_;p.envMap.value=e.texture,p.samples.value=x,p.weights.value=g,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:M}=this;p.dTheta.value=y,p.mipInt.value=M-i;const w=this._sizeLods[r],C=3*w*(r>M-Cc?r-M+Cc:0),R=4*(this._cubeSize-w);dp(t,C,R,3*w,2*w),l.setRenderTarget(t),l.render(f,My)}}function BO(n){const e=[],t=[],i=[];let r=n;const s=n-Cc+1+Xw.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>n-Cc?l=Xw[o-n+Cc-1]:o===0&&(l=0),i.push(l);const c=1/(a-2),h=-c,f=1+c,p=[h,h,f,h,f,f,h,h,f,f,h,f],m=6,y=6,A=3,x=2,g=1,_=new Float32Array(A*y*m),M=new Float32Array(x*y*m),w=new Float32Array(g*y*m);for(let R=0;R<m;R++){const P=R%3*2/3-1,B=R>2?0:-1,I=[P,B,0,P+2/3,B,0,P+2/3,B+1,0,P,B,0,P+2/3,B+1,0,P,B+1,0];_.set(I,A*y*R),M.set(p,x*y*R);const b=[R,R,R,R,R,R];w.set(b,g*y*R)}const C=new gt;C.setAttribute("position",new yt(_,A)),C.setAttribute("uv",new yt(M,x)),C.setAttribute("faceIndex",new yt(w,g)),e.push(C),r>Cc&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function Yw(n,e,t){const i=new ai(n,e,t);return i.texture.mapping=su,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function dp(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function LO(n,e,t){const i=new Float32Array(Wa),r=new N(0,1,0);return new wi({name:"SphericalGaussianBlur",defines:{n:Wa,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:QA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Ys,depthTest:!1,depthWrite:!1})}function Qw(){return new wi({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:QA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Ys,depthTest:!1,depthWrite:!1})}function qw(){return new wi({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:QA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Ys,depthTest:!1,depthWrite:!1})}function QA(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function DO(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){const l=a.mapping,c=l===Yd||l===Qd,h=l===io||l===ta;if(c||h){let f=e.get(a);const p=f!==void 0?f.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==p)return t===null&&(t=new A_(n)),f=c?t.fromEquirectangular(a,f):t.fromCubemap(a,f),f.texture.pmremVersion=a.pmremVersion,e.set(a,f),f.texture;if(f!==void 0)return f.texture;{const m=a.image;return c&&m&&m.height>0||h&&m&&r(m)?(t===null&&(t=new A_(n)),f=c?t.fromEquirectangular(a):t.fromCubemap(a),f.texture.pmremVersion=a.pmremVersion,e.set(a,f),a.addEventListener("dispose",s),f.texture):null}}}return a}function r(a){let l=0;const c=6;for(let h=0;h<c;h++)a[h]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function NO(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return r===null&&dd("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function FO(n,e,t,i){const r={},s=new WeakMap;function o(f){const p=f.target;p.index!==null&&e.remove(p.index);for(const y in p.attributes)e.remove(p.attributes[y]);for(const y in p.morphAttributes){const A=p.morphAttributes[y];for(let x=0,g=A.length;x<g;x++)e.remove(A[x])}p.removeEventListener("dispose",o),delete r[p.id];const m=s.get(p);m&&(e.remove(m),s.delete(p)),i.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,t.memory.geometries--}function a(f,p){return r[p.id]===!0||(p.addEventListener("dispose",o),r[p.id]=!0,t.memory.geometries++),p}function l(f){const p=f.attributes;for(const y in p)e.update(p[y],n.ARRAY_BUFFER);const m=f.morphAttributes;for(const y in m){const A=m[y];for(let x=0,g=A.length;x<g;x++)e.update(A[x],n.ARRAY_BUFFER)}}function c(f){const p=[],m=f.index,y=f.attributes.position;let A=0;if(m!==null){const _=m.array;A=m.version;for(let M=0,w=_.length;M<w;M+=3){const C=_[M+0],R=_[M+1],P=_[M+2];p.push(C,R,R,P,P,C)}}else if(y!==void 0){const _=y.array;A=y.version;for(let M=0,w=_.length/3-1;M<w;M+=3){const C=M+0,R=M+1,P=M+2;p.push(C,R,R,P,P,C)}}else return;const x=new(EI(p)?YA:KA)(p,1);x.version=A;const g=s.get(f);g&&e.remove(g),s.set(f,x)}function h(f){const p=s.get(f);if(p){const m=f.index;m!==null&&p.version<m.version&&c(f)}else c(f);return s.get(f)}return{get:a,update:l,getWireframeAttribute:h}}function UO(n,e,t){let i;function r(p){i=p}let s,o;function a(p){s=p.type,o=p.bytesPerElement}function l(p,m){n.drawElements(i,m,s,p*o),t.update(m,i,1)}function c(p,m,y){y!==0&&(n.drawElementsInstanced(i,m,s,p*o,y),t.update(m,i,y))}function h(p,m,y){if(y===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,m,0,s,p,0,y);let x=0;for(let g=0;g<y;g++)x+=m[g];t.update(x,i,1)}function f(p,m,y,A){if(y===0)return;const x=e.get("WEBGL_multi_draw");if(x===null)for(let g=0;g<p.length;g++)c(p[g]/o,m[g],A[g]);else{x.multiDrawElementsInstancedWEBGL(i,m,0,s,p,0,A,0,y);let g=0;for(let _=0;_<y;_++)g+=m[_]*A[_];t.update(g,i,1)}}this.setMode=r,this.setIndex=a,this.render=l,this.renderInstances=c,this.renderMultiDraw=h,this.renderMultiDrawInstances=f}function OO(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function kO(n,e,t){const i=new WeakMap,r=new Gt;function s(o,a,l){const c=o.morphTargetInfluences,h=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,f=h!==void 0?h.length:0;let p=i.get(a);if(p===void 0||p.count!==f){let b=function(){B.dispose(),i.delete(a),a.removeEventListener("dispose",b)};var m=b;p!==void 0&&p.texture.dispose();const y=a.morphAttributes.position!==void 0,A=a.morphAttributes.normal!==void 0,x=a.morphAttributes.color!==void 0,g=a.morphAttributes.position||[],_=a.morphAttributes.normal||[],M=a.morphAttributes.color||[];let w=0;y===!0&&(w=1),A===!0&&(w=2),x===!0&&(w=3);let C=a.attributes.position.count*w,R=1;C>e.maxTextureSize&&(R=Math.ceil(C/e.maxTextureSize),C=e.maxTextureSize);const P=new Float32Array(C*R*4*f),B=new Qg(P,C,R,f);B.type=Di,B.needsUpdate=!0;const I=w*4;for(let U=0;U<f;U++){const H=g[U],X=_[U],ee=M[U],ne=C*R*4*U;for(let te=0;te<H.count;te++){const le=te*I;y===!0&&(r.fromBufferAttribute(H,te),P[ne+le+0]=r.x,P[ne+le+1]=r.y,P[ne+le+2]=r.z,P[ne+le+3]=0),A===!0&&(r.fromBufferAttribute(X,te),P[ne+le+4]=r.x,P[ne+le+5]=r.y,P[ne+le+6]=r.z,P[ne+le+7]=0),x===!0&&(r.fromBufferAttribute(ee,te),P[ne+le+8]=r.x,P[ne+le+9]=r.y,P[ne+le+10]=r.z,P[ne+le+11]=ee.itemSize===4?r.w:1)}}p={count:f,texture:B,size:new ue(C,R)},i.set(a,p),a.addEventListener("dispose",b)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let y=0;for(let x=0;x<c.length;x++)y+=c[x];const A=a.morphTargetsRelative?1:1-y;l.getUniforms().setValue(n,"morphTargetBaseInfluence",A),l.getUniforms().setValue(n,"morphTargetInfluences",c)}l.getUniforms().setValue(n,"morphTargetsTexture",p.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",p.size)}return{update:s}}function zO(n,e,t,i){let r=new WeakMap;function s(l){const c=i.render.frame,h=l.geometry,f=e.get(l,h);if(r.get(f)!==c&&(e.update(f),r.set(f,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const p=l.skeleton;r.get(p)!==c&&(p.update(),r.set(p,c))}return f}function o(){r=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}class Ah extends tn{constructor(e,t,i,r,s,o,a,l,c,h=ol){if(h!==ol&&h!==vl)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&h===ol&&(i=ro),i===void 0&&h===vl&&(i=gl),super(null,r,s,o,a,l,h,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:zn,this.minFilter=l!==void 0?l:zn,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const NI=new tn,Zw=new Ah(1,1),FI=new Qg,UI=new JA,OI=new xh,$w=[],eE=[],tE=new Float32Array(16),nE=new Float32Array(9),iE=new Float32Array(4);function ou(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=$w[r];if(s===void 0&&(s=new Float32Array(r),$w[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function jn(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Xn(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function qg(n,e){let t=eE[e];t===void 0&&(t=new Int32Array(e),eE[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function HO(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function GO(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(jn(t,e))return;n.uniform2fv(this.addr,e),Xn(t,e)}}function VO(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(jn(t,e))return;n.uniform3fv(this.addr,e),Xn(t,e)}}function WO(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(jn(t,e))return;n.uniform4fv(this.addr,e),Xn(t,e)}}function jO(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(jn(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Xn(t,e)}else{if(jn(t,i))return;iE.set(i),n.uniformMatrix2fv(this.addr,!1,iE),Xn(t,i)}}function XO(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(jn(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Xn(t,e)}else{if(jn(t,i))return;nE.set(i),n.uniformMatrix3fv(this.addr,!1,nE),Xn(t,i)}}function JO(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(jn(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Xn(t,e)}else{if(jn(t,i))return;tE.set(i),n.uniformMatrix4fv(this.addr,!1,tE),Xn(t,i)}}function KO(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function YO(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(jn(t,e))return;n.uniform2iv(this.addr,e),Xn(t,e)}}function QO(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(jn(t,e))return;n.uniform3iv(this.addr,e),Xn(t,e)}}function qO(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(jn(t,e))return;n.uniform4iv(this.addr,e),Xn(t,e)}}function ZO(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function $O(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(jn(t,e))return;n.uniform2uiv(this.addr,e),Xn(t,e)}}function ek(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(jn(t,e))return;n.uniform3uiv(this.addr,e),Xn(t,e)}}function tk(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(jn(t,e))return;n.uniform4uiv(this.addr,e),Xn(t,e)}}function nk(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let s;this.type===n.SAMPLER_2D_SHADOW?(Zw.compareFunction=WA,s=Zw):s=NI,t.setTexture2D(e||s,r)}function ik(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||UI,r)}function rk(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||OI,r)}function sk(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||FI,r)}function ok(n){switch(n){case 5126:return HO;case 35664:return GO;case 35665:return VO;case 35666:return WO;case 35674:return jO;case 35675:return XO;case 35676:return JO;case 5124:case 35670:return KO;case 35667:case 35671:return YO;case 35668:case 35672:return QO;case 35669:case 35673:return qO;case 5125:return ZO;case 36294:return $O;case 36295:return ek;case 36296:return tk;case 35678:case 36198:case 36298:case 36306:case 35682:return nk;case 35679:case 36299:case 36307:return ik;case 35680:case 36300:case 36308:case 36293:return rk;case 36289:case 36303:case 36311:case 36292:return sk}}function ak(n,e){n.uniform1fv(this.addr,e)}function lk(n,e){const t=ou(e,this.size,2);n.uniform2fv(this.addr,t)}function ck(n,e){const t=ou(e,this.size,3);n.uniform3fv(this.addr,t)}function uk(n,e){const t=ou(e,this.size,4);n.uniform4fv(this.addr,t)}function dk(n,e){const t=ou(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function hk(n,e){const t=ou(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function fk(n,e){const t=ou(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function pk(n,e){n.uniform1iv(this.addr,e)}function mk(n,e){n.uniform2iv(this.addr,e)}function gk(n,e){n.uniform3iv(this.addr,e)}function vk(n,e){n.uniform4iv(this.addr,e)}function yk(n,e){n.uniform1uiv(this.addr,e)}function xk(n,e){n.uniform2uiv(this.addr,e)}function _k(n,e){n.uniform3uiv(this.addr,e)}function Ak(n,e){n.uniform4uiv(this.addr,e)}function Sk(n,e,t){const i=this.cache,r=e.length,s=qg(t,r);jn(i,s)||(n.uniform1iv(this.addr,s),Xn(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||NI,s[o])}function Mk(n,e,t){const i=this.cache,r=e.length,s=qg(t,r);jn(i,s)||(n.uniform1iv(this.addr,s),Xn(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||UI,s[o])}function wk(n,e,t){const i=this.cache,r=e.length,s=qg(t,r);jn(i,s)||(n.uniform1iv(this.addr,s),Xn(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||OI,s[o])}function Ek(n,e,t){const i=this.cache,r=e.length,s=qg(t,r);jn(i,s)||(n.uniform1iv(this.addr,s),Xn(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||FI,s[o])}function bk(n){switch(n){case 5126:return ak;case 35664:return lk;case 35665:return ck;case 35666:return uk;case 35674:return dk;case 35675:return hk;case 35676:return fk;case 5124:case 35670:return pk;case 35667:case 35671:return mk;case 35668:case 35672:return gk;case 35669:case 35673:return vk;case 5125:return yk;case 36294:return xk;case 36295:return _k;case 36296:return Ak;case 35678:case 36198:case 36298:case 36306:case 35682:return Sk;case 35679:case 36299:case 36307:return Mk;case 35680:case 36300:case 36308:case 36293:return wk;case 36289:case 36303:case 36311:case 36292:return Ek}}class Ck{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=ok(t.type)}}class Tk{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=bk(t.type)}}class Rk{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const Ty=/(\w+)(\])?(\[|\.)?/g;function rE(n,e){n.seq.push(e),n.map[e.id]=e}function Ik(n,e,t){const i=n.name,r=i.length;for(Ty.lastIndex=0;;){const s=Ty.exec(i),o=Ty.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===r){rE(t,c===void 0?new Ck(a,n,e):new Tk(a,n,e));break}else{let f=t.map[a];f===void 0&&(f=new Rk(a),rE(t,f)),t=f}}}class am{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);Ik(s,o,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function sE(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const Pk=37297;let Bk=0;function Lk(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}const oE=new St;function Dk(n){Ft._getMatrix(oE,Ft.workingColorSpace,n);const e=`mat3( ${oE.elements.map(t=>t.toFixed(4))} )`;switch(Ft.getTransfer(n)){case vh:return[e,"LinearTransferOETF"];case Qt:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function aE(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+Lk(n.getShaderSource(e),o)}else return r}function Nk(n,e){const t=Dk(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function Fk(n,e){let t;switch(e){case sI:t="Linear";break;case oI:t="Reinhard";break;case aI:t="Cineon";break;case BA:t="ACESFilmic";break;case cI:t="AgX";break;case uI:t="Neutral";break;case lI:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const hp=new N;function Uk(){Ft.getLuminanceCoefficients(hp);const n=hp.x.toFixed(4),e=hp.y.toFixed(4),t=hp.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function Ok(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(fd).join(`
`)}function kk(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function zk(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function fd(n){return n!==""}function lE(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function cE(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Hk=/^[ \t]*#include +<([\w\d./]+)>/gm;function S_(n){return n.replace(Hk,Vk)}const Gk=new Map;function Vk(n,e){let t=bt[e];if(t===void 0){const i=Gk.get(e);if(i!==void 0)t=bt[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return S_(t)}const Wk=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function uE(n){return n.replace(Wk,jk)}function jk(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function dE(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Xk(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===Hg?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Md?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Hr&&(e="SHADOWMAP_TYPE_VSM"),e}function Jk(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case io:case ta:e="ENVMAP_TYPE_CUBE";break;case su:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Kk(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case ta:e="ENVMAP_MODE_REFRACTION";break}return e}function Yk(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case fh:e="ENVMAP_BLENDING_MULTIPLY";break;case iI:e="ENVMAP_BLENDING_MIX";break;case rI:e="ENVMAP_BLENDING_ADD";break}return e}function Qk(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function qk(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=Xk(t),c=Jk(t),h=Kk(t),f=Yk(t),p=Qk(t),m=Ok(t),y=kk(s),A=r.createProgram();let x,g,_=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(x=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,y].filter(fd).join(`
`),x.length>0&&(x+=`
`),g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,y].filter(fd).join(`
`),g.length>0&&(g+=`
`)):(x=[dE(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,y,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(fd).join(`
`),g=[dE(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,y,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+h:"",t.envMap?"#define "+f:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==ms?"#define TONE_MAPPING":"",t.toneMapping!==ms?bt.tonemapping_pars_fragment:"",t.toneMapping!==ms?Fk("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",bt.colorspace_pars_fragment,Nk("linearToOutputTexel",t.outputColorSpace),Uk(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(fd).join(`
`)),o=S_(o),o=lE(o,t),o=cE(o,t),a=S_(a),a=lE(a,t),a=cE(a,t),o=uE(o),a=uE(a),t.isRawShaderMaterial!==!0&&(_=`#version 300 es
`,x=[m,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+x,g=["#define varying in",t.glslVersion===__?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===__?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const M=_+x+o,w=_+g+a,C=sE(r,r.VERTEX_SHADER,M),R=sE(r,r.FRAGMENT_SHADER,w);r.attachShader(A,C),r.attachShader(A,R),t.index0AttributeName!==void 0?r.bindAttribLocation(A,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(A,0,"position"),r.linkProgram(A);function P(U){if(n.debug.checkShaderErrors){const H=r.getProgramInfoLog(A).trim(),X=r.getShaderInfoLog(C).trim(),ee=r.getShaderInfoLog(R).trim();let ne=!0,te=!0;if(r.getProgramParameter(A,r.LINK_STATUS)===!1)if(ne=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,A,C,R);else{const le=aE(r,C,"vertex"),D=aE(r,R,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(A,r.VALIDATE_STATUS)+`

Material Name: `+U.name+`
Material Type: `+U.type+`

Program Info Log: `+H+`
`+le+`
`+D)}else H!==""?console.warn("THREE.WebGLProgram: Program Info Log:",H):(X===""||ee==="")&&(te=!1);te&&(U.diagnostics={runnable:ne,programLog:H,vertexShader:{log:X,prefix:x},fragmentShader:{log:ee,prefix:g}})}r.deleteShader(C),r.deleteShader(R),B=new am(r,A),I=zk(r,A)}let B;this.getUniforms=function(){return B===void 0&&P(this),B};let I;this.getAttributes=function(){return I===void 0&&P(this),I};let b=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return b===!1&&(b=r.getProgramParameter(A,Pk)),b},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(A),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=Bk++,this.cacheKey=e,this.usedTimes=1,this.program=A,this.vertexShader=C,this.fragmentShader=R,this}let Zk=0;class $k{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new ez(e),t.set(e,i)),i}}class ez{constructor(e){this.id=Zk++,this.code=e,this.usedTimes=0}}function tz(n,e,t,i,r,s,o){const a=new ll,l=new $k,c=new Set,h=[],f=r.logarithmicDepthBuffer,p=r.vertexTextures;let m=r.precision;const y={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function A(I){return c.add(I),I===0?"uv":`uv${I}`}function x(I,b,U,H,X){const ee=H.fog,ne=X.geometry,te=I.isMeshStandardMaterial?H.environment:null,le=(I.isMeshStandardMaterial?t:e).get(I.envMap||te),D=le&&le.mapping===su?le.image.height:null,W=y[I.type];I.precision!==null&&(m=r.getMaxPrecision(I.precision),m!==I.precision&&console.warn("THREE.WebGLProgram.getParameters:",I.precision,"not supported, using",m,"instead."));const j=ne.morphAttributes.position||ne.morphAttributes.normal||ne.morphAttributes.color,Z=j!==void 0?j.length:0;let me=0;ne.morphAttributes.position!==void 0&&(me=1),ne.morphAttributes.normal!==void 0&&(me=2),ne.morphAttributes.color!==void 0&&(me=3);let Be,re,xe,Ee;if(W){const Lt=Wr[W];Be=Lt.vertexShader,re=Lt.fragmentShader}else Be=I.vertexShader,re=I.fragmentShader,l.update(I),xe=l.getVertexShaderID(I),Ee=l.getFragmentShaderID(I);const _e=n.getRenderTarget(),qe=n.state.buffers.depth.getReversed(),rt=X.isInstancedMesh===!0,at=X.isBatchedMesh===!0,lt=!!I.map,ye=!!I.matcap,Ae=!!le,V=!!I.aoMap,We=!!I.lightMap,Me=!!I.bumpMap,De=!!I.normalMap,Te=!!I.displacementMap,it=!!I.emissiveMap,Oe=!!I.metalnessMap,k=!!I.roughnessMap,F=I.anisotropy>0,ie=I.clearcoat>0,fe=I.dispersion>0,Se=I.iridescence>0,ge=I.sheen>0,Ze=I.transmission>0,Le=F&&!!I.anisotropyMap,je=ie&&!!I.clearcoatMap,Ct=ie&&!!I.clearcoatNormalMap,we=ie&&!!I.clearcoatRoughnessMap,Ke=Se&&!!I.iridescenceMap,ut=Se&&!!I.iridescenceThicknessMap,mt=ge&&!!I.sheenColorMap,Je=ge&&!!I.sheenRoughnessMap,K=!!I.specularMap,pe=!!I.specularColorMap,Ue=!!I.specularIntensityMap,J=Ze&&!!I.transmissionMap,be=Ze&&!!I.thicknessMap,ce=!!I.gradientMap,ve=!!I.alphaMap,Ge=I.alphaTest>0,Fe=!!I.alphaHash,ct=!!I.extensions;let Vt=ms;I.toneMapped&&(_e===null||_e.isXRRenderTarget===!0)&&(Vt=n.toneMapping);const on={shaderID:W,shaderType:I.type,shaderName:I.name,vertexShader:Be,fragmentShader:re,defines:I.defines,customVertexShaderID:xe,customFragmentShaderID:Ee,isRawShaderMaterial:I.isRawShaderMaterial===!0,glslVersion:I.glslVersion,precision:m,batching:at,batchingColor:at&&X._colorsTexture!==null,instancing:rt,instancingColor:rt&&X.instanceColor!==null,instancingMorph:rt&&X.morphTexture!==null,supportsVertexTextures:p,outputColorSpace:_e===null?n.outputColorSpace:_e.isXRRenderTarget===!0?_e.texture.colorSpace:bi,alphaToCoverage:!!I.alphaToCoverage,map:lt,matcap:ye,envMap:Ae,envMapMode:Ae&&le.mapping,envMapCubeUVHeight:D,aoMap:V,lightMap:We,bumpMap:Me,normalMap:De,displacementMap:p&&Te,emissiveMap:it,normalMapObjectSpace:De&&I.normalMapType===vI,normalMapTangentSpace:De&&I.normalMapType===la,metalnessMap:Oe,roughnessMap:k,anisotropy:F,anisotropyMap:Le,clearcoat:ie,clearcoatMap:je,clearcoatNormalMap:Ct,clearcoatRoughnessMap:we,dispersion:fe,iridescence:Se,iridescenceMap:Ke,iridescenceThicknessMap:ut,sheen:ge,sheenColorMap:mt,sheenRoughnessMap:Je,specularMap:K,specularColorMap:pe,specularIntensityMap:Ue,transmission:Ze,transmissionMap:J,thicknessMap:be,gradientMap:ce,opaque:I.transparent===!1&&I.blending===rl&&I.alphaToCoverage===!1,alphaMap:ve,alphaTest:Ge,alphaHash:Fe,combine:I.combine,mapUv:lt&&A(I.map.channel),aoMapUv:V&&A(I.aoMap.channel),lightMapUv:We&&A(I.lightMap.channel),bumpMapUv:Me&&A(I.bumpMap.channel),normalMapUv:De&&A(I.normalMap.channel),displacementMapUv:Te&&A(I.displacementMap.channel),emissiveMapUv:it&&A(I.emissiveMap.channel),metalnessMapUv:Oe&&A(I.metalnessMap.channel),roughnessMapUv:k&&A(I.roughnessMap.channel),anisotropyMapUv:Le&&A(I.anisotropyMap.channel),clearcoatMapUv:je&&A(I.clearcoatMap.channel),clearcoatNormalMapUv:Ct&&A(I.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:we&&A(I.clearcoatRoughnessMap.channel),iridescenceMapUv:Ke&&A(I.iridescenceMap.channel),iridescenceThicknessMapUv:ut&&A(I.iridescenceThicknessMap.channel),sheenColorMapUv:mt&&A(I.sheenColorMap.channel),sheenRoughnessMapUv:Je&&A(I.sheenRoughnessMap.channel),specularMapUv:K&&A(I.specularMap.channel),specularColorMapUv:pe&&A(I.specularColorMap.channel),specularIntensityMapUv:Ue&&A(I.specularIntensityMap.channel),transmissionMapUv:J&&A(I.transmissionMap.channel),thicknessMapUv:be&&A(I.thicknessMap.channel),alphaMapUv:ve&&A(I.alphaMap.channel),vertexTangents:!!ne.attributes.tangent&&(De||F),vertexColors:I.vertexColors,vertexAlphas:I.vertexColors===!0&&!!ne.attributes.color&&ne.attributes.color.itemSize===4,pointsUvs:X.isPoints===!0&&!!ne.attributes.uv&&(lt||ve),fog:!!ee,useFog:I.fog===!0,fogExp2:!!ee&&ee.isFogExp2,flatShading:I.flatShading===!0,sizeAttenuation:I.sizeAttenuation===!0,logarithmicDepthBuffer:f,reverseDepthBuffer:qe,skinning:X.isSkinnedMesh===!0,morphTargets:ne.morphAttributes.position!==void 0,morphNormals:ne.morphAttributes.normal!==void 0,morphColors:ne.morphAttributes.color!==void 0,morphTargetsCount:Z,morphTextureStride:me,numDirLights:b.directional.length,numPointLights:b.point.length,numSpotLights:b.spot.length,numSpotLightMaps:b.spotLightMap.length,numRectAreaLights:b.rectArea.length,numHemiLights:b.hemi.length,numDirLightShadows:b.directionalShadowMap.length,numPointLightShadows:b.pointShadowMap.length,numSpotLightShadows:b.spotShadowMap.length,numSpotLightShadowsWithMaps:b.numSpotLightShadowsWithMaps,numLightProbes:b.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:I.dithering,shadowMapEnabled:n.shadowMap.enabled&&U.length>0,shadowMapType:n.shadowMap.type,toneMapping:Vt,decodeVideoTexture:lt&&I.map.isVideoTexture===!0&&Ft.getTransfer(I.map.colorSpace)===Qt,decodeVideoTextureEmissive:it&&I.emissiveMap.isVideoTexture===!0&&Ft.getTransfer(I.emissiveMap.colorSpace)===Qt,premultipliedAlpha:I.premultipliedAlpha,doubleSided:I.side===Cr,flipSided:I.side===ri,useDepthPacking:I.depthPacking>=0,depthPacking:I.depthPacking||0,index0AttributeName:I.index0AttributeName,extensionClipCullDistance:ct&&I.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(ct&&I.extensions.multiDraw===!0||at)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:I.customProgramCacheKey()};return on.vertexUv1s=c.has(1),on.vertexUv2s=c.has(2),on.vertexUv3s=c.has(3),c.clear(),on}function g(I){const b=[];if(I.shaderID?b.push(I.shaderID):(b.push(I.customVertexShaderID),b.push(I.customFragmentShaderID)),I.defines!==void 0)for(const U in I.defines)b.push(U),b.push(I.defines[U]);return I.isRawShaderMaterial===!1&&(_(b,I),M(b,I),b.push(n.outputColorSpace)),b.push(I.customProgramCacheKey),b.join()}function _(I,b){I.push(b.precision),I.push(b.outputColorSpace),I.push(b.envMapMode),I.push(b.envMapCubeUVHeight),I.push(b.mapUv),I.push(b.alphaMapUv),I.push(b.lightMapUv),I.push(b.aoMapUv),I.push(b.bumpMapUv),I.push(b.normalMapUv),I.push(b.displacementMapUv),I.push(b.emissiveMapUv),I.push(b.metalnessMapUv),I.push(b.roughnessMapUv),I.push(b.anisotropyMapUv),I.push(b.clearcoatMapUv),I.push(b.clearcoatNormalMapUv),I.push(b.clearcoatRoughnessMapUv),I.push(b.iridescenceMapUv),I.push(b.iridescenceThicknessMapUv),I.push(b.sheenColorMapUv),I.push(b.sheenRoughnessMapUv),I.push(b.specularMapUv),I.push(b.specularColorMapUv),I.push(b.specularIntensityMapUv),I.push(b.transmissionMapUv),I.push(b.thicknessMapUv),I.push(b.combine),I.push(b.fogExp2),I.push(b.sizeAttenuation),I.push(b.morphTargetsCount),I.push(b.morphAttributeCount),I.push(b.numDirLights),I.push(b.numPointLights),I.push(b.numSpotLights),I.push(b.numSpotLightMaps),I.push(b.numHemiLights),I.push(b.numRectAreaLights),I.push(b.numDirLightShadows),I.push(b.numPointLightShadows),I.push(b.numSpotLightShadows),I.push(b.numSpotLightShadowsWithMaps),I.push(b.numLightProbes),I.push(b.shadowMapType),I.push(b.toneMapping),I.push(b.numClippingPlanes),I.push(b.numClipIntersection),I.push(b.depthPacking)}function M(I,b){a.disableAll(),b.supportsVertexTextures&&a.enable(0),b.instancing&&a.enable(1),b.instancingColor&&a.enable(2),b.instancingMorph&&a.enable(3),b.matcap&&a.enable(4),b.envMap&&a.enable(5),b.normalMapObjectSpace&&a.enable(6),b.normalMapTangentSpace&&a.enable(7),b.clearcoat&&a.enable(8),b.iridescence&&a.enable(9),b.alphaTest&&a.enable(10),b.vertexColors&&a.enable(11),b.vertexAlphas&&a.enable(12),b.vertexUv1s&&a.enable(13),b.vertexUv2s&&a.enable(14),b.vertexUv3s&&a.enable(15),b.vertexTangents&&a.enable(16),b.anisotropy&&a.enable(17),b.alphaHash&&a.enable(18),b.batching&&a.enable(19),b.dispersion&&a.enable(20),b.batchingColor&&a.enable(21),I.push(a.mask),a.disableAll(),b.fog&&a.enable(0),b.useFog&&a.enable(1),b.flatShading&&a.enable(2),b.logarithmicDepthBuffer&&a.enable(3),b.reverseDepthBuffer&&a.enable(4),b.skinning&&a.enable(5),b.morphTargets&&a.enable(6),b.morphNormals&&a.enable(7),b.morphColors&&a.enable(8),b.premultipliedAlpha&&a.enable(9),b.shadowMapEnabled&&a.enable(10),b.doubleSided&&a.enable(11),b.flipSided&&a.enable(12),b.useDepthPacking&&a.enable(13),b.dithering&&a.enable(14),b.transmission&&a.enable(15),b.sheen&&a.enable(16),b.opaque&&a.enable(17),b.pointsUvs&&a.enable(18),b.decodeVideoTexture&&a.enable(19),b.decodeVideoTextureEmissive&&a.enable(20),b.alphaToCoverage&&a.enable(21),I.push(a.mask)}function w(I){const b=y[I.type];let U;if(b){const H=Wr[b];U=PI.clone(H.uniforms)}else U=I.uniforms;return U}function C(I,b){let U;for(let H=0,X=h.length;H<X;H++){const ee=h[H];if(ee.cacheKey===b){U=ee,++U.usedTimes;break}}return U===void 0&&(U=new qk(n,b,I,s),h.push(U)),U}function R(I){if(--I.usedTimes===0){const b=h.indexOf(I);h[b]=h[h.length-1],h.pop(),I.destroy()}}function P(I){l.remove(I)}function B(){l.dispose()}return{getParameters:x,getProgramCacheKey:g,getUniforms:w,acquireProgram:C,releaseProgram:R,releaseShaderCache:P,programs:h,dispose:B}}function nz(){let n=new WeakMap;function e(o){return n.has(o)}function t(o){let a=n.get(o);return a===void 0&&(a={},n.set(o,a)),a}function i(o){n.delete(o)}function r(o,a,l){n.get(o)[a]=l}function s(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:s}}function iz(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function hE(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function fE(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(f,p,m,y,A,x){let g=n[e];return g===void 0?(g={id:f.id,object:f,geometry:p,material:m,groupOrder:y,renderOrder:f.renderOrder,z:A,group:x},n[e]=g):(g.id=f.id,g.object=f,g.geometry=p,g.material=m,g.groupOrder=y,g.renderOrder=f.renderOrder,g.z=A,g.group=x),e++,g}function a(f,p,m,y,A,x){const g=o(f,p,m,y,A,x);m.transmission>0?i.push(g):m.transparent===!0?r.push(g):t.push(g)}function l(f,p,m,y,A,x){const g=o(f,p,m,y,A,x);m.transmission>0?i.unshift(g):m.transparent===!0?r.unshift(g):t.unshift(g)}function c(f,p){t.length>1&&t.sort(f||iz),i.length>1&&i.sort(p||hE),r.length>1&&r.sort(p||hE)}function h(){for(let f=e,p=n.length;f<p;f++){const m=n[f];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:h,sort:c}}function rz(){let n=new WeakMap;function e(i,r){const s=n.get(i);let o;return s===void 0?(o=new fE,n.set(i,[o])):r>=s.length?(o=new fE,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function sz(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new N,color:new Ie};break;case"SpotLight":t={position:new N,direction:new N,color:new Ie,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new N,color:new Ie,distance:0,decay:0};break;case"HemisphereLight":t={direction:new N,skyColor:new Ie,groundColor:new Ie};break;case"RectAreaLight":t={color:new Ie,position:new N,halfWidth:new N,halfHeight:new N};break}return n[e.id]=t,t}}}function oz(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ue};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ue};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ue,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let az=0;function lz(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function cz(n){const e=new sz,t=oz(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)i.probe.push(new N);const r=new N,s=new Xe,o=new Xe;function a(c){let h=0,f=0,p=0;for(let I=0;I<9;I++)i.probe[I].set(0,0,0);let m=0,y=0,A=0,x=0,g=0,_=0,M=0,w=0,C=0,R=0,P=0;c.sort(lz);for(let I=0,b=c.length;I<b;I++){const U=c[I],H=U.color,X=U.intensity,ee=U.distance,ne=U.shadow&&U.shadow.map?U.shadow.map.texture:null;if(U.isAmbientLight)h+=H.r*X,f+=H.g*X,p+=H.b*X;else if(U.isLightProbe){for(let te=0;te<9;te++)i.probe[te].addScaledVector(U.sh.coefficients[te],X);P++}else if(U.isDirectionalLight){const te=e.get(U);if(te.color.copy(U.color).multiplyScalar(U.intensity),U.castShadow){const le=U.shadow,D=t.get(U);D.shadowIntensity=le.intensity,D.shadowBias=le.bias,D.shadowNormalBias=le.normalBias,D.shadowRadius=le.radius,D.shadowMapSize=le.mapSize,i.directionalShadow[m]=D,i.directionalShadowMap[m]=ne,i.directionalShadowMatrix[m]=U.shadow.matrix,_++}i.directional[m]=te,m++}else if(U.isSpotLight){const te=e.get(U);te.position.setFromMatrixPosition(U.matrixWorld),te.color.copy(H).multiplyScalar(X),te.distance=ee,te.coneCos=Math.cos(U.angle),te.penumbraCos=Math.cos(U.angle*(1-U.penumbra)),te.decay=U.decay,i.spot[A]=te;const le=U.shadow;if(U.map&&(i.spotLightMap[C]=U.map,C++,le.updateMatrices(U),U.castShadow&&R++),i.spotLightMatrix[A]=le.matrix,U.castShadow){const D=t.get(U);D.shadowIntensity=le.intensity,D.shadowBias=le.bias,D.shadowNormalBias=le.normalBias,D.shadowRadius=le.radius,D.shadowMapSize=le.mapSize,i.spotShadow[A]=D,i.spotShadowMap[A]=ne,w++}A++}else if(U.isRectAreaLight){const te=e.get(U);te.color.copy(H).multiplyScalar(X),te.halfWidth.set(U.width*.5,0,0),te.halfHeight.set(0,U.height*.5,0),i.rectArea[x]=te,x++}else if(U.isPointLight){const te=e.get(U);if(te.color.copy(U.color).multiplyScalar(U.intensity),te.distance=U.distance,te.decay=U.decay,U.castShadow){const le=U.shadow,D=t.get(U);D.shadowIntensity=le.intensity,D.shadowBias=le.bias,D.shadowNormalBias=le.normalBias,D.shadowRadius=le.radius,D.shadowMapSize=le.mapSize,D.shadowCameraNear=le.camera.near,D.shadowCameraFar=le.camera.far,i.pointShadow[y]=D,i.pointShadowMap[y]=ne,i.pointShadowMatrix[y]=U.shadow.matrix,M++}i.point[y]=te,y++}else if(U.isHemisphereLight){const te=e.get(U);te.skyColor.copy(U.color).multiplyScalar(X),te.groundColor.copy(U.groundColor).multiplyScalar(X),i.hemi[g]=te,g++}}x>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Ne.LTC_FLOAT_1,i.rectAreaLTC2=Ne.LTC_FLOAT_2):(i.rectAreaLTC1=Ne.LTC_HALF_1,i.rectAreaLTC2=Ne.LTC_HALF_2)),i.ambient[0]=h,i.ambient[1]=f,i.ambient[2]=p;const B=i.hash;(B.directionalLength!==m||B.pointLength!==y||B.spotLength!==A||B.rectAreaLength!==x||B.hemiLength!==g||B.numDirectionalShadows!==_||B.numPointShadows!==M||B.numSpotShadows!==w||B.numSpotMaps!==C||B.numLightProbes!==P)&&(i.directional.length=m,i.spot.length=A,i.rectArea.length=x,i.point.length=y,i.hemi.length=g,i.directionalShadow.length=_,i.directionalShadowMap.length=_,i.pointShadow.length=M,i.pointShadowMap.length=M,i.spotShadow.length=w,i.spotShadowMap.length=w,i.directionalShadowMatrix.length=_,i.pointShadowMatrix.length=M,i.spotLightMatrix.length=w+C-R,i.spotLightMap.length=C,i.numSpotLightShadowsWithMaps=R,i.numLightProbes=P,B.directionalLength=m,B.pointLength=y,B.spotLength=A,B.rectAreaLength=x,B.hemiLength=g,B.numDirectionalShadows=_,B.numPointShadows=M,B.numSpotShadows=w,B.numSpotMaps=C,B.numLightProbes=P,i.version=az++)}function l(c,h){let f=0,p=0,m=0,y=0,A=0;const x=h.matrixWorldInverse;for(let g=0,_=c.length;g<_;g++){const M=c[g];if(M.isDirectionalLight){const w=i.directional[f];w.direction.setFromMatrixPosition(M.matrixWorld),r.setFromMatrixPosition(M.target.matrixWorld),w.direction.sub(r),w.direction.transformDirection(x),f++}else if(M.isSpotLight){const w=i.spot[m];w.position.setFromMatrixPosition(M.matrixWorld),w.position.applyMatrix4(x),w.direction.setFromMatrixPosition(M.matrixWorld),r.setFromMatrixPosition(M.target.matrixWorld),w.direction.sub(r),w.direction.transformDirection(x),m++}else if(M.isRectAreaLight){const w=i.rectArea[y];w.position.setFromMatrixPosition(M.matrixWorld),w.position.applyMatrix4(x),o.identity(),s.copy(M.matrixWorld),s.premultiply(x),o.extractRotation(s),w.halfWidth.set(M.width*.5,0,0),w.halfHeight.set(0,M.height*.5,0),w.halfWidth.applyMatrix4(o),w.halfHeight.applyMatrix4(o),y++}else if(M.isPointLight){const w=i.point[p];w.position.setFromMatrixPosition(M.matrixWorld),w.position.applyMatrix4(x),p++}else if(M.isHemisphereLight){const w=i.hemi[A];w.direction.setFromMatrixPosition(M.matrixWorld),w.direction.transformDirection(x),A++}}}return{setup:a,setupView:l,state:i}}function pE(n){const e=new cz(n),t=[],i=[];function r(h){c.camera=h,t.length=0,i.length=0}function s(h){t.push(h)}function o(h){i.push(h)}function a(){e.setup(t)}function l(h){e.setupView(t,h)}const c={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:c,setupLights:a,setupLightsView:l,pushLight:s,pushShadow:o}}function uz(n){let e=new WeakMap;function t(r,s=0){const o=e.get(r);let a;return o===void 0?(a=new pE(n),e.set(r,[a])):s>=o.length?(a=new pE(n),o.push(a)):a=o[s],a}function i(){e=new WeakMap}return{get:t,dispose:i}}class qA extends pn{static get type(){return"MeshDepthMaterial"}constructor(e){super(),this.isMeshDepthMaterial=!0,this.depthPacking=mI,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class ZA extends pn{static get type(){return"MeshDistanceMaterial"}constructor(e){super(),this.isMeshDistanceMaterial=!0,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const dz=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,hz=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function fz(n,e,t){let i=new _h;const r=new ue,s=new ue,o=new Gt,a=new qA({depthPacking:gI}),l=new ZA,c={},h=t.maxTextureSize,f={[Kr]:ri,[ri]:Kr,[Cr]:Cr},p=new wi({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ue},radius:{value:4}},vertexShader:dz,fragmentShader:hz}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const y=new gt;y.setAttribute("position",new yt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const A=new Yt(y,p),x=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Hg;let g=this.type;this.render=function(R,P,B){if(x.enabled===!1||x.autoUpdate===!1&&x.needsUpdate===!1||R.length===0)return;const I=n.getRenderTarget(),b=n.getActiveCubeFace(),U=n.getActiveMipmapLevel(),H=n.state;H.setBlending(Ys),H.buffers.color.setClear(1,1,1,1),H.buffers.depth.setTest(!0),H.setScissorTest(!1);const X=g!==Hr&&this.type===Hr,ee=g===Hr&&this.type!==Hr;for(let ne=0,te=R.length;ne<te;ne++){const le=R[ne],D=le.shadow;if(D===void 0){console.warn("THREE.WebGLShadowMap:",le,"has no shadow.");continue}if(D.autoUpdate===!1&&D.needsUpdate===!1)continue;r.copy(D.mapSize);const W=D.getFrameExtents();if(r.multiply(W),s.copy(D.mapSize),(r.x>h||r.y>h)&&(r.x>h&&(s.x=Math.floor(h/W.x),r.x=s.x*W.x,D.mapSize.x=s.x),r.y>h&&(s.y=Math.floor(h/W.y),r.y=s.y*W.y,D.mapSize.y=s.y)),D.map===null||X===!0||ee===!0){const Z=this.type!==Hr?{minFilter:zn,magFilter:zn}:{};D.map!==null&&D.map.dispose(),D.map=new ai(r.x,r.y,Z),D.map.texture.name=le.name+".shadowMap",D.camera.updateProjectionMatrix()}n.setRenderTarget(D.map),n.clear();const j=D.getViewportCount();for(let Z=0;Z<j;Z++){const me=D.getViewport(Z);o.set(s.x*me.x,s.y*me.y,s.x*me.z,s.y*me.w),H.viewport(o),D.updateMatrices(le,Z),i=D.getFrustum(),w(P,B,D.camera,le,this.type)}D.isPointLightShadow!==!0&&this.type===Hr&&_(D,B),D.needsUpdate=!1}g=this.type,x.needsUpdate=!1,n.setRenderTarget(I,b,U)};function _(R,P){const B=e.update(A);p.defines.VSM_SAMPLES!==R.blurSamples&&(p.defines.VSM_SAMPLES=R.blurSamples,m.defines.VSM_SAMPLES=R.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),R.mapPass===null&&(R.mapPass=new ai(r.x,r.y)),p.uniforms.shadow_pass.value=R.map.texture,p.uniforms.resolution.value=R.mapSize,p.uniforms.radius.value=R.radius,n.setRenderTarget(R.mapPass),n.clear(),n.renderBufferDirect(P,null,B,p,A,null),m.uniforms.shadow_pass.value=R.mapPass.texture,m.uniforms.resolution.value=R.mapSize,m.uniforms.radius.value=R.radius,n.setRenderTarget(R.map),n.clear(),n.renderBufferDirect(P,null,B,m,A,null)}function M(R,P,B,I){let b=null;const U=B.isPointLight===!0?R.customDistanceMaterial:R.customDepthMaterial;if(U!==void 0)b=U;else if(b=B.isPointLight===!0?l:a,n.localClippingEnabled&&P.clipShadows===!0&&Array.isArray(P.clippingPlanes)&&P.clippingPlanes.length!==0||P.displacementMap&&P.displacementScale!==0||P.alphaMap&&P.alphaTest>0||P.map&&P.alphaTest>0){const H=b.uuid,X=P.uuid;let ee=c[H];ee===void 0&&(ee={},c[H]=ee);let ne=ee[X];ne===void 0&&(ne=b.clone(),ee[X]=ne,P.addEventListener("dispose",C)),b=ne}if(b.visible=P.visible,b.wireframe=P.wireframe,I===Hr?b.side=P.shadowSide!==null?P.shadowSide:P.side:b.side=P.shadowSide!==null?P.shadowSide:f[P.side],b.alphaMap=P.alphaMap,b.alphaTest=P.alphaTest,b.map=P.map,b.clipShadows=P.clipShadows,b.clippingPlanes=P.clippingPlanes,b.clipIntersection=P.clipIntersection,b.displacementMap=P.displacementMap,b.displacementScale=P.displacementScale,b.displacementBias=P.displacementBias,b.wireframeLinewidth=P.wireframeLinewidth,b.linewidth=P.linewidth,B.isPointLight===!0&&b.isMeshDistanceMaterial===!0){const H=n.properties.get(b);H.light=B}return b}function w(R,P,B,I,b){if(R.visible===!1)return;if(R.layers.test(P.layers)&&(R.isMesh||R.isLine||R.isPoints)&&(R.castShadow||R.receiveShadow&&b===Hr)&&(!R.frustumCulled||i.intersectsObject(R))){R.modelViewMatrix.multiplyMatrices(B.matrixWorldInverse,R.matrixWorld);const X=e.update(R),ee=R.material;if(Array.isArray(ee)){const ne=X.groups;for(let te=0,le=ne.length;te<le;te++){const D=ne[te],W=ee[D.materialIndex];if(W&&W.visible){const j=M(R,W,I,b);R.onBeforeShadow(n,R,P,B,X,j,D),n.renderBufferDirect(B,null,X,j,R,D),R.onAfterShadow(n,R,P,B,X,j,D)}}}else if(ee.visible){const ne=M(R,ee,I,b);R.onBeforeShadow(n,R,P,B,X,ne,null),n.renderBufferDirect(B,null,X,ne,R,null),R.onAfterShadow(n,R,P,B,X,ne,null)}}const H=R.children;for(let X=0,ee=H.length;X<ee;X++)w(H[X],P,B,I,b)}function C(R){R.target.removeEventListener("dispose",C);for(const B in c){const I=c[B],b=R.target.uuid;b in I&&(I[b].dispose(),delete I[b])}}}const pz={[Um]:Om,[km]:Gm,[zm]:Vm,[pl]:Hm,[Om]:Um,[Gm]:km,[Vm]:zm,[Hm]:pl};function mz(n,e){function t(){let J=!1;const be=new Gt;let ce=null;const ve=new Gt(0,0,0,0);return{setMask:function(Ge){ce!==Ge&&!J&&(n.colorMask(Ge,Ge,Ge,Ge),ce=Ge)},setLocked:function(Ge){J=Ge},setClear:function(Ge,Fe,ct,Vt,on){on===!0&&(Ge*=Vt,Fe*=Vt,ct*=Vt),be.set(Ge,Fe,ct,Vt),ve.equals(be)===!1&&(n.clearColor(Ge,Fe,ct,Vt),ve.copy(be))},reset:function(){J=!1,ce=null,ve.set(-1,0,0,0)}}}function i(){let J=!1,be=!1,ce=null,ve=null,Ge=null;return{setReversed:function(Fe){if(be!==Fe){const ct=e.get("EXT_clip_control");be?ct.clipControlEXT(ct.LOWER_LEFT_EXT,ct.ZERO_TO_ONE_EXT):ct.clipControlEXT(ct.LOWER_LEFT_EXT,ct.NEGATIVE_ONE_TO_ONE_EXT);const Vt=Ge;Ge=null,this.setClear(Vt)}be=Fe},getReversed:function(){return be},setTest:function(Fe){Fe?_e(n.DEPTH_TEST):qe(n.DEPTH_TEST)},setMask:function(Fe){ce!==Fe&&!J&&(n.depthMask(Fe),ce=Fe)},setFunc:function(Fe){if(be&&(Fe=pz[Fe]),ve!==Fe){switch(Fe){case Um:n.depthFunc(n.NEVER);break;case Om:n.depthFunc(n.ALWAYS);break;case km:n.depthFunc(n.LESS);break;case pl:n.depthFunc(n.LEQUAL);break;case zm:n.depthFunc(n.EQUAL);break;case Hm:n.depthFunc(n.GEQUAL);break;case Gm:n.depthFunc(n.GREATER);break;case Vm:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}ve=Fe}},setLocked:function(Fe){J=Fe},setClear:function(Fe){Ge!==Fe&&(be&&(Fe=1-Fe),n.clearDepth(Fe),Ge=Fe)},reset:function(){J=!1,ce=null,ve=null,Ge=null,be=!1}}}function r(){let J=!1,be=null,ce=null,ve=null,Ge=null,Fe=null,ct=null,Vt=null,on=null;return{setTest:function(Lt){J||(Lt?_e(n.STENCIL_TEST):qe(n.STENCIL_TEST))},setMask:function(Lt){be!==Lt&&!J&&(n.stencilMask(Lt),be=Lt)},setFunc:function(Lt,Ln,ui){(ce!==Lt||ve!==Ln||Ge!==ui)&&(n.stencilFunc(Lt,Ln,ui),ce=Lt,ve=Ln,Ge=ui)},setOp:function(Lt,Ln,ui){(Fe!==Lt||ct!==Ln||Vt!==ui)&&(n.stencilOp(Lt,Ln,ui),Fe=Lt,ct=Ln,Vt=ui)},setLocked:function(Lt){J=Lt},setClear:function(Lt){on!==Lt&&(n.clearStencil(Lt),on=Lt)},reset:function(){J=!1,be=null,ce=null,ve=null,Ge=null,Fe=null,ct=null,Vt=null,on=null}}}const s=new t,o=new i,a=new r,l=new WeakMap,c=new WeakMap;let h={},f={},p=new WeakMap,m=[],y=null,A=!1,x=null,g=null,_=null,M=null,w=null,C=null,R=null,P=new Ie(0,0,0),B=0,I=!1,b=null,U=null,H=null,X=null,ee=null;const ne=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let te=!1,le=0;const D=n.getParameter(n.VERSION);D.indexOf("WebGL")!==-1?(le=parseFloat(/^WebGL (\d)/.exec(D)[1]),te=le>=1):D.indexOf("OpenGL ES")!==-1&&(le=parseFloat(/^OpenGL ES (\d)/.exec(D)[1]),te=le>=2);let W=null,j={};const Z=n.getParameter(n.SCISSOR_BOX),me=n.getParameter(n.VIEWPORT),Be=new Gt().fromArray(Z),re=new Gt().fromArray(me);function xe(J,be,ce,ve){const Ge=new Uint8Array(4),Fe=n.createTexture();n.bindTexture(J,Fe),n.texParameteri(J,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(J,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let ct=0;ct<ce;ct++)J===n.TEXTURE_3D||J===n.TEXTURE_2D_ARRAY?n.texImage3D(be,0,n.RGBA,1,1,ve,0,n.RGBA,n.UNSIGNED_BYTE,Ge):n.texImage2D(be+ct,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Ge);return Fe}const Ee={};Ee[n.TEXTURE_2D]=xe(n.TEXTURE_2D,n.TEXTURE_2D,1),Ee[n.TEXTURE_CUBE_MAP]=xe(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),Ee[n.TEXTURE_2D_ARRAY]=xe(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Ee[n.TEXTURE_3D]=xe(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),a.setClear(0),_e(n.DEPTH_TEST),o.setFunc(pl),Me(!1),De(m_),_e(n.CULL_FACE),V(Ys);function _e(J){h[J]!==!0&&(n.enable(J),h[J]=!0)}function qe(J){h[J]!==!1&&(n.disable(J),h[J]=!1)}function rt(J,be){return f[J]!==be?(n.bindFramebuffer(J,be),f[J]=be,J===n.DRAW_FRAMEBUFFER&&(f[n.FRAMEBUFFER]=be),J===n.FRAMEBUFFER&&(f[n.DRAW_FRAMEBUFFER]=be),!0):!1}function at(J,be){let ce=m,ve=!1;if(J){ce=p.get(be),ce===void 0&&(ce=[],p.set(be,ce));const Ge=J.textures;if(ce.length!==Ge.length||ce[0]!==n.COLOR_ATTACHMENT0){for(let Fe=0,ct=Ge.length;Fe<ct;Fe++)ce[Fe]=n.COLOR_ATTACHMENT0+Fe;ce.length=Ge.length,ve=!0}}else ce[0]!==n.BACK&&(ce[0]=n.BACK,ve=!0);ve&&n.drawBuffers(ce)}function lt(J){return y!==J?(n.useProgram(J),y=J,!0):!1}const ye={[ko]:n.FUNC_ADD,[zR]:n.FUNC_SUBTRACT,[HR]:n.FUNC_REVERSE_SUBTRACT};ye[GR]=n.MIN,ye[VR]=n.MAX;const Ae={[WR]:n.ZERO,[jR]:n.ONE,[XR]:n.SRC_COLOR,[Nm]:n.SRC_ALPHA,[ZR]:n.SRC_ALPHA_SATURATE,[QR]:n.DST_COLOR,[KR]:n.DST_ALPHA,[JR]:n.ONE_MINUS_SRC_COLOR,[Fm]:n.ONE_MINUS_SRC_ALPHA,[qR]:n.ONE_MINUS_DST_COLOR,[YR]:n.ONE_MINUS_DST_ALPHA,[$R]:n.CONSTANT_COLOR,[eI]:n.ONE_MINUS_CONSTANT_COLOR,[tI]:n.CONSTANT_ALPHA,[nI]:n.ONE_MINUS_CONSTANT_ALPHA};function V(J,be,ce,ve,Ge,Fe,ct,Vt,on,Lt){if(J===Ys){A===!0&&(qe(n.BLEND),A=!1);return}if(A===!1&&(_e(n.BLEND),A=!0),J!==kR){if(J!==x||Lt!==I){if((g!==ko||w!==ko)&&(n.blendEquation(n.FUNC_ADD),g=ko,w=ko),Lt)switch(J){case rl:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Dm:n.blendFunc(n.ONE,n.ONE);break;case g_:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case v_:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",J);break}else switch(J){case rl:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Dm:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case g_:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case v_:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",J);break}_=null,M=null,C=null,R=null,P.set(0,0,0),B=0,x=J,I=Lt}return}Ge=Ge||be,Fe=Fe||ce,ct=ct||ve,(be!==g||Ge!==w)&&(n.blendEquationSeparate(ye[be],ye[Ge]),g=be,w=Ge),(ce!==_||ve!==M||Fe!==C||ct!==R)&&(n.blendFuncSeparate(Ae[ce],Ae[ve],Ae[Fe],Ae[ct]),_=ce,M=ve,C=Fe,R=ct),(Vt.equals(P)===!1||on!==B)&&(n.blendColor(Vt.r,Vt.g,Vt.b,on),P.copy(Vt),B=on),x=J,I=!1}function We(J,be){J.side===Cr?qe(n.CULL_FACE):_e(n.CULL_FACE);let ce=J.side===ri;be&&(ce=!ce),Me(ce),J.blending===rl&&J.transparent===!1?V(Ys):V(J.blending,J.blendEquation,J.blendSrc,J.blendDst,J.blendEquationAlpha,J.blendSrcAlpha,J.blendDstAlpha,J.blendColor,J.blendAlpha,J.premultipliedAlpha),o.setFunc(J.depthFunc),o.setTest(J.depthTest),o.setMask(J.depthWrite),s.setMask(J.colorWrite);const ve=J.stencilWrite;a.setTest(ve),ve&&(a.setMask(J.stencilWriteMask),a.setFunc(J.stencilFunc,J.stencilRef,J.stencilFuncMask),a.setOp(J.stencilFail,J.stencilZFail,J.stencilZPass)),it(J.polygonOffset,J.polygonOffsetFactor,J.polygonOffsetUnits),J.alphaToCoverage===!0?_e(n.SAMPLE_ALPHA_TO_COVERAGE):qe(n.SAMPLE_ALPHA_TO_COVERAGE)}function Me(J){b!==J&&(J?n.frontFace(n.CW):n.frontFace(n.CCW),b=J)}function De(J){J!==FR?(_e(n.CULL_FACE),J!==U&&(J===m_?n.cullFace(n.BACK):J===UR?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):qe(n.CULL_FACE),U=J}function Te(J){J!==H&&(te&&n.lineWidth(J),H=J)}function it(J,be,ce){J?(_e(n.POLYGON_OFFSET_FILL),(X!==be||ee!==ce)&&(n.polygonOffset(be,ce),X=be,ee=ce)):qe(n.POLYGON_OFFSET_FILL)}function Oe(J){J?_e(n.SCISSOR_TEST):qe(n.SCISSOR_TEST)}function k(J){J===void 0&&(J=n.TEXTURE0+ne-1),W!==J&&(n.activeTexture(J),W=J)}function F(J,be,ce){ce===void 0&&(W===null?ce=n.TEXTURE0+ne-1:ce=W);let ve=j[ce];ve===void 0&&(ve={type:void 0,texture:void 0},j[ce]=ve),(ve.type!==J||ve.texture!==be)&&(W!==ce&&(n.activeTexture(ce),W=ce),n.bindTexture(J,be||Ee[J]),ve.type=J,ve.texture=be)}function ie(){const J=j[W];J!==void 0&&J.type!==void 0&&(n.bindTexture(J.type,null),J.type=void 0,J.texture=void 0)}function fe(){try{n.compressedTexImage2D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Se(){try{n.compressedTexImage3D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function ge(){try{n.texSubImage2D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Ze(){try{n.texSubImage3D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Le(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function je(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Ct(){try{n.texStorage2D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function we(){try{n.texStorage3D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Ke(){try{n.texImage2D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function ut(){try{n.texImage3D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function mt(J){Be.equals(J)===!1&&(n.scissor(J.x,J.y,J.z,J.w),Be.copy(J))}function Je(J){re.equals(J)===!1&&(n.viewport(J.x,J.y,J.z,J.w),re.copy(J))}function K(J,be){let ce=c.get(be);ce===void 0&&(ce=new WeakMap,c.set(be,ce));let ve=ce.get(J);ve===void 0&&(ve=n.getUniformBlockIndex(be,J.name),ce.set(J,ve))}function pe(J,be){const ve=c.get(be).get(J);l.get(be)!==ve&&(n.uniformBlockBinding(be,ve,J.__bindingPointIndex),l.set(be,ve))}function Ue(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),o.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),h={},W=null,j={},f={},p=new WeakMap,m=[],y=null,A=!1,x=null,g=null,_=null,M=null,w=null,C=null,R=null,P=new Ie(0,0,0),B=0,I=!1,b=null,U=null,H=null,X=null,ee=null,Be.set(0,0,n.canvas.width,n.canvas.height),re.set(0,0,n.canvas.width,n.canvas.height),s.reset(),o.reset(),a.reset()}return{buffers:{color:s,depth:o,stencil:a},enable:_e,disable:qe,bindFramebuffer:rt,drawBuffers:at,useProgram:lt,setBlending:V,setMaterial:We,setFlipSided:Me,setCullFace:De,setLineWidth:Te,setPolygonOffset:it,setScissorTest:Oe,activeTexture:k,bindTexture:F,unbindTexture:ie,compressedTexImage2D:fe,compressedTexImage3D:Se,texImage2D:Ke,texImage3D:ut,updateUBOMapping:K,uniformBlockBinding:pe,texStorage2D:Ct,texStorage3D:we,texSubImage2D:ge,texSubImage3D:Ze,compressedTexSubImage2D:Le,compressedTexSubImage3D:je,scissor:mt,viewport:Je,reset:Ue}}function gz(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function vz(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function yz(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function M_(n,e,t,i){const r=xz(i);switch(t){case FA:return n*e;case OA:return n*e;case kA:return n*e*2;case Xg:return n*e/r.components*r.byteLength;case mh:return n*e/r.components*r.byteLength;case zA:return n*e*2/r.components*r.byteLength;case Jg:return n*e*2/r.components*r.byteLength;case UA:return n*e*3/r.components*r.byteLength;case Mi:return n*e*4/r.components*r.byteLength;case Kg:return n*e*4/r.components*r.byteLength;case wd:case Ed:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case bd:case Cd:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case jm:case Jm:return Math.max(n,16)*Math.max(e,8)/4;case Wm:case Xm:return Math.max(n,8)*Math.max(e,8)/2;case Km:case Ym:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Qm:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case qm:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Zm:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case $m:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case eg:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case tg:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case ng:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case ig:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case rg:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case sg:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case og:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case ag:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case lg:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case cg:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case ug:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case Td:case dg:case hg:return Math.ceil(n/4)*Math.ceil(e/4)*16;case HA:case fg:return Math.ceil(n/4)*Math.ceil(e/4)*8;case pg:case mg:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function xz(n){switch(n){case Qr:case LA:return{byteLength:1,components:1};case Yc:case DA:case aa:return{byteLength:2,components:1};case Wg:case jg:return{byteLength:2,components:4};case ro:case Vg:case Di:return{byteLength:4,components:1};case NA:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}const _z={contain:gz,cover:vz,fill:yz,getByteLength:M_};function Az(n,e,t,i,r,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new ue,h=new WeakMap;let f;const p=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(k,F){return m?new OffscreenCanvas(k,F):eh("canvas")}function A(k,F,ie){let fe=1;const Se=Oe(k);if((Se.width>ie||Se.height>ie)&&(fe=ie/Math.max(Se.width,Se.height)),fe<1)if(typeof HTMLImageElement<"u"&&k instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&k instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&k instanceof ImageBitmap||typeof VideoFrame<"u"&&k instanceof VideoFrame){const ge=Math.floor(fe*Se.width),Ze=Math.floor(fe*Se.height);f===void 0&&(f=y(ge,Ze));const Le=F?y(ge,Ze):f;return Le.width=ge,Le.height=Ze,Le.getContext("2d").drawImage(k,0,0,ge,Ze),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Se.width+"x"+Se.height+") to ("+ge+"x"+Ze+")."),Le}else return"data"in k&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Se.width+"x"+Se.height+")."),k;return k}function x(k){return k.generateMipmaps}function g(k){n.generateMipmap(k)}function _(k){return k.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:k.isWebGL3DRenderTarget?n.TEXTURE_3D:k.isWebGLArrayRenderTarget||k.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function M(k,F,ie,fe,Se=!1){if(k!==null){if(n[k]!==void 0)return n[k];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+k+"'")}let ge=F;if(F===n.RED&&(ie===n.FLOAT&&(ge=n.R32F),ie===n.HALF_FLOAT&&(ge=n.R16F),ie===n.UNSIGNED_BYTE&&(ge=n.R8)),F===n.RED_INTEGER&&(ie===n.UNSIGNED_BYTE&&(ge=n.R8UI),ie===n.UNSIGNED_SHORT&&(ge=n.R16UI),ie===n.UNSIGNED_INT&&(ge=n.R32UI),ie===n.BYTE&&(ge=n.R8I),ie===n.SHORT&&(ge=n.R16I),ie===n.INT&&(ge=n.R32I)),F===n.RG&&(ie===n.FLOAT&&(ge=n.RG32F),ie===n.HALF_FLOAT&&(ge=n.RG16F),ie===n.UNSIGNED_BYTE&&(ge=n.RG8)),F===n.RG_INTEGER&&(ie===n.UNSIGNED_BYTE&&(ge=n.RG8UI),ie===n.UNSIGNED_SHORT&&(ge=n.RG16UI),ie===n.UNSIGNED_INT&&(ge=n.RG32UI),ie===n.BYTE&&(ge=n.RG8I),ie===n.SHORT&&(ge=n.RG16I),ie===n.INT&&(ge=n.RG32I)),F===n.RGB_INTEGER&&(ie===n.UNSIGNED_BYTE&&(ge=n.RGB8UI),ie===n.UNSIGNED_SHORT&&(ge=n.RGB16UI),ie===n.UNSIGNED_INT&&(ge=n.RGB32UI),ie===n.BYTE&&(ge=n.RGB8I),ie===n.SHORT&&(ge=n.RGB16I),ie===n.INT&&(ge=n.RGB32I)),F===n.RGBA_INTEGER&&(ie===n.UNSIGNED_BYTE&&(ge=n.RGBA8UI),ie===n.UNSIGNED_SHORT&&(ge=n.RGBA16UI),ie===n.UNSIGNED_INT&&(ge=n.RGBA32UI),ie===n.BYTE&&(ge=n.RGBA8I),ie===n.SHORT&&(ge=n.RGBA16I),ie===n.INT&&(ge=n.RGBA32I)),F===n.RGB&&ie===n.UNSIGNED_INT_5_9_9_9_REV&&(ge=n.RGB9_E5),F===n.RGBA){const Ze=Se?vh:Ft.getTransfer(fe);ie===n.FLOAT&&(ge=n.RGBA32F),ie===n.HALF_FLOAT&&(ge=n.RGBA16F),ie===n.UNSIGNED_BYTE&&(ge=Ze===Qt?n.SRGB8_ALPHA8:n.RGBA8),ie===n.UNSIGNED_SHORT_4_4_4_4&&(ge=n.RGBA4),ie===n.UNSIGNED_SHORT_5_5_5_1&&(ge=n.RGB5_A1)}return(ge===n.R16F||ge===n.R32F||ge===n.RG16F||ge===n.RG32F||ge===n.RGBA16F||ge===n.RGBA32F)&&e.get("EXT_color_buffer_float"),ge}function w(k,F){let ie;return k?F===null||F===ro||F===gl?ie=n.DEPTH24_STENCIL8:F===Di?ie=n.DEPTH32F_STENCIL8:F===Yc&&(ie=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):F===null||F===ro||F===gl?ie=n.DEPTH_COMPONENT24:F===Di?ie=n.DEPTH_COMPONENT32F:F===Yc&&(ie=n.DEPTH_COMPONENT16),ie}function C(k,F){return x(k)===!0||k.isFramebufferTexture&&k.minFilter!==zn&&k.minFilter!==$t?Math.log2(Math.max(F.width,F.height))+1:k.mipmaps!==void 0&&k.mipmaps.length>0?k.mipmaps.length:k.isCompressedTexture&&Array.isArray(k.image)?F.mipmaps.length:1}function R(k){const F=k.target;F.removeEventListener("dispose",R),B(F),F.isVideoTexture&&h.delete(F)}function P(k){const F=k.target;F.removeEventListener("dispose",P),b(F)}function B(k){const F=i.get(k);if(F.__webglInit===void 0)return;const ie=k.source,fe=p.get(ie);if(fe){const Se=fe[F.__cacheKey];Se.usedTimes--,Se.usedTimes===0&&I(k),Object.keys(fe).length===0&&p.delete(ie)}i.remove(k)}function I(k){const F=i.get(k);n.deleteTexture(F.__webglTexture);const ie=k.source,fe=p.get(ie);delete fe[F.__cacheKey],o.memory.textures--}function b(k){const F=i.get(k);if(k.depthTexture&&(k.depthTexture.dispose(),i.remove(k.depthTexture)),k.isWebGLCubeRenderTarget)for(let fe=0;fe<6;fe++){if(Array.isArray(F.__webglFramebuffer[fe]))for(let Se=0;Se<F.__webglFramebuffer[fe].length;Se++)n.deleteFramebuffer(F.__webglFramebuffer[fe][Se]);else n.deleteFramebuffer(F.__webglFramebuffer[fe]);F.__webglDepthbuffer&&n.deleteRenderbuffer(F.__webglDepthbuffer[fe])}else{if(Array.isArray(F.__webglFramebuffer))for(let fe=0;fe<F.__webglFramebuffer.length;fe++)n.deleteFramebuffer(F.__webglFramebuffer[fe]);else n.deleteFramebuffer(F.__webglFramebuffer);if(F.__webglDepthbuffer&&n.deleteRenderbuffer(F.__webglDepthbuffer),F.__webglMultisampledFramebuffer&&n.deleteFramebuffer(F.__webglMultisampledFramebuffer),F.__webglColorRenderbuffer)for(let fe=0;fe<F.__webglColorRenderbuffer.length;fe++)F.__webglColorRenderbuffer[fe]&&n.deleteRenderbuffer(F.__webglColorRenderbuffer[fe]);F.__webglDepthRenderbuffer&&n.deleteRenderbuffer(F.__webglDepthRenderbuffer)}const ie=k.textures;for(let fe=0,Se=ie.length;fe<Se;fe++){const ge=i.get(ie[fe]);ge.__webglTexture&&(n.deleteTexture(ge.__webglTexture),o.memory.textures--),i.remove(ie[fe])}i.remove(k)}let U=0;function H(){U=0}function X(){const k=U;return k>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+k+" texture units while this GPU supports only "+r.maxTextures),U+=1,k}function ee(k){const F=[];return F.push(k.wrapS),F.push(k.wrapT),F.push(k.wrapR||0),F.push(k.magFilter),F.push(k.minFilter),F.push(k.anisotropy),F.push(k.internalFormat),F.push(k.format),F.push(k.type),F.push(k.generateMipmaps),F.push(k.premultiplyAlpha),F.push(k.flipY),F.push(k.unpackAlignment),F.push(k.colorSpace),F.join()}function ne(k,F){const ie=i.get(k);if(k.isVideoTexture&&Te(k),k.isRenderTargetTexture===!1&&k.version>0&&ie.__version!==k.version){const fe=k.image;if(fe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(fe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{re(ie,k,F);return}}t.bindTexture(n.TEXTURE_2D,ie.__webglTexture,n.TEXTURE0+F)}function te(k,F){const ie=i.get(k);if(k.version>0&&ie.__version!==k.version){re(ie,k,F);return}t.bindTexture(n.TEXTURE_2D_ARRAY,ie.__webglTexture,n.TEXTURE0+F)}function le(k,F){const ie=i.get(k);if(k.version>0&&ie.__version!==k.version){re(ie,k,F);return}t.bindTexture(n.TEXTURE_3D,ie.__webglTexture,n.TEXTURE0+F)}function D(k,F){const ie=i.get(k);if(k.version>0&&ie.__version!==k.version){xe(ie,k,F);return}t.bindTexture(n.TEXTURE_CUBE_MAP,ie.__webglTexture,n.TEXTURE0+F)}const W={[Yr]:n.REPEAT,[Ki]:n.CLAMP_TO_EDGE,[ml]:n.MIRRORED_REPEAT},j={[zn]:n.NEAREST,[ph]:n.NEAREST_MIPMAP_NEAREST,[Vo]:n.NEAREST_MIPMAP_LINEAR,[$t]:n.LINEAR,[sl]:n.LINEAR_MIPMAP_NEAREST,[Yi]:n.LINEAR_MIPMAP_LINEAR},Z={[yI]:n.NEVER,[wI]:n.ALWAYS,[xI]:n.LESS,[WA]:n.LEQUAL,[_I]:n.EQUAL,[MI]:n.GEQUAL,[AI]:n.GREATER,[SI]:n.NOTEQUAL};function me(k,F){if(F.type===Di&&e.has("OES_texture_float_linear")===!1&&(F.magFilter===$t||F.magFilter===sl||F.magFilter===Vo||F.magFilter===Yi||F.minFilter===$t||F.minFilter===sl||F.minFilter===Vo||F.minFilter===Yi)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(k,n.TEXTURE_WRAP_S,W[F.wrapS]),n.texParameteri(k,n.TEXTURE_WRAP_T,W[F.wrapT]),(k===n.TEXTURE_3D||k===n.TEXTURE_2D_ARRAY)&&n.texParameteri(k,n.TEXTURE_WRAP_R,W[F.wrapR]),n.texParameteri(k,n.TEXTURE_MAG_FILTER,j[F.magFilter]),n.texParameteri(k,n.TEXTURE_MIN_FILTER,j[F.minFilter]),F.compareFunction&&(n.texParameteri(k,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(k,n.TEXTURE_COMPARE_FUNC,Z[F.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(F.magFilter===zn||F.minFilter!==Vo&&F.minFilter!==Yi||F.type===Di&&e.has("OES_texture_float_linear")===!1)return;if(F.anisotropy>1||i.get(F).__currentAnisotropy){const ie=e.get("EXT_texture_filter_anisotropic");n.texParameterf(k,ie.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(F.anisotropy,r.getMaxAnisotropy())),i.get(F).__currentAnisotropy=F.anisotropy}}}function Be(k,F){let ie=!1;k.__webglInit===void 0&&(k.__webglInit=!0,F.addEventListener("dispose",R));const fe=F.source;let Se=p.get(fe);Se===void 0&&(Se={},p.set(fe,Se));const ge=ee(F);if(ge!==k.__cacheKey){Se[ge]===void 0&&(Se[ge]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,ie=!0),Se[ge].usedTimes++;const Ze=Se[k.__cacheKey];Ze!==void 0&&(Se[k.__cacheKey].usedTimes--,Ze.usedTimes===0&&I(F)),k.__cacheKey=ge,k.__webglTexture=Se[ge].texture}return ie}function re(k,F,ie){let fe=n.TEXTURE_2D;(F.isDataArrayTexture||F.isCompressedArrayTexture)&&(fe=n.TEXTURE_2D_ARRAY),F.isData3DTexture&&(fe=n.TEXTURE_3D);const Se=Be(k,F),ge=F.source;t.bindTexture(fe,k.__webglTexture,n.TEXTURE0+ie);const Ze=i.get(ge);if(ge.version!==Ze.__version||Se===!0){t.activeTexture(n.TEXTURE0+ie);const Le=Ft.getPrimaries(Ft.workingColorSpace),je=F.colorSpace===Vs?null:Ft.getPrimaries(F.colorSpace),Ct=F.colorSpace===Vs||Le===je?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,F.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,F.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,F.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ct);let we=A(F.image,!1,r.maxTextureSize);we=it(F,we);const Ke=s.convert(F.format,F.colorSpace),ut=s.convert(F.type);let mt=M(F.internalFormat,Ke,ut,F.colorSpace,F.isVideoTexture);me(fe,F);let Je;const K=F.mipmaps,pe=F.isVideoTexture!==!0,Ue=Ze.__version===void 0||Se===!0,J=ge.dataReady,be=C(F,we);if(F.isDepthTexture)mt=w(F.format===vl,F.type),Ue&&(pe?t.texStorage2D(n.TEXTURE_2D,1,mt,we.width,we.height):t.texImage2D(n.TEXTURE_2D,0,mt,we.width,we.height,0,Ke,ut,null));else if(F.isDataTexture)if(K.length>0){pe&&Ue&&t.texStorage2D(n.TEXTURE_2D,be,mt,K[0].width,K[0].height);for(let ce=0,ve=K.length;ce<ve;ce++)Je=K[ce],pe?J&&t.texSubImage2D(n.TEXTURE_2D,ce,0,0,Je.width,Je.height,Ke,ut,Je.data):t.texImage2D(n.TEXTURE_2D,ce,mt,Je.width,Je.height,0,Ke,ut,Je.data);F.generateMipmaps=!1}else pe?(Ue&&t.texStorage2D(n.TEXTURE_2D,be,mt,we.width,we.height),J&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,we.width,we.height,Ke,ut,we.data)):t.texImage2D(n.TEXTURE_2D,0,mt,we.width,we.height,0,Ke,ut,we.data);else if(F.isCompressedTexture)if(F.isCompressedArrayTexture){pe&&Ue&&t.texStorage3D(n.TEXTURE_2D_ARRAY,be,mt,K[0].width,K[0].height,we.depth);for(let ce=0,ve=K.length;ce<ve;ce++)if(Je=K[ce],F.format!==Mi)if(Ke!==null)if(pe){if(J)if(F.layerUpdates.size>0){const Ge=M_(Je.width,Je.height,F.format,F.type);for(const Fe of F.layerUpdates){const ct=Je.data.subarray(Fe*Ge/Je.data.BYTES_PER_ELEMENT,(Fe+1)*Ge/Je.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,ce,0,0,Fe,Je.width,Je.height,1,Ke,ct)}F.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,ce,0,0,0,Je.width,Je.height,we.depth,Ke,Je.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,ce,mt,Je.width,Je.height,we.depth,0,Je.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else pe?J&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,ce,0,0,0,Je.width,Je.height,we.depth,Ke,ut,Je.data):t.texImage3D(n.TEXTURE_2D_ARRAY,ce,mt,Je.width,Je.height,we.depth,0,Ke,ut,Je.data)}else{pe&&Ue&&t.texStorage2D(n.TEXTURE_2D,be,mt,K[0].width,K[0].height);for(let ce=0,ve=K.length;ce<ve;ce++)Je=K[ce],F.format!==Mi?Ke!==null?pe?J&&t.compressedTexSubImage2D(n.TEXTURE_2D,ce,0,0,Je.width,Je.height,Ke,Je.data):t.compressedTexImage2D(n.TEXTURE_2D,ce,mt,Je.width,Je.height,0,Je.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):pe?J&&t.texSubImage2D(n.TEXTURE_2D,ce,0,0,Je.width,Je.height,Ke,ut,Je.data):t.texImage2D(n.TEXTURE_2D,ce,mt,Je.width,Je.height,0,Ke,ut,Je.data)}else if(F.isDataArrayTexture)if(pe){if(Ue&&t.texStorage3D(n.TEXTURE_2D_ARRAY,be,mt,we.width,we.height,we.depth),J)if(F.layerUpdates.size>0){const ce=M_(we.width,we.height,F.format,F.type);for(const ve of F.layerUpdates){const Ge=we.data.subarray(ve*ce/we.data.BYTES_PER_ELEMENT,(ve+1)*ce/we.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,ve,we.width,we.height,1,Ke,ut,Ge)}F.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,we.width,we.height,we.depth,Ke,ut,we.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,mt,we.width,we.height,we.depth,0,Ke,ut,we.data);else if(F.isData3DTexture)pe?(Ue&&t.texStorage3D(n.TEXTURE_3D,be,mt,we.width,we.height,we.depth),J&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,we.width,we.height,we.depth,Ke,ut,we.data)):t.texImage3D(n.TEXTURE_3D,0,mt,we.width,we.height,we.depth,0,Ke,ut,we.data);else if(F.isFramebufferTexture){if(Ue)if(pe)t.texStorage2D(n.TEXTURE_2D,be,mt,we.width,we.height);else{let ce=we.width,ve=we.height;for(let Ge=0;Ge<be;Ge++)t.texImage2D(n.TEXTURE_2D,Ge,mt,ce,ve,0,Ke,ut,null),ce>>=1,ve>>=1}}else if(K.length>0){if(pe&&Ue){const ce=Oe(K[0]);t.texStorage2D(n.TEXTURE_2D,be,mt,ce.width,ce.height)}for(let ce=0,ve=K.length;ce<ve;ce++)Je=K[ce],pe?J&&t.texSubImage2D(n.TEXTURE_2D,ce,0,0,Ke,ut,Je):t.texImage2D(n.TEXTURE_2D,ce,mt,Ke,ut,Je);F.generateMipmaps=!1}else if(pe){if(Ue){const ce=Oe(we);t.texStorage2D(n.TEXTURE_2D,be,mt,ce.width,ce.height)}J&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ke,ut,we)}else t.texImage2D(n.TEXTURE_2D,0,mt,Ke,ut,we);x(F)&&g(fe),Ze.__version=ge.version,F.onUpdate&&F.onUpdate(F)}k.__version=F.version}function xe(k,F,ie){if(F.image.length!==6)return;const fe=Be(k,F),Se=F.source;t.bindTexture(n.TEXTURE_CUBE_MAP,k.__webglTexture,n.TEXTURE0+ie);const ge=i.get(Se);if(Se.version!==ge.__version||fe===!0){t.activeTexture(n.TEXTURE0+ie);const Ze=Ft.getPrimaries(Ft.workingColorSpace),Le=F.colorSpace===Vs?null:Ft.getPrimaries(F.colorSpace),je=F.colorSpace===Vs||Ze===Le?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,F.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,F.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,F.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,je);const Ct=F.isCompressedTexture||F.image[0].isCompressedTexture,we=F.image[0]&&F.image[0].isDataTexture,Ke=[];for(let ve=0;ve<6;ve++)!Ct&&!we?Ke[ve]=A(F.image[ve],!0,r.maxCubemapSize):Ke[ve]=we?F.image[ve].image:F.image[ve],Ke[ve]=it(F,Ke[ve]);const ut=Ke[0],mt=s.convert(F.format,F.colorSpace),Je=s.convert(F.type),K=M(F.internalFormat,mt,Je,F.colorSpace),pe=F.isVideoTexture!==!0,Ue=ge.__version===void 0||fe===!0,J=Se.dataReady;let be=C(F,ut);me(n.TEXTURE_CUBE_MAP,F);let ce;if(Ct){pe&&Ue&&t.texStorage2D(n.TEXTURE_CUBE_MAP,be,K,ut.width,ut.height);for(let ve=0;ve<6;ve++){ce=Ke[ve].mipmaps;for(let Ge=0;Ge<ce.length;Ge++){const Fe=ce[Ge];F.format!==Mi?mt!==null?pe?J&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,Ge,0,0,Fe.width,Fe.height,mt,Fe.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,Ge,K,Fe.width,Fe.height,0,Fe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):pe?J&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,Ge,0,0,Fe.width,Fe.height,mt,Je,Fe.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,Ge,K,Fe.width,Fe.height,0,mt,Je,Fe.data)}}}else{if(ce=F.mipmaps,pe&&Ue){ce.length>0&&be++;const ve=Oe(Ke[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,be,K,ve.width,ve.height)}for(let ve=0;ve<6;ve++)if(we){pe?J&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,0,0,0,Ke[ve].width,Ke[ve].height,mt,Je,Ke[ve].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,0,K,Ke[ve].width,Ke[ve].height,0,mt,Je,Ke[ve].data);for(let Ge=0;Ge<ce.length;Ge++){const ct=ce[Ge].image[ve].image;pe?J&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,Ge+1,0,0,ct.width,ct.height,mt,Je,ct.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,Ge+1,K,ct.width,ct.height,0,mt,Je,ct.data)}}else{pe?J&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,0,0,0,mt,Je,Ke[ve]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,0,K,mt,Je,Ke[ve]);for(let Ge=0;Ge<ce.length;Ge++){const Fe=ce[Ge];pe?J&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,Ge+1,0,0,mt,Je,Fe.image[ve]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,Ge+1,K,mt,Je,Fe.image[ve])}}}x(F)&&g(n.TEXTURE_CUBE_MAP),ge.__version=Se.version,F.onUpdate&&F.onUpdate(F)}k.__version=F.version}function Ee(k,F,ie,fe,Se,ge){const Ze=s.convert(ie.format,ie.colorSpace),Le=s.convert(ie.type),je=M(ie.internalFormat,Ze,Le,ie.colorSpace),Ct=i.get(F),we=i.get(ie);if(we.__renderTarget=F,!Ct.__hasExternalTextures){const Ke=Math.max(1,F.width>>ge),ut=Math.max(1,F.height>>ge);Se===n.TEXTURE_3D||Se===n.TEXTURE_2D_ARRAY?t.texImage3D(Se,ge,je,Ke,ut,F.depth,0,Ze,Le,null):t.texImage2D(Se,ge,je,Ke,ut,0,Ze,Le,null)}t.bindFramebuffer(n.FRAMEBUFFER,k),De(F)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,fe,Se,we.__webglTexture,0,Me(F)):(Se===n.TEXTURE_2D||Se>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Se<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,fe,Se,we.__webglTexture,ge),t.bindFramebuffer(n.FRAMEBUFFER,null)}function _e(k,F,ie){if(n.bindRenderbuffer(n.RENDERBUFFER,k),F.depthBuffer){const fe=F.depthTexture,Se=fe&&fe.isDepthTexture?fe.type:null,ge=w(F.stencilBuffer,Se),Ze=F.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Le=Me(F);De(F)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Le,ge,F.width,F.height):ie?n.renderbufferStorageMultisample(n.RENDERBUFFER,Le,ge,F.width,F.height):n.renderbufferStorage(n.RENDERBUFFER,ge,F.width,F.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ze,n.RENDERBUFFER,k)}else{const fe=F.textures;for(let Se=0;Se<fe.length;Se++){const ge=fe[Se],Ze=s.convert(ge.format,ge.colorSpace),Le=s.convert(ge.type),je=M(ge.internalFormat,Ze,Le,ge.colorSpace),Ct=Me(F);ie&&De(F)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ct,je,F.width,F.height):De(F)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ct,je,F.width,F.height):n.renderbufferStorage(n.RENDERBUFFER,je,F.width,F.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function qe(k,F){if(F&&F.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,k),!(F.depthTexture&&F.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const fe=i.get(F.depthTexture);fe.__renderTarget=F,(!fe.__webglTexture||F.depthTexture.image.width!==F.width||F.depthTexture.image.height!==F.height)&&(F.depthTexture.image.width=F.width,F.depthTexture.image.height=F.height,F.depthTexture.needsUpdate=!0),ne(F.depthTexture,0);const Se=fe.__webglTexture,ge=Me(F);if(F.depthTexture.format===ol)De(F)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Se,0,ge):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Se,0);else if(F.depthTexture.format===vl)De(F)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Se,0,ge):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Se,0);else throw new Error("Unknown depthTexture format")}function rt(k){const F=i.get(k),ie=k.isWebGLCubeRenderTarget===!0;if(F.__boundDepthTexture!==k.depthTexture){const fe=k.depthTexture;if(F.__depthDisposeCallback&&F.__depthDisposeCallback(),fe){const Se=()=>{delete F.__boundDepthTexture,delete F.__depthDisposeCallback,fe.removeEventListener("dispose",Se)};fe.addEventListener("dispose",Se),F.__depthDisposeCallback=Se}F.__boundDepthTexture=fe}if(k.depthTexture&&!F.__autoAllocateDepthBuffer){if(ie)throw new Error("target.depthTexture not supported in Cube render targets");qe(F.__webglFramebuffer,k)}else if(ie){F.__webglDepthbuffer=[];for(let fe=0;fe<6;fe++)if(t.bindFramebuffer(n.FRAMEBUFFER,F.__webglFramebuffer[fe]),F.__webglDepthbuffer[fe]===void 0)F.__webglDepthbuffer[fe]=n.createRenderbuffer(),_e(F.__webglDepthbuffer[fe],k,!1);else{const Se=k.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ge=F.__webglDepthbuffer[fe];n.bindRenderbuffer(n.RENDERBUFFER,ge),n.framebufferRenderbuffer(n.FRAMEBUFFER,Se,n.RENDERBUFFER,ge)}}else if(t.bindFramebuffer(n.FRAMEBUFFER,F.__webglFramebuffer),F.__webglDepthbuffer===void 0)F.__webglDepthbuffer=n.createRenderbuffer(),_e(F.__webglDepthbuffer,k,!1);else{const fe=k.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Se=F.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Se),n.framebufferRenderbuffer(n.FRAMEBUFFER,fe,n.RENDERBUFFER,Se)}t.bindFramebuffer(n.FRAMEBUFFER,null)}function at(k,F,ie){const fe=i.get(k);F!==void 0&&Ee(fe.__webglFramebuffer,k,k.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),ie!==void 0&&rt(k)}function lt(k){const F=k.texture,ie=i.get(k),fe=i.get(F);k.addEventListener("dispose",P);const Se=k.textures,ge=k.isWebGLCubeRenderTarget===!0,Ze=Se.length>1;if(Ze||(fe.__webglTexture===void 0&&(fe.__webglTexture=n.createTexture()),fe.__version=F.version,o.memory.textures++),ge){ie.__webglFramebuffer=[];for(let Le=0;Le<6;Le++)if(F.mipmaps&&F.mipmaps.length>0){ie.__webglFramebuffer[Le]=[];for(let je=0;je<F.mipmaps.length;je++)ie.__webglFramebuffer[Le][je]=n.createFramebuffer()}else ie.__webglFramebuffer[Le]=n.createFramebuffer()}else{if(F.mipmaps&&F.mipmaps.length>0){ie.__webglFramebuffer=[];for(let Le=0;Le<F.mipmaps.length;Le++)ie.__webglFramebuffer[Le]=n.createFramebuffer()}else ie.__webglFramebuffer=n.createFramebuffer();if(Ze)for(let Le=0,je=Se.length;Le<je;Le++){const Ct=i.get(Se[Le]);Ct.__webglTexture===void 0&&(Ct.__webglTexture=n.createTexture(),o.memory.textures++)}if(k.samples>0&&De(k)===!1){ie.__webglMultisampledFramebuffer=n.createFramebuffer(),ie.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,ie.__webglMultisampledFramebuffer);for(let Le=0;Le<Se.length;Le++){const je=Se[Le];ie.__webglColorRenderbuffer[Le]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,ie.__webglColorRenderbuffer[Le]);const Ct=s.convert(je.format,je.colorSpace),we=s.convert(je.type),Ke=M(je.internalFormat,Ct,we,je.colorSpace,k.isXRRenderTarget===!0),ut=Me(k);n.renderbufferStorageMultisample(n.RENDERBUFFER,ut,Ke,k.width,k.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Le,n.RENDERBUFFER,ie.__webglColorRenderbuffer[Le])}n.bindRenderbuffer(n.RENDERBUFFER,null),k.depthBuffer&&(ie.__webglDepthRenderbuffer=n.createRenderbuffer(),_e(ie.__webglDepthRenderbuffer,k,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(ge){t.bindTexture(n.TEXTURE_CUBE_MAP,fe.__webglTexture),me(n.TEXTURE_CUBE_MAP,F);for(let Le=0;Le<6;Le++)if(F.mipmaps&&F.mipmaps.length>0)for(let je=0;je<F.mipmaps.length;je++)Ee(ie.__webglFramebuffer[Le][je],k,F,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,je);else Ee(ie.__webglFramebuffer[Le],k,F,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,0);x(F)&&g(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Ze){for(let Le=0,je=Se.length;Le<je;Le++){const Ct=Se[Le],we=i.get(Ct);t.bindTexture(n.TEXTURE_2D,we.__webglTexture),me(n.TEXTURE_2D,Ct),Ee(ie.__webglFramebuffer,k,Ct,n.COLOR_ATTACHMENT0+Le,n.TEXTURE_2D,0),x(Ct)&&g(n.TEXTURE_2D)}t.unbindTexture()}else{let Le=n.TEXTURE_2D;if((k.isWebGL3DRenderTarget||k.isWebGLArrayRenderTarget)&&(Le=k.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Le,fe.__webglTexture),me(Le,F),F.mipmaps&&F.mipmaps.length>0)for(let je=0;je<F.mipmaps.length;je++)Ee(ie.__webglFramebuffer[je],k,F,n.COLOR_ATTACHMENT0,Le,je);else Ee(ie.__webglFramebuffer,k,F,n.COLOR_ATTACHMENT0,Le,0);x(F)&&g(Le),t.unbindTexture()}k.depthBuffer&&rt(k)}function ye(k){const F=k.textures;for(let ie=0,fe=F.length;ie<fe;ie++){const Se=F[ie];if(x(Se)){const ge=_(k),Ze=i.get(Se).__webglTexture;t.bindTexture(ge,Ze),g(ge),t.unbindTexture()}}}const Ae=[],V=[];function We(k){if(k.samples>0){if(De(k)===!1){const F=k.textures,ie=k.width,fe=k.height;let Se=n.COLOR_BUFFER_BIT;const ge=k.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ze=i.get(k),Le=F.length>1;if(Le)for(let je=0;je<F.length;je++)t.bindFramebuffer(n.FRAMEBUFFER,Ze.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+je,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Ze.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+je,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Ze.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ze.__webglFramebuffer);for(let je=0;je<F.length;je++){if(k.resolveDepthBuffer&&(k.depthBuffer&&(Se|=n.DEPTH_BUFFER_BIT),k.stencilBuffer&&k.resolveStencilBuffer&&(Se|=n.STENCIL_BUFFER_BIT)),Le){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Ze.__webglColorRenderbuffer[je]);const Ct=i.get(F[je]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Ct,0)}n.blitFramebuffer(0,0,ie,fe,0,0,ie,fe,Se,n.NEAREST),l===!0&&(Ae.length=0,V.length=0,Ae.push(n.COLOR_ATTACHMENT0+je),k.depthBuffer&&k.resolveDepthBuffer===!1&&(Ae.push(ge),V.push(ge),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,V)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Ae))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Le)for(let je=0;je<F.length;je++){t.bindFramebuffer(n.FRAMEBUFFER,Ze.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+je,n.RENDERBUFFER,Ze.__webglColorRenderbuffer[je]);const Ct=i.get(F[je]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Ze.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+je,n.TEXTURE_2D,Ct,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ze.__webglMultisampledFramebuffer)}else if(k.depthBuffer&&k.resolveDepthBuffer===!1&&l){const F=k.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[F])}}}function Me(k){return Math.min(r.maxSamples,k.samples)}function De(k){const F=i.get(k);return k.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&F.__useRenderToTexture!==!1}function Te(k){const F=o.render.frame;h.get(k)!==F&&(h.set(k,F),k.update())}function it(k,F){const ie=k.colorSpace,fe=k.format,Se=k.type;return k.isCompressedTexture===!0||k.isVideoTexture===!0||ie!==bi&&ie!==Vs&&(Ft.getTransfer(ie)===Qt?(fe!==Mi||Se!==Qr)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ie)),F}function Oe(k){return typeof HTMLImageElement<"u"&&k instanceof HTMLImageElement?(c.width=k.naturalWidth||k.width,c.height=k.naturalHeight||k.height):typeof VideoFrame<"u"&&k instanceof VideoFrame?(c.width=k.displayWidth,c.height=k.displayHeight):(c.width=k.width,c.height=k.height),c}this.allocateTextureUnit=X,this.resetTextureUnits=H,this.setTexture2D=ne,this.setTexture2DArray=te,this.setTexture3D=le,this.setTextureCube=D,this.rebindTextures=at,this.setupRenderTarget=lt,this.updateRenderTargetMipmap=ye,this.updateMultisampleRenderTarget=We,this.setupDepthRenderbuffer=rt,this.setupFrameBufferTexture=Ee,this.useMultisampledRTT=De}function kI(n,e){function t(i,r=Vs){let s;const o=Ft.getTransfer(r);if(i===Qr)return n.UNSIGNED_BYTE;if(i===Wg)return n.UNSIGNED_SHORT_4_4_4_4;if(i===jg)return n.UNSIGNED_SHORT_5_5_5_1;if(i===NA)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===LA)return n.BYTE;if(i===DA)return n.SHORT;if(i===Yc)return n.UNSIGNED_SHORT;if(i===Vg)return n.INT;if(i===ro)return n.UNSIGNED_INT;if(i===Di)return n.FLOAT;if(i===aa)return n.HALF_FLOAT;if(i===FA)return n.ALPHA;if(i===UA)return n.RGB;if(i===Mi)return n.RGBA;if(i===OA)return n.LUMINANCE;if(i===kA)return n.LUMINANCE_ALPHA;if(i===ol)return n.DEPTH_COMPONENT;if(i===vl)return n.DEPTH_STENCIL;if(i===Xg)return n.RED;if(i===mh)return n.RED_INTEGER;if(i===zA)return n.RG;if(i===Jg)return n.RG_INTEGER;if(i===Kg)return n.RGBA_INTEGER;if(i===wd||i===Ed||i===bd||i===Cd)if(o===Qt)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===wd)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===Ed)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===bd)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===Cd)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===wd)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===Ed)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===bd)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Cd)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===Wm||i===jm||i===Xm||i===Jm)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===Wm)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===jm)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===Xm)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===Jm)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===Km||i===Ym||i===Qm)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(i===Km||i===Ym)return o===Qt?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===Qm)return o===Qt?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===qm||i===Zm||i===$m||i===eg||i===tg||i===ng||i===ig||i===rg||i===sg||i===og||i===ag||i===lg||i===cg||i===ug)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(i===qm)return o===Qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===Zm)return o===Qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===$m)return o===Qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===eg)return o===Qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===tg)return o===Qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===ng)return o===Qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===ig)return o===Qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===rg)return o===Qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===sg)return o===Qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===og)return o===Qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===ag)return o===Qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===lg)return o===Qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===cg)return o===Qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===ug)return o===Qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===Td||i===dg||i===hg)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(i===Td)return o===Qt?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===dg)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===hg)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===HA||i===fg||i===pg||i===mg)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(i===Td)return s.COMPRESSED_RED_RGTC1_EXT;if(i===fg)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===pg)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===mg)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===gl?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}class zI extends vn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Rr extends Rt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Sz={type:"move"};class Ry{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Rr,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Rr,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new N,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new N),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Rr,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new N,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new N),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const A of e.hand.values()){const x=t.getJointPose(A,i),g=this._getHandJoint(c,A);x!==null&&(g.matrix.fromArray(x.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=x.radius),g.visible=x!==null}const h=c.joints["index-finger-tip"],f=c.joints["thumb-tip"],p=h.position.distanceTo(f.position),m=.02,y=.005;c.inputState.pinching&&p>m+y?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&p<=m-y&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Sz)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new Rr;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}const Mz=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,wz=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Ez{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const r=new tn,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!=i.depthNear||t.depthFar!=i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new wi({vertexShader:Mz,fragmentShader:wz,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Yt(new bl(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class bz extends Ss{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=1,c=null,h=null,f=null,p=null,m=null,y=null;const A=new Ez,x=t.getContextAttributes();let g=null,_=null;const M=[],w=[],C=new ue;let R=null;const P=new vn;P.viewport=new Gt;const B=new vn;B.viewport=new Gt;const I=[P,B],b=new zI;let U=null,H=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(re){let xe=M[re];return xe===void 0&&(xe=new Ry,M[re]=xe),xe.getTargetRaySpace()},this.getControllerGrip=function(re){let xe=M[re];return xe===void 0&&(xe=new Ry,M[re]=xe),xe.getGripSpace()},this.getHand=function(re){let xe=M[re];return xe===void 0&&(xe=new Ry,M[re]=xe),xe.getHandSpace()};function X(re){const xe=w.indexOf(re.inputSource);if(xe===-1)return;const Ee=M[xe];Ee!==void 0&&(Ee.update(re.inputSource,re.frame,c||o),Ee.dispatchEvent({type:re.type,data:re.inputSource}))}function ee(){r.removeEventListener("select",X),r.removeEventListener("selectstart",X),r.removeEventListener("selectend",X),r.removeEventListener("squeeze",X),r.removeEventListener("squeezestart",X),r.removeEventListener("squeezeend",X),r.removeEventListener("end",ee),r.removeEventListener("inputsourceschange",ne);for(let re=0;re<M.length;re++){const xe=w[re];xe!==null&&(w[re]=null,M[re].disconnect(xe))}U=null,H=null,A.reset(),e.setRenderTarget(g),m=null,p=null,f=null,r=null,_=null,Be.stop(),i.isPresenting=!1,e.setPixelRatio(R),e.setSize(C.width,C.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(re){s=re,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(re){a=re,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(re){c=re},this.getBaseLayer=function(){return p!==null?p:m},this.getBinding=function(){return f},this.getFrame=function(){return y},this.getSession=function(){return r},this.setSession=async function(re){if(r=re,r!==null){if(g=e.getRenderTarget(),r.addEventListener("select",X),r.addEventListener("selectstart",X),r.addEventListener("selectend",X),r.addEventListener("squeeze",X),r.addEventListener("squeezestart",X),r.addEventListener("squeezeend",X),r.addEventListener("end",ee),r.addEventListener("inputsourceschange",ne),x.xrCompatible!==!0&&await t.makeXRCompatible(),R=e.getPixelRatio(),e.getSize(C),r.renderState.layers===void 0){const xe={antialias:x.antialias,alpha:!0,depth:x.depth,stencil:x.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(r,t,xe),r.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),_=new ai(m.framebufferWidth,m.framebufferHeight,{format:Mi,type:Qr,colorSpace:e.outputColorSpace,stencilBuffer:x.stencil})}else{let xe=null,Ee=null,_e=null;x.depth&&(_e=x.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,xe=x.stencil?vl:ol,Ee=x.stencil?gl:ro);const qe={colorFormat:t.RGBA8,depthFormat:_e,scaleFactor:s};f=new XRWebGLBinding(r,t),p=f.createProjectionLayer(qe),r.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),_=new ai(p.textureWidth,p.textureHeight,{format:Mi,type:Qr,depthTexture:new Ah(p.textureWidth,p.textureHeight,Ee,void 0,void 0,void 0,void 0,void 0,void 0,xe),stencilBuffer:x.stencil,colorSpace:e.outputColorSpace,samples:x.antialias?4:0,resolveDepthBuffer:p.ignoreDepthValues===!1})}_.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await r.requestReferenceSpace(a),Be.setContext(r),Be.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return A.getDepthTexture()};function ne(re){for(let xe=0;xe<re.removed.length;xe++){const Ee=re.removed[xe],_e=w.indexOf(Ee);_e>=0&&(w[_e]=null,M[_e].disconnect(Ee))}for(let xe=0;xe<re.added.length;xe++){const Ee=re.added[xe];let _e=w.indexOf(Ee);if(_e===-1){for(let rt=0;rt<M.length;rt++)if(rt>=w.length){w.push(Ee),_e=rt;break}else if(w[rt]===null){w[rt]=Ee,_e=rt;break}if(_e===-1)break}const qe=M[_e];qe&&qe.connect(Ee)}}const te=new N,le=new N;function D(re,xe,Ee){te.setFromMatrixPosition(xe.matrixWorld),le.setFromMatrixPosition(Ee.matrixWorld);const _e=te.distanceTo(le),qe=xe.projectionMatrix.elements,rt=Ee.projectionMatrix.elements,at=qe[14]/(qe[10]-1),lt=qe[14]/(qe[10]+1),ye=(qe[9]+1)/qe[5],Ae=(qe[9]-1)/qe[5],V=(qe[8]-1)/qe[0],We=(rt[8]+1)/rt[0],Me=at*V,De=at*We,Te=_e/(-V+We),it=Te*-V;if(xe.matrixWorld.decompose(re.position,re.quaternion,re.scale),re.translateX(it),re.translateZ(Te),re.matrixWorld.compose(re.position,re.quaternion,re.scale),re.matrixWorldInverse.copy(re.matrixWorld).invert(),qe[10]===-1)re.projectionMatrix.copy(xe.projectionMatrix),re.projectionMatrixInverse.copy(xe.projectionMatrixInverse);else{const Oe=at+Te,k=lt+Te,F=Me-it,ie=De+(_e-it),fe=ye*lt/k*Oe,Se=Ae*lt/k*Oe;re.projectionMatrix.makePerspective(F,ie,fe,Se,Oe,k),re.projectionMatrixInverse.copy(re.projectionMatrix).invert()}}function W(re,xe){xe===null?re.matrixWorld.copy(re.matrix):re.matrixWorld.multiplyMatrices(xe.matrixWorld,re.matrix),re.matrixWorldInverse.copy(re.matrixWorld).invert()}this.updateCamera=function(re){if(r===null)return;let xe=re.near,Ee=re.far;A.texture!==null&&(A.depthNear>0&&(xe=A.depthNear),A.depthFar>0&&(Ee=A.depthFar)),b.near=B.near=P.near=xe,b.far=B.far=P.far=Ee,(U!==b.near||H!==b.far)&&(r.updateRenderState({depthNear:b.near,depthFar:b.far}),U=b.near,H=b.far),P.layers.mask=re.layers.mask|2,B.layers.mask=re.layers.mask|4,b.layers.mask=P.layers.mask|B.layers.mask;const _e=re.parent,qe=b.cameras;W(b,_e);for(let rt=0;rt<qe.length;rt++)W(qe[rt],_e);qe.length===2?D(b,P,B):b.projectionMatrix.copy(P.projectionMatrix),j(re,b,_e)};function j(re,xe,Ee){Ee===null?re.matrix.copy(xe.matrixWorld):(re.matrix.copy(Ee.matrixWorld),re.matrix.invert(),re.matrix.multiply(xe.matrixWorld)),re.matrix.decompose(re.position,re.quaternion,re.scale),re.updateMatrixWorld(!0),re.projectionMatrix.copy(xe.projectionMatrix),re.projectionMatrixInverse.copy(xe.projectionMatrixInverse),re.isPerspectiveCamera&&(re.fov=Qc*2*Math.atan(1/re.projectionMatrix.elements[5]),re.zoom=1)}this.getCamera=function(){return b},this.getFoveation=function(){if(!(p===null&&m===null))return l},this.setFoveation=function(re){l=re,p!==null&&(p.fixedFoveation=re),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=re)},this.hasDepthSensing=function(){return A.texture!==null},this.getDepthSensingMesh=function(){return A.getMesh(b)};let Z=null;function me(re,xe){if(h=xe.getViewerPose(c||o),y=xe,h!==null){const Ee=h.views;m!==null&&(e.setRenderTargetFramebuffer(_,m.framebuffer),e.setRenderTarget(_));let _e=!1;Ee.length!==b.cameras.length&&(b.cameras.length=0,_e=!0);for(let rt=0;rt<Ee.length;rt++){const at=Ee[rt];let lt=null;if(m!==null)lt=m.getViewport(at);else{const Ae=f.getViewSubImage(p,at);lt=Ae.viewport,rt===0&&(e.setRenderTargetTextures(_,Ae.colorTexture,p.ignoreDepthValues?void 0:Ae.depthStencilTexture),e.setRenderTarget(_))}let ye=I[rt];ye===void 0&&(ye=new vn,ye.layers.enable(rt),ye.viewport=new Gt,I[rt]=ye),ye.matrix.fromArray(at.transform.matrix),ye.matrix.decompose(ye.position,ye.quaternion,ye.scale),ye.projectionMatrix.fromArray(at.projectionMatrix),ye.projectionMatrixInverse.copy(ye.projectionMatrix).invert(),ye.viewport.set(lt.x,lt.y,lt.width,lt.height),rt===0&&(b.matrix.copy(ye.matrix),b.matrix.decompose(b.position,b.quaternion,b.scale)),_e===!0&&b.cameras.push(ye)}const qe=r.enabledFeatures;if(qe&&qe.includes("depth-sensing")){const rt=f.getDepthInformation(Ee[0]);rt&&rt.isValid&&rt.texture&&A.init(e,rt,r.renderState)}}for(let Ee=0;Ee<M.length;Ee++){const _e=w[Ee],qe=M[Ee];_e!==null&&qe!==void 0&&qe.update(_e,xe,c||o)}Z&&Z(re,xe),xe.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:xe}),y=null}const Be=new DI;Be.setAnimationLoop(me),this.setAnimationLoop=function(re){Z=re},this.dispose=function(){}}}const Ca=new Fi,Cz=new Xe;function Tz(n,e){function t(x,g){x.matrixAutoUpdate===!0&&x.updateMatrix(),g.value.copy(x.matrix)}function i(x,g){g.color.getRGB(x.fogColor.value,II(n)),g.isFog?(x.fogNear.value=g.near,x.fogFar.value=g.far):g.isFogExp2&&(x.fogDensity.value=g.density)}function r(x,g,_,M,w){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(x,g):g.isMeshToonMaterial?(s(x,g),f(x,g)):g.isMeshPhongMaterial?(s(x,g),h(x,g)):g.isMeshStandardMaterial?(s(x,g),p(x,g),g.isMeshPhysicalMaterial&&m(x,g,w)):g.isMeshMatcapMaterial?(s(x,g),y(x,g)):g.isMeshDepthMaterial?s(x,g):g.isMeshDistanceMaterial?(s(x,g),A(x,g)):g.isMeshNormalMaterial?s(x,g):g.isLineBasicMaterial?(o(x,g),g.isLineDashedMaterial&&a(x,g)):g.isPointsMaterial?l(x,g,_,M):g.isSpriteMaterial?c(x,g):g.isShadowMaterial?(x.color.value.copy(g.color),x.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function s(x,g){x.opacity.value=g.opacity,g.color&&x.diffuse.value.copy(g.color),g.emissive&&x.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(x.map.value=g.map,t(g.map,x.mapTransform)),g.alphaMap&&(x.alphaMap.value=g.alphaMap,t(g.alphaMap,x.alphaMapTransform)),g.bumpMap&&(x.bumpMap.value=g.bumpMap,t(g.bumpMap,x.bumpMapTransform),x.bumpScale.value=g.bumpScale,g.side===ri&&(x.bumpScale.value*=-1)),g.normalMap&&(x.normalMap.value=g.normalMap,t(g.normalMap,x.normalMapTransform),x.normalScale.value.copy(g.normalScale),g.side===ri&&x.normalScale.value.negate()),g.displacementMap&&(x.displacementMap.value=g.displacementMap,t(g.displacementMap,x.displacementMapTransform),x.displacementScale.value=g.displacementScale,x.displacementBias.value=g.displacementBias),g.emissiveMap&&(x.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,x.emissiveMapTransform)),g.specularMap&&(x.specularMap.value=g.specularMap,t(g.specularMap,x.specularMapTransform)),g.alphaTest>0&&(x.alphaTest.value=g.alphaTest);const _=e.get(g),M=_.envMap,w=_.envMapRotation;M&&(x.envMap.value=M,Ca.copy(w),Ca.x*=-1,Ca.y*=-1,Ca.z*=-1,M.isCubeTexture&&M.isRenderTargetTexture===!1&&(Ca.y*=-1,Ca.z*=-1),x.envMapRotation.value.setFromMatrix4(Cz.makeRotationFromEuler(Ca)),x.flipEnvMap.value=M.isCubeTexture&&M.isRenderTargetTexture===!1?-1:1,x.reflectivity.value=g.reflectivity,x.ior.value=g.ior,x.refractionRatio.value=g.refractionRatio),g.lightMap&&(x.lightMap.value=g.lightMap,x.lightMapIntensity.value=g.lightMapIntensity,t(g.lightMap,x.lightMapTransform)),g.aoMap&&(x.aoMap.value=g.aoMap,x.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,x.aoMapTransform))}function o(x,g){x.diffuse.value.copy(g.color),x.opacity.value=g.opacity,g.map&&(x.map.value=g.map,t(g.map,x.mapTransform))}function a(x,g){x.dashSize.value=g.dashSize,x.totalSize.value=g.dashSize+g.gapSize,x.scale.value=g.scale}function l(x,g,_,M){x.diffuse.value.copy(g.color),x.opacity.value=g.opacity,x.size.value=g.size*_,x.scale.value=M*.5,g.map&&(x.map.value=g.map,t(g.map,x.uvTransform)),g.alphaMap&&(x.alphaMap.value=g.alphaMap,t(g.alphaMap,x.alphaMapTransform)),g.alphaTest>0&&(x.alphaTest.value=g.alphaTest)}function c(x,g){x.diffuse.value.copy(g.color),x.opacity.value=g.opacity,x.rotation.value=g.rotation,g.map&&(x.map.value=g.map,t(g.map,x.mapTransform)),g.alphaMap&&(x.alphaMap.value=g.alphaMap,t(g.alphaMap,x.alphaMapTransform)),g.alphaTest>0&&(x.alphaTest.value=g.alphaTest)}function h(x,g){x.specular.value.copy(g.specular),x.shininess.value=Math.max(g.shininess,1e-4)}function f(x,g){g.gradientMap&&(x.gradientMap.value=g.gradientMap)}function p(x,g){x.metalness.value=g.metalness,g.metalnessMap&&(x.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,x.metalnessMapTransform)),x.roughness.value=g.roughness,g.roughnessMap&&(x.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,x.roughnessMapTransform)),g.envMap&&(x.envMapIntensity.value=g.envMapIntensity)}function m(x,g,_){x.ior.value=g.ior,g.sheen>0&&(x.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),x.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(x.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,x.sheenColorMapTransform)),g.sheenRoughnessMap&&(x.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,x.sheenRoughnessMapTransform))),g.clearcoat>0&&(x.clearcoat.value=g.clearcoat,x.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(x.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,x.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,x.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(x.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,x.clearcoatNormalMapTransform),x.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===ri&&x.clearcoatNormalScale.value.negate())),g.dispersion>0&&(x.dispersion.value=g.dispersion),g.iridescence>0&&(x.iridescence.value=g.iridescence,x.iridescenceIOR.value=g.iridescenceIOR,x.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],x.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(x.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,x.iridescenceMapTransform)),g.iridescenceThicknessMap&&(x.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,x.iridescenceThicknessMapTransform))),g.transmission>0&&(x.transmission.value=g.transmission,x.transmissionSamplerMap.value=_.texture,x.transmissionSamplerSize.value.set(_.width,_.height),g.transmissionMap&&(x.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,x.transmissionMapTransform)),x.thickness.value=g.thickness,g.thicknessMap&&(x.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,x.thicknessMapTransform)),x.attenuationDistance.value=g.attenuationDistance,x.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(x.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(x.anisotropyMap.value=g.anisotropyMap,t(g.anisotropyMap,x.anisotropyMapTransform))),x.specularIntensity.value=g.specularIntensity,x.specularColor.value.copy(g.specularColor),g.specularColorMap&&(x.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,x.specularColorMapTransform)),g.specularIntensityMap&&(x.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,x.specularIntensityMapTransform))}function y(x,g){g.matcap&&(x.matcap.value=g.matcap)}function A(x,g){const _=e.get(g).light;x.referencePosition.value.setFromMatrixPosition(_.matrixWorld),x.nearDistance.value=_.shadow.camera.near,x.farDistance.value=_.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function Rz(n,e,t,i){let r={},s={},o=[];const a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(_,M){const w=M.program;i.uniformBlockBinding(_,w)}function c(_,M){let w=r[_.id];w===void 0&&(y(_),w=h(_),r[_.id]=w,_.addEventListener("dispose",x));const C=M.program;i.updateUBOMapping(_,C);const R=e.render.frame;s[_.id]!==R&&(p(_),s[_.id]=R)}function h(_){const M=f();_.__bindingPointIndex=M;const w=n.createBuffer(),C=_.__size,R=_.usage;return n.bindBuffer(n.UNIFORM_BUFFER,w),n.bufferData(n.UNIFORM_BUFFER,C,R),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,M,w),w}function f(){for(let _=0;_<a;_++)if(o.indexOf(_)===-1)return o.push(_),_;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(_){const M=r[_.id],w=_.uniforms,C=_.__cache;n.bindBuffer(n.UNIFORM_BUFFER,M);for(let R=0,P=w.length;R<P;R++){const B=Array.isArray(w[R])?w[R]:[w[R]];for(let I=0,b=B.length;I<b;I++){const U=B[I];if(m(U,R,I,C)===!0){const H=U.__offset,X=Array.isArray(U.value)?U.value:[U.value];let ee=0;for(let ne=0;ne<X.length;ne++){const te=X[ne],le=A(te);typeof te=="number"||typeof te=="boolean"?(U.__data[0]=te,n.bufferSubData(n.UNIFORM_BUFFER,H+ee,U.__data)):te.isMatrix3?(U.__data[0]=te.elements[0],U.__data[1]=te.elements[1],U.__data[2]=te.elements[2],U.__data[3]=0,U.__data[4]=te.elements[3],U.__data[5]=te.elements[4],U.__data[6]=te.elements[5],U.__data[7]=0,U.__data[8]=te.elements[6],U.__data[9]=te.elements[7],U.__data[10]=te.elements[8],U.__data[11]=0):(te.toArray(U.__data,ee),ee+=le.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,H,U.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function m(_,M,w,C){const R=_.value,P=M+"_"+w;if(C[P]===void 0)return typeof R=="number"||typeof R=="boolean"?C[P]=R:C[P]=R.clone(),!0;{const B=C[P];if(typeof R=="number"||typeof R=="boolean"){if(B!==R)return C[P]=R,!0}else if(B.equals(R)===!1)return B.copy(R),!0}return!1}function y(_){const M=_.uniforms;let w=0;const C=16;for(let P=0,B=M.length;P<B;P++){const I=Array.isArray(M[P])?M[P]:[M[P]];for(let b=0,U=I.length;b<U;b++){const H=I[b],X=Array.isArray(H.value)?H.value:[H.value];for(let ee=0,ne=X.length;ee<ne;ee++){const te=X[ee],le=A(te),D=w%C,W=D%le.boundary,j=D+W;w+=W,j!==0&&C-j<le.storage&&(w+=C-j),H.__data=new Float32Array(le.storage/Float32Array.BYTES_PER_ELEMENT),H.__offset=w,w+=le.storage}}}const R=w%C;return R>0&&(w+=C-R),_.__size=w,_.__cache={},this}function A(_){const M={boundary:0,storage:0};return typeof _=="number"||typeof _=="boolean"?(M.boundary=4,M.storage=4):_.isVector2?(M.boundary=8,M.storage=8):_.isVector3||_.isColor?(M.boundary=16,M.storage=12):_.isVector4?(M.boundary=16,M.storage=16):_.isMatrix3?(M.boundary=48,M.storage=48):_.isMatrix4?(M.boundary=64,M.storage=64):_.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",_),M}function x(_){const M=_.target;M.removeEventListener("dispose",x);const w=o.indexOf(M.__bindingPointIndex);o.splice(w,1),n.deleteBuffer(r[M.id]),delete r[M.id],delete s[M.id]}function g(){for(const _ in r)n.deleteBuffer(r[_]);o=[],r={},s={}}return{bind:l,update:c,dispose:g}}class HI{constructor(e={}){const{canvas:t=bI(),context:i=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:f=!1,reverseDepthBuffer:p=!1}=e;this.isWebGLRenderer=!0;let m;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");m=i.getContextAttributes().alpha}else m=o;const y=new Uint32Array(4),A=new Int32Array(4);let x=null,g=null;const _=[],M=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=In,this.toneMapping=ms,this.toneMappingExposure=1;const w=this;let C=!1,R=0,P=0,B=null,I=-1,b=null;const U=new Gt,H=new Gt;let X=null;const ee=new Ie(0);let ne=0,te=t.width,le=t.height,D=1,W=null,j=null;const Z=new Gt(0,0,te,le),me=new Gt(0,0,te,le);let Be=!1;const re=new _h;let xe=!1,Ee=!1;const _e=new Xe,qe=new Xe,rt=new N,at=new Gt,lt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let ye=!1;function Ae(){return B===null?D:1}let V=i;function We(O,Q){return t.getContext(O,Q)}try{const O={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:h,failIfMajorPerformanceCaveat:f};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${El}`),t.addEventListener("webglcontextlost",ve,!1),t.addEventListener("webglcontextrestored",Ge,!1),t.addEventListener("webglcontextcreationerror",Fe,!1),V===null){const Q="webgl2";if(V=We(Q,O),V===null)throw We(Q)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(O){throw console.error("THREE.WebGLRenderer: "+O.message),O}let Me,De,Te,it,Oe,k,F,ie,fe,Se,ge,Ze,Le,je,Ct,we,Ke,ut,mt,Je,K,pe,Ue,J;function be(){Me=new NO(V),Me.init(),pe=new kI(V,Me),De=new RO(V,Me,e,pe),Te=new mz(V,Me),De.reverseDepthBuffer&&p&&Te.buffers.depth.setReversed(!0),it=new OO(V),Oe=new nz,k=new Az(V,Me,Te,Oe,De,pe,it),F=new PO(w),ie=new DO(w),fe=new jF(V),Ue=new CO(V,fe),Se=new FO(V,fe,it,Ue),ge=new zO(V,Se,fe,it),mt=new kO(V,De,k),we=new IO(Oe),Ze=new tz(w,F,ie,Me,De,Ue,we),Le=new Tz(w,Oe),je=new rz,Ct=new uz(Me),ut=new bO(w,F,ie,Te,ge,m,l),Ke=new fz(w,ge,De),J=new Rz(V,it,De,Te),Je=new TO(V,Me,it),K=new UO(V,Me,it),it.programs=Ze.programs,w.capabilities=De,w.extensions=Me,w.properties=Oe,w.renderLists=je,w.shadowMap=Ke,w.state=Te,w.info=it}be();const ce=new bz(w,V);this.xr=ce,this.getContext=function(){return V},this.getContextAttributes=function(){return V.getContextAttributes()},this.forceContextLoss=function(){const O=Me.get("WEBGL_lose_context");O&&O.loseContext()},this.forceContextRestore=function(){const O=Me.get("WEBGL_lose_context");O&&O.restoreContext()},this.getPixelRatio=function(){return D},this.setPixelRatio=function(O){O!==void 0&&(D=O,this.setSize(te,le,!1))},this.getSize=function(O){return O.set(te,le)},this.setSize=function(O,Q,oe=!0){if(ce.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}te=O,le=Q,t.width=Math.floor(O*D),t.height=Math.floor(Q*D),oe===!0&&(t.style.width=O+"px",t.style.height=Q+"px"),this.setViewport(0,0,O,Q)},this.getDrawingBufferSize=function(O){return O.set(te*D,le*D).floor()},this.setDrawingBufferSize=function(O,Q,oe){te=O,le=Q,D=oe,t.width=Math.floor(O*oe),t.height=Math.floor(Q*oe),this.setViewport(0,0,O,Q)},this.getCurrentViewport=function(O){return O.copy(U)},this.getViewport=function(O){return O.copy(Z)},this.setViewport=function(O,Q,oe,ae){O.isVector4?Z.set(O.x,O.y,O.z,O.w):Z.set(O,Q,oe,ae),Te.viewport(U.copy(Z).multiplyScalar(D).round())},this.getScissor=function(O){return O.copy(me)},this.setScissor=function(O,Q,oe,ae){O.isVector4?me.set(O.x,O.y,O.z,O.w):me.set(O,Q,oe,ae),Te.scissor(H.copy(me).multiplyScalar(D).round())},this.getScissorTest=function(){return Be},this.setScissorTest=function(O){Te.setScissorTest(Be=O)},this.setOpaqueSort=function(O){W=O},this.setTransparentSort=function(O){j=O},this.getClearColor=function(O){return O.copy(ut.getClearColor())},this.setClearColor=function(){ut.setClearColor.apply(ut,arguments)},this.getClearAlpha=function(){return ut.getClearAlpha()},this.setClearAlpha=function(){ut.setClearAlpha.apply(ut,arguments)},this.clear=function(O=!0,Q=!0,oe=!0){let ae=0;if(O){let $=!1;if(B!==null){const Pe=B.texture.format;$=Pe===Kg||Pe===Jg||Pe===mh}if($){const Pe=B.texture.type,ke=Pe===Qr||Pe===ro||Pe===Yc||Pe===gl||Pe===Wg||Pe===jg,$e=ut.getClearColor(),tt=ut.getClearAlpha(),vt=$e.r,xt=$e.g,nt=$e.b;ke?(y[0]=vt,y[1]=xt,y[2]=nt,y[3]=tt,V.clearBufferuiv(V.COLOR,0,y)):(A[0]=vt,A[1]=xt,A[2]=nt,A[3]=tt,V.clearBufferiv(V.COLOR,0,A))}else ae|=V.COLOR_BUFFER_BIT}Q&&(ae|=V.DEPTH_BUFFER_BIT),oe&&(ae|=V.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),V.clear(ae)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ve,!1),t.removeEventListener("webglcontextrestored",Ge,!1),t.removeEventListener("webglcontextcreationerror",Fe,!1),je.dispose(),Ct.dispose(),Oe.dispose(),F.dispose(),ie.dispose(),ge.dispose(),Ue.dispose(),J.dispose(),Ze.dispose(),ce.dispose(),ce.removeEventListener("sessionstart",Rh),ce.removeEventListener("sessionend",Ih),$r.stop()};function ve(O){O.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),C=!0}function Ge(){console.log("THREE.WebGLRenderer: Context Restored."),C=!1;const O=it.autoReset,Q=Ke.enabled,oe=Ke.autoUpdate,ae=Ke.needsUpdate,$=Ke.type;be(),it.autoReset=O,Ke.enabled=Q,Ke.autoUpdate=oe,Ke.needsUpdate=ae,Ke.type=$}function Fe(O){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",O.statusMessage)}function ct(O){const Q=O.target;Q.removeEventListener("dispose",ct),Vt(Q)}function Vt(O){on(O),Oe.remove(O)}function on(O){const Q=Oe.get(O).programs;Q!==void 0&&(Q.forEach(function(oe){Ze.releaseProgram(oe)}),O.isShaderMaterial&&Ze.releaseShaderCache(O))}this.renderBufferDirect=function(O,Q,oe,ae,$,Pe){Q===null&&(Q=lt);const ke=$.isMesh&&$.matrixWorld.determinant()<0,$e=E0(O,Q,oe,ae,$);Te.setMaterial(ae,ke);let tt=oe.index,vt=1;if(ae.wireframe===!0){if(tt=Se.getWireframeAttribute(oe),tt===void 0)return;vt=2}const xt=oe.drawRange,nt=oe.attributes.position;let It=xt.start*vt,zt=(xt.start+xt.count)*vt;Pe!==null&&(It=Math.max(It,Pe.start*vt),zt=Math.min(zt,(Pe.start+Pe.count)*vt)),tt!==null?(It=Math.max(It,0),zt=Math.min(zt,tt.count)):nt!=null&&(It=Math.max(It,0),zt=Math.min(zt,nt.count));const ft=zt-It;if(ft<0||ft===1/0)return;Ue.setup($,ae,$e,oe,tt);let wt,Pt=Je;if(tt!==null&&(wt=fe.get(tt),Pt=K,Pt.setIndex(wt)),$.isMesh)ae.wireframe===!0?(Te.setLineWidth(ae.wireframeLinewidth*Ae()),Pt.setMode(V.LINES)):Pt.setMode(V.TRIANGLES);else if($.isLine){let He=ae.linewidth;He===void 0&&(He=1),Te.setLineWidth(He*Ae()),$.isLineSegments?Pt.setMode(V.LINES):$.isLineLoop?Pt.setMode(V.LINE_LOOP):Pt.setMode(V.LINE_STRIP)}else $.isPoints?Pt.setMode(V.POINTS):$.isSprite&&Pt.setMode(V.TRIANGLES);if($.isBatchedMesh)if($._multiDrawInstances!==null)Pt.renderMultiDrawInstances($._multiDrawStarts,$._multiDrawCounts,$._multiDrawCount,$._multiDrawInstances);else if(Me.get("WEBGL_multi_draw"))Pt.renderMultiDraw($._multiDrawStarts,$._multiDrawCounts,$._multiDrawCount);else{const He=$._multiDrawStarts,un=$._multiDrawCounts,Dt=$._multiDrawCount,Jn=tt?fe.get(tt).bytesPerElement:1,Cn=Oe.get(ae).currentProgram.getUniforms();for(let Kn=0;Kn<Dt;Kn++)Cn.setValue(V,"_gl_DrawID",Kn),Pt.render(He[Kn]/Jn,un[Kn])}else if($.isInstancedMesh)Pt.renderInstances(It,ft,$.count);else if(oe.isInstancedBufferGeometry){const He=oe._maxInstanceCount!==void 0?oe._maxInstanceCount:1/0,un=Math.min(oe.instanceCount,He);Pt.renderInstances(It,ft,un)}else Pt.render(It,ft)};function Lt(O,Q,oe){O.transparent===!0&&O.side===Cr&&O.forceSinglePass===!1?(O.side=ri,O.needsUpdate=!0,Bl(O,Q,oe),O.side=Kr,O.needsUpdate=!0,Bl(O,Q,oe),O.side=Cr):Bl(O,Q,oe)}this.compile=function(O,Q,oe=null){oe===null&&(oe=O),g=Ct.get(oe),g.init(Q),M.push(g),oe.traverseVisible(function($){$.isLight&&$.layers.test(Q.layers)&&(g.pushLight($),$.castShadow&&g.pushShadow($))}),O!==oe&&O.traverseVisible(function($){$.isLight&&$.layers.test(Q.layers)&&(g.pushLight($),$.castShadow&&g.pushShadow($))}),g.setupLights();const ae=new Set;return O.traverse(function($){if(!($.isMesh||$.isPoints||$.isLine||$.isSprite))return;const Pe=$.material;if(Pe)if(Array.isArray(Pe))for(let ke=0;ke<Pe.length;ke++){const $e=Pe[ke];Lt($e,oe,$),ae.add($e)}else Lt(Pe,oe,$),ae.add(Pe)}),M.pop(),g=null,ae},this.compileAsync=function(O,Q,oe=null){const ae=this.compile(O,Q,oe);return new Promise($=>{function Pe(){if(ae.forEach(function(ke){Oe.get(ke).currentProgram.isReady()&&ae.delete(ke)}),ae.size===0){$(O);return}setTimeout(Pe,10)}Me.get("KHR_parallel_shader_compile")!==null?Pe():setTimeout(Pe,10)})};let Ln=null;function ui(O){Ln&&Ln(O)}function Rh(){$r.stop()}function Ih(){$r.start()}const $r=new DI;$r.setAnimationLoop(ui),typeof self<"u"&&$r.setContext(self),this.setAnimationLoop=function(O){Ln=O,ce.setAnimationLoop(O),O===null?$r.stop():$r.start()},ce.addEventListener("sessionstart",Rh),ce.addEventListener("sessionend",Ih),this.render=function(O,Q){if(Q!==void 0&&Q.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(C===!0)return;if(O.matrixWorldAutoUpdate===!0&&O.updateMatrixWorld(),Q.parent===null&&Q.matrixWorldAutoUpdate===!0&&Q.updateMatrixWorld(),ce.enabled===!0&&ce.isPresenting===!0&&(ce.cameraAutoUpdate===!0&&ce.updateCamera(Q),Q=ce.getCamera()),O.isScene===!0&&O.onBeforeRender(w,O,Q,B),g=Ct.get(O,M.length),g.init(Q),M.push(g),qe.multiplyMatrices(Q.projectionMatrix,Q.matrixWorldInverse),re.setFromProjectionMatrix(qe),Ee=this.localClippingEnabled,xe=we.init(this.clippingPlanes,Ee),x=je.get(O,_.length),x.init(),_.push(x),ce.enabled===!0&&ce.isPresenting===!0){const Pe=w.xr.getDepthSensingMesh();Pe!==null&&ha(Pe,Q,-1/0,w.sortObjects)}ha(O,Q,0,w.sortObjects),x.finish(),w.sortObjects===!0&&x.sort(W,j),ye=ce.enabled===!1||ce.isPresenting===!1||ce.hasDepthSensing()===!1,ye&&ut.addToRenderList(x,O),this.info.render.frame++,xe===!0&&we.beginShadows();const oe=g.state.shadowsArray;Ke.render(oe,O,Q),xe===!0&&we.endShadows(),this.info.autoReset===!0&&this.info.reset();const ae=x.opaque,$=x.transmissive;if(g.setupLights(),Q.isArrayCamera){const Pe=Q.cameras;if($.length>0)for(let ke=0,$e=Pe.length;ke<$e;ke++){const tt=Pe[ke];ho(ae,$,O,tt)}ye&&ut.render(O);for(let ke=0,$e=Pe.length;ke<$e;ke++){const tt=Pe[ke];Ph(x,O,tt,tt.viewport)}}else $.length>0&&ho(ae,$,O,Q),ye&&ut.render(O),Ph(x,O,Q);B!==null&&(k.updateMultisampleRenderTarget(B),k.updateRenderTargetMipmap(B)),O.isScene===!0&&O.onAfterRender(w,O,Q),Ue.resetDefaultState(),I=-1,b=null,M.pop(),M.length>0?(g=M[M.length-1],xe===!0&&we.setGlobalState(w.clippingPlanes,g.state.camera)):g=null,_.pop(),_.length>0?x=_[_.length-1]:x=null};function ha(O,Q,oe,ae){if(O.visible===!1)return;if(O.layers.test(Q.layers)){if(O.isGroup)oe=O.renderOrder;else if(O.isLOD)O.autoUpdate===!0&&O.update(Q);else if(O.isLight)g.pushLight(O),O.castShadow&&g.pushShadow(O);else if(O.isSprite){if(!O.frustumCulled||re.intersectsSprite(O)){ae&&at.setFromMatrixPosition(O.matrixWorld).applyMatrix4(qe);const ke=ge.update(O),$e=O.material;$e.visible&&x.push(O,ke,$e,oe,at.z,null)}}else if((O.isMesh||O.isLine||O.isPoints)&&(!O.frustumCulled||re.intersectsObject(O))){const ke=ge.update(O),$e=O.material;if(ae&&(O.boundingSphere!==void 0?(O.boundingSphere===null&&O.computeBoundingSphere(),at.copy(O.boundingSphere.center)):(ke.boundingSphere===null&&ke.computeBoundingSphere(),at.copy(ke.boundingSphere.center)),at.applyMatrix4(O.matrixWorld).applyMatrix4(qe)),Array.isArray($e)){const tt=ke.groups;for(let vt=0,xt=tt.length;vt<xt;vt++){const nt=tt[vt],It=$e[nt.materialIndex];It&&It.visible&&x.push(O,ke,It,oe,at.z,nt)}}else $e.visible&&x.push(O,ke,$e,oe,at.z,null)}}const Pe=O.children;for(let ke=0,$e=Pe.length;ke<$e;ke++)ha(Pe[ke],Q,oe,ae)}function Ph(O,Q,oe,ae){const $=O.opaque,Pe=O.transmissive,ke=O.transparent;g.setupLightsView(oe),xe===!0&&we.setGlobalState(w.clippingPlanes,oe),ae&&Te.viewport(U.copy(ae)),$.length>0&&Pl($,Q,oe),Pe.length>0&&Pl(Pe,Q,oe),ke.length>0&&Pl(ke,Q,oe),Te.buffers.depth.setTest(!0),Te.buffers.depth.setMask(!0),Te.buffers.color.setMask(!0),Te.setPolygonOffset(!1)}function ho(O,Q,oe,ae){if((oe.isScene===!0?oe.overrideMaterial:null)!==null)return;g.state.transmissionRenderTarget[ae.id]===void 0&&(g.state.transmissionRenderTarget[ae.id]=new ai(1,1,{generateMipmaps:!0,type:Me.has("EXT_color_buffer_half_float")||Me.has("EXT_color_buffer_float")?aa:Qr,minFilter:Yi,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Ft.workingColorSpace}));const Pe=g.state.transmissionRenderTarget[ae.id],ke=ae.viewport||U;Pe.setSize(ke.z,ke.w);const $e=w.getRenderTarget();w.setRenderTarget(Pe),w.getClearColor(ee),ne=w.getClearAlpha(),ne<1&&w.setClearColor(16777215,.5),w.clear(),ye&&ut.render(oe);const tt=w.toneMapping;w.toneMapping=ms;const vt=ae.viewport;if(ae.viewport!==void 0&&(ae.viewport=void 0),g.setupLightsView(ae),xe===!0&&we.setGlobalState(w.clippingPlanes,ae),Pl(O,oe,ae),k.updateMultisampleRenderTarget(Pe),k.updateRenderTargetMipmap(Pe),Me.has("WEBGL_multisampled_render_to_texture")===!1){let xt=!1;for(let nt=0,It=Q.length;nt<It;nt++){const zt=Q[nt],ft=zt.object,wt=zt.geometry,Pt=zt.material,He=zt.group;if(Pt.side===Cr&&ft.layers.test(ae.layers)){const un=Pt.side;Pt.side=ri,Pt.needsUpdate=!0,Bh(ft,oe,ae,wt,Pt,He),Pt.side=un,Pt.needsUpdate=!0,xt=!0}}xt===!0&&(k.updateMultisampleRenderTarget(Pe),k.updateRenderTargetMipmap(Pe))}w.setRenderTarget($e),w.setClearColor(ee,ne),vt!==void 0&&(ae.viewport=vt),w.toneMapping=tt}function Pl(O,Q,oe){const ae=Q.isScene===!0?Q.overrideMaterial:null;for(let $=0,Pe=O.length;$<Pe;$++){const ke=O[$],$e=ke.object,tt=ke.geometry,vt=ae===null?ke.material:ae,xt=ke.group;$e.layers.test(oe.layers)&&Bh($e,Q,oe,tt,vt,xt)}}function Bh(O,Q,oe,ae,$,Pe){O.onBeforeRender(w,Q,oe,ae,$,Pe),O.modelViewMatrix.multiplyMatrices(oe.matrixWorldInverse,O.matrixWorld),O.normalMatrix.getNormalMatrix(O.modelViewMatrix),$.onBeforeRender(w,Q,oe,ae,O,Pe),$.transparent===!0&&$.side===Cr&&$.forceSinglePass===!1?($.side=ri,$.needsUpdate=!0,w.renderBufferDirect(oe,Q,ae,$,O,Pe),$.side=Kr,$.needsUpdate=!0,w.renderBufferDirect(oe,Q,ae,$,O,Pe),$.side=Cr):w.renderBufferDirect(oe,Q,ae,$,O,Pe),O.onAfterRender(w,Q,oe,ae,$,Pe)}function Bl(O,Q,oe){Q.isScene!==!0&&(Q=lt);const ae=Oe.get(O),$=g.state.lights,Pe=g.state.shadowsArray,ke=$.state.version,$e=Ze.getParameters(O,$.state,Pe,Q,oe),tt=Ze.getProgramCacheKey($e);let vt=ae.programs;ae.environment=O.isMeshStandardMaterial?Q.environment:null,ae.fog=Q.fog,ae.envMap=(O.isMeshStandardMaterial?ie:F).get(O.envMap||ae.environment),ae.envMapRotation=ae.environment!==null&&O.envMap===null?Q.environmentRotation:O.envMapRotation,vt===void 0&&(O.addEventListener("dispose",ct),vt=new Map,ae.programs=vt);let xt=vt.get(tt);if(xt!==void 0){if(ae.currentProgram===xt&&ae.lightsStateVersion===ke)return Dh(O,$e),xt}else $e.uniforms=Ze.getUniforms(O),O.onBeforeCompile($e,w),xt=Ze.acquireProgram($e,tt),vt.set(tt,xt),ae.uniforms=$e.uniforms;const nt=ae.uniforms;return(!O.isShaderMaterial&&!O.isRawShaderMaterial||O.clipping===!0)&&(nt.clippingPlanes=we.uniform),Dh(O,$e),ae.needsLights=Nh(O),ae.lightsStateVersion=ke,ae.needsLights&&(nt.ambientLightColor.value=$.state.ambient,nt.lightProbe.value=$.state.probe,nt.directionalLights.value=$.state.directional,nt.directionalLightShadows.value=$.state.directionalShadow,nt.spotLights.value=$.state.spot,nt.spotLightShadows.value=$.state.spotShadow,nt.rectAreaLights.value=$.state.rectArea,nt.ltc_1.value=$.state.rectAreaLTC1,nt.ltc_2.value=$.state.rectAreaLTC2,nt.pointLights.value=$.state.point,nt.pointLightShadows.value=$.state.pointShadow,nt.hemisphereLights.value=$.state.hemi,nt.directionalShadowMap.value=$.state.directionalShadowMap,nt.directionalShadowMatrix.value=$.state.directionalShadowMatrix,nt.spotShadowMap.value=$.state.spotShadowMap,nt.spotLightMatrix.value=$.state.spotLightMatrix,nt.spotLightMap.value=$.state.spotLightMap,nt.pointShadowMap.value=$.state.pointShadowMap,nt.pointShadowMatrix.value=$.state.pointShadowMatrix),ae.currentProgram=xt,ae.uniformsList=null,xt}function Lh(O){if(O.uniformsList===null){const Q=O.currentProgram.getUniforms();O.uniformsList=am.seqWithValue(Q.seq,O.uniforms)}return O.uniformsList}function Dh(O,Q){const oe=Oe.get(O);oe.outputColorSpace=Q.outputColorSpace,oe.batching=Q.batching,oe.batchingColor=Q.batchingColor,oe.instancing=Q.instancing,oe.instancingColor=Q.instancingColor,oe.instancingMorph=Q.instancingMorph,oe.skinning=Q.skinning,oe.morphTargets=Q.morphTargets,oe.morphNormals=Q.morphNormals,oe.morphColors=Q.morphColors,oe.morphTargetsCount=Q.morphTargetsCount,oe.numClippingPlanes=Q.numClippingPlanes,oe.numIntersection=Q.numClipIntersection,oe.vertexAlphas=Q.vertexAlphas,oe.vertexTangents=Q.vertexTangents,oe.toneMapping=Q.toneMapping}function E0(O,Q,oe,ae,$){Q.isScene!==!0&&(Q=lt),k.resetTextureUnits();const Pe=Q.fog,ke=ae.isMeshStandardMaterial?Q.environment:null,$e=B===null?w.outputColorSpace:B.isXRRenderTarget===!0?B.texture.colorSpace:bi,tt=(ae.isMeshStandardMaterial?ie:F).get(ae.envMap||ke),vt=ae.vertexColors===!0&&!!oe.attributes.color&&oe.attributes.color.itemSize===4,xt=!!oe.attributes.tangent&&(!!ae.normalMap||ae.anisotropy>0),nt=!!oe.morphAttributes.position,It=!!oe.morphAttributes.normal,zt=!!oe.morphAttributes.color;let ft=ms;ae.toneMapped&&(B===null||B.isXRRenderTarget===!0)&&(ft=w.toneMapping);const wt=oe.morphAttributes.position||oe.morphAttributes.normal||oe.morphAttributes.color,Pt=wt!==void 0?wt.length:0,He=Oe.get(ae),un=g.state.lights;if(xe===!0&&(Ee===!0||O!==b)){const dn=O===b&&ae.id===I;we.setState(ae,O,dn)}let Dt=!1;ae.version===He.__version?(He.needsLights&&He.lightsStateVersion!==un.state.version||He.outputColorSpace!==$e||$.isBatchedMesh&&He.batching===!1||!$.isBatchedMesh&&He.batching===!0||$.isBatchedMesh&&He.batchingColor===!0&&$.colorTexture===null||$.isBatchedMesh&&He.batchingColor===!1&&$.colorTexture!==null||$.isInstancedMesh&&He.instancing===!1||!$.isInstancedMesh&&He.instancing===!0||$.isSkinnedMesh&&He.skinning===!1||!$.isSkinnedMesh&&He.skinning===!0||$.isInstancedMesh&&He.instancingColor===!0&&$.instanceColor===null||$.isInstancedMesh&&He.instancingColor===!1&&$.instanceColor!==null||$.isInstancedMesh&&He.instancingMorph===!0&&$.morphTexture===null||$.isInstancedMesh&&He.instancingMorph===!1&&$.morphTexture!==null||He.envMap!==tt||ae.fog===!0&&He.fog!==Pe||He.numClippingPlanes!==void 0&&(He.numClippingPlanes!==we.numPlanes||He.numIntersection!==we.numIntersection)||He.vertexAlphas!==vt||He.vertexTangents!==xt||He.morphTargets!==nt||He.morphNormals!==It||He.morphColors!==zt||He.toneMapping!==ft||He.morphTargetsCount!==Pt)&&(Dt=!0):(Dt=!0,He.__version=ae.version);let Jn=He.currentProgram;Dt===!0&&(Jn=Bl(ae,Q,$));let Cn=!1,Kn=!1,fo=!1;const Zt=Jn.getUniforms(),Ci=He.uniforms;if(Te.useProgram(Jn.program)&&(Cn=!0,Kn=!0,fo=!0),ae.id!==I&&(I=ae.id,Kn=!0),Cn||b!==O){Te.buffers.depth.getReversed()?(_e.copy(O.projectionMatrix),gF(_e),vF(_e),Zt.setValue(V,"projectionMatrix",_e)):Zt.setValue(V,"projectionMatrix",O.projectionMatrix),Zt.setValue(V,"viewMatrix",O.matrixWorldInverse);const es=Zt.map.cameraPosition;es!==void 0&&es.setValue(V,rt.setFromMatrixPosition(O.matrixWorld)),De.logarithmicDepthBuffer&&Zt.setValue(V,"logDepthBufFC",2/(Math.log(O.far+1)/Math.LN2)),(ae.isMeshPhongMaterial||ae.isMeshToonMaterial||ae.isMeshLambertMaterial||ae.isMeshBasicMaterial||ae.isMeshStandardMaterial||ae.isShaderMaterial)&&Zt.setValue(V,"isOrthographic",O.isOrthographicCamera===!0),b!==O&&(b=O,Kn=!0,fo=!0)}if($.isSkinnedMesh){Zt.setOptional(V,$,"bindMatrix"),Zt.setOptional(V,$,"bindMatrixInverse");const dn=$.skeleton;dn&&(dn.boneTexture===null&&dn.computeBoneTexture(),Zt.setValue(V,"boneTexture",dn.boneTexture,k))}$.isBatchedMesh&&(Zt.setOptional(V,$,"batchingTexture"),Zt.setValue(V,"batchingTexture",$._matricesTexture,k),Zt.setOptional(V,$,"batchingIdTexture"),Zt.setValue(V,"batchingIdTexture",$._indirectTexture,k),Zt.setOptional(V,$,"batchingColorTexture"),$._colorsTexture!==null&&Zt.setValue(V,"batchingColorTexture",$._colorsTexture,k));const po=oe.morphAttributes;if((po.position!==void 0||po.normal!==void 0||po.color!==void 0)&&mt.update($,oe,Jn),(Kn||He.receiveShadow!==$.receiveShadow)&&(He.receiveShadow=$.receiveShadow,Zt.setValue(V,"receiveShadow",$.receiveShadow)),ae.isMeshGouraudMaterial&&ae.envMap!==null&&(Ci.envMap.value=tt,Ci.flipEnvMap.value=tt.isCubeTexture&&tt.isRenderTargetTexture===!1?-1:1),ae.isMeshStandardMaterial&&ae.envMap===null&&Q.environment!==null&&(Ci.envMapIntensity.value=Q.environmentIntensity),Kn&&(Zt.setValue(V,"toneMappingExposure",w.toneMappingExposure),He.needsLights&&b0(Ci,fo),Pe&&ae.fog===!0&&Le.refreshFogUniforms(Ci,Pe),Le.refreshMaterialUniforms(Ci,ae,D,le,g.state.transmissionRenderTarget[O.id]),am.upload(V,Lh(He),Ci,k)),ae.isShaderMaterial&&ae.uniformsNeedUpdate===!0&&(am.upload(V,Lh(He),Ci,k),ae.uniformsNeedUpdate=!1),ae.isSpriteMaterial&&Zt.setValue(V,"center",$.center),Zt.setValue(V,"modelViewMatrix",$.modelViewMatrix),Zt.setValue(V,"normalMatrix",$.normalMatrix),Zt.setValue(V,"modelMatrix",$.matrixWorld),ae.isShaderMaterial||ae.isRawShaderMaterial){const dn=ae.uniformsGroups;for(let es=0,ts=dn.length;es<ts;es++){const Fh=dn[es];J.update(Fh,Jn),J.bind(Fh,Jn)}}return Jn}function b0(O,Q){O.ambientLightColor.needsUpdate=Q,O.lightProbe.needsUpdate=Q,O.directionalLights.needsUpdate=Q,O.directionalLightShadows.needsUpdate=Q,O.pointLights.needsUpdate=Q,O.pointLightShadows.needsUpdate=Q,O.spotLights.needsUpdate=Q,O.spotLightShadows.needsUpdate=Q,O.rectAreaLights.needsUpdate=Q,O.hemisphereLights.needsUpdate=Q}function Nh(O){return O.isMeshLambertMaterial||O.isMeshToonMaterial||O.isMeshPhongMaterial||O.isMeshStandardMaterial||O.isShadowMaterial||O.isShaderMaterial&&O.lights===!0}this.getActiveCubeFace=function(){return R},this.getActiveMipmapLevel=function(){return P},this.getRenderTarget=function(){return B},this.setRenderTargetTextures=function(O,Q,oe){Oe.get(O.texture).__webglTexture=Q,Oe.get(O.depthTexture).__webglTexture=oe;const ae=Oe.get(O);ae.__hasExternalTextures=!0,ae.__autoAllocateDepthBuffer=oe===void 0,ae.__autoAllocateDepthBuffer||Me.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ae.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(O,Q){const oe=Oe.get(O);oe.__webglFramebuffer=Q,oe.__useDefaultFramebuffer=Q===void 0},this.setRenderTarget=function(O,Q=0,oe=0){B=O,R=Q,P=oe;let ae=!0,$=null,Pe=!1,ke=!1;if(O){const tt=Oe.get(O);if(tt.__useDefaultFramebuffer!==void 0)Te.bindFramebuffer(V.FRAMEBUFFER,null),ae=!1;else if(tt.__webglFramebuffer===void 0)k.setupRenderTarget(O);else if(tt.__hasExternalTextures)k.rebindTextures(O,Oe.get(O.texture).__webglTexture,Oe.get(O.depthTexture).__webglTexture);else if(O.depthBuffer){const nt=O.depthTexture;if(tt.__boundDepthTexture!==nt){if(nt!==null&&Oe.has(nt)&&(O.width!==nt.image.width||O.height!==nt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");k.setupDepthRenderbuffer(O)}}const vt=O.texture;(vt.isData3DTexture||vt.isDataArrayTexture||vt.isCompressedArrayTexture)&&(ke=!0);const xt=Oe.get(O).__webglFramebuffer;O.isWebGLCubeRenderTarget?(Array.isArray(xt[Q])?$=xt[Q][oe]:$=xt[Q],Pe=!0):O.samples>0&&k.useMultisampledRTT(O)===!1?$=Oe.get(O).__webglMultisampledFramebuffer:Array.isArray(xt)?$=xt[oe]:$=xt,U.copy(O.viewport),H.copy(O.scissor),X=O.scissorTest}else U.copy(Z).multiplyScalar(D).floor(),H.copy(me).multiplyScalar(D).floor(),X=Be;if(Te.bindFramebuffer(V.FRAMEBUFFER,$)&&ae&&Te.drawBuffers(O,$),Te.viewport(U),Te.scissor(H),Te.setScissorTest(X),Pe){const tt=Oe.get(O.texture);V.framebufferTexture2D(V.FRAMEBUFFER,V.COLOR_ATTACHMENT0,V.TEXTURE_CUBE_MAP_POSITIVE_X+Q,tt.__webglTexture,oe)}else if(ke){const tt=Oe.get(O.texture),vt=Q||0;V.framebufferTextureLayer(V.FRAMEBUFFER,V.COLOR_ATTACHMENT0,tt.__webglTexture,oe||0,vt)}I=-1},this.readRenderTargetPixels=function(O,Q,oe,ae,$,Pe,ke){if(!(O&&O.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let $e=Oe.get(O).__webglFramebuffer;if(O.isWebGLCubeRenderTarget&&ke!==void 0&&($e=$e[ke]),$e){Te.bindFramebuffer(V.FRAMEBUFFER,$e);try{const tt=O.texture,vt=tt.format,xt=tt.type;if(!De.textureFormatReadable(vt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!De.textureTypeReadable(xt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Q>=0&&Q<=O.width-ae&&oe>=0&&oe<=O.height-$&&V.readPixels(Q,oe,ae,$,pe.convert(vt),pe.convert(xt),Pe)}finally{const tt=B!==null?Oe.get(B).__webglFramebuffer:null;Te.bindFramebuffer(V.FRAMEBUFFER,tt)}}},this.readRenderTargetPixelsAsync=async function(O,Q,oe,ae,$,Pe,ke){if(!(O&&O.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let $e=Oe.get(O).__webglFramebuffer;if(O.isWebGLCubeRenderTarget&&ke!==void 0&&($e=$e[ke]),$e){const tt=O.texture,vt=tt.format,xt=tt.type;if(!De.textureFormatReadable(vt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!De.textureTypeReadable(xt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(Q>=0&&Q<=O.width-ae&&oe>=0&&oe<=O.height-$){Te.bindFramebuffer(V.FRAMEBUFFER,$e);const nt=V.createBuffer();V.bindBuffer(V.PIXEL_PACK_BUFFER,nt),V.bufferData(V.PIXEL_PACK_BUFFER,Pe.byteLength,V.STREAM_READ),V.readPixels(Q,oe,ae,$,pe.convert(vt),pe.convert(xt),0);const It=B!==null?Oe.get(B).__webglFramebuffer:null;Te.bindFramebuffer(V.FRAMEBUFFER,It);const zt=V.fenceSync(V.SYNC_GPU_COMMANDS_COMPLETE,0);return V.flush(),await mF(V,zt,4),V.bindBuffer(V.PIXEL_PACK_BUFFER,nt),V.getBufferSubData(V.PIXEL_PACK_BUFFER,0,Pe),V.deleteBuffer(nt),V.deleteSync(zt),Pe}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(O,Q=null,oe=0){O.isTexture!==!0&&(dd("WebGLRenderer: copyFramebufferToTexture function signature has changed."),Q=arguments[0]||null,O=arguments[1]);const ae=Math.pow(2,-oe),$=Math.floor(O.image.width*ae),Pe=Math.floor(O.image.height*ae),ke=Q!==null?Q.x:0,$e=Q!==null?Q.y:0;k.setTexture2D(O,0),V.copyTexSubImage2D(V.TEXTURE_2D,oe,0,0,ke,$e,$,Pe),Te.unbindTexture()},this.copyTextureToTexture=function(O,Q,oe=null,ae=null,$=0){O.isTexture!==!0&&(dd("WebGLRenderer: copyTextureToTexture function signature has changed."),ae=arguments[0]||null,O=arguments[1],Q=arguments[2],$=arguments[3]||0,oe=null);let Pe,ke,$e,tt,vt,xt,nt,It,zt;const ft=O.isCompressedTexture?O.mipmaps[$]:O.image;oe!==null?(Pe=oe.max.x-oe.min.x,ke=oe.max.y-oe.min.y,$e=oe.isBox3?oe.max.z-oe.min.z:1,tt=oe.min.x,vt=oe.min.y,xt=oe.isBox3?oe.min.z:0):(Pe=ft.width,ke=ft.height,$e=ft.depth||1,tt=0,vt=0,xt=0),ae!==null?(nt=ae.x,It=ae.y,zt=ae.z):(nt=0,It=0,zt=0);const wt=pe.convert(Q.format),Pt=pe.convert(Q.type);let He;Q.isData3DTexture?(k.setTexture3D(Q,0),He=V.TEXTURE_3D):Q.isDataArrayTexture||Q.isCompressedArrayTexture?(k.setTexture2DArray(Q,0),He=V.TEXTURE_2D_ARRAY):(k.setTexture2D(Q,0),He=V.TEXTURE_2D),V.pixelStorei(V.UNPACK_FLIP_Y_WEBGL,Q.flipY),V.pixelStorei(V.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Q.premultiplyAlpha),V.pixelStorei(V.UNPACK_ALIGNMENT,Q.unpackAlignment);const un=V.getParameter(V.UNPACK_ROW_LENGTH),Dt=V.getParameter(V.UNPACK_IMAGE_HEIGHT),Jn=V.getParameter(V.UNPACK_SKIP_PIXELS),Cn=V.getParameter(V.UNPACK_SKIP_ROWS),Kn=V.getParameter(V.UNPACK_SKIP_IMAGES);V.pixelStorei(V.UNPACK_ROW_LENGTH,ft.width),V.pixelStorei(V.UNPACK_IMAGE_HEIGHT,ft.height),V.pixelStorei(V.UNPACK_SKIP_PIXELS,tt),V.pixelStorei(V.UNPACK_SKIP_ROWS,vt),V.pixelStorei(V.UNPACK_SKIP_IMAGES,xt);const fo=O.isDataArrayTexture||O.isData3DTexture,Zt=Q.isDataArrayTexture||Q.isData3DTexture;if(O.isRenderTargetTexture||O.isDepthTexture){const Ci=Oe.get(O),po=Oe.get(Q),dn=Oe.get(Ci.__renderTarget),es=Oe.get(po.__renderTarget);Te.bindFramebuffer(V.READ_FRAMEBUFFER,dn.__webglFramebuffer),Te.bindFramebuffer(V.DRAW_FRAMEBUFFER,es.__webglFramebuffer);for(let ts=0;ts<$e;ts++)fo&&V.framebufferTextureLayer(V.READ_FRAMEBUFFER,V.COLOR_ATTACHMENT0,Oe.get(O).__webglTexture,$,xt+ts),O.isDepthTexture?(Zt&&V.framebufferTextureLayer(V.DRAW_FRAMEBUFFER,V.COLOR_ATTACHMENT0,Oe.get(Q).__webglTexture,$,zt+ts),V.blitFramebuffer(tt,vt,Pe,ke,nt,It,Pe,ke,V.DEPTH_BUFFER_BIT,V.NEAREST)):Zt?V.copyTexSubImage3D(He,$,nt,It,zt+ts,tt,vt,Pe,ke):V.copyTexSubImage2D(He,$,nt,It,zt+ts,tt,vt,Pe,ke);Te.bindFramebuffer(V.READ_FRAMEBUFFER,null),Te.bindFramebuffer(V.DRAW_FRAMEBUFFER,null)}else Zt?O.isDataTexture||O.isData3DTexture?V.texSubImage3D(He,$,nt,It,zt,Pe,ke,$e,wt,Pt,ft.data):Q.isCompressedArrayTexture?V.compressedTexSubImage3D(He,$,nt,It,zt,Pe,ke,$e,wt,ft.data):V.texSubImage3D(He,$,nt,It,zt,Pe,ke,$e,wt,Pt,ft):O.isDataTexture?V.texSubImage2D(V.TEXTURE_2D,$,nt,It,Pe,ke,wt,Pt,ft.data):O.isCompressedTexture?V.compressedTexSubImage2D(V.TEXTURE_2D,$,nt,It,ft.width,ft.height,wt,ft.data):V.texSubImage2D(V.TEXTURE_2D,$,nt,It,Pe,ke,wt,Pt,ft);V.pixelStorei(V.UNPACK_ROW_LENGTH,un),V.pixelStorei(V.UNPACK_IMAGE_HEIGHT,Dt),V.pixelStorei(V.UNPACK_SKIP_PIXELS,Jn),V.pixelStorei(V.UNPACK_SKIP_ROWS,Cn),V.pixelStorei(V.UNPACK_SKIP_IMAGES,Kn),$===0&&Q.generateMipmaps&&V.generateMipmap(He),Te.unbindTexture()},this.copyTextureToTexture3D=function(O,Q,oe=null,ae=null,$=0){return O.isTexture!==!0&&(dd("WebGLRenderer: copyTextureToTexture3D function signature has changed."),oe=arguments[0]||null,ae=arguments[1]||null,O=arguments[2],Q=arguments[3],$=arguments[4]||0),dd('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(O,Q,oe,ae,$)},this.initRenderTarget=function(O){Oe.get(O).__webglFramebuffer===void 0&&k.setupRenderTarget(O)},this.initTexture=function(O){O.isCubeTexture?k.setTextureCube(O,0):O.isData3DTexture?k.setTexture3D(O,0):O.isDataArrayTexture||O.isCompressedArrayTexture?k.setTexture2DArray(O,0):k.setTexture2D(O,0),Te.unbindTexture()},this.resetState=function(){R=0,P=0,B=null,Te.reset(),Ue.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return hs}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorspace=Ft._getDrawingBufferColorSpace(e),t.unpackColorSpace=Ft._getUnpackColorSpace()}}class Zg{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Ie(e),this.density=t}clone(){return new Zg(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class $g{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new Ie(e),this.near=t,this.far=i}clone(){return new $g(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class $A extends Rt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Fi,this.environmentIntensity=1,this.environmentRotation=new Fi,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class au{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Zd,this.updateRanges=[],this.version=0,this.uuid=lr()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=lr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=lr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ii=new N;class so{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Ii.fromBufferAttribute(this,t),Ii.applyMatrix4(e),this.setXYZ(t,Ii.x,Ii.y,Ii.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Ii.fromBufferAttribute(this,t),Ii.applyNormalMatrix(e),this.setXYZ(t,Ii.x,Ii.y,Ii.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Ii.fromBufferAttribute(this,t),Ii.transformDirection(e),this.setXYZ(t,Ii.x,Ii.y,Ii.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=Li(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Mt(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=Mt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Mt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Mt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Mt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Li(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Li(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Li(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Li(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Mt(t,this.array),i=Mt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Mt(t,this.array),i=Mt(i,this.array),r=Mt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Mt(t,this.array),i=Mt(i,this.array),r=Mt(r,this.array),s=Mt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new yt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new so(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class eS extends pn{static get type(){return"SpriteMaterial"}constructor(e){super(),this.isSpriteMaterial=!0,this.color=new Ie(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let sc;const Vu=new N,oc=new N,ac=new N,lc=new ue,Wu=new ue,GI=new Xe,fp=new N,ju=new N,pp=new N,mE=new ue,Iy=new ue,gE=new ue;class VI extends Rt{constructor(e=new eS){if(super(),this.isSprite=!0,this.type="Sprite",sc===void 0){sc=new gt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new au(t,5);sc.setIndex([0,1,2,0,2,3]),sc.setAttribute("position",new so(i,3,0,!1)),sc.setAttribute("uv",new so(i,2,3,!1))}this.geometry=sc,this.material=e,this.center=new ue(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),oc.setFromMatrixScale(this.matrixWorld),GI.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),ac.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&oc.multiplyScalar(-ac.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;mp(fp.set(-.5,-.5,0),ac,o,oc,r,s),mp(ju.set(.5,-.5,0),ac,o,oc,r,s),mp(pp.set(.5,.5,0),ac,o,oc,r,s),mE.set(0,0),Iy.set(1,0),gE.set(1,1);let a=e.ray.intersectTriangle(fp,ju,pp,!1,Vu);if(a===null&&(mp(ju.set(-.5,.5,0),ac,o,oc,r,s),Iy.set(0,1),a=e.ray.intersectTriangle(fp,pp,ju,!1,Vu),a===null))return;const l=e.ray.origin.distanceTo(Vu);l<e.near||l>e.far||t.push({distance:l,point:Vu.clone(),uv:Si.getInterpolation(Vu,fp,ju,pp,mE,Iy,gE,new ue),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function mp(n,e,t,i,r,s){lc.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(Wu.x=s*lc.x-r*lc.y,Wu.y=r*lc.x+s*lc.y):Wu.copy(lc),n.copy(e),n.x+=Wu.x,n.y+=Wu.y,n.applyMatrix4(GI)}const gp=new N,vE=new N;class WI extends Rt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let i=0;i<t.length;i++)if(t[i].distance===e){const r=t.splice(i,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){gp.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(gp);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){gp.setFromMatrixPosition(e.matrixWorld),vE.setFromMatrixPosition(this.matrixWorld);const i=gp.distanceTo(vE)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),i>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const yE=new N,xE=new Gt,_E=new Gt,Iz=new N,AE=new Xe,vp=new N,Py=new Hn,SE=new Xe,By=new _s;class e0 extends Yt{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=y_,this.bindMatrix=new Xe,this.bindMatrixInverse=new Xe,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new si),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,vp),this.boundingBox.expandByPoint(vp)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Hn),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,vp),this.boundingSphere.expandByPoint(vp)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Py.copy(this.boundingSphere),Py.applyMatrix4(r),e.ray.intersectsSphere(Py)!==!1&&(SE.copy(r).invert(),By.copy(e.ray).applyMatrix4(SE),!(this.boundingBox!==null&&By.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,By)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Gt,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===y_?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===dI?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;xE.fromBufferAttribute(r.attributes.skinIndex,e),_E.fromBufferAttribute(r.attributes.skinWeight,e),yE.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=_E.getComponent(s);if(o!==0){const a=xE.getComponent(s);AE.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(Iz.copy(yE).applyMatrix4(AE),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Sh extends Rt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class vs extends tn{constructor(e=null,t=1,i=1,r,s,o,a,l,c=zn,h=zn,f,p){super(null,o,a,l,c,h,r,s,f,p),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const ME=new Xe,Pz=new Xe;class lu{constructor(e=[],t=[]){this.uuid=lr(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Xe)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new Xe;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:Pz;ME.multiplyMatrices(a,t[s]),ME.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new lu(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new vs(t,e,e,Mi,Di);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new Sh),this.bones.push(o),this.boneInverses.push(new Xe().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class ia extends yt{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const cc=new Xe,wE=new Xe,yp=[],EE=new si,Bz=new Xe,Xu=new Yt,Ju=new Hn;class Mh extends Yt{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new ia(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,Bz)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new si),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,cc),EE.copy(e.boundingBox).applyMatrix4(cc),this.boundingBox.union(EE)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Hn),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,cc),Ju.copy(e.boundingSphere).applyMatrix4(cc),this.boundingSphere.union(Ju)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=i.length+1,o=e*s+1;for(let a=0;a<i.length;a++)i[a]=r[o+a]}raycast(e,t){const i=this.matrixWorld,r=this.count;if(Xu.geometry=this.geometry,Xu.material=this.material,Xu.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Ju.copy(this.boundingSphere),Ju.applyMatrix4(i),e.ray.intersectsSphere(Ju)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,cc),wE.multiplyMatrices(i,cc),Xu.matrixWorld=wE,Xu.raycast(e,yp);for(let o=0,a=yp.length;o<a;o++){const l=yp[o];l.instanceId=s,l.object=this,t.push(l)}yp.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new ia(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new vs(new Float32Array(r*this.count),r,this.count,Xg,Di));const s=this.morphTexture.source.data.data;let o=0;for(let c=0;c<i.length;c++)o+=i[c];const a=this.geometry.morphTargetsRelative?1:1-o,l=r*e;s[l]=a,s.set(i,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function Ly(n,e){return n-e}function Lz(n,e){return n.z-e.z}function Dz(n,e){return e.z-n.z}class Nz{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i,r){const s=this.pool,o=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const a=s[this.index];o.push(a),this.index++,a.start=e,a.count=t,a.z=i,a.index=r}reset(){this.list.length=0,this.index=0}}const Vi=new Xe,Fz=new Ie(1,1,1),Dy=new _h,xp=new si,Ta=new Hn,Ku=new N,bE=new N,Uz=new N,Ny=new Nz,xi=new Yt,_p=[];function Oz(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let s=0;s<r;s++)for(let o=0;o<i;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*i);e.needsUpdate=!0}function Ra(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)e[i]=n[i]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class jI extends Yt{get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}constructor(e,t,i=t*2,r){super(new gt,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new vs(t,e,e,Mi,Di);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new vs(t,e,e,mh,ro);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new vs(t,e,e,Mi,Di);i.colorSpace=Ft.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:a,itemSize:l,normalized:c}=o,h=new a.constructor(i*l),f=new yt(h,l,c);t.setAttribute(s,f)}if(e.getIndex()!==null){const s=i>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new yt(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error(`BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),s=t.getAttribute(i);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new si);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,Vi),this.getBoundingBoxAt(s,xp).applyMatrix4(Vi),e.union(xp)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Hn);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,Vi),this.getBoundingSphereAt(s,Ta).applyMatrix4(Vi),e.union(Ta)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(Ly),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=i):(r=this._instanceInfo.length,this._instanceInfo.push(i));const s=this._matricesTexture;Vi.identity().toArray(s.image.data,r*16),s.needsUpdate=!0;const o=this._colorsTexture;return o&&(Fz.toArray(o.image.data,r*4),o.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,t=-1,i=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const o=e.getIndex();if(o!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=i===-1?o.count:i),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");let l;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(Ly),l=this._availableGeometryIds.shift(),s[l]=r):(l=this._geometryCount,this._geometryCount++,s.push(r)),this.setGeometryAt(l,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,l}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,s=i.getIndex(),o=t.getIndex(),a=this._geometryInfo[e];if(r&&o.count>a.reservedIndexCount||t.attributes.position.count>a.reservedVertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,c=a.reservedVertexCount;a.vertexCount=t.getAttribute("position").count;for(const h in i.attributes){const f=t.getAttribute(h),p=i.getAttribute(h);Oz(f,p,l);const m=f.itemSize;for(let y=f.count,A=c;y<A;y++){const x=l+y;for(let g=0;g<m;g++)p.setComponent(x,g,0)}p.needsUpdate=!0,p.addUpdateRange(l*m,c*m)}if(r){const h=a.indexStart,f=a.reservedIndexCount;a.indexCount=t.getIndex().count;for(let p=0;p<o.count;p++)s.setX(h+p,l+o.getX(p));for(let p=o.count,m=f;p<m;p++)s.setX(h+p,l);s.needsUpdate=!0,s.addUpdateRange(h,a.reservedIndexCount)}return a.start=r?a.indexStart:a.vertexStart,a.count=r?a.indexCount:a.vertexCount,a.boundingBox=null,t.boundingBox!==null&&(a.boundingBox=t.boundingBox.clone()),a.boundingSphere=null,t.boundingSphere!==null&&(a.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const i=this._instanceInfo;for(let r=0,s=i.length;r<s;r++)i[r].geometryIndex===e&&this.deleteInstance(r);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){const t=this._instanceInfo;return e>=t.length||t[e].active===!1?this:(t[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this)}optimize(){let e=0,t=0;const i=this._geometryInfo,r=i.map((o,a)=>a).sort((o,a)=>i[o].vertexStart-i[a].vertexStart),s=this.geometry;for(let o=0,a=i.length;o<a;o++){const l=r[o],c=i[l];if(c.active!==!1){if(s.index!==null){if(c.indexStart!==t){const{indexStart:h,vertexStart:f,reservedIndexCount:p}=c,m=s.index,y=m.array,A=e-f;for(let x=h;x<h+p;x++)y[x]=y[x]+A;m.array.copyWithin(t,h,h+p),m.addUpdateRange(t,p),c.indexStart=t}t+=c.reservedIndexCount}if(c.vertexStart!==e){const{vertexStart:h,reservedVertexCount:f}=c,p=s.attributes;for(const m in p){const y=p[m],{array:A,itemSize:x}=y;A.copyWithin(e*x,h*x,(h+f)*x),y.addUpdateRange(e*x,f*x)}c.vertexStart=e}e+=c.reservedVertexCount,c.start=s.index?c.indexStart:c.vertexStart,this._nextIndexStart=s.index?c.indexStart+c.reservedIndexCount:0,this._nextVertexStart=c.vertexStart+c.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){const s=new si,o=i.index,a=i.attributes.position;for(let l=r.start,c=r.start+r.count;l<c;l++){let h=l;o&&(h=o.getX(h)),s.expandByPoint(Ku.fromBufferAttribute(a,h))}r.boundingBox=s}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){const s=new Hn;this.getBoundingBoxAt(e,xp),xp.getCenter(s.center);const o=i.index,a=i.attributes.position;let l=0;for(let c=r.start,h=r.start+r.count;c<h;c++){let f=c;o&&(f=o.getX(f)),Ku.fromBufferAttribute(a,f),l=Math.max(l,s.center.distanceToSquared(Ku))}s.radius=Math.sqrt(l),r.boundingSphere=s}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){const i=this._instanceInfo,r=this._matricesTexture,s=this._matricesTexture.image.data;return e>=i.length||i[e].active===!1?this:(t.toArray(s,e*16),r.needsUpdate=!0,this)}getMatrixAt(e,t){const i=this._instanceInfo,r=this._matricesTexture.image.data;return e>=i.length||i[e].active===!1?null:t.fromArray(r,e*16)}setColorAt(e,t){this._colorsTexture===null&&this._initColorsTexture();const i=this._colorsTexture,r=this._colorsTexture.image.data,s=this._instanceInfo;return e>=s.length||s[e].active===!1?this:(t.toArray(r,e*4),i.needsUpdate=!0,this)}getColorAt(e,t){const i=this._colorsTexture.image.data,r=this._instanceInfo;return e>=r.length||r[e].active===!1?null:t.fromArray(i,e*4)}setVisibleAt(e,t){const i=this._instanceInfo;return e>=i.length||i[e].active===!1||i[e].visible===t?this:(i[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._instanceInfo;return e>=t.length||t[e].active===!1?!1:t[e].visible}setGeometryIdAt(e,t){const i=this._instanceInfo,r=this._geometryInfo;return e>=i.length||i[e].active===!1||t>=r.length||r[t].active===!1?null:(i[e].geometryIndex=t,this)}getGeometryIdAt(e){const t=this._instanceInfo;return e>=t.length||t[e].active===!1?-1:t[e].geometryIndex}getGeometryRangeAt(e,t={}){if(e<0||e>=this._geometryCount)return null;const i=this._geometryInfo[e];return t.vertexStart=i.vertexStart,t.vertexCount=i.vertexCount,t.reservedVertexCount=i.reservedVertexCount,t.indexStart=i.indexStart,t.indexCount=i.indexCount,t.reservedIndexCount=i.reservedIndexCount,t.start=i.start,t.count=i.count,t}setInstanceCount(e){const t=this._availableInstanceIds,i=this._instanceInfo;for(t.sort(Ly);t[t.length-1]===i.length;)i.pop(),t.pop();if(e<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),s=new Int32Array(e);Ra(this._multiDrawCounts,r),Ra(this._multiDrawStarts,s),this._multiDrawCounts=r,this._multiDrawStarts=s,this._maxInstanceCount=e;const o=this._indirectTexture,a=this._matricesTexture,l=this._colorsTexture;o.dispose(),this._initIndirectTexture(),Ra(o.image.data,this._indirectTexture.image.data),a.dispose(),this._initMatricesTexture(),Ra(a.image.data,this._matricesTexture.image.data),l&&(l.dispose(),this._initColorsTexture(),Ra(l.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const i=[...this._geometryInfo].filter(a=>a.active);if(Math.max(...i.map(a=>a.vertexStart+a.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(l=>l.indexStart+l.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new gt,this._initializeGeometry(s));const o=this.geometry;s.index&&Ra(s.index.array,o.index.array);for(const a in s.attributes)Ra(s.attributes[a].array,o.attributes[a].array)}raycast(e,t){const i=this._instanceInfo,r=this._geometryInfo,s=this.matrixWorld,o=this.geometry;xi.material=this.material,xi.geometry.index=o.index,xi.geometry.attributes=o.attributes,xi.geometry.boundingBox===null&&(xi.geometry.boundingBox=new si),xi.geometry.boundingSphere===null&&(xi.geometry.boundingSphere=new Hn);for(let a=0,l=i.length;a<l;a++){if(!i[a].visible||!i[a].active)continue;const c=i[a].geometryIndex,h=r[c];xi.geometry.setDrawRange(h.start,h.count),this.getMatrixAt(a,xi.matrixWorld).premultiply(s),this.getBoundingBoxAt(c,xi.geometry.boundingBox),this.getBoundingSphereAt(c,xi.geometry.boundingSphere),xi.raycast(e,_p);for(let f=0,p=_p.length;f<p;f++){const m=_p[f];m.object=this,m.batchId=a,t.push(m)}_p.length=0}xi.material=null,xi.geometry.index=null,xi.geometry.attributes={},xi.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,i,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=r.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._instanceInfo,c=this._multiDrawStarts,h=this._multiDrawCounts,f=this._geometryInfo,p=this.perObjectFrustumCulled,m=this._indirectTexture,y=m.image.data;p&&(Vi.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),Dy.setFromProjectionMatrix(Vi,e.coordinateSystem));let A=0;if(this.sortObjects){Vi.copy(this.matrixWorld).invert(),Ku.setFromMatrixPosition(i.matrixWorld).applyMatrix4(Vi),bE.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(Vi);for(let _=0,M=l.length;_<M;_++)if(l[_].visible&&l[_].active){const w=l[_].geometryIndex;this.getMatrixAt(_,Vi),this.getBoundingSphereAt(w,Ta).applyMatrix4(Vi);let C=!1;if(p&&(C=!Dy.intersectsSphere(Ta)),!C){const R=f[w],P=Uz.subVectors(Ta.center,Ku).dot(bE);Ny.push(R.start,R.count,P,_)}}const x=Ny.list,g=this.customSort;g===null?x.sort(s.transparent?Dz:Lz):g.call(this,x,i);for(let _=0,M=x.length;_<M;_++){const w=x[_];c[A]=w.start*a,h[A]=w.count,y[A]=w.index,A++}Ny.reset()}else for(let x=0,g=l.length;x<g;x++)if(l[x].visible&&l[x].active){const _=l[x].geometryIndex;let M=!1;if(p&&(this.getMatrixAt(x,Vi),this.getBoundingSphereAt(_,Ta).applyMatrix4(Vi),M=!Dy.intersectsSphere(Ta)),!M){const w=f[_];c[A]=w.start*a,h[A]=w.count,y[A]=x,A++}}m.needsUpdate=!0,this._multiDrawCount=A,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,s,o){this.onBeforeRender(e,null,r,s,o)}}class li extends pn{static get type(){return"LineBasicMaterial"}constructor(e){super(),this.isLineBasicMaterial=!0,this.color=new Ie(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const gg=new N,vg=new N,CE=new Xe,Yu=new _s,Ap=new Hn,Fy=new N,TE=new N;class As extends Rt{constructor(e=new gt,t=new li){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)gg.fromBufferAttribute(t,r-1),vg.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=gg.distanceTo(vg);e.setAttribute("lineDistance",new et(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Ap.copy(i.boundingSphere),Ap.applyMatrix4(r),Ap.radius+=s,e.ray.intersectsSphere(Ap)===!1)return;CE.copy(r).invert(),Yu.copy(e.ray).applyMatrix4(CE);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=this.isLineSegments?2:1,h=i.index,p=i.attributes.position;if(h!==null){const m=Math.max(0,o.start),y=Math.min(h.count,o.start+o.count);for(let A=m,x=y-1;A<x;A+=c){const g=h.getX(A),_=h.getX(A+1),M=Sp(this,e,Yu,l,g,_);M&&t.push(M)}if(this.isLineLoop){const A=h.getX(y-1),x=h.getX(m),g=Sp(this,e,Yu,l,A,x);g&&t.push(g)}}else{const m=Math.max(0,o.start),y=Math.min(p.count,o.start+o.count);for(let A=m,x=y-1;A<x;A+=c){const g=Sp(this,e,Yu,l,A,A+1);g&&t.push(g)}if(this.isLineLoop){const A=Sp(this,e,Yu,l,y-1,m);A&&t.push(A)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function Sp(n,e,t,i,r,s){const o=n.geometry.attributes.position;if(gg.fromBufferAttribute(o,r),vg.fromBufferAttribute(o,s),t.distanceSqToSegment(gg,vg,Fy,TE)>i)return;Fy.applyMatrix4(n.matrixWorld);const l=e.ray.origin.distanceTo(Fy);if(!(l<e.near||l>e.far))return{distance:l,point:TE.clone().applyMatrix4(n.matrixWorld),index:r,face:null,faceIndex:null,barycoord:null,object:n}}const RE=new N,IE=new N;class Lr extends As{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)RE.fromBufferAttribute(t,r),IE.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+RE.distanceTo(IE);e.setAttribute("lineDistance",new et(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class t0 extends As{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class wh extends pn{static get type(){return"PointsMaterial"}constructor(e){super(),this.isPointsMaterial=!0,this.color=new Ie(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const PE=new Xe,w_=new _s,Mp=new Hn,wp=new N;class n0 extends Rt{constructor(e=new gt,t=new wh){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Mp.copy(i.boundingSphere),Mp.applyMatrix4(r),Mp.radius+=s,e.ray.intersectsSphere(Mp)===!1)return;PE.copy(r).invert(),w_.copy(e.ray).applyMatrix4(PE);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=i.index,f=i.attributes.position;if(c!==null){const p=Math.max(0,o.start),m=Math.min(c.count,o.start+o.count);for(let y=p,A=m;y<A;y++){const x=c.getX(y);wp.fromBufferAttribute(f,x),BE(wp,x,l,r,e,t,this)}}else{const p=Math.max(0,o.start),m=Math.min(f.count,o.start+o.count);for(let y=p,A=m;y<A;y++)wp.fromBufferAttribute(f,y),BE(wp,y,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function BE(n,e,t,i,r,s,o){const a=w_.distanceSqToPoint(n);if(a<t){const l=new N;w_.closestPointToPoint(n,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class XI extends tn{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:$t,this.magFilter=s!==void 0?s:$t,this.generateMipmaps=!1;const h=this;function f(){h.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class kz extends tn{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=zn,this.minFilter=zn,this.generateMipmaps=!1,this.needsUpdate=!0}}class i0 extends tn{constructor(e,t,i,r,s,o,a,l,c,h,f,p){super(null,o,a,l,c,h,r,s,f,p),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class zz extends i0{constructor(e,t,i,r,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Ki,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Hz extends i0{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,io),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class Gz extends tn{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class qr{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let a=0,l=s-1,c;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=i[r]-o,c<0)a=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,i[r]===o)return r/(s-1);const h=i[r],p=i[r+1]-h,m=(o-h)/p;return(r+m)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new ue:new N);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new N,r=[],s=[],o=[],a=new N,l=new Xe;for(let m=0;m<=e;m++){const y=m/e;r[m]=this.getTangentAt(y,new N)}s[0]=new N,o[0]=new N;let c=Number.MAX_VALUE;const h=Math.abs(r[0].x),f=Math.abs(r[0].y),p=Math.abs(r[0].z);h<=c&&(c=h,i.set(1,0,0)),f<=c&&(c=f,i.set(0,1,0)),p<=c&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(r[m-1],r[m]),a.length()>Number.EPSILON){a.normalize();const y=Math.acos(En(r[m-1].dot(r[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,y))}o[m].crossVectors(r[m],s[m])}if(t===!0){let m=Math.acos(En(s[0].dot(s[e]),-1,1));m/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let y=1;y<=e;y++)s[y].applyMatrix4(l.makeRotationAxis(r[y],m*y)),o[y].crossVectors(r[y],s[y])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class r0 extends qr{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t=new ue){const i=t,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const h=Math.cos(this.aRotation),f=Math.sin(this.aRotation),p=l-this.aX,m=c-this.aY;l=p*h-m*f+this.aX,c=p*f+m*h+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class JI extends r0{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function tS(){let n=0,e=0,t=0,i=0;function r(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,h,f){let p=(o-s)/c-(a-s)/(c+h)+(a-o)/h,m=(a-o)/h-(l-o)/(h+f)+(l-a)/f;p*=h,m*=h,r(o,a,p,m)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+i*a}}}const Ep=new N,Uy=new tS,Oy=new tS,ky=new tS;class KI extends qr{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new N){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,h;this.closed||a>0?c=r[(a-1)%s]:(Ep.subVectors(r[0],r[1]).add(r[0]),c=Ep);const f=r[a%s],p=r[(a+1)%s];if(this.closed||a+2<s?h=r[(a+2)%s]:(Ep.subVectors(r[s-1],r[s-2]).add(r[s-1]),h=Ep),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let y=Math.pow(c.distanceToSquared(f),m),A=Math.pow(f.distanceToSquared(p),m),x=Math.pow(p.distanceToSquared(h),m);A<1e-4&&(A=1),y<1e-4&&(y=A),x<1e-4&&(x=A),Uy.initNonuniformCatmullRom(c.x,f.x,p.x,h.x,y,A,x),Oy.initNonuniformCatmullRom(c.y,f.y,p.y,h.y,y,A,x),ky.initNonuniformCatmullRom(c.z,f.z,p.z,h.z,y,A,x)}else this.curveType==="catmullrom"&&(Uy.initCatmullRom(c.x,f.x,p.x,h.x,this.tension),Oy.initCatmullRom(c.y,f.y,p.y,h.y,this.tension),ky.initCatmullRom(c.z,f.z,p.z,h.z,this.tension));return i.set(Uy.calc(l),Oy.calc(l),ky.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new N().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function LE(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,a=n*n,l=n*a;return(2*t-2*i+s+o)*l+(-3*t+3*i-2*s-o)*a+s*n+t}function Vz(n,e){const t=1-n;return t*t*e}function Wz(n,e){return 2*(1-n)*n*e}function jz(n,e){return n*n*e}function Id(n,e,t,i){return Vz(n,e)+Wz(n,t)+jz(n,i)}function Xz(n,e){const t=1-n;return t*t*t*e}function Jz(n,e){const t=1-n;return 3*t*t*n*e}function Kz(n,e){return 3*(1-n)*n*n*e}function Yz(n,e){return n*n*n*e}function Pd(n,e,t,i,r){return Xz(n,e)+Jz(n,t)+Kz(n,i)+Yz(n,r)}class nS extends qr{constructor(e=new ue,t=new ue,i=new ue,r=new ue){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new ue){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Pd(e,r.x,s.x,o.x,a.x),Pd(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class YI extends qr{constructor(e=new N,t=new N,i=new N,r=new N){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new N){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Pd(e,r.x,s.x,o.x,a.x),Pd(e,r.y,s.y,o.y,a.y),Pd(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class iS extends qr{constructor(e=new ue,t=new ue){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new ue){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ue){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class QI extends qr{constructor(e=new N,t=new N){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new N){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new N){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class rS extends qr{constructor(e=new ue,t=new ue,i=new ue){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new ue){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(Id(e,r.x,s.x,o.x),Id(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class sS extends qr{constructor(e=new N,t=new N,i=new N){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new N){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(Id(e,r.x,s.x,o.x),Id(e,r.y,s.y,o.y),Id(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class oS extends qr{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new ue){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],c=r[o],h=r[o>r.length-2?r.length-1:o+1],f=r[o>r.length-3?r.length-1:o+2];return i.set(LE(a,l.x,c.x,h.x,f.x),LE(a,l.y,c.y,h.y,f.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new ue().fromArray(r))}return this}}var yg=Object.freeze({__proto__:null,ArcCurve:JI,CatmullRomCurve3:KI,CubicBezierCurve:nS,CubicBezierCurve3:YI,EllipseCurve:r0,LineCurve:iS,LineCurve3:QI,QuadraticBezierCurve:rS,QuadraticBezierCurve3:sS,SplineCurve:oS});class qI extends qr{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new yg[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const h=l[c];i&&i.equals(h)||(t.push(h),i=h)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new yg[r.type]().fromJSON(r))}return this}}class th extends qI{constructor(e){super(),this.type="Path",this.currentPoint=new ue,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new iS(this.currentPoint.clone(),new ue(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new rS(this.currentPoint.clone(),new ue(e,t),new ue(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new nS(this.currentPoint.clone(),new ue(e,t),new ue(i,r),new ue(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new oS(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,l){const c=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+c,t+h,i,r,s,o,a,l),this}absellipse(e,t,i,r,s,o,a,l){const c=new r0(e,t,i,r,s,o,a,l);if(this.curves.length>0){const f=c.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(c);const h=c.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Eh extends gt{constructor(e=[new ue(0,-.5),new ue(.5,0),new ue(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=En(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],h=1/t,f=new N,p=new ue,m=new N,y=new N,A=new N;let x=0,g=0;for(let _=0;_<=e.length-1;_++)switch(_){case 0:x=e[_+1].x-e[_].x,g=e[_+1].y-e[_].y,m.x=g*1,m.y=-x,m.z=g*0,A.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(A.x,A.y,A.z);break;default:x=e[_+1].x-e[_].x,g=e[_+1].y-e[_].y,m.x=g*1,m.y=-x,m.z=g*0,y.copy(m),m.x+=A.x,m.y+=A.y,m.z+=A.z,m.normalize(),l.push(m.x,m.y,m.z),A.copy(y)}for(let _=0;_<=t;_++){const M=i+_*h*r,w=Math.sin(M),C=Math.cos(M);for(let R=0;R<=e.length-1;R++){f.x=e[R].x*w,f.y=e[R].y,f.z=e[R].x*C,o.push(f.x,f.y,f.z),p.x=_/t,p.y=R/(e.length-1),a.push(p.x,p.y);const P=l[3*R+0]*w,B=l[3*R+1],I=l[3*R+0]*C;c.push(P,B,I)}}for(let _=0;_<t;_++)for(let M=0;M<e.length-1;M++){const w=M+_*e.length,C=w,R=w+e.length,P=w+e.length+1,B=w+1;s.push(C,R,B),s.push(P,B,R)}this.setIndex(s),this.setAttribute("position",new et(o,3)),this.setAttribute("uv",new et(a,2)),this.setAttribute("normal",new et(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Eh(e.points,e.segments,e.phiStart,e.phiLength)}}class s0 extends Eh{constructor(e=1,t=1,i=4,r=8){const s=new th;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new s0(e.radius,e.length,e.capSegments,e.radialSegments)}}class o0 extends gt{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],l=[],c=new N,h=new ue;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let f=0,p=3;f<=t;f++,p+=3){const m=i+f/t*r;c.x=e*Math.cos(m),c.y=e*Math.sin(m),o.push(c.x,c.y,c.z),a.push(0,0,1),h.x=(o[p]/e+1)/2,h.y=(o[p+1]/e+1)/2,l.push(h.x,h.y)}for(let f=1;f<=t;f++)s.push(f,f+1,0);this.setIndex(s),this.setAttribute("position",new et(o,3)),this.setAttribute("normal",new et(a,3)),this.setAttribute("uv",new et(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new o0(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class cu extends gt{constructor(e=1,t=1,i=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const h=[],f=[],p=[],m=[];let y=0;const A=[],x=i/2;let g=0;_(),o===!1&&(e>0&&M(!0),t>0&&M(!1)),this.setIndex(h),this.setAttribute("position",new et(f,3)),this.setAttribute("normal",new et(p,3)),this.setAttribute("uv",new et(m,2));function _(){const w=new N,C=new N;let R=0;const P=(t-e)/i;for(let B=0;B<=s;B++){const I=[],b=B/s,U=b*(t-e)+e;for(let H=0;H<=r;H++){const X=H/r,ee=X*l+a,ne=Math.sin(ee),te=Math.cos(ee);C.x=U*ne,C.y=-b*i+x,C.z=U*te,f.push(C.x,C.y,C.z),w.set(ne,P,te).normalize(),p.push(w.x,w.y,w.z),m.push(X,1-b),I.push(y++)}A.push(I)}for(let B=0;B<r;B++)for(let I=0;I<s;I++){const b=A[I][B],U=A[I+1][B],H=A[I+1][B+1],X=A[I][B+1];(e>0||I!==0)&&(h.push(b,U,X),R+=3),(t>0||I!==s-1)&&(h.push(U,H,X),R+=3)}c.addGroup(g,R,0),g+=R}function M(w){const C=y,R=new ue,P=new N;let B=0;const I=w===!0?e:t,b=w===!0?1:-1;for(let H=1;H<=r;H++)f.push(0,x*b,0),p.push(0,b,0),m.push(.5,.5),y++;const U=y;for(let H=0;H<=r;H++){const ee=H/r*l+a,ne=Math.cos(ee),te=Math.sin(ee);P.x=I*te,P.y=x*b,P.z=I*ne,f.push(P.x,P.y,P.z),p.push(0,b,0),R.x=ne*.5+.5,R.y=te*.5*b+.5,m.push(R.x,R.y),y++}for(let H=0;H<r;H++){const X=C+H,ee=U+H;w===!0?h.push(ee,ee+1,X):h.push(ee+1,ee,X),B+=3}c.addGroup(g,B,w===!0?1:2),g+=B}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new cu(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class a0 extends cu{constructor(e=1,t=1,i=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new a0(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class ua extends gt{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];a(r),c(i),h(),this.setAttribute("position",new et(s,3)),this.setAttribute("normal",new et(s.slice(),3)),this.setAttribute("uv",new et(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(_){const M=new N,w=new N,C=new N;for(let R=0;R<t.length;R+=3)m(t[R+0],M),m(t[R+1],w),m(t[R+2],C),l(M,w,C,_)}function l(_,M,w,C){const R=C+1,P=[];for(let B=0;B<=R;B++){P[B]=[];const I=_.clone().lerp(w,B/R),b=M.clone().lerp(w,B/R),U=R-B;for(let H=0;H<=U;H++)H===0&&B===R?P[B][H]=I:P[B][H]=I.clone().lerp(b,H/U)}for(let B=0;B<R;B++)for(let I=0;I<2*(R-B)-1;I++){const b=Math.floor(I/2);I%2===0?(p(P[B][b+1]),p(P[B+1][b]),p(P[B][b])):(p(P[B][b+1]),p(P[B+1][b+1]),p(P[B+1][b]))}}function c(_){const M=new N;for(let w=0;w<s.length;w+=3)M.x=s[w+0],M.y=s[w+1],M.z=s[w+2],M.normalize().multiplyScalar(_),s[w+0]=M.x,s[w+1]=M.y,s[w+2]=M.z}function h(){const _=new N;for(let M=0;M<s.length;M+=3){_.x=s[M+0],_.y=s[M+1],_.z=s[M+2];const w=x(_)/2/Math.PI+.5,C=g(_)/Math.PI+.5;o.push(w,1-C)}y(),f()}function f(){for(let _=0;_<o.length;_+=6){const M=o[_+0],w=o[_+2],C=o[_+4],R=Math.max(M,w,C),P=Math.min(M,w,C);R>.9&&P<.1&&(M<.2&&(o[_+0]+=1),w<.2&&(o[_+2]+=1),C<.2&&(o[_+4]+=1))}}function p(_){s.push(_.x,_.y,_.z)}function m(_,M){const w=_*3;M.x=e[w+0],M.y=e[w+1],M.z=e[w+2]}function y(){const _=new N,M=new N,w=new N,C=new N,R=new ue,P=new ue,B=new ue;for(let I=0,b=0;I<s.length;I+=9,b+=6){_.set(s[I+0],s[I+1],s[I+2]),M.set(s[I+3],s[I+4],s[I+5]),w.set(s[I+6],s[I+7],s[I+8]),R.set(o[b+0],o[b+1]),P.set(o[b+2],o[b+3]),B.set(o[b+4],o[b+5]),C.copy(_).add(M).add(w).divideScalar(3);const U=x(C);A(R,b+0,_,U),A(P,b+2,M,U),A(B,b+4,w,U)}}function A(_,M,w,C){C<0&&_.x===1&&(o[M]=_.x-1),w.x===0&&w.z===0&&(o[M]=C/2/Math.PI+.5)}function x(_){return Math.atan2(_.z,-_.x)}function g(_){return Math.atan2(-_.y,Math.sqrt(_.x*_.x+_.z*_.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ua(e.vertices,e.indices,e.radius,e.details)}}class l0 extends ua{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new l0(e.radius,e.detail)}}const bp=new N,Cp=new N,zy=new N,Tp=new Si;class ZI extends gt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(al*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],h=["a","b","c"],f=new Array(3),p={},m=[];for(let y=0;y<l;y+=3){o?(c[0]=o.getX(y),c[1]=o.getX(y+1),c[2]=o.getX(y+2)):(c[0]=y,c[1]=y+1,c[2]=y+2);const{a:A,b:x,c:g}=Tp;if(A.fromBufferAttribute(a,c[0]),x.fromBufferAttribute(a,c[1]),g.fromBufferAttribute(a,c[2]),Tp.getNormal(zy),f[0]=`${Math.round(A.x*r)},${Math.round(A.y*r)},${Math.round(A.z*r)}`,f[1]=`${Math.round(x.x*r)},${Math.round(x.y*r)},${Math.round(x.z*r)}`,f[2]=`${Math.round(g.x*r)},${Math.round(g.y*r)},${Math.round(g.z*r)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let _=0;_<3;_++){const M=(_+1)%3,w=f[_],C=f[M],R=Tp[h[_]],P=Tp[h[M]],B=`${w}_${C}`,I=`${C}_${w}`;I in p&&p[I]?(zy.dot(p[I].normal)<=s&&(m.push(R.x,R.y,R.z),m.push(P.x,P.y,P.z)),p[I]=null):B in p||(p[B]={index0:c[_],index1:c[M],normal:zy.clone()})}}for(const y in p)if(p[y]){const{index0:A,index1:x}=p[y];bp.fromBufferAttribute(a,A),Cp.fromBufferAttribute(a,x),m.push(bp.x,bp.y,bp.z),m.push(Cp.x,Cp.y,Cp.z)}this.setAttribute("position",new et(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Zo extends th{constructor(e){super(e),this.uuid=lr(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new th().fromJSON(r))}return this}}const Qz={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=$I(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,h,f,p,m;if(i&&(s=tH(n,e,s,t)),n.length>80*t){a=c=n[0],l=h=n[1];for(let y=t;y<r;y+=t)f=n[y],p=n[y+1],f<a&&(a=f),p<l&&(l=p),f>c&&(c=f),p>h&&(h=p);m=Math.max(c-a,h-l),m=m!==0?32767/m:0}return nh(s,o,t,a,l,m,0),o}};function $I(n,e,t,i,r){let s,o;if(r===hH(n,e,t,i)>0)for(s=e;s<t;s+=i)o=DE(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=DE(s,n[s],n[s+1],o);return o&&c0(o,o.next)&&(rh(o),o=o.next),o}function _l(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(c0(t,t.next)||yn(t.prev,t,t.next)===0)){if(rh(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function nh(n,e,t,i,r,s,o){if(!n)return;!o&&s&&oH(n,i,r,s);let a=n,l,c;for(;n.prev!==n.next;){if(l=n.prev,c=n.next,s?Zz(n,i,r,s):qz(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(c.i/t|0),rh(n),n=c.next,a=c.next;continue}if(n=c,n===a){o?o===1?(n=$z(_l(n),e,t),nh(n,e,t,i,r,s,2)):o===2&&eH(n,e,t,i,r,s):nh(_l(n),e,t,i,r,s,1);break}}}function qz(n){const e=n.prev,t=n,i=n.next;if(yn(e,t,i)>=0)return!1;const r=e.x,s=t.x,o=i.x,a=e.y,l=t.y,c=i.y,h=r<s?r<o?r:o:s<o?s:o,f=a<l?a<c?a:c:l<c?l:c,p=r>s?r>o?r:o:s>o?s:o,m=a>l?a>c?a:c:l>c?l:c;let y=i.next;for(;y!==e;){if(y.x>=h&&y.x<=p&&y.y>=f&&y.y<=m&&Tc(r,a,s,l,o,c,y.x,y.y)&&yn(y.prev,y,y.next)>=0)return!1;y=y.next}return!0}function Zz(n,e,t,i){const r=n.prev,s=n,o=n.next;if(yn(r,s,o)>=0)return!1;const a=r.x,l=s.x,c=o.x,h=r.y,f=s.y,p=o.y,m=a<l?a<c?a:c:l<c?l:c,y=h<f?h<p?h:p:f<p?f:p,A=a>l?a>c?a:c:l>c?l:c,x=h>f?h>p?h:p:f>p?f:p,g=E_(m,y,e,t,i),_=E_(A,x,e,t,i);let M=n.prevZ,w=n.nextZ;for(;M&&M.z>=g&&w&&w.z<=_;){if(M.x>=m&&M.x<=A&&M.y>=y&&M.y<=x&&M!==r&&M!==o&&Tc(a,h,l,f,c,p,M.x,M.y)&&yn(M.prev,M,M.next)>=0||(M=M.prevZ,w.x>=m&&w.x<=A&&w.y>=y&&w.y<=x&&w!==r&&w!==o&&Tc(a,h,l,f,c,p,w.x,w.y)&&yn(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;M&&M.z>=g;){if(M.x>=m&&M.x<=A&&M.y>=y&&M.y<=x&&M!==r&&M!==o&&Tc(a,h,l,f,c,p,M.x,M.y)&&yn(M.prev,M,M.next)>=0)return!1;M=M.prevZ}for(;w&&w.z<=_;){if(w.x>=m&&w.x<=A&&w.y>=y&&w.y<=x&&w!==r&&w!==o&&Tc(a,h,l,f,c,p,w.x,w.y)&&yn(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function $z(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!c0(r,s)&&eP(r,i,i.next,s)&&ih(r,s)&&ih(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),rh(i),rh(i.next),i=n=s),i=i.next}while(i!==n);return _l(i)}function eH(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&cH(o,a)){let l=tP(o,a);o=_l(o,o.next),l=_l(l,l.next),nh(o,e,t,i,r,s,0),nh(l,e,t,i,r,s,0);return}a=a.next}o=o.next}while(o!==n)}function tH(n,e,t,i){const r=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:n.length,c=$I(n,a,l,i,!1),c===c.next&&(c.steiner=!0),r.push(lH(c));for(r.sort(nH),s=0;s<r.length;s++)t=iH(r[s],t);return t}function nH(n,e){return n.x-e.x}function iH(n,e){const t=rH(n,e);if(!t)return e;const i=tP(t,n);return _l(i,i.next),_l(t,t.next)}function rH(n,e){let t=e,i=-1/0,r;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const p=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=s&&p>i&&(i=p,r=t.x<t.next.x?t:t.next,p===s))return r}t=t.next}while(t!==e);if(!r)return null;const a=r,l=r.x,c=r.y;let h=1/0,f;t=r;do s>=t.x&&t.x>=l&&s!==t.x&&Tc(o<c?s:i,o,l,c,o<c?i:s,o,t.x,t.y)&&(f=Math.abs(o-t.y)/(s-t.x),ih(t,n)&&(f<h||f===h&&(t.x>r.x||t.x===r.x&&sH(r,t)))&&(r=t,h=f)),t=t.next;while(t!==a);return r}function sH(n,e){return yn(n.prev,n,e.prev)<0&&yn(e.next,n,n.next)<0}function oH(n,e,t,i){let r=n;do r.z===0&&(r.z=E_(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,aH(r)}function aH(n){let e,t,i,r,s,o,a,l,c=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<c&&(a++,i=i.nextZ,!!i);e++);for(l=c;a>0||l>0&&i;)a!==0&&(l===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,c*=2}while(o>1);return n}function E_(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function lH(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Tc(n,e,t,i,r,s,o,a){return(r-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(i-a)}function cH(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!uH(n,e)&&(ih(n,e)&&ih(e,n)&&dH(n,e)&&(yn(n.prev,n,e.prev)||yn(n,e.prev,e))||c0(n,e)&&yn(n.prev,n,n.next)>0&&yn(e.prev,e,e.next)>0)}function yn(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function c0(n,e){return n.x===e.x&&n.y===e.y}function eP(n,e,t,i){const r=Ip(yn(n,e,t)),s=Ip(yn(n,e,i)),o=Ip(yn(t,i,n)),a=Ip(yn(t,i,e));return!!(r!==s&&o!==a||r===0&&Rp(n,t,e)||s===0&&Rp(n,i,e)||o===0&&Rp(t,n,i)||a===0&&Rp(t,e,i))}function Rp(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Ip(n){return n>0?1:n<0?-1:0}function uH(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&eP(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function ih(n,e){return yn(n.prev,n,n.next)<0?yn(n,e,n.next)>=0&&yn(n,n.prev,e)>=0:yn(n,e,n.prev)<0||yn(n,n.next,e)<0}function dH(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function tP(n,e){const t=new b_(n.i,n.x,n.y),i=new b_(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function DE(n,e,t,i){const r=new b_(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function rh(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function b_(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function hH(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class ys{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return ys.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];NE(e),FE(i,e);let o=e.length;t.forEach(NE);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,FE(i,t[l]);const a=Qz.triangulate(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function NE(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function FE(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class u0 extends gt{constructor(e=new Zo([new ue(.5,.5),new ue(-.5,.5),new ue(-.5,-.5),new ue(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new et(r,3)),this.setAttribute("uv",new et(s,2)),this.computeVertexNormals();function o(a){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,h=t.steps!==void 0?t.steps:1,f=t.depth!==void 0?t.depth:1;let p=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,y=t.bevelSize!==void 0?t.bevelSize:m-.1,A=t.bevelOffset!==void 0?t.bevelOffset:0,x=t.bevelSegments!==void 0?t.bevelSegments:3;const g=t.extrudePath,_=t.UVGenerator!==void 0?t.UVGenerator:fH;let M,w=!1,C,R,P,B;g&&(M=g.getSpacedPoints(h),w=!0,p=!1,C=g.computeFrenetFrames(h,!1),R=new N,P=new N,B=new N),p||(x=0,m=0,y=0,A=0);const I=a.extractPoints(c);let b=I.shape;const U=I.holes;if(!ys.isClockWise(b)){b=b.reverse();for(let ye=0,Ae=U.length;ye<Ae;ye++){const V=U[ye];ys.isClockWise(V)&&(U[ye]=V.reverse())}}const X=ys.triangulateShape(b,U),ee=b;for(let ye=0,Ae=U.length;ye<Ae;ye++){const V=U[ye];b=b.concat(V)}function ne(ye,Ae,V){return Ae||console.error("THREE.ExtrudeGeometry: vec does not exist"),ye.clone().addScaledVector(Ae,V)}const te=b.length,le=X.length;function D(ye,Ae,V){let We,Me,De;const Te=ye.x-Ae.x,it=ye.y-Ae.y,Oe=V.x-ye.x,k=V.y-ye.y,F=Te*Te+it*it,ie=Te*k-it*Oe;if(Math.abs(ie)>Number.EPSILON){const fe=Math.sqrt(F),Se=Math.sqrt(Oe*Oe+k*k),ge=Ae.x-it/fe,Ze=Ae.y+Te/fe,Le=V.x-k/Se,je=V.y+Oe/Se,Ct=((Le-ge)*k-(je-Ze)*Oe)/(Te*k-it*Oe);We=ge+Te*Ct-ye.x,Me=Ze+it*Ct-ye.y;const we=We*We+Me*Me;if(we<=2)return new ue(We,Me);De=Math.sqrt(we/2)}else{let fe=!1;Te>Number.EPSILON?Oe>Number.EPSILON&&(fe=!0):Te<-Number.EPSILON?Oe<-Number.EPSILON&&(fe=!0):Math.sign(it)===Math.sign(k)&&(fe=!0),fe?(We=-it,Me=Te,De=Math.sqrt(F)):(We=Te,Me=it,De=Math.sqrt(F/2))}return new ue(We/De,Me/De)}const W=[];for(let ye=0,Ae=ee.length,V=Ae-1,We=ye+1;ye<Ae;ye++,V++,We++)V===Ae&&(V=0),We===Ae&&(We=0),W[ye]=D(ee[ye],ee[V],ee[We]);const j=[];let Z,me=W.concat();for(let ye=0,Ae=U.length;ye<Ae;ye++){const V=U[ye];Z=[];for(let We=0,Me=V.length,De=Me-1,Te=We+1;We<Me;We++,De++,Te++)De===Me&&(De=0),Te===Me&&(Te=0),Z[We]=D(V[We],V[De],V[Te]);j.push(Z),me=me.concat(Z)}for(let ye=0;ye<x;ye++){const Ae=ye/x,V=m*Math.cos(Ae*Math.PI/2),We=y*Math.sin(Ae*Math.PI/2)+A;for(let Me=0,De=ee.length;Me<De;Me++){const Te=ne(ee[Me],W[Me],We);_e(Te.x,Te.y,-V)}for(let Me=0,De=U.length;Me<De;Me++){const Te=U[Me];Z=j[Me];for(let it=0,Oe=Te.length;it<Oe;it++){const k=ne(Te[it],Z[it],We);_e(k.x,k.y,-V)}}}const Be=y+A;for(let ye=0;ye<te;ye++){const Ae=p?ne(b[ye],me[ye],Be):b[ye];w?(P.copy(C.normals[0]).multiplyScalar(Ae.x),R.copy(C.binormals[0]).multiplyScalar(Ae.y),B.copy(M[0]).add(P).add(R),_e(B.x,B.y,B.z)):_e(Ae.x,Ae.y,0)}for(let ye=1;ye<=h;ye++)for(let Ae=0;Ae<te;Ae++){const V=p?ne(b[Ae],me[Ae],Be):b[Ae];w?(P.copy(C.normals[ye]).multiplyScalar(V.x),R.copy(C.binormals[ye]).multiplyScalar(V.y),B.copy(M[ye]).add(P).add(R),_e(B.x,B.y,B.z)):_e(V.x,V.y,f/h*ye)}for(let ye=x-1;ye>=0;ye--){const Ae=ye/x,V=m*Math.cos(Ae*Math.PI/2),We=y*Math.sin(Ae*Math.PI/2)+A;for(let Me=0,De=ee.length;Me<De;Me++){const Te=ne(ee[Me],W[Me],We);_e(Te.x,Te.y,f+V)}for(let Me=0,De=U.length;Me<De;Me++){const Te=U[Me];Z=j[Me];for(let it=0,Oe=Te.length;it<Oe;it++){const k=ne(Te[it],Z[it],We);w?_e(k.x,k.y+M[h-1].y,M[h-1].x+V):_e(k.x,k.y,f+V)}}}re(),xe();function re(){const ye=r.length/3;if(p){let Ae=0,V=te*Ae;for(let We=0;We<le;We++){const Me=X[We];qe(Me[2]+V,Me[1]+V,Me[0]+V)}Ae=h+x*2,V=te*Ae;for(let We=0;We<le;We++){const Me=X[We];qe(Me[0]+V,Me[1]+V,Me[2]+V)}}else{for(let Ae=0;Ae<le;Ae++){const V=X[Ae];qe(V[2],V[1],V[0])}for(let Ae=0;Ae<le;Ae++){const V=X[Ae];qe(V[0]+te*h,V[1]+te*h,V[2]+te*h)}}i.addGroup(ye,r.length/3-ye,0)}function xe(){const ye=r.length/3;let Ae=0;Ee(ee,Ae),Ae+=ee.length;for(let V=0,We=U.length;V<We;V++){const Me=U[V];Ee(Me,Ae),Ae+=Me.length}i.addGroup(ye,r.length/3-ye,1)}function Ee(ye,Ae){let V=ye.length;for(;--V>=0;){const We=V;let Me=V-1;Me<0&&(Me=ye.length-1);for(let De=0,Te=h+x*2;De<Te;De++){const it=te*De,Oe=te*(De+1),k=Ae+We+it,F=Ae+Me+it,ie=Ae+Me+Oe,fe=Ae+We+Oe;rt(k,F,ie,fe)}}}function _e(ye,Ae,V){l.push(ye),l.push(Ae),l.push(V)}function qe(ye,Ae,V){at(ye),at(Ae),at(V);const We=r.length/3,Me=_.generateTopUV(i,r,We-3,We-2,We-1);lt(Me[0]),lt(Me[1]),lt(Me[2])}function rt(ye,Ae,V,We){at(ye),at(Ae),at(We),at(Ae),at(V),at(We);const Me=r.length/3,De=_.generateSideWallUV(i,r,Me-6,Me-3,Me-2,Me-1);lt(De[0]),lt(De[1]),lt(De[3]),lt(De[1]),lt(De[2]),lt(De[3])}function at(ye){r.push(l[ye*3+0]),r.push(l[ye*3+1]),r.push(l[ye*3+2])}function lt(ye){s.push(ye.x),s.push(ye.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return pH(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new yg[r.type]().fromJSON(r)),new u0(i,e.options)}}const fH={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],a=e[i*3],l=e[i*3+1],c=e[r*3],h=e[r*3+1];return[new ue(s,o),new ue(a,l),new ue(c,h)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[i*3],h=e[i*3+1],f=e[i*3+2],p=e[r*3],m=e[r*3+1],y=e[r*3+2],A=e[s*3],x=e[s*3+1],g=e[s*3+2];return Math.abs(a-h)<Math.abs(o-c)?[new ue(o,1-l),new ue(c,1-f),new ue(p,1-y),new ue(A,1-g)]:[new ue(a,1-l),new ue(h,1-f),new ue(m,1-y),new ue(x,1-g)]}};function pH(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class d0 extends ua{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new d0(e.radius,e.detail)}}class bh extends ua{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new bh(e.radius,e.detail)}}class h0 extends gt{constructor(e=.5,t=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],l=[],c=[],h=[];let f=e;const p=(t-e)/r,m=new N,y=new ue;for(let A=0;A<=r;A++){for(let x=0;x<=i;x++){const g=s+x/i*o;m.x=f*Math.cos(g),m.y=f*Math.sin(g),l.push(m.x,m.y,m.z),c.push(0,0,1),y.x=(m.x/t+1)/2,y.y=(m.y/t+1)/2,h.push(y.x,y.y)}f+=p}for(let A=0;A<r;A++){const x=A*(i+1);for(let g=0;g<i;g++){const _=g+x,M=_,w=_+i+1,C=_+i+2,R=_+1;a.push(M,w,R),a.push(w,C,R)}}this.setIndex(a),this.setAttribute("position",new et(l,3)),this.setAttribute("normal",new et(c,3)),this.setAttribute("uv",new et(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new h0(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Ch extends gt{constructor(e=new Zo([new ue(0,.5),new ue(-.5,-.5),new ue(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let h=0;h<e.length;h++)c(e[h]),this.addGroup(a,l,h),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new et(r,3)),this.setAttribute("normal",new et(s,3)),this.setAttribute("uv",new et(o,2));function c(h){const f=r.length/3,p=h.extractPoints(t);let m=p.shape;const y=p.holes;ys.isClockWise(m)===!1&&(m=m.reverse());for(let x=0,g=y.length;x<g;x++){const _=y[x];ys.isClockWise(_)===!0&&(y[x]=_.reverse())}const A=ys.triangulateShape(m,y);for(let x=0,g=y.length;x<g;x++){const _=y[x];m=m.concat(_)}for(let x=0,g=m.length;x<g;x++){const _=m[x];r.push(_.x,_.y,0),s.push(0,0,1),o.push(_.x,_.y)}for(let x=0,g=A.length;x<g;x++){const _=A[x],M=_[0]+f,w=_[1]+f,C=_[2]+f;i.push(M,w,C),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return mH(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new Ch(i,e.curveSegments)}}function mH(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class qs extends gt{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let c=0;const h=[],f=new N,p=new N,m=[],y=[],A=[],x=[];for(let g=0;g<=i;g++){const _=[],M=g/i;let w=0;g===0&&o===0?w=.5/t:g===i&&l===Math.PI&&(w=-.5/t);for(let C=0;C<=t;C++){const R=C/t;f.x=-e*Math.cos(r+R*s)*Math.sin(o+M*a),f.y=e*Math.cos(o+M*a),f.z=e*Math.sin(r+R*s)*Math.sin(o+M*a),y.push(f.x,f.y,f.z),p.copy(f).normalize(),A.push(p.x,p.y,p.z),x.push(R+w,1-M),_.push(c++)}h.push(_)}for(let g=0;g<i;g++)for(let _=0;_<t;_++){const M=h[g][_+1],w=h[g][_],C=h[g+1][_],R=h[g+1][_+1];(g!==0||o>0)&&m.push(M,w,R),(g!==i-1||l<Math.PI)&&m.push(w,C,R)}this.setIndex(m),this.setAttribute("position",new et(y,3)),this.setAttribute("normal",new et(A,3)),this.setAttribute("uv",new et(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new qs(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class f0 extends ua{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new f0(e.radius,e.detail)}}class p0 extends gt{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],l=[],c=[],h=new N,f=new N,p=new N;for(let m=0;m<=i;m++)for(let y=0;y<=r;y++){const A=y/r*s,x=m/i*Math.PI*2;f.x=(e+t*Math.cos(x))*Math.cos(A),f.y=(e+t*Math.cos(x))*Math.sin(A),f.z=t*Math.sin(x),a.push(f.x,f.y,f.z),h.x=e*Math.cos(A),h.y=e*Math.sin(A),p.subVectors(f,h).normalize(),l.push(p.x,p.y,p.z),c.push(y/r),c.push(m/i)}for(let m=1;m<=i;m++)for(let y=1;y<=r;y++){const A=(r+1)*m+y-1,x=(r+1)*(m-1)+y-1,g=(r+1)*(m-1)+y,_=(r+1)*m+y;o.push(A,x,_),o.push(x,g,_)}this.setIndex(o),this.setAttribute("position",new et(a,3)),this.setAttribute("normal",new et(l,3)),this.setAttribute("uv",new et(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new p0(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class m0 extends gt{constructor(e=1,t=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],c=[],h=[],f=new N,p=new N,m=new N,y=new N,A=new N,x=new N,g=new N;for(let M=0;M<=i;++M){const w=M/i*s*Math.PI*2;_(w,s,o,e,m),_(w+.01,s,o,e,y),x.subVectors(y,m),g.addVectors(y,m),A.crossVectors(x,g),g.crossVectors(A,x),A.normalize(),g.normalize();for(let C=0;C<=r;++C){const R=C/r*Math.PI*2,P=-t*Math.cos(R),B=t*Math.sin(R);f.x=m.x+(P*g.x+B*A.x),f.y=m.y+(P*g.y+B*A.y),f.z=m.z+(P*g.z+B*A.z),l.push(f.x,f.y,f.z),p.subVectors(f,m).normalize(),c.push(p.x,p.y,p.z),h.push(M/i),h.push(C/r)}}for(let M=1;M<=i;M++)for(let w=1;w<=r;w++){const C=(r+1)*(M-1)+(w-1),R=(r+1)*M+(w-1),P=(r+1)*M+w,B=(r+1)*(M-1)+w;a.push(C,R,B),a.push(R,P,B)}this.setIndex(a),this.setAttribute("position",new et(l,3)),this.setAttribute("normal",new et(c,3)),this.setAttribute("uv",new et(h,2));function _(M,w,C,R,P){const B=Math.cos(M),I=Math.sin(M),b=C/w*M,U=Math.cos(b);P.x=R*(2+U)*.5*B,P.y=R*(2+U)*I*.5,P.z=R*Math.sin(b)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new m0(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class g0 extends gt{constructor(e=new sS(new N(-1,-1,0),new N(-1,1,0),new N(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new N,l=new N,c=new ue;let h=new N;const f=[],p=[],m=[],y=[];A(),this.setIndex(y),this.setAttribute("position",new et(f,3)),this.setAttribute("normal",new et(p,3)),this.setAttribute("uv",new et(m,2));function A(){for(let M=0;M<t;M++)x(M);x(s===!1?t:0),_(),g()}function x(M){h=e.getPointAt(M/t,h);const w=o.normals[M],C=o.binormals[M];for(let R=0;R<=r;R++){const P=R/r*Math.PI*2,B=Math.sin(P),I=-Math.cos(P);l.x=I*w.x+B*C.x,l.y=I*w.y+B*C.y,l.z=I*w.z+B*C.z,l.normalize(),p.push(l.x,l.y,l.z),a.x=h.x+i*l.x,a.y=h.y+i*l.y,a.z=h.z+i*l.z,f.push(a.x,a.y,a.z)}}function g(){for(let M=1;M<=t;M++)for(let w=1;w<=r;w++){const C=(r+1)*(M-1)+(w-1),R=(r+1)*M+(w-1),P=(r+1)*M+w,B=(r+1)*(M-1)+w;y.push(C,R,B),y.push(R,P,B)}}function _(){for(let M=0;M<=t;M++)for(let w=0;w<=r;w++)c.x=M/t,c.y=w/r,m.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new g0(new yg[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class nP extends gt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new N,s=new N;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,h=l.length;c<h;++c){const f=l[c],p=f.start,m=f.count;for(let y=p,A=p+m;y<A;y+=3)for(let x=0;x<3;x++){const g=a.getX(y+x),_=a.getX(y+(x+1)%3);r.fromBufferAttribute(o,g),s.fromBufferAttribute(o,_),UE(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const h=3*a+c,f=3*a+(c+1)%3;r.fromBufferAttribute(o,h),s.fromBufferAttribute(o,f),UE(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new et(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function UE(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var OE=Object.freeze({__proto__:null,BoxGeometry:ca,CapsuleGeometry:s0,CircleGeometry:o0,ConeGeometry:a0,CylinderGeometry:cu,DodecahedronGeometry:l0,EdgesGeometry:ZI,ExtrudeGeometry:u0,IcosahedronGeometry:d0,LatheGeometry:Eh,OctahedronGeometry:bh,PlaneGeometry:bl,PolyhedronGeometry:ua,RingGeometry:h0,ShapeGeometry:Ch,SphereGeometry:qs,TetrahedronGeometry:f0,TorusGeometry:p0,TorusKnotGeometry:m0,TubeGeometry:g0,WireframeGeometry:nP});class iP extends pn{static get type(){return"ShadowMaterial"}constructor(e){super(),this.isShadowMaterial=!0,this.color=new Ie(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class rP extends wi{static get type(){return"RawShaderMaterial"}constructor(e){super(e),this.isRawShaderMaterial=!0}}class oo extends pn{static get type(){return"MeshStandardMaterial"}constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.color=new Ie(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ie(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=la,this.normalScale=new ue(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Fi,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class bn extends oo{static get type(){return"MeshPhysicalMaterial"}constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ue(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return En(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ie(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ie(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ie(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class sP extends pn{static get type(){return"MeshPhongMaterial"}constructor(e){super(),this.isMeshPhongMaterial=!0,this.color=new Ie(16777215),this.specular=new Ie(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ie(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=la,this.normalScale=new ue(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Fi,this.combine=fh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class oP extends pn{static get type(){return"MeshToonMaterial"}constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.color=new Ie(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ie(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=la,this.normalScale=new ue(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class aP extends pn{static get type(){return"MeshNormalMaterial"}constructor(e){super(),this.isMeshNormalMaterial=!0,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=la,this.normalScale=new ue(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class lP extends pn{static get type(){return"MeshLambertMaterial"}constructor(e){super(),this.isMeshLambertMaterial=!0,this.color=new Ie(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ie(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=la,this.normalScale=new ue(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Fi,this.combine=fh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class cP extends pn{static get type(){return"MeshMatcapMaterial"}constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.color=new Ie(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=la,this.normalScale=new ue(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class uP extends li{static get type(){return"LineDashedMaterial"}constructor(e){super(),this.isLineDashedMaterial=!0,this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Za(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function dP(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function hP(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function C_(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=n[a+l]}return r}function aS(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)}function gH(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],h=c.getValueSize(),f=[],p=[];for(let m=0;m<c.times.length;++m){const y=c.times[m]*r;if(!(y<t||y>=i)){f.push(c.times[m]);for(let A=0;A<h;++A)p.push(c.values[m*h+A])}}f.length!==0&&(c.times=Za(f,c.times.constructor),c.values=Za(p,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function vH(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=n.tracks.find(function(g){return g.name===a.name&&g.ValueTypeName===l});if(c===void 0)continue;let h=0;const f=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=f/3);let p=0;const m=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);const y=a.times.length-1;let A;if(s<=a.times[0]){const g=h,_=f-h;A=a.values.slice(g,_)}else if(s>=a.times[y]){const g=y*f+h,_=g+f-h;A=a.values.slice(g,_)}else{const g=a.createInterpolant(),_=h,M=f-h;g.evaluate(s),A=g.resultBuffer.slice(_,M)}l==="quaternion"&&new sn().fromArray(A).normalize().conjugate().toArray(A);const x=c.times.length;for(let g=0;g<x;++g){const _=g*m+p;if(l==="quaternion")sn.multiplyQuaternionsFlat(c.values,_,A,0,c.values,_);else{const M=m-p*2;for(let w=0;w<M;++w)c.values[_+w]-=A[w]}}}return n.blendMode=GA,n}const yH={convertArray:Za,isTypedArray:dP,getKeyframeOrder:hP,sortedArray:C_,flattenJSON:aS,subclip:gH,makeClipAdditive:vH};class Cl{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class fP extends Cl{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Ya,endingEnd:Ya}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case Qa:s=e,a=2*t-i;break;case qd:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case Qa:o=e,l=2*i-t;break;case qd:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const c=(i-t)*.5,h=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-i),this._offsetPrev=s*h,this._offsetNext=o*h}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,h=this._offsetPrev,f=this._offsetNext,p=this._weightPrev,m=this._weightNext,y=(i-t)/(r-t),A=y*y,x=A*y,g=-p*x+2*p*A-p*y,_=(1+p)*x+(-1.5-2*p)*A+(-.5+p)*y+1,M=(-1-m)*x+(1.5+m)*A+.5*y,w=m*x-m*A;for(let C=0;C!==a;++C)s[C]=g*o[h+C]+_*o[c+C]+M*o[l+C]+w*o[f+C];return s}}class lS extends Cl{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,h=(i-t)/(r-t),f=1-h;for(let p=0;p!==a;++p)s[p]=o[c+p]*f+o[l+p]*h;return s}}class pP extends Cl{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Zr{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Za(t,this.TimeBufferType),this.values=Za(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Za(e.times,Array),values:Za(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new pP(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new lS(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new fP(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case yl:t=this.InterpolantFactoryMethodDiscrete;break;case na:t=this.InterpolantFactoryMethodLinear;break;case om:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return yl;case this.InterpolantFactoryMethodLinear:return na;case this.InterpolantFactoryMethodSmooth:return om}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&dP(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===om,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],h=e[a+1];if(c!==h&&(a!==1||c!==e[0]))if(r)l=!0;else{const f=a*i,p=f-i,m=f+i;for(let y=0;y!==i;++y){const A=t[f+y];if(A!==t[p+y]||A!==t[m+y]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const f=a*i,p=o*i;for(let m=0;m!==i;++m)t[p+m]=t[f+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,c=0;c!==i;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Zr.prototype.TimeBufferType=Float32Array;Zr.prototype.ValueBufferType=Float32Array;Zr.prototype.DefaultInterpolation=na;class Tl extends Zr{constructor(e,t,i){super(e,t,i)}}Tl.prototype.ValueTypeName="bool";Tl.prototype.ValueBufferType=Array;Tl.prototype.DefaultInterpolation=yl;Tl.prototype.InterpolantFactoryMethodLinear=void 0;Tl.prototype.InterpolantFactoryMethodSmooth=void 0;class cS extends Zr{}cS.prototype.ValueTypeName="color";class ao extends Zr{}ao.prototype.ValueTypeName="number";class mP extends Cl{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let c=e*a;for(let h=c+a;c!==h;c+=4)sn.slerpFlat(s,0,o,c-a,o,c,l);return s}}class lo extends Zr{InterpolantFactoryMethodLinear(e){return new mP(this.times,this.values,this.getValueSize(),e)}}lo.prototype.ValueTypeName="quaternion";lo.prototype.InterpolantFactoryMethodSmooth=void 0;class Rl extends Zr{constructor(e,t,i){super(e,t,i)}}Rl.prototype.ValueTypeName="string";Rl.prototype.ValueBufferType=Array;Rl.prototype.DefaultInterpolation=yl;Rl.prototype.InterpolantFactoryMethodLinear=void 0;Rl.prototype.InterpolantFactoryMethodSmooth=void 0;class co extends Zr{}co.prototype.ValueTypeName="vector";class Al{constructor(e="",t=-1,i=[],r=Yg){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=lr(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(_H(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(Zr.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const h=hP(l);l=C_(l,1,h),c=C_(c,1,h),!r&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new ao(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],h=c.name.match(s);if(h&&h.length>1){const f=h[1];let p=r[f];p||(r[f]=p=[]),p.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(f,p,m,y,A){if(m.length!==0){const x=[],g=[];aS(m,x,g,y),x.length!==0&&A.push(new f(p,x,g))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let f=0;f<c.length;f++){const p=c[f].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const m={};let y;for(y=0;y<p.length;y++)if(p[y].morphTargets)for(let A=0;A<p[y].morphTargets.length;A++)m[p[y].morphTargets[A]]=-1;for(const A in m){const x=[],g=[];for(let _=0;_!==p[y].morphTargets.length;++_){const M=p[y];x.push(M.time),g.push(M.morphTarget===A?1:0)}r.push(new ao(".morphTargetInfluence["+A+"]",x,g))}l=m.length*o}else{const m=".bones["+t[f].name+"]";i(co,m+".position",p,"pos",r),i(lo,m+".quaternion",p,"rot",r),i(co,m+".scale",p,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function xH(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ao;case"vector":case"vector2":case"vector3":case"vector4":return co;case"color":return cS;case"quaternion":return lo;case"bool":case"boolean":return Tl;case"string":return Rl}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function _H(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=xH(n.type);if(n.times===void 0){const t=[],i=[];aS(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Js={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class uS{constructor(e,t,i){const r=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(h){a++,s===!1&&r.onStart!==void 0&&r.onStart(h,o,a),s=!0},this.itemEnd=function(h){o++,r.onProgress!==void 0&&r.onProgress(h,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(h){r.onError!==void 0&&r.onError(h)},this.resolveURL=function(h){return l?l(h):h},this.setURLModifier=function(h){return l=h,this},this.addHandler=function(h,f){return c.push(h,f),this},this.removeHandler=function(h){const f=c.indexOf(h);return f!==-1&&c.splice(f,2),this},this.getHandler=function(h){for(let f=0,p=c.length;f<p;f+=2){const m=c[f],y=c[f+1];if(m.global&&(m.lastIndex=0),m.test(h))return y}return null}}}const gP=new uS;class ci{constructor(e){this.manager=e!==void 0?e:gP,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}ci.DEFAULT_MATERIAL_NAME="__DEFAULT";const Ds={};class AH extends Error{constructor(e,t){super(e),this.response=t}}class Ui extends ci{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Js.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Ds[e]!==void 0){Ds[e].push({onLoad:t,onProgress:i,onError:r});return}Ds[e]=[],Ds[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const h=Ds[e],f=c.body.getReader(),p=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),m=p?parseInt(p):0,y=m!==0;let A=0;const x=new ReadableStream({start(g){_();function _(){f.read().then(({done:M,value:w})=>{if(M)g.close();else{A+=w.byteLength;const C=new ProgressEvent("progress",{lengthComputable:y,loaded:A,total:m});for(let R=0,P=h.length;R<P;R++){const B=h[R];B.onProgress&&B.onProgress(C)}g.enqueue(w),_()}},M=>{g.error(M)})}}});return new Response(x)}else throw new AH(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(h=>new DOMParser().parseFromString(h,a));case"json":return c.json();default:if(a===void 0)return c.text();{const f=/charset="?([^;"\s]*)"?/i.exec(a),p=f&&f[1]?f[1].toLowerCase():void 0,m=new TextDecoder(p);return c.arrayBuffer().then(y=>m.decode(y))}}}).then(c=>{Js.add(e,c);const h=Ds[e];delete Ds[e];for(let f=0,p=h.length;f<p;f++){const m=h[f];m.onLoad&&m.onLoad(c)}}).catch(c=>{const h=Ds[e];if(h===void 0)throw this.manager.itemError(e),c;delete Ds[e];for(let f=0,p=h.length;f<p;f++){const m=h[f];m.onError&&m.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class SH extends ci{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Ui(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=Al.parse(e[i]);t.push(r)}return t}}class MH extends ci{constructor(e){super(e)}load(e,t,i,r){const s=this,o=[],a=new i0,l=new Ui(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function h(f){l.load(e[f],function(p){const m=s.parse(p,!0);o[f]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},c+=1,c===6&&(m.mipmapCount===1&&(a.minFilter=$t),a.image=o,a.format=m.format,a.needsUpdate=!0,t&&t(a))},i,r)}if(Array.isArray(e))for(let f=0,p=e.length;f<p;++f)h(f);else l.load(e,function(f){const p=s.parse(f,!0);if(p.isCubemap){const m=p.mipmaps.length/p.mipmapCount;for(let y=0;y<m;y++){o[y]={mipmaps:[]};for(let A=0;A<p.mipmapCount;A++)o[y].mipmaps.push(p.mipmaps[y*p.mipmapCount+A]),o[y].format=p.format,o[y].width=p.width,o[y].height=p.height}a.image=o}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=$t),a.format=p.format,a.needsUpdate=!0,t&&t(a)},i,r);return a}}class sh extends ci{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Js.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=eh("img");function l(){h(),Js.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(f){h(),r&&r(f),s.manager.itemError(e),s.manager.itemEnd(e)}function h(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class wH extends ci{constructor(e){super(e)}load(e,t,i,r){const s=new xh;s.colorSpace=In;const o=new sh(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(h){s.images[c]=h,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return s}}class EH extends ci{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new vs,a=new Ui(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let c;try{c=s.parse(l)}catch(h){if(r!==void 0)r(h);else{console.error(h);return}}c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:Ki,o.wrapT=c.wrapT!==void 0?c.wrapT:Ki,o.magFilter=c.magFilter!==void 0?c.magFilter:$t,o.minFilter=c.minFilter!==void 0?c.minFilter:$t,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0&&(o.colorSpace=c.colorSpace),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=Yi),c.mipmapCount===1&&(o.minFilter=$t),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c)},i,r),o}}class zo extends ci{constructor(e){super(e)}load(e,t,i,r){const s=new tn,o=new sh(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class da extends Rt{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Ie(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class vP extends da{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Rt.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Ie(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Hy=new Xe,kE=new N,zE=new N;class dS{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ue(512,512),this.map=null,this.mapPass=null,this.matrix=new Xe,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new _h,this._frameExtents=new ue(1,1),this._viewportCount=1,this._viewports=[new Gt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;kE.setFromMatrixPosition(e.matrixWorld),t.position.copy(kE),zE.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(zE),t.updateMatrixWorld(),Hy.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Hy),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(Hy)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class bH extends dS{constructor(){super(new vn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=Qc*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class v0 extends da{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Rt.DEFAULT_UP),this.updateMatrix(),this.target=new Rt,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new bH}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const HE=new Xe,Qu=new N,Gy=new N;class CH extends dS{constructor(){super(new vn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ue(4,2),this._viewportCount=6,this._viewports=[new Gt(2,1,1,1),new Gt(0,1,1,1),new Gt(3,1,1,1),new Gt(1,1,1,1),new Gt(3,0,1,1),new Gt(1,0,1,1)],this._cubeDirections=[new N(1,0,0),new N(-1,0,0),new N(0,0,1),new N(0,0,-1),new N(0,1,0),new N(0,-1,0)],this._cubeUps=[new N(0,1,0),new N(0,1,0),new N(0,1,0),new N(0,1,0),new N(0,0,1),new N(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),Qu.setFromMatrixPosition(e.matrixWorld),i.position.copy(Qu),Gy.copy(i.position),Gy.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(Gy),i.updateMatrixWorld(),r.makeTranslation(-Qu.x,-Qu.y,-Qu.z),HE.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(HE)}}class y0 extends da{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new CH}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class TH extends dS{constructor(){super(new gs(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class x0 extends da{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Rt.DEFAULT_UP),this.updateMatrix(),this.target=new Rt,this.shadow=new TH}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class yP extends da{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class xP extends da{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class _P{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new N)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class AP extends da{constructor(e=new _P,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class _0 extends ci{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,o=new Ui(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new Ie().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new Ie().setHex(o.value);break;case"v2":r.uniforms[s].value=new ue().fromArray(o.value);break;case"v3":r.uniforms[s].value=new N().fromArray(o.value);break;case"v4":r.uniforms[s].value=new Gt().fromArray(o.value);break;case"m3":r.uniforms[s].value=new St().fromArray(o.value);break;case"m4":r.uniforms[s].value=new Xe().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new ue().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new ue().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return _0.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:iP,SpriteMaterial:eS,RawShaderMaterial:rP,ShaderMaterial:wi,PointsMaterial:wh,MeshPhysicalMaterial:bn,MeshStandardMaterial:oo,MeshPhongMaterial:sP,MeshToonMaterial:oP,MeshNormalMaterial:aP,MeshLambertMaterial:lP,MeshDepthMaterial:qA,MeshDistanceMaterial:ZA,MeshBasicMaterial:xn,MeshMatcapMaterial:cP,LineDashedMaterial:uP,LineBasicMaterial:li,Material:pn};return new t[e]}}class cr{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class SP extends gt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class MP extends ci{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Ui(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(m,y){if(t[y]!==void 0)return t[y];const x=m.interleavedBuffers[y],g=s(m,x.buffer),_=bc(x.type,g),M=new au(_,x.stride);return M.uuid=x.uuid,t[y]=M,M}function s(m,y){if(i[y]!==void 0)return i[y];const x=m.arrayBuffers[y],g=new Uint32Array(x).buffer;return i[y]=g,g}const o=e.isInstancedBufferGeometry?new SP:new gt,a=e.data.index;if(a!==void 0){const m=bc(a.type,a.array);o.setIndex(new yt(m,1))}const l=e.data.attributes;for(const m in l){const y=l[m];let A;if(y.isInterleavedBufferAttribute){const x=r(e.data,y.data);A=new so(x,y.itemSize,y.offset,y.normalized)}else{const x=bc(y.type,y.array),g=y.isInstancedBufferAttribute?ia:yt;A=new g(x,y.itemSize,y.normalized)}y.name!==void 0&&(A.name=y.name),y.usage!==void 0&&A.setUsage(y.usage),o.setAttribute(m,A)}const c=e.data.morphAttributes;if(c)for(const m in c){const y=c[m],A=[];for(let x=0,g=y.length;x<g;x++){const _=y[x];let M;if(_.isInterleavedBufferAttribute){const w=r(e.data,_.data);M=new so(w,_.itemSize,_.offset,_.normalized)}else{const w=bc(_.type,_.array);M=new yt(w,_.itemSize,_.normalized)}_.name!==void 0&&(M.name=_.name),A.push(M)}o.morphAttributes[m]=A}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const f=e.data.groups||e.data.drawcalls||e.data.offsets;if(f!==void 0)for(let m=0,y=f.length;m!==y;++m){const A=f[m];o.addGroup(A.start,A.count,A.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const m=new N;p.center!==void 0&&m.fromArray(p.center),o.boundingSphere=new Hn(m,p.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class RH extends ci{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===""?cr.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Ui(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(f){r!==void 0&&r(f),console.error("THREE:ObjectLoader: Can't parse "+e+".",f.message);return}const h=c.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?cr.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new Ui(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,i),h=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,h),this.bindLightTargets(c),t!==void 0){let f=!1;for(const p in o)if(o[p].data instanceof HTMLImageElement){f=!0;break}f===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),this.bindLightTargets(l),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new Zo().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new lu().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new MP;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in OE?a=OE[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new _0;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=Al.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function o(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:i.resourcePath+c;return o(h)}else return l.data?{data:bc(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new uS(t);s=new sh(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,h=e.length;c<h;c++){const f=e[c],p=f.url;if(Array.isArray(p)){const m=[];for(let y=0,A=p.length;y<A;y++){const x=p[y],g=a(x);g!==null&&(g instanceof HTMLImageElement?m.push(g):m.push(new vs(g.data,g.width,g.height)))}r[f.uuid]=new qa(m)}else{const m=a(f.url);r[f.uuid]=new qa(m)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:bc(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new sh(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const h=[];for(let f=0,p=c.length;f<p;f++){const m=c[f],y=await s(m);y!==null&&(y instanceof HTMLImageElement?h.push(y):h.push(new vs(y.data,y.width,y.height)))}i[l.uuid]=new qa(h)}else{const h=await s(l.url);i[l.uuid]=new qa(h)}}}return i}parseTextures(e,t){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],c=l.data;let h;Array.isArray(c)?(h=new xh,c.length===6&&(h.needsUpdate=!0)):(c&&c.data?h=new vs:h=new tn,c&&(h.needsUpdate=!0)),h.source=l,h.uuid=a.uuid,a.name!==void 0&&(h.name=a.name),a.mapping!==void 0&&(h.mapping=i(a.mapping,IH)),a.channel!==void 0&&(h.channel=a.channel),a.offset!==void 0&&h.offset.fromArray(a.offset),a.repeat!==void 0&&h.repeat.fromArray(a.repeat),a.center!==void 0&&h.center.fromArray(a.center),a.rotation!==void 0&&(h.rotation=a.rotation),a.wrap!==void 0&&(h.wrapS=i(a.wrap[0],GE),h.wrapT=i(a.wrap[1],GE)),a.format!==void 0&&(h.format=a.format),a.internalFormat!==void 0&&(h.internalFormat=a.internalFormat),a.type!==void 0&&(h.type=a.type),a.colorSpace!==void 0&&(h.colorSpace=a.colorSpace),a.minFilter!==void 0&&(h.minFilter=i(a.minFilter,VE)),a.magFilter!==void 0&&(h.magFilter=i(a.magFilter,VE)),a.anisotropy!==void 0&&(h.anisotropy=a.anisotropy),a.flipY!==void 0&&(h.flipY=a.flipY),a.generateMipmaps!==void 0&&(h.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(h.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(h.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(h.compareFunction=a.compareFunction),a.userData!==void 0&&(h.userData=a.userData),r[a.uuid]=h}return r}parseObject(e,t,i,r,s){let o;function a(p){return t[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),t[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const m=[];for(let y=0,A=p.length;y<A;y++){const x=p[y];i[x]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",x),m.push(i[x])}return m}return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),i[p]}}function c(p){return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),r[p]}let h,f;switch(e.type){case"Scene":o=new $A,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Ie(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new $g(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new Zg(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new vn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new gs(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new yP(e.color,e.intensity);break;case"DirectionalLight":o=new x0(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new y0(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new xP(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new v0(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new vP(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new AP().fromJSON(e);break;case"SkinnedMesh":h=a(e.geometry),f=l(e.material),o=new e0(h,f),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":h=a(e.geometry),f=l(e.material),o=new Yt(h,f);break;case"InstancedMesh":h=a(e.geometry),f=l(e.material);const p=e.count,m=e.instanceMatrix,y=e.instanceColor;o=new Mh(h,f,p),o.instanceMatrix=new ia(new Float32Array(m.array),16),y!==void 0&&(o.instanceColor=new ia(new Float32Array(y.array),y.itemSize));break;case"BatchedMesh":h=a(e.geometry),f=l(e.material),o=new jI(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,f),o.geometry=h,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(A=>{const x=new si;x.min.fromArray(A.boxMin),x.max.fromArray(A.boxMax);const g=new Hn;return g.radius=A.sphereRadius,g.center.fromArray(A.sphereCenter),{boxInitialized:A.boxInitialized,box:x,sphereInitialized:A.sphereInitialized,sphere:g}}),o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=c(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=c(e.colorsTexture.uuid));break;case"LOD":o=new WI;break;case"Line":o=new As(a(e.geometry),l(e.material));break;case"LineLoop":o=new t0(a(e.geometry),l(e.material));break;case"LineSegments":o=new Lr(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new n0(a(e.geometry),l(e.material));break;case"Sprite":o=new VI(l(e.material));break;case"Group":o=new Rr;break;case"Bone":o=new Sh;break;default:o=new Rt}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let m=0;m<p.length;m++)o.add(this.parseObject(p[m],t,i,r,s))}if(e.animations!==void 0){const p=e.animations;for(let m=0;m<p.length;m++){const y=p[m];o.animations.push(s[y])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const p=e.levels;for(let m=0;m<p.length;m++){const y=p[m],A=o.getObjectByProperty("uuid",y.object);A!==void 0&&o.addLevel(A,y.distance,y.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,r=e.getObjectByProperty("uuid",i);r!==void 0?t.target=r:t.target=new Rt}})}}const IH={UVMapping:Gg,CubeReflectionMapping:io,CubeRefractionMapping:ta,EquirectangularReflectionMapping:Yd,EquirectangularRefractionMapping:Qd,CubeUVReflectionMapping:su},GE={RepeatWrapping:Yr,ClampToEdgeWrapping:Ki,MirroredRepeatWrapping:ml},VE={NearestFilter:zn,NearestMipmapNearestFilter:ph,NearestMipmapLinearFilter:Vo,LinearFilter:$t,LinearMipmapNearestFilter:sl,LinearMipmapLinearFilter:Yi};class hS extends ci{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Js.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(c=>{t&&t(c),s.manager.itemEnd(e)}).catch(c=>{r&&r(c)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return Js.add(e,c),t&&t(c),s.manager.itemEnd(e),c}).catch(function(c){r&&r(c),Js.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Js.add(e,l),s.manager.itemStart(e)}}let Pp;class fS{static getContext(){return Pp===void 0&&(Pp=new(window.AudioContext||window.webkitAudioContext)),Pp}static setContext(e){Pp=e}}class PH extends ci{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Ui(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);fS.getContext().decodeAudioData(c,function(f){t(f)}).catch(a)}catch(c){a(c)}},i,r);function a(l){r?r(l):console.error(l),s.manager.itemError(e)}}}const WE=new Xe,jE=new Xe,Ia=new Xe;class BH{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new vn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new vn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Ia.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(al*t.fov*.5)/t.zoom;let a,l;jE.elements[12]=-r,WE.elements[12]=r,a=-o*t.aspect+s,l=o*t.aspect+s,Ia.elements[0]=2*t.near/(l-a),Ia.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Ia),a=-o*t.aspect-s,l=o*t.aspect-s,Ia.elements[0]=2*t.near/(l-a),Ia.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Ia)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(jE),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(WE)}}class pS{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=XE(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=XE();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function XE(){return performance.now()}const Pa=new N,JE=new sn,LH=new N,Ba=new N;class DH extends Rt{constructor(){super(),this.type="AudioListener",this.context=fS.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new pS}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Pa,JE,LH),Ba.set(0,0,-1).applyQuaternion(JE),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Pa.x,r),t.positionY.linearRampToValueAtTime(Pa.y,r),t.positionZ.linearRampToValueAtTime(Pa.z,r),t.forwardX.linearRampToValueAtTime(Ba.x,r),t.forwardY.linearRampToValueAtTime(Ba.y,r),t.forwardZ.linearRampToValueAtTime(Ba.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(Pa.x,Pa.y,Pa.z),t.setOrientation(Ba.x,Ba.y,Ba.z,i.x,i.y,i.z)}}let wP=class extends Rt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}};const La=new N,KE=new sn,NH=new N,Da=new N;class FH extends wP{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(La,KE,NH),Da.set(0,0,1).applyQuaternion(KE);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(La.x,i),t.positionY.linearRampToValueAtTime(La.y,i),t.positionZ.linearRampToValueAtTime(La.z,i),t.orientationX.linearRampToValueAtTime(Da.x,i),t.orientationY.linearRampToValueAtTime(Da.y,i),t.orientationZ.linearRampToValueAtTime(Da.z,i)}else t.setPosition(La.x,La.y,La.z),t.setOrientation(Da.x,Da.y,Da.z)}}class UH{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class EP{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(i[l]!==i[l+t]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){sn.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;sn.multiplyQuaternionsFlat(e,o,e,t,e,i),sn.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const mS="\\[\\]\\.:\\/",OH=new RegExp("["+mS+"]","g"),gS="[^"+mS+"]",kH="[^"+mS.replace("\\.","")+"]",zH=/((?:WC+[\/:])*)/.source.replace("WC",gS),HH=/(WCOD+)?/.source.replace("WCOD",kH),GH=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",gS),VH=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",gS),WH=new RegExp("^"+zH+HH+GH+VH+"$"),jH=["material","materials","bones","map"];class XH{constructor(e,t,i){const r=i||Ht.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class Ht{constructor(e,t,i){this.path=t,this.parsedPath=i||Ht.parseTrackName(t),this.node=Ht.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Ht.Composite(e,t,i):new Ht(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(OH,"")}static parseTrackName(e){const t=WH.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);jH.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=Ht.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let c=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===c){c=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[r];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Ht.Composite=XH;Ht.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Ht.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Ht.prototype.GetterByBindingType=[Ht.prototype._getValue_direct,Ht.prototype._getValue_array,Ht.prototype._getValue_arrayElement,Ht.prototype._getValue_toArray];Ht.prototype.SetterByBindingTypeAndVersioning=[[Ht.prototype._setValue_direct,Ht.prototype._setValue_direct_setNeedsUpdate,Ht.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ht.prototype._setValue_array,Ht.prototype._setValue_array_setNeedsUpdate,Ht.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ht.prototype._setValue_arrayElement,Ht.prototype._setValue_arrayElement_setNeedsUpdate,Ht.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ht.prototype._setValue_fromArray,Ht.prototype._setValue_fromArray_setNeedsUpdate,Ht.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class JH{constructor(){this.isAnimationObjectGroup=!0,this.uuid=lr(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let h=0,f=arguments.length;h!==f;++h){const p=arguments[h],m=p.uuid;let y=t[m];if(y===void 0){y=l++,t[m]=y,e.push(p);for(let A=0,x=o;A!==x;++A)s[A].push(new Ht(p,i[A],r[A]))}else if(y<c){a=e[y];const A=--c,x=e[A];t[x.uuid]=y,e[y]=x,t[m]=A,e[A]=p;for(let g=0,_=o;g!==_;++g){const M=s[g],w=M[A];let C=M[y];M[y]=w,C===void 0&&(C=new Ht(p,i[g],r[g])),M[A]=C}}else e[y]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,h=t[c];if(h!==void 0&&h>=s){const f=s++,p=e[f];t[p.uuid]=h,e[h]=p,t[c]=f,e[f]=l;for(let m=0,y=r;m!==y;++m){const A=i[m],x=A[f],g=A[h];A[h]=x,A[f]=g}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],h=c.uuid,f=t[h];if(f!==void 0)if(delete t[h],f<s){const p=--s,m=e[p],y=--o,A=e[y];t[m.uuid]=f,e[f]=m,t[A.uuid]=p,e[p]=A,e.pop();for(let x=0,g=r;x!==g;++x){const _=i[x],M=_[p],w=_[y];_[f]=M,_[p]=w,_.pop()}}else{const p=--o,m=e[p];p>0&&(t[m.uuid]=f),e[f]=m,e.pop();for(let y=0,A=r;y!==A;++y){const x=i[y];x[f]=x[p],x.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,h=this.nCachedObjects_,f=new Array(c);r=s.length,i[e]=r,o.push(e),a.push(t),s.push(f);for(let p=h,m=l.length;p!==m;++p){const y=l[p];f[p]=new Ht(y,e,t)}return f}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];t[c]=i,o[i]=l,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class bP{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:Ya,endingEnd:Ya};for(let c=0;c!==o;++c){const h=s[c].createInterpolant(null);a[c]=h,h.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=fI,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+i,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case GA:for(let h=0,f=l.length;h!==f;++h)l[h].evaluate(o),c[h].accumulateAdditive(a);break;case Yg:default:for(let h=0,f=l.length;h!==f;++h)l[h].evaluate(o),c[h].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===pI;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===hI){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=Qa,r.endingEnd=Qa):(e?r.endingStart=this.zeroSlopeAtStart?Qa:Ya:r.endingStart=qd,t?r.endingEnd=this.zeroSlopeAtEnd?Qa:Ya:r.endingEnd=qd)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=i,this}}const KH=new Float32Array(1);class YH extends Ss{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let h=c[l];h===void 0&&(h={},c[l]=h);for(let f=0;f!==s;++f){const p=r[f],m=p.name;let y=h[m];if(y!==void 0)++y.referenceCount,o[f]=y;else{if(y=o[f],y!==void 0){y._cacheIndex===null&&(++y.referenceCount,this._addInactiveBinding(y,l,m));continue}const A=t&&t._propertyBindings[f].binding.parsedPath;y=new EP(Ht.create(i,m,A),p.ValueTypeName,p.getValueSize()),++y.referenceCount,this._addInactiveBinding(y,l,m),o[f]=y}a[f].resultBuffer=y.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],h=e._byClipCacheIndex;c._byClipCacheIndex=h,l[h]=c,l.pop(),e._byClipCacheIndex=null;const f=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete f[p],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new lS(new Float32Array(2),new Float32Array(2),1,KH),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?Al.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(i===void 0&&(o!==null?i=o.blendMode:i=Yg),l!==void 0){const f=l.actionByRoot[s];if(f!==void 0&&f.blendMode===i)return f;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const h=new bP(this,o,t,i);return this._bindAction(h,c),this._addInactiveAction(h,a,s),h}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?Al.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==i;++c)t[c]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const h=c._cacheIndex,f=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,f._cacheIndex=h,t[h]=f,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class vS{constructor(e){this.value=e}clone(){return new vS(this.value.clone===void 0?this.value:this.value.clone())}}let QH=0;class qH extends Ss{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:QH++}),this.name="",this.usage=Zd,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++){const s=Array.isArray(t[i])?t[i]:[t[i]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class ZH extends au{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class $H{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const YE=new Xe;class yS{constructor(e,t,i=0,r=1/0){this.ray=new _s(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new ll,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return YE.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(YE),this}intersectObject(e,t=!0,i=[]){return T_(e,this,i,t),i.sort(QE),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)T_(e[r],this,i,t);return i.sort(QE),i}}function QE(n,e){return n.distance-e.distance}function T_(n,e,t,i){let r=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(r=!1),r===!0&&i===!0){const s=n.children;for(let o=0,a=s.length;o<a;o++)T_(s[o],e,t,!0)}}class xg{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(En(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class eG{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}class xS{constructor(e,t,i,r){xS.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,i,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let i=0;i<4;i++)this.elements[i]=e[i+t];return this}set(e,t,i,r){const s=this.elements;return s[0]=e,s[2]=t,s[1]=i,s[3]=r,this}}const qE=new ue;class CP{constructor(e=new ue(1/0,1/0),t=new ue(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=qE.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,qE).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ZE=new N,Bp=new N;class TP{constructor(e=new N,t=new N){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){ZE.subVectors(e,this.start),Bp.subVectors(this.end,this.start);const i=Bp.dot(Bp);let s=Bp.dot(ZE)/i;return t&&(s=En(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const $E=new N;class tG extends Rt{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new gt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,h=a/l*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(h),Math.sin(h),1)}i.setAttribute("position",new et(r,3));const s=new li({fog:!1,toneMapped:!1});this.cone=new Lr(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),$E.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt($E),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Io=new N,Lp=new Xe,Vy=new Xe;class nG extends Lr{constructor(e){const t=RP(e),i=new gt,r=[],s=[],o=new Ie(0,0,1),a=new Ie(0,1,0);for(let c=0;c<t.length;c++){const h=t[c];h.parent&&h.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new et(r,3)),i.setAttribute("color",new et(s,3));const l=new li({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");Vy.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(Lp.multiplyMatrices(Vy,a.matrixWorld),Io.setFromMatrixPosition(Lp),r.setXYZ(o,Io.x,Io.y,Io.z),Lp.multiplyMatrices(Vy,a.parent.matrixWorld),Io.setFromMatrixPosition(Lp),r.setXYZ(o+1,Io.x,Io.y,Io.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function RP(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,RP(n.children[t]));return e}class iG extends Yt{constructor(e,t,i){const r=new qs(t,4,2),s=new xn({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const rG=new N,eb=new Ie,tb=new Ie;class sG extends Rt{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new bh(t);r.rotateY(Math.PI*.5),this.material=new xn({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new yt(o,3)),this.add(new Yt(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");eb.copy(this.light.color),tb.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?eb:tb;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(rG.setFromMatrixPosition(this.light.matrixWorld).negate())}}class oG extends Lr{constructor(e=10,t=10,i=4473924,r=8947848){i=new Ie(i),r=new Ie(r);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let p=0,m=0,y=-a;p<=t;p++,y+=o){l.push(-a,0,y,a,0,y),l.push(y,0,-a,y,0,a);const A=p===s?i:r;A.toArray(c,m),m+=3,A.toArray(c,m),m+=3,A.toArray(c,m),m+=3,A.toArray(c,m),m+=3}const h=new gt;h.setAttribute("position",new et(l,3)),h.setAttribute("color",new et(c,3));const f=new li({vertexColors:!0,toneMapped:!1});super(h,f),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class aG extends Lr{constructor(e=10,t=16,i=8,r=64,s=4473924,o=8947848){s=new Ie(s),o=new Ie(o);const a=[],l=[];if(t>1)for(let f=0;f<t;f++){const p=f/t*(Math.PI*2),m=Math.sin(p)*e,y=Math.cos(p)*e;a.push(0,0,0),a.push(m,0,y);const A=f&1?s:o;l.push(A.r,A.g,A.b),l.push(A.r,A.g,A.b)}for(let f=0;f<i;f++){const p=f&1?s:o,m=e-e/i*f;for(let y=0;y<r;y++){let A=y/r*(Math.PI*2),x=Math.sin(A)*m,g=Math.cos(A)*m;a.push(x,0,g),l.push(p.r,p.g,p.b),A=(y+1)/r*(Math.PI*2),x=Math.sin(A)*m,g=Math.cos(A)*m,a.push(x,0,g),l.push(p.r,p.g,p.b)}}const c=new gt;c.setAttribute("position",new et(a,3)),c.setAttribute("color",new et(l,3));const h=new li({vertexColors:!0,toneMapped:!1});super(c,h),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const nb=new N,Dp=new N,ib=new N;class lG extends Rt{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new gt;r.setAttribute("position",new et([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new li({fog:!1,toneMapped:!1});this.lightPlane=new As(r,s),this.add(this.lightPlane),r=new gt,r.setAttribute("position",new et([0,0,0,0,0,1],3)),this.targetLine=new As(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),nb.setFromMatrixPosition(this.light.matrixWorld),Dp.setFromMatrixPosition(this.light.target.matrixWorld),ib.subVectors(Dp,nb),this.lightPlane.lookAt(Dp),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Dp),this.targetLine.scale.z=ib.length()}}const Np=new N,Mn=new yh;class cG extends Lr{constructor(e){const t=new gt,i=new li({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(y,A){l(y),l(A)}function l(y){r.push(0,0,0),s.push(0,0,0),o[y]===void 0&&(o[y]=[]),o[y].push(r.length/3-1)}t.setAttribute("position",new et(r,3)),t.setAttribute("color",new et(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new Ie(16755200),h=new Ie(16711680),f=new Ie(43775),p=new Ie(16777215),m=new Ie(3355443);this.setColors(c,h,f,p,m)}setColors(e,t,i,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;Mn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Rn("c",t,e,Mn,0,0,-1),Rn("t",t,e,Mn,0,0,1),Rn("n1",t,e,Mn,-i,-r,-1),Rn("n2",t,e,Mn,i,-r,-1),Rn("n3",t,e,Mn,-i,r,-1),Rn("n4",t,e,Mn,i,r,-1),Rn("f1",t,e,Mn,-i,-r,1),Rn("f2",t,e,Mn,i,-r,1),Rn("f3",t,e,Mn,-i,r,1),Rn("f4",t,e,Mn,i,r,1),Rn("u1",t,e,Mn,i*.7,r*1.1,-1),Rn("u2",t,e,Mn,-i*.7,r*1.1,-1),Rn("u3",t,e,Mn,0,r*2,-1),Rn("cf1",t,e,Mn,-i,0,1),Rn("cf2",t,e,Mn,i,0,1),Rn("cf3",t,e,Mn,0,-r,1),Rn("cf4",t,e,Mn,0,r,1),Rn("cn1",t,e,Mn,-i,0,-1),Rn("cn2",t,e,Mn,i,0,-1),Rn("cn3",t,e,Mn,0,-r,-1),Rn("cn4",t,e,Mn,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Rn(n,e,t,i,r,s,o){Np.set(r,s,o).unproject(i);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let c=0,h=a.length;c<h;c++)l.setXYZ(a[c],Np.x,Np.y,Np.z)}}const Fp=new si;class uG extends Lr{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new gt;s.setIndex(new yt(i,1)),s.setAttribute("position",new yt(r,3)),super(s,new li({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Fp.setFromObject(this.object),Fp.isEmpty())return;const t=Fp.min,i=Fp.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class dG extends Lr{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new gt;s.setIndex(new yt(i,1)),s.setAttribute("position",new et(r,3)),super(s,new li({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class hG extends As{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new gt;o.setAttribute("position",new et(s,3)),o.computeBoundingSphere(),super(o,new li({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new gt;l.setAttribute("position",new et(a,3)),l.computeBoundingSphere(),this.add(new Yt(l,new xn({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const rb=new N;let Up,Wy;class fG extends Rt{constructor(e=new N(0,0,1),t=new N(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",Up===void 0&&(Up=new gt,Up.setAttribute("position",new et([0,0,0,0,1,0],3)),Wy=new cu(0,.5,1,5,1),Wy.translate(0,-.5,0)),this.position.copy(t),this.line=new As(Up,new li({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Yt(Wy,new xn({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{rb.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(rb,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class pG extends Lr{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new gt;r.setAttribute("position",new et(t,3)),r.setAttribute("color",new et(i,3));const s=new li({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new Ie,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class mG{constructor(){this.type="ShapePath",this.color=new Ie,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new th,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(g){const _=[];for(let M=0,w=g.length;M<w;M++){const C=g[M],R=new Zo;R.curves=C.curves,_.push(R)}return _}function i(g,_){const M=_.length;let w=!1;for(let C=M-1,R=0;R<M;C=R++){let P=_[C],B=_[R],I=B.x-P.x,b=B.y-P.y;if(Math.abs(b)>Number.EPSILON){if(b<0&&(P=_[R],I=-I,B=_[C],b=-b),g.y<P.y||g.y>B.y)continue;if(g.y===P.y){if(g.x===P.x)return!0}else{const U=b*(g.x-P.x)-I*(g.y-P.y);if(U===0)return!0;if(U<0)continue;w=!w}}else{if(g.y!==P.y)continue;if(B.x<=g.x&&g.x<=P.x||P.x<=g.x&&g.x<=B.x)return!0}}return w}const r=ys.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new Zo,l.curves=a.curves,c.push(l),c;let h=!r(s[0].getPoints());h=e?!h:h;const f=[],p=[];let m=[],y=0,A;p[y]=void 0,m[y]=[];for(let g=0,_=s.length;g<_;g++)a=s[g],A=a.getPoints(),o=r(A),o=e?!o:o,o?(!h&&p[y]&&y++,p[y]={s:new Zo,p:A},p[y].s.curves=a.curves,h&&y++,m[y]=[]):m[y].push({h:a,p:A[0]});if(!p[0])return t(s);if(p.length>1){let g=!1,_=0;for(let M=0,w=p.length;M<w;M++)f[M]=[];for(let M=0,w=p.length;M<w;M++){const C=m[M];for(let R=0;R<C.length;R++){const P=C[R];let B=!0;for(let I=0;I<p.length;I++)i(P.p,p[I].p)&&(M!==I&&_++,B?(B=!1,f[I].push(P)):g=!0);B&&f[M].push(P)}}_>0&&g===!1&&(m=f)}let x;for(let g=0,_=p.length;g<_;g++){l=p[g].s,c.push(l),x=m[g];for(let M=0,w=x.length;M<w;M++)l.holes.push(x[M].h)}return c}}let gG=class extends Ss{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}};class vG extends ai{constructor(e=1,t=1,i=1,r={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,t,{...r,count:i}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:El}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=El);const yG=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:BA,AddEquation:ko,AddOperation:rI,AdditiveAnimationBlendMode:GA,AdditiveBlending:Dm,AgXToneMapping:cI,AlphaFormat:FA,AlwaysCompare:wI,AlwaysDepth:Om,AlwaysStencilFunc:x_,AmbientLight:yP,AnimationAction:bP,AnimationClip:Al,AnimationLoader:SH,AnimationMixer:YH,AnimationObjectGroup:JH,AnimationUtils:yH,ArcCurve:JI,ArrayCamera:zI,ArrowHelper:fG,AttachedBindMode:y_,Audio:wP,AudioAnalyser:UH,AudioContext:fS,AudioListener:DH,AudioLoader:PH,AxesHelper:pG,BackSide:ri,BasicDepthPacking:mI,BasicShadowMap:OR,BatchedMesh:jI,Bone:Sh,BooleanKeyframeTrack:Tl,Box2:CP,Box3:si,Box3Helper:dG,BoxGeometry:ca,BoxHelper:uG,BufferAttribute:yt,BufferGeometry:gt,BufferGeometryLoader:MP,ByteType:LA,Cache:Js,Camera:yh,CameraHelper:cG,CanvasTexture:Gz,CapsuleGeometry:s0,CatmullRomCurve3:KI,CineonToneMapping:aI,CircleGeometry:o0,ClampToEdgeWrapping:Ki,Clock:pS,Color:Ie,ColorKeyframeTrack:cS,ColorManagement:Ft,CompressedArrayTexture:zz,CompressedCubeTexture:Hz,CompressedTexture:i0,CompressedTextureLoader:MH,ConeGeometry:a0,ConstantAlphaFactor:tI,ConstantColorFactor:$R,Controls:gG,CubeCamera:BI,CubeReflectionMapping:io,CubeRefractionMapping:ta,CubeTexture:xh,CubeTextureLoader:wH,CubeUVReflectionMapping:su,CubicBezierCurve:nS,CubicBezierCurve3:YI,CubicInterpolant:fP,CullFaceBack:m_,CullFaceFront:UR,CullFaceFrontBack:AN,CullFaceNone:FR,Curve:qr,CurvePath:qI,CustomBlending:kR,CustomToneMapping:lI,CylinderGeometry:cu,Cylindrical:eG,Data3DTexture:JA,DataArrayTexture:Qg,DataTexture:vs,DataTextureLoader:EH,DataUtils:PF,DecrementStencilOp:BN,DecrementWrapStencilOp:DN,DefaultLoadingManager:gP,DepthFormat:ol,DepthStencilFormat:vl,DepthTexture:Ah,DetachedBindMode:dI,DirectionalLight:x0,DirectionalLightHelper:lG,DiscreteInterpolant:pP,DodecahedronGeometry:l0,DoubleSide:Cr,DstAlphaFactor:KR,DstColorFactor:QR,DynamicCopyUsage:YN,DynamicDrawUsage:VN,DynamicReadUsage:XN,EdgesGeometry:ZI,EllipseCurve:r0,EqualCompare:_I,EqualDepth:zm,EqualStencilFunc:ON,EquirectangularReflectionMapping:Yd,EquirectangularRefractionMapping:Qd,Euler:Fi,EventDispatcher:Ss,ExtrudeGeometry:u0,FileLoader:Ui,Float16BufferAttribute:UF,Float32BufferAttribute:et,FloatType:Di,Fog:$g,FogExp2:Zg,FramebufferTexture:kz,FrontSide:Kr,Frustum:_h,GLBufferAttribute:$H,GLSL1:qN,GLSL3:__,GreaterCompare:AI,GreaterDepth:Gm,GreaterEqualCompare:MI,GreaterEqualDepth:Hm,GreaterEqualStencilFunc:GN,GreaterStencilFunc:zN,GridHelper:oG,Group:Rr,HalfFloatType:aa,HemisphereLight:vP,HemisphereLightHelper:sG,IcosahedronGeometry:d0,ImageBitmapLoader:hS,ImageLoader:sh,ImageUtils:CI,IncrementStencilOp:PN,IncrementWrapStencilOp:LN,InstancedBufferAttribute:ia,InstancedBufferGeometry:SP,InstancedInterleavedBuffer:ZH,InstancedMesh:Mh,Int16BufferAttribute:NF,Int32BufferAttribute:FF,Int8BufferAttribute:BF,IntType:Vg,InterleavedBuffer:au,InterleavedBufferAttribute:so,Interpolant:Cl,InterpolateDiscrete:yl,InterpolateLinear:na,InterpolateSmooth:om,InvertStencilOp:NN,KeepStencilOp:Ga,KeyframeTrack:Zr,LOD:WI,LatheGeometry:Eh,Layers:ll,LessCompare:xI,LessDepth:km,LessEqualCompare:WA,LessEqualDepth:pl,LessEqualStencilFunc:kN,LessStencilFunc:UN,Light:da,LightProbe:AP,Line:As,Line3:TP,LineBasicMaterial:li,LineCurve:iS,LineCurve3:QI,LineDashedMaterial:uP,LineLoop:t0,LineSegments:Lr,LinearFilter:$t,LinearInterpolant:lS,LinearMipMapLinearFilter:EN,LinearMipMapNearestFilter:wN,LinearMipmapLinearFilter:Yi,LinearMipmapNearestFilter:sl,LinearSRGBColorSpace:bi,LinearToneMapping:sI,LinearTransfer:vh,Loader:ci,LoaderUtils:cr,LoadingManager:uS,LoopOnce:hI,LoopPingPong:pI,LoopRepeat:fI,LuminanceAlphaFormat:kA,LuminanceFormat:OA,MOUSE:za,Material:pn,MaterialLoader:_0,MathUtils:XA,Matrix2:xS,Matrix3:St,Matrix4:Xe,MaxEquation:VR,Mesh:Yt,MeshBasicMaterial:xn,MeshDepthMaterial:qA,MeshDistanceMaterial:ZA,MeshLambertMaterial:lP,MeshMatcapMaterial:cP,MeshNormalMaterial:aP,MeshPhongMaterial:sP,MeshPhysicalMaterial:bn,MeshStandardMaterial:oo,MeshToonMaterial:oP,MinEquation:GR,MirroredRepeatWrapping:ml,MixOperation:iI,MultiplyBlending:v_,MultiplyOperation:fh,NearestFilter:zn,NearestMipMapLinearFilter:MN,NearestMipMapNearestFilter:SN,NearestMipmapLinearFilter:Vo,NearestMipmapNearestFilter:ph,NeutralToneMapping:uI,NeverCompare:yI,NeverDepth:Um,NeverStencilFunc:FN,NoBlending:Ys,NoColorSpace:Vs,NoToneMapping:ms,NormalAnimationBlendMode:Yg,NormalBlending:rl,NotEqualCompare:SI,NotEqualDepth:Vm,NotEqualStencilFunc:HN,NumberKeyframeTrack:ao,Object3D:Rt,ObjectLoader:RH,ObjectSpaceNormalMap:vI,OctahedronGeometry:bh,OneFactor:jR,OneMinusConstantAlphaFactor:nI,OneMinusConstantColorFactor:eI,OneMinusDstAlphaFactor:YR,OneMinusDstColorFactor:qR,OneMinusSrcAlphaFactor:Fm,OneMinusSrcColorFactor:JR,OrthographicCamera:gs,PCFShadowMap:Hg,PCFSoftShadowMap:Md,PMREMGenerator:A_,Path:th,PerspectiveCamera:vn,Plane:br,PlaneGeometry:bl,PlaneHelper:hG,PointLight:y0,PointLightHelper:iG,Points:n0,PointsMaterial:wh,PolarGridHelper:aG,PolyhedronGeometry:ua,PositionalAudio:FH,PropertyBinding:Ht,PropertyMixer:EP,QuadraticBezierCurve:rS,QuadraticBezierCurve3:sS,Quaternion:sn,QuaternionKeyframeTrack:lo,QuaternionLinearInterpolant:mP,RED_GREEN_RGTC2_Format:pg,RED_RGTC1_Format:HA,REVISION:El,RGBADepthPacking:gI,RGBAFormat:Mi,RGBAIntegerFormat:Kg,RGBA_ASTC_10x10_Format:lg,RGBA_ASTC_10x5_Format:sg,RGBA_ASTC_10x6_Format:og,RGBA_ASTC_10x8_Format:ag,RGBA_ASTC_12x10_Format:cg,RGBA_ASTC_12x12_Format:ug,RGBA_ASTC_4x4_Format:qm,RGBA_ASTC_5x4_Format:Zm,RGBA_ASTC_5x5_Format:$m,RGBA_ASTC_6x5_Format:eg,RGBA_ASTC_6x6_Format:tg,RGBA_ASTC_8x5_Format:ng,RGBA_ASTC_8x6_Format:ig,RGBA_ASTC_8x8_Format:rg,RGBA_BPTC_Format:Td,RGBA_ETC2_EAC_Format:Qm,RGBA_PVRTC_2BPPV1_Format:Jm,RGBA_PVRTC_4BPPV1_Format:Xm,RGBA_S3TC_DXT1_Format:Ed,RGBA_S3TC_DXT3_Format:bd,RGBA_S3TC_DXT5_Format:Cd,RGBDepthPacking:CN,RGBFormat:UA,RGBIntegerFormat:bN,RGB_BPTC_SIGNED_Format:dg,RGB_BPTC_UNSIGNED_Format:hg,RGB_ETC1_Format:Km,RGB_ETC2_Format:Ym,RGB_PVRTC_2BPPV1_Format:jm,RGB_PVRTC_4BPPV1_Format:Wm,RGB_S3TC_DXT1_Format:wd,RGDepthPacking:TN,RGFormat:zA,RGIntegerFormat:Jg,RawShaderMaterial:rP,Ray:_s,Raycaster:yS,RectAreaLight:xP,RedFormat:Xg,RedIntegerFormat:mh,ReinhardToneMapping:oI,RenderTarget:TI,RepeatWrapping:Yr,ReplaceStencilOp:IN,ReverseSubtractEquation:HR,RingGeometry:h0,SIGNED_RED_GREEN_RGTC2_Format:mg,SIGNED_RED_RGTC1_Format:fg,SRGBColorSpace:In,SRGBTransfer:Qt,Scene:$A,ShaderChunk:bt,ShaderLib:Wr,ShaderMaterial:wi,ShadowMaterial:iP,Shape:Zo,ShapeGeometry:Ch,ShapePath:mG,ShapeUtils:ys,ShortType:DA,Skeleton:lu,SkeletonHelper:nG,SkinnedMesh:e0,Source:qa,Sphere:Hn,SphereGeometry:qs,Spherical:xg,SphericalHarmonics3:_P,SplineCurve:oS,SpotLight:v0,SpotLightHelper:tG,Sprite:VI,SpriteMaterial:eS,SrcAlphaFactor:Nm,SrcAlphaSaturateFactor:ZR,SrcColorFactor:XR,StaticCopyUsage:KN,StaticDrawUsage:Zd,StaticReadUsage:jN,StereoCamera:BH,StreamCopyUsage:QN,StreamDrawUsage:WN,StreamReadUsage:JN,StringKeyframeTrack:Rl,SubtractEquation:zR,SubtractiveBlending:g_,TOUCH:Ha,TangentSpaceNormalMap:la,TetrahedronGeometry:f0,Texture:tn,TextureLoader:zo,TextureUtils:_z,TorusGeometry:p0,TorusKnotGeometry:m0,Triangle:Si,TriangleFanDrawMode:xl,TriangleStripDrawMode:gh,TrianglesDrawMode:VA,TubeGeometry:g0,UVMapping:Gg,Uint16BufferAttribute:KA,Uint32BufferAttribute:YA,Uint8BufferAttribute:LF,Uint8ClampedBufferAttribute:DF,Uniform:vS,UniformsGroup:qH,UniformsLib:Ne,UniformsUtils:PI,UnsignedByteType:Qr,UnsignedInt248Type:gl,UnsignedInt5999Type:NA,UnsignedIntType:ro,UnsignedShort4444Type:Wg,UnsignedShort5551Type:jg,UnsignedShortType:Yc,VSMShadowMap:Hr,Vector2:ue,Vector3:N,Vector4:Gt,VectorKeyframeTrack:co,VideoTexture:XI,WebGL3DRenderTarget:AF,WebGLArrayRenderTarget:_F,WebGLCoordinateSystem:hs,WebGLCubeRenderTarget:LI,WebGLMultipleRenderTargets:vG,WebGLRenderTarget:ai,WebGLRenderer:HI,WebGLUtils:kI,WebGPUCoordinateSystem:$d,WireframeGeometry:nP,WrapAroundEnding:qd,ZeroCurvatureEnding:Ya,ZeroFactor:WR,ZeroSlopeEnding:Qa,ZeroStencilOp:RN,createCanvasElement:bI},Symbol.toStringTag,{value:"Module"}));var IP={exports:{}},Il={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Il.ConcurrentRoot=1;Il.ContinuousEventPriority=4;Il.DefaultEventPriority=16;Il.DiscreteEventPriority=1;Il.IdleEventPriority=536870912;Il.LegacyRoot=0;IP.exports=Il;var Rc=IP.exports;function xG(n){let e;const t=new Set,i=(c,h)=>{const f=typeof c=="function"?c(e):c;if(f!==e){const p=e;e=h?f:Object.assign({},e,f),t.forEach(m=>m(e,p))}},r=()=>e,s=(c,h=r,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=h(e);function m(){const y=h(e);if(!f(p,y)){const A=p;c(p=y,A)}}return t.add(m),()=>t.delete(m)},l={setState:i,getState:r,subscribe:(c,h,f)=>h||f?s(c,h,f):(t.add(c),()=>t.delete(c)),destroy:()=>t.clear()};return e=n(i,r,l),l}const _G=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),sb=_G?z.useEffect:z.useLayoutEffect;function PP(n){const e=typeof n=="function"?xG(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=z.useReducer(x=>x+1,0),o=e.getState(),a=z.useRef(o),l=z.useRef(i),c=z.useRef(r),h=z.useRef(!1),f=z.useRef();f.current===void 0&&(f.current=i(o));let p,m=!1;(a.current!==o||l.current!==i||c.current!==r||h.current)&&(p=i(o),m=!r(f.current,p)),sb(()=>{m&&(f.current=p),a.current=o,l.current=i,c.current=r,h.current=!1});const y=z.useRef(o);sb(()=>{const x=()=>{try{const _=e.getState(),M=l.current(_);c.current(f.current,M)||(a.current=_,f.current=M,s())}catch{h.current=!0,s()}},g=e.subscribe(x);return e.getState()!==y.current&&x(),g},[]);const A=m?p:f.current;return z.useDebugValue(A),A};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}const AG=n=>typeof n=="object"&&typeof n.then=="function",$a=[];function BP(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}function LP(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const s of $a)if(BP(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return i.lifespan&&i.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,i.lifespan)),s.response;if(!t)throw s.promise}const r={keys:e,equal:i.equal,remove:()=>{const s=$a.indexOf(r);s!==-1&&$a.splice(s,1)},promise:(AG(n)?n:n(...e)).then(s=>{r.response=s,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(s=>r.error=s)};if($a.push(r),!t)throw r.promise}const DP=(n,e,t)=>LP(n,e,!1,t),SG=(n,e,t)=>void LP(n,e,!0,t),MG=n=>{if(n===void 0||n.length===0)$a.splice(0,$a.length);else{const e=$a.find(t=>BP(n,t.keys,t.equal));e&&e.remove()}};var NP={exports:{}},jy={exports:{}},Xy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ob;function wG(){return ob||(ob=1,function(n){function e(D,W){var j=D.length;D.push(W);e:for(;0<j;){var Z=j-1>>>1,me=D[Z];if(0<r(me,W))D[Z]=W,D[j]=me,j=Z;else break e}}function t(D){return D.length===0?null:D[0]}function i(D){if(D.length===0)return null;var W=D[0],j=D.pop();if(j!==W){D[0]=j;e:for(var Z=0,me=D.length,Be=me>>>1;Z<Be;){var re=2*(Z+1)-1,xe=D[re],Ee=re+1,_e=D[Ee];if(0>r(xe,j))Ee<me&&0>r(_e,xe)?(D[Z]=_e,D[Ee]=j,Z=Ee):(D[Z]=xe,D[re]=j,Z=re);else if(Ee<me&&0>r(_e,j))D[Z]=_e,D[Ee]=j,Z=Ee;else break e}}return W}function r(D,W){var j=D.sortIndex-W.sortIndex;return j!==0?j:D.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,f=null,p=3,m=!1,y=!1,A=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(D){for(var W=t(c);W!==null;){if(W.callback===null)i(c);else if(W.startTime<=D)i(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=t(c)}}function w(D){if(A=!1,M(D),!y)if(t(l)!==null)y=!0,te(C);else{var W=t(c);W!==null&&le(w,W.startTime-D)}}function C(D,W){y=!1,A&&(A=!1,g(B),B=-1),m=!0;var j=p;try{for(M(W),f=t(l);f!==null&&(!(f.expirationTime>W)||D&&!U());){var Z=f.callback;if(typeof Z=="function"){f.callback=null,p=f.priorityLevel;var me=Z(f.expirationTime<=W);W=n.unstable_now(),typeof me=="function"?f.callback=me:f===t(l)&&i(l),M(W)}else i(l);f=t(l)}if(f!==null)var Be=!0;else{var re=t(c);re!==null&&le(w,re.startTime-W),Be=!1}return Be}finally{f=null,p=j,m=!1}}var R=!1,P=null,B=-1,I=5,b=-1;function U(){return!(n.unstable_now()-b<I)}function H(){if(P!==null){var D=n.unstable_now();b=D;var W=!0;try{W=P(!0,D)}finally{W?X():(R=!1,P=null)}}else R=!1}var X;if(typeof _=="function")X=function(){_(H)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,ne=ee.port2;ee.port1.onmessage=H,X=function(){ne.postMessage(null)}}else X=function(){x(H,0)};function te(D){P=D,R||(R=!0,X())}function le(D,W){B=x(function(){D(n.unstable_now())},W)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(D){D.callback=null},n.unstable_continueExecution=function(){y||m||(y=!0,te(C))},n.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<D?Math.floor(1e3/D):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(D){switch(p){case 1:case 2:case 3:var W=3;break;default:W=p}var j=p;p=W;try{return D()}finally{p=j}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(D,W){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var j=p;p=D;try{return W()}finally{p=j}},n.unstable_scheduleCallback=function(D,W,j){var Z=n.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?Z+j:Z):j=Z,D){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=j+me,D={id:h++,callback:W,priorityLevel:D,startTime:j,expirationTime:me,sortIndex:-1},j>Z?(D.sortIndex=j,e(c,D),t(l)===null&&D===t(c)&&(A?(g(B),B=-1):A=!0,le(w,j-Z))):(D.sortIndex=me,e(l,D),y||m||(y=!0,te(C))),D},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(D){var W=p;return function(){var j=p;p=W;try{return D.apply(this,arguments)}finally{p=j}}}}(Xy)),Xy}var ab;function EG(){return ab||(ab=1,jy.exports=wG()),jy.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bG=function(e){var t={},i=z,r=EG(),s=Object.assign;function o(u){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+u,v=1;v<arguments.length;v++)d+="&args[]="+encodeURIComponent(arguments[v]);return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),y=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),w=Symbol.for("react.offscreen"),C=Symbol.iterator;function R(u){return u===null||typeof u!="object"?null:(u=C&&u[C]||u["@@iterator"],typeof u=="function"?u:null)}function P(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case h:return"Fragment";case c:return"Portal";case p:return"Profiler";case f:return"StrictMode";case x:return"Suspense";case g:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case y:return(u.displayName||"Context")+".Consumer";case m:return(u._context.displayName||"Context")+".Provider";case A:var d=u.render;return u=u.displayName,u||(u=d.displayName||d.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case _:return d=u.displayName||null,d!==null?d:P(u.type)||"Memo";case M:d=u._payload,u=u._init;try{return P(u(d))}catch{}}return null}function B(u){var d=u.type;switch(u.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return u=d.render,u=u.displayName||u.name||"",d.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return P(d);case 8:return d===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function I(u){var d=u,v=u;if(u.alternate)for(;d.return;)d=d.return;else{u=d;do d=u,d.flags&4098&&(v=d.return),u=d.return;while(u)}return d.tag===3?v:null}function b(u){if(I(u)!==u)throw Error(o(188))}function U(u){var d=u.alternate;if(!d){if(d=I(u),d===null)throw Error(o(188));return d!==u?null:u}for(var v=u,S=d;;){var E=v.return;if(E===null)break;var T=E.alternate;if(T===null){if(S=E.return,S!==null){v=S;continue}break}if(E.child===T.child){for(T=E.child;T;){if(T===v)return b(E),u;if(T===S)return b(E),d;T=T.sibling}throw Error(o(188))}if(v.return!==S.return)v=E,S=T;else{for(var G=!1,Y=E.child;Y;){if(Y===v){G=!0,v=E,S=T;break}if(Y===S){G=!0,S=E,v=T;break}Y=Y.sibling}if(!G){for(Y=T.child;Y;){if(Y===v){G=!0,v=T,S=E;break}if(Y===S){G=!0,S=T,v=E;break}Y=Y.sibling}if(!G)throw Error(o(189))}}if(v.alternate!==S)throw Error(o(190))}if(v.tag!==3)throw Error(o(188));return v.stateNode.current===v?u:d}function H(u){return u=U(u),u!==null?X(u):null}function X(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){var d=X(u);if(d!==null)return d;u=u.sibling}return null}function ee(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){if(u.tag!==4){var d=ee(u);if(d!==null)return d}u=u.sibling}return null}var ne=Array.isArray,te=e.getPublicInstance,le=e.getRootHostContext,D=e.getChildHostContext,W=e.prepareForCommit,j=e.resetAfterCommit,Z=e.createInstance,me=e.appendInitialChild,Be=e.finalizeInitialChildren,re=e.prepareUpdate,xe=e.shouldSetTextContent,Ee=e.createTextInstance,_e=e.scheduleTimeout,qe=e.cancelTimeout,rt=e.noTimeout,at=e.isPrimaryRenderer,lt=e.supportsMutation,ye=e.supportsPersistence,Ae=e.supportsHydration,V=e.getInstanceFromNode,We=e.preparePortalMount,Me=e.getCurrentEventPriority,De=e.detachDeletedInstance,Te=e.supportsMicrotasks,it=e.scheduleMicrotask,Oe=e.supportsTestSelectors,k=e.findFiberRoot,F=e.getBoundingRect,ie=e.getTextContent,fe=e.isHiddenSubtree,Se=e.matchAccessibilityRole,ge=e.setFocusIfFocusable,Ze=e.setupIntersectionObserver,Le=e.appendChild,je=e.appendChildToContainer,Ct=e.commitTextUpdate,we=e.commitMount,Ke=e.commitUpdate,ut=e.insertBefore,mt=e.insertInContainerBefore,Je=e.removeChild,K=e.removeChildFromContainer,pe=e.resetTextContent,Ue=e.hideInstance,J=e.hideTextInstance,be=e.unhideInstance,ce=e.unhideTextInstance,ve=e.clearContainer,Ge=e.cloneInstance,Fe=e.createContainerChildSet,ct=e.appendChildToContainerChildSet,Vt=e.finalizeContainerChildren,on=e.replaceContainerChildren,Lt=e.cloneHiddenInstance,Ln=e.cloneHiddenTextInstance,ui=e.canHydrateInstance,Rh=e.canHydrateTextInstance,Ih=e.canHydrateSuspenseInstance,$r=e.isSuspenseInstancePending,ha=e.isSuspenseInstanceFallback,Ph=e.registerSuspenseInstanceRetry,ho=e.getNextHydratableSibling,Pl=e.getFirstHydratableChild,Bh=e.getFirstHydratableChildWithinContainer,Bl=e.getFirstHydratableChildWithinSuspenseInstance,Lh=e.hydrateInstance,Dh=e.hydrateTextInstance,E0=e.hydrateSuspenseInstance,b0=e.getNextHydratableInstanceAfterSuspenseInstance,Nh=e.commitHydratedContainer,O=e.commitHydratedSuspenseInstance,Q=e.clearSuspenseBoundary,oe=e.clearSuspenseBoundaryFromContainer,ae=e.shouldDeleteUnhydratedTailInstances,$=e.didNotMatchHydratedContainerTextInstance,Pe=e.didNotMatchHydratedTextInstance,ke;function $e(u){if(ke===void 0)try{throw Error()}catch(v){var d=v.stack.trim().match(/\n( *(at )?)/);ke=d&&d[1]||""}return`
`+ke+u}var tt=!1;function vt(u,d){if(!u||tt)return"";tt=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(Re){var S=Re}Reflect.construct(u,[],d)}else{try{d.call()}catch(Re){S=Re}u.call(d.prototype)}else{try{throw Error()}catch(Re){S=Re}u()}}catch(Re){if(Re&&S&&typeof Re.stack=="string"){for(var E=Re.stack.split(`
`),T=S.stack.split(`
`),G=E.length-1,Y=T.length-1;1<=G&&0<=Y&&E[G]!==T[Y];)Y--;for(;1<=G&&0<=Y;G--,Y--)if(E[G]!==T[Y]){if(G!==1||Y!==1)do if(G--,Y--,0>Y||E[G]!==T[Y]){var he=`
`+E[G].replace(" at new "," at ");return u.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",u.displayName)),he}while(1<=G&&0<=Y);break}}}finally{tt=!1,Error.prepareStackTrace=v}return(u=u?u.displayName||u.name:"")?$e(u):""}var xt=Object.prototype.hasOwnProperty,nt=[],It=-1;function zt(u){return{current:u}}function ft(u){0>It||(u.current=nt[It],nt[It]=null,It--)}function wt(u,d){It++,nt[It]=u.current,u.current=d}var Pt={},He=zt(Pt),un=zt(!1),Dt=Pt;function Jn(u,d){var v=u.type.contextTypes;if(!v)return Pt;var S=u.stateNode;if(S&&S.__reactInternalMemoizedUnmaskedChildContext===d)return S.__reactInternalMemoizedMaskedChildContext;var E={},T;for(T in v)E[T]=d[T];return S&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=d,u.__reactInternalMemoizedMaskedChildContext=E),E}function Cn(u){return u=u.childContextTypes,u!=null}function Kn(){ft(un),ft(He)}function fo(u,d,v){if(He.current!==Pt)throw Error(o(168));wt(He,d),wt(un,v)}function Zt(u,d,v){var S=u.stateNode;if(d=d.childContextTypes,typeof S.getChildContext!="function")return v;S=S.getChildContext();for(var E in S)if(!(E in d))throw Error(o(108,B(u)||"Unknown",E));return s({},v,S)}function Ci(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||Pt,Dt=He.current,wt(He,u),wt(un,un.current),!0}function po(u,d,v){var S=u.stateNode;if(!S)throw Error(o(169));v?(u=Zt(u,d,Dt),S.__reactInternalMemoizedMergedChildContext=u,ft(un),ft(He),wt(He,u)):ft(un),wt(un,v)}var dn=Math.clz32?Math.clz32:Fh,es=Math.log,ts=Math.LN2;function Fh(u){return u>>>=0,u===0?32:31-(es(u)/ts|0)|0}var Uh=64,Oh=4194304;function hu(u){switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return u&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return u}}function kh(u,d){var v=u.pendingLanes;if(v===0)return 0;var S=0,E=u.suspendedLanes,T=u.pingedLanes,G=v&268435455;if(G!==0){var Y=G&~E;Y!==0?S=hu(Y):(T&=G,T!==0&&(S=hu(T)))}else G=v&~E,G!==0?S=hu(G):T!==0&&(S=hu(T));if(S===0)return 0;if(d!==0&&d!==S&&!(d&E)&&(E=S&-S,T=d&-d,E>=T||E===16&&(T&4194240)!==0))return d;if(S&4&&(S|=v&16),d=u.entangledLanes,d!==0)for(u=u.entanglements,d&=S;0<d;)v=31-dn(d),E=1<<v,S|=u[v],d&=~E;return S}function j2(u,d){switch(u){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function X2(u,d){for(var v=u.suspendedLanes,S=u.pingedLanes,E=u.expirationTimes,T=u.pendingLanes;0<T;){var G=31-dn(T),Y=1<<G,he=E[G];he===-1?(!(Y&v)||Y&S)&&(E[G]=j2(Y,d)):he<=d&&(u.expiredLanes|=Y),T&=~Y}}function C0(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function T0(u){for(var d=[],v=0;31>v;v++)d.push(u);return d}function fu(u,d,v){u.pendingLanes|=d,d!==536870912&&(u.suspendedLanes=0,u.pingedLanes=0),u=u.eventTimes,d=31-dn(d),u[d]=v}function J2(u,d){var v=u.pendingLanes&~d;u.pendingLanes=d,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=d,u.mutableReadLanes&=d,u.entangledLanes&=d,d=u.entanglements;var S=u.eventTimes;for(u=u.expirationTimes;0<v;){var E=31-dn(v),T=1<<E;d[E]=0,S[E]=-1,u[E]=-1,v&=~T}}function R0(u,d){var v=u.entangledLanes|=d;for(u=u.entanglements;v;){var S=31-dn(v),E=1<<S;E&d|u[S]&d&&(u[S]|=d),v&=~E}}var jt=0;function LS(u){return u&=-u,1<u?4<u?u&268435455?16:536870912:4:1}var I0=r.unstable_scheduleCallback,DS=r.unstable_cancelCallback,K2=r.unstable_shouldYield,Y2=r.unstable_requestPaint,Yn=r.unstable_now,P0=r.unstable_ImmediatePriority,Q2=r.unstable_UserBlockingPriority,B0=r.unstable_NormalPriority,q2=r.unstable_IdlePriority,zh=null,ns=null;function Z2(u){if(ns&&typeof ns.onCommitFiberRoot=="function")try{ns.onCommitFiberRoot(zh,u,void 0,(u.current.flags&128)===128)}catch{}}function $2(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var is=typeof Object.is=="function"?Object.is:$2,Ms=null,Hh=!1,L0=!1;function NS(u){Ms===null?Ms=[u]:Ms.push(u)}function eB(u){Hh=!0,NS(u)}function rs(){if(!L0&&Ms!==null){L0=!0;var u=0,d=jt;try{var v=Ms;for(jt=1;u<v.length;u++){var S=v[u];do S=S(!0);while(S!==null)}Ms=null,Hh=!1}catch(E){throw Ms!==null&&(Ms=Ms.slice(u+1)),I0(P0,rs),E}finally{jt=d,L0=!1}}return null}var tB=a.ReactCurrentBatchConfig;function Gh(u,d){if(is(u,d))return!0;if(typeof u!="object"||u===null||typeof d!="object"||d===null)return!1;var v=Object.keys(u),S=Object.keys(d);if(v.length!==S.length)return!1;for(S=0;S<v.length;S++){var E=v[S];if(!xt.call(d,E)||!is(u[E],d[E]))return!1}return!0}function nB(u){switch(u.tag){case 5:return $e(u.type);case 16:return $e("Lazy");case 13:return $e("Suspense");case 19:return $e("SuspenseList");case 0:case 2:case 15:return u=vt(u.type,!1),u;case 11:return u=vt(u.type.render,!1),u;case 1:return u=vt(u.type,!0),u;default:return""}}function Dr(u,d){if(u&&u.defaultProps){d=s({},d),u=u.defaultProps;for(var v in u)d[v]===void 0&&(d[v]=u[v]);return d}return d}var Vh=zt(null),Wh=null,Ll=null,D0=null;function N0(){D0=Ll=Wh=null}function FS(u,d,v){at?(wt(Vh,d._currentValue),d._currentValue=v):(wt(Vh,d._currentValue2),d._currentValue2=v)}function F0(u){var d=Vh.current;ft(Vh),at?u._currentValue=d:u._currentValue2=d}function U0(u,d,v){for(;u!==null;){var S=u.alternate;if((u.childLanes&d)!==d?(u.childLanes|=d,S!==null&&(S.childLanes|=d)):S!==null&&(S.childLanes&d)!==d&&(S.childLanes|=d),u===v)break;u=u.return}}function Dl(u,d){Wh=u,D0=Ll=null,u=u.dependencies,u!==null&&u.firstContext!==null&&(u.lanes&d&&(tr=!0),u.firstContext=null)}function fr(u){var d=at?u._currentValue:u._currentValue2;if(D0!==u)if(u={context:u,memoizedValue:d,next:null},Ll===null){if(Wh===null)throw Error(o(308));Ll=u,Wh.dependencies={lanes:0,firstContext:u}}else Ll=Ll.next=u;return d}var ss=null,mo=!1;function O0(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function US(u,d){u=u.updateQueue,d.updateQueue===u&&(d.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function ws(u,d){return{eventTime:u,lane:d,tag:0,payload:null,callback:null,next:null}}function go(u,d){var v=u.updateQueue;v!==null&&(v=v.shared,Dn!==null&&u.mode&1&&!(Bt&2)?(u=v.interleaved,u===null?(d.next=d,ss===null?ss=[v]:ss.push(v)):(d.next=u.next,u.next=d),v.interleaved=d):(u=v.pending,u===null?d.next=d:(d.next=u.next,u.next=d),v.pending=d))}function jh(u,d,v){if(d=d.updateQueue,d!==null&&(d=d.shared,(v&4194240)!==0)){var S=d.lanes;S&=u.pendingLanes,v|=S,d.lanes=v,R0(u,v)}}function OS(u,d){var v=u.updateQueue,S=u.alternate;if(S!==null&&(S=S.updateQueue,v===S)){var E=null,T=null;if(v=v.firstBaseUpdate,v!==null){do{var G={eventTime:v.eventTime,lane:v.lane,tag:v.tag,payload:v.payload,callback:v.callback,next:null};T===null?E=T=G:T=T.next=G,v=v.next}while(v!==null);T===null?E=T=d:T=T.next=d}else E=T=d;v={baseState:S.baseState,firstBaseUpdate:E,lastBaseUpdate:T,shared:S.shared,effects:S.effects},u.updateQueue=v;return}u=v.lastBaseUpdate,u===null?v.firstBaseUpdate=d:u.next=d,v.lastBaseUpdate=d}function Xh(u,d,v,S){var E=u.updateQueue;mo=!1;var T=E.firstBaseUpdate,G=E.lastBaseUpdate,Y=E.shared.pending;if(Y!==null){E.shared.pending=null;var he=Y,Re=he.next;he.next=null,G===null?T=Re:G.next=Re,G=he;var Qe=u.alternate;Qe!==null&&(Qe=Qe.updateQueue,Y=Qe.lastBaseUpdate,Y!==G&&(Y===null?Qe.firstBaseUpdate=Re:Y.next=Re,Qe.lastBaseUpdate=he))}if(T!==null){var _t=E.baseState;G=0,Qe=Re=he=null,Y=T;do{var dt=Y.lane,en=Y.eventTime;if((S&dt)===dt){Qe!==null&&(Qe=Qe.next={eventTime:en,lane:0,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null});e:{var ot=u,pi=Y;switch(dt=d,en=v,pi.tag){case 1:if(ot=pi.payload,typeof ot=="function"){_t=ot.call(en,_t,dt);break e}_t=ot;break e;case 3:ot.flags=ot.flags&-65537|128;case 0:if(ot=pi.payload,dt=typeof ot=="function"?ot.call(en,_t,dt):ot,dt==null)break e;_t=s({},_t,dt);break e;case 2:mo=!0}}Y.callback!==null&&Y.lane!==0&&(u.flags|=64,dt=E.effects,dt===null?E.effects=[Y]:dt.push(Y))}else en={eventTime:en,lane:dt,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null},Qe===null?(Re=Qe=en,he=_t):Qe=Qe.next=en,G|=dt;if(Y=Y.next,Y===null){if(Y=E.shared.pending,Y===null)break;dt=Y,Y=dt.next,dt.next=null,E.lastBaseUpdate=dt,E.shared.pending=null}}while(!0);if(Qe===null&&(he=_t),E.baseState=he,E.firstBaseUpdate=Re,E.lastBaseUpdate=Qe,d=E.shared.interleaved,d!==null){E=d;do G|=E.lane,E=E.next;while(E!==d)}else T===null&&(E.shared.lanes=0);Vl|=G,u.lanes=G,u.memoizedState=_t}}function kS(u,d,v){if(u=d.effects,d.effects=null,u!==null)for(d=0;d<u.length;d++){var S=u[d],E=S.callback;if(E!==null){if(S.callback=null,S=v,typeof E!="function")throw Error(o(191,E));E.call(S)}}}var zS=new i.Component().refs;function k0(u,d,v,S){d=u.memoizedState,v=v(S,d),v=v==null?d:s({},d,v),u.memoizedState=v,u.lanes===0&&(u.updateQueue.baseState=v)}var Jh={isMounted:function(u){return(u=u._reactInternals)?I(u)===u:!1},enqueueSetState:function(u,d,v){u=u._reactInternals;var S=Ri(),E=xo(u),T=ws(S,E);T.payload=d,v!=null&&(T.callback=v),go(u,T),d=yr(u,E,S),d!==null&&jh(d,u,E)},enqueueReplaceState:function(u,d,v){u=u._reactInternals;var S=Ri(),E=xo(u),T=ws(S,E);T.tag=1,T.payload=d,v!=null&&(T.callback=v),go(u,T),d=yr(u,E,S),d!==null&&jh(d,u,E)},enqueueForceUpdate:function(u,d){u=u._reactInternals;var v=Ri(),S=xo(u),E=ws(v,S);E.tag=2,d!=null&&(E.callback=d),go(u,E),d=yr(u,S,v),d!==null&&jh(d,u,S)}};function HS(u,d,v,S,E,T,G){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(S,T,G):d.prototype&&d.prototype.isPureReactComponent?!Gh(v,S)||!Gh(E,T):!0}function GS(u,d,v){var S=!1,E=Pt,T=d.contextType;return typeof T=="object"&&T!==null?T=fr(T):(E=Cn(d)?Dt:He.current,S=d.contextTypes,T=(S=S!=null)?Jn(u,E):Pt),d=new d(v,T),u.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Jh,u.stateNode=d,d._reactInternals=u,S&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=E,u.__reactInternalMemoizedMaskedChildContext=T),d}function VS(u,d,v,S){u=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(v,S),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(v,S),d.state!==u&&Jh.enqueueReplaceState(d,d.state,null)}function z0(u,d,v,S){var E=u.stateNode;E.props=v,E.state=u.memoizedState,E.refs=zS,O0(u);var T=d.contextType;typeof T=="object"&&T!==null?E.context=fr(T):(T=Cn(d)?Dt:He.current,E.context=Jn(u,T)),E.state=u.memoizedState,T=d.getDerivedStateFromProps,typeof T=="function"&&(k0(u,d,T,v),E.state=u.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(d=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),d!==E.state&&Jh.enqueueReplaceState(E,E.state,null),Xh(u,v,E,S),E.state=u.memoizedState),typeof E.componentDidMount=="function"&&(u.flags|=4194308)}var Nl=[],Fl=0,Kh=null,Yh=0,pr=[],mr=0,fa=null,Es=1,bs="";function pa(u,d){Nl[Fl++]=Yh,Nl[Fl++]=Kh,Kh=u,Yh=d}function WS(u,d,v){pr[mr++]=Es,pr[mr++]=bs,pr[mr++]=fa,fa=u;var S=Es;u=bs;var E=32-dn(S)-1;S&=~(1<<E),v+=1;var T=32-dn(d)+E;if(30<T){var G=E-E%5;T=(S&(1<<G)-1).toString(32),S>>=G,E-=G,Es=1<<32-dn(d)+E|v<<E|S,bs=T+u}else Es=1<<T|v<<E|S,bs=u}function H0(u){u.return!==null&&(pa(u,1),WS(u,1,0))}function G0(u){for(;u===Kh;)Kh=Nl[--Fl],Nl[Fl]=null,Yh=Nl[--Fl],Nl[Fl]=null;for(;u===fa;)fa=pr[--mr],pr[mr]=null,bs=pr[--mr],pr[mr]=null,Es=pr[--mr],pr[mr]=null}var $i=null,er=null,hn=!1,pu=!1,Nr=null;function jS(u,d){var v=xr(5,null,null,0);v.elementType="DELETED",v.stateNode=d,v.return=u,d=u.deletions,d===null?(u.deletions=[v],u.flags|=16):d.push(v)}function XS(u,d){switch(u.tag){case 5:return d=ui(d,u.type,u.pendingProps),d!==null?(u.stateNode=d,$i=u,er=Pl(d),!0):!1;case 6:return d=Rh(d,u.pendingProps),d!==null?(u.stateNode=d,$i=u,er=null,!0):!1;case 13:if(d=Ih(d),d!==null){var v=fa!==null?{id:Es,overflow:bs}:null;return u.memoizedState={dehydrated:d,treeContext:v,retryLane:1073741824},v=xr(18,null,null,0),v.stateNode=d,v.return=u,u.child=v,$i=u,er=null,!0}return!1;default:return!1}}function V0(u){return(u.mode&1)!==0&&(u.flags&128)===0}function W0(u){if(hn){var d=er;if(d){var v=d;if(!XS(u,d)){if(V0(u))throw Error(o(418));d=ho(v);var S=$i;d&&XS(u,d)?jS(S,v):(u.flags=u.flags&-4097|2,hn=!1,$i=u)}}else{if(V0(u))throw Error(o(418));u.flags=u.flags&-4097|2,hn=!1,$i=u}}}function JS(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;$i=u}function mu(u){if(!Ae||u!==$i)return!1;if(!hn)return JS(u),hn=!0,!1;if(u.tag!==3&&(u.tag!==5||ae(u.type)&&!xe(u.type,u.memoizedProps))){var d=er;if(d){if(V0(u)){for(u=er;u;)u=ho(u);throw Error(o(418))}for(;d;)jS(u,d),d=ho(d)}}if(JS(u),u.tag===13){if(!Ae)throw Error(o(316));if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(o(317));er=b0(u)}else er=$i?ho(u.stateNode):null;return!0}function Ul(){Ae&&(er=$i=null,pu=hn=!1)}function j0(u){Nr===null?Nr=[u]:Nr.push(u)}function gu(u,d,v){if(u=v.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(v._owner){if(v=v._owner,v){if(v.tag!==1)throw Error(o(309));var S=v.stateNode}if(!S)throw Error(o(147,u));var E=S,T=""+u;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===T?d.ref:(d=function(G){var Y=E.refs;Y===zS&&(Y=E.refs={}),G===null?delete Y[T]:Y[T]=G},d._stringRef=T,d)}if(typeof u!="string")throw Error(o(284));if(!v._owner)throw Error(o(290,u))}return u}function Qh(u,d){throw u=Object.prototype.toString.call(d),Error(o(31,u==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":u))}function KS(u){var d=u._init;return d(u._payload)}function YS(u){function d(se,q){if(u){var de=se.deletions;de===null?(se.deletions=[q],se.flags|=16):de.push(q)}}function v(se,q){if(!u)return null;for(;q!==null;)d(se,q),q=q.sibling;return null}function S(se,q){for(se=new Map;q!==null;)q.key!==null?se.set(q.key,q):se.set(q.index,q),q=q.sibling;return se}function E(se,q){return se=Ao(se,q),se.index=0,se.sibling=null,se}function T(se,q,de){return se.index=de,u?(de=se.alternate,de!==null?(de=de.index,de<q?(se.flags|=2,q):de):(se.flags|=2,q)):(se.flags|=1048576,q)}function G(se){return u&&se.alternate===null&&(se.flags|=2),se}function Y(se,q,de,Ve){return q===null||q.tag!==6?(q=Tv(de,se.mode,Ve),q.return=se,q):(q=E(q,de),q.return=se,q)}function he(se,q,de,Ve){var st=de.type;return st===h?Qe(se,q,de.props.children,Ve,de.key):q!==null&&(q.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===M&&KS(st)===q.type)?(Ve=E(q,de.props),Ve.ref=gu(se,q,de),Ve.return=se,Ve):(Ve=Tf(de.type,de.key,de.props,null,se.mode,Ve),Ve.ref=gu(se,q,de),Ve.return=se,Ve)}function Re(se,q,de,Ve){return q===null||q.tag!==4||q.stateNode.containerInfo!==de.containerInfo||q.stateNode.implementation!==de.implementation?(q=Rv(de,se.mode,Ve),q.return=se,q):(q=E(q,de.children||[]),q.return=se,q)}function Qe(se,q,de,Ve,st){return q===null||q.tag!==7?(q=Aa(de,se.mode,Ve,st),q.return=se,q):(q=E(q,de),q.return=se,q)}function _t(se,q,de){if(typeof q=="string"&&q!==""||typeof q=="number")return q=Tv(""+q,se.mode,de),q.return=se,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case l:return de=Tf(q.type,q.key,q.props,null,se.mode,de),de.ref=gu(se,null,q),de.return=se,de;case c:return q=Rv(q,se.mode,de),q.return=se,q;case M:var Ve=q._init;return _t(se,Ve(q._payload),de)}if(ne(q)||R(q))return q=Aa(q,se.mode,de,null),q.return=se,q;Qh(se,q)}return null}function dt(se,q,de,Ve){var st=q!==null?q.key:null;if(typeof de=="string"&&de!==""||typeof de=="number")return st!==null?null:Y(se,q,""+de,Ve);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case l:return de.key===st?he(se,q,de,Ve):null;case c:return de.key===st?Re(se,q,de,Ve):null;case M:return st=de._init,dt(se,q,st(de._payload),Ve)}if(ne(de)||R(de))return st!==null?null:Qe(se,q,de,Ve,null);Qh(se,de)}return null}function en(se,q,de,Ve,st){if(typeof Ve=="string"&&Ve!==""||typeof Ve=="number")return se=se.get(de)||null,Y(q,se,""+Ve,st);if(typeof Ve=="object"&&Ve!==null){switch(Ve.$$typeof){case l:return se=se.get(Ve.key===null?de:Ve.key)||null,he(q,se,Ve,st);case c:return se=se.get(Ve.key===null?de:Ve.key)||null,Re(q,se,Ve,st);case M:var Tt=Ve._init;return en(se,q,de,Tt(Ve._payload),st)}if(ne(Ve)||R(Ve))return se=se.get(de)||null,Qe(q,se,Ve,st,null);Qh(q,Ve)}return null}function ot(se,q,de,Ve){for(var st=null,Tt=null,At=q,Xt=q=0,qn=null;At!==null&&Xt<de.length;Xt++){At.index>Xt?(qn=At,At=null):qn=At.sibling;var Jt=dt(se,At,de[Xt],Ve);if(Jt===null){At===null&&(At=qn);break}u&&At&&Jt.alternate===null&&d(se,At),q=T(Jt,q,Xt),Tt===null?st=Jt:Tt.sibling=Jt,Tt=Jt,At=qn}if(Xt===de.length)return v(se,At),hn&&pa(se,Xt),st;if(At===null){for(;Xt<de.length;Xt++)At=_t(se,de[Xt],Ve),At!==null&&(q=T(At,q,Xt),Tt===null?st=At:Tt.sibling=At,Tt=At);return hn&&pa(se,Xt),st}for(At=S(se,At);Xt<de.length;Xt++)qn=en(At,se,Xt,de[Xt],Ve),qn!==null&&(u&&qn.alternate!==null&&At.delete(qn.key===null?Xt:qn.key),q=T(qn,q,Xt),Tt===null?st=qn:Tt.sibling=qn,Tt=qn);return u&&At.forEach(function(So){return d(se,So)}),hn&&pa(se,Xt),st}function pi(se,q,de,Ve){var st=R(de);if(typeof st!="function")throw Error(o(150));if(de=st.call(de),de==null)throw Error(o(151));for(var Tt=st=null,At=q,Xt=q=0,qn=null,Jt=de.next();At!==null&&!Jt.done;Xt++,Jt=de.next()){At.index>Xt?(qn=At,At=null):qn=At.sibling;var So=dt(se,At,Jt.value,Ve);if(So===null){At===null&&(At=qn);break}u&&At&&So.alternate===null&&d(se,At),q=T(So,q,Xt),Tt===null?st=So:Tt.sibling=So,Tt=So,At=qn}if(Jt.done)return v(se,At),hn&&pa(se,Xt),st;if(At===null){for(;!Jt.done;Xt++,Jt=de.next())Jt=_t(se,Jt.value,Ve),Jt!==null&&(q=T(Jt,q,Xt),Tt===null?st=Jt:Tt.sibling=Jt,Tt=Jt);return hn&&pa(se,Xt),st}for(At=S(se,At);!Jt.done;Xt++,Jt=de.next())Jt=en(At,se,Xt,Jt.value,Ve),Jt!==null&&(u&&Jt.alternate!==null&&At.delete(Jt.key===null?Xt:Jt.key),q=T(Jt,q,Xt),Tt===null?st=Jt:Tt.sibling=Jt,Tt=Jt);return u&&At.forEach(function(BB){return d(se,BB)}),hn&&pa(se,Xt),st}function _r(se,q,de,Ve){if(typeof de=="object"&&de!==null&&de.type===h&&de.key===null&&(de=de.props.children),typeof de=="object"&&de!==null){switch(de.$$typeof){case l:e:{for(var st=de.key,Tt=q;Tt!==null;){if(Tt.key===st){if(st=de.type,st===h){if(Tt.tag===7){v(se,Tt.sibling),q=E(Tt,de.props.children),q.return=se,se=q;break e}}else if(Tt.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===M&&KS(st)===Tt.type){v(se,Tt.sibling),q=E(Tt,de.props),q.ref=gu(se,Tt,de),q.return=se,se=q;break e}v(se,Tt);break}else d(se,Tt);Tt=Tt.sibling}de.type===h?(q=Aa(de.props.children,se.mode,Ve,de.key),q.return=se,se=q):(Ve=Tf(de.type,de.key,de.props,null,se.mode,Ve),Ve.ref=gu(se,q,de),Ve.return=se,se=Ve)}return G(se);case c:e:{for(Tt=de.key;q!==null;){if(q.key===Tt)if(q.tag===4&&q.stateNode.containerInfo===de.containerInfo&&q.stateNode.implementation===de.implementation){v(se,q.sibling),q=E(q,de.children||[]),q.return=se,se=q;break e}else{v(se,q);break}else d(se,q);q=q.sibling}q=Rv(de,se.mode,Ve),q.return=se,se=q}return G(se);case M:return Tt=de._init,_r(se,q,Tt(de._payload),Ve)}if(ne(de))return ot(se,q,de,Ve);if(R(de))return pi(se,q,de,Ve);Qh(se,de)}return typeof de=="string"&&de!==""||typeof de=="number"?(de=""+de,q!==null&&q.tag===6?(v(se,q.sibling),q=E(q,de),q.return=se,se=q):(v(se,q),q=Tv(de,se.mode,Ve),q.return=se,se=q),G(se)):v(se,q)}return _r}var Ol=YS(!0),QS=YS(!1),vu={},gr=zt(vu),yu=zt(vu),kl=zt(vu);function os(u){if(u===vu)throw Error(o(174));return u}function X0(u,d){wt(kl,d),wt(yu,u),wt(gr,vu),u=le(d),ft(gr),wt(gr,u)}function zl(){ft(gr),ft(yu),ft(kl)}function qS(u){var d=os(kl.current),v=os(gr.current);d=D(v,u.type,d),v!==d&&(wt(yu,u),wt(gr,d))}function J0(u){yu.current===u&&(ft(gr),ft(yu))}var mn=zt(0);function qh(u){for(var d=u;d!==null;){if(d.tag===13){var v=d.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||$r(v)||ha(v)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if(d.flags&128)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===u)break;for(;d.sibling===null;){if(d.return===null||d.return===u)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var K0=[];function Y0(){for(var u=0;u<K0.length;u++){var d=K0[u];at?d._workInProgressVersionPrimary=null:d._workInProgressVersionSecondary=null}K0.length=0}var Zh=a.ReactCurrentDispatcher,vr=a.ReactCurrentBatchConfig,Hl=0,Sn=null,di=null,Qn=null,$h=!1,xu=!1,_u=0,iB=0;function hi(){throw Error(o(321))}function Q0(u,d){if(d===null)return!1;for(var v=0;v<d.length&&v<u.length;v++)if(!is(u[v],d[v]))return!1;return!0}function q0(u,d,v,S,E,T){if(Hl=T,Sn=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,Zh.current=u===null||u.memoizedState===null?aB:lB,u=v(S,E),xu){T=0;do{if(xu=!1,_u=0,25<=T)throw Error(o(301));T+=1,Qn=di=null,d.updateQueue=null,Zh.current=cB,u=v(S,E)}while(xu)}if(Zh.current=sf,d=di!==null&&di.next!==null,Hl=0,Qn=di=Sn=null,$h=!1,d)throw Error(o(300));return u}function Z0(){var u=_u!==0;return _u=0,u}function Cs(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qn===null?Sn.memoizedState=Qn=u:Qn=Qn.next=u,Qn}function as(){if(di===null){var u=Sn.alternate;u=u!==null?u.memoizedState:null}else u=di.next;var d=Qn===null?Sn.memoizedState:Qn.next;if(d!==null)Qn=d,di=u;else{if(u===null)throw Error(o(310));di=u,u={memoizedState:di.memoizedState,baseState:di.baseState,baseQueue:di.baseQueue,queue:di.queue,next:null},Qn===null?Sn.memoizedState=Qn=u:Qn=Qn.next=u}return Qn}function ma(u,d){return typeof d=="function"?d(u):d}function ef(u){var d=as(),v=d.queue;if(v===null)throw Error(o(311));v.lastRenderedReducer=u;var S=di,E=S.baseQueue,T=v.pending;if(T!==null){if(E!==null){var G=E.next;E.next=T.next,T.next=G}S.baseQueue=E=T,v.pending=null}if(E!==null){T=E.next,S=S.baseState;var Y=G=null,he=null,Re=T;do{var Qe=Re.lane;if((Hl&Qe)===Qe)he!==null&&(he=he.next={lane:0,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null}),S=Re.hasEagerState?Re.eagerState:u(S,Re.action);else{var _t={lane:Qe,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null};he===null?(Y=he=_t,G=S):he=he.next=_t,Sn.lanes|=Qe,Vl|=Qe}Re=Re.next}while(Re!==null&&Re!==T);he===null?G=S:he.next=Y,is(S,d.memoizedState)||(tr=!0),d.memoizedState=S,d.baseState=G,d.baseQueue=he,v.lastRenderedState=S}if(u=v.interleaved,u!==null){E=u;do T=E.lane,Sn.lanes|=T,Vl|=T,E=E.next;while(E!==u)}else E===null&&(v.lanes=0);return[d.memoizedState,v.dispatch]}function tf(u){var d=as(),v=d.queue;if(v===null)throw Error(o(311));v.lastRenderedReducer=u;var S=v.dispatch,E=v.pending,T=d.memoizedState;if(E!==null){v.pending=null;var G=E=E.next;do T=u(T,G.action),G=G.next;while(G!==E);is(T,d.memoizedState)||(tr=!0),d.memoizedState=T,d.baseQueue===null&&(d.baseState=T),v.lastRenderedState=T}return[T,S]}function ZS(){}function $S(u,d){var v=Sn,S=as(),E=d(),T=!is(S.memoizedState,E);if(T&&(S.memoizedState=E,tr=!0),S=S.queue,Su(nM.bind(null,v,S,u),[u]),S.getSnapshot!==d||T||Qn!==null&&Qn.memoizedState.tag&1){if(v.flags|=2048,Au(9,tM.bind(null,v,S,E,d),void 0,null),Dn===null)throw Error(o(349));Hl&30||eM(v,d,E)}return E}function eM(u,d,v){u.flags|=16384,u={getSnapshot:d,value:v},d=Sn.updateQueue,d===null?(d={lastEffect:null,stores:null},Sn.updateQueue=d,d.stores=[u]):(v=d.stores,v===null?d.stores=[u]:v.push(u))}function tM(u,d,v,S){d.value=v,d.getSnapshot=S,iM(d)&&yr(u,1,-1)}function nM(u,d,v){return v(function(){iM(d)&&yr(u,1,-1)})}function iM(u){var d=u.getSnapshot;u=u.value;try{var v=d();return!is(u,v)}catch{return!0}}function $0(u){var d=Cs();return typeof u=="function"&&(u=u()),d.memoizedState=d.baseState=u,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ma,lastRenderedState:u},d.queue=u,u=u.dispatch=oB.bind(null,Sn,u),[d.memoizedState,u]}function Au(u,d,v,S){return u={tag:u,create:d,destroy:v,deps:S,next:null},d=Sn.updateQueue,d===null?(d={lastEffect:null,stores:null},Sn.updateQueue=d,d.lastEffect=u.next=u):(v=d.lastEffect,v===null?d.lastEffect=u.next=u:(S=v.next,v.next=u,u.next=S,d.lastEffect=u)),u}function rM(){return as().memoizedState}function nf(u,d,v,S){var E=Cs();Sn.flags|=u,E.memoizedState=Au(1|d,v,void 0,S===void 0?null:S)}function rf(u,d,v,S){var E=as();S=S===void 0?null:S;var T=void 0;if(di!==null){var G=di.memoizedState;if(T=G.destroy,S!==null&&Q0(S,G.deps)){E.memoizedState=Au(d,v,T,S);return}}Sn.flags|=u,E.memoizedState=Au(1|d,v,T,S)}function ev(u,d){return nf(8390656,8,u,d)}function Su(u,d){return rf(2048,8,u,d)}function sM(u,d){return rf(4,2,u,d)}function oM(u,d){return rf(4,4,u,d)}function aM(u,d){if(typeof d=="function")return u=u(),d(u),function(){d(null)};if(d!=null)return u=u(),d.current=u,function(){d.current=null}}function lM(u,d,v){return v=v!=null?v.concat([u]):null,rf(4,4,aM.bind(null,d,u),v)}function tv(){}function cM(u,d){var v=as();d=d===void 0?null:d;var S=v.memoizedState;return S!==null&&d!==null&&Q0(d,S[1])?S[0]:(v.memoizedState=[u,d],u)}function uM(u,d){var v=as();d=d===void 0?null:d;var S=v.memoizedState;return S!==null&&d!==null&&Q0(d,S[1])?S[0]:(u=u(),v.memoizedState=[u,d],u)}function rB(u,d){var v=jt;jt=v!==0&&4>v?v:4,u(!0);var S=vr.transition;vr.transition={};try{u(!1),d()}finally{jt=v,vr.transition=S}}function dM(){return as().memoizedState}function sB(u,d,v){var S=xo(u);v={lane:S,action:v,hasEagerState:!1,eagerState:null,next:null},hM(u)?fM(d,v):(pM(u,d,v),v=Ri(),u=yr(u,S,v),u!==null&&mM(u,d,S))}function oB(u,d,v){var S=xo(u),E={lane:S,action:v,hasEagerState:!1,eagerState:null,next:null};if(hM(u))fM(d,E);else{pM(u,d,E);var T=u.alternate;if(u.lanes===0&&(T===null||T.lanes===0)&&(T=d.lastRenderedReducer,T!==null))try{var G=d.lastRenderedState,Y=T(G,v);if(E.hasEagerState=!0,E.eagerState=Y,is(Y,G))return}catch{}finally{}v=Ri(),u=yr(u,S,v),u!==null&&mM(u,d,S)}}function hM(u){var d=u.alternate;return u===Sn||d!==null&&d===Sn}function fM(u,d){xu=$h=!0;var v=u.pending;v===null?d.next=d:(d.next=v.next,v.next=d),u.pending=d}function pM(u,d,v){Dn!==null&&u.mode&1&&!(Bt&2)?(u=d.interleaved,u===null?(v.next=v,ss===null?ss=[d]:ss.push(d)):(v.next=u.next,u.next=v),d.interleaved=v):(u=d.pending,u===null?v.next=v:(v.next=u.next,u.next=v),d.pending=v)}function mM(u,d,v){if(v&4194240){var S=d.lanes;S&=u.pendingLanes,v|=S,d.lanes=v,R0(u,v)}}var sf={readContext:fr,useCallback:hi,useContext:hi,useEffect:hi,useImperativeHandle:hi,useInsertionEffect:hi,useLayoutEffect:hi,useMemo:hi,useReducer:hi,useRef:hi,useState:hi,useDebugValue:hi,useDeferredValue:hi,useTransition:hi,useMutableSource:hi,useSyncExternalStore:hi,useId:hi,unstable_isNewReconciler:!1},aB={readContext:fr,useCallback:function(u,d){return Cs().memoizedState=[u,d===void 0?null:d],u},useContext:fr,useEffect:ev,useImperativeHandle:function(u,d,v){return v=v!=null?v.concat([u]):null,nf(4194308,4,aM.bind(null,d,u),v)},useLayoutEffect:function(u,d){return nf(4194308,4,u,d)},useInsertionEffect:function(u,d){return nf(4,2,u,d)},useMemo:function(u,d){var v=Cs();return d=d===void 0?null:d,u=u(),v.memoizedState=[u,d],u},useReducer:function(u,d,v){var S=Cs();return d=v!==void 0?v(d):d,S.memoizedState=S.baseState=d,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:d},S.queue=u,u=u.dispatch=sB.bind(null,Sn,u),[S.memoizedState,u]},useRef:function(u){var d=Cs();return u={current:u},d.memoizedState=u},useState:$0,useDebugValue:tv,useDeferredValue:function(u){var d=$0(u),v=d[0],S=d[1];return ev(function(){var E=vr.transition;vr.transition={};try{S(u)}finally{vr.transition=E}},[u]),v},useTransition:function(){var u=$0(!1),d=u[0];return u=rB.bind(null,u[1]),Cs().memoizedState=u,[d,u]},useMutableSource:function(){},useSyncExternalStore:function(u,d,v){var S=Sn,E=Cs();if(hn){if(v===void 0)throw Error(o(407));v=v()}else{if(v=d(),Dn===null)throw Error(o(349));Hl&30||eM(S,d,v)}E.memoizedState=v;var T={value:v,getSnapshot:d};return E.queue=T,ev(nM.bind(null,S,T,u),[u]),S.flags|=2048,Au(9,tM.bind(null,S,T,v,d),void 0,null),v},useId:function(){var u=Cs(),d=Dn.identifierPrefix;if(hn){var v=bs,S=Es;v=(S&~(1<<32-dn(S)-1)).toString(32)+v,d=":"+d+"R"+v,v=_u++,0<v&&(d+="H"+v.toString(32)),d+=":"}else v=iB++,d=":"+d+"r"+v.toString(32)+":";return u.memoizedState=d},unstable_isNewReconciler:!1},lB={readContext:fr,useCallback:cM,useContext:fr,useEffect:Su,useImperativeHandle:lM,useInsertionEffect:sM,useLayoutEffect:oM,useMemo:uM,useReducer:ef,useRef:rM,useState:function(){return ef(ma)},useDebugValue:tv,useDeferredValue:function(u){var d=ef(ma),v=d[0],S=d[1];return Su(function(){var E=vr.transition;vr.transition={};try{S(u)}finally{vr.transition=E}},[u]),v},useTransition:function(){var u=ef(ma)[0],d=as().memoizedState;return[u,d]},useMutableSource:ZS,useSyncExternalStore:$S,useId:dM,unstable_isNewReconciler:!1},cB={readContext:fr,useCallback:cM,useContext:fr,useEffect:Su,useImperativeHandle:lM,useInsertionEffect:sM,useLayoutEffect:oM,useMemo:uM,useReducer:tf,useRef:rM,useState:function(){return tf(ma)},useDebugValue:tv,useDeferredValue:function(u){var d=tf(ma),v=d[0],S=d[1];return Su(function(){var E=vr.transition;vr.transition={};try{S(u)}finally{vr.transition=E}},[u]),v},useTransition:function(){var u=tf(ma)[0],d=as().memoizedState;return[u,d]},useMutableSource:ZS,useSyncExternalStore:$S,useId:dM,unstable_isNewReconciler:!1};function nv(u,d){try{var v="",S=d;do v+=nB(S),S=S.return;while(S);var E=v}catch(T){E=`
Error generating stack: `+T.message+`
`+T.stack}return{value:u,source:d,stack:E}}function iv(u,d){try{console.error(d.value)}catch(v){setTimeout(function(){throw v})}}var uB=typeof WeakMap=="function"?WeakMap:Map;function gM(u,d,v){v=ws(-1,v),v.tag=3,v.payload={element:null};var S=d.value;return v.callback=function(){Af||(Af=!0,Av=S),iv(u,d)},v}function vM(u,d,v){v=ws(-1,v),v.tag=3;var S=u.type.getDerivedStateFromError;if(typeof S=="function"){var E=d.value;v.payload=function(){return S(E)},v.callback=function(){iv(u,d)}}var T=u.stateNode;return T!==null&&typeof T.componentDidCatch=="function"&&(v.callback=function(){iv(u,d),typeof S!="function"&&(vo===null?vo=new Set([this]):vo.add(this));var G=d.stack;this.componentDidCatch(d.value,{componentStack:G!==null?G:""})}),v}function yM(u,d,v){var S=u.pingCache;if(S===null){S=u.pingCache=new uB;var E=new Set;S.set(d,E)}else E=S.get(d),E===void 0&&(E=new Set,S.set(d,E));E.has(v)||(E.add(v),u=wB.bind(null,u,d,v),d.then(u,u))}function xM(u){do{var d;if((d=u.tag===13)&&(d=u.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return u;u=u.return}while(u!==null);return null}function _M(u,d,v,S,E){return u.mode&1?(u.flags|=65536,u.lanes=E,u):(u===d?u.flags|=65536:(u.flags|=128,v.flags|=131072,v.flags&=-52805,v.tag===1&&(v.alternate===null?v.tag=17:(d=ws(-1,1),d.tag=2,go(v,d))),v.lanes|=1),u)}function ls(u){u.flags|=4}function AM(u,d){if(u!==null&&u.child===d.child)return!0;if(d.flags&16)return!1;for(u=d.child;u!==null;){if(u.flags&12854||u.subtreeFlags&12854)return!1;u=u.sibling}return!0}var Mu,wu,of,af;if(lt)Mu=function(u,d){for(var v=d.child;v!==null;){if(v.tag===5||v.tag===6)me(u,v.stateNode);else if(v.tag!==4&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===d)break;for(;v.sibling===null;){if(v.return===null||v.return===d)return;v=v.return}v.sibling.return=v.return,v=v.sibling}},wu=function(){},of=function(u,d,v,S,E){if(u=u.memoizedProps,u!==S){var T=d.stateNode,G=os(gr.current);v=re(T,v,u,S,E,G),(d.updateQueue=v)&&ls(d)}},af=function(u,d,v,S){v!==S&&ls(d)};else if(ye){Mu=function(u,d,v,S){for(var E=d.child;E!==null;){if(E.tag===5){var T=E.stateNode;v&&S&&(T=Lt(T,E.type,E.memoizedProps,E)),me(u,T)}else if(E.tag===6)T=E.stateNode,v&&S&&(T=Ln(T,E.memoizedProps,E)),me(u,T);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)T=E.child,T!==null&&(T.return=E),Mu(u,E,!0,!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===d)break;for(;E.sibling===null;){if(E.return===null||E.return===d)return;E=E.return}E.sibling.return=E.return,E=E.sibling}};var SM=function(u,d,v,S){for(var E=d.child;E!==null;){if(E.tag===5){var T=E.stateNode;v&&S&&(T=Lt(T,E.type,E.memoizedProps,E)),ct(u,T)}else if(E.tag===6)T=E.stateNode,v&&S&&(T=Ln(T,E.memoizedProps,E)),ct(u,T);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)T=E.child,T!==null&&(T.return=E),SM(u,E,!0,!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===d)break;for(;E.sibling===null;){if(E.return===null||E.return===d)return;E=E.return}E.sibling.return=E.return,E=E.sibling}};wu=function(u,d){var v=d.stateNode;if(!AM(u,d)){u=v.containerInfo;var S=Fe(u);SM(S,d,!1,!1),v.pendingChildren=S,ls(d),Vt(u,S)}},of=function(u,d,v,S,E){var T=u.stateNode,G=u.memoizedProps;if((u=AM(u,d))&&G===S)d.stateNode=T;else{var Y=d.stateNode,he=os(gr.current),Re=null;G!==S&&(Re=re(Y,v,G,S,E,he)),u&&Re===null?d.stateNode=T:(T=Ge(T,Re,v,G,S,d,u,Y),Be(T,v,S,E,he)&&ls(d),d.stateNode=T,u?ls(d):Mu(T,d,!1,!1))}},af=function(u,d,v,S){v!==S?(u=os(kl.current),v=os(gr.current),d.stateNode=Ee(S,u,v,d),ls(d)):d.stateNode=u.stateNode}}else wu=function(){},of=function(){},af=function(){};function Eu(u,d){if(!hn)switch(u.tailMode){case"hidden":d=u.tail;for(var v=null;d!==null;)d.alternate!==null&&(v=d),d=d.sibling;v===null?u.tail=null:v.sibling=null;break;case"collapsed":v=u.tail;for(var S=null;v!==null;)v.alternate!==null&&(S=v),v=v.sibling;S===null?d||u.tail===null?u.tail=null:u.tail.sibling=null:S.sibling=null}}function fi(u){var d=u.alternate!==null&&u.alternate.child===u.child,v=0,S=0;if(d)for(var E=u.child;E!==null;)v|=E.lanes|E.childLanes,S|=E.subtreeFlags&14680064,S|=E.flags&14680064,E.return=u,E=E.sibling;else for(E=u.child;E!==null;)v|=E.lanes|E.childLanes,S|=E.subtreeFlags,S|=E.flags,E.return=u,E=E.sibling;return u.subtreeFlags|=S,u.childLanes=v,d}function dB(u,d,v){var S=d.pendingProps;switch(G0(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fi(d),null;case 1:return Cn(d.type)&&Kn(),fi(d),null;case 3:return S=d.stateNode,zl(),ft(un),ft(He),Y0(),S.pendingContext&&(S.context=S.pendingContext,S.pendingContext=null),(u===null||u.child===null)&&(mu(d)?ls(d):u===null||u.memoizedState.isDehydrated&&!(d.flags&256)||(d.flags|=1024,Nr!==null&&(wv(Nr),Nr=null))),wu(u,d),fi(d),null;case 5:J0(d),v=os(kl.current);var E=d.type;if(u!==null&&d.stateNode!=null)of(u,d,E,S,v),u.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!S){if(d.stateNode===null)throw Error(o(166));return fi(d),null}if(u=os(gr.current),mu(d)){if(!Ae)throw Error(o(175));u=Lh(d.stateNode,d.type,d.memoizedProps,v,u,d,!pu),d.updateQueue=u,u!==null&&ls(d)}else{var T=Z(E,S,v,u,d);Mu(T,d,!1,!1),d.stateNode=T,Be(T,E,S,v,u)&&ls(d)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return fi(d),null;case 6:if(u&&d.stateNode!=null)af(u,d,u.memoizedProps,S);else{if(typeof S!="string"&&d.stateNode===null)throw Error(o(166));if(u=os(kl.current),v=os(gr.current),mu(d)){if(!Ae)throw Error(o(176));if(u=d.stateNode,S=d.memoizedProps,(v=Dh(u,S,d,!pu))&&(E=$i,E!==null))switch(T=(E.mode&1)!==0,E.tag){case 3:$(E.stateNode.containerInfo,u,S,T);break;case 5:Pe(E.type,E.memoizedProps,E.stateNode,u,S,T)}v&&ls(d)}else d.stateNode=Ee(S,u,v,d)}return fi(d),null;case 13:if(ft(mn),S=d.memoizedState,hn&&er!==null&&d.mode&1&&!(d.flags&128)){for(u=er;u;)u=ho(u);return Ul(),d.flags|=98560,d}if(S!==null&&S.dehydrated!==null){if(S=mu(d),u===null){if(!S)throw Error(o(318));if(!Ae)throw Error(o(344));if(u=d.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(o(317));E0(u,d)}else Ul(),!(d.flags&128)&&(d.memoizedState=null),d.flags|=4;return fi(d),null}return Nr!==null&&(wv(Nr),Nr=null),d.flags&128?(d.lanes=v,d):(S=S!==null,v=!1,u===null?mu(d):v=u.memoizedState!==null,S&&!v&&(d.child.flags|=8192,d.mode&1&&(u===null||mn.current&1?Gn===0&&(Gn=3):bv())),d.updateQueue!==null&&(d.flags|=4),fi(d),null);case 4:return zl(),wu(u,d),u===null&&We(d.stateNode.containerInfo),fi(d),null;case 10:return F0(d.type._context),fi(d),null;case 17:return Cn(d.type)&&Kn(),fi(d),null;case 19:if(ft(mn),E=d.memoizedState,E===null)return fi(d),null;if(S=(d.flags&128)!==0,T=E.rendering,T===null)if(S)Eu(E,!1);else{if(Gn!==0||u!==null&&u.flags&128)for(u=d.child;u!==null;){if(T=qh(u),T!==null){for(d.flags|=128,Eu(E,!1),u=T.updateQueue,u!==null&&(d.updateQueue=u,d.flags|=4),d.subtreeFlags=0,u=v,S=d.child;S!==null;)v=S,E=u,v.flags&=14680066,T=v.alternate,T===null?(v.childLanes=0,v.lanes=E,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=T.childLanes,v.lanes=T.lanes,v.child=T.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=T.memoizedProps,v.memoizedState=T.memoizedState,v.updateQueue=T.updateQueue,v.type=T.type,E=T.dependencies,v.dependencies=E===null?null:{lanes:E.lanes,firstContext:E.firstContext}),S=S.sibling;return wt(mn,mn.current&1|2),d.child}u=u.sibling}E.tail!==null&&Yn()>_v&&(d.flags|=128,S=!0,Eu(E,!1),d.lanes=4194304)}else{if(!S)if(u=qh(T),u!==null){if(d.flags|=128,S=!0,u=u.updateQueue,u!==null&&(d.updateQueue=u,d.flags|=4),Eu(E,!0),E.tail===null&&E.tailMode==="hidden"&&!T.alternate&&!hn)return fi(d),null}else 2*Yn()-E.renderingStartTime>_v&&v!==1073741824&&(d.flags|=128,S=!0,Eu(E,!1),d.lanes=4194304);E.isBackwards?(T.sibling=d.child,d.child=T):(u=E.last,u!==null?u.sibling=T:d.child=T,E.last=T)}return E.tail!==null?(d=E.tail,E.rendering=d,E.tail=d.sibling,E.renderingStartTime=Yn(),d.sibling=null,u=mn.current,wt(mn,S?u&1|2:u&1),d):(fi(d),null);case 22:case 23:return Ev(),S=d.memoizedState!==null,u!==null&&u.memoizedState!==null!==S&&(d.flags|=8192),S&&d.mode&1?nr&1073741824&&(fi(d),lt&&d.subtreeFlags&6&&(d.flags|=8192)):fi(d),null;case 24:return null;case 25:return null}throw Error(o(156,d.tag))}var hB=a.ReactCurrentOwner,tr=!1;function Ti(u,d,v,S){d.child=u===null?QS(d,null,v,S):Ol(d,u.child,v,S)}function MM(u,d,v,S,E){v=v.render;var T=d.ref;return Dl(d,E),S=q0(u,d,v,S,T,E),v=Z0(),u!==null&&!tr?(d.updateQueue=u.updateQueue,d.flags&=-2053,u.lanes&=~E,Ts(u,d,E)):(hn&&v&&H0(d),d.flags|=1,Ti(u,d,S,E),d.child)}function wM(u,d,v,S,E){if(u===null){var T=v.type;return typeof T=="function"&&!Cv(T)&&T.defaultProps===void 0&&v.compare===null&&v.defaultProps===void 0?(d.tag=15,d.type=T,EM(u,d,T,S,E)):(u=Tf(v.type,null,S,d,d.mode,E),u.ref=d.ref,u.return=d,d.child=u)}if(T=u.child,!(u.lanes&E)){var G=T.memoizedProps;if(v=v.compare,v=v!==null?v:Gh,v(G,S)&&u.ref===d.ref)return Ts(u,d,E)}return d.flags|=1,u=Ao(T,S),u.ref=d.ref,u.return=d,d.child=u}function EM(u,d,v,S,E){if(u!==null&&Gh(u.memoizedProps,S)&&u.ref===d.ref)if(tr=!1,(u.lanes&E)!==0)u.flags&131072&&(tr=!0);else return d.lanes=u.lanes,Ts(u,d,E);return rv(u,d,v,S,E)}function bM(u,d,v){var S=d.pendingProps,E=S.children,T=u!==null?u.memoizedState:null;if(S.mode==="hidden")if(!(d.mode&1))d.memoizedState={baseLanes:0,cachePool:null},wt(Gl,nr),nr|=v;else if(v&1073741824)d.memoizedState={baseLanes:0,cachePool:null},S=T!==null?T.baseLanes:v,wt(Gl,nr),nr|=S;else return u=T!==null?T.baseLanes|v:v,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:u,cachePool:null},d.updateQueue=null,wt(Gl,nr),nr|=u,null;else T!==null?(S=T.baseLanes|v,d.memoizedState=null):S=v,wt(Gl,nr),nr|=S;return Ti(u,d,E,v),d.child}function CM(u,d){var v=d.ref;(u===null&&v!==null||u!==null&&u.ref!==v)&&(d.flags|=512,d.flags|=2097152)}function rv(u,d,v,S,E){var T=Cn(v)?Dt:He.current;return T=Jn(d,T),Dl(d,E),v=q0(u,d,v,S,T,E),S=Z0(),u!==null&&!tr?(d.updateQueue=u.updateQueue,d.flags&=-2053,u.lanes&=~E,Ts(u,d,E)):(hn&&S&&H0(d),d.flags|=1,Ti(u,d,v,E),d.child)}function TM(u,d,v,S,E){if(Cn(v)){var T=!0;Ci(d)}else T=!1;if(Dl(d,E),d.stateNode===null)u!==null&&(u.alternate=null,d.alternate=null,d.flags|=2),GS(d,v,S),z0(d,v,S,E),S=!0;else if(u===null){var G=d.stateNode,Y=d.memoizedProps;G.props=Y;var he=G.context,Re=v.contextType;typeof Re=="object"&&Re!==null?Re=fr(Re):(Re=Cn(v)?Dt:He.current,Re=Jn(d,Re));var Qe=v.getDerivedStateFromProps,_t=typeof Qe=="function"||typeof G.getSnapshotBeforeUpdate=="function";_t||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(Y!==S||he!==Re)&&VS(d,G,S,Re),mo=!1;var dt=d.memoizedState;G.state=dt,Xh(d,S,G,E),he=d.memoizedState,Y!==S||dt!==he||un.current||mo?(typeof Qe=="function"&&(k0(d,v,Qe,S),he=d.memoizedState),(Y=mo||HS(d,v,Y,S,dt,he,Re))?(_t||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount()),typeof G.componentDidMount=="function"&&(d.flags|=4194308)):(typeof G.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=S,d.memoizedState=he),G.props=S,G.state=he,G.context=Re,S=Y):(typeof G.componentDidMount=="function"&&(d.flags|=4194308),S=!1)}else{G=d.stateNode,US(u,d),Y=d.memoizedProps,Re=d.type===d.elementType?Y:Dr(d.type,Y),G.props=Re,_t=d.pendingProps,dt=G.context,he=v.contextType,typeof he=="object"&&he!==null?he=fr(he):(he=Cn(v)?Dt:He.current,he=Jn(d,he));var en=v.getDerivedStateFromProps;(Qe=typeof en=="function"||typeof G.getSnapshotBeforeUpdate=="function")||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(Y!==_t||dt!==he)&&VS(d,G,S,he),mo=!1,dt=d.memoizedState,G.state=dt,Xh(d,S,G,E);var ot=d.memoizedState;Y!==_t||dt!==ot||un.current||mo?(typeof en=="function"&&(k0(d,v,en,S),ot=d.memoizedState),(Re=mo||HS(d,v,Re,S,dt,ot,he)||!1)?(Qe||typeof G.UNSAFE_componentWillUpdate!="function"&&typeof G.componentWillUpdate!="function"||(typeof G.componentWillUpdate=="function"&&G.componentWillUpdate(S,ot,he),typeof G.UNSAFE_componentWillUpdate=="function"&&G.UNSAFE_componentWillUpdate(S,ot,he)),typeof G.componentDidUpdate=="function"&&(d.flags|=4),typeof G.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof G.componentDidUpdate!="function"||Y===u.memoizedProps&&dt===u.memoizedState||(d.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||Y===u.memoizedProps&&dt===u.memoizedState||(d.flags|=1024),d.memoizedProps=S,d.memoizedState=ot),G.props=S,G.state=ot,G.context=he,S=Re):(typeof G.componentDidUpdate!="function"||Y===u.memoizedProps&&dt===u.memoizedState||(d.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||Y===u.memoizedProps&&dt===u.memoizedState||(d.flags|=1024),S=!1)}return sv(u,d,v,S,T,E)}function sv(u,d,v,S,E,T){CM(u,d);var G=(d.flags&128)!==0;if(!S&&!G)return E&&po(d,v,!1),Ts(u,d,T);S=d.stateNode,hB.current=d;var Y=G&&typeof v.getDerivedStateFromError!="function"?null:S.render();return d.flags|=1,u!==null&&G?(d.child=Ol(d,u.child,null,T),d.child=Ol(d,null,Y,T)):Ti(u,d,Y,T),d.memoizedState=S.state,E&&po(d,v,!0),d.child}function RM(u){var d=u.stateNode;d.pendingContext?fo(u,d.pendingContext,d.pendingContext!==d.context):d.context&&fo(u,d.context,!1),X0(u,d.containerInfo)}function IM(u,d,v,S,E){return Ul(),j0(E),d.flags|=256,Ti(u,d,v,S),d.child}var lf={dehydrated:null,treeContext:null,retryLane:0};function cf(u){return{baseLanes:u,cachePool:null}}function PM(u,d,v){var S=d.pendingProps,E=mn.current,T=!1,G=(d.flags&128)!==0,Y;if((Y=G)||(Y=u!==null&&u.memoizedState===null?!1:(E&2)!==0),Y?(T=!0,d.flags&=-129):(u===null||u.memoizedState!==null)&&(E|=1),wt(mn,E&1),u===null)return W0(d),u=d.memoizedState,u!==null&&(u=u.dehydrated,u!==null)?(d.mode&1?ha(u)?d.lanes=8:d.lanes=1073741824:d.lanes=1,null):(E=S.children,u=S.fallback,T?(S=d.mode,T=d.child,E={mode:"hidden",children:E},!(S&1)&&T!==null?(T.childLanes=0,T.pendingProps=E):T=Rf(E,S,0,null),u=Aa(u,S,v,null),T.return=d,u.return=d,T.sibling=u,d.child=T,d.child.memoizedState=cf(v),d.memoizedState=lf,u):ov(d,E));if(E=u.memoizedState,E!==null){if(Y=E.dehydrated,Y!==null){if(G)return d.flags&256?(d.flags&=-257,uf(u,d,v,Error(o(422)))):d.memoizedState!==null?(d.child=u.child,d.flags|=128,null):(T=S.fallback,E=d.mode,S=Rf({mode:"visible",children:S.children},E,0,null),T=Aa(T,E,v,null),T.flags|=2,S.return=d,T.return=d,S.sibling=T,d.child=S,d.mode&1&&Ol(d,u.child,null,v),d.child.memoizedState=cf(v),d.memoizedState=lf,T);if(!(d.mode&1))d=uf(u,d,v,null);else if(ha(Y))d=uf(u,d,v,Error(o(419)));else if(S=(v&u.childLanes)!==0,tr||S){if(S=Dn,S!==null){switch(v&-v){case 4:T=2;break;case 16:T=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:T=32;break;case 536870912:T=268435456;break;default:T=0}S=T&(S.suspendedLanes|v)?0:T,S!==0&&S!==E.retryLane&&(E.retryLane=S,yr(u,S,-1))}bv(),d=uf(u,d,v,Error(o(421)))}else $r(Y)?(d.flags|=128,d.child=u.child,d=EB.bind(null,u),Ph(Y,d),d=null):(v=E.treeContext,Ae&&(er=Bl(Y),$i=d,hn=!0,Nr=null,pu=!1,v!==null&&(pr[mr++]=Es,pr[mr++]=bs,pr[mr++]=fa,Es=v.id,bs=v.overflow,fa=d)),d=ov(d,d.pendingProps.children),d.flags|=4096);return d}return T?(S=LM(u,d,S.children,S.fallback,v),T=d.child,E=u.child.memoizedState,T.memoizedState=E===null?cf(v):{baseLanes:E.baseLanes|v,cachePool:null},T.childLanes=u.childLanes&~v,d.memoizedState=lf,S):(v=BM(u,d,S.children,v),d.memoizedState=null,v)}return T?(S=LM(u,d,S.children,S.fallback,v),T=d.child,E=u.child.memoizedState,T.memoizedState=E===null?cf(v):{baseLanes:E.baseLanes|v,cachePool:null},T.childLanes=u.childLanes&~v,d.memoizedState=lf,S):(v=BM(u,d,S.children,v),d.memoizedState=null,v)}function ov(u,d){return d=Rf({mode:"visible",children:d},u.mode,0,null),d.return=u,u.child=d}function BM(u,d,v,S){var E=u.child;return u=E.sibling,v=Ao(E,{mode:"visible",children:v}),!(d.mode&1)&&(v.lanes=S),v.return=d,v.sibling=null,u!==null&&(S=d.deletions,S===null?(d.deletions=[u],d.flags|=16):S.push(u)),d.child=v}function LM(u,d,v,S,E){var T=d.mode;u=u.child;var G=u.sibling,Y={mode:"hidden",children:v};return!(T&1)&&d.child!==u?(v=d.child,v.childLanes=0,v.pendingProps=Y,d.deletions=null):(v=Ao(u,Y),v.subtreeFlags=u.subtreeFlags&14680064),G!==null?S=Ao(G,S):(S=Aa(S,T,E,null),S.flags|=2),S.return=d,v.return=d,v.sibling=S,d.child=v,S}function uf(u,d,v,S){return S!==null&&j0(S),Ol(d,u.child,null,v),u=ov(d,d.pendingProps.children),u.flags|=2,d.memoizedState=null,u}function DM(u,d,v){u.lanes|=d;var S=u.alternate;S!==null&&(S.lanes|=d),U0(u.return,d,v)}function av(u,d,v,S,E){var T=u.memoizedState;T===null?u.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:S,tail:v,tailMode:E}:(T.isBackwards=d,T.rendering=null,T.renderingStartTime=0,T.last=S,T.tail=v,T.tailMode=E)}function NM(u,d,v){var S=d.pendingProps,E=S.revealOrder,T=S.tail;if(Ti(u,d,S.children,v),S=mn.current,S&2)S=S&1|2,d.flags|=128;else{if(u!==null&&u.flags&128)e:for(u=d.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&DM(u,v,d);else if(u.tag===19)DM(u,v,d);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===d)break e;for(;u.sibling===null;){if(u.return===null||u.return===d)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}S&=1}if(wt(mn,S),!(d.mode&1))d.memoizedState=null;else switch(E){case"forwards":for(v=d.child,E=null;v!==null;)u=v.alternate,u!==null&&qh(u)===null&&(E=v),v=v.sibling;v=E,v===null?(E=d.child,d.child=null):(E=v.sibling,v.sibling=null),av(d,!1,E,v,T);break;case"backwards":for(v=null,E=d.child,d.child=null;E!==null;){if(u=E.alternate,u!==null&&qh(u)===null){d.child=E;break}u=E.sibling,E.sibling=v,v=E,E=u}av(d,!0,v,null,T);break;case"together":av(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function Ts(u,d,v){if(u!==null&&(d.dependencies=u.dependencies),Vl|=d.lanes,!(v&d.childLanes))return null;if(u!==null&&d.child!==u.child)throw Error(o(153));if(d.child!==null){for(u=d.child,v=Ao(u,u.pendingProps),d.child=v,v.return=d;u.sibling!==null;)u=u.sibling,v=v.sibling=Ao(u,u.pendingProps),v.return=d;v.sibling=null}return d.child}function fB(u,d,v){switch(d.tag){case 3:RM(d),Ul();break;case 5:qS(d);break;case 1:Cn(d.type)&&Ci(d);break;case 4:X0(d,d.stateNode.containerInfo);break;case 10:FS(d,d.type._context,d.memoizedProps.value);break;case 13:var S=d.memoizedState;if(S!==null)return S.dehydrated!==null?(wt(mn,mn.current&1),d.flags|=128,null):v&d.child.childLanes?PM(u,d,v):(wt(mn,mn.current&1),u=Ts(u,d,v),u!==null?u.sibling:null);wt(mn,mn.current&1);break;case 19:if(S=(v&d.childLanes)!==0,u.flags&128){if(S)return NM(u,d,v);d.flags|=128}var E=d.memoizedState;if(E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),wt(mn,mn.current),S)break;return null;case 22:case 23:return d.lanes=0,bM(u,d,v)}return Ts(u,d,v)}function pB(u,d){switch(G0(d),d.tag){case 1:return Cn(d.type)&&Kn(),u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 3:return zl(),ft(un),ft(He),Y0(),u=d.flags,u&65536&&!(u&128)?(d.flags=u&-65537|128,d):null;case 5:return J0(d),null;case 13:if(ft(mn),u=d.memoizedState,u!==null&&u.dehydrated!==null){if(d.alternate===null)throw Error(o(340));Ul()}return u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 19:return ft(mn),null;case 4:return zl(),null;case 10:return F0(d.type._context),null;case 22:case 23:return Ev(),null;case 24:return null;default:return null}}var df=!1,ga=!1,mB=typeof WeakSet=="function"?WeakSet:Set,ze=null;function hf(u,d){var v=u.ref;if(v!==null)if(typeof v=="function")try{v(null)}catch(S){Gi(u,d,S)}else v.current=null}function lv(u,d,v){try{v()}catch(S){Gi(u,d,S)}}var FM=!1;function gB(u,d){for(W(u.containerInfo),ze=d;ze!==null;)if(u=ze,d=u.child,(u.subtreeFlags&1028)!==0&&d!==null)d.return=u,ze=d;else for(;ze!==null;){u=ze;try{var v=u.alternate;if(u.flags&1024)switch(u.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var S=v.memoizedProps,E=v.memoizedState,T=u.stateNode,G=T.getSnapshotBeforeUpdate(u.elementType===u.type?S:Dr(u.type,S),E);T.__reactInternalSnapshotBeforeUpdate=G}break;case 3:lt&&ve(u.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(Y){Gi(u,u.return,Y)}if(d=u.sibling,d!==null){d.return=u.return,ze=d;break}ze=u.return}return v=FM,FM=!1,v}function va(u,d,v){var S=d.updateQueue;if(S=S!==null?S.lastEffect:null,S!==null){var E=S=S.next;do{if((E.tag&u)===u){var T=E.destroy;E.destroy=void 0,T!==void 0&&lv(d,v,T)}E=E.next}while(E!==S)}}function bu(u,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var v=d=d.next;do{if((v.tag&u)===u){var S=v.create;v.destroy=S()}v=v.next}while(v!==d)}}function cv(u){var d=u.ref;if(d!==null){var v=u.stateNode;switch(u.tag){case 5:u=te(v);break;default:u=v}typeof d=="function"?d(u):d.current=u}}function UM(u,d,v){if(ns&&typeof ns.onCommitFiberUnmount=="function")try{ns.onCommitFiberUnmount(zh,d)}catch{}switch(d.tag){case 0:case 11:case 14:case 15:if(u=d.updateQueue,u!==null&&(u=u.lastEffect,u!==null)){var S=u=u.next;do{var E=S,T=E.destroy;E=E.tag,T!==void 0&&(E&2||E&4)&&lv(d,v,T),S=S.next}while(S!==u)}break;case 1:if(hf(d,v),u=d.stateNode,typeof u.componentWillUnmount=="function")try{u.props=d.memoizedProps,u.state=d.memoizedState,u.componentWillUnmount()}catch(G){Gi(d,v,G)}break;case 5:hf(d,v);break;case 4:lt?VM(u,d,v):ye&&ye&&(d=d.stateNode.containerInfo,v=Fe(d),on(d,v))}}function OM(u,d,v){for(var S=d;;)if(UM(u,S,v),S.child===null||lt&&S.tag===4){if(S===d)break;for(;S.sibling===null;){if(S.return===null||S.return===d)return;S=S.return}S.sibling.return=S.return,S=S.sibling}else S.child.return=S,S=S.child}function kM(u){var d=u.alternate;d!==null&&(u.alternate=null,kM(d)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(d=u.stateNode,d!==null&&De(d)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function zM(u){return u.tag===5||u.tag===3||u.tag===4}function HM(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||zM(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function GM(u){if(lt){e:{for(var d=u.return;d!==null;){if(zM(d))break e;d=d.return}throw Error(o(160))}var v=d;switch(v.tag){case 5:d=v.stateNode,v.flags&32&&(pe(d),v.flags&=-33),v=HM(u),dv(u,v,d);break;case 3:case 4:d=v.stateNode.containerInfo,v=HM(u),uv(u,v,d);break;default:throw Error(o(161))}}}function uv(u,d,v){var S=u.tag;if(S===5||S===6)u=u.stateNode,d?mt(v,u,d):je(v,u);else if(S!==4&&(u=u.child,u!==null))for(uv(u,d,v),u=u.sibling;u!==null;)uv(u,d,v),u=u.sibling}function dv(u,d,v){var S=u.tag;if(S===5||S===6)u=u.stateNode,d?ut(v,u,d):Le(v,u);else if(S!==4&&(u=u.child,u!==null))for(dv(u,d,v),u=u.sibling;u!==null;)dv(u,d,v),u=u.sibling}function VM(u,d,v){for(var S=d,E=!1,T,G;;){if(!E){E=S.return;e:for(;;){if(E===null)throw Error(o(160));switch(T=E.stateNode,E.tag){case 5:G=!1;break e;case 3:T=T.containerInfo,G=!0;break e;case 4:T=T.containerInfo,G=!0;break e}E=E.return}E=!0}if(S.tag===5||S.tag===6)OM(u,S,v),G?K(T,S.stateNode):Je(T,S.stateNode);else if(S.tag===18)G?oe(T,S.stateNode):Q(T,S.stateNode);else if(S.tag===4){if(S.child!==null){T=S.stateNode.containerInfo,G=!0,S.child.return=S,S=S.child;continue}}else if(UM(u,S,v),S.child!==null){S.child.return=S,S=S.child;continue}if(S===d)break;for(;S.sibling===null;){if(S.return===null||S.return===d)return;S=S.return,S.tag===4&&(E=!1)}S.sibling.return=S.return,S=S.sibling}}function hv(u,d){if(lt){switch(d.tag){case 0:case 11:case 14:case 15:va(3,d,d.return),bu(3,d),va(5,d,d.return);return;case 1:return;case 5:var v=d.stateNode;if(v!=null){var S=d.memoizedProps;u=u!==null?u.memoizedProps:S;var E=d.type,T=d.updateQueue;d.updateQueue=null,T!==null&&Ke(v,T,E,u,S,d)}return;case 6:if(d.stateNode===null)throw Error(o(162));v=d.memoizedProps,Ct(d.stateNode,u!==null?u.memoizedProps:v,v);return;case 3:Ae&&u!==null&&u.memoizedState.isDehydrated&&Nh(d.stateNode.containerInfo);return;case 12:return;case 13:ff(d);return;case 19:ff(d);return;case 17:return}throw Error(o(163))}switch(d.tag){case 0:case 11:case 14:case 15:va(3,d,d.return),bu(3,d),va(5,d,d.return);return;case 12:return;case 13:ff(d);return;case 19:ff(d);return;case 3:Ae&&u!==null&&u.memoizedState.isDehydrated&&Nh(d.stateNode.containerInfo);break;case 22:case 23:return}e:if(ye){switch(d.tag){case 1:case 5:case 6:break e;case 3:case 4:d=d.stateNode,on(d.containerInfo,d.pendingChildren);break e}throw Error(o(163))}}function ff(u){var d=u.updateQueue;if(d!==null){u.updateQueue=null;var v=u.stateNode;v===null&&(v=u.stateNode=new mB),d.forEach(function(S){var E=bB.bind(null,u,S);v.has(S)||(v.add(S),S.then(E,E))})}}function vB(u,d){for(ze=d;ze!==null;){d=ze;var v=d.deletions;if(v!==null)for(var S=0;S<v.length;S++){var E=v[S];try{var T=u;lt?VM(T,E,d):OM(T,E,d);var G=E.alternate;G!==null&&(G.return=null),E.return=null}catch(st){Gi(E,d,st)}}if(v=d.child,d.subtreeFlags&12854&&v!==null)v.return=d,ze=v;else for(;ze!==null;){d=ze;try{var Y=d.flags;if(Y&32&&lt&&pe(d.stateNode),Y&512){var he=d.alternate;if(he!==null){var Re=he.ref;Re!==null&&(typeof Re=="function"?Re(null):Re.current=null)}}if(Y&8192)switch(d.tag){case 13:if(d.memoizedState!==null){var Qe=d.alternate;(Qe===null||Qe.memoizedState===null)&&(xv=Yn())}break;case 22:var _t=d.memoizedState!==null,dt=d.alternate,en=dt!==null&&dt.memoizedState!==null;if(v=d,lt){e:if(S=v,E=_t,T=null,lt)for(var ot=S;;){if(ot.tag===5){if(T===null){T=ot;var pi=ot.stateNode;E?Ue(pi):be(ot.stateNode,ot.memoizedProps)}}else if(ot.tag===6){if(T===null){var _r=ot.stateNode;E?J(_r):ce(_r,ot.memoizedProps)}}else if((ot.tag!==22&&ot.tag!==23||ot.memoizedState===null||ot===S)&&ot.child!==null){ot.child.return=ot,ot=ot.child;continue}if(ot===S)break;for(;ot.sibling===null;){if(ot.return===null||ot.return===S)break e;T===ot&&(T=null),ot=ot.return}T===ot&&(T=null),ot.sibling.return=ot.return,ot=ot.sibling}}if(_t&&!en&&v.mode&1){ze=v;for(var se=v.child;se!==null;){for(v=ze=se;ze!==null;){S=ze;var q=S.child;switch(S.tag){case 0:case 11:case 14:case 15:va(4,S,S.return);break;case 1:hf(S,S.return);var de=S.stateNode;if(typeof de.componentWillUnmount=="function"){var Ve=S.return;try{de.props=S.memoizedProps,de.state=S.memoizedState,de.componentWillUnmount()}catch(st){Gi(S,Ve,st)}}break;case 5:hf(S,S.return);break;case 22:if(S.memoizedState!==null){XM(v);continue}}q!==null?(q.return=S,ze=q):XM(v)}se=se.sibling}}}switch(Y&4102){case 2:GM(d),d.flags&=-3;break;case 6:GM(d),d.flags&=-3,hv(d.alternate,d);break;case 4096:d.flags&=-4097;break;case 4100:d.flags&=-4097,hv(d.alternate,d);break;case 4:hv(d.alternate,d)}}catch(st){Gi(d,d.return,st)}if(v=d.sibling,v!==null){v.return=d.return,ze=v;break}ze=d.return}}}function yB(u,d,v){ze=u,WM(u)}function WM(u,d,v){for(var S=(u.mode&1)!==0;ze!==null;){var E=ze,T=E.child;if(E.tag===22&&S){var G=E.memoizedState!==null||df;if(!G){var Y=E.alternate,he=Y!==null&&Y.memoizedState!==null||ga;Y=df;var Re=ga;if(df=G,(ga=he)&&!Re)for(ze=E;ze!==null;)G=ze,he=G.child,G.tag===22&&G.memoizedState!==null?JM(E):he!==null?(he.return=G,ze=he):JM(E);for(;T!==null;)ze=T,WM(T),T=T.sibling;ze=E,df=Y,ga=Re}jM(u)}else E.subtreeFlags&8772&&T!==null?(T.return=E,ze=T):jM(u)}}function jM(u){for(;ze!==null;){var d=ze;if(d.flags&8772){var v=d.alternate;try{if(d.flags&8772)switch(d.tag){case 0:case 11:case 15:ga||bu(5,d);break;case 1:var S=d.stateNode;if(d.flags&4&&!ga)if(v===null)S.componentDidMount();else{var E=d.elementType===d.type?v.memoizedProps:Dr(d.type,v.memoizedProps);S.componentDidUpdate(E,v.memoizedState,S.__reactInternalSnapshotBeforeUpdate)}var T=d.updateQueue;T!==null&&kS(d,T,S);break;case 3:var G=d.updateQueue;if(G!==null){if(v=null,d.child!==null)switch(d.child.tag){case 5:v=te(d.child.stateNode);break;case 1:v=d.child.stateNode}kS(d,G,v)}break;case 5:var Y=d.stateNode;v===null&&d.flags&4&&we(Y,d.type,d.memoizedProps,d);break;case 6:break;case 4:break;case 12:break;case 13:if(Ae&&d.memoizedState===null){var he=d.alternate;if(he!==null){var Re=he.memoizedState;if(Re!==null){var Qe=Re.dehydrated;Qe!==null&&O(Qe)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}ga||d.flags&512&&cv(d)}catch(_t){Gi(d,d.return,_t)}}if(d===u){ze=null;break}if(v=d.sibling,v!==null){v.return=d.return,ze=v;break}ze=d.return}}function XM(u){for(;ze!==null;){var d=ze;if(d===u){ze=null;break}var v=d.sibling;if(v!==null){v.return=d.return,ze=v;break}ze=d.return}}function JM(u){for(;ze!==null;){var d=ze;try{switch(d.tag){case 0:case 11:case 15:var v=d.return;try{bu(4,d)}catch(he){Gi(d,v,he)}break;case 1:var S=d.stateNode;if(typeof S.componentDidMount=="function"){var E=d.return;try{S.componentDidMount()}catch(he){Gi(d,E,he)}}var T=d.return;try{cv(d)}catch(he){Gi(d,T,he)}break;case 5:var G=d.return;try{cv(d)}catch(he){Gi(d,G,he)}}}catch(he){Gi(d,d.return,he)}if(d===u){ze=null;break}var Y=d.sibling;if(Y!==null){Y.return=d.return,ze=Y;break}ze=d.return}}var pf=0,mf=1,gf=2,vf=3,yf=4;if(typeof Symbol=="function"&&Symbol.for){var Cu=Symbol.for;pf=Cu("selector.component"),mf=Cu("selector.has_pseudo_class"),gf=Cu("selector.role"),vf=Cu("selector.test_id"),yf=Cu("selector.text")}function fv(u){var d=V(u);if(d!=null){if(typeof d.memoizedProps["data-testname"]!="string")throw Error(o(364));return d}if(u=k(u),u===null)throw Error(o(362));return u.stateNode.current}function pv(u,d){switch(d.$$typeof){case pf:if(u.type===d.value)return!0;break;case mf:e:{d=d.value,u=[u,0];for(var v=0;v<u.length;){var S=u[v++],E=u[v++],T=d[E];if(S.tag!==5||!fe(S)){for(;T!=null&&pv(S,T);)E++,T=d[E];if(E===d.length){d=!0;break e}else for(S=S.child;S!==null;)u.push(S,E),S=S.sibling}}d=!1}return d;case gf:if(u.tag===5&&Se(u.stateNode,d.value))return!0;break;case yf:if((u.tag===5||u.tag===6)&&(u=ie(u),u!==null&&0<=u.indexOf(d.value)))return!0;break;case vf:if(u.tag===5&&(u=u.memoizedProps["data-testname"],typeof u=="string"&&u.toLowerCase()===d.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function mv(u){switch(u.$$typeof){case pf:return"<"+(P(u.value)||"Unknown")+">";case mf:return":has("+(mv(u)||"")+")";case gf:return'[role="'+u.value+'"]';case yf:return'"'+u.value+'"';case vf:return'[data-testname="'+u.value+'"]';default:throw Error(o(365))}}function KM(u,d){var v=[];u=[u,0];for(var S=0;S<u.length;){var E=u[S++],T=u[S++],G=d[T];if(E.tag!==5||!fe(E)){for(;G!=null&&pv(E,G);)T++,G=d[T];if(T===d.length)v.push(E);else for(E=E.child;E!==null;)u.push(E,T),E=E.sibling}}return v}function gv(u,d){if(!Oe)throw Error(o(363));u=fv(u),u=KM(u,d),d=[],u=Array.from(u);for(var v=0;v<u.length;){var S=u[v++];if(S.tag===5)fe(S)||d.push(S.stateNode);else for(S=S.child;S!==null;)u.push(S),S=S.sibling}return d}var xB=Math.ceil,xf=a.ReactCurrentDispatcher,vv=a.ReactCurrentOwner,Tn=a.ReactCurrentBatchConfig,Bt=0,Dn=null,Nn=null,ti=0,nr=0,Gl=zt(0),Gn=0,Tu=null,Vl=0,_f=0,yv=0,Ru=null,zi=null,xv=0,_v=1/0;function Wl(){_v=Yn()+500}var Af=!1,Av=null,vo=null,Sf=!1,yo=null,Mf=0,Iu=0,Sv=null,wf=-1,Ef=0;function Ri(){return Bt&6?Yn():wf!==-1?wf:wf=Yn()}function xo(u){return u.mode&1?Bt&2&&ti!==0?ti&-ti:tB.transition!==null?(Ef===0&&(u=Uh,Uh<<=1,!(Uh&4194240)&&(Uh=64),Ef=u),Ef):(u=jt,u!==0?u:Me()):1}function yr(u,d,v){if(50<Iu)throw Iu=0,Sv=null,Error(o(185));var S=bf(u,d);return S===null?null:(fu(S,d,v),(!(Bt&2)||S!==Dn)&&(S===Dn&&(!(Bt&2)&&(_f|=d),Gn===4&&_o(S,ti)),Hi(S,v),d===1&&Bt===0&&!(u.mode&1)&&(Wl(),Hh&&rs())),S)}function bf(u,d){u.lanes|=d;var v=u.alternate;for(v!==null&&(v.lanes|=d),v=u,u=u.return;u!==null;)u.childLanes|=d,v=u.alternate,v!==null&&(v.childLanes|=d),v=u,u=u.return;return v.tag===3?v.stateNode:null}function Hi(u,d){var v=u.callbackNode;X2(u,d);var S=kh(u,u===Dn?ti:0);if(S===0)v!==null&&DS(v),u.callbackNode=null,u.callbackPriority=0;else if(d=S&-S,u.callbackPriority!==d){if(v!=null&&DS(v),d===1)u.tag===0?eB(QM.bind(null,u)):NS(QM.bind(null,u)),Te?it(function(){Bt===0&&rs()}):I0(P0,rs),v=null;else{switch(LS(S)){case 1:v=P0;break;case 4:v=Q2;break;case 16:v=B0;break;case 536870912:v=q2;break;default:v=B0}v=s1(v,YM.bind(null,u))}u.callbackPriority=d,u.callbackNode=v}}function YM(u,d){if(wf=-1,Ef=0,Bt&6)throw Error(o(327));var v=u.callbackNode;if(_a()&&u.callbackNode!==v)return null;var S=kh(u,u===Dn?ti:0);if(S===0)return null;if(S&30||S&u.expiredLanes||d)d=Cf(u,S);else{d=S;var E=Bt;Bt|=2;var T=$M();(Dn!==u||ti!==d)&&(Wl(),ya(u,d));do try{SB();break}catch(Y){ZM(u,Y)}while(!0);N0(),xf.current=T,Bt=E,Nn!==null?d=0:(Dn=null,ti=0,d=Gn)}if(d!==0){if(d===2&&(E=C0(u),E!==0&&(S=E,d=Mv(u,E))),d===1)throw v=Tu,ya(u,0),_o(u,S),Hi(u,Yn()),v;if(d===6)_o(u,S);else{if(E=u.current.alternate,!(S&30)&&!_B(E)&&(d=Cf(u,S),d===2&&(T=C0(u),T!==0&&(S=T,d=Mv(u,T))),d===1))throw v=Tu,ya(u,0),_o(u,S),Hi(u,Yn()),v;switch(u.finishedWork=E,u.finishedLanes=S,d){case 0:case 1:throw Error(o(345));case 2:xa(u,zi);break;case 3:if(_o(u,S),(S&130023424)===S&&(d=xv+500-Yn(),10<d)){if(kh(u,0)!==0)break;if(E=u.suspendedLanes,(E&S)!==S){Ri(),u.pingedLanes|=u.suspendedLanes&E;break}u.timeoutHandle=_e(xa.bind(null,u,zi),d);break}xa(u,zi);break;case 4:if(_o(u,S),(S&4194240)===S)break;for(d=u.eventTimes,E=-1;0<S;){var G=31-dn(S);T=1<<G,G=d[G],G>E&&(E=G),S&=~T}if(S=E,S=Yn()-S,S=(120>S?120:480>S?480:1080>S?1080:1920>S?1920:3e3>S?3e3:4320>S?4320:1960*xB(S/1960))-S,10<S){u.timeoutHandle=_e(xa.bind(null,u,zi),S);break}xa(u,zi);break;case 5:xa(u,zi);break;default:throw Error(o(329))}}}return Hi(u,Yn()),u.callbackNode===v?YM.bind(null,u):null}function Mv(u,d){var v=Ru;return u.current.memoizedState.isDehydrated&&(ya(u,d).flags|=256),u=Cf(u,d),u!==2&&(d=zi,zi=v,d!==null&&wv(d)),u}function wv(u){zi===null?zi=u:zi.push.apply(zi,u)}function _B(u){for(var d=u;;){if(d.flags&16384){var v=d.updateQueue;if(v!==null&&(v=v.stores,v!==null))for(var S=0;S<v.length;S++){var E=v[S],T=E.getSnapshot;E=E.value;try{if(!is(T(),E))return!1}catch{return!1}}}if(v=d.child,d.subtreeFlags&16384&&v!==null)v.return=d,d=v;else{if(d===u)break;for(;d.sibling===null;){if(d.return===null||d.return===u)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function _o(u,d){for(d&=~yv,d&=~_f,u.suspendedLanes|=d,u.pingedLanes&=~d,u=u.expirationTimes;0<d;){var v=31-dn(d),S=1<<v;u[v]=-1,d&=~S}}function QM(u){if(Bt&6)throw Error(o(327));_a();var d=kh(u,0);if(!(d&1))return Hi(u,Yn()),null;var v=Cf(u,d);if(u.tag!==0&&v===2){var S=C0(u);S!==0&&(d=S,v=Mv(u,S))}if(v===1)throw v=Tu,ya(u,0),_o(u,d),Hi(u,Yn()),v;if(v===6)throw Error(o(345));return u.finishedWork=u.current.alternate,u.finishedLanes=d,xa(u,zi),Hi(u,Yn()),null}function qM(u){yo!==null&&yo.tag===0&&!(Bt&6)&&_a();var d=Bt;Bt|=1;var v=Tn.transition,S=jt;try{if(Tn.transition=null,jt=1,u)return u()}finally{jt=S,Tn.transition=v,Bt=d,!(Bt&6)&&rs()}}function Ev(){nr=Gl.current,ft(Gl)}function ya(u,d){u.finishedWork=null,u.finishedLanes=0;var v=u.timeoutHandle;if(v!==rt&&(u.timeoutHandle=rt,qe(v)),Nn!==null)for(v=Nn.return;v!==null;){var S=v;switch(G0(S),S.tag){case 1:S=S.type.childContextTypes,S!=null&&Kn();break;case 3:zl(),ft(un),ft(He),Y0();break;case 5:J0(S);break;case 4:zl();break;case 13:ft(mn);break;case 19:ft(mn);break;case 10:F0(S.type._context);break;case 22:case 23:Ev()}v=v.return}if(Dn=u,Nn=u=Ao(u.current,null),ti=nr=d,Gn=0,Tu=null,yv=_f=Vl=0,zi=Ru=null,ss!==null){for(d=0;d<ss.length;d++)if(v=ss[d],S=v.interleaved,S!==null){v.interleaved=null;var E=S.next,T=v.pending;if(T!==null){var G=T.next;T.next=E,S.next=G}v.pending=S}ss=null}return u}function ZM(u,d){do{var v=Nn;try{if(N0(),Zh.current=sf,$h){for(var S=Sn.memoizedState;S!==null;){var E=S.queue;E!==null&&(E.pending=null),S=S.next}$h=!1}if(Hl=0,Qn=di=Sn=null,xu=!1,_u=0,vv.current=null,v===null||v.return===null){Gn=1,Tu=d,Nn=null;break}e:{var T=u,G=v.return,Y=v,he=d;if(d=ti,Y.flags|=32768,he!==null&&typeof he=="object"&&typeof he.then=="function"){var Re=he,Qe=Y,_t=Qe.tag;if(!(Qe.mode&1)&&(_t===0||_t===11||_t===15)){var dt=Qe.alternate;dt?(Qe.updateQueue=dt.updateQueue,Qe.memoizedState=dt.memoizedState,Qe.lanes=dt.lanes):(Qe.updateQueue=null,Qe.memoizedState=null)}var en=xM(G);if(en!==null){en.flags&=-257,_M(en,G,Y,T,d),en.mode&1&&yM(T,Re,d),d=en,he=Re;var ot=d.updateQueue;if(ot===null){var pi=new Set;pi.add(he),d.updateQueue=pi}else ot.add(he);break e}else{if(!(d&1)){yM(T,Re,d),bv();break e}he=Error(o(426))}}else if(hn&&Y.mode&1){var _r=xM(G);if(_r!==null){!(_r.flags&65536)&&(_r.flags|=256),_M(_r,G,Y,T,d),j0(he);break e}}T=he,Gn!==4&&(Gn=2),Ru===null?Ru=[T]:Ru.push(T),he=nv(he,Y),Y=G;do{switch(Y.tag){case 3:Y.flags|=65536,d&=-d,Y.lanes|=d;var se=gM(Y,he,d);OS(Y,se);break e;case 1:T=he;var q=Y.type,de=Y.stateNode;if(!(Y.flags&128)&&(typeof q.getDerivedStateFromError=="function"||de!==null&&typeof de.componentDidCatch=="function"&&(vo===null||!vo.has(de)))){Y.flags|=65536,d&=-d,Y.lanes|=d;var Ve=vM(Y,T,d);OS(Y,Ve);break e}}Y=Y.return}while(Y!==null)}t1(v)}catch(st){d=st,Nn===v&&v!==null&&(Nn=v=v.return);continue}break}while(!0)}function $M(){var u=xf.current;return xf.current=sf,u===null?sf:u}function bv(){(Gn===0||Gn===3||Gn===2)&&(Gn=4),Dn===null||!(Vl&268435455)&&!(_f&268435455)||_o(Dn,ti)}function Cf(u,d){var v=Bt;Bt|=2;var S=$M();Dn===u&&ti===d||ya(u,d);do try{AB();break}catch(E){ZM(u,E)}while(!0);if(N0(),Bt=v,xf.current=S,Nn!==null)throw Error(o(261));return Dn=null,ti=0,Gn}function AB(){for(;Nn!==null;)e1(Nn)}function SB(){for(;Nn!==null&&!K2();)e1(Nn)}function e1(u){var d=r1(u.alternate,u,nr);u.memoizedProps=u.pendingProps,d===null?t1(u):Nn=d,vv.current=null}function t1(u){var d=u;do{var v=d.alternate;if(u=d.return,d.flags&32768){if(v=pB(v,d),v!==null){v.flags&=32767,Nn=v;return}if(u!==null)u.flags|=32768,u.subtreeFlags=0,u.deletions=null;else{Gn=6,Nn=null;return}}else if(v=dB(v,d,nr),v!==null){Nn=v;return}if(d=d.sibling,d!==null){Nn=d;return}Nn=d=u}while(d!==null);Gn===0&&(Gn=5)}function xa(u,d){var v=jt,S=Tn.transition;try{Tn.transition=null,jt=1,MB(u,d,v)}finally{Tn.transition=S,jt=v}return null}function MB(u,d,v){do _a();while(yo!==null);if(Bt&6)throw Error(o(327));var S=u.finishedWork,E=u.finishedLanes;if(S===null)return null;if(u.finishedWork=null,u.finishedLanes=0,S===u.current)throw Error(o(177));u.callbackNode=null,u.callbackPriority=0;var T=S.lanes|S.childLanes;if(J2(u,T),u===Dn&&(Nn=Dn=null,ti=0),!(S.subtreeFlags&2064)&&!(S.flags&2064)||Sf||(Sf=!0,s1(B0,function(){return _a(),null})),T=(S.flags&15990)!==0,S.subtreeFlags&15990||T){T=Tn.transition,Tn.transition=null;var G=jt;jt=1;var Y=Bt;Bt|=4,vv.current=null,gB(u,S),vB(u,S),j(u.containerInfo),u.current=S,yB(S),Y2(),Bt=Y,jt=G,Tn.transition=T}else u.current=S;if(Sf&&(Sf=!1,yo=u,Mf=E),T=u.pendingLanes,T===0&&(vo=null),Z2(S.stateNode),Hi(u,Yn()),d!==null)for(v=u.onRecoverableError,S=0;S<d.length;S++)v(d[S]);if(Af)throw Af=!1,u=Av,Av=null,u;return Mf&1&&u.tag!==0&&_a(),T=u.pendingLanes,T&1?u===Sv?Iu++:(Iu=0,Sv=u):Iu=0,rs(),null}function _a(){if(yo!==null){var u=LS(Mf),d=Tn.transition,v=jt;try{if(Tn.transition=null,jt=16>u?16:u,yo===null)var S=!1;else{if(u=yo,yo=null,Mf=0,Bt&6)throw Error(o(331));var E=Bt;for(Bt|=4,ze=u.current;ze!==null;){var T=ze,G=T.child;if(ze.flags&16){var Y=T.deletions;if(Y!==null){for(var he=0;he<Y.length;he++){var Re=Y[he];for(ze=Re;ze!==null;){var Qe=ze;switch(Qe.tag){case 0:case 11:case 15:va(8,Qe,T)}var _t=Qe.child;if(_t!==null)_t.return=Qe,ze=_t;else for(;ze!==null;){Qe=ze;var dt=Qe.sibling,en=Qe.return;if(kM(Qe),Qe===Re){ze=null;break}if(dt!==null){dt.return=en,ze=dt;break}ze=en}}}var ot=T.alternate;if(ot!==null){var pi=ot.child;if(pi!==null){ot.child=null;do{var _r=pi.sibling;pi.sibling=null,pi=_r}while(pi!==null)}}ze=T}}if(T.subtreeFlags&2064&&G!==null)G.return=T,ze=G;else e:for(;ze!==null;){if(T=ze,T.flags&2048)switch(T.tag){case 0:case 11:case 15:va(9,T,T.return)}var se=T.sibling;if(se!==null){se.return=T.return,ze=se;break e}ze=T.return}}var q=u.current;for(ze=q;ze!==null;){G=ze;var de=G.child;if(G.subtreeFlags&2064&&de!==null)de.return=G,ze=de;else e:for(G=q;ze!==null;){if(Y=ze,Y.flags&2048)try{switch(Y.tag){case 0:case 11:case 15:bu(9,Y)}}catch(st){Gi(Y,Y.return,st)}if(Y===G){ze=null;break e}var Ve=Y.sibling;if(Ve!==null){Ve.return=Y.return,ze=Ve;break e}ze=Y.return}}if(Bt=E,rs(),ns&&typeof ns.onPostCommitFiberRoot=="function")try{ns.onPostCommitFiberRoot(zh,u)}catch{}S=!0}return S}finally{jt=v,Tn.transition=d}}return!1}function n1(u,d,v){d=nv(v,d),d=gM(u,d,1),go(u,d),d=Ri(),u=bf(u,1),u!==null&&(fu(u,1,d),Hi(u,d))}function Gi(u,d,v){if(u.tag===3)n1(u,u,v);else for(;d!==null;){if(d.tag===3){n1(d,u,v);break}else if(d.tag===1){var S=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(vo===null||!vo.has(S))){u=nv(v,u),u=vM(d,u,1),go(d,u),u=Ri(),d=bf(d,1),d!==null&&(fu(d,1,u),Hi(d,u));break}}d=d.return}}function wB(u,d,v){var S=u.pingCache;S!==null&&S.delete(d),d=Ri(),u.pingedLanes|=u.suspendedLanes&v,Dn===u&&(ti&v)===v&&(Gn===4||Gn===3&&(ti&130023424)===ti&&500>Yn()-xv?ya(u,0):yv|=v),Hi(u,d)}function i1(u,d){d===0&&(u.mode&1?(d=Oh,Oh<<=1,!(Oh&130023424)&&(Oh=4194304)):d=1);var v=Ri();u=bf(u,d),u!==null&&(fu(u,d,v),Hi(u,v))}function EB(u){var d=u.memoizedState,v=0;d!==null&&(v=d.retryLane),i1(u,v)}function bB(u,d){var v=0;switch(u.tag){case 13:var S=u.stateNode,E=u.memoizedState;E!==null&&(v=E.retryLane);break;case 19:S=u.stateNode;break;default:throw Error(o(314))}S!==null&&S.delete(d),i1(u,v)}var r1;r1=function(u,d,v){if(u!==null)if(u.memoizedProps!==d.pendingProps||un.current)tr=!0;else{if(!(u.lanes&v)&&!(d.flags&128))return tr=!1,fB(u,d,v);tr=!!(u.flags&131072)}else tr=!1,hn&&d.flags&1048576&&WS(d,Yh,d.index);switch(d.lanes=0,d.tag){case 2:var S=d.type;u!==null&&(u.alternate=null,d.alternate=null,d.flags|=2),u=d.pendingProps;var E=Jn(d,He.current);Dl(d,v),E=q0(null,d,S,u,E,v);var T=Z0();return d.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,Cn(S)?(T=!0,Ci(d)):T=!1,d.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,O0(d),E.updater=Jh,d.stateNode=E,E._reactInternals=d,z0(d,S,u,v),d=sv(null,d,S,!0,T,v)):(d.tag=0,hn&&T&&H0(d),Ti(null,d,E,v),d=d.child),d;case 16:S=d.elementType;e:{switch(u!==null&&(u.alternate=null,d.alternate=null,d.flags|=2),u=d.pendingProps,E=S._init,S=E(S._payload),d.type=S,E=d.tag=TB(S),u=Dr(S,u),E){case 0:d=rv(null,d,S,u,v);break e;case 1:d=TM(null,d,S,u,v);break e;case 11:d=MM(null,d,S,u,v);break e;case 14:d=wM(null,d,S,Dr(S.type,u),v);break e}throw Error(o(306,S,""))}return d;case 0:return S=d.type,E=d.pendingProps,E=d.elementType===S?E:Dr(S,E),rv(u,d,S,E,v);case 1:return S=d.type,E=d.pendingProps,E=d.elementType===S?E:Dr(S,E),TM(u,d,S,E,v);case 3:e:{if(RM(d),u===null)throw Error(o(387));S=d.pendingProps,T=d.memoizedState,E=T.element,US(u,d),Xh(d,S,null,v);var G=d.memoizedState;if(S=G.element,Ae&&T.isDehydrated)if(T={element:S,isDehydrated:!1,cache:G.cache,transitions:G.transitions},d.updateQueue.baseState=T,d.memoizedState=T,d.flags&256){E=Error(o(423)),d=IM(u,d,S,v,E);break e}else if(S!==E){E=Error(o(424)),d=IM(u,d,S,v,E);break e}else for(Ae&&(er=Bh(d.stateNode.containerInfo),$i=d,hn=!0,Nr=null,pu=!1),v=QS(d,null,S,v),d.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(Ul(),S===E){d=Ts(u,d,v);break e}Ti(u,d,S,v)}d=d.child}return d;case 5:return qS(d),u===null&&W0(d),S=d.type,E=d.pendingProps,T=u!==null?u.memoizedProps:null,G=E.children,xe(S,E)?G=null:T!==null&&xe(S,T)&&(d.flags|=32),CM(u,d),Ti(u,d,G,v),d.child;case 6:return u===null&&W0(d),null;case 13:return PM(u,d,v);case 4:return X0(d,d.stateNode.containerInfo),S=d.pendingProps,u===null?d.child=Ol(d,null,S,v):Ti(u,d,S,v),d.child;case 11:return S=d.type,E=d.pendingProps,E=d.elementType===S?E:Dr(S,E),MM(u,d,S,E,v);case 7:return Ti(u,d,d.pendingProps,v),d.child;case 8:return Ti(u,d,d.pendingProps.children,v),d.child;case 12:return Ti(u,d,d.pendingProps.children,v),d.child;case 10:e:{if(S=d.type._context,E=d.pendingProps,T=d.memoizedProps,G=E.value,FS(d,S,G),T!==null)if(is(T.value,G)){if(T.children===E.children&&!un.current){d=Ts(u,d,v);break e}}else for(T=d.child,T!==null&&(T.return=d);T!==null;){var Y=T.dependencies;if(Y!==null){G=T.child;for(var he=Y.firstContext;he!==null;){if(he.context===S){if(T.tag===1){he=ws(-1,v&-v),he.tag=2;var Re=T.updateQueue;if(Re!==null){Re=Re.shared;var Qe=Re.pending;Qe===null?he.next=he:(he.next=Qe.next,Qe.next=he),Re.pending=he}}T.lanes|=v,he=T.alternate,he!==null&&(he.lanes|=v),U0(T.return,v,d),Y.lanes|=v;break}he=he.next}}else if(T.tag===10)G=T.type===d.type?null:T.child;else if(T.tag===18){if(G=T.return,G===null)throw Error(o(341));G.lanes|=v,Y=G.alternate,Y!==null&&(Y.lanes|=v),U0(G,v,d),G=T.sibling}else G=T.child;if(G!==null)G.return=T;else for(G=T;G!==null;){if(G===d){G=null;break}if(T=G.sibling,T!==null){T.return=G.return,G=T;break}G=G.return}T=G}Ti(u,d,E.children,v),d=d.child}return d;case 9:return E=d.type,S=d.pendingProps.children,Dl(d,v),E=fr(E),S=S(E),d.flags|=1,Ti(u,d,S,v),d.child;case 14:return S=d.type,E=Dr(S,d.pendingProps),E=Dr(S.type,E),wM(u,d,S,E,v);case 15:return EM(u,d,d.type,d.pendingProps,v);case 17:return S=d.type,E=d.pendingProps,E=d.elementType===S?E:Dr(S,E),u!==null&&(u.alternate=null,d.alternate=null,d.flags|=2),d.tag=1,Cn(S)?(u=!0,Ci(d)):u=!1,Dl(d,v),GS(d,S,E),z0(d,S,E,v),sv(null,d,S,!0,u,v);case 19:return NM(u,d,v);case 22:return bM(u,d,v)}throw Error(o(156,d.tag))};function s1(u,d){return I0(u,d)}function CB(u,d,v,S){this.tag=u,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xr(u,d,v,S){return new CB(u,d,v,S)}function Cv(u){return u=u.prototype,!(!u||!u.isReactComponent)}function TB(u){if(typeof u=="function")return Cv(u)?1:0;if(u!=null){if(u=u.$$typeof,u===A)return 11;if(u===_)return 14}return 2}function Ao(u,d){var v=u.alternate;return v===null?(v=xr(u.tag,d,u.key,u.mode),v.elementType=u.elementType,v.type=u.type,v.stateNode=u.stateNode,v.alternate=u,u.alternate=v):(v.pendingProps=d,v.type=u.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=u.flags&14680064,v.childLanes=u.childLanes,v.lanes=u.lanes,v.child=u.child,v.memoizedProps=u.memoizedProps,v.memoizedState=u.memoizedState,v.updateQueue=u.updateQueue,d=u.dependencies,v.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},v.sibling=u.sibling,v.index=u.index,v.ref=u.ref,v}function Tf(u,d,v,S,E,T){var G=2;if(S=u,typeof u=="function")Cv(u)&&(G=1);else if(typeof u=="string")G=5;else e:switch(u){case h:return Aa(v.children,E,T,d);case f:G=8,E|=8;break;case p:return u=xr(12,v,d,E|2),u.elementType=p,u.lanes=T,u;case x:return u=xr(13,v,d,E),u.elementType=x,u.lanes=T,u;case g:return u=xr(19,v,d,E),u.elementType=g,u.lanes=T,u;case w:return Rf(v,E,T,d);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case m:G=10;break e;case y:G=9;break e;case A:G=11;break e;case _:G=14;break e;case M:G=16,S=null;break e}throw Error(o(130,u==null?u:typeof u,""))}return d=xr(G,v,d,E),d.elementType=u,d.type=S,d.lanes=T,d}function Aa(u,d,v,S){return u=xr(7,u,S,d),u.lanes=v,u}function Rf(u,d,v,S){return u=xr(22,u,S,d),u.elementType=w,u.lanes=v,u.stateNode={},u}function Tv(u,d,v){return u=xr(6,u,null,d),u.lanes=v,u}function Rv(u,d,v){return d=xr(4,u.children!==null?u.children:[],u.key,d),d.lanes=v,d.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},d}function RB(u,d,v,S,E){this.tag=d,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=rt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=T0(0),this.expirationTimes=T0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=T0(0),this.identifierPrefix=S,this.onRecoverableError=E,Ae&&(this.mutableSourceEagerHydrationData=null)}function o1(u,d,v,S,E,T,G,Y,he){return u=new RB(u,d,v,Y,he),d===1?(d=1,T===!0&&(d|=8)):d=0,T=xr(3,null,null,d),u.current=T,T.stateNode=u,T.memoizedState={element:S,isDehydrated:v,cache:null,transitions:null},O0(T),u}function a1(u){if(!u)return Pt;u=u._reactInternals;e:{if(I(u)!==u||u.tag!==1)throw Error(o(170));var d=u;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(Cn(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(o(171))}if(u.tag===1){var v=u.type;if(Cn(v))return Zt(u,v,d)}return d}function l1(u){var d=u._reactInternals;if(d===void 0)throw typeof u.render=="function"?Error(o(188)):(u=Object.keys(u).join(","),Error(o(268,u)));return u=H(d),u===null?null:u.stateNode}function c1(u,d){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var v=u.retryLane;u.retryLane=v!==0&&v<d?v:d}}function Iv(u,d){c1(u,d),(u=u.alternate)&&c1(u,d)}function IB(u){return u=H(u),u===null?null:u.stateNode}function PB(){return null}return t.attemptContinuousHydration=function(u){if(u.tag===13){var d=Ri();yr(u,134217728,d),Iv(u,134217728)}},t.attemptHydrationAtCurrentPriority=function(u){if(u.tag===13){var d=Ri(),v=xo(u);yr(u,v,d),Iv(u,v)}},t.attemptSynchronousHydration=function(u){switch(u.tag){case 3:var d=u.stateNode;if(d.current.memoizedState.isDehydrated){var v=hu(d.pendingLanes);v!==0&&(R0(d,v|1),Hi(d,Yn()),!(Bt&6)&&(Wl(),rs()))}break;case 13:var S=Ri();qM(function(){return yr(u,1,S)}),Iv(u,1)}},t.batchedUpdates=function(u,d){var v=Bt;Bt|=1;try{return u(d)}finally{Bt=v,Bt===0&&(Wl(),Hh&&rs())}},t.createComponentSelector=function(u){return{$$typeof:pf,value:u}},t.createContainer=function(u,d,v,S,E,T,G){return o1(u,d,!1,null,v,S,E,T,G)},t.createHasPseudoClassSelector=function(u){return{$$typeof:mf,value:u}},t.createHydrationContainer=function(u,d,v,S,E,T,G,Y,he){return u=o1(v,S,!0,u,E,T,G,Y,he),u.context=a1(null),v=u.current,S=Ri(),E=xo(v),T=ws(S,E),T.callback=d??null,go(v,T),u.current.lanes=E,fu(u,E,S),Hi(u,S),u},t.createPortal=function(u,d,v){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:S==null?null:""+S,children:u,containerInfo:d,implementation:v}},t.createRoleSelector=function(u){return{$$typeof:gf,value:u}},t.createTestNameSelector=function(u){return{$$typeof:vf,value:u}},t.createTextSelector=function(u){return{$$typeof:yf,value:u}},t.deferredUpdates=function(u){var d=jt,v=Tn.transition;try{return Tn.transition=null,jt=16,u()}finally{jt=d,Tn.transition=v}},t.discreteUpdates=function(u,d,v,S,E){var T=jt,G=Tn.transition;try{return Tn.transition=null,jt=1,u(d,v,S,E)}finally{jt=T,Tn.transition=G,Bt===0&&Wl()}},t.findAllNodes=gv,t.findBoundingRects=function(u,d){if(!Oe)throw Error(o(363));d=gv(u,d),u=[];for(var v=0;v<d.length;v++)u.push(F(d[v]));for(d=u.length-1;0<d;d--){v=u[d];for(var S=v.x,E=S+v.width,T=v.y,G=T+v.height,Y=d-1;0<=Y;Y--)if(d!==Y){var he=u[Y],Re=he.x,Qe=Re+he.width,_t=he.y,dt=_t+he.height;if(S>=Re&&T>=_t&&E<=Qe&&G<=dt){u.splice(d,1);break}else if(S!==Re||v.width!==he.width||dt<T||_t>G){if(!(T!==_t||v.height!==he.height||Qe<S||Re>E)){Re>S&&(he.width+=Re-S,he.x=S),Qe<E&&(he.width=E-Re),u.splice(d,1);break}}else{_t>T&&(he.height+=_t-T,he.y=T),dt<G&&(he.height=G-_t),u.splice(d,1);break}}}return u},t.findHostInstance=l1,t.findHostInstanceWithNoPortals=function(u){return u=U(u),u=u!==null?ee(u):null,u===null?null:u.stateNode},t.findHostInstanceWithWarning=function(u){return l1(u)},t.flushControlled=function(u){var d=Bt;Bt|=1;var v=Tn.transition,S=jt;try{Tn.transition=null,jt=1,u()}finally{jt=S,Tn.transition=v,Bt=d,Bt===0&&(Wl(),rs())}},t.flushPassiveEffects=_a,t.flushSync=qM,t.focusWithin=function(u,d){if(!Oe)throw Error(o(363));for(u=fv(u),d=KM(u,d),d=Array.from(d),u=0;u<d.length;){var v=d[u++];if(!fe(v)){if(v.tag===5&&ge(v.stateNode))return!0;for(v=v.child;v!==null;)d.push(v),v=v.sibling}}return!1},t.getCurrentUpdatePriority=function(){return jt},t.getFindAllNodesFailureDescription=function(u,d){if(!Oe)throw Error(o(363));var v=0,S=[];u=[fv(u),0];for(var E=0;E<u.length;){var T=u[E++],G=u[E++],Y=d[G];if((T.tag!==5||!fe(T))&&(pv(T,Y)&&(S.push(mv(Y)),G++,G>v&&(v=G)),G<d.length))for(T=T.child;T!==null;)u.push(T,G),T=T.sibling}if(v<d.length){for(u=[];v<d.length;v++)u.push(mv(d[v]));return`findAllNodes was able to match part of the selector:
  `+(S.join(" > ")+`

No matching component was found for:
  `)+u.join(" > ")}return null},t.getPublicRootInstance=function(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 5:return te(u.child.stateNode);default:return u.child.stateNode}},t.injectIntoDevTools=function(u){if(u={bundleType:u.bundleType,version:u.version,rendererPackageName:u.rendererPackageName,rendererConfig:u.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:IB,findFiberByHostInstance:u.findFiberByHostInstance||PB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")u=!1;else{var d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(d.isDisabled||!d.supportsFiber)u=!0;else{try{zh=d.inject(u),ns=d}catch{}u=!!d.checkDCE}}return u},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(u,d,v,S){if(!Oe)throw Error(o(363));u=gv(u,d);var E=Ze(u,v,S).disconnect;return{disconnect:function(){E()}}},t.registerMutableSourceForHydration=function(u,d){var v=d._getVersion;v=v(d._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[d,v]:u.mutableSourceEagerHydrationData.push(d,v)},t.runWithPriority=function(u,d){var v=jt;try{return jt=u,d()}finally{jt=v}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(u,d,v,S){var E=d.current,T=Ri(),G=xo(E);return v=a1(v),d.context===null?d.context=v:d.pendingContext=v,d=ws(T,G),d.payload={element:u},S=S===void 0?null:S,S!==null&&(d.callback=S),go(E,d),u=yr(E,G,T),u!==null&&jh(u,E,G),G},t};NP.exports=bG;var CG=NP.exports;const TG=U_(CG);var FP={exports:{}},UP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(D,W){var j=D.length;D.push(W);e:for(;0<j;){var Z=j-1>>>1,me=D[Z];if(0<r(me,W))D[Z]=W,D[j]=me,j=Z;else break e}}function t(D){return D.length===0?null:D[0]}function i(D){if(D.length===0)return null;var W=D[0],j=D.pop();if(j!==W){D[0]=j;e:for(var Z=0,me=D.length,Be=me>>>1;Z<Be;){var re=2*(Z+1)-1,xe=D[re],Ee=re+1,_e=D[Ee];if(0>r(xe,j))Ee<me&&0>r(_e,xe)?(D[Z]=_e,D[Ee]=j,Z=Ee):(D[Z]=xe,D[re]=j,Z=re);else if(Ee<me&&0>r(_e,j))D[Z]=_e,D[Ee]=j,Z=Ee;else break e}}return W}function r(D,W){var j=D.sortIndex-W.sortIndex;return j!==0?j:D.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,f=null,p=3,m=!1,y=!1,A=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(D){for(var W=t(c);W!==null;){if(W.callback===null)i(c);else if(W.startTime<=D)i(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=t(c)}}function w(D){if(A=!1,M(D),!y)if(t(l)!==null)y=!0,te(C);else{var W=t(c);W!==null&&le(w,W.startTime-D)}}function C(D,W){y=!1,A&&(A=!1,g(B),B=-1),m=!0;var j=p;try{for(M(W),f=t(l);f!==null&&(!(f.expirationTime>W)||D&&!U());){var Z=f.callback;if(typeof Z=="function"){f.callback=null,p=f.priorityLevel;var me=Z(f.expirationTime<=W);W=n.unstable_now(),typeof me=="function"?f.callback=me:f===t(l)&&i(l),M(W)}else i(l);f=t(l)}if(f!==null)var Be=!0;else{var re=t(c);re!==null&&le(w,re.startTime-W),Be=!1}return Be}finally{f=null,p=j,m=!1}}var R=!1,P=null,B=-1,I=5,b=-1;function U(){return!(n.unstable_now()-b<I)}function H(){if(P!==null){var D=n.unstable_now();b=D;var W=!0;try{W=P(!0,D)}finally{W?X():(R=!1,P=null)}}else R=!1}var X;if(typeof _=="function")X=function(){_(H)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,ne=ee.port2;ee.port1.onmessage=H,X=function(){ne.postMessage(null)}}else X=function(){x(H,0)};function te(D){P=D,R||(R=!0,X())}function le(D,W){B=x(function(){D(n.unstable_now())},W)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(D){D.callback=null},n.unstable_continueExecution=function(){y||m||(y=!0,te(C))},n.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<D?Math.floor(1e3/D):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(D){switch(p){case 1:case 2:case 3:var W=3;break;default:W=p}var j=p;p=W;try{return D()}finally{p=j}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(D,W){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var j=p;p=D;try{return W()}finally{p=j}},n.unstable_scheduleCallback=function(D,W,j){var Z=n.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?Z+j:Z):j=Z,D){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=j+me,D={id:h++,callback:W,priorityLevel:D,startTime:j,expirationTime:me,sortIndex:-1},j>Z?(D.sortIndex=j,e(c,D),t(l)===null&&D===t(c)&&(A?(g(B),B=-1):A=!0,le(w,j-Z))):(D.sortIndex=me,e(l,D),y||m||(y=!0,te(C))),D},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(D){var W=p;return function(){var j=p;p=W;try{return D.apply(this,arguments)}finally{p=j}}}})(UP);FP.exports=UP;var lb=FP.exports;const _S={},RG=n=>void Object.assign(_S,n);function IG(n,e){function t(h,{args:f=[],attach:p,...m},y){let A=`${h[0].toUpperCase()}${h.slice(1)}`,x;if(h==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const g=m.object;x=hc(g,{type:h,root:y,attach:p,primitive:!0})}else{const g=_S[A];if(!g)throw new Error(`R3F: ${A} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(f))throw new Error("R3F: The args prop must be an array!");x=hc(new g(...f),{type:h,root:y,attach:p,memoizedProps:{args:f}})}return x.__r3f.attach===void 0&&(x.isBufferGeometry?x.__r3f.attach="geometry":x.isMaterial&&(x.__r3f.attach="material")),A!=="inject"&&Yy(x,m),x}function i(h,f){let p=!1;if(f){var m,y;(m=f.__r3f)!=null&&m.attach?Ky(h,f,f.__r3f.attach):f.isObject3D&&h.isObject3D&&(h.add(f),p=!0),p||(y=h.__r3f)==null||y.objects.push(f),f.__r3f||hc(f,{}),f.__r3f.parent=h,I_(f),fc(f)}}function r(h,f,p){let m=!1;if(f){var y,A;if((y=f.__r3f)!=null&&y.attach)Ky(h,f,f.__r3f.attach);else if(f.isObject3D&&h.isObject3D){f.parent=h,f.dispatchEvent({type:"added"}),h.dispatchEvent({type:"childadded",child:f});const x=h.children.filter(_=>_!==f),g=x.indexOf(p);h.children=[...x.slice(0,g),f,...x.slice(g)],m=!0}m||(A=h.__r3f)==null||A.objects.push(f),f.__r3f||hc(f,{}),f.__r3f.parent=h,I_(f),fc(f)}}function s(h,f,p=!1){h&&[...h].forEach(m=>o(f,m,p))}function o(h,f,p){if(f){var m,y,A;if(f.__r3f&&(f.__r3f.parent=null),(m=h.__r3f)!=null&&m.objects&&(h.__r3f.objects=h.__r3f.objects.filter(w=>w!==f)),(y=f.__r3f)!=null&&y.attach)fb(h,f,f.__r3f.attach);else if(f.isObject3D&&h.isObject3D){var x;h.remove(f),(x=f.__r3f)!=null&&x.root&&OG(lm(f),f)}const _=(A=f.__r3f)==null?void 0:A.primitive,M=!_&&(p===void 0?f.dispose!==null:p);if(!_){var g;s((g=f.__r3f)==null?void 0:g.objects,f,M),s(f.children,f,M)}if(delete f.__r3f,M&&f.dispose&&f.type!=="Scene"){const w=()=>{try{f.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?lb.unstable_scheduleCallback(lb.unstable_IdlePriority,w):w()}fc(h)}}function a(h,f,p,m){var y;const A=(y=h.__r3f)==null?void 0:y.parent;if(!A)return;const x=t(f,p,h.__r3f.root);if(h.children){for(const g of h.children)g.__r3f&&i(x,g);h.children=h.children.filter(g=>!g.__r3f)}h.__r3f.objects.forEach(g=>i(x,g)),h.__r3f.objects=[],h.__r3f.autoRemovedBeforeAppend||o(A,h),x.parent&&(x.__r3f.autoRemovedBeforeAppend=!0),i(A,x),x.raycast&&x.__r3f.eventCount&&lm(x).getState().internal.interaction.push(x),[m,m.alternate].forEach(g=>{g!==null&&(g.stateNode=x,g.ref&&(typeof g.ref=="function"?g.ref(x):g.ref.current=x))})}const l=()=>{};return{reconciler:TG({createInstance:t,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(h,f)=>{if(!f)return;const p=h.getState().scene;p.__r3f&&(p.__r3f.root=h,i(p,f))},removeChildFromContainer:(h,f)=>{f&&o(h.getState().scene,f)},insertInContainerBefore:(h,f,p)=>{if(!f||!p)return;const m=h.getState().scene;m.__r3f&&r(m,f,p)},getRootHostContext:()=>null,getChildHostContext:h=>h,finalizeInitialChildren(h){var f;return!!((f=h==null?void 0:h.__r3f)!=null?f:{}).handlers},prepareUpdate(h,f,p,m){var y;if(((y=h==null?void 0:h.__r3f)!=null?y:{}).primitive&&m.object&&m.object!==h)return[!0];{const{args:x=[],children:g,..._}=m,{args:M=[],children:w,...C}=p;if(!Array.isArray(x))throw new Error("R3F: the args prop must be an array!");if(x.some((P,B)=>P!==M[B]))return[!0];const R=WP(h,_,C,!0);return R.changes.length?[!1,R]:null}},commitUpdate(h,[f,p],m,y,A,x){f?a(h,m,A,x):Yy(h,p)},commitMount(h,f,p,m){var y;const A=(y=h.__r3f)!=null?y:{};h.raycast&&A.handlers&&A.eventCount&&lm(h).getState().internal.interaction.push(h)},getPublicInstance:h=>h,prepareForCommit:()=>null,preparePortalMount:h=>hc(h.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(h){var f;const{attach:p,parent:m}=(f=h.__r3f)!=null?f:{};p&&m&&fb(m,h,p),h.isObject3D&&(h.visible=!1),fc(h)},unhideInstance(h,f){var p;const{attach:m,parent:y}=(p=h.__r3f)!=null?p:{};m&&y&&Ky(y,h,m),(h.isObject3D&&f.visible==null||f.visible)&&(h.visible=!0),fc(h)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():Rc.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&nn.fun(performance.now)?performance.now:nn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:nn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:nn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:Yy}}var cb,ub;const Jy=n=>"colorSpace"in n||"outputColorSpace"in n,OP=()=>{var n;return(n=_S.ColorManagement)!=null?n:null},kP=n=>n&&n.isOrthographicCamera,PG=n=>n&&n.hasOwnProperty("current"),Th=typeof window<"u"&&((cb=window.document)!=null&&cb.createElement||((ub=window.navigator)==null?void 0:ub.product)==="ReactNative")?z.useLayoutEffect:z.useEffect;function zP(n){const e=z.useRef(n);return Th(()=>void(e.current=n),[n]),e}function BG({set:n}){return Th(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class HP extends z.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}HP.getDerivedStateFromError=()=>({error:!0});const GP="__default",db=new Map,LG=n=>n&&!!n.memoized&&!!n.changes;function VP(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const qu=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function lm(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const nn={obj:n=>n===Object(n)&&!nn.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(nn.str(n)||nn.num(n)||nn.boo(n))return n===e;const s=nn.obj(n);if(s&&i==="reference")return n===e;const o=nn.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(a in r?e:n)if(!nn.equ(n[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:n)if(n[a]!==e[a])return!1;if(nn.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function DG(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function NG(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function hc(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function R_(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),r=i.pop();return t=i.reduce((s,o)=>s[o],n),{target:t,key:r}}else return{target:t,key:e}}const hb=/-\d+$/;function Ky(n,e,t){if(nn.str(t)){if(hb.test(t)){const s=t.replace(hb,""),{target:o,key:a}=R_(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:i,key:r}=R_(n,t);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=t(n,e)}function fb(n,e,t){var i,r;if(nn.str(t)){const{target:s,key:o}=R_(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(r=e.__r3f)==null||delete r.previousAttach}function WP(n,{children:e,key:t,ref:i,...r},{children:s,key:o,ref:a,...l}={},c=!1){const h=n.__r3f,f=Object.entries(r),p=[];if(c){const y=Object.keys(l);for(let A=0;A<y.length;A++)r.hasOwnProperty(y[A])||f.unshift([y[A],GP+"remove"])}f.forEach(([y,A])=>{var x;if((x=n.__r3f)!=null&&x.primitive&&y==="object"||nn.equ(A,l[y]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(y))return p.push([y,A,!0,[]]);let g=[];y.includes("-")&&(g=y.split("-")),p.push([y,A,!1,g]);for(const _ in r){const M=r[_];_.startsWith(`${y}-`)&&p.push([_,M,!1,_.split("-")])}});const m={...r};return h!=null&&h.memoizedProps&&h!=null&&h.memoizedProps.args&&(m.args=h.memoizedProps.args),h!=null&&h.memoizedProps&&h!=null&&h.memoizedProps.attach&&(m.attach=h.memoizedProps.attach),{memoized:m,changes:p}}const FG=typeof process<"u"&&!1;function Yy(n,e){var t;const i=n.__r3f,r=i==null?void 0:i.root,s=r==null||r.getState==null?void 0:r.getState(),{memoized:o,changes:a}=LG(e)?e:WP(n,e),l=i==null?void 0:i.eventCount;n.__r3f&&(n.__r3f.memoizedProps=o);for(let p=0;p<a.length;p++){let[m,y,A,x]=a[p];if(Jy(n)){const w="srgb",C="srgb-linear";m==="encoding"?(m="colorSpace",y=y===3001?w:C):m==="outputEncoding"&&(m="outputColorSpace",y=y===3001?w:C)}let g=n,_=g[m];if(x.length&&(_=x.reduce((M,w)=>M[w],n),!(_&&_.set))){const[M,...w]=x.reverse();g=w.reverse().reduce((C,R)=>C[R],n),m=M}if(y===GP+"remove")if(g.constructor){let M=db.get(g.constructor);M||(M=new g.constructor,db.set(g.constructor,M)),y=M[m]}else y=0;if(A&&i)y?i.handlers[m]=y:delete i.handlers[m],i.eventCount=Object.keys(i.handlers).length;else if(_&&_.set&&(_.copy||_ instanceof ll)){if(Array.isArray(y))_.fromArray?_.fromArray(y):_.set(...y);else if(_.copy&&y&&y.constructor&&(FG?_.constructor.name===y.constructor.name:_.constructor===y.constructor))_.copy(y);else if(y!==void 0){var c;const M=(c=_)==null?void 0:c.isColor;!M&&_.setScalar?_.setScalar(y):_ instanceof ll&&y instanceof ll?_.mask=y.mask:_.set(y),!OP()&&s&&!s.linear&&M&&_.convertSRGBToLinear()}}else{var h;if(g[m]=y,(h=g[m])!=null&&h.isTexture&&g[m].format===Mi&&g[m].type===Qr&&s){const M=g[m];Jy(M)&&Jy(s.gl)?M.colorSpace=s.gl.outputColorSpace:M.encoding=s.gl.outputEncoding}}fc(n)}if(i&&i.parent&&n.raycast&&l!==i.eventCount){const p=lm(n).getState().internal,m=p.interaction.indexOf(n);m>-1&&p.interaction.splice(m,1),i.eventCount&&p.interaction.push(n)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(t=n.__r3f)!=null&&t.parent&&I_(n),n}function fc(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function I_(n){n.onUpdate==null||n.onUpdate(n)}function jP(n,e){n.manual||(kP(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function Op(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function UG(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Rc.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Rc.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Rc.ContinuousEventPriority;default:return Rc.DefaultEventPriority}}function XP(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function OG(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{XP(t.capturedMap,e,i,r)})}function kG(n){function e(l){const{internal:c}=n.getState(),h=l.offsetX-c.initialClick[0],f=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(h*h+f*f))}function t(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(h=>{var f;return(f=c.__r3f)==null?void 0:f.handlers["onPointer"+h]}))}function i(l,c){const h=n.getState(),f=new Set,p=[],m=c?c(h.internal.interaction):h.internal.interaction;for(let g=0;g<m.length;g++){const _=qu(m[g]);_&&(_.raycaster.camera=void 0)}h.previousRoot||h.events.compute==null||h.events.compute(l,h);function y(g){const _=qu(g);if(!_||!_.events.enabled||_.raycaster.camera===null)return[];if(_.raycaster.camera===void 0){var M;_.events.compute==null||_.events.compute(l,_,(M=_.previousRoot)==null?void 0:M.getState()),_.raycaster.camera===void 0&&(_.raycaster.camera=null)}return _.raycaster.camera?_.raycaster.intersectObject(g,!0):[]}let A=m.flatMap(y).sort((g,_)=>{const M=qu(g.object),w=qu(_.object);return!M||!w?g.distance-_.distance:w.events.priority-M.events.priority||g.distance-_.distance}).filter(g=>{const _=Op(g);return f.has(_)?!1:(f.add(_),!0)});h.events.filter&&(A=h.events.filter(A,h));for(const g of A){let _=g.object;for(;_;){var x;(x=_.__r3f)!=null&&x.eventCount&&p.push({...g,eventObject:_}),_=_.parent}}if("pointerId"in l&&h.internal.capturedMap.has(l.pointerId))for(let g of h.internal.capturedMap.get(l.pointerId).values())f.has(Op(g.intersection))||p.push(g.intersection);return p}function r(l,c,h,f){const p=n.getState();if(l.length){const m={stopped:!1};for(const y of l){const A=qu(y.object)||p,{raycaster:x,pointer:g,camera:_,internal:M}=A,w=new N(g.x,g.y,0).unproject(_),C=b=>{var U,H;return(U=(H=M.capturedMap.get(b))==null?void 0:H.has(y.eventObject))!=null?U:!1},R=b=>{const U={intersection:y,target:c.target};M.capturedMap.has(b)?M.capturedMap.get(b).set(y.eventObject,U):M.capturedMap.set(b,new Map([[y.eventObject,U]])),c.target.setPointerCapture(b)},P=b=>{const U=M.capturedMap.get(b);U&&XP(M.capturedMap,y.eventObject,U,b)};let B={};for(let b in c){let U=c[b];typeof U!="function"&&(B[b]=U)}let I={...y,...B,pointer:g,intersections:l,stopped:m.stopped,delta:h,unprojectedPoint:w,ray:x.ray,camera:_,stopPropagation(){const b="pointerId"in c&&M.capturedMap.get(c.pointerId);if((!b||b.has(y.eventObject))&&(I.stopped=m.stopped=!0,M.hovered.size&&Array.from(M.hovered.values()).find(U=>U.eventObject===y.eventObject))){const U=l.slice(0,l.indexOf(y));s([...U,y])}},target:{hasPointerCapture:C,setPointerCapture:R,releasePointerCapture:P},currentTarget:{hasPointerCapture:C,setPointerCapture:R,releasePointerCapture:P},nativeEvent:c};if(f(I),m.stopped===!0)break}}return l}function s(l){const{internal:c}=n.getState();for(const h of c.hovered.values())if(!l.length||!l.find(f=>f.object===h.object&&f.index===h.index&&f.instanceId===h.instanceId)){const p=h.eventObject.__r3f,m=p==null?void 0:p.handlers;if(c.hovered.delete(Op(h)),p!=null&&p.eventCount){const y={...h,intersections:l};m.onPointerOut==null||m.onPointerOut(y),m.onPointerLeave==null||m.onPointerLeave(y)}}}function o(l,c){for(let h=0;h<c.length;h++){const f=c[h].__r3f;f==null||f.handlers.onPointerMissed==null||f.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:h}=n.getState();"pointerId"in c&&h.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{h.capturedMap.has(c.pointerId)&&(h.capturedMap.delete(c.pointerId),s([]))})}}return function(h){const{onPointerMissed:f,internal:p}=n.getState();p.lastEvent.current=h;const m=l==="onPointerMove",y=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",x=i(h,m?t:void 0),g=y?e(h):0;l==="onPointerDown"&&(p.initialClick=[h.offsetX,h.offsetY],p.initialHits=x.map(M=>M.eventObject)),y&&!x.length&&g<=2&&(o(h,p.interaction),f&&f(h)),m&&s(x);function _(M){const w=M.eventObject,C=w.__r3f,R=C==null?void 0:C.handlers;if(C!=null&&C.eventCount)if(m){if(R.onPointerOver||R.onPointerEnter||R.onPointerOut||R.onPointerLeave){const P=Op(M),B=p.hovered.get(P);B?B.stopped&&M.stopPropagation():(p.hovered.set(P,M),R.onPointerOver==null||R.onPointerOver(M),R.onPointerEnter==null||R.onPointerEnter(M))}R.onPointerMove==null||R.onPointerMove(M)}else{const P=R[l];P?(!y||p.initialHits.includes(w))&&(o(h,p.interaction.filter(B=>!p.initialHits.includes(B))),P(M)):y&&p.initialHits.includes(w)&&o(h,p.interaction.filter(B=>!p.initialHits.includes(B)))}}r(x,h,g,_)}}return{handlePointer:a}}const zG=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],JP=n=>!!(n!=null&&n.render),AS=z.createContext(null),HG=(n,e)=>{const t=PP((a,l)=>{const c=new N,h=new N,f=new N;function p(g=l().camera,_=h,M=l().size){const{width:w,height:C,top:R,left:P}=M,B=w/C;_.isVector3?f.copy(_):f.set(..._);const I=g.getWorldPosition(c).distanceTo(f);if(kP(g))return{width:w/g.zoom,height:C/g.zoom,top:R,left:P,factor:1,distance:I,aspect:B};{const b=g.fov*Math.PI/180,U=2*Math.tan(b/2)*I,H=U*(w/C);return{width:H,height:U,top:R,left:P,factor:w/H,distance:I,aspect:B}}}let m;const y=g=>a(_=>({performance:{..._.performance,current:g}})),A=new ue;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(g=1)=>n(l(),g),advance:(g,_)=>e(g,_,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new pS,pointer:A,mouse:A,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const g=l();m&&clearTimeout(m),g.performance.current!==g.performance.min&&y(g.performance.min),m=setTimeout(()=>y(l().performance.max),g.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:g=>a(_=>({..._,events:{..._.events,...g}})),setSize:(g,_,M,w,C)=>{const R=l().camera,P={width:g,height:_,top:w||0,left:C||0,updateStyle:M};a(B=>({size:P,viewport:{...B.viewport,...p(R,h,P)}}))},setDpr:g=>a(_=>{const M=VP(g);return{viewport:{..._.viewport,dpr:M,initialDpr:_.viewport.initialDpr||M}}}),setFrameloop:(g="always")=>{const _=l().clock;_.stop(),_.elapsedTime=0,g!=="never"&&(_.start(),_.elapsedTime=0),a(()=>({frameloop:g}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:z.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(g,_,M)=>{const w=l().internal;return w.priority=w.priority+(_>0?1:0),w.subscribers.push({ref:g,priority:_,store:M}),w.subscribers=w.subscribers.sort((C,R)=>C.priority-R.priority),()=>{const C=l().internal;C!=null&&C.subscribers&&(C.priority=C.priority-(_>0?1:0),C.subscribers=C.subscribers.filter(R=>R.ref!==g))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:h,set:f}=t.getState();if(l.width!==r.width||l.height!==r.height||c.dpr!==s){var p;r=l,s=c.dpr,jP(a,l),h.setPixelRatio(c.dpr);const m=(p=l.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&h.domElement instanceof HTMLCanvasElement;h.setSize(l.width,l.height,m)}a!==o&&(o=a,f(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let kp,GG=new Set,VG=new Set,WG=new Set;function Qy(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Zu(n,e){switch(n){case"before":return Qy(GG,e);case"after":return Qy(VG,e);case"tail":return Qy(WG,e)}}let qy,Zy;function $y(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),qy=e.internal.subscribers,kp=0;kp<qy.length;kp++)Zy=qy[kp],Zy.ref.current(Zy.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function jG(n){let e=!1,t=!1,i,r,s;function o(c){r=requestAnimationFrame(o),e=!0,i=0,Zu("before",c),t=!0;for(const f of n.values()){var h;s=f.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((h=s.gl.xr)!=null&&h.isPresenting)&&(i+=$y(c,s))}if(t=!1,Zu("after",c),i===0)return Zu("tail",c),e=!1,cancelAnimationFrame(r)}function a(c,h=1){var f;if(!c)return n.forEach(p=>a(p.store.getState(),h));(f=c.gl.xr)!=null&&f.isPresenting||!c.internal.active||c.frameloop==="never"||(h>1?c.internal.frames=Math.min(60,c.internal.frames+h):t?c.internal.frames=2:c.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function l(c,h=!0,f,p){if(h&&Zu("before",c),f)$y(c,f,p);else for(const m of n.values())$y(c,m.store.getState());h&&Zu("after",c)}return{loop:o,invalidate:a,advance:l}}function A0(){const n=z.useContext(AS);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Un(n=t=>t,e){return A0()(n,e)}function Bn(n,e=0){const t=A0(),i=t.getState().internal.subscribe,r=zP(n);return Th(()=>i(r,e,t),[e,i,t]),null}const pb=new WeakMap;function KP(n,e){return function(t,...i){let r=pb.get(t);return r||(r=new t,pb.set(t,r)),n&&n(r),Promise.all(i.map(s=>new Promise((o,a)=>r.load(s,l=>{l.scene&&Object.assign(l,DG(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l==null?void 0:l.message}`))))))}}function uu(n,e,t,i){const r=Array.isArray(e)?e:[e],s=DP(KP(t,i),[n,...r],{equal:nn.equ});return Array.isArray(e)?s:s[0]}uu.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return SG(KP(t),[n,...i])};uu.clear=function(n,e){const t=Array.isArray(e)?e:[e];return MG([n,...t])};const Zc=new Map,{invalidate:mb,advance:gb}=jG(Zc),{reconciler:oh,applyProps:uc}=IG(Zc,UG),dc={objects:"shallow",strict:!1},XG=(n,e)=>{const t=typeof n=="function"?n(e):n;return JP(t)?t:new HI({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function JG(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:i,height:r,top:s,left:o,updateStyle:a=t}=e;return{width:i,height:r,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:i,height:r,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:i,height:r,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function KG(n){const e=Zc.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||HG(mb,gb),o=t||oh.createContainer(s,Rc.ConcurrentRoot,null,!1,null,"",r,null);e||Zc.set(n,{fiber:o,store:s});let a,l=!1,c;return{configure(h={}){let{gl:f,size:p,scene:m,events:y,onCreated:A,shadows:x=!1,linear:g=!1,flat:_=!1,legacy:M=!1,orthographic:w=!1,frameloop:C="always",dpr:R=[1,2],performance:P,raycaster:B,camera:I,onPointerMissed:b}=h,U=s.getState(),H=U.gl;U.gl||U.set({gl:H=XG(f,n)});let X=U.raycaster;X||U.set({raycaster:X=new yS});const{params:ee,...ne}=B||{};if(nn.equ(ne,X,dc)||uc(X,{...ne}),nn.equ(ee,X.params,dc)||uc(X,{params:{...X.params,...ee}}),!U.camera||U.camera===c&&!nn.equ(c,I,dc)){c=I;const j=I instanceof yh,Z=j?I:w?new gs(0,0,0,0,.1,1e3):new vn(75,0,.1,1e3);j||(Z.position.z=5,I&&(uc(Z,I),("aspect"in I||"left"in I||"right"in I||"bottom"in I||"top"in I)&&(Z.manual=!0,Z.updateProjectionMatrix())),!U.camera&&!(I!=null&&I.rotation)&&Z.lookAt(0,0,0)),U.set({camera:Z}),X.camera=Z}if(!U.scene){let j;m!=null&&m.isScene?j=m:(j=new $A,m&&uc(j,m)),U.set({scene:hc(j)})}if(!U.xr){var te;const j=(Be,re)=>{const xe=s.getState();xe.frameloop!=="never"&&gb(Be,!0,xe,re)},Z=()=>{const Be=s.getState();Be.gl.xr.enabled=Be.gl.xr.isPresenting,Be.gl.xr.setAnimationLoop(Be.gl.xr.isPresenting?j:null),Be.gl.xr.isPresenting||mb(Be)},me={connect(){const Be=s.getState().gl;Be.xr.addEventListener("sessionstart",Z),Be.xr.addEventListener("sessionend",Z)},disconnect(){const Be=s.getState().gl;Be.xr.removeEventListener("sessionstart",Z),Be.xr.removeEventListener("sessionend",Z)}};typeof((te=H.xr)==null?void 0:te.addEventListener)=="function"&&me.connect(),U.set({xr:me})}if(H.shadowMap){const j=H.shadowMap.enabled,Z=H.shadowMap.type;if(H.shadowMap.enabled=!!x,nn.boo(x))H.shadowMap.type=Md;else if(nn.str(x)){var le;const me={basic:OR,percentage:Hg,soft:Md,variance:Hr};H.shadowMap.type=(le=me[x])!=null?le:Md}else nn.obj(x)&&Object.assign(H.shadowMap,x);(j!==H.shadowMap.enabled||Z!==H.shadowMap.type)&&(H.shadowMap.needsUpdate=!0)}const D=OP();D&&("enabled"in D?D.enabled=!M:"legacyMode"in D&&(D.legacyMode=M)),l||uc(H,{outputEncoding:g?3e3:3001,toneMapping:_?ms:BA}),U.legacy!==M&&U.set(()=>({legacy:M})),U.linear!==g&&U.set(()=>({linear:g})),U.flat!==_&&U.set(()=>({flat:_})),f&&!nn.fun(f)&&!JP(f)&&!nn.equ(f,H,dc)&&uc(H,f),y&&!U.events.handlers&&U.set({events:y(s)});const W=JG(n,p);return nn.equ(W,U.size,dc)||U.setSize(W.width,W.height,W.updateStyle,W.top,W.left),R&&U.viewport.dpr!==VP(R)&&U.setDpr(R),U.frameloop!==C&&U.setFrameloop(C),U.onPointerMissed||U.set({onPointerMissed:b}),P&&!nn.equ(P,U.performance,dc)&&U.set(j=>({performance:{...j.performance,...P}})),a=A,l=!0,this},render(h){return l||this.configure(),oh.updateContainer(L.jsx(YG,{store:s,children:h,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){YP(n)}}}function YG({store:n,children:e,onCreated:t,rootElement:i}){return Th(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),L.jsx(AS.Provider,{value:n,children:e})}function YP(n,e){const t=Zc.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),oh.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,a,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),NG(r),Zc.delete(n)}catch{}},500)})}}function QP(n,e,t){return L.jsx(QG,{children:n,container:e,state:t},e.uuid)}function QG({state:n={},children:e,container:t}){const{events:i,size:r,...s}=n,o=A0(),[a]=z.useState(()=>new yS),[l]=z.useState(()=>new ue),c=z.useCallback((f,p)=>{const m={...f};Object.keys(f).forEach(A=>{(zG.includes(A)||f[A]!==p[A]&&p[A])&&delete m[A]});let y;if(p&&r){const A=p.camera;y=f.viewport.getCurrentViewport(A,new N,r),A!==f.camera&&jP(A,r)}return{...m,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...f.events,...p==null?void 0:p.events,...i},size:{...f.size,...r},viewport:{...f.viewport,...y},...s}},[n]),[h]=z.useState(()=>{const f=o.getState();return PP((m,y)=>({...f,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...f.events,...i},size:{...f.size,...r},...s,set:m,get:y,setEvents:A=>m(x=>({...x,events:{...x.events,...A}}))}))});return z.useEffect(()=>{const f=o.subscribe(p=>h.setState(m=>c(p,m)));return()=>{f()}},[c]),z.useEffect(()=>{h.setState(f=>c(o.getState(),f))},[c]),z.useEffect(()=>()=>{h.destroy()},[]),L.jsx(L.Fragment,{children:oh.createPortal(L.jsx(AS.Provider,{value:h,children:e}),h,null)})}oh.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:z.version});const ex={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function qG(n){const{handlePointer:e}=kG(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(ex).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var i;const{set:r,events:s}=n.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:t}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,a])=>{const[l,c]=ex[o];t.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[a]=ex[s];i.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}function vb(n,e){let t;return(...i)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...i),e)}}function ZG({debounce:n,scroll:e,polyfill:t,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=z.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),a=z.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),l=n?typeof n=="number"?n:n.scroll:null,c=n?typeof n=="number"?n:n.resize:null,h=z.useRef(!1);z.useEffect(()=>(h.current=!0,()=>void(h.current=!1)));const[f,p,m]=z.useMemo(()=>{const g=()=>{if(!a.current.element)return;const{left:_,top:M,width:w,height:C,bottom:R,right:P,x:B,y:I}=a.current.element.getBoundingClientRect(),b={left:_,top:M,width:w,height:C,bottom:R,right:P,x:B,y:I};a.current.element instanceof HTMLElement&&i&&(b.height=a.current.element.offsetHeight,b.width=a.current.element.offsetWidth),Object.freeze(b),h.current&&!n4(a.current.lastBounds,b)&&o(a.current.lastBounds=b)};return[g,c?vb(g,c):g,l?vb(g,l):g]},[o,i,l,c]);function y(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(g=>g.removeEventListener("scroll",m,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function A(){a.current.element&&(a.current.resizeObserver=new r(m),a.current.resizeObserver.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(g=>g.addEventListener("scroll",m,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{m()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const x=g=>{!g||g===a.current.element||(y(),a.current.element=g,a.current.scrollContainers=qP(g),A())};return e4(m,!!e),$G(p),z.useEffect(()=>{y(),A()},[e,m,p]),z.useEffect(()=>y,[]),[x,s,f]}function $G(n){z.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function e4(n,e){z.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function qP(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...qP(n.parentElement)]}const t4=["x","y","top","bottom","left","right","width","height"],n4=(n,e)=>t4.every(t=>n[t]===e[t]);var i4=Object.defineProperty,r4=Object.defineProperties,s4=Object.getOwnPropertyDescriptors,yb=Object.getOwnPropertySymbols,o4=Object.prototype.hasOwnProperty,a4=Object.prototype.propertyIsEnumerable,xb=(n,e,t)=>e in n?i4(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,_b=(n,e)=>{for(var t in e||(e={}))o4.call(e,t)&&xb(n,t,e[t]);if(yb)for(var t of yb(e))a4.call(e,t)&&xb(n,t,e[t]);return n},l4=(n,e)=>r4(n,s4(e)),Ab,Sb;typeof window<"u"&&((Ab=window.document)!=null&&Ab.createElement||((Sb=window.navigator)==null?void 0:Sb.product)==="ReactNative")?z.useLayoutEffect:z.useEffect;function ZP(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=n.child;for(;i;){const r=ZP(i,e,t);if(r)return r;i=i.sibling}}function $P(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const Mb=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=Mb;return}return Mb.apply(this,arguments)};const SS=$P(z.createContext(null));class e2 extends z.Component{render(){return z.createElement(SS.Provider,{value:this._reactInternals},this.props.children)}}function c4(){const n=z.useContext(SS);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=z.useId();return z.useMemo(()=>{for(const i of[n,n==null?void 0:n.alternate]){if(!i)continue;const r=ZP(i,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[n,e])}function u4(){const n=c4(),[e]=z.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const r=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;r&&r!==SS&&!e.has(r)&&e.set(r,z.useContext($P(r)))}t=t.return}return e}function d4(){const n=u4();return z.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>z.createElement(e,null,z.createElement(t.Provider,l4(_b({},i),{value:n.get(t)}))),e=>z.createElement(e2,_b({},e))),[n])}const h4=z.forwardRef(function({children:e,fallback:t,resize:i,style:r,gl:s,events:o=qG,eventSource:a,eventPrefix:l,shadows:c,linear:h,flat:f,legacy:p,orthographic:m,frameloop:y,dpr:A,performance:x,raycaster:g,camera:_,scene:M,onPointerMissed:w,onCreated:C,...R},P){z.useMemo(()=>RG(yG),[]);const B=d4(),[I,b]=ZG({scroll:!0,debounce:{scroll:50,resize:0},...i}),U=z.useRef(null),H=z.useRef(null);z.useImperativeHandle(P,()=>U.current);const X=zP(w),[ee,ne]=z.useState(!1),[te,le]=z.useState(!1);if(ee)throw ee;if(te)throw te;const D=z.useRef(null);Th(()=>{const j=U.current;b.width>0&&b.height>0&&j&&(D.current||(D.current=KG(j)),D.current.configure({gl:s,events:o,shadows:c,linear:h,flat:f,legacy:p,orthographic:m,frameloop:y,dpr:A,performance:x,raycaster:g,camera:_,scene:M,size:b,onPointerMissed:(...Z)=>X.current==null?void 0:X.current(...Z),onCreated:Z=>{Z.events.connect==null||Z.events.connect(a?PG(a)?a.current:a:H.current),l&&Z.setEvents({compute:(me,Be)=>{const re=me[l+"X"],xe=me[l+"Y"];Be.pointer.set(re/Be.size.width*2-1,-(xe/Be.size.height)*2+1),Be.raycaster.setFromCamera(Be.pointer,Be.camera)}}),C==null||C(Z)}}),D.current.render(L.jsx(B,{children:L.jsx(HP,{set:le,children:L.jsx(z.Suspense,{fallback:L.jsx(BG,{set:ne}),children:e??null})})})))}),z.useEffect(()=>{const j=U.current;if(j)return()=>YP(j)},[]);const W=a?"none":"auto";return L.jsx("div",{ref:H,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:W,...r},...R,children:L.jsx("div",{ref:I,style:{width:"100%",height:"100%"},children:L.jsx("canvas",{ref:U,style:{display:"block"},children:t})})})}),t2=z.forwardRef(function(e,t){return L.jsx(e2,{children:L.jsx(h4,{...e,ref:t})})});function ah(){return ah=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},ah.apply(null,arguments)}const wb=n=>{let e;const t=new Set,i=(c,h)=>{const f=typeof c=="function"?c(e):c;if(!Object.is(f,e)){const p=e;e=h??(typeof f!="object"||f===null)?f:Object.assign({},e,f),t.forEach(m=>m(e,p))}},r=()=>e,a={setState:i,getState:r,getInitialState:()=>l,subscribe:c=>(t.add(c),()=>t.delete(c))},l=e=n(i,r,a);return a},f4=n=>n?wb(n):wb,p4=n=>n;function m4(n,e=p4){const t=xs.useSyncExternalStore(n.subscribe,()=>e(n.getState()),()=>e(n.getInitialState()));return xs.useDebugValue(t),t}const Eb=n=>{const e=f4(n),t=i=>m4(e,i);return Object.assign(t,e),t},MS=n=>n?Eb(n):Eb,g4=n=>(e,t,i)=>{const r=i.subscribe;return i.subscribe=(o,a,l)=>{let c=o;if(a){const h=(l==null?void 0:l.equalityFn)||Object.is;let f=o(i.getState());c=p=>{const m=o(p);if(!h(f,m)){const y=f;a(f=m,y)}},l!=null&&l.fireImmediately&&a(f,f)}return r(c)},n(e,t,i)},v4=g4,n2=z.createContext(null);function y4({map:n,children:e,onChange:t,domElement:i}){const r=n.map(l=>l.name+l.keys).join("-"),s=z.useMemo(()=>MS(v4(()=>n.reduce((l,c)=>({...l,[c.name]:!1}),{}))),[r]),o=z.useMemo(()=>[s.subscribe,s.getState,s],[r]),a=s.setState;return z.useEffect(()=>{const c=n.map(({name:m,keys:y,up:A})=>({keys:y,up:A,fn:x=>{a({[m]:x}),t&&t(m,x,o[1]())}})).reduce((m,{keys:y,fn:A,up:x=!0})=>(y.forEach(g=>m[g]={fn:A,pressed:!1,up:x}),m),{}),h=({key:m,code:y})=>{const A=c[m]||c[y];if(!A)return;const{fn:x,pressed:g,up:_}=A;A.pressed=!0,(_||!g)&&x(!0)},f=({key:m,code:y})=>{const A=c[m]||c[y];if(!A)return;const{fn:x,up:g}=A;A.pressed=!1,g&&x(!1)},p=i||window;return p.addEventListener("keydown",h,{passive:!0}),p.addEventListener("keyup",f,{passive:!0}),()=>{p.removeEventListener("keydown",h),p.removeEventListener("keyup",f)}},[i,r]),z.createElement(n2.Provider,{value:o,children:e})}function Na(n){const[e,t,i]=z.useContext(n2);return n?i(n):[e,t]}const x4=parseInt(El.replace(/\D+/g,""));function bb(n,e){if(e===VA)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===xl||e===gh){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,r=[];if(t)if(e===xl)for(let o=1;o<=i;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2===0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}var _4=Object.defineProperty,A4=(n,e,t)=>e in n?_4(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,S4=(n,e,t)=>(A4(n,e+"",t),t);class M4{constructor(){S4(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}var w4=Object.defineProperty,E4=(n,e,t)=>e in n?w4(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ht=(n,e,t)=>(E4(n,typeof e!="symbol"?e+"":e,t),t);const zp=new _s,Cb=new br,b4=Math.cos(70*(Math.PI/180)),Tb=(n,e)=>(n%e+e)%e;let C4=class extends M4{constructor(e,t){super(),ht(this,"object"),ht(this,"domElement"),ht(this,"enabled",!0),ht(this,"target",new N),ht(this,"minDistance",0),ht(this,"maxDistance",1/0),ht(this,"minZoom",0),ht(this,"maxZoom",1/0),ht(this,"minPolarAngle",0),ht(this,"maxPolarAngle",Math.PI),ht(this,"minAzimuthAngle",-1/0),ht(this,"maxAzimuthAngle",1/0),ht(this,"enableDamping",!1),ht(this,"dampingFactor",.05),ht(this,"enableZoom",!0),ht(this,"zoomSpeed",1),ht(this,"enableRotate",!0),ht(this,"rotateSpeed",1),ht(this,"enablePan",!0),ht(this,"panSpeed",1),ht(this,"screenSpacePanning",!0),ht(this,"keyPanSpeed",7),ht(this,"zoomToCursor",!1),ht(this,"autoRotate",!1),ht(this,"autoRotateSpeed",2),ht(this,"reverseOrbit",!1),ht(this,"reverseHorizontalOrbit",!1),ht(this,"reverseVerticalOrbit",!1),ht(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),ht(this,"mouseButtons",{LEFT:za.ROTATE,MIDDLE:za.DOLLY,RIGHT:za.PAN}),ht(this,"touches",{ONE:Ha.ROTATE,TWO:Ha.DOLLY_PAN}),ht(this,"target0"),ht(this,"position0"),ht(this,"zoom0"),ht(this,"_domElementKeyEvents",null),ht(this,"getPolarAngle"),ht(this,"getAzimuthalAngle"),ht(this,"setPolarAngle"),ht(this,"setAzimuthalAngle"),ht(this,"getDistance"),ht(this,"getZoomScale"),ht(this,"listenToKeyEvents"),ht(this,"stopListenToKeyEvents"),ht(this,"saveState"),ht(this,"reset"),ht(this,"update"),ht(this,"connect"),ht(this,"dispose"),ht(this,"dollyIn"),ht(this,"dollyOut"),ht(this,"getScale"),ht(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>h.phi,this.getAzimuthalAngle=()=>h.theta,this.setPolarAngle=K=>{let pe=Tb(K,2*Math.PI),Ue=h.phi;Ue<0&&(Ue+=2*Math.PI),pe<0&&(pe+=2*Math.PI);let J=Math.abs(pe-Ue);2*Math.PI-J<J&&(pe<Ue?pe+=2*Math.PI:Ue+=2*Math.PI),f.phi=pe-Ue,i.update()},this.setAzimuthalAngle=K=>{let pe=Tb(K,2*Math.PI),Ue=h.theta;Ue<0&&(Ue+=2*Math.PI),pe<0&&(pe+=2*Math.PI);let J=Math.abs(pe-Ue);2*Math.PI-J<J&&(pe<Ue?pe+=2*Math.PI:Ue+=2*Math.PI),f.theta=pe-Ue,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=K=>{K.addEventListener("keydown",Le),this._domElementKeyEvents=K},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Le),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(r),i.update(),l=a.NONE},this.update=(()=>{const K=new N,pe=new N(0,1,0),Ue=new sn().setFromUnitVectors(e.up,pe),J=Ue.clone().invert(),be=new N,ce=new sn,ve=2*Math.PI;return function(){const Fe=i.object.position;Ue.setFromUnitVectors(e.up,pe),J.copy(Ue).invert(),K.copy(Fe).sub(i.target),K.applyQuaternion(Ue),h.setFromVector3(K),i.autoRotate&&l===a.NONE&&ee(H()),i.enableDamping?(h.theta+=f.theta*i.dampingFactor,h.phi+=f.phi*i.dampingFactor):(h.theta+=f.theta,h.phi+=f.phi);let ct=i.minAzimuthAngle,Vt=i.maxAzimuthAngle;isFinite(ct)&&isFinite(Vt)&&(ct<-Math.PI?ct+=ve:ct>Math.PI&&(ct-=ve),Vt<-Math.PI?Vt+=ve:Vt>Math.PI&&(Vt-=ve),ct<=Vt?h.theta=Math.max(ct,Math.min(Vt,h.theta)):h.theta=h.theta>(ct+Vt)/2?Math.max(ct,h.theta):Math.min(Vt,h.theta)),h.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,h.phi)),h.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(m,i.dampingFactor):i.target.add(m),i.zoomToCursor&&I||i.object.isOrthographicCamera?h.radius=Be(h.radius):h.radius=Be(h.radius*p),K.setFromSpherical(h),K.applyQuaternion(J),Fe.copy(i.target).add(K),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(f.theta*=1-i.dampingFactor,f.phi*=1-i.dampingFactor,m.multiplyScalar(1-i.dampingFactor)):(f.set(0,0,0),m.set(0,0,0));let on=!1;if(i.zoomToCursor&&I){let Lt=null;if(i.object instanceof vn&&i.object.isPerspectiveCamera){const Ln=K.length();Lt=Be(Ln*p);const ui=Ln-Lt;i.object.position.addScaledVector(P,ui),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const Ln=new N(B.x,B.y,0);Ln.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/p)),i.object.updateProjectionMatrix(),on=!0;const ui=new N(B.x,B.y,0);ui.unproject(i.object),i.object.position.sub(ui).add(Ln),i.object.updateMatrixWorld(),Lt=K.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;Lt!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(Lt).add(i.object.position):(zp.origin.copy(i.object.position),zp.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(zp.direction))<b4?e.lookAt(i.target):(Cb.setFromNormalAndCoplanarPoint(i.object.up,i.target),zp.intersectPlane(Cb,i.target))))}else i.object instanceof gs&&i.object.isOrthographicCamera&&(on=p!==1,on&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/p)),i.object.updateProjectionMatrix()));return p=1,I=!1,on||be.distanceToSquared(i.object.position)>c||8*(1-ce.dot(i.object.quaternion))>c?(i.dispatchEvent(r),be.copy(i.object.position),ce.copy(i.object.quaternion),on=!1,!0):!1}})(),this.connect=K=>{i.domElement=K,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",we),i.domElement.addEventListener("pointerdown",F),i.domElement.addEventListener("pointercancel",fe),i.domElement.addEventListener("wheel",Ze)},this.dispose=()=>{var K,pe,Ue,J,be,ce;i.domElement&&(i.domElement.style.touchAction="auto"),(K=i.domElement)==null||K.removeEventListener("contextmenu",we),(pe=i.domElement)==null||pe.removeEventListener("pointerdown",F),(Ue=i.domElement)==null||Ue.removeEventListener("pointercancel",fe),(J=i.domElement)==null||J.removeEventListener("wheel",Ze),(be=i.domElement)==null||be.ownerDocument.removeEventListener("pointermove",ie),(ce=i.domElement)==null||ce.ownerDocument.removeEventListener("pointerup",fe),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",Le)};const i=this,r={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const c=1e-6,h=new xg,f=new xg;let p=1;const m=new N,y=new ue,A=new ue,x=new ue,g=new ue,_=new ue,M=new ue,w=new ue,C=new ue,R=new ue,P=new N,B=new ue;let I=!1;const b=[],U={};function H(){return 2*Math.PI/60/60*i.autoRotateSpeed}function X(){return Math.pow(.95,i.zoomSpeed)}function ee(K){i.reverseOrbit||i.reverseHorizontalOrbit?f.theta+=K:f.theta-=K}function ne(K){i.reverseOrbit||i.reverseVerticalOrbit?f.phi+=K:f.phi-=K}const te=(()=>{const K=new N;return function(Ue,J){K.setFromMatrixColumn(J,0),K.multiplyScalar(-Ue),m.add(K)}})(),le=(()=>{const K=new N;return function(Ue,J){i.screenSpacePanning===!0?K.setFromMatrixColumn(J,1):(K.setFromMatrixColumn(J,0),K.crossVectors(i.object.up,K)),K.multiplyScalar(Ue),m.add(K)}})(),D=(()=>{const K=new N;return function(Ue,J){const be=i.domElement;if(be&&i.object instanceof vn&&i.object.isPerspectiveCamera){const ce=i.object.position;K.copy(ce).sub(i.target);let ve=K.length();ve*=Math.tan(i.object.fov/2*Math.PI/180),te(2*Ue*ve/be.clientHeight,i.object.matrix),le(2*J*ve/be.clientHeight,i.object.matrix)}else be&&i.object instanceof gs&&i.object.isOrthographicCamera?(te(Ue*(i.object.right-i.object.left)/i.object.zoom/be.clientWidth,i.object.matrix),le(J*(i.object.top-i.object.bottom)/i.object.zoom/be.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function W(K){i.object instanceof vn&&i.object.isPerspectiveCamera||i.object instanceof gs&&i.object.isOrthographicCamera?p=K:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function j(K){W(p/K)}function Z(K){W(p*K)}function me(K){if(!i.zoomToCursor||!i.domElement)return;I=!0;const pe=i.domElement.getBoundingClientRect(),Ue=K.clientX-pe.left,J=K.clientY-pe.top,be=pe.width,ce=pe.height;B.x=Ue/be*2-1,B.y=-(J/ce)*2+1,P.set(B.x,B.y,1).unproject(i.object).sub(i.object.position).normalize()}function Be(K){return Math.max(i.minDistance,Math.min(i.maxDistance,K))}function re(K){y.set(K.clientX,K.clientY)}function xe(K){me(K),w.set(K.clientX,K.clientY)}function Ee(K){g.set(K.clientX,K.clientY)}function _e(K){A.set(K.clientX,K.clientY),x.subVectors(A,y).multiplyScalar(i.rotateSpeed);const pe=i.domElement;pe&&(ee(2*Math.PI*x.x/pe.clientHeight),ne(2*Math.PI*x.y/pe.clientHeight)),y.copy(A),i.update()}function qe(K){C.set(K.clientX,K.clientY),R.subVectors(C,w),R.y>0?j(X()):R.y<0&&Z(X()),w.copy(C),i.update()}function rt(K){_.set(K.clientX,K.clientY),M.subVectors(_,g).multiplyScalar(i.panSpeed),D(M.x,M.y),g.copy(_),i.update()}function at(K){me(K),K.deltaY<0?Z(X()):K.deltaY>0&&j(X()),i.update()}function lt(K){let pe=!1;switch(K.code){case i.keys.UP:D(0,i.keyPanSpeed),pe=!0;break;case i.keys.BOTTOM:D(0,-i.keyPanSpeed),pe=!0;break;case i.keys.LEFT:D(i.keyPanSpeed,0),pe=!0;break;case i.keys.RIGHT:D(-i.keyPanSpeed,0),pe=!0;break}pe&&(K.preventDefault(),i.update())}function ye(){if(b.length==1)y.set(b[0].pageX,b[0].pageY);else{const K=.5*(b[0].pageX+b[1].pageX),pe=.5*(b[0].pageY+b[1].pageY);y.set(K,pe)}}function Ae(){if(b.length==1)g.set(b[0].pageX,b[0].pageY);else{const K=.5*(b[0].pageX+b[1].pageX),pe=.5*(b[0].pageY+b[1].pageY);g.set(K,pe)}}function V(){const K=b[0].pageX-b[1].pageX,pe=b[0].pageY-b[1].pageY,Ue=Math.sqrt(K*K+pe*pe);w.set(0,Ue)}function We(){i.enableZoom&&V(),i.enablePan&&Ae()}function Me(){i.enableZoom&&V(),i.enableRotate&&ye()}function De(K){if(b.length==1)A.set(K.pageX,K.pageY);else{const Ue=Je(K),J=.5*(K.pageX+Ue.x),be=.5*(K.pageY+Ue.y);A.set(J,be)}x.subVectors(A,y).multiplyScalar(i.rotateSpeed);const pe=i.domElement;pe&&(ee(2*Math.PI*x.x/pe.clientHeight),ne(2*Math.PI*x.y/pe.clientHeight)),y.copy(A)}function Te(K){if(b.length==1)_.set(K.pageX,K.pageY);else{const pe=Je(K),Ue=.5*(K.pageX+pe.x),J=.5*(K.pageY+pe.y);_.set(Ue,J)}M.subVectors(_,g).multiplyScalar(i.panSpeed),D(M.x,M.y),g.copy(_)}function it(K){const pe=Je(K),Ue=K.pageX-pe.x,J=K.pageY-pe.y,be=Math.sqrt(Ue*Ue+J*J);C.set(0,be),R.set(0,Math.pow(C.y/w.y,i.zoomSpeed)),j(R.y),w.copy(C)}function Oe(K){i.enableZoom&&it(K),i.enablePan&&Te(K)}function k(K){i.enableZoom&&it(K),i.enableRotate&&De(K)}function F(K){var pe,Ue;i.enabled!==!1&&(b.length===0&&((pe=i.domElement)==null||pe.ownerDocument.addEventListener("pointermove",ie),(Ue=i.domElement)==null||Ue.ownerDocument.addEventListener("pointerup",fe)),Ke(K),K.pointerType==="touch"?je(K):Se(K))}function ie(K){i.enabled!==!1&&(K.pointerType==="touch"?Ct(K):ge(K))}function fe(K){var pe,Ue,J;ut(K),b.length===0&&((pe=i.domElement)==null||pe.releasePointerCapture(K.pointerId),(Ue=i.domElement)==null||Ue.ownerDocument.removeEventListener("pointermove",ie),(J=i.domElement)==null||J.ownerDocument.removeEventListener("pointerup",fe)),i.dispatchEvent(o),l=a.NONE}function Se(K){let pe;switch(K.button){case 0:pe=i.mouseButtons.LEFT;break;case 1:pe=i.mouseButtons.MIDDLE;break;case 2:pe=i.mouseButtons.RIGHT;break;default:pe=-1}switch(pe){case za.DOLLY:if(i.enableZoom===!1)return;xe(K),l=a.DOLLY;break;case za.ROTATE:if(K.ctrlKey||K.metaKey||K.shiftKey){if(i.enablePan===!1)return;Ee(K),l=a.PAN}else{if(i.enableRotate===!1)return;re(K),l=a.ROTATE}break;case za.PAN:if(K.ctrlKey||K.metaKey||K.shiftKey){if(i.enableRotate===!1)return;re(K),l=a.ROTATE}else{if(i.enablePan===!1)return;Ee(K),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function ge(K){if(i.enabled!==!1)switch(l){case a.ROTATE:if(i.enableRotate===!1)return;_e(K);break;case a.DOLLY:if(i.enableZoom===!1)return;qe(K);break;case a.PAN:if(i.enablePan===!1)return;rt(K);break}}function Ze(K){i.enabled===!1||i.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(K.preventDefault(),i.dispatchEvent(s),at(K),i.dispatchEvent(o))}function Le(K){i.enabled===!1||i.enablePan===!1||lt(K)}function je(K){switch(mt(K),b.length){case 1:switch(i.touches.ONE){case Ha.ROTATE:if(i.enableRotate===!1)return;ye(),l=a.TOUCH_ROTATE;break;case Ha.PAN:if(i.enablePan===!1)return;Ae(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(i.touches.TWO){case Ha.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;We(),l=a.TOUCH_DOLLY_PAN;break;case Ha.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Me(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function Ct(K){switch(mt(K),l){case a.TOUCH_ROTATE:if(i.enableRotate===!1)return;De(K),i.update();break;case a.TOUCH_PAN:if(i.enablePan===!1)return;Te(K),i.update();break;case a.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Oe(K),i.update();break;case a.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;k(K),i.update();break;default:l=a.NONE}}function we(K){i.enabled!==!1&&K.preventDefault()}function Ke(K){b.push(K)}function ut(K){delete U[K.pointerId];for(let pe=0;pe<b.length;pe++)if(b[pe].pointerId==K.pointerId){b.splice(pe,1);return}}function mt(K){let pe=U[K.pointerId];pe===void 0&&(pe=new ue,U[K.pointerId]=pe),pe.set(K.pageX,K.pageY)}function Je(K){const pe=K.pointerId===b[0].pointerId?b[1]:b[0];return U[pe.pointerId]}this.dollyIn=(K=X())=>{Z(K),i.update()},this.dollyOut=(K=X())=>{j(K),i.update()},this.getScale=()=>p,this.setScale=K=>{W(K),i.update()},this.getZoomScale=()=>X(),t!==void 0&&this.connect(t),this.update()}};function _g(n){if(typeof TextDecoder<"u")return new TextDecoder().decode(n);let e="";for(let t=0,i=n.length;t<i;t++)e+=String.fromCharCode(n[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const el="srgb",Zs="srgb-linear",Rb=3001,T4=3e3;let wS=class extends ci{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new L4(t)}),this.register(function(t){return new D4(t)}),this.register(function(t){return new V4(t)}),this.register(function(t){return new W4(t)}),this.register(function(t){return new j4(t)}),this.register(function(t){return new F4(t)}),this.register(function(t){return new U4(t)}),this.register(function(t){return new O4(t)}),this.register(function(t){return new k4(t)}),this.register(function(t){return new B4(t)}),this.register(function(t){return new z4(t)}),this.register(function(t){return new N4(t)}),this.register(function(t){return new G4(t)}),this.register(function(t){return new H4(t)}),this.register(function(t){return new I4(t)}),this.register(function(t){return new X4(t)}),this.register(function(t){return new J4(t)})}load(e,t,i,r){const s=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const c=cr.extractUrlBase(e);o=cr.resolveURL(c,this.path)}else o=cr.extractUrlBase(e);this.manager.itemStart(e);const a=function(c){r?r(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new Ui(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(h){t(h),s.manager.itemEnd(e)},a)}catch(h){a(h)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(_g(new Uint8Array(e.slice(0,4)))===i2){try{o[Ut.KHR_BINARY_GLTF]=new K4(e)}catch(h){r&&r(h);return}s=JSON.parse(o[Ut.KHR_BINARY_GLTF].content)}else s=JSON.parse(_g(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new aV(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const h=this.pluginCallbacks[c](l);h.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[h.name]=h,o[h.name]=!0}if(s.extensionsUsed)for(let c=0;c<s.extensionsUsed.length;++c){const h=s.extensionsUsed[c],f=s.extensionsRequired||[];switch(h){case Ut.KHR_MATERIALS_UNLIT:o[h]=new P4;break;case Ut.KHR_DRACO_MESH_COMPRESSION:o[h]=new Y4(s,this.dracoLoader);break;case Ut.KHR_TEXTURE_TRANSFORM:o[h]=new Q4;break;case Ut.KHR_MESH_QUANTIZATION:o[h]=new q4;break;default:f.indexOf(h)>=0&&a[h]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+h+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}};function R4(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Ut={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};let I4=class{constructor(e){this.parser=e,this.name=Ut.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const h=new Ie(16777215);l.color!==void 0&&h.setRGB(l.color[0],l.color[1],l.color[2],Zs);const f=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new x0(h),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new y0(h),c.distance=f;break;case"spot":c=new v0(h),c.distance=f,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,Os(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(c),t.cache.add(i,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return i._getNodeRef(t.cache,a,l)})}},P4=class{constructor(){this.name=Ut.KHR_MATERIALS_UNLIT}getMaterialType(){return xn}extendParams(e,t,i){const r=[];e.color=new Ie(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],Zs),e.opacity=o[3]}s.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",s.baseColorTexture,el))}return Promise.all(r)}},B4=class{constructor(e){this.parser=e,this.name=Ut.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}},L4=class{constructor(e){this.parser=e,this.name=Ut.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bn}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new ue(a,a)}return Promise.all(s)}},D4=class{constructor(e){this.parser=e,this.name=Ut.KHR_MATERIALS_DISPERSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bn}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}},N4=class{constructor(e){this.parser=e,this.name=Ut.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bn}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}},F4=class{constructor(e){this.parser=e,this.name=Ut.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bn}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Ie(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];if(o.sheenColorFactor!==void 0){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],Zs)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,el)),o.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}},U4=class{constructor(e){this.parser=e,this.name=Ut.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bn}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}},O4=class{constructor(e){this.parser=e,this.name=Ut.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bn}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new Ie().setRGB(a[0],a[1],a[2],Zs),Promise.all(s)}},k4=class{constructor(e){this.parser=e,this.name=Ut.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bn}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}},z4=class{constructor(e){this.parser=e,this.name=Ut.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bn}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new Ie().setRGB(a[0],a[1],a[2],Zs),o.specularColorTexture!==void 0&&s.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,el)),Promise.all(s)}},H4=class{constructor(e){this.parser=e,this.name=Ut.EXT_MATERIALS_BUMP}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bn}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(i.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}},G4=class{constructor(e){this.parser=e,this.name=Ut.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bn}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(i.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}},V4=class{constructor(e){this.parser=e,this.name=Ut.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}},W4=class{constructor(e){this.parser=e,this.name=Ut.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}},j4=class{constructor(e){this.parser=e,this.name=Ut.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}},X4=class{constructor(e){this.name=Ut.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=r.byteOffset||0,c=r.byteLength||0,h=r.count,f=r.byteStride,p=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(h,f,p,r.mode,r.filter).then(function(m){return m.buffer}):o.ready.then(function(){const m=new ArrayBuffer(h*f);return o.decodeGltfBuffer(new Uint8Array(m),h,f,p,r.mode,r.filter),m})})}else return null}},J4=class{constructor(e){this.name=Ut.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const r=t.meshes[i.mesh];for(const c of r.primitives)if(c.mode!==Sr.TRIANGLES&&c.mode!==Sr.TRIANGLE_STRIP&&c.mode!==Sr.TRIANGLE_FAN&&c.mode!==void 0)return null;const o=i.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(h=>(l[c]=h,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const h=c.pop(),f=h.isGroup?h.children:[h],p=c[0].count,m=[];for(const y of f){const A=new Xe,x=new N,g=new sn,_=new N(1,1,1),M=new Mh(y.geometry,y.material,p);for(let w=0;w<p;w++)l.TRANSLATION&&x.fromBufferAttribute(l.TRANSLATION,w),l.ROTATION&&g.fromBufferAttribute(l.ROTATION,w),l.SCALE&&_.fromBufferAttribute(l.SCALE,w),M.setMatrixAt(w,A.compose(x,g,_));for(const w in l)if(w==="_COLOR_0"){const C=l[w];M.instanceColor=new ia(C.array,C.itemSize,C.normalized)}else w!=="TRANSLATION"&&w!=="ROTATION"&&w!=="SCALE"&&y.geometry.setAttribute(w,l[w]);Rt.prototype.copy.call(M,y),this.parser.assignFinalMaterial(M),m.push(M)}return h.isGroup?(h.clear(),h.add(...m),h):m[0]}))}};const i2="glTF",$u=12,Ib={JSON:1313821514,BIN:5130562};let K4=class{constructor(e){this.name=Ut.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,$u);if(this.header={magic:_g(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==i2)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-$u,r=new DataView(e,$u);let s=0;for(;s<i;){const o=r.getUint32(s,!0);s+=4;const a=r.getUint32(s,!0);if(s+=4,a===Ib.JSON){const l=new Uint8Array(e,$u+s,o);this.content=_g(l)}else if(a===Ib.BIN){const l=$u+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}},Y4=class{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Ut.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const h in o){const f=P_[h]||h.toLowerCase();a[f]=o[h]}for(const h in e.attributes){const f=P_[h]||h.toLowerCase();if(o[h]!==void 0){const p=i.accessors[e.attributes[h]],m=Uc[p.componentType];c[f]=m.name,l[f]=p.normalized===!0}}return t.getDependency("bufferView",s).then(function(h){return new Promise(function(f,p){r.decodeDracoFile(h,function(m){for(const y in m.attributes){const A=m.attributes[y],x=l[y];x!==void 0&&(A.normalized=x)}f(m)},a,c,Zs,p)})})}},Q4=class{constructor(){this.name=Ut.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}},q4=class{constructor(){this.name=Ut.KHR_MESH_QUANTIZATION}},r2=class extends Cl{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=i[s+o];return t}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,h=r-t,f=(i-t)/h,p=f*f,m=p*f,y=e*c,A=y-c,x=-2*m+3*p,g=m-p,_=1-x,M=g-p+f;for(let w=0;w!==a;w++){const C=o[A+w+a],R=o[A+w+l]*h,P=o[y+w+a],B=o[y+w]*h;s[w]=_*C+M*R+x*P+g*B}return s}};const Z4=new sn;let $4=class extends r2{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return Z4.fromArray(s).normalize().toArray(s),s}};const Sr={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Uc={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Pb={9728:zn,9729:$t,9984:ph,9985:sl,9986:Vo,9987:Yi},Bb={33071:Ki,33648:ml,10497:Yr},tx={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},P_={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...x4>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Po={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},eV={CUBICSPLINE:void 0,LINEAR:na,STEP:yl},nx={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function tV(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new oo({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Kr})),n.DefaultMaterial}function Fa(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function Os(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function nV(n,e,t){let i=!1,r=!1,s=!1;for(let c=0,h=e.length;c<h;c++){const f=e[c];if(f.POSITION!==void 0&&(i=!0),f.NORMAL!==void 0&&(r=!0),f.COLOR_0!==void 0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);const o=[],a=[],l=[];for(let c=0,h=e.length;c<h;c++){const f=e[c];if(i){const p=f.POSITION!==void 0?t.getDependency("accessor",f.POSITION):n.attributes.position;o.push(p)}if(r){const p=f.NORMAL!==void 0?t.getDependency("accessor",f.NORMAL):n.attributes.normal;a.push(p)}if(s){const p=f.COLOR_0!==void 0?t.getDependency("accessor",f.COLOR_0):n.attributes.color;l.push(p)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const h=c[0],f=c[1],p=c[2];return i&&(n.morphAttributes.position=h),r&&(n.morphAttributes.normal=f),s&&(n.morphAttributes.color=p),n.morphTargetsRelative=!0,n})}function iV(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function rV(n){let e;const t=n.extensions&&n.extensions[Ut.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+ix(t.attributes):e=n.indices+":"+ix(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,r=n.targets.length;i<r;i++)e+=":"+ix(n.targets[i]);return e}function ix(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function B_(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function sV(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const oV=new Xe;let aV=class{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new R4,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||r&&s<98?this.textureLoader=new zo(this.options.manager):this.textureLoader=new hS(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Ui(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};return Fa(s,a,r),Os(a,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(const l of a.scenes)l.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,h]of o.children.entries())s(h,a.children[c])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Ut.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){i.load(cr.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const r=t.byteLength||0,s=t.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const o=tx[r.type],a=Uc[r.componentType],l=r.normalized===!0,c=new a(r.count*o);return Promise.resolve(new yt(c,o,l))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=tx[r.type],c=Uc[r.componentType],h=c.BYTES_PER_ELEMENT,f=h*l,p=r.byteOffset||0,m=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,y=r.normalized===!0;let A,x;if(m&&m!==f){const g=Math.floor(p/m),_="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+g+":"+r.count;let M=t.cache.get(_);M||(A=new c(a,g*m,r.count*m/h),M=new au(A,m/h),t.cache.add(_,M)),x=new so(M,l,p%m/h,y)}else a===null?A=new c(r.count*l):A=new c(a,p,r.count*l),x=new yt(A,l,y);if(r.sparse!==void 0){const g=tx.SCALAR,_=Uc[r.sparse.indices.componentType],M=r.sparse.indices.byteOffset||0,w=r.sparse.values.byteOffset||0,C=new _(o[1],M,r.sparse.count*g),R=new c(o[2],w,r.sparse.count*l);a!==null&&(x=new yt(x.array.slice(),x.itemSize,x.normalized));for(let P=0,B=C.length;P<B;P++){const I=C[P];if(x.setX(I,R[P*l]),l>=2&&x.setY(I,R[P*l+1]),l>=3&&x.setZ(I,R[P*l+2]),l>=4&&x.setW(I,R[P*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return x})}loadTexture(e){const t=this.json,i=this.options,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=i.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,i){const r=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,i).then(function(h){h.flipY=!1,h.name=o.name||a.name||"",h.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(h.name=a.uri);const p=(s.samplers||{})[o.sampler]||{};return h.magFilter=Pb[p.magFilter]||$t,h.minFilter=Pb[p.minFilter]||Yi,h.wrapS=Bb[p.wrapS]||Yr,h.wrapT=Bb[p.wrapT]||Yr,r.associations.set(h,{textures:e}),h}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const i=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(f=>f.clone());const o=r.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=i.getDependency("bufferView",o.bufferView).then(function(f){c=!0;const p=new Blob([f],{type:o.mimeType});return l=a.createObjectURL(p),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const h=Promise.resolve(l).then(function(f){return new Promise(function(p,m){let y=p;t.isImageBitmapLoader===!0&&(y=function(A){const x=new tn(A);x.needsUpdate=!0,p(x)}),t.load(cr.resolveURL(f,s.path),y,void 0,m)})}).then(function(f){return c===!0&&a.revokeObjectURL(l),Os(f,o),f.userData.mimeType=o.mimeType||sV(o.uri),f}).catch(function(f){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),f});return this.sourceCache[e]=h,h}assignTexture(e,t,i,r){const s=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(o=o.clone(),o.channel=i.texCoord),s.extensions[Ut.KHR_TEXTURE_TRANSFORM]){const a=i.extensions!==void 0?i.extensions[Ut.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[Ut.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return r!==void 0&&(typeof r=="number"&&(r=r===Rb?el:Zs),"colorSpace"in o?o.colorSpace=r:o.encoding=r===el?Rb:T4),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new wh,pn.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new li,pn.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(a,l)),i=l}if(r||s||o){let a="ClonedMaterial:"+i.uuid+":";r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return oo}loadMaterial(e){const t=this,i=this.json,r=this.extensions,s=i.materials[e];let o;const a={},l=s.extensions||{},c=[];if(l[Ut.KHR_MATERIALS_UNLIT]){const f=r[Ut.KHR_MATERIALS_UNLIT];o=f.getMaterialType(),c.push(f.extendParams(a,s,t))}else{const f=s.pbrMetallicRoughness||{};if(a.color=new Ie(1,1,1),a.opacity=1,Array.isArray(f.baseColorFactor)){const p=f.baseColorFactor;a.color.setRGB(p[0],p[1],p[2],Zs),a.opacity=p[3]}f.baseColorTexture!==void 0&&c.push(t.assignTexture(a,"map",f.baseColorTexture,el)),a.metalness=f.metallicFactor!==void 0?f.metallicFactor:1,a.roughness=f.roughnessFactor!==void 0?f.roughnessFactor:1,f.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(a,"metalnessMap",f.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",f.metallicRoughnessTexture))),o=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=Cr);const h=s.alphaMode||nx.OPAQUE;if(h===nx.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,h===nx.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==xn&&(c.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new ue(1,1),s.normalTexture.scale!==void 0)){const f=s.normalTexture.scale;a.normalScale.set(f,f)}if(s.occlusionTexture!==void 0&&o!==xn&&(c.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==xn){const f=s.emissiveFactor;a.emissive=new Ie().setRGB(f[0],f[1],f[2],Zs)}return s.emissiveTexture!==void 0&&o!==xn&&c.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,el)),Promise.all(c).then(function(){const f=new o(a);return s.name&&(f.name=s.name),Os(f,s),t.associations.set(f,{materials:e}),s.extensions&&Fa(r,f,s),f})}createUniqueName(e){const t=Ht.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(a){return i[Ut.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return Lb(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],h=rV(c),f=r[h];if(f)o.push(f.promise);else{let p;c.extensions&&c.extensions[Ut.KHR_DRACO_MESH_COMPRESSION]?p=s(c):p=Lb(new gt,c,t),r[h]={primitive:c,promise:p},o.push(p)}}return Promise.all(o)}loadMesh(e){const t=this,i=this.json,r=this.extensions,s=i.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const h=o[l].material===void 0?tV(this.cache):this.getDependency("material",o[l].material);a.push(h)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),h=l[l.length-1],f=[];for(let m=0,y=h.length;m<y;m++){const A=h[m],x=o[m];let g;const _=c[m];if(x.mode===Sr.TRIANGLES||x.mode===Sr.TRIANGLE_STRIP||x.mode===Sr.TRIANGLE_FAN||x.mode===void 0)g=s.isSkinnedMesh===!0?new e0(A,_):new Yt(A,_),g.isSkinnedMesh===!0&&g.normalizeSkinWeights(),x.mode===Sr.TRIANGLE_STRIP?g.geometry=bb(g.geometry,gh):x.mode===Sr.TRIANGLE_FAN&&(g.geometry=bb(g.geometry,xl));else if(x.mode===Sr.LINES)g=new Lr(A,_);else if(x.mode===Sr.LINE_STRIP)g=new As(A,_);else if(x.mode===Sr.LINE_LOOP)g=new t0(A,_);else if(x.mode===Sr.POINTS)g=new n0(A,_);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+x.mode);Object.keys(g.geometry.morphAttributes).length>0&&iV(g,s),g.name=t.createUniqueName(s.name||"mesh_"+e),Os(g,s),x.extensions&&Fa(r,g,x),t.assignFinalMaterial(g),f.push(g)}for(let m=0,y=f.length;m<y;m++)t.associations.set(f[m],{meshes:e,primitives:m});if(f.length===1)return s.extensions&&Fa(r,f[0],s),f[0];const p=new Rr;s.extensions&&Fa(r,p,s),t.associations.set(p,{meshes:e});for(let m=0,y=f.length;m<y;m++)p.add(f[m]);return p})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new vn(XA.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(t=new gs(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),Os(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let r=0,s=t.joints.length;r<s;r++)i.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){const s=r.pop(),o=r,a=[],l=[];for(let c=0,h=o.length;c<h;c++){const f=o[c];if(f){a.push(f);const p=new Xe;s!==null&&p.fromArray(s.array,c*16),l.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new lu(a,l)})}loadAnimation(e){const t=this.json,i=this,r=t.animations[e],s=r.name?r.name:"animation_"+e,o=[],a=[],l=[],c=[],h=[];for(let f=0,p=r.channels.length;f<p;f++){const m=r.channels[f],y=r.samplers[m.sampler],A=m.target,x=A.node,g=r.parameters!==void 0?r.parameters[y.input]:y.input,_=r.parameters!==void 0?r.parameters[y.output]:y.output;A.node!==void 0&&(o.push(this.getDependency("node",x)),a.push(this.getDependency("accessor",g)),l.push(this.getDependency("accessor",_)),c.push(y),h.push(A))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c),Promise.all(h)]).then(function(f){const p=f[0],m=f[1],y=f[2],A=f[3],x=f[4],g=[];for(let _=0,M=p.length;_<M;_++){const w=p[_],C=m[_],R=y[_],P=A[_],B=x[_];if(w===void 0)continue;w.updateMatrix&&w.updateMatrix();const I=i._createAnimationTracks(w,C,R,P,B);if(I)for(let b=0;b<I.length;b++)g.push(I[b])}return new Al(s,void 0,g)})}createNodeMesh(e){const t=this.json,i=this,r=t.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=r.weights.length;l<c;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(e){const t=this.json,i=this,r=t.nodes[e],s=i._loadNodeShallow(e),o=[],a=r.children||[];for(let c=0,h=a.length;c<h;c++)o.push(i.getDependency("node",a[c]));const l=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),l]).then(function(c){const h=c[0],f=c[1],p=c[2];p!==null&&h.traverse(function(m){m.isSkinnedMesh&&m.bind(p,oV)});for(let m=0,y=f.length;m<y;m++)h.add(f[m]);return h})}_loadNodeShallow(e){const t=this.json,i=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?r.createUniqueName(s.name):"",a=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(r.getDependency("camera",s.camera).then(function(c){return r._getNodeRef(r.cameraCache,s.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let h;if(s.isBone===!0?h=new Sh:c.length>1?h=new Rr:c.length===1?h=c[0]:h=new Rt,h!==c[0])for(let f=0,p=c.length;f<p;f++)h.add(c[f]);if(s.name&&(h.userData.name=s.name,h.name=o),Os(h,s),s.extensions&&Fa(i,h,s),s.matrix!==void 0){const f=new Xe;f.fromArray(s.matrix),h.applyMatrix4(f)}else s.translation!==void 0&&h.position.fromArray(s.translation),s.rotation!==void 0&&h.quaternion.fromArray(s.rotation),s.scale!==void 0&&h.scale.fromArray(s.scale);return r.associations.has(h)||r.associations.set(h,{}),r.associations.get(h).nodes=e,h}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],r=this,s=new Rr;i.name&&(s.name=r.createUniqueName(i.name)),Os(s,i),i.extensions&&Fa(t,s,i);const o=i.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(r.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let h=0,f=l.length;h<f;h++)s.add(l[h]);const c=h=>{const f=new Map;for(const[p,m]of r.associations)(p instanceof pn||p instanceof tn)&&f.set(p,m);return h.traverse(p=>{const m=r.associations.get(p);m!=null&&f.set(p,m)}),f};return r.associations=c(s),s})}_createAnimationTracks(e,t,i,r,s){const o=[],a=e.name?e.name:e.uuid,l=[];Po[s.path]===Po.weights?e.traverse(function(p){p.morphTargetInfluences&&l.push(p.name?p.name:p.uuid)}):l.push(a);let c;switch(Po[s.path]){case Po.weights:c=ao;break;case Po.rotation:c=lo;break;case Po.position:case Po.scale:c=co;break;default:switch(i.itemSize){case 1:c=ao;break;case 2:case 3:default:c=co;break}break}const h=r.interpolation!==void 0?eV[r.interpolation]:na,f=this._getArrayFromAccessor(i);for(let p=0,m=l.length;p<m;p++){const y=new c(l[p]+"."+Po[s.path],t.array,f,h);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(y),o.push(y)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=B_(t.constructor),r=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)r[s]=t[s]*i;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){const r=this instanceof lo?$4:r2;return new r(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}};function lV(n,e,t){const i=e.attributes,r=new si;if(i.POSITION!==void 0){const a=t.json.accessors[i.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(r.set(new N(l[0],l[1],l[2]),new N(c[0],c[1],c[2])),a.normalized){const h=B_(Uc[a.componentType]);r.min.multiplyScalar(h),r.max.multiplyScalar(h)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new N,l=new N;for(let c=0,h=s.length;c<h;c++){const f=s[c];if(f.POSITION!==void 0){const p=t.json.accessors[f.POSITION],m=p.min,y=p.max;if(m!==void 0&&y!==void 0){if(l.setX(Math.max(Math.abs(m[0]),Math.abs(y[0]))),l.setY(Math.max(Math.abs(m[1]),Math.abs(y[1]))),l.setZ(Math.max(Math.abs(m[2]),Math.abs(y[2]))),p.normalized){const A=B_(Uc[p.componentType]);l.multiplyScalar(A)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;const o=new Hn;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=o}function Lb(n,e,t){const i=e.attributes,r=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in i){const a=P_[o]||o.toLowerCase();a in n.attributes||r.push(s(i[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});r.push(o)}return Os(n,e),lV(n,e,t),Promise.all(r).then(function(){return e.targets!==void 0?nV(n,e.targets,t):n})}const rx=new WeakMap;class cV extends ci{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,r){const s=new Ui(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(t).catch(r)},i,r)}decodeDracoFile(e,t,i,r){const s={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const c=t.attributeTypes[l];c.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=c.name)}const i=JSON.stringify(t);if(rx.has(e)){const l=rx.get(e);if(l.key===i)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(r=l,new Promise((c,h)=>{r._callbacks[s]={resolve:c,reject:h},r.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),rx.set(e,{key:i,promise:a}),a}_createGeometry(e){const t=new gt;e.index&&t.setIndex(new yt(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const r=e.attributes[i],s=r.name,o=r.array,a=r.itemSize;t.setAttribute(s,new yt(o,a))}return t}_loadLibrary(e,t){const i=new Ui(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((r,s)=>{i.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const r=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const s=uV.toString(),o=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const o=s.data;switch(o.type){case"decode":r._callbacks[o.id].resolve(o);break;case"error":r._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function uV(){let n,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(h){n.onModuleLoaded=function(f){h({draco:f})},DracoDecoderModule(n)});break;case"decode":const l=a.buffer,c=a.taskConfig;e.then(h=>{const f=h.draco,p=new f.Decoder,m=new f.DecoderBuffer;m.Init(new Int8Array(l),l.byteLength);try{const y=t(f,p,m,c),A=y.attributes.map(x=>x.array.buffer);y.index&&A.push(y.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:y},A)}catch(y){console.error(y),self.postMessage({type:"error",id:a.id,error:y.message})}finally{f.destroy(m),f.destroy(p)}});break}};function t(o,a,l,c){const h=c.attributeIDs,f=c.attributeTypes;let p,m;const y=a.GetEncodedGeometryType(l);if(y===o.TRIANGULAR_MESH)p=new o.Mesh,m=a.DecodeBufferToMesh(l,p);else if(y===o.POINT_CLOUD)p=new o.PointCloud,m=a.DecodeBufferToPointCloud(l,p);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!m.ok()||p.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+m.error_msg());const A={index:null,attributes:[]};for(const x in h){const g=self[f[x]];let _,M;if(c.useUniqueIDs)M=h[x],_=a.GetAttributeByUniqueId(p,M);else{if(M=a.GetAttributeId(p,o[h[x]]),M===-1)continue;_=a.GetAttribute(p,M)}A.attributes.push(r(o,a,p,x,g,_))}return y===o.TRIANGULAR_MESH&&(A.index=i(o,a,p)),o.destroy(p),A}function i(o,a,l){const h=l.num_faces()*3,f=h*4,p=o._malloc(f);a.GetTrianglesUInt32Array(l,f,p);const m=new Uint32Array(o.HEAPF32.buffer,p,h).slice();return o._free(p),{array:m,itemSize:1}}function r(o,a,l,c,h,f){const p=f.num_components(),y=l.num_points()*p,A=y*h.BYTES_PER_ELEMENT,x=s(o,h),g=o._malloc(A);a.GetAttributeDataArrayForAllPoints(l,f,x,A,g);const _=new h(o.HEAPF32.buffer,g,y).slice();return o._free(g),{name:c,array:_,itemSize:p}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let Hp;const sx=()=>{if(Hp)return Hp;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let r=n;WebAssembly.validate(t)&&(r=e);let s;const o=WebAssembly.instantiate(a(r),{}).then(f=>{s=f.instance,s.exports.__wasm_call_ctors()});function a(f){const p=new Uint8Array(f.length);for(let y=0;y<f.length;++y){const A=f.charCodeAt(y);p[y]=A>96?A-71:A>64?A-65:A>47?A+4:A>46?63:62}let m=0;for(let y=0;y<f.length;++y)p[m++]=p[y]<60?i[p[y]]:(p[y]-60)*64+p[++y];return p.buffer.slice(0,m)}function l(f,p,m,y,A,x){const g=s.exports.sbrk,_=m+3&-4,M=g(_*y),w=g(A.length),C=new Uint8Array(s.exports.memory.buffer);C.set(A,w);const R=f(M,m,y,w,A.length);if(R===0&&x&&x(M,_,y),p.set(C.subarray(M,M+m*y)),g(M-g(0)),R!==0)throw new Error(`Malformed buffer data: ${R}`)}const c={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},h={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return Hp={ready:o,supported:!0,decodeVertexBuffer(f,p,m,y,A){l(s.exports.meshopt_decodeVertexBuffer,f,p,m,y,s.exports[c[A]])},decodeIndexBuffer(f,p,m,y){l(s.exports.meshopt_decodeIndexBuffer,f,p,m,y)},decodeIndexSequence(f,p,m,y){l(s.exports.meshopt_decodeIndexSequence,f,p,m,y)},decodeGltfBuffer(f,p,m,y,A,x){l(s.exports[h[A]],f,p,m,y,s.exports[c[x]])}},Hp},dV=()=>parseInt(El.replace(/\D+/g,"")),hV=dV();var fV=Object.defineProperty,pV=(n,e,t)=>e in n?fV(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Kt=(n,e,t)=>(pV(n,typeof e!="symbol"?e+"":e,t),t);function ox(n,e,t,i,r){let s;if(n=n.subarray||n.slice?n:n.buffer,t=t.subarray||t.slice?t:t.buffer,n=e?n.subarray?n.subarray(e,r&&e+r):n.slice(e,r&&e+r):n,t.set)t.set(n,i);else for(s=0;s<n.length;s++)t[s+i]=n[s];return t}function mV(n){return n instanceof Float32Array?n:n instanceof gt?n.getAttribute("position").array:n.map(e=>{const t=Array.isArray(e);return e instanceof N?[e.x,e.y,e.z]:e instanceof ue?[e.x,e.y,0]:t&&e.length===3?[e[0],e[1],e[2]]:t&&e.length===2?[e[0],e[1],0]:e}).flat()}class gV extends gt{constructor(){super(),Kt(this,"type","MeshLine"),Kt(this,"isMeshLine",!0),Kt(this,"positions",[]),Kt(this,"previous",[]),Kt(this,"next",[]),Kt(this,"side",[]),Kt(this,"width",[]),Kt(this,"indices_array",[]),Kt(this,"uvs",[]),Kt(this,"counters",[]),Kt(this,"widthCallback",null),Kt(this,"_attributes"),Kt(this,"_points",[]),Kt(this,"points"),Kt(this,"matrixWorld",new Xe),Object.defineProperties(this,{points:{enumerable:!0,get(){return this._points},set(e){this.setPoints(e,this.widthCallback)}}})}setMatrixWorld(e){this.matrixWorld=e}setPoints(e,t){if(e=mV(e),this._points=e,this.widthCallback=t??null,this.positions=[],this.counters=[],e.length&&e[0]instanceof N)for(let i=0;i<e.length;i++){const r=e[i],s=i/(e.length-1);this.positions.push(r.x,r.y,r.z),this.positions.push(r.x,r.y,r.z),this.counters.push(s),this.counters.push(s)}else for(let i=0;i<e.length;i+=3){const r=i/(e.length-1);this.positions.push(e[i],e[i+1],e[i+2]),this.positions.push(e[i],e[i+1],e[i+2]),this.counters.push(r),this.counters.push(r)}this.process()}compareV3(e,t){const i=e*6,r=t*6;return this.positions[i]===this.positions[r]&&this.positions[i+1]===this.positions[r+1]&&this.positions[i+2]===this.positions[r+2]}copyV3(e){const t=e*6;return[this.positions[t],this.positions[t+1],this.positions[t+2]]}process(){const e=this.positions.length/6;this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[];let t,i;this.compareV3(0,e-1)?i=this.copyV3(e-2):i=this.copyV3(0),this.previous.push(i[0],i[1],i[2]),this.previous.push(i[0],i[1],i[2]);for(let r=0;r<e;r++){if(this.side.push(1),this.side.push(-1),this.widthCallback?t=this.widthCallback(r/(e-1)):t=1,this.width.push(t),this.width.push(t),this.uvs.push(r/(e-1),0),this.uvs.push(r/(e-1),1),r<e-1){i=this.copyV3(r),this.previous.push(i[0],i[1],i[2]),this.previous.push(i[0],i[1],i[2]);const s=r*2;this.indices_array.push(s,s+1,s+2),this.indices_array.push(s+2,s+1,s+3)}r>0&&(i=this.copyV3(r),this.next.push(i[0],i[1],i[2]),this.next.push(i[0],i[1],i[2]))}this.compareV3(e-1,0)?i=this.copyV3(1):i=this.copyV3(e-1),this.next.push(i[0],i[1],i[2]),this.next.push(i[0],i[1],i[2]),!this._attributes||this._attributes.position.count!==this.counters.length?this._attributes={position:new yt(new Float32Array(this.positions),3),previous:new yt(new Float32Array(this.previous),3),next:new yt(new Float32Array(this.next),3),side:new yt(new Float32Array(this.side),1),width:new yt(new Float32Array(this.width),1),uv:new yt(new Float32Array(this.uvs),2),index:new yt(new Uint16Array(this.indices_array),1),counters:new yt(new Float32Array(this.counters),1)}:(this._attributes.position.copyArray(new Float32Array(this.positions)),this._attributes.position.needsUpdate=!0,this._attributes.previous.copyArray(new Float32Array(this.previous)),this._attributes.previous.needsUpdate=!0,this._attributes.next.copyArray(new Float32Array(this.next)),this._attributes.next.needsUpdate=!0,this._attributes.side.copyArray(new Float32Array(this.side)),this._attributes.side.needsUpdate=!0,this._attributes.width.copyArray(new Float32Array(this.width)),this._attributes.width.needsUpdate=!0,this._attributes.uv.copyArray(new Float32Array(this.uvs)),this._attributes.uv.needsUpdate=!0,this._attributes.index.copyArray(new Uint16Array(this.indices_array)),this._attributes.index.needsUpdate=!0),this.setAttribute("position",this._attributes.position),this.setAttribute("previous",this._attributes.previous),this.setAttribute("next",this._attributes.next),this.setAttribute("side",this._attributes.side),this.setAttribute("width",this._attributes.width),this.setAttribute("uv",this._attributes.uv),this.setAttribute("counters",this._attributes.counters),this.setAttribute("position",this._attributes.position),this.setAttribute("previous",this._attributes.previous),this.setAttribute("next",this._attributes.next),this.setAttribute("side",this._attributes.side),this.setAttribute("width",this._attributes.width),this.setAttribute("uv",this._attributes.uv),this.setAttribute("counters",this._attributes.counters),this.setIndex(this._attributes.index),this.computeBoundingSphere(),this.computeBoundingBox()}advance({x:e,y:t,z:i}){const r=this._attributes.position.array,s=this._attributes.previous.array,o=this._attributes.next.array,a=r.length;ox(r,0,s,0,a),ox(r,6,r,0,a-6),r[a-6]=e,r[a-5]=t,r[a-4]=i,r[a-3]=e,r[a-2]=t,r[a-1]=i,ox(r,6,o,0,a-6),o[a-6]=e,o[a-5]=t,o[a-4]=i,o[a-3]=e,o[a-2]=t,o[a-1]=i,this._attributes.position.needsUpdate=!0,this._attributes.previous.needsUpdate=!0,this._attributes.next.needsUpdate=!0}}const vV=`
  #include <common>
  #include <logdepthbuf_pars_vertex>
  #include <fog_pars_vertex>
  #include <clipping_planes_pars_vertex>

  attribute vec3 previous;
  attribute vec3 next;
  attribute float side;
  attribute float width;
  attribute float counters;
  
  uniform vec2 resolution;
  uniform float lineWidth;
  uniform vec3 color;
  uniform float opacity;
  uniform float sizeAttenuation;
  
  varying vec2 vUV;
  varying vec4 vColor;
  varying float vCounters;
  
  vec2 fix(vec4 i, float aspect) {
    vec2 res = i.xy / i.w;
    res.x *= aspect;
    return res;
  }
  
  void main() {
    float aspect = resolution.x / resolution.y;
    vColor = vec4(color, opacity);
    vUV = uv;
    vCounters = counters;
  
    mat4 m = projectionMatrix * modelViewMatrix;
    vec4 finalPosition = m * vec4(position, 1.0) * aspect;
    vec4 prevPos = m * vec4(previous, 1.0);
    vec4 nextPos = m * vec4(next, 1.0);
  
    vec2 currentP = fix(finalPosition, aspect);
    vec2 prevP = fix(prevPos, aspect);
    vec2 nextP = fix(nextPos, aspect);
  
    float w = lineWidth * width;
  
    vec2 dir;
    if (nextP == currentP) dir = normalize(currentP - prevP);
    else if (prevP == currentP) dir = normalize(nextP - currentP);
    else {
      vec2 dir1 = normalize(currentP - prevP);
      vec2 dir2 = normalize(nextP - currentP);
      dir = normalize(dir1 + dir2);
  
      vec2 perp = vec2(-dir1.y, dir1.x);
      vec2 miter = vec2(-dir.y, dir.x);
      //w = clamp(w / dot(miter, perp), 0., 4. * lineWidth * width);
    }
  
    //vec2 normal = (cross(vec3(dir, 0.), vec3(0., 0., 1.))).xy;
    vec4 normal = vec4(-dir.y, dir.x, 0., 1.);
    normal.xy *= .5 * w;
    //normal *= projectionMatrix;
    if (sizeAttenuation == 0.) {
      normal.xy *= finalPosition.w;
      normal.xy /= (vec4(resolution, 0., 1.) * projectionMatrix).xy * aspect;
    }
  
    finalPosition.xy += normal.xy * side;
    gl_Position = finalPosition;
    #include <logdepthbuf_vertex>
    #include <fog_vertex>
    vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
    #include <clipping_planes_vertex>
    #include <fog_vertex>
  }
`,yV=parseInt(El.replace(/\D+/g,"")),xV=yV>=154?"colorspace_fragment":"encodings_fragment",_V=`
  #include <fog_pars_fragment>
  #include <logdepthbuf_pars_fragment>
  #include <clipping_planes_pars_fragment>
  
  uniform sampler2D map;
  uniform sampler2D alphaMap;
  uniform float useGradient;
  uniform float useMap;
  uniform float useAlphaMap;
  uniform float useDash;
  uniform float dashArray;
  uniform float dashOffset;
  uniform float dashRatio;
  uniform float visibility;
  uniform float alphaTest;
  uniform vec2 repeat;
  uniform vec3 gradient[2];
  
  varying vec2 vUV;
  varying vec4 vColor;
  varying float vCounters;
  
  void main() {
    #include <logdepthbuf_fragment>
    vec4 diffuseColor = vColor;
    if (useGradient == 1.) diffuseColor = vec4(mix(gradient[0], gradient[1], vCounters), 1.0);
    if (useMap == 1.) diffuseColor *= texture2D(map, vUV * repeat);
    if (useAlphaMap == 1.) diffuseColor.a *= texture2D(alphaMap, vUV * repeat).a;
    if (diffuseColor.a < alphaTest) discard;
    if (useDash == 1.) diffuseColor.a *= ceil(mod(vCounters + dashOffset, dashArray) - (dashArray * dashRatio));
    diffuseColor.a *= step(vCounters, visibility);
    #include <clipping_planes_fragment>
    gl_FragColor = diffuseColor;     
    #include <fog_fragment>
    #include <tonemapping_fragment>
    #include <${xV}>
  }
`;class AV extends wi{constructor(e){super({uniforms:{...Ne.fog,lineWidth:{value:1},map:{value:null},useMap:{value:0},alphaMap:{value:null},useAlphaMap:{value:0},color:{value:new Ie(16777215)},gradient:{value:[new Ie(16711680),new Ie(65280)]},opacity:{value:1},resolution:{value:new ue(1,1)},sizeAttenuation:{value:1},dashArray:{value:0},dashOffset:{value:0},dashRatio:{value:.5},useDash:{value:0},useGradient:{value:0},visibility:{value:1},alphaTest:{value:0},repeat:{value:new ue(1,1)}},vertexShader:vV,fragmentShader:_V}),Kt(this,"lineWidth"),Kt(this,"map"),Kt(this,"useMap"),Kt(this,"alphaMap"),Kt(this,"useAlphaMap"),Kt(this,"color"),Kt(this,"gradient"),Kt(this,"resolution"),Kt(this,"sizeAttenuation"),Kt(this,"dashArray"),Kt(this,"dashOffset"),Kt(this,"dashRatio"),Kt(this,"useDash"),Kt(this,"useGradient"),Kt(this,"visibility"),Kt(this,"repeat"),this.type="MeshLineMaterial",Object.defineProperties(this,{lineWidth:{enumerable:!0,get(){return this.uniforms.lineWidth.value},set(t){this.uniforms.lineWidth.value=t}},map:{enumerable:!0,get(){return this.uniforms.map.value},set(t){this.uniforms.map.value=t}},useMap:{enumerable:!0,get(){return this.uniforms.useMap.value},set(t){this.uniforms.useMap.value=t}},alphaMap:{enumerable:!0,get(){return this.uniforms.alphaMap.value},set(t){this.uniforms.alphaMap.value=t}},useAlphaMap:{enumerable:!0,get(){return this.uniforms.useAlphaMap.value},set(t){this.uniforms.useAlphaMap.value=t}},color:{enumerable:!0,get(){return this.uniforms.color.value},set(t){this.uniforms.color.value=t}},gradient:{enumerable:!0,get(){return this.uniforms.gradient.value},set(t){this.uniforms.gradient.value=t}},opacity:{enumerable:!0,get(){return this.uniforms.opacity.value},set(t){this.uniforms.opacity.value=t}},resolution:{enumerable:!0,get(){return this.uniforms.resolution.value},set(t){this.uniforms.resolution.value.copy(t)}},sizeAttenuation:{enumerable:!0,get(){return this.uniforms.sizeAttenuation.value},set(t){this.uniforms.sizeAttenuation.value=t}},dashArray:{enumerable:!0,get(){return this.uniforms.dashArray.value},set(t){this.uniforms.dashArray.value=t,this.useDash=t!==0?1:0}},dashOffset:{enumerable:!0,get(){return this.uniforms.dashOffset.value},set(t){this.uniforms.dashOffset.value=t}},dashRatio:{enumerable:!0,get(){return this.uniforms.dashRatio.value},set(t){this.uniforms.dashRatio.value=t}},useDash:{enumerable:!0,get(){return this.uniforms.useDash.value},set(t){this.uniforms.useDash.value=t}},useGradient:{enumerable:!0,get(){return this.uniforms.useGradient.value},set(t){this.uniforms.useGradient.value=t}},visibility:{enumerable:!0,get(){return this.uniforms.visibility.value},set(t){this.uniforms.visibility.value=t}},alphaTest:{enumerable:!0,get(){return this.uniforms.alphaTest.value},set(t){this.uniforms.alphaTest.value=t}},repeat:{enumerable:!0,get(){return this.uniforms.repeat.value},set(t){this.uniforms.repeat.value.copy(t)}}}),this.setValues(e)}copy(e){return super.copy(e),this.lineWidth=e.lineWidth,this.map=e.map,this.useMap=e.useMap,this.alphaMap=e.alphaMap,this.useAlphaMap=e.useAlphaMap,this.color.copy(e.color),this.gradient=e.gradient,this.opacity=e.opacity,this.resolution.copy(e.resolution),this.sizeAttenuation=e.sizeAttenuation,this.dashArray=e.dashArray,this.dashOffset=e.dashOffset,this.dashRatio=e.dashRatio,this.useDash=e.useDash,this.useGradient=e.useGradient,this.visibility=e.visibility,this.alphaTest=e.alphaTest,this.repeat.copy(e.repeat),this}}let Gp=null,s2="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function o2(n=!0,e=!0,t){return i=>{t&&t(i),n&&(Gp||(Gp=new cV),Gp.setDecoderPath(typeof n=="string"?n:s2),i.setDRACOLoader(Gp)),e&&i.setMeshoptDecoder(typeof sx=="function"?sx():sx)}}const tl=(n,e,t,i)=>uu(wS,n,o2(e,t,i));tl.preload=(n,e,t,i)=>uu.preload(wS,n,o2(e,t,i));tl.clear=n=>uu.clear(wS,n);tl.setDecoderPath=n=>{s2=n};function SV(n,e,t){const i=Un(p=>p.size),r=Un(p=>p.viewport),s=typeof n=="number"?n:i.width*r.dpr,o=i.height*r.dpr,a=(typeof n=="number"?t:n)||{},{samples:l=0,depth:c,...h}=a,f=z.useMemo(()=>{const p=new ai(s,o,{minFilter:$t,magFilter:$t,type:aa,...h});return c&&(p.depthTexture=new Ah(s,o,Di)),p.samples=l,p},[]);return z.useLayoutEffect(()=>{f.setSize(s,o),l&&(f.samples=l)},[l,f,s,o]),z.useEffect(()=>()=>f.dispose(),[]),f}const MV=n=>typeof n=="function",wV=z.forwardRef(({envMap:n,resolution:e=256,frames:t=1/0,makeDefault:i,children:r,...s},o)=>{const a=Un(({set:x})=>x),l=Un(({camera:x})=>x),c=Un(({size:x})=>x),h=z.useRef(null);z.useImperativeHandle(o,()=>h.current,[]);const f=z.useRef(null),p=SV(e);z.useLayoutEffect(()=>{s.manual||(h.current.aspect=c.width/c.height)},[c,s]),z.useLayoutEffect(()=>{h.current.updateProjectionMatrix()});let m=0,y=null;const A=MV(r);return Bn(x=>{A&&(t===1/0||m<t)&&(f.current.visible=!1,x.gl.setRenderTarget(p),y=x.scene.background,n&&(x.scene.background=n),x.gl.render(x.scene,h.current),x.scene.background=y,x.gl.setRenderTarget(null),f.current.visible=!0,m++)}),z.useLayoutEffect(()=>{if(i){const x=l;return a(()=>({camera:h.current})),()=>a(()=>({camera:x}))}},[h,i,a]),z.createElement(z.Fragment,null,z.createElement("perspectiveCamera",ah({ref:h},s),!A&&r),z.createElement("group",{ref:f},A&&r(p.texture)))}),EV=z.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:i,enableDamping:r=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:l,...c},h)=>{const f=Un(R=>R.invalidate),p=Un(R=>R.camera),m=Un(R=>R.gl),y=Un(R=>R.events),A=Un(R=>R.setEvents),x=Un(R=>R.set),g=Un(R=>R.get),_=Un(R=>R.performance),M=e||p,w=i||y.connected||m.domElement,C=z.useMemo(()=>new C4(M),[M]);return Bn(()=>{C.enabled&&C.update()},-1),z.useEffect(()=>(s&&C.connect(s===!0?w:s),C.connect(w),()=>void C.dispose()),[s,w,t,C,f]),z.useEffect(()=>{const R=I=>{f(),t&&_.regress(),o&&o(I)},P=I=>{a&&a(I)},B=I=>{l&&l(I)};return C.addEventListener("change",R),C.addEventListener("start",P),C.addEventListener("end",B),()=>{C.removeEventListener("start",P),C.removeEventListener("end",B),C.removeEventListener("change",R)}},[o,a,l,C,f,A]),z.useEffect(()=>{if(n){const R=g().controls;return x({controls:C}),()=>x({controls:R})}},[n,C]),z.createElement("primitive",ah({ref:h,object:C,enableDamping:r},c))});function bV(n,e){const t=n+"Geometry";return z.forwardRef(({args:i,children:r,...s},o)=>{const a=z.useRef(null);return z.useImperativeHandle(o,()=>a.current),z.useLayoutEffect(()=>void(e==null?void 0:e(a.current))),z.createElement("mesh",ah({ref:a},s),z.createElement(t,{attach:"geometry",args:i}),r)})}const CV=bV("sphere");class TV extends wi{constructor(){super({uniforms:{time:{value:0},fade:{value:1}},vertexShader:`
      uniform float time;
      attribute float size;
      varying vec3 vColor;
      void main() {
        vColor = color;
        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);
        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(time + 100.0));
        gl_Position = projectionMatrix * mvPosition;
      }`,fragmentShader:`
      uniform sampler2D pointTexture;
      uniform float fade;
      varying vec3 vColor;
      void main() {
        float opacity = 1.0;
        if (fade == 1.0) {
          float d = distance(gl_PointCoord, vec2(0.5, 0.5));
          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));
        }
        gl_FragColor = vec4(vColor, opacity);

        #include <tonemapping_fragment>
	      #include <${hV>=154?"colorspace_fragment":"encodings_fragment"}>
      }`})}}const RV=n=>new N().setFromSpherical(new xg(n,Math.acos(1-Math.random()*2),Math.random()*2*Math.PI)),IV=z.forwardRef(({radius:n=100,depth:e=50,count:t=5e3,saturation:i=0,factor:r=4,fade:s=!1,speed:o=1},a)=>{const l=z.useRef(),[c,h,f]=z.useMemo(()=>{const m=[],y=[],A=Array.from({length:t},()=>(.5+.5*Math.random())*r),x=new Ie;let g=n+e;const _=e/t;for(let M=0;M<t;M++)g-=_*Math.random(),m.push(...RV(g).toArray()),x.setHSL(M/t,i,.9),y.push(x.r,x.g,x.b);return[new Float32Array(m),new Float32Array(y),new Float32Array(A)]},[t,e,r,n,i]);Bn(m=>l.current&&(l.current.uniforms.time.value=m.clock.elapsedTime*o));const[p]=z.useState(()=>new TV);return z.createElement("points",{ref:a},z.createElement("bufferGeometry",null,z.createElement("bufferAttribute",{attach:"attributes-position",args:[c,3]}),z.createElement("bufferAttribute",{attach:"attributes-color",args:[h,3]}),z.createElement("bufferAttribute",{attach:"attributes-size",args:[f,1]})),z.createElement("primitive",{ref:l,object:p,attach:"material",blending:Dm,"uniforms-fade-value":s,depthWrite:!1,transparent:!0,vertexColors:!0}))}),PV={BASE_URL:"/CelestialNavigator/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},Db=n=>{let e;const t=new Set,i=(h,f)=>{const p=typeof h=="function"?h(e):h;if(!Object.is(p,e)){const m=e;e=f??(typeof p!="object"||p===null)?p:Object.assign({},e,p),t.forEach(y=>y(e,m))}},r=()=>e,l={setState:i,getState:r,getInitialState:()=>c,subscribe:h=>(t.add(h),()=>t.delete(h)),destroy:()=>{(PV?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},c=e=n(i,r,l);return l},BV=n=>n?Db(n):Db;var a2={exports:{}},l2={},c2={exports:{}},u2={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $c=z;function LV(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var DV=typeof Object.is=="function"?Object.is:LV,NV=$c.useState,FV=$c.useEffect,UV=$c.useLayoutEffect,OV=$c.useDebugValue;function kV(n,e){var t=e(),i=NV({inst:{value:t,getSnapshot:e}}),r=i[0].inst,s=i[1];return UV(function(){r.value=t,r.getSnapshot=e,ax(r)&&s({inst:r})},[n,t,e]),FV(function(){return ax(r)&&s({inst:r}),n(function(){ax(r)&&s({inst:r})})},[n]),OV(t),t}function ax(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!DV(n,t)}catch{return!0}}function zV(n,e){return e()}var HV=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?zV:kV;u2.useSyncExternalStore=$c.useSyncExternalStore!==void 0?$c.useSyncExternalStore:HV;c2.exports=u2;var GV=c2.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S0=z,VV=GV;function WV(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var jV=typeof Object.is=="function"?Object.is:WV,XV=VV.useSyncExternalStore,JV=S0.useRef,KV=S0.useEffect,YV=S0.useMemo,QV=S0.useDebugValue;l2.useSyncExternalStoreWithSelector=function(n,e,t,i,r){var s=JV(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=YV(function(){function l(m){if(!c){if(c=!0,h=m,m=i(m),r!==void 0&&o.hasValue){var y=o.value;if(r(y,m))return f=y}return f=m}if(y=f,jV(h,m))return y;var A=i(m);return r!==void 0&&r(y,A)?y:(h=m,f=A)}var c=!1,h,f,p=t===void 0?null:t;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,t,i,r]);var a=XV(n,s[0],s[1]);return KV(function(){o.hasValue=!0,o.value=a},[a]),QV(a),a};a2.exports=l2;var qV=a2.exports;const d2=U_(qV),h2={BASE_URL:"/CelestialNavigator/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},{useDebugValue:ZV}=xs,{useSyncExternalStoreWithSelector:$V}=d2;let Nb=!1;const e5=n=>n;function t5(n,e=e5,t){(h2?"production":void 0)!=="production"&&t&&!Nb&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Nb=!0);const i=$V(n.subscribe,n.getState,n.getServerState||n.getInitialState,e,t);return ZV(i),i}const Fb=n=>{(h2?"production":void 0)!=="production"&&typeof n!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof n=="function"?BV(n):n,t=(i,r)=>t5(e,i,r);return Object.assign(t,e),t},n5=n=>n?Fb(n):Fb;var Ub,Ob;const kb=typeof window<"u"&&((Ub=window.document)!=null&&Ub.createElement||((Ob=window.navigator)==null?void 0:Ob.product)==="ReactNative")?xs.useLayoutEffect:xs.useEffect;function i5(){const n=n5(e=>({current:new Array,version:0,set:e}));return{In:({children:e})=>{const t=n(r=>r.set),i=n(r=>r.version);return kb(()=>{t(r=>({version:r.version+1}))},[]),kb(()=>(t(({current:r})=>({current:[...r,e]})),()=>t(({current:r})=>({current:r.filter(s=>s!==e)}))),[e,i]),null},Out:()=>{const e=n(t=>t.current);return xs.createElement(xs.Fragment,null,e)}}}const f2=MS((n,e)=>({backgroundMusic:null,hitSound:null,successSound:null,isMuted:!0,setBackgroundMusic:t=>n({backgroundMusic:t}),setHitSound:t=>n({hitSound:t}),setSuccessSound:t=>n({successSound:t}),toggleMute:()=>{const{isMuted:t}=e(),i=!t;n({isMuted:i}),console.log(`Sound ${i?"muted":"unmuted"}`)},playHit:()=>{const{hitSound:t,isMuted:i}=e();if(t){if(i){console.log("Hit sound skipped (muted)");return}const r=t.cloneNode();r.volume=.3,r.play().catch(s=>{console.log("Hit sound play prevented:",s)})}},playSuccess:()=>{const{successSound:t,isMuted:i}=e();if(t){if(i){console.log("Success sound skipped (muted)");return}t.currentTime=0,t.play().catch(r=>{console.log("Success sound play prevented:",r)})}}})),Nt=MS(n=>({focusedBody:null,hoveredBody:null,cameraDistance:50,isLoaded:!1,followSpacecraft:!1,isPaused:!1,timeScale:1,simulationTime:0,isEducationalPanelOpen:!1,isVRMode:!1,setFocusedBody:e=>n({focusedBody:e}),setHoveredBody:e=>n({hoveredBody:e}),setCameraDistance:e=>n({cameraDistance:e}),setLoaded:e=>n({isLoaded:e}),setFollowSpacecraft:e=>n({followSpacecraft:e}),setIsPaused:e=>n({isPaused:e}),setTimeScale:e=>n({timeScale:e}),incrementSimulationTime:e=>n(t=>({simulationTime:t.isPaused?t.simulationTime:t.simulationTime+e*t.timeScale})),setEducationalPanelOpen:e=>n({isEducationalPanelOpen:e}),setVRMode:e=>n({isVRMode:e})}));function Hs(n,e){const{center:t,radius:i,eccentricity:r,tilt:s}=e,o=n%(Math.PI*2);let a=o;for(let g=0;g<5;g++){const _=a-(a-r*Math.sin(a)-o)/(1-r*Math.cos(a));if(Math.abs(_-a)<1e-6)break;a=_}const l=(Math.cos(a)-r)/(1-r*Math.cos(a)),c=Math.sqrt(1-r*r)*Math.sin(a)/(1-r*Math.cos(a)),h=Math.atan2(c,l),f=i*(1-r*r)/(1+r*Math.cos(h)),p=t[0]+f*Math.cos(h),m=0,y=t[2]+f*Math.sin(h),A=m*Math.cos(s)-y*Math.sin(s),x=m*Math.sin(s)+y*Math.cos(s);return new N(p,A,x)}const r5=({id:n,position:e,rotation:t=[0,0,0],radius:i=1,textureUrl:r,type:s,name:o,rotationSpeed:a=.001,orbitSpeed:l=0,orbitRadius:c=0,orbitCenter:h=[0,0,0],eccentricity:f=0,orbitTilt:p=0,axialTilt:m=0})=>{const y=z.useRef(null),A=Nt(H=>H.focusedBody),x=Nt(H=>H.setFocusedBody),g=Nt(H=>H.setHoveredBody),_=Nt(H=>H.isPaused),M=Nt(H=>H.timeScale),w=Nt(H=>H.simulationTime);z.useEffect(()=>{y.current&&(y.current.userData.id=n)},[n]);const C=z.useMemo(()=>{const H=r||`/CelestialNavigator/textures/planets/${n}.jpg`;try{return new zo().load(H)}catch{return console.warn(`Failed to load texture for ${o}`),null}},[n,o,r]),R=z.useMemo(()=>{if(s==="star"||["venus","jupiter","saturn"].includes(n)){const H=s==="star"?"#FFA726":"#4FC3F7",X=i*1.05;return new Yt(new qs(X,32,16),new xn({color:H,transparent:!0,opacity:.2,side:ri}))}if(n==="earth"){const H=new Yt(new qs(i*1.15,32,16),new xn({color:"#88c1ff",transparent:!0,opacity:.15,side:ri})),X=new oo({map:new zo().load("/CelestialNavigator/textures/planets/earth_clouds.jpg"),transparent:!0,opacity:.8,roughness:1,metalness:0}),ee=i*1.02,ne=new Yt(new qs(ee,48,24),X);return H.add(ne),ne.userData.isEarthClouds=!0,H}return null},[i,s,n]),P=z.useMemo(()=>{if(s==="star")return new xn({map:C,color:C?16777215:16754470});if(n==="earth"){const H=new zo().load("/CelestialNavigator/textures/planets/earth_normal.jpg"),X=new zo().load("/CelestialNavigator/textures/planets/earth_specular.jpg"),ee=new zo().load("/CelestialNavigator/textures/planets/earth_night.jpg"),ne={uniforms:{dayTexture:{value:C},nightTexture:{value:ee},normalMap:{value:H},specularMap:{value:X},sunDirection:{value:new N(1,0,0)}},vertexShader:`
          varying vec2 vUv;
          varying vec3 vNormal;
          varying vec3 vPosition;
          
          void main() {
            vUv = uv;
            vNormal = normalize(normalMatrix * normal);
            vPosition = (modelViewMatrix * vec4(position, 1.0)).xyz;
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
          }
        `,fragmentShader:`
          uniform sampler2D dayTexture;
          uniform sampler2D nightTexture;
          uniform sampler2D normalMap;
          uniform sampler2D specularMap;
          uniform vec3 sunDirection;
          
          varying vec2 vUv;
          varying vec3 vNormal;
          varying vec3 vPosition;
          
          void main() {
            // Get normal from normal map and apply to surface normal
            vec3 normal = normalize(vNormal);
            vec3 normalMapValue = texture2D(normalMap, vUv).xyz * 2.0 - 1.0;
            normal = normalize(normal + normalMapValue * 0.8);
            
            // Calculate day/night mix factor based on angle to sun
            // Higher values when normal points toward sun (day side)
            float dayMix = dot(normal, normalize(sunDirection));
            
            // Create smooth transition between day and night
            // Adjust these values to control twilight zone width
            float twilightStart = -0.15;  // Start of twilight (night->day transition)
            float twilightEnd = 0.15;    // End of twilight (full day)
            dayMix = smoothstep(twilightStart, twilightEnd, dayMix);
            
            // Get colors from day and night textures
            vec3 dayColor = texture2D(dayTexture, vUv).rgb;
            vec3 nightColor = texture2D(nightTexture, vUv).rgb * 2.0;
            
            // Add specular highlight on day side
            float specular = texture2D(specularMap, vUv).r;
            float specHighlight = pow(max(0.0, dot(normalize(reflect(-sunDirection, normal)), normalize(-vPosition))), 20.0) * specular;
            
            // Add atmosphere rim effect
            float rim = 1.0 - max(0.0, dot(normalize(-vPosition), normal));
            rim = pow(rim, 2.0) * 0.15;
            vec3 rimColor = vec3(0.5, 0.7, 1.0);
            
            // Blend day and night textures based on sun angle
            vec3 color = mix(nightColor, dayColor, dayMix);
            
            // Add specular highlights only on day side
            color += specHighlight * dayMix * 0.5;
            
            // Add rim lighting (slightly more on day side)
            color += rim * rimColor * (dayMix * 0.5 + 0.5);
            
            gl_FragColor = vec4(color, 1.0);
          }
        `},te=new wi(ne);return te.needsUpdate=!0,te}else return new oo({map:C,roughness:.7,metalness:.1,color:C?16777215:13421772})},[C,s,n]);z.useEffect(()=>{if(n==="earth"&&P instanceof wi&&P.uniforms.sunDirection){const H=new N(-e[0],-e[1],-e[2]).normalize();P.uniforms.sunDirection.value=H}},[n,e,P]),Bn((H,X)=>{if(n==="earth"&&P instanceof wi&&P.uniforms.sunDirection&&y.current){const ee=new N;y.current.getWorldPosition(ee);const ne=new N(0,0,0).sub(ee).normalize(),te=new Xe;te.copy(y.current.matrixWorld).invert();const le=ne.clone().applyMatrix4(te).normalize();P.uniforms.sunDirection.value=le}});const B=z.useMemo(()=>{if(s!=="belt")return null;let H=2e3,X=.8,ee=1.2,ne=5,te="#AA9977",le=.5,D=.7;n==="saturn-rings"?(H=1e4,X=1.2,ee=2.2,ne=.5,te="#E8D8A0",le=.3,D=.9):n==="kuiper-belt"?(H=5e3,X=.9,ee=1.1,ne=20,te="#BBBBCC",le=.4,D=.5):n==="oort-cloud"&&(H=8e3,X=.7,ee=1.3,ne=100,te="#AABBCC",le=.2,D=.3);const W=new gt,j=[],Z=[],me=[],Be=new Ie(te),re=c*X,xe=c*ee;for(let Ee=0;Ee<H;Ee++){let _e,qe,rt;if(n==="saturn-rings"){const We=re+Math.random()*(xe-re),Me=Math.random()*Math.PI*2;_e=Math.cos(Me)*We,qe=(Math.random()-.5)*ne,rt=Math.sin(Me)*We;const De=p||0,Te=qe*Math.cos(De)-rt*Math.sin(De),it=qe*Math.sin(De)+rt*Math.cos(De);qe=Te,rt=it}else if(n==="oort-cloud"){const We=Math.random()*Math.PI*2,Me=Math.random()*2-1,De=Math.random(),Te=Math.acos(Me),it=xe*Math.cbrt(De);_e=it*Math.sin(Te)*Math.cos(We),qe=it*Math.sin(Te)*Math.sin(We),rt=it*Math.cos(Te)}else{const We=re+Math.random()*(xe-re),Me=Math.random()*Math.PI*2;_e=Math.cos(Me)*We,qe=(Math.random()-.5)*ne,rt=Math.sin(Me)*We}j.push(_e,qe,rt);const at=Math.random()*le+.1;Z.push(at);const lt=.1,ye=Math.random()*lt-lt/2,Ae=Math.random()*lt-lt/2,V=Math.random()*lt-lt/2;me.push(Be.r+ye,Be.g+Ae,Be.b+V)}return W.setAttribute("position",new et(j,3)),W.setAttribute("size",new et(Z,1)),W.setAttribute("color",new et(me,3)),{geometry:W,size:le,opacity:D}},[n,s,c,p]);z.useEffect(()=>{if(s==="moon"&&c>0){let H=null;n==="moon"?H="earth":n==="io"||n==="europa"?H="jupiter":n==="titan"&&(H="saturn"),y.current&&H&&(y.current.userData.parentId=H)}},[n,s,c]);const I=z.useMemo(()=>{if(l>0&&c>0){if(s==="moon")return null;const H=[],X=100,ee={center:h,radius:c,eccentricity:f,tilt:p};for(let ne=0;ne<=X;ne++){const te=ne/X*Math.PI*2,le=Hs(te,ee);H.push(le)}return L.jsxs("line",{children:[L.jsx("bufferGeometry",{attach:"geometry",children:L.jsx("float32BufferAttribute",{attach:"attributes-position",args:[new Float32Array(H.flatMap(ne=>[ne.x,ne.y,ne.z])),3]})}),L.jsx("lineBasicMaterial",{attach:"material",color:s==="dwarf"?"#AA8866":"#AAAAAA",opacity:.3,transparent:!0})]})}return null},[c,l,h,p,f,s]);Bn((H,X)=>{if(!(!y.current||_)){if(a){if(m&&!y.current.userData.axialTiltApplied){const ne=new N(0,0,1),te=new sn().setFromAxisAngle(ne,m);y.current.quaternion.premultiply(te),y.current.userData.axialTiltApplied=!0}const ee=new N(0,1,0);y.current.rotateOnAxis(ee,a*X*M),n==="earth"&&R&&R.children.forEach(ne=>{ne.userData.isEarthClouds&&ne.rotateOnAxis(ee,a*1.2*X*M)})}if(l>0&&c>0){if(s==="moon"&&y.current.userData.parentId){const le=y.current.userData.parentId;let D=null;if(H.scene.traverse(W=>{W.userData&&W.userData.id===le&&(D=W)}),D){const W=new N;D.getWorldPosition(W);const j=w*l,Z={center:[W.x,W.y,W.z],radius:c,eccentricity:f,tilt:p},me=Hs(j,Z);y.current.position.copy(me);return}}if(n==="jwst"){let le=null;if(H.scene.traverse(D=>{D.userData&&D.userData.id==="earth"&&(le=D)}),le){const D=new N;le.getWorldPosition(D);const W=D.clone().normalize(),j=D.clone().add(W.clone().multiplyScalar(25)),Z=w*l,me=j.x+Math.cos(Z)*c*.5,Be=j.y+Math.sin(Z)*Math.cos(Z)*c*.3,re=j.z+Math.sin(Z)*c*.7;y.current.position.set(me,Be,re);return}}const ee=w*l,te=Hs(ee,{center:h,radius:c,eccentricity:f,tilt:p});y.current.position.copy(te)}}});const b=H=>{H.stopPropagation(),x(n)},U=A===n;return L.jsxs("group",{children:[I,B&&L.jsxs("points",{children:[L.jsx("primitive",{object:B.geometry,attach:"geometry"}),L.jsx("pointsMaterial",{size:B.size,sizeAttenuation:!0,vertexColors:!0,transparent:!0,opacity:B.opacity})]}),s!=="belt"&&L.jsxs("mesh",{ref:y,position:e,onClick:b,onPointerOver:()=>g(n),onPointerOut:()=>g(null),children:[L.jsx("sphereGeometry",{args:[i,32,16]}),L.jsx("primitive",{object:P,attach:"material"}),R&&L.jsx("primitive",{object:R}),U&&L.jsx(CV,{args:[i*1.1,16,8],children:L.jsx("meshBasicMaterial",{color:"#4FC3F7",transparent:!0,opacity:.2,wireframe:!0})})]}),s==="belt"&&L.jsxs("mesh",{ref:y,position:e,onClick:b,onPointerOver:()=>g(n),onPointerOut:()=>g(null),visible:!1,children:[L.jsx("sphereGeometry",{args:[1,4,4]}),L.jsx("meshBasicMaterial",{transparent:!0,opacity:0})]})]})},lx=({id:n,position:e,radius:t=1,rotationSpeed:i=.001,orbitSpeed:r=0,orbitRadius:s=0,orbitCenter:o=[0,0,0],eccentricity:a=0,orbitTilt:l=0})=>{const c=z.useRef(null),[h,f]=z.useState(!1),p=z.useRef(!1),m=()=>n==="iss"?"/CelestialNavigator/models/iss.glb":n==="jwst"?"/CelestialNavigator/models/jwst.glb":n==="voyager"?"/CelestialNavigator/models/voyager.glb":"/CelestialNavigator/models/iss.glb",{scene:y}=tl(m());z.useEffect(()=>{y&&(f(!0),console.log(`Spacecraft model for ${n} loaded successfully`),c.current&&(n==="iss"?c.current.scale.set(.02,.02,.02):n==="jwst"?c.current.scale.set(.03,.03,.03):n==="voyager"&&c.current.scale.set(.02,.02,.02)))},[y,n]);const A=Nt(_=>_.isPaused),x=Nt(_=>_.timeScale),g=Nt(_=>_.simulationTime);return Bn((_,M)=>{if(!(!c.current||!h||A)){if(r>0&&s>0){const w=g*r,R=Hs(w,{center:o,radius:s,eccentricity:a,tilt:l});c.current.position.copy(R)}if(c.current.rotation.y+=i*M*5*x,(n==="iss"||n==="jwst")&&r>0&&s>0){let w=null;if(w=_.scene.children.find(C=>C.userData&&C.userData.id==="earth"),w||_.scene.traverse(C=>{C.userData&&C.userData.id==="earth"&&(w=C)}),w){const C=new N;w.getWorldPosition(C);const R={center:[C.x,C.y,C.z],radius:s,eccentricity:a,tilt:l},P=g*r*5,B=Hs(P,R);c.current.position.copy(B);const I=Hs(P+.01,R),b=new N(I.x-B.x,I.y-B.y,I.z-B.z).normalize();if(b.length()>0){const U=new N(c.current.position.x+b.x,c.current.position.y+b.y,c.current.position.z+b.z);c.current.lookAt(U),n==="iss"?c.current.rotation.x+=Math.PI/2:n==="jwst"&&(c.current.rotation.z+=Math.PI/4)}return}}if(r>0&&s>0){const w={center:o,radius:s,eccentricity:a,tilt:l};if(!p.current){let I=0;n==="iss"?I=0:n==="jwst"?I=3:n==="voyager"&&(I=5);const b=Hs(I,w);c.current.position.copy(b),p.current=!0}const C=g*r*5,R=Hs(C,w);c.current.position.copy(R);const P=Hs(C+.01,w),B=new N(P.x-R.x,P.y-R.y,P.z-R.z).normalize();if(B.length()>0){const I=new N(c.current.position.x+B.x,c.current.position.y+B.y,c.current.position.z+B.z);c.current.lookAt(I),n==="iss"?c.current.rotation.x+=Math.PI/2:n==="jwst"&&(c.current.rotation.z+=Math.PI/4)}}else c.current.position.set(e[0],e[1],e[2])}}),tl.preload("/CelestialNavigator/models/iss.glb"),tl.preload("/CelestialNavigator/models/jwst.glb"),tl.preload("/CelestialNavigator/models/voyager.glb"),L.jsx("group",{ref:c,children:h?L.jsx("primitive",{object:y.clone()}):L.jsxs("mesh",{children:[L.jsx("boxGeometry",{args:[t,t,t]}),L.jsx("meshStandardMaterial",{color:"#CCCCCC"})]})})},s5=({position:n})=>{const e=z.useRef(null),t=Nt(r=>r.followSpacecraft),i=Nt(r=>r.setFollowSpacecraft);return z.useEffect(()=>{const r=s=>{s.code==="KeyT"&&i(!t)};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[t,i]),Bn(({clock:r})=>{if(!e.current)return;const s=r.getElapsedTime();e.current.position.x=n[0]+Math.sin(s*.3)*20,e.current.position.y=n[1]+Math.sin(s*.2)*5,e.current.position.z=n[2]+Math.cos(s*.3)*20;const o=new N(e.current.position.x+Math.sin(s*.3+.1)*20,e.current.position.y+Math.sin(s*.2+.1)*5,e.current.position.z+Math.cos(s*.3+.1)*20);e.current.lookAt(o)}),L.jsxs("group",{ref:e,position:n,children:[L.jsxs("mesh",{castShadow:!0,receiveShadow:!0,children:[L.jsx("capsuleGeometry",{args:[1,5,16,16]}),L.jsx("meshStandardMaterial",{color:"#424242",metalness:.8,roughness:.2})]}),L.jsxs("mesh",{position:[0,2,0],castShadow:!0,children:[L.jsx("sphereGeometry",{args:[1.2,32,32,0,Math.PI*2,0,Math.PI*.5]}),L.jsx("meshStandardMaterial",{color:"#4FC3F7",opacity:.9,transparent:!0,metalness:.2})]}),L.jsxs("mesh",{position:[0,-1,0],rotation:[0,0,Math.PI/2],castShadow:!0,children:[L.jsx("cylinderGeometry",{args:[.2,.2,8,8]}),L.jsx("meshStandardMaterial",{color:"#424242",metalness:.7})]}),L.jsx("pointLight",{position:[0,-3,0],color:"#4FC3F7",intensity:2,distance:10}),L.jsxs("mesh",{position:[0,-3,0],children:[L.jsx("sphereGeometry",{args:[.6,16,16]}),L.jsx("meshBasicMaterial",{color:"#4FC3F7"})]})]})},Gs=[{id:"sun",name:"Sun",type:"star",position:[0,0,0],radius:20,rotationSpeed:.001,textureUrl:"/CelestialNavigator/textures/sun.jpg",diameter:1392700,temperature:"5,500C (surface), 15,000,000C (core)",description:"The Sun is the star at the center of the Solar System. It is a nearly perfect sphere of hot plasma, heated to incandescence by nuclear fusion reactions in its core."},{id:"mercury",name:"Mercury",type:"planet",position:[35,0,0],radius:1.74,rotationSpeed:5e-4,orbitSpeed:.048,orbitRadius:35,orbitCenter:[0,0,0],eccentricity:.205,orbitTilt:.1222,axialTilt:.0017,textureUrl:"/CelestialNavigator/textures/planets/mercury.jpg",diameter:4879,dayLength:"58.7 Earth days",yearLength:"88 Earth days",temperature:"-173C to 427C",description:"Mercury is the smallest and innermost planet in the Solar System. It has the most eccentric orbit of all planets, creating a notably elliptical path."},{id:"venus",name:"Venus",type:"planet",position:[50,0,0],radius:4.35,rotationSpeed:-2e-4,orbitSpeed:.019,orbitRadius:50,orbitCenter:[0,0,0],eccentricity:.007,orbitTilt:.0594,axialTilt:3.0963,textureUrl:"/CelestialNavigator/textures/planets/venus.jpg",diameter:12104,dayLength:"243 Earth days",yearLength:"225 Earth days",temperature:"462C (average)",description:"Venus is the second planet from the Sun and the hottest planet in our solar system. It rotates in the opposite direction to most planets."},{id:"earth",name:"Earth",type:"planet",position:[70,0,0],radius:4.6,rotationSpeed:.01,orbitSpeed:.01,orbitRadius:70,orbitCenter:[0,0,0],eccentricity:.017,orbitTilt:0,axialTilt:.4101,textureUrl:"/CelestialNavigator/textures/planets/earth.jpg",diameter:12756,dayLength:"24 hours",yearLength:"365.25 days",temperature:"-88C to 58C",description:"Earth is the third planet from the Sun and the only astronomical object known to harbor life. Its 23.5 axial tilt causes seasons."},{id:"moon",name:"Moon",type:"moon",position:[0,0,0],radius:1.26,rotationSpeed:37e-5,orbitSpeed:.37,orbitRadius:10,orbitCenter:[0,0,0],eccentricity:.0549,orbitTilt:.089,axialTilt:.116,textureUrl:"/CelestialNavigator/textures/planets/moon.jpg",diameter:3475,dayLength:"29.5 Earth days",temperature:"-173C to 127C",description:"The Moon is Earth's only natural satellite. It is tidally locked to Earth, meaning the same side always faces us."},{id:"mars",name:"Mars",type:"planet",position:[90,0,0],radius:2.45,rotationSpeed:.0097,orbitSpeed:.0053,orbitRadius:90,orbitCenter:[0,0,0],eccentricity:.094,orbitTilt:.0323,axialTilt:.4398,textureUrl:"/CelestialNavigator/textures/planets/mars.jpg",diameter:6792,dayLength:"24.6 hours",yearLength:"687 Earth days",temperature:"-153C to 20C",description:"Mars is the fourth planet from the Sun. Its reddish appearance is due to iron oxide (rust) on its surface. Its axial tilt is similar to Earth's."},{id:"asteroid-belt",name:"Asteroid Belt",type:"belt",position:[110,0,0],radius:.5,rotationSpeed:.005,orbitSpeed:.07,orbitRadius:110,orbitCenter:[0,0,0],eccentricity:0,orbitTilt:.1,textureUrl:void 0,diameter:"Variable (Ceres: 940 km, Vesta: 525 km)",yearLength:"3-6 Earth years for most asteroids",temperature:"Variable",description:"The asteroid belt is a torus-shaped region between the orbits of Mars and Jupiter, occupied by numerous irregularly shaped bodies called asteroids or minor planets."},{id:"jupiter",name:"Jupiter",type:"planet",position:[130,0,0],radius:11.2,rotationSpeed:.024,orbitSpeed:84e-5,orbitRadius:130,orbitCenter:[0,0,0],eccentricity:.049,orbitTilt:.0227,axialTilt:.0546,textureUrl:"/CelestialNavigator/textures/planets/jupiter.jpg",diameter:142984,dayLength:"9.9 hours",yearLength:"11.9 Earth years",temperature:"-145C (cloud tops)",description:"Jupiter is the fifth planet from the Sun and the largest in the Solar System. Its fast rotation causes a visible equatorial bulge."},{id:"saturn",name:"Saturn",type:"planet",position:[170,0,0],radius:9.45,rotationSpeed:.022,orbitSpeed:34e-5,orbitRadius:170,orbitCenter:[0,0,0],eccentricity:.057,orbitTilt:.0435,axialTilt:.466,textureUrl:"/CelestialNavigator/textures/planets/saturn.jpg",diameter:120536,dayLength:"10.7 hours",yearLength:"29.5 Earth years",temperature:"-178C (cloud tops)",description:"Saturn is the sixth planet from the Sun, known for its spectacular ring system. Like Jupiter, it's a gas giant with a fast rotation period."},{id:"uranus",name:"Uranus",type:"planet",position:[200,0,0],radius:4,rotationSpeed:.014,orbitSpeed:12e-5,orbitRadius:200,orbitCenter:[0,0,0],eccentricity:.046,orbitTilt:.0134,axialTilt:1.7064,textureUrl:"/CelestialNavigator/textures/planets/uranus.jpg",diameter:51118,dayLength:"17.2 hours",yearLength:"84 Earth years",temperature:"-224C (cloud tops)",description:"Uranus is the seventh planet from the Sun. Its extreme axial tilt of 98 degrees means it essentially rotates on its side, likely due to a massive collision."},{id:"neptune",name:"Neptune",type:"planet",position:[230,0,0],radius:3.88,rotationSpeed:.015,orbitSpeed:6e-5,orbitRadius:230,orbitCenter:[0,0,0],eccentricity:.011,orbitTilt:.0309,axialTilt:.4939,textureUrl:"/CelestialNavigator/textures/planets/neptune.jpg",diameter:49528,dayLength:"16.1 hours",yearLength:"165 Earth years",temperature:"-218C (cloud tops)",description:"Neptune is the eighth and farthest known planet from the Sun. Despite being smaller than Uranus, it's more massive and has the strongest winds in the Solar System."},{id:"pluto",name:"Pluto",type:"dwarf",position:[260,0,0],radius:.19,rotationSpeed:.0039,orbitSpeed:4e-5,orbitRadius:260,orbitCenter:[0,0,0],eccentricity:.244,orbitTilt:.2967,axialTilt:2.0856,textureUrl:"/CelestialNavigator/textures/planets/pluto.jpg",diameter:2376,dayLength:"6.4 Earth days",yearLength:"248 Earth years",temperature:"-240C (average)",description:"Pluto is a dwarf planet with the most eccentric and inclined orbit of the former planets. Its orbit is so elliptical that it sometimes comes closer to the Sun than Neptune."},{id:"iss",name:"International Space Station",type:"spacecraft",position:[70,6,0],radius:.4,rotationSpeed:.01,orbitSpeed:16.5,orbitRadius:7,orbitCenter:[0,0,0],eccentricity:3e-4,orbitTilt:.9,description:"The International Space Station is a modular space station in low Earth orbit with an inclination of 51.6 degrees, completing an orbit every 90 minutes."},{id:"jwst",name:"James Webb Telescope",type:"spacecraft",position:[100,10,30],radius:.6,rotationSpeed:.01,orbitSpeed:.055,orbitRadius:25,orbitCenter:[0,0,0],eccentricity:.0035,orbitTilt:.4,description:"The James Webb Space Telescope orbits around the Sun-Earth L2 point, 1.5 million km from Earth, with a 6-month orbital period in a complex 'halo' pattern."},{id:"voyager",name:"Voyager",type:"spacecraft",position:[300,20,150],radius:.04,rotationSpeed:.008,orbitSpeed:.01,orbitRadius:300,orbitCenter:[0,0,0],eccentricity:.2,orbitTilt:.35,description:"The Voyager spacecraft (Voyager 1 and 2) are space probes launched in 1977 that have now traveled beyond our solar system into interstellar space, making them the most distant human-made objects."},{id:"saturn-rings",name:"Saturn's Rings",type:"belt",position:[170,0,0],radius:.2,rotationSpeed:.022,orbitSpeed:34e-5,orbitRadius:170,orbitCenter:[0,0,0],eccentricity:.057,orbitTilt:.0435,textureUrl:void 0,diameter:"Extends from 7,000 to 80,000 km above Saturn's equator",yearLength:"29.5 Earth years",temperature:"-178C",description:"Saturn's rings are composed of billions of particles ranging from tiny dust-sized icy grains to chunks as large as mountains, forming a vast, thin structure around the planet."},{id:"io",name:"Io (Jupiter I)",type:"moon",position:[130,0,0],radius:1,rotationSpeed:.024,orbitSpeed:1.9,orbitRadius:15,orbitCenter:[0,0,0],eccentricity:.004,orbitTilt:.04,textureUrl:"/CelestialNavigator/textures/moons/io.jpg",diameter:3643,temperature:"-155C to 400C (volcanic regions)",description:"Io is the innermost of Jupiter's Galilean moons and the most volcanically active body in the Solar System, with hundreds of active volcanoes and lakes of molten sulfur."},{id:"europa",name:"Europa (Jupiter II)",type:"moon",position:[130,0,0],radius:.9,rotationSpeed:.024,orbitSpeed:1,orbitRadius:18,orbitCenter:[0,0,0],eccentricity:.009,orbitTilt:.06,textureUrl:"/CelestialNavigator/textures/moons/europa.jpg",diameter:3122,temperature:"-171C (average)",description:"Europa has a smooth, icy surface covering a global saltwater ocean, making it one of the most promising places to search for extraterrestrial life in our solar system."},{id:"titan",name:"Titan (Saturn VI)",type:"moon",position:[170,0,0],radius:1.5,rotationSpeed:.022,orbitSpeed:.14,orbitRadius:20,orbitCenter:[0,0,0],eccentricity:.0288,orbitTilt:.34,textureUrl:"/CelestialNavigator/textures/moons/titan.jpg",diameter:5150,temperature:"-179C (average)",description:"Titan is Saturn's largest moon and the only moon in the Solar System with a substantial atmosphere. It has lakes of liquid methane and ethane on its surface."},{id:"kuiper-belt",name:"Kuiper Belt",type:"belt",position:[300,0,0],radius:.3,rotationSpeed:.001,orbitSpeed:.01,orbitRadius:300,orbitCenter:[0,0,0],eccentricity:.2,orbitTilt:.3,textureUrl:void 0,diameter:"30-50 AU from Sun, objects up to 2,400 km diameter",yearLength:"200-500 Earth years",temperature:"-240C to -230C",description:"The Kuiper Belt is a circumstellar disc in the outer Solar System, extending from Neptune's orbit (~30 AU) to 50 AU from the Sun, containing thousands of small icy bodies including Pluto, Eris, and other dwarf planets."},{id:"oort-cloud",name:"Oort Cloud",type:"belt",position:[500,0,0],radius:.2,rotationSpeed:1e-4,orbitSpeed:.002,orbitRadius:500,orbitCenter:[0,0,0],eccentricity:.5,orbitTilt:1,textureUrl:void 0,diameter:"5,000-100,000 AU from Sun",yearLength:"Millions of Earth years",temperature:"Near absolute zero",description:"The Oort Cloud is a theoretical cloud of predominantly icy planetesimals at the edge of our Solar System, about 1,000 times further than the Kuiper Belt and the outer limit of the Sun's gravitational influence."}],p2=()=>{const{camera:n,gl:e}=Un(),t=z.useRef(null),i=z.useRef(new N(0,0,0)),r=z.useRef(.001),s=Nt(C=>C.focusedBody),o=Nt(C=>C.setLoaded),a=Nt(C=>C.cameraDistance),l=Na(C=>C.forward),c=Na(C=>C.backward),h=Na(C=>C.leftward),f=Na(C=>C.rightward),p=Na(C=>C.zoomIn),m=Na(C=>C.zoomOut),y=Na(C=>C.reset),A=2,x=5,g=z.useRef(null);z.useEffect(()=>{const C=R=>{R.ctrlKey&&R.preventDefault()};return document.addEventListener("wheel",C,{passive:!1}),()=>{document.removeEventListener("wheel",C)}},[]),z.useEffect(()=>{const C=setTimeout(()=>{o(!0)},3e3);return()=>clearTimeout(C)},[o]);const _=z.useRef({});z.useEffect(()=>{Gs.forEach(C=>{_.current[C.id]=new N(C.position[0],C.position[1],C.position[2])})},[]),z.useEffect(()=>{if(s){const C=Gs.find(R=>R.id===s);C&&(C.type==="star"?r.current=1e-4:C.type==="planet"?r.current=5e-4:r.current=.001)}else i.current.set(0,0,0),r.current=1e-4},[s]),Nt(C=>C.isPaused),Nt(C=>C.timeScale);const M=Nt(C=>C.simulationTime),w=Nt(C=>C.incrementSimulationTime);return z.useEffect(()=>{e&&(e.setPixelRatio(Math.min(1.5,window.devicePixelRatio)),e.shadowMap.enabled=!1,e.outputColorSpace=In,e.info.autoReset=!1,e.info.reset())},[e]),Bn((C,R)=>{if(!t.current)return;w(R),Gs.forEach(b=>{if(b.orbitSpeed&&b.orbitRadius&&b.orbitCenter){const U=M*b.orbitSpeed*5;let H=0;b.id==="mercury"?H=.12:b.id==="venus"?H=.05:b.id==="earth"?H=0:b.id==="mars"?H=-.03:b.id==="jupiter"?H=.02:b.id==="saturn"?H=-.05:b.id==="uranus"?H=.08:b.id==="neptune"?H=-.06:b.id==="pluto"&&(H=.17);const X=b.orbitCenter[0]+Math.cos(U)*b.orbitRadius,ee=b.orbitCenter[1]+Math.sin(U)*Math.sin(H)*b.orbitRadius,ne=b.orbitCenter[2]+Math.sin(U)*Math.cos(H)*b.orbitRadius;_.current[b.id]=new N(X,ee,ne),s===b.id&&g.current&&g.current.target.set(X,ee,ne)}});const P=s?_.current[s]||new N(0,0,0):new N(0,0,0),B=new N;B.subVectors(P,t.current.position).normalize();const I=new N;if(I.crossVectors(B,t.current.up).normalize(),new N(0,1,0),l&&t.current.position.addScaledVector(B,A*R*50),c&&t.current.position.addScaledVector(B,-A*R*50),h&&t.current.position.addScaledVector(I,-A*R*50),f&&t.current.position.addScaledVector(I,A*R*50),p&&t.current.position.addScaledVector(B,x*R*50),m&&t.current.position.addScaledVector(B,-x*R*50),y)if(s){const b=Gs.find(U=>U.id===s);if(b){const U=(b.radius||1)*5+a,H=_.current[b.id]||new N(b.position[0],b.position[1],b.position[2]);t.current.position.set(H.x+U,H.y+U*.5,H.z+U),g.current&&g.current.target.copy(H)}}else t.current.position.set(0,30,100),g.current&&g.current.target.set(0,0,0)}),z.useEffect(()=>{if(g.current&&s){const C=Gs.find(R=>R.id===s);if(C){const R=_.current[C.id]||new N(C.position[0],C.position[1],C.position[2]);g.current.target.copy(R)}}},[s]),L.jsxs(L.Fragment,{children:[L.jsx(wV,{ref:t,makeDefault:!0,position:[0,30,100],fov:45,near:.1,far:1e4}),L.jsx(EV,{ref:g,enablePan:!0,enableZoom:!0,enableRotate:!0,zoomSpeed:1,rotateSpeed:.8,panSpeed:.8,minDistance:30,maxDistance:1e3,target:[0,0,0],enableDamping:!1,dampingFactor:.05,screenSpacePanning:!1,maxPolarAngle:Math.PI,makeDefault:!0}),L.jsx("ambientLight",{intensity:.5}),L.jsx("pointLight",{position:[0,0,0],intensity:1.5,color:"#FFA726",castShadow:!1}),L.jsx(IV,{radius:1e3,depth:200,count:1500,factor:3,fade:!0,speed:.5}),Gs.map(C=>L.jsx(r5,{id:C.id,position:C.position,rotation:C.rotation,radius:C.radius,textureUrl:C.textureUrl,type:C.type,name:C.name,rotationSpeed:C.rotationSpeed,orbitSpeed:C.orbitSpeed,orbitRadius:C.orbitRadius,orbitCenter:C.orbitCenter,eccentricity:C.eccentricity,orbitTilt:C.orbitTilt,axialTilt:C.axialTilt},C.id)),L.jsx(lx,{id:"iss",name:"ISS",type:"spacecraft",position:[0,0,0],radius:.5,rotationSpeed:.01,orbitSpeed:.6,orbitRadius:8,orbitCenter:[0,0,0],eccentricity:.001,orbitTilt:.8}),L.jsx(lx,{id:"jwst",name:"James Webb Space Telescope",type:"spacecraft",position:[0,0,0],radius:.6,rotationSpeed:.005,orbitSpeed:.05,orbitRadius:20,orbitCenter:[0,0,0],eccentricity:.1,orbitTilt:.2}),L.jsx(lx,{id:"voyager",name:"Voyager",type:"spacecraft",position:[0,0,0],radius:.4,rotationSpeed:.008,orbitSpeed:.01,orbitRadius:300,orbitCenter:[0,0,0],eccentricity:.2,orbitTilt:.35}),L.jsx(s5,{position:[50,10,30]})]})};function m2(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var r=n.length;for(e=0;e<r;e++)n[e]&&(t=m2(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function o5(){for(var n,e,t=0,i="",r=arguments.length;t<r;t++)(n=arguments[t])&&(e=m2(n))&&(i&&(i+=" "),i+=e);return i}const ES="-",a5=n=>{const e=c5(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:i}=n;return{getClassGroupId:o=>{const a=o.split(ES);return a[0]===""&&a.length!==1&&a.shift(),g2(a,e)||l5(o)},getConflictingClassGroupIds:(o,a)=>{const l=t[o]||[];return a&&i[o]?[...l,...i[o]]:l}}},g2=(n,e)=>{var o;if(n.length===0)return e.classGroupId;const t=n[0],i=e.nextPart.get(t),r=i?g2(n.slice(1),i):void 0;if(r)return r;if(e.validators.length===0)return;const s=n.join(ES);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId},zb=/^\[(.+)\]$/,l5=n=>{if(zb.test(n)){const e=zb.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},c5=n=>{const{theme:e,prefix:t}=n,i={nextPart:new Map,validators:[]};return d5(Object.entries(n.classGroups),t).forEach(([s,o])=>{L_(o,i,s,e)}),i},L_=(n,e,t,i)=>{n.forEach(r=>{if(typeof r=="string"){const s=r===""?e:Hb(e,r);s.classGroupId=t;return}if(typeof r=="function"){if(u5(r)){L_(r(i),e,t,i);return}e.validators.push({validator:r,classGroupId:t});return}Object.entries(r).forEach(([s,o])=>{L_(o,Hb(e,s),t,i)})})},Hb=(n,e)=>{let t=n;return e.split(ES).forEach(i=>{t.nextPart.has(i)||t.nextPart.set(i,{nextPart:new Map,validators:[]}),t=t.nextPart.get(i)}),t},u5=n=>n.isThemeGetter,d5=(n,e)=>e?n.map(([t,i])=>{const r=i.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[t,r]}):n,h5=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,i=new Map;const r=(s,o)=>{t.set(s,o),e++,e>n&&(e=0,i=t,t=new Map)};return{get(s){let o=t.get(s);if(o!==void 0)return o;if((o=i.get(s))!==void 0)return r(s,o),o},set(s,o){t.has(s)?t.set(s,o):r(s,o)}}},v2="!",f5=n=>{const{separator:e,experimentalParseClassName:t}=n,i=e.length===1,r=e[0],s=e.length,o=a=>{const l=[];let c=0,h=0,f;for(let x=0;x<a.length;x++){let g=a[x];if(c===0){if(g===r&&(i||a.slice(x,x+s)===e)){l.push(a.slice(h,x)),h=x+s;continue}if(g==="/"){f=x;continue}}g==="["?c++:g==="]"&&c--}const p=l.length===0?a:a.substring(h),m=p.startsWith(v2),y=m?p.substring(1):p,A=f&&f>h?f-h:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:y,maybePostfixModifierPosition:A}};return t?a=>t({className:a,parseClassName:o}):o},p5=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(i=>{i[0]==="["?(e.push(...t.sort(),i),t=[]):t.push(i)}),e.push(...t.sort()),e},m5=n=>({cache:h5(n.cacheSize),parseClassName:f5(n),...a5(n)}),g5=/\s+/,v5=(n,e)=>{const{parseClassName:t,getClassGroupId:i,getConflictingClassGroupIds:r}=e,s=[],o=n.trim().split(g5);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:h,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:m}=t(c);let y=!!m,A=i(y?p.substring(0,m):p);if(!A){if(!y){a=c+(a.length>0?" "+a:a);continue}if(A=i(p),!A){a=c+(a.length>0?" "+a:a);continue}y=!1}const x=p5(h).join(":"),g=f?x+v2:x,_=g+A;if(s.includes(_))continue;s.push(_);const M=r(A,y);for(let w=0;w<M.length;++w){const C=M[w];s.push(g+C)}a=c+(a.length>0?" "+a:a)}return a};function y5(){let n=0,e,t,i="";for(;n<arguments.length;)(e=arguments[n++])&&(t=y2(e))&&(i&&(i+=" "),i+=t);return i}const y2=n=>{if(typeof n=="string")return n;let e,t="";for(let i=0;i<n.length;i++)n[i]&&(e=y2(n[i]))&&(t&&(t+=" "),t+=e);return t};function x5(n,...e){let t,i,r,s=o;function o(l){const c=e.reduce((h,f)=>f(h),n());return t=m5(c),i=t.cache.get,r=t.cache.set,s=a,a(l)}function a(l){const c=i(l);if(c)return c;const h=v5(l,t);return r(l,h),h}return function(){return s(y5.apply(null,arguments))}}const an=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},x2=/^\[(?:([a-z-]+):)?(.+)\]$/i,_5=/^\d+\/\d+$/,A5=new Set(["px","full","screen"]),S5=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,M5=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,w5=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,E5=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,b5=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ns=n=>Oc(n)||A5.has(n)||_5.test(n),Bo=n=>du(n,"length",D5),Oc=n=>!!n&&!Number.isNaN(Number(n)),cx=n=>du(n,"number",Oc),ed=n=>!!n&&Number.isInteger(Number(n)),C5=n=>n.endsWith("%")&&Oc(n.slice(0,-1)),Et=n=>x2.test(n),Lo=n=>S5.test(n),T5=new Set(["length","size","percentage"]),R5=n=>du(n,T5,_2),I5=n=>du(n,"position",_2),P5=new Set(["image","url"]),B5=n=>du(n,P5,F5),L5=n=>du(n,"",N5),td=()=>!0,du=(n,e,t)=>{const i=x2.exec(n);return i?i[1]?typeof e=="string"?i[1]===e:e.has(i[1]):t(i[2]):!1},D5=n=>M5.test(n)&&!w5.test(n),_2=()=>!1,N5=n=>E5.test(n),F5=n=>b5.test(n),U5=()=>{const n=an("colors"),e=an("spacing"),t=an("blur"),i=an("brightness"),r=an("borderColor"),s=an("borderRadius"),o=an("borderSpacing"),a=an("borderWidth"),l=an("contrast"),c=an("grayscale"),h=an("hueRotate"),f=an("invert"),p=an("gap"),m=an("gradientColorStops"),y=an("gradientColorStopPositions"),A=an("inset"),x=an("margin"),g=an("opacity"),_=an("padding"),M=an("saturate"),w=an("scale"),C=an("sepia"),R=an("skew"),P=an("space"),B=an("translate"),I=()=>["auto","contain","none"],b=()=>["auto","hidden","clip","visible","scroll"],U=()=>["auto",Et,e],H=()=>[Et,e],X=()=>["",Ns,Bo],ee=()=>["auto",Oc,Et],ne=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],te=()=>["solid","dashed","dotted","double","none"],le=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],D=()=>["start","end","center","between","around","evenly","stretch"],W=()=>["","0",Et],j=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Z=()=>[Oc,Et];return{cacheSize:500,separator:":",theme:{colors:[td],spacing:[Ns,Bo],blur:["none","",Lo,Et],brightness:Z(),borderColor:[n],borderRadius:["none","","full",Lo,Et],borderSpacing:H(),borderWidth:X(),contrast:Z(),grayscale:W(),hueRotate:Z(),invert:W(),gap:H(),gradientColorStops:[n],gradientColorStopPositions:[C5,Bo],inset:U(),margin:U(),opacity:Z(),padding:H(),saturate:Z(),scale:Z(),sepia:W(),skew:Z(),space:H(),translate:H()},classGroups:{aspect:[{aspect:["auto","square","video",Et]}],container:["container"],columns:[{columns:[Lo]}],"break-after":[{"break-after":j()}],"break-before":[{"break-before":j()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ne(),Et]}],overflow:[{overflow:b()}],"overflow-x":[{"overflow-x":b()}],"overflow-y":[{"overflow-y":b()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[A]}],"inset-x":[{"inset-x":[A]}],"inset-y":[{"inset-y":[A]}],start:[{start:[A]}],end:[{end:[A]}],top:[{top:[A]}],right:[{right:[A]}],bottom:[{bottom:[A]}],left:[{left:[A]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ed,Et]}],basis:[{basis:U()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Et]}],grow:[{grow:W()}],shrink:[{shrink:W()}],order:[{order:["first","last","none",ed,Et]}],"grid-cols":[{"grid-cols":[td]}],"col-start-end":[{col:["auto",{span:["full",ed,Et]},Et]}],"col-start":[{"col-start":ee()}],"col-end":[{"col-end":ee()}],"grid-rows":[{"grid-rows":[td]}],"row-start-end":[{row:["auto",{span:[ed,Et]},Et]}],"row-start":[{"row-start":ee()}],"row-end":[{"row-end":ee()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Et]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Et]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...D()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...D(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...D(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[_]}],px:[{px:[_]}],py:[{py:[_]}],ps:[{ps:[_]}],pe:[{pe:[_]}],pt:[{pt:[_]}],pr:[{pr:[_]}],pb:[{pb:[_]}],pl:[{pl:[_]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Et,e]}],"min-w":[{"min-w":[Et,e,"min","max","fit"]}],"max-w":[{"max-w":[Et,e,"none","full","min","max","fit","prose",{screen:[Lo]},Lo]}],h:[{h:[Et,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Et,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Et,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Et,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Lo,Bo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",cx]}],"font-family":[{font:[td]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Et]}],"line-clamp":[{"line-clamp":["none",Oc,cx]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ns,Et]}],"list-image":[{"list-image":["none",Et]}],"list-style-type":[{list:["none","disc","decimal",Et]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...te(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ns,Bo]}],"underline-offset":[{"underline-offset":["auto",Ns,Et]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:H()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Et]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Et]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ne(),I5]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",R5]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},B5]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:[...te(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:te()}],"border-color":[{border:[r]}],"border-color-x":[{"border-x":[r]}],"border-color-y":[{"border-y":[r]}],"border-color-s":[{"border-s":[r]}],"border-color-e":[{"border-e":[r]}],"border-color-t":[{"border-t":[r]}],"border-color-r":[{"border-r":[r]}],"border-color-b":[{"border-b":[r]}],"border-color-l":[{"border-l":[r]}],"divide-color":[{divide:[r]}],"outline-style":[{outline:["",...te()]}],"outline-offset":[{"outline-offset":[Ns,Et]}],"outline-w":[{outline:[Ns,Bo]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:X()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[Ns,Bo]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",Lo,L5]}],"shadow-color":[{shadow:[td]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":[...le(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":le()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[i]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Lo,Et]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[M]}],sepia:[{sepia:[C]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[i]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[M]}],"backdrop-sepia":[{"backdrop-sepia":[C]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Et]}],duration:[{duration:Z()}],ease:[{ease:["linear","in","out","in-out",Et]}],delay:[{delay:Z()}],animate:[{animate:["none","spin","ping","pulse","bounce",Et]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[w]}],"scale-x":[{"scale-x":[w]}],"scale-y":[{"scale-y":[w]}],rotate:[{rotate:[ed,Et]}],"translate-x":[{"translate-x":[B]}],"translate-y":[{"translate-y":[B]}],"skew-x":[{"skew-x":[R]}],"skew-y":[{"skew-y":[R]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Et]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Et]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":H()}],"scroll-mx":[{"scroll-mx":H()}],"scroll-my":[{"scroll-my":H()}],"scroll-ms":[{"scroll-ms":H()}],"scroll-me":[{"scroll-me":H()}],"scroll-mt":[{"scroll-mt":H()}],"scroll-mr":[{"scroll-mr":H()}],"scroll-mb":[{"scroll-mb":H()}],"scroll-ml":[{"scroll-ml":H()}],"scroll-p":[{"scroll-p":H()}],"scroll-px":[{"scroll-px":H()}],"scroll-py":[{"scroll-py":H()}],"scroll-ps":[{"scroll-ps":H()}],"scroll-pe":[{"scroll-pe":H()}],"scroll-pt":[{"scroll-pt":H()}],"scroll-pr":[{"scroll-pr":H()}],"scroll-pb":[{"scroll-pb":H()}],"scroll-pl":[{"scroll-pl":H()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Et]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[Ns,Bo,cx]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},O5=x5(U5);function On(...n){return O5(o5(n))}const k5=()=>{const n=Nt(s=>s.isLoaded),[e,t]=z.useState(0),[i,r]=z.useState(!0);return z.useEffect(()=>{if(n){const s=setInterval(()=>{t(o=>o>=100?(clearInterval(s),setTimeout(()=>{r(!1)},500),100):Math.min(o+5,100))},50);return()=>clearInterval(s)}else{const s=setInterval(()=>{t(o=>o>=90?(clearInterval(s),90):o+Math.random()*5)},200);return()=>clearInterval(s)}},[n]),i?L.jsxs("div",{className:On("fixed inset-0 bg-[#000000] z-50 flex flex-col items-center justify-center","transition-opacity duration-1000",e>=100?"opacity-0":"opacity-100"),children:[L.jsx("h1",{className:"text-[#FFA726] text-5xl md:text-6xl font-bold mb-6 text-center",children:"Cosmic Explorer"}),L.jsx("div",{className:"w-64 md:w-80 bg-[#212121] rounded-full h-3 mb-4 overflow-hidden",children:L.jsx("div",{className:"h-full bg-[#4FC3F7] rounded-full transition-all duration-300 ease-out",style:{width:`${e}%`}})}),L.jsx("p",{className:"text-[#4FC3F7] text-lg",children:e<100?"Loading space assets...":"Launching exploration..."}),L.jsx("div",{className:"mt-10 flex justify-center space-x-1",children:Array.from({length:3}).map((s,o)=>L.jsx("div",{className:"w-3 h-3 rounded-full bg-[#1A237E] animate-pulse",style:{animationDelay:`${o*.2}s`,animationDuration:"1s"}},o))})]}):null},z5=()=>{const[n,e]=z.useState(!0),t=Nt(a=>a.isLoaded),i=Nt(a=>a.setCameraDistance),r=Nt(a=>a.cameraDistance),{isMuted:s,toggleMute:o}=f2();return z.useEffect(()=>{if(t){const a=setTimeout(()=>{e(!1)},5e3);return()=>clearTimeout(a)}},[t]),z.useEffect(()=>{const a=()=>{e(!0);const l=setTimeout(()=>{e(!1)},3e3);return()=>clearTimeout(l)};return window.addEventListener("mousemove",a),()=>window.removeEventListener("mousemove",a)},[]),L.jsxs("div",{className:On("absolute bottom-6 left-1/2 transform -translate-x-1/2 p-4 bg-[#111111] bg-opacity-70","backdrop-blur-md rounded-lg border border-[#1A237E] transition-opacity duration-300",n?"opacity-100":"opacity-0"),children:[L.jsxs("div",{className:"flex space-x-4 items-center",children:[L.jsxs("div",{className:"flex flex-col",children:[L.jsx("span",{className:"text-[#4FC3F7] text-xs mb-1",children:"Camera Distance"}),L.jsx("input",{type:"range",min:"10",max:"200",value:r,onChange:a=>i(Number(a.target.value)),className:"w-40 accent-[#FFA726]"})]}),L.jsxs("button",{onClick:o,className:On("px-3 py-2 rounded-md bg-[#424242] hover:bg-[#616161] transition-colors","border border-[#1A237E] flex items-center gap-2"),children:[L.jsxs("span",{className:"text-white text-sm",children:[s?"Unmute":"Mute"," Sound"]}),L.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-[#4FC3F7]",children:s?L.jsxs(L.Fragment,{children:[L.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"}),L.jsx("path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12M15 9.34V4a3 3 0 0 0-5.94-.6"}),L.jsx("path",{d:"M17 16.95A7 7 0 0 1 5 12v-2m14 0v2a7 7 0 0 1-.11 1.23"}),L.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"23"}),L.jsx("line",{x1:"8",y1:"23",x2:"16",y2:"23"})]}):L.jsxs(L.Fragment,{children:[L.jsx("path",{d:"M3 10v4a1 1 0 0 0 1 1h3l3.29 3.29c.63.63 1.71.18 1.71-.71V6.41c0-.89-1.08-1.34-1.71-.71L7 9H4a1 1 0 0 0-1 1z"}),L.jsx("path",{d:"M16.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z"})]})})]})]}),L.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-x-2 gap-y-1 text-xs text-white",children:[L.jsxs("div",{className:"flex items-center",children:[L.jsx("kbd",{className:"px-2 py-1 bg-[#424242] rounded mr-2",children:"W/"}),L.jsx("span",{children:"Move Forward"})]}),L.jsxs("div",{className:"flex items-center",children:[L.jsx("kbd",{className:"px-2 py-1 bg-[#424242] rounded mr-2",children:"S/"}),L.jsx("span",{children:"Move Backward"})]}),L.jsxs("div",{className:"flex items-center",children:[L.jsx("kbd",{className:"px-2 py-1 bg-[#424242] rounded mr-2",children:"A/"}),L.jsx("span",{children:"Move Left"})]}),L.jsxs("div",{className:"flex items-center",children:[L.jsx("kbd",{className:"px-2 py-1 bg-[#424242] rounded mr-2",children:"D/"}),L.jsx("span",{children:"Move Right"})]}),L.jsxs("div",{className:"flex items-center",children:[L.jsx("kbd",{className:"px-2 py-1 bg-[#424242] rounded mr-2",children:"E"}),L.jsx("span",{children:"Zoom In"})]}),L.jsxs("div",{className:"flex items-center",children:[L.jsx("kbd",{className:"px-2 py-1 bg-[#424242] rounded mr-2",children:"Q"}),L.jsx("span",{children:"Zoom Out"})]}),L.jsxs("div",{className:"flex items-center",children:[L.jsx("kbd",{className:"px-2 py-1 bg-[#424242] rounded mr-2",children:"R"}),L.jsx("span",{children:"Reset Camera"})]}),L.jsxs("div",{className:"flex items-center",children:[L.jsx("kbd",{className:"px-2 py-1 bg-[#424242] rounded mr-2",children:"T"}),L.jsx("span",{children:"Toggle Spacecraft"})]})]})]})},H5=()=>{const n=Nt(s=>s.focusedBody),[e,t]=z.useState(null),[i,r]=z.useState(!1);return z.useEffect(()=>{if(n){const s=Gs.find(o=>o.id===n);t(s),r(!0)}else r(!1)},[n]),!i||!e?null:L.jsxs("div",{className:On("absolute bottom-6 right-6 p-6 w-80 bg-[#111111] bg-opacity-70 backdrop-blur-md","text-white rounded-lg border border-[#1A237E] shadow-lg transition-all duration-300","transform origin-bottom-right hover:scale-105"),children:[L.jsx("h2",{className:"text-[#FFA726] text-2xl font-bold mb-3",children:e.name}),L.jsxs("div",{className:"space-y-2",children:[L.jsxs("div",{className:"flex justify-between",children:[L.jsx("span",{className:"text-[#4FC3F7]",children:"Type:"}),L.jsx("span",{className:"text-white capitalize",children:e.type})]}),e.diameter&&L.jsxs("div",{className:"flex justify-between",children:[L.jsx("span",{className:"text-[#4FC3F7]",children:"Diameter:"}),L.jsxs("span",{className:"text-white",children:[e.diameter," km"]})]}),e.dayLength&&L.jsxs("div",{className:"flex justify-between",children:[L.jsx("span",{className:"text-[#4FC3F7]",children:"Day Length:"}),L.jsx("span",{className:"text-white",children:e.dayLength})]}),e.yearLength&&L.jsxs("div",{className:"flex justify-between",children:[L.jsx("span",{className:"text-[#4FC3F7]",children:"Year Length:"}),L.jsx("span",{className:"text-white",children:e.yearLength})]}),e.temperature&&L.jsxs("div",{className:"flex justify-between",children:[L.jsx("span",{className:"text-[#4FC3F7]",children:"Temperature:"}),L.jsx("span",{className:"text-white",children:e.temperature})]})]}),e.description&&L.jsx("div",{className:"mt-4 border-t border-[#1A237E] pt-3",children:L.jsx("p",{className:"text-white text-sm leading-relaxed",children:e.description})}),L.jsx("button",{className:"mt-4 w-full py-2 bg-[#1A237E] hover:bg-[#283593] text-white rounded-md transition-colors",onClick:()=>r(!1),children:"Close"})]})};function G5(){Nt(e=>e.isEducationalPanelOpen);const n=Nt(e=>e.toggleEducationalPanel);return L.jsxs("button",{onClick:n,className:"flex items-center justify-center w-full p-2 bg-[#FFA726] hover:bg-[#FB8C00] rounded-md transition-all duration-150 text-white font-medium focus:outline-none focus:ring-2 focus:ring-[#4FC3F7] focus:ring-opacity-50",title:"Space Education Center",children:[L.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-2",children:[L.jsx("path",{d:"M12 14l9-5-9-5-9 5 9 5z"}),L.jsx("path",{d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),L.jsx("path",{d:"M12 14l-6.16-3.422a12.083 12.083 0 00-.665 6.479A11.952 11.952 0 0112 20.055a11.952 11.952 0 016.824-2.998a12.078 12.078 0 00-.665-6.479L12 14z"})]}),"Space Education Center"]})}const V5=()=>{const[n,e]=z.useState(!1),t=Nt(a=>a.setFocusedBody),i=Nt(a=>a.focusedBody),r=Nt(a=>a.isLoaded),s=Gs.reduce((a,l)=>(a[l.type]||(a[l.type]=[]),a[l.type].push(l),a),{}),o=["star","planet","moon","dwarf","spacecraft"];return r?L.jsxs("div",{className:"absolute top-6 left-6",children:[L.jsx("button",{onClick:()=>e(!n),className:On("w-12 h-12 rounded-full flex items-center justify-center","bg-[#1A237E] hover:bg-[#283593] text-white transition-colors","border border-[#4FC3F7] shadow-lg"),children:L.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[L.jsx("circle",{cx:"12",cy:"12",r:"10"}),L.jsx("circle",{cx:"12",cy:"12",r:"4"}),L.jsx("line",{x1:"4.93",y1:"4.93",x2:"9.17",y2:"9.17"}),L.jsx("line",{x1:"14.83",y1:"14.83",x2:"19.07",y2:"19.07"}),L.jsx("line",{x1:"14.83",y1:"9.17",x2:"19.07",y2:"4.93"}),L.jsx("line",{x1:"4.93",y1:"19.07",x2:"9.17",y2:"14.83"})]})}),n&&L.jsxs("div",{className:On("mt-2 p-4 bg-[#111111] bg-opacity-80 backdrop-blur-md rounded-lg","border border-[#1A237E] w-64 shadow-lg"),children:[L.jsxs("div",{className:"flex justify-between items-center mb-3",children:[L.jsx("h2",{className:"text-[#FFA726] text-lg font-bold",children:"Navigation"}),L.jsx("button",{onClick:()=>e(!1),className:"text-[#4FC3F7] hover:text-white transition-colors",children:L.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[L.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),L.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),L.jsx("div",{className:"space-y-3",children:o.map(a=>!s[a]||s[a].length===0?null:L.jsxs("div",{children:[L.jsx("h3",{className:"text-[#4FC3F7] text-sm font-semibold mb-1 capitalize",children:a==="dwarf"?"Dwarf Planets":a+"s"}),L.jsx("div",{className:"space-y-1",children:s[a].map(l=>L.jsx("button",{onClick:()=>{t(l.id)},className:On("w-full text-left px-3 py-1.5 rounded-md text-sm transition-colors",i===l.id?"bg-[#1A237E] text-white":"hover:bg-[#424242] text-gray-200 bg-[#212121]"),children:l.name},l.id))})]},a))}),L.jsxs("div",{className:"flex flex-col space-y-2 mt-3",children:[L.jsx("button",{onClick:()=>t(null),className:On("w-full py-2 bg-[#1A237E] hover:bg-[#283593] text-white rounded-md transition-colors","border border-[#1A237E]"),children:"Overview"}),L.jsx("div",{className:"w-full",children:L.jsx(G5,{})})]})]})]}):null},W5=()=>{const[n,e]=z.useState(!0),t=Nt(c=>c.isPaused),i=Nt(c=>c.timeScale),r=Nt(c=>c.setIsPaused),s=Nt(c=>c.setTimeScale),o=Nt(c=>c.isLoaded);z.useEffect(()=>{if(o){const c=setTimeout(()=>{e(!1)},5e3);return()=>clearTimeout(c)}},[o]),z.useEffect(()=>{const c=()=>{e(!0);const h=setTimeout(()=>{e(!1)},3e3);return()=>clearTimeout(h)};return window.addEventListener("mousemove",c),()=>window.removeEventListener("mousemove",c)},[]);const a=[{label:"0.25x",value:.25},{label:"0.5x",value:.5},{label:"1x",value:1},{label:"2x",value:2},{label:"5x",value:5},{label:"10x",value:10}],l=()=>{r(!t)};return L.jsxs("div",{className:On("absolute top-6 right-6 p-3 bg-[#111111] bg-opacity-70","backdrop-blur-md rounded-lg border border-[#1A237E] transition-opacity duration-300",n?"opacity-100":"opacity-0"),children:[L.jsxs("div",{className:"flex items-center gap-3",children:[L.jsx("button",{onClick:l,className:On("w-10 h-10 rounded-full flex items-center justify-center","border border-[#1A237E] transition-colors",t?"bg-[#FFA726] text-black":"bg-[#1A237E] text-white"),title:t?"Resume":"Pause",children:t?L.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:L.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}):L.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[L.jsx("rect",{x:"6",y:"4",width:"4",height:"16"}),L.jsx("rect",{x:"14",y:"4",width:"4",height:"16"})]})}),L.jsxs("div",{className:"flex flex-col",children:[L.jsx("span",{className:"text-[#4FC3F7] text-xs mb-1",children:"Time Scale"}),L.jsx("div",{className:"flex space-x-1",children:a.map(c=>L.jsx("button",{onClick:()=>s(c.value),className:On("px-2 py-1 text-xs rounded transition-colors",i===c.value?"bg-[#1A237E] text-white":"bg-[#424242] text-gray-300 hover:bg-[#616161]"),children:c.label},c.value))})]})]}),L.jsx("div",{className:"mt-2 text-center text-xs text-[#4FC3F7]",children:t?"Simulation Paused":`Simulation running at ${i}x speed`})]})},Gb=[{id:"sun",name:"The Sun",type:"Star",overview:"The Sun is the star at the center of our Solar System. It is a nearly perfect sphere of hot plasma, heated to incandescence by nuclear fusion reactions in its core. The Sun radiates energy mainly as light, ultraviolet, and infrared radiation, and is the most important source of energy for life on Earth.",composition:"The Sun is composed primarily of hydrogen (73%) and helium (25%), with the remaining 2% consisting of heavier elements such as oxygen, carbon, neon, and iron.",atmosphere:"The Sun's atmosphere consists of the photosphere (the visible surface), the chromosphere (a thin layer above the photosphere), and the corona (the extended outer atmosphere).",notableFeatures:["Solar flares - sudden, intense brightening on the Sun's surface, often followed by a coronal mass ejection","Sunspots - temporarily dark areas on the Sun's photosphere that appear dark because they are cooler than surrounding areas","Solar wind - a stream of charged particles released from the Sun's corona, which influences Earth's magnetosphere","Core temperature of about 15 million degrees Celsius (27 million degrees Fahrenheit)","Surface temperature of about 5,500 degrees Celsius (9,940 degrees Fahrenheit)"],explorationHistory:[{title:"Early Observations",content:"Humans have observed the Sun since prehistoric times. Many ancient civilizations, including the Egyptians and Aztecs, considered it a deity. Galileo Galilei was one of the first to observe sunspots through a telescope in 1610."},{title:"Solar and Heliospheric Observatory (SOHO)",content:"Launched in 1995, SOHO is a joint mission between NASA and ESA. It has provided valuable data about the Sun's internal structure, outer atmosphere, solar wind, and solar activities.",imageUrl:"/images/educational/soho.jpg"},{title:"Parker Solar Probe",content:"Launched in 2018, NASA's Parker Solar Probe will fly closer to the Sun than any previous spacecraft. It aims to trace how energy and heat move through the Sun's corona and explore what accelerates the solar wind.",imageUrl:"/images/educational/parker.jpg"},{title:"Solar Orbiter",content:"Launched in 2020, the ESA-led Solar Orbiter mission will provide close-up, high-latitude observations of the Sun to better understand the solar wind, the heliospheric magnetic field, solar energetic particles, and the Sun's polar regions."}],funFacts:["The Sun is about 4.6 billion years old and is expected to remain relatively stable for another 5 billion years.","The Sun makes up 99.86% of the mass of the Solar System.","Light from the Sun takes about 8 minutes and 20 seconds to reach Earth.","Every second, the Sun converts about 600 million tons of hydrogen into helium.","The Sun is a yellow dwarf star, classified as a G2V star, with G2 indicating its surface temperature and V representing that it is in the main sequence."]},{id:"mercury",name:"Mercury",type:"Planet",overview:"Mercury is the smallest and innermost planet in the Solar System. It orbits the Sun every 88 days, the fastest of all the planets. Despite being close to the Sun, it is not the hottest planet (Venus is hotter due to its dense atmosphere). Mercury has a large iron core and a very thin atmosphere.",composition:"Mercury is primarily composed of iron, with a thin silicate mantle and crust. Its iron core makes up about 60% of its mass, higher than any other major planet in the Solar System.",atmosphere:"Mercury has a very thin, almost negligible atmosphere (exosphere) consisting mainly of oxygen, sodium, hydrogen, helium, and potassium. This atmosphere is constantly being lost and replenished from various sources.",surfaceFeatures:"Mercury's surface is heavily cratered, similar to the Moon, with smooth plains and no plate tectonics. It has cliff-like escarpments called 'rupes' and valleys called 'valles'. The Caloris Basin is one of the largest impact craters in the Solar System.",notableFeatures:["Extreme temperature variations ranging from -173C (-280F) at night to 427C (800F) during the day","Caloris Basin, a massive impact crater about 1,550 km in diameter","The presence of ice in permanently shadowed craters at the poles","A global magnetic field, though weaker than Earth's","A 3:2 spin-orbit resonance, meaning it rotates three times for every two orbits around the Sun"],explorationHistory:[{title:"Mariner 10",content:"Launched in 1973, NASA's Mariner 10 was the first spacecraft to visit Mercury. It flew past Mercury three times in 1974-1975 and mapped about 45% of the planet's surface.",imageUrl:"/images/educational/mariner10.jpg"},{title:"MESSENGER",content:"NASA's MESSENGER (MErcury Surface, Space ENvironment, GEochemistry, and Ranging) orbited Mercury from 2011 to 2015. It provided comprehensive data about Mercury's surface, geology, magnetic field, and exosphere.",imageUrl:"/images/educational/messenger.jpg"},{title:"BepiColombo",content:"Launched in 2018, BepiColombo is a joint mission between ESA and JAXA. It consists of two orbiters that will study Mercury's composition, geophysics, atmosphere, magnetosphere, and history. It is scheduled to reach Mercury in 2025.",imageUrl:"/images/educational/bepicolombo.jpg"}],funFacts:["A day on Mercury (from noon to noon) lasts about 176 Earth days, while its year is just 88 Earth days.","Mercury is gradually slowing down; in about 5 billion years, it will be tidally locked with the Sun.","Mercury is shrinking! As its iron core cools and contracts, the planet's diameter has decreased by about 14 kilometers.","Despite being closer to the Sun, Mercury's surface can be colder than Mars at night because it has almost no atmosphere to retain heat.","Mercury's orbit is the most eccentric (oval-shaped) of all the planets, and it has the highest orbital inclination relative to Earth's orbit."]},{id:"venus",name:"Venus",type:"Planet",overview:"Venus is the second planet from the Sun and Earth's closest planetary neighbor. It's a terrestrial planet similar in size and composition to Earth, but with a dense, toxic atmosphere of carbon dioxide and clouds of sulfuric acid. The extreme greenhouse effect makes it the hottest planet in our solar system, despite being farther from the Sun than Mercury.",composition:"Venus is composed of a central iron core, a rocky mantle, and a silicate crust. Its composition is believed to be similar to Earth's, but with less water and more carbon dioxide.",atmosphere:"Venus has an extremely dense atmosphere consisting of 96% carbon dioxide, 3.5% nitrogen, and traces of other gases. The atmospheric pressure at the surface is about 92 times that of Earth's - equivalent to the pressure found 900 m (3,000 ft) underwater on Earth. Its thick cloud layers of sulfuric acid reflect light, making it the brightest natural object in Earth's night sky after the Moon.",surfaceFeatures:"The surface of Venus features vast volcanic plains, highland regions, and numerous large volcanoes. It has few impact craters, suggesting a relatively young surface that has been reshaped by volcanic activity. Notable features include Maxwell Montes, the highest mountain on Venus, and extensive lava flows.",notableFeatures:["Surface temperature of about 462C (864F), hot enough to melt lead","Atmospheric pressure at the surface is 92 times that of Earth","Rotates in the opposite direction to most planets (retrograde rotation)","A day on Venus is longer than its year (243 Earth days vs. 225 Earth days)","No magnetic field despite its similar size to Earth"],explorationHistory:[{title:"Early Soviet Missions",content:"The Soviet Union's Venera program (1961-1983) included the first spacecraft to land on another planet. Venera 7 was the first to make a soft landing on Venus in 1970, and Venera 9 provided the first images from the surface in 1975.",imageUrl:"/images/educational/venera.jpg"},{title:"NASA Missions",content:"NASA's Mariner 2 was the first successful planetary flyby mission in 1962. The Pioneer Venus missions (1978) studied the atmosphere and mapped the surface using radar. Magellan (1989-1994) created the first global radar map of Venus, revealing its surface features hidden beneath the clouds.",imageUrl:"/images/educational/magellan.jpg"},{title:"Venus Express",content:"ESA's Venus Express orbited Venus from 2006 to 2014, studying its atmosphere, plasma environment, and surface. It confirmed lightning in Venus's atmosphere and discovered evidence of recent volcanic activity.",imageUrl:"/images/educational/venus_express.jpg"},{title:"Akatsuki",content:"JAXA's Akatsuki (launched in 2010) is currently orbiting Venus, studying its meteorology and searching for evidence of active volcanoes and lightning."}],funFacts:["Venus rotates so slowly that its day (243 Earth days) is longer than its year (225 Earth days).","If you stood on Venus, the Sun would rise in the west and set in the east due to its retrograde rotation.","Venus has more volcanoes than any other planet in our solar system, with over 1,600 major volcanoes.","The atmospheric pressure on Venus's surface is equivalent to being about 900 meters (3,000 feet) underwater on Earth.","Despite its harsh conditions now, Venus may have had oceans and been habitable for billions of years before undergoing a runaway greenhouse effect."]},{id:"earth",name:"Earth",type:"Planet",overview:"Earth is the third planet from the Sun and the only astronomical object known to harbor life. About 71% of Earth's surface is covered with water, with the remaining 29% consisting of continents and islands. Earth's atmosphere, which supports life, consists primarily of nitrogen and oxygen.",composition:"Earth has an inner core, outer core, mantle, and crust. The inner core is solid iron, while the outer core is liquid iron mixed with nickel. The mantle consists of semi-solid rock, and the crust is Earth's outer layer made up of solid rocks and minerals.",atmosphere:"Earth's atmosphere consists of 78% nitrogen, 21% oxygen, and 1% other gases including argon, carbon dioxide, and water vapor. The atmosphere protects Earth from harmful solar radiation and regulates temperature through the greenhouse effect.",surfaceFeatures:"Earth has diverse terrains including mountains, plains, deserts, forests, tundras, and bodies of water. Plate tectonics shapes the surface through the movement of large sections of the crust, creating mountain ranges and ocean trenches.",moons:["The Moon - Earth's only natural satellite, about 1/4 of Earth's diameter and formed around 4.5 billion years ago, likely from a massive collision with a Mars-sized body."],notableFeatures:["The only known planet to support life","71% of surface covered by liquid water","Strong magnetic field that protects against solar radiation","Active plate tectonics that constantly reshape the surface","Diverse ecosystems spanning from deep oceans to high mountains"],explorationHistory:[{title:"First View from Space",content:"The first photographs of Earth from space were taken by the V-2 rockets launched in the late 1940s. The first full-disk image of Earth was taken by the ATS-3 satellite in 1967.",imageUrl:"/images/educational/earth_from_space.jpg"},{title:"Apollo Program",content:"NASA's Apollo missions provided the first human observations of Earth from space and the iconic 'Earthrise' photo taken by Apollo 8 in 1968. The 'Blue Marble' photo from Apollo 17 in 1972 became one of the most reproduced images in history.",imageUrl:"/images/educational/blue_marble.jpg"},{title:"Earth Observation Satellites",content:"Numerous satellites monitor Earth's weather, climate, oceans, land, and atmosphere. Notable programs include NASA's Landsat series (since 1972), which provides the longest continuous space-based record of Earth's land, and the European Space Agency's Copernicus program.",imageUrl:"/images/educational/landsat.jpg"},{title:"International Space Station",content:"The ISS, continuously occupied since 2000, serves as a platform for Earth observation and research on how living in space affects humans. Astronauts on the ISS take thousands of photographs of Earth, documenting changes over time.",imageUrl:"/images/educational/iss_earth.jpg"}],funFacts:["Earth is the only planet not named after a god or goddess from Greek or Roman mythology.","Earth's rotation is gradually slowing at approximately 17 milliseconds per hundred years.","The highest point on Earth is Mount Everest (8,848.86 meters above sea level), and the deepest point is the Challenger Deep in the Mariana Trench (10,994 meters below sea level).","Earth has a powerful magnetic field created by its iron core, which shields us from harmful solar radiation and creates the beautiful aurora borealis and aurora australis.","Earth's atmosphere extends about 10,000 kilometers (6,200 miles) above the planet's surface, gradually becoming thinner until it merges with space."]},{id:"mars",name:"Mars",type:"Planet",overview:"Mars is the fourth planet from the Sun and the second-smallest planet in the Solar System. Known as the 'Red Planet' due to the iron oxide prevalent on its surface, Mars has a thin atmosphere, surface features reminiscent of Earth, and seasons similar to our own due to its axial tilt.",composition:"Mars has a core made primarily of iron, nickel, and sulfur, surrounded by a silicate mantle and a crust composed mainly of basalt. The planet's distinctive red color comes from iron oxide (rust) on its surface.",atmosphere:"Mars has a thin atmosphere consisting of about 95% carbon dioxide, 2.7% nitrogen, 1.6% argon, and traces of oxygen and water vapor. The atmospheric pressure on Mars is less than 1% of Earth's, equivalent to the pressure at about 35 km (22 mi) above Earth's surface.",surfaceFeatures:"Mars has diverse terrain including the largest volcano in the Solar System (Olympus Mons), the largest canyon system (Valles Marineris), polar ice caps, channels, gullies, and vast plains. Evidence suggests water once flowed on the surface.",moons:["Phobos - A small, irregularly shaped moon orbiting close to Mars, likely to crash into Mars or break apart within 50 million years","Deimos - The smaller and outermost of Mars' two moons, orbiting farther from the planet"],notableFeatures:["Olympus Mons, the tallest volcano in the Solar System (about 22 km or 13.6 mi high)","Valles Marineris, a system of canyons stretching over 4,000 km (2,500 mi) long","Polar ice caps composed of water ice and carbon dioxide ice that expand and contract seasonally","Evidence of ancient river valleys, lake beds, and deltas suggesting liquid water once flowed on the surface","Dust storms that can cover the entire planet and last for months"],explorationHistory:[{title:"Early Missions",content:"The first successful Mars flyby was NASA's Mariner 4 in 1965, which sent back 22 images. Mariner 9 (1971-1972) was the first spacecraft to orbit another planet and mapped about 85% of Mars' surface.",imageUrl:"/images/educational/mariner9.jpg"},{title:"Viking Program",content:"NASA's Viking 1 and 2 (1976) were the first successful Mars landers, conducting experiments to search for microbial life. They provided the first detailed surface images and analyzed soil samples.",imageUrl:"/images/educational/viking.jpg"},{title:"Mars Exploration Rovers",content:"NASA's Spirit and Opportunity rovers (2004) significantly advanced our understanding of Mars's geology and past water activity. Opportunity operated for over 14 years, far exceeding its planned 90-day mission.",imageUrl:"/images/educational/opportunity.jpg"},{title:"Curiosity and Perseverance",content:"NASA's Curiosity rover (2012-present) and Perseverance rover (2021-present) are investigating Mars's habitability, climate, geology, and potential for past life. Perseverance is collecting samples for future return to Earth and deployed the Ingenuity helicopter, the first aircraft to fly on another planet.",imageUrl:"/images/educational/perseverance.jpg"},{title:"International Missions",content:"Multiple space agencies have sent missions to Mars, including ESA's Mars Express orbiter (2003-present), India's Mars Orbiter Mission (2014-2022), and the UAE's Hope orbiter (2021-present). China's Tianwen-1 mission (2021) successfully delivered the Zhurong rover to the surface.",imageUrl:"/images/educational/mars_express.jpg"}],funFacts:["A day on Mars (called a sol) is only slightly longer than an Earth day at 24 hours and 37 minutes.","Mars experiences seasons similar to Earth because its axis is tilted at about 25 degrees, comparable to Earth's 23.5-degree tilt.","Gravity on Mars is about 38% of Earth's, so you could jump nearly three times higher on Mars.","Mars has the largest dust storms in the Solar System, sometimes engulfing the entire planet for months.","Scientists have found evidence that liquid water may still flow on Mars's surface during the warmest months, though only briefly and in very small amounts."]},{id:"jupiter",name:"Jupiter",type:"Planet",overview:"Jupiter is the fifth planet from the Sun and the largest in the Solar System. It is a gas giant composed mainly of hydrogen and helium, with a mass more than two and a half times that of all the other planets combined. Jupiter's rapid rotation (a day is just under 10 hours) causes its equatorial regions to bulge and its polar regions to flatten, giving it a slightly oblate shape.",composition:"Jupiter consists primarily of hydrogen (~90%) and helium (~10%), with traces of ammonia, methane, water vapor, and other compounds. Unlike terrestrial planets, Jupiter lacks a solid surface and instead transitions from gaseous to liquid as the pressure increases with depth.",atmosphere:"Jupiter's atmosphere is the largest planetary atmosphere in the Solar System, extending up to 5,000 km (3,000 mi) above the 'surface'. It is organized into latitudinal bands of clouds composed of ammonia crystals, ammonium hydrosulfide, and water that appear as light (zones) and dark (belts) bands.",moons:["Jupiter has at least 79 moons, with the four largest, known as the Galilean moons (Io, Europa, Ganymede, and Callisto), being easily observable with a small telescope.","Ganymede is the largest moon in the Solar System, even larger than the planet Mercury.","Io is the most volcanically active body in the Solar System.","Europa has a global ocean of liquid water beneath its icy crust and is considered a promising place to search for extraterrestrial life."],notableFeatures:["The Great Red Spot, a persistent anticyclonic storm larger than Earth that has existed for at least 400 years","A faint planetary ring system composed of dust particles ejected from its moons","The strongest planetary magnetic field in the Solar System, about 14 times stronger than Earth's","Powerful auroras around Jupiter's poles from charged particles captured by its magnetic field","Cloud bands and atmospheric zones that circulate at different speeds, creating turbulent patterns"],explorationHistory:[{title:"Pioneer Missions",content:"NASA's Pioneer 10 and 11 (1973-1974) were the first spacecraft to fly past Jupiter, capturing close-up images and studying its radiation environment, magnetic field, and atmosphere.",imageUrl:"/images/educational/pioneer_jupiter.jpg"},{title:"Voyager Missions",content:"NASA's Voyager 1 and 2 (1979) provided more detailed images of Jupiter and its moons, discovering Jupiter's rings, volcanic activity on Io, and detailed views of the Great Red Spot.",imageUrl:"/images/educational/voyager_jupiter.jpg"},{title:"Galileo Mission",content:"NASA's Galileo spacecraft (1995-2003) was the first to orbit Jupiter, studying the planet and its moons extensively. It also deployed a probe into Jupiter's atmosphere, providing direct measurements of its composition.",imageUrl:"/images/educational/galileo.jpg"},{title:"Juno Mission",content:"NASA's Juno spacecraft (2016-present) is currently orbiting Jupiter, studying its gravity field, magnetic field, polar magnetosphere, and deep atmospheric composition. Juno's close polar orbits allow it to observe Jupiter's previously unseen polar regions.",imageUrl:"/images/educational/juno.jpg"}],funFacts:["Jupiter is the fastest rotating planet in the Solar System, completing a rotation in just under 10 hours.","Jupiter's Great Red Spot is a storm that could fit about 3 Earths inside it and has been observed since at least the 1600s.","Jupiter acts as a 'cosmic vacuum cleaner', its strong gravity attracting and capturing comets and asteroids that might otherwise hit inner planets.","If Jupiter were about 80 times more massive, it would become a star rather than a planet.","Jupiter emits more heat than it receives from the Sun, primarily due to the Kelvin-Helmholtz mechanism (gravitational contraction) and possibly helium rain in its interior."]},{id:"saturn",name:"Saturn",type:"Planet",overview:"Saturn is the sixth planet from the Sun and the second-largest in the Solar System, after Jupiter. It is a gas giant known for its spectacular ring system, which consists of countless small particles of rock and ice. Like Jupiter, Saturn is primarily composed of hydrogen and helium and lacks a solid surface.",composition:"Saturn is composed primarily of hydrogen (about 96%) and helium (about 3%), with traces of methane, ammonia, water vapor, and other compounds. Saturn's density is the lowest of all planets in the Solar Systemless than that of water, meaning it would float if placed in a large enough body of water.",atmosphere:"Saturn's upper atmosphere is divided into bands similar to Jupiter, but Saturn's appear more subdued due to a layer of ammonia haze. Winds in Saturn's atmosphere can reach up to 1,800 km/h (1,120 mph), the second-fastest in the Solar System after Neptune.",moons:["Saturn has at least 83 moons, with the largest being Titan, which is larger than the planet Mercury and the only moon in the Solar System with a substantial atmosphere.","Enceladus features geysers at its south pole that shoot plumes of water vapor, ice particles, and organic compounds from an underground ocean.","Other significant moons include Mimas (with a large crater giving it a 'Death Star' appearance), Tethys, Dione, Rhea, and Iapetus."],notableFeatures:["Saturn's ring system extends up to 282,000 km (175,000 mi) from the planet, yet is typically less than 10 meters (30 feet) thick","The rings are composed primarily of water ice particles ranging from tiny dust-sized grains to chunks several meters across","Saturn has a hexagonal cloud pattern at its north pole, a unique feature in the Solar System","Periodically occurring large storms called 'Great White Spots' that can encircle the entire planet","Saturn's magnetic field is weaker than Jupiter's but still about 578 times stronger than Earth's"],explorationHistory:[{title:"Pioneer and Voyager",content:"NASA's Pioneer 11 (1979) was the first spacecraft to fly by Saturn, followed by Voyager 1 and 2 (1980-1981). These missions discovered new moons and rings and provided detailed images of Saturn's atmosphere and ring system.",imageUrl:"/images/educational/voyager_saturn.jpg"},{title:"Cassini-Huygens",content:"The Cassini-Huygens mission (2004-2017), a joint project of NASA, ESA, and ASI, was the first to orbit Saturn. Cassini extensively studied Saturn, its rings, and moons, while the Huygens probe landed on Titan in 2005, providing the first images from its surface. Cassini's 'Grand Finale' involved 22 orbits diving between Saturn and its rings before intentionally plunging into Saturn's atmosphere.",imageUrl:"/images/educational/cassini.jpg"},{title:"Future Missions",content:"NASA's Dragonfly mission, scheduled to launch in 2027, will send a rotorcraft to explore Titan. While primarily focused on Titan, it will provide new observations of Saturn as well."}],funFacts:["Saturn's rings were first observed by Galileo Galilei in 1610, though he couldn't identify them as rings with his primitive telescope.","The particles in Saturn's rings orbit at different speeds, with inner particles moving faster than outer ones, in accordance with Kepler's laws of planetary motion.","Saturn's moon Enceladus has geysers that shoot water ice particles into space, some of which eventually become part of Saturn's E ring.","A day on Saturn lasts only about 10.7 hours, but a year is equivalent to about 29.5 Earth years.","Saturn has oval-shaped storms similar to Jupiter's Great Red Spot, but they don't last as long, typically surviving for months rather than centuries."]}],Vb=[{id:"apollo11",name:"Apollo 11",agency:"NASA",launchDate:"July 16, 1969",endDate:"July 24, 1969",status:"Completed",overview:"Apollo 11 was the first manned mission to land on the Moon. The spacecraft carried three astronauts: Mission Commander Neil Armstrong, Lunar Module Pilot Edwin 'Buzz' Aldrin, and Command Module Pilot Michael Collins.",objectives:["Land humans on the lunar surface and return them safely to Earth","Establish technological superiority in space over the Soviet Union","Collect lunar surface samples for scientific study","Deploy scientific experiments on the lunar surface"],accomplishments:["Neil Armstrong became the first human to step on the Moon on July 21, 1969, with the famous words: 'That's one small step for man, one giant leap for mankind'","Successfully collected 21.5 kg (47.5 lb) of lunar material to return to Earth","Deployed the Early Apollo Scientific Experiments Package (EASEP)","Captured iconic photographs of bootprints on the lunar surface and Earth rising above the lunar horizon","Demonstrated the capability of humans to travel to and work on another celestial body"],images:["/images/educational/apollo11_launch.jpg","/images/educational/apollo11_moonwalk.jpg","/images/educational/apollo11_plaque.jpg"],additionalResources:["NASA Apollo 11 Mission Overview: https://www.nasa.gov/mission_pages/apollo/missions/apollo11.html","Smithsonian National Air and Space Museum Apollo Program: https://airandspace.si.edu/explore/topics/apollo/apollo-program","Apollo Lunar Surface Journal: https://www.hq.nasa.gov/alsj/"]},{id:"voyager",name:"Voyager Program",agency:"NASA",launchDate:"1977 (Voyager 1: September 5, Voyager 2: August 20)",status:"Active",overview:"The Voyager program consists of two spacecraft, Voyager 1 and Voyager 2, launched in 1977 to take advantage of a favorable alignment of Jupiter, Saturn, Uranus, and Neptune. After completing their primary mission of studying these outer planets, both spacecraft continued on an extended mission to study the outer reaches of the Solar System and interstellar space.",objectives:["Study the outer planets Jupiter, Saturn, Uranus, and Neptune, their moons, and ring systems","Investigate the interplanetary medium (the space between planets)","Search for the boundary of the Solar System and study interstellar space beyond","Carry the 'Golden Record' containing sounds and images portraying Earth's diversity of life and culture"],accomplishments:["First detailed, close-up images of Jupiter, Saturn, Uranus, and Neptune and their moons","Discovered previously unknown moons around the outer planets","Revealed active volcanoes on Jupiter's moon Io, the first observed beyond Earth","Discovered that Jupiter, Saturn, Uranus, and Neptune all have ring systems","Observed Neptune's Great Dark Spot and high-speed winds","Voyager 1 became the first human-made object to enter interstellar space in 2012","Both spacecraft continue to send scientific information about their surroundings through the Deep Space Network"],images:["/images/educational/voyager_spacecraft.jpg","/images/educational/voyager_jupiter.jpg","/images/educational/voyager_golden_record.jpg"],additionalResources:["NASA Voyager Mission: https://voyager.jpl.nasa.gov/","The Planetary Society - Voyager: https://www.planetary.org/space-missions/voyager","NASA Solar System Exploration - Voyager: https://solarsystem.nasa.gov/missions/voyager-1/in-depth/"]},{id:"hubble",name:"Hubble Space Telescope",agency:"NASA and ESA",launchDate:"April 24, 1990",status:"Active",overview:"The Hubble Space Telescope (HST) is a space telescope that was launched into low Earth orbit in 1990 and remains in operation. It is one of NASA's Great Observatories and was named after astronomer Edwin Hubble. With a 2.4-meter (7.9 ft) mirror, Hubble's four main instruments observe in the ultraviolet, visible, and near-infrared regions of the electromagnetic spectrum.",objectives:["Study the planets, stars, galaxies, and other celestial objects without the distortion of Earth's atmosphere","Determine the age of the universe","Search for extrasolar planets and study their atmospheres","Analyze the composition and physical processes of celestial bodies","Observe distant galaxies formed shortly after the Big Bang"],accomplishments:["Helped determine the rate of expansion of the universe (the Hubble constant)","Provided evidence that the expansion of the universe is accelerating, leading to the discovery of dark energy","Captured detailed images of the Deep Field and Ultra Deep Field, revealing thousands of galaxies in seemingly empty patches of sky","Observed the collision of Comet Shoemaker-Levy 9 with Jupiter in 1994","Contributed to understanding the atmospheres of planets both in and outside our solar system","Captured iconic images like the 'Pillars of Creation' in the Eagle Nebula","Serviced five times by Space Shuttle missions, with new instruments and repairs extending its lifetime"],images:["/images/educational/hubble.jpg","/images/educational/hubble_deep_field.jpg","/images/educational/hubble_pillars_of_creation.jpg"],additionalResources:["NASA Hubble Space Telescope: https://www.nasa.gov/mission_pages/hubble/main/index.html","ESA Hubble: https://esahubble.org/","HubbleSite: https://hubblesite.org/","Space Telescope Science Institute: https://www.stsci.edu/"]},{id:"iss",name:"International Space Station",agency:"NASA, Roscosmos, ESA, JAXA, CSA",launchDate:"November 20, 1998 (first module launch)",status:"Active",overview:"The International Space Station (ISS) is a modular space station in low Earth orbit. It is a multinational collaborative project involving NASA (United States), Roscosmos (Russia), JAXA (Japan), ESA (Europe), and CSA (Canada). The station serves as a microgravity and space environment research laboratory where scientific research is conducted in astrobiology, astronomy, meteorology, physics, and other fields.",objectives:["Maintain a continuous human presence in space (achieved since November 2000)","Provide a platform for scientific research that cannot be conducted on Earth","Develop and test technologies for future space exploration","Foster international cooperation in space","Study the effects of long-duration spaceflight on humans for future missions to the Moon and Mars"],accomplishments:["Continuous human presence in space for over 20 years","More than 3,000 scientific experiments conducted by researchers from over 100 countries","Significant advances in our understanding of human physiology in space, including bone density loss, muscle atrophy, and vision changes","Development and testing of life support systems, space habitats, and other technologies needed for long-duration spaceflight","Demonstrations of international cooperation in the post-Cold War era","Serves as a platform for testing commercial spaceflight capabilities, including SpaceX and Boeing crew vehicles"],images:["/images/educational/iss_orbit.jpg","/images/educational/iss_interior.jpg","/images/educational/iss_eva.jpg"],additionalResources:["NASA International Space Station: https://www.nasa.gov/mission_pages/station/main/index.html","ESA International Space Station: https://www.esa.int/Science_Exploration/Human_and_Robotic_Exploration/International_Space_Station","JAXA ISS Program: https://iss.jaxa.jp/en/","Canadian Space Agency ISS: https://www.asc-csa.gc.ca/eng/iss/","ISS Live Stream: https://www.nasa.gov/multimedia/nasatv/iss_ustream.html"]},{id:"jwst",name:"James Webb Space Telescope",agency:"NASA, ESA, CSA",launchDate:"December 25, 2021",status:"Active",overview:"The James Webb Space Telescope (JWST) is a space telescope designed primarily to conduct infrared astronomy. As the largest optical telescope in space, its high infrared resolution and sensitivity allow it to view objects too old, distant, or faint for the Hubble Space Telescope. This enables investigations across many fields of astronomy and cosmology, such as observation of the earliest stars and formation of the first galaxies, and detailed atmospheric characterization of potentially habitable exoplanets.",objectives:["Study the formation and evolution of galaxies, stars, and planetary systems","Examine the atmospheres of exoplanets for possible signs of life","Observe the earliest stars and galaxies that formed after the Big Bang","Expand our understanding of dark matter and dark energy","Investigate the formation of stars and planetary systems"],accomplishments:["Successfully deployed at the L2 Lagrange point, 1.5 million kilometers from Earth","Captured unprecedented high-resolution infrared images of the universe, including the deepest and sharpest infrared image of the distant universe to date","Detected water vapor in the atmosphere of distant exoplanets","Observed detailed structure of early galaxies, revealing new information about their formation and evolution","Provided new insights into star formation processes and the chemical composition of galaxies"],images:["/images/educational/jwst.jpg","/images/educational/jwst_deep_field.jpg","/images/educational/jwst_deployment.jpg"],additionalResources:["NASA James Webb Space Telescope: https://www.nasa.gov/mission_pages/webb/main/index.html","ESA Webb: https://www.esa.int/Science_Exploration/Space_Science/Webb","Canadian Space Agency Webb: https://www.asc-csa.gc.ca/eng/satellites/jwst/","Webb Space Telescope at STScI: https://webbtelescope.org/"]}],Wb=[{id:"gravity",name:"Gravity and Orbital Mechanics",overview:"Gravity is the force that attracts objects with mass towards each other. Orbital mechanics is the application of physics, specifically Newton's laws of motion and his law of universal gravitation, to the movement of satellites, spacecraft, and celestial bodies.",details:`Sir Isaac Newton's law of universal gravitation states that every particle attracts every other particle in the universe with a force directly proportional to the product of their masses and inversely proportional to the square of the distance between their centers. This force keeps planets in orbit around the Sun and moons around planets.

In the early 20th century, Albert Einstein's theory of general relativity expanded our understanding of gravity, describing it as a consequence of the curvature of spacetime caused by mass. This theory successfully explains phenomena that Newton's theory couldn't, such as the precession of Mercury's orbit.

For spacecraft navigation, several key orbital elements are calculated: semi-major axis (size of the orbit), eccentricity (shape of the orbit), inclination (tilt relative to the reference plane), longitude of the ascending node (orientation of the orbit), argument of periapsis (orientation of the ellipse in the orbital plane), and mean anomaly (position of the orbiting body along the ellipse at a specific time).

Maneuvers in space rely on precise calculations of delta-v (change in velocity) to move between orbits. The most efficient orbital transfer is the Hohmann transfer, which uses two engine burns to move between circular orbits.`,relatedConcepts:["Kepler's Laws of Planetary Motion","Escape Velocity","Lagrange Points","Gravitational Assist","Orbital Resonance"],scientificImportance:"Understanding orbital mechanics is crucial for successful space exploration and satellite deployment. It allows us to predict the motion of natural and artificial satellites, plan spacecraft trajectories for interplanetary missions, perform gravitational assist maneuvers, maintain satellite constellations like GPS, and study the evolution of planetary systems.",illustrations:["/images/educational/orbital_mechanics.jpg","/images/educational/hohmann_transfer.jpg","/images/educational/gravity_assist.jpg"],additionalResources:["NASA's Basics of Space Flight: https://solarsystem.nasa.gov/basics/","European Space Agency Orbital Mechanics: https://www.esa.int/Education/Teach_with_space/Orbital_mechanics","Fundamentals of Astrodynamics by Roger R. Bate, Donald D. Mueller, and Jerry E. White"]},{id:"stellar-evolution",name:"Stellar Evolution",overview:"Stellar evolution is the process by which a star changes over the course of time, from its formation from a gas cloud to its eventual demise. The lifetime and evolutionary path of a star are primarily determined by its initial mass.",details:`Stars begin their lives in dense regions of molecular clouds called stellar nurseries. When parts of these clouds reach a critical density, they begin to collapse under their own gravity. As the cloud collapses, it fragments into smaller clumps that will form individual stars. The central region of a collapsing fragment grows increasingly hot and dense, forming a protostar.

When the core temperature reaches about 10 million Kelvin, nuclear fusion of hydrogen into helium begins, and the star enters the main sequence phasethe longest period of a star's life. Our Sun is currently in this phase and will remain so for about 10 billion years in total.

The fate of a star after it exhausts its hydrogen fuel depends on its mass:

- Low-mass stars (less than about 0.8 solar masses) haven't had enough time in the universe's history to evolve beyond the main sequence.

- Sun-like stars (0.8 to 8 solar masses) expand into red giants, fuse helium into carbon and oxygen, lose their outer layers as planetary nebulae, and end as white dwarfs.

- Massive stars (8 to 50 solar masses) proceed through a series of nuclear fusion stages, producing progressively heavier elements up to iron. They end their lives in spectacular core-collapse supernovae, leaving behind neutron stars.

- Very massive stars (more than 50 solar masses) may experience pair-instability supernovae or directly collapse to form black holes.

Through supernovae and stellar winds, stars enrich the interstellar medium with heavy elements (metals), which are incorporated into new generations of stars and planets.`,relatedConcepts:["Nucleosynthesis","Hertzsprung-Russell Diagram","Supernovae","Neutron Stars","Black Holes"],scientificImportance:"The study of stellar evolution is fundamental to astrophysics and cosmology. It helps us understand the origin of elements heavier than hydrogen and helium (which were produced in the Big Bang), the life cycles of galaxies, the potential for planetary systems around different types of stars, and the ultimate fate of our own Sun and Solar System. The elements created inside stars and distributed by supernovae are essential for the formation of planets and for life as we know it.",illustrations:["/images/educational/stellar_evolution.jpg","/images/educational/hr_diagram.jpg","/images/educational/supernova.jpg"],additionalResources:["NASA's Imagine the Universe: https://imagine.gsfc.nasa.gov/science/objects/stars1.html","European Space Agency Science: Stars: https://www.esa.int/Science_Exploration/Space_Science/Stars","An Introduction to the Theory of Stellar Structure and Evolution by Dina Prialnik"]},{id:"big-bang",name:"The Big Bang and Cosmic Evolution",overview:"The Big Bang theory is the prevailing cosmological model explaining the existence of the observable universe from the earliest known periods through its subsequent large-scale evolution. The model describes how the universe expanded from an initial state of extremely high density and temperature.",details:`According to the Big Bang theory, the universe began about 13.8 billion years ago as an extremely hot, dense point (singularity) and has been expanding ever since. The earliest stages of the universe's existence are subject to much speculation, but the timeline of cosmic evolution according to current understanding proceeds as follows:

- Planck Epoch (before 10^-43 seconds): The laws of physics as we know them may not apply.

- Grand Unification Epoch (10^-43 to 10^-36 seconds): The strong nuclear force separates from the electroweak force.

- Inflationary Epoch (10^-36 to 10^-32 seconds): The universe undergoes exponential expansion.

- Electroweak Epoch (10^-32 to 10^-12 seconds): The electromagnetic and weak nuclear forces separate.

- Quark Epoch (10^-12 to 10^-6 seconds): Quarks and gluons form a quark-gluon plasma.

- Hadron Epoch (10^-6 to 1 second): Quarks combine to form hadrons like protons and neutrons.

- Lepton Epoch (1 to 10 seconds): The universe is dominated by leptons (electrons, positrons, neutrinos).

- Nucleosynthesis (10 seconds to 20 minutes): Protons and neutrons combine to form the nuclei of the lightest elements (primarily hydrogen and helium, with traces of lithium).

- Recombination (380,000 years): The universe cools enough for electrons to combine with nuclei, forming neutral atoms. Photons can now travel freely, creating the Cosmic Microwave Background (CMB) radiation.

- Dark Ages (380,000 to 150 million years): Before the first stars, the universe was filled with neutral hydrogen gas.

- Reionization (150 million to 1 billion years): The first stars and galaxies form and begin to reionize the neutral hydrogen.

- Galaxy Formation (1 billion years onward): Galaxies form, evolve, and organize into clusters and superclusters, creating the large-scale structure we observe today.

Evidence supporting the Big Bang theory includes the expansion of the universe (observed as redshift), the abundance of light elements, and the Cosmic Microwave Background radiation, which is the afterglow of the Big Bang.`,relatedConcepts:["Cosmic Inflation","Dark Matter","Dark Energy","Cosmic Microwave Background","Nucleosynthesis"],scientificImportance:"The Big Bang theory provides the framework for understanding the origin and evolution of the universe. It explains the observed abundance of light elements, the existence of the Cosmic Microwave Background radiation, and the large-scale structure of the universe. Research in this field addresses fundamental questions about the nature of space, time, matter, and energy, as well as the ultimate fate of the universe. The interplay between particle physics and cosmology has led to insights in both fields, demonstrating the fundamental interconnectedness of the very large and the very small.",illustrations:["/images/educational/big_bang.jpg","/images/educational/cmb.jpg","/images/educational/cosmic_timeline.jpg"],additionalResources:["NASA Universe 101: Big Bang Theory: https://map.gsfc.nasa.gov/universe/bb_theory.html","CERN: The Big Bang: https://home.cern/science/physics/early-universe","A Brief History of Time by Stephen Hawking","The First Three Minutes by Steven Weinberg"]},{id:"exoplanets",name:"Exoplanets and Planetary Systems",overview:"Exoplanets are planets outside our Solar System that orbit other stars. The study of exoplanets has revolutionized our understanding of planetary systems, providing insights into the diversity of planets and planetary system architectures throughout the galaxy.",details:`The first confirmed detection of an exoplanet orbiting a main-sequence star occurred in 1995, when a giant planet was discovered in a four-day orbit around the star 51 Pegasi. Since then, thousands of exoplanets have been discovered using various detection methods:

- Transit Method: Observing the slight dimming of a star when a planet passes in front of it.

- Radial Velocity Method: Measuring the slight wobble of a star caused by the gravitational pull of an orbiting planet.

- Direct Imaging: Capturing actual images of exoplanets, typically very large planets far from their host stars.

- Gravitational Microlensing: Detecting the gravitational lensing effect when a planet-star system passes in front of a more distant star.

- Astrometry: Measuring the precise position of a star and detecting its subtle movement caused by orbiting planets.

The discovered exoplanets show incredible diversity, including:

- Hot Jupiters: Gas giants orbiting very close to their stars.

- Super-Earths: Planets with masses between Earth and Neptune.

- Mini-Neptunes: Planets smaller than Neptune but with significant gaseous envelopes.

- Terrestrial planets: Rocky worlds similar in composition to Earth, Venus, Mars, and Mercury.

- Circumbinary planets: Planets that orbit around both stars in a binary star system.

Of particular interest are potentially habitable planets that orbit in the 'habitable zone' of their star, where conditions might be right for liquid water to exist on the surface. Several such planets have been discovered, including those in the TRAPPIST-1 system, which contains seven Earth-sized planets, several potentially in the habitable zone.

Exoplanet atmospheres can be studied through spectroscopy during transits, revealing information about their composition. Atmospheric studies have detected water vapor, methane, carbon dioxide, and other molecules in exoplanet atmospheres.`,relatedConcepts:["Habitable Zone","Planetary Formation","Protoplanetary Disks","Planetary Migration","Astrobiology"],scientificImportance:"The study of exoplanets has transformed our understanding of planetary systems and our place in the universe. It provides context for our own Solar System, showing that planetary systems are common but often quite different from our own. This research helps answer questions about how planets form and evolve, the conditions necessary for life, and the potential prevalence of habitable worlds in the galaxy. Current and future missions like TESS, JWST, and planned missions such as PLATO and HabEx are designed to discover and characterize more exoplanets, with a particular focus on finding potentially habitable worlds and studying their atmospheres for possible biosignatures.",illustrations:["/images/educational/exoplanets.jpg","/images/educational/exoplanet_transit.jpg","/images/educational/habitable_zone.jpg"],additionalResources:["NASA Exoplanet Exploration: https://exoplanets.nasa.gov/","European Space Agency Exoplanets: https://www.esa.int/Science_Exploration/Space_Science/Exoplanets","The Exoplanet Handbook by Michael Perryman","Exoplanet Atmospheres by Sara Seager"]}],j5=({isOpen:n,onClose:e})=>{const[t,i]=z.useState("bodies"),[r,s]=z.useState(null),o=Nt(h=>h.focusedBody);z.useEffect(()=>{o&&(s(o),i("bodies"))},[o]);const l=(()=>{if(!r)return null;switch(t){case"bodies":return Gb.find(h=>h.id===r);case"missions":return Vb.find(h=>h.id===r);case"concepts":return Wb.find(h=>h.id===r);default:return null}})(),c=h=>!!(h&&"details"in h&&"relatedConcepts"in h&&"scientificImportance"in h);return n?L.jsxs("div",{className:"fixed top-0 right-0 w-full sm:w-2/3 md:w-1/2 lg:w-1/3 h-full bg-black bg-opacity-90 text-white overflow-auto z-50 border-l border-[#1A237E] shadow-xl transition-all",children:[L.jsxs("div",{className:"sticky top-0 bg-[#1A237E] p-4 flex justify-between items-center z-10",children:[L.jsx("h2",{className:"text-xl font-bold",children:"Space Education Center"}),L.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-[#4FC3F7] hover:bg-opacity-20 transition-colors",children:L.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[L.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),L.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),L.jsxs("div",{className:"flex border-b border-[#1A237E]",children:[L.jsx("button",{className:On("flex-1 p-4 transition-colors",t==="bodies"?"bg-[#1A237E] text-white":"hover:bg-[#1A237E] hover:bg-opacity-50"),onClick:()=>i("bodies"),children:"Celestial Bodies"}),L.jsx("button",{className:On("flex-1 p-4 transition-colors",t==="missions"?"bg-[#1A237E] text-white":"hover:bg-[#1A237E] hover:bg-opacity-50"),onClick:()=>i("missions"),children:"Space Missions"}),L.jsx("button",{className:On("flex-1 p-4 transition-colors",t==="concepts"?"bg-[#1A237E] text-white":"hover:bg-[#1A237E] hover:bg-opacity-50"),onClick:()=>i("concepts"),children:"Concepts"})]}),L.jsxs("div",{className:"flex h-[calc(100%-112px)]",children:[L.jsxs("div",{className:"w-1/3 border-r border-[#1A237E] overflow-y-auto",children:[t==="bodies"&&L.jsx("ul",{children:Gb.map(h=>L.jsxs("li",{className:On("p-3 cursor-pointer hover:bg-[#1A237E] hover:bg-opacity-50 transition-colors border-b border-[#1A237E] border-opacity-50",r===h.id?"bg-[#1A237E] bg-opacity-70":""),onClick:()=>s(h.id),children:[L.jsx("div",{className:"font-medium",children:h.name}),L.jsx("div",{className:"text-xs text-gray-400",children:h.type})]},h.id))}),t==="missions"&&L.jsx("ul",{children:Vb.map(h=>L.jsxs("li",{className:On("p-3 cursor-pointer hover:bg-[#1A237E] hover:bg-opacity-50 transition-colors border-b border-[#1A237E] border-opacity-50",r===h.id?"bg-[#1A237E] bg-opacity-70":""),onClick:()=>s(h.id),children:[L.jsx("div",{className:"font-medium",children:h.name}),L.jsx("div",{className:"text-xs text-gray-400",children:h.agency})]},h.id))}),t==="concepts"&&L.jsx("ul",{children:Wb.map(h=>L.jsx("li",{className:On("p-3 cursor-pointer hover:bg-[#1A237E] hover:bg-opacity-50 transition-colors border-b border-[#1A237E] border-opacity-50",r===h.id?"bg-[#1A237E] bg-opacity-70":""),onClick:()=>s(h.id),children:L.jsx("div",{className:"font-medium",children:h.name})},h.id))})]}),L.jsx("div",{className:"w-2/3 p-4 overflow-y-auto",children:l?L.jsxs("div",{children:[L.jsx("h3",{className:"text-2xl font-bold mb-2 text-[#4FC3F7]",children:"name"in l?l.name:""}),t==="bodies"&&"type"in l&&L.jsxs("div",{className:"space-y-4",children:[L.jsx("div",{className:"bg-[#1A237E] bg-opacity-30 p-2 rounded text-sm inline-block",children:l.type}),L.jsx("h4",{className:"text-lg font-semibold border-b border-[#4FC3F7] pb-1 mt-4",children:"Overview"}),L.jsx("p",{className:"text-sm leading-relaxed",children:l.overview}),L.jsx("h4",{className:"text-lg font-semibold border-b border-[#4FC3F7] pb-1 mt-4",children:"Composition"}),L.jsx("p",{className:"text-sm leading-relaxed",children:l.composition}),l.atmosphere&&L.jsxs(L.Fragment,{children:[L.jsx("h4",{className:"text-lg font-semibold border-b border-[#4FC3F7] pb-1 mt-4",children:"Atmosphere"}),L.jsx("p",{className:"text-sm leading-relaxed",children:l.atmosphere})]}),L.jsx("h4",{className:"text-lg font-semibold border-b border-[#4FC3F7] pb-1 mt-4",children:"Notable Features"}),L.jsx("ul",{className:"list-disc pl-5 text-sm",children:l.notableFeatures.map((h,f)=>L.jsx("li",{className:"mb-1",children:h},f))}),L.jsx("h4",{className:"text-lg font-semibold border-b border-[#4FC3F7] pb-1 mt-4",children:"Exploration History"}),L.jsx("div",{className:"space-y-3",children:l.explorationHistory.map((h,f)=>L.jsxs("div",{className:"bg-black bg-opacity-40 p-3 rounded",children:[L.jsx("h5",{className:"font-medium text-[#FFA726]",children:h.title}),L.jsx("p",{className:"text-sm mt-1",children:h.content})]},f))}),L.jsx("h4",{className:"text-lg font-semibold border-b border-[#4FC3F7] pb-1 mt-4",children:"Fun Facts"}),L.jsx("ul",{className:"list-disc pl-5 text-sm",children:l.funFacts.map((h,f)=>L.jsx("li",{className:"mb-1",children:h},f))})]}),t==="missions"&&"agency"in l&&L.jsxs("div",{className:"space-y-4",children:[L.jsxs("div",{className:"flex flex-wrap gap-2",children:[L.jsx("div",{className:"bg-[#1A237E] bg-opacity-30 p-2 rounded text-sm inline-block",children:l.agency}),L.jsxs("div",{className:"bg-[#1A237E] bg-opacity-30 p-2 rounded text-sm inline-block",children:["Launch: ",l.launchDate]}),L.jsx("div",{className:On("p-2 rounded text-sm inline-block",l.status==="Active"?"bg-green-800 bg-opacity-50":l.status==="Completed"?"bg-blue-800 bg-opacity-50":l.status==="Planned"?"bg-yellow-800 bg-opacity-50":"bg-red-800 bg-opacity-50"),children:l.status})]}),L.jsx("h4",{className:"text-lg font-semibold border-b border-[#4FC3F7] pb-1 mt-4",children:"Overview"}),L.jsx("p",{className:"text-sm leading-relaxed",children:l.overview}),L.jsx("h4",{className:"text-lg font-semibold border-b border-[#4FC3F7] pb-1 mt-4",children:"Objectives"}),L.jsx("ul",{className:"list-disc pl-5 text-sm",children:l.objectives.map((h,f)=>L.jsx("li",{className:"mb-1",children:h},f))}),l.accomplishments&&L.jsxs(L.Fragment,{children:[L.jsx("h4",{className:"text-lg font-semibold border-b border-[#4FC3F7] pb-1 mt-4",children:"Accomplishments"}),L.jsx("ul",{className:"list-disc pl-5 text-sm",children:l.accomplishments.map((h,f)=>L.jsx("li",{className:"mb-1",children:h},f))})]}),l.additionalResources&&L.jsxs(L.Fragment,{children:[L.jsx("h4",{className:"text-lg font-semibold border-b border-[#4FC3F7] pb-1 mt-4",children:"Additional Resources"}),L.jsx("ul",{className:"list-disc pl-5 text-sm",children:l.additionalResources.map((h,f)=>L.jsxs("li",{className:"mb-1",children:[h.split(": ")[0],":",L.jsx("a",{href:h.split(": ")[1],target:"_blank",rel:"noopener noreferrer",className:"text-[#4FC3F7] hover:underline ml-1",children:h.split(": ")[1]})]},f))})]})]}),t==="concepts"&&c(l)&&L.jsxs("div",{className:"space-y-4",children:[L.jsx("h4",{className:"text-lg font-semibold border-b border-[#4FC3F7] pb-1 mt-4",children:"Overview"}),L.jsx("p",{className:"text-sm leading-relaxed",children:l.overview}),L.jsx("h4",{className:"text-lg font-semibold border-b border-[#4FC3F7] pb-1 mt-4",children:"Details"}),L.jsx("div",{className:"text-sm leading-relaxed whitespace-pre-line",children:l.details}),L.jsx("h4",{className:"text-lg font-semibold border-b border-[#4FC3F7] pb-1 mt-4",children:"Related Concepts"}),L.jsx("ul",{className:"flex flex-wrap gap-2",children:l.relatedConcepts.map((h,f)=>L.jsx("li",{className:"bg-[#1A237E] bg-opacity-30 px-2 py-1 rounded text-sm",children:h},f))}),L.jsx("h4",{className:"text-lg font-semibold border-b border-[#4FC3F7] pb-1 mt-4",children:"Scientific Importance"}),L.jsx("p",{className:"text-sm leading-relaxed",children:l.scientificImportance}),l.additionalResources&&L.jsxs(L.Fragment,{children:[L.jsx("h4",{className:"text-lg font-semibold border-b border-[#4FC3F7] pb-1 mt-4",children:"Additional Resources"}),L.jsx("ul",{className:"list-disc pl-5 text-sm",children:l.additionalResources.map((h,f)=>L.jsxs("li",{className:"mb-1",children:[h.split(": ")[0],":",L.jsx("a",{href:h.split(": ")[1],target:"_blank",rel:"noopener noreferrer",className:"text-[#4FC3F7] hover:underline ml-1",children:h.split(": ")[1]})]},f))})]})]})]}):L.jsx("div",{className:"h-full flex items-center justify-center",children:L.jsxs("div",{className:"text-center text-gray-400",children:[L.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:"mx-auto mb-4",children:[L.jsx("circle",{cx:"12",cy:"12",r:"10"}),L.jsx("circle",{cx:"12",cy:"12",r:"4"}),L.jsx("line",{x1:"4.93",y1:"4.93",x2:"9.17",y2:"9.17"}),L.jsx("line",{x1:"14.83",y1:"14.83",x2:"19.07",y2:"19.07"}),L.jsx("line",{x1:"14.83",y1:"9.17",x2:"19.07",y2:"4.93"}),L.jsx("line",{x1:"14.83",y1:"9.17",x2:"18.36",y2:"5.64"}),L.jsx("line",{x1:"4.93",y1:"19.07",x2:"9.17",y2:"14.83"})]}),L.jsx("p",{children:"Select an item from the list to view detailed information."})]})})})]})]}):null},X5=({hoveredObjectId:n})=>{const[e,t]=z.useState({x:0,y:0}),i=z.useRef(null),[r,s]=z.useState(!1),o=n?Gs.find(a=>a.id===n):null;return z.useEffect(()=>{const a=l=>{t({x:l.clientX+15,y:l.clientY-10})};return window.addEventListener("mousemove",a),()=>{window.removeEventListener("mousemove",a)}},[]),z.useEffect(()=>{s(!!n)},[n]),z.useEffect(()=>{if(i.current&&r){const a=i.current.getBoundingClientRect(),l=window.innerWidth,c=window.innerHeight;let h=!1,f=e.x,p=e.y;e.x+a.width>l&&(f=e.x-a.width-30,h=!0),e.y+a.height>c&&(p=c-a.height-10,h=!0),h&&t({x:f,y:p})}},[r]),!r||!o?null:L.jsx("div",{ref:i,className:On("fixed z-50 p-3 rounded-md shadow-md","bg-black bg-opacity-80 border border-[#1A237E]","text-white backdrop-blur-sm","transition-opacity duration-200",r?"opacity-100":"opacity-0 pointer-events-none"),style:{left:`${e.x}px`,top:`${e.y}px`,maxWidth:"300px"},children:L.jsxs("div",{className:"flex flex-col gap-1",children:[L.jsx("h3",{className:"text-[#4FC3F7] font-bold text-lg",children:o.name}),L.jsx("p",{className:"text-xs text-gray-300 uppercase tracking-wider",children:o.type}),o.description&&L.jsx("p",{className:"text-sm mt-1",children:o.description}),L.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 mt-2 text-xs text-gray-200",children:[o.diameter&&L.jsxs("div",{className:"flex justify-between gap-2",children:[L.jsx("span",{className:"text-gray-400",children:"Diameter:"}),L.jsxs("span",{children:[o.diameter," km"]})]}),o.temperature&&L.jsxs("div",{className:"flex justify-between gap-2",children:[L.jsx("span",{className:"text-gray-400",children:"Temperature:"}),L.jsx("span",{children:o.temperature})]}),o.dayLength&&L.jsxs("div",{className:"flex justify-between gap-2 col-span-2",children:[L.jsx("span",{className:"text-gray-400",children:"Day Length:"}),L.jsx("span",{children:o.dayLength})]}),o.yearLength&&L.jsxs("div",{className:"flex justify-between gap-2 col-span-2",children:[L.jsx("span",{className:"text-gray-400",children:"Year Length:"}),L.jsx("span",{children:o.yearLength})]})]}),L.jsx("p",{className:"text-xs mt-2 text-[#FFA726] italic",children:"Click for more details"})]})})};function J5(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function K5(...n){return e=>n.forEach(t=>J5(t,e))}var A2=z.forwardRef((n,e)=>{const{children:t,...i}=n,r=z.Children.toArray(t),s=r.find(Q5);if(s){const o=s.props.children,a=r.map(l=>l===s?z.Children.count(o)>1?z.Children.only(null):z.isValidElement(o)?o.props.children:null:l);return L.jsx(D_,{...i,ref:e,children:z.isValidElement(o)?z.cloneElement(o,void 0,a):null})}return L.jsx(D_,{...i,ref:e,children:t})});A2.displayName="Slot";var D_=z.forwardRef((n,e)=>{const{children:t,...i}=n;if(z.isValidElement(t)){const r=Z5(t);return z.cloneElement(t,{...q5(i,t.props),ref:e?K5(e,r):r})}return z.Children.count(t)>1?z.Children.only(null):null});D_.displayName="SlotClone";var Y5=({children:n})=>L.jsx(L.Fragment,{children:n});function Q5(n){return z.isValidElement(n)&&n.type===Y5}function q5(n,e){const t={...e};for(const i in e){const r=n[i],s=e[i];/^on[A-Z]/.test(i)?r&&s?t[i]=(...a)=>{s(...a),r(...a)}:r&&(t[i]=r):i==="style"?t[i]={...r,...s}:i==="className"&&(t[i]=[r,s].filter(Boolean).join(" "))}return{...n,...t}}function Z5(n){var i,r;let e=(i=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(r=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function S2(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n))for(e=0;e<n.length;e++)n[e]&&(t=S2(n[e]))&&(i&&(i+=" "),i+=t);else for(e in n)n[e]&&(i&&(i+=" "),i+=e);return i}function $5(){for(var n,e,t=0,i="";t<arguments.length;)(n=arguments[t++])&&(e=S2(n))&&(i&&(i+=" "),i+=e);return i}const jb=n=>typeof n=="boolean"?"".concat(n):n===0?"0":n,Xb=$5,e9=(n,e)=>t=>{var i;if((e==null?void 0:e.variants)==null)return Xb(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:r,defaultVariants:s}=e,o=Object.keys(r).map(c=>{const h=t==null?void 0:t[c],f=s==null?void 0:s[c];if(h===null)return null;const p=jb(h)||jb(f);return r[c][p]}),a=t&&Object.entries(t).reduce((c,h)=>{let[f,p]=h;return p===void 0||(c[f]=p),c},{}),l=e==null||(i=e.compoundVariants)===null||i===void 0?void 0:i.reduce((c,h)=>{let{class:f,className:p,...m}=h;return Object.entries(m).every(y=>{let[A,x]=y;return Array.isArray(x)?x.includes({...s,...a}[A]):{...s,...a}[A]===x})?[...c,f,p]:c},[]);return Xb(n,o,l,t==null?void 0:t.class,t==null?void 0:t.className)},t9=e9("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),M2=z.forwardRef(({className:n,variant:e,size:t,asChild:i=!1,...r},s)=>{const o=i?A2:"button";return L.jsx(o,{className:On(t9({variant:e,size:t,className:n})),ref:s,...r})});M2.displayName="Button";const w2={overview:{position:[0,30,100],target:[0,0,0]},topDown:{position:[0,200,0],target:[0,0,0]},sideView:{position:[200,0,0],target:[0,0,0]},closeUp:{position:[0,10,30],target:[0,0,0]}};function n9(){const{camera:n}=Un();return window.setCameraPreset=e=>{const{position:t,target:i}=w2[e];n.position.set(...t),n.lookAt(...i)},null}function i9(){const n=e=>{var t;(t=window.setCameraPreset)==null||t.call(window,e)};return L.jsx("div",{className:"absolute bottom-4 left-4 flex flex-col gap-2",children:Object.entries(w2).map(([e])=>L.jsx(M2,{onClick:()=>n(e),className:"text-sm",children:e.charAt(0).toUpperCase()+e.slice(1)},e))})}function r9(){const{gl:n,scene:e,camera:t}=Un();return window.takeScreenshot=()=>(n.render(e,t),n.domElement.toDataURL()),null}function s9(){const n=()=>{var t;const e=(t=window.takeScreenshot)==null?void 0:t.call(window);if(e){const i=document.createElement("a");i.download="celestial-navigator-screenshot.png",i.href=e,i.click()}};return L.jsx("button",{onClick:n,className:"absolute bottom-4 right-4 p-2 bg-gray-800 text-white rounded",children:"Take Screenshot"})}function o9(){const{camera:n}=Un(),e=z.useRef(new ue),t=z.useRef(!1);return z.useEffect(()=>{const i=o=>{o.touches.length===1&&(t.current=!0,e.current.set(o.touches[0].clientX,o.touches[0].clientY))},r=o=>{if(!t.current)return;const a=o.touches[0],l=a.clientX-e.current.x,c=a.clientY-e.current.y;n.rotation.y-=l*.01,n.rotation.x-=c*.01,e.current.set(a.clientX,a.clientY)},s=()=>{t.current=!1};return document.addEventListener("touchstart",i),document.addEventListener("touchmove",r),document.addEventListener("touchend",s),()=>{document.removeEventListener("touchstart",i),document.removeEventListener("touchmove",r),document.removeEventListener("touchend",s)}},[n]),null}function Jb(n,e){if(e===VA)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===xl||e===gh){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,r=[];if(e===xl)for(let o=1;o<=i;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2===0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}class E2 extends ci{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new d9(t)}),this.register(function(t){return new h9(t)}),this.register(function(t){return new A9(t)}),this.register(function(t){return new S9(t)}),this.register(function(t){return new M9(t)}),this.register(function(t){return new p9(t)}),this.register(function(t){return new m9(t)}),this.register(function(t){return new g9(t)}),this.register(function(t){return new v9(t)}),this.register(function(t){return new u9(t)}),this.register(function(t){return new y9(t)}),this.register(function(t){return new f9(t)}),this.register(function(t){return new _9(t)}),this.register(function(t){return new x9(t)}),this.register(function(t){return new l9(t)}),this.register(function(t){return new w9(t)}),this.register(function(t){return new E9(t)})}load(e,t,i,r){const s=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const c=cr.extractUrlBase(e);o=cr.resolveURL(c,this.path)}else o=cr.extractUrlBase(e);this.manager.itemStart(e);const a=function(c){r?r(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new Ui(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(h){t(h),s.manager.itemEnd(e)},a)}catch(h){a(h)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const o={},a={},l=new TextDecoder;if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(l.decode(new Uint8Array(e,0,4))===b2){try{o[Ot.KHR_BINARY_GLTF]=new b9(e)}catch(f){r&&r(f);return}s=JSON.parse(o[Ot.KHR_BINARY_GLTF].content)}else s=JSON.parse(l.decode(e));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new k9(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let h=0;h<this.pluginCallbacks.length;h++){const f=this.pluginCallbacks[h](c);f.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[f.name]=f,o[f.name]=!0}if(s.extensionsUsed)for(let h=0;h<s.extensionsUsed.length;++h){const f=s.extensionsUsed[h],p=s.extensionsRequired||[];switch(f){case Ot.KHR_MATERIALS_UNLIT:o[f]=new c9;break;case Ot.KHR_DRACO_MESH_COMPRESSION:o[f]=new C9(s,this.dracoLoader);break;case Ot.KHR_TEXTURE_TRANSFORM:o[f]=new T9;break;case Ot.KHR_MESH_QUANTIZATION:o[f]=new R9;break;default:p.indexOf(f)>=0&&a[f]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+f+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}}function a9(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Ot={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class l9{constructor(e){this.parser=e,this.name=Ot.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const h=new Ie(16777215);l.color!==void 0&&h.setRGB(l.color[0],l.color[1],l.color[2],bi);const f=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new x0(h),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new y0(h),c.distance=f;break;case"spot":c=new v0(h),c.distance=f,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,ks(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(c),t.cache.add(i,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return i._getNodeRef(t.cache,a,l)})}}class c9{constructor(){this.name=Ot.KHR_MATERIALS_UNLIT}getMaterialType(){return xn}extendParams(e,t,i){const r=[];e.color=new Ie(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],bi),e.opacity=o[3]}s.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",s.baseColorTexture,In))}return Promise.all(r)}}class u9{constructor(e){this.parser=e,this.name=Ot.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class d9{constructor(e){this.parser=e,this.name=Ot.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bn}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new ue(a,a)}return Promise.all(s)}}class h9{constructor(e){this.parser=e,this.name=Ot.KHR_MATERIALS_DISPERSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bn}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class f9{constructor(e){this.parser=e,this.name=Ot.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bn}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class p9{constructor(e){this.parser=e,this.name=Ot.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bn}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Ie(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];if(o.sheenColorFactor!==void 0){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],bi)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,In)),o.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class m9{constructor(e){this.parser=e,this.name=Ot.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bn}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class g9{constructor(e){this.parser=e,this.name=Ot.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bn}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new Ie().setRGB(a[0],a[1],a[2],bi),Promise.all(s)}}class v9{constructor(e){this.parser=e,this.name=Ot.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bn}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class y9{constructor(e){this.parser=e,this.name=Ot.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bn}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new Ie().setRGB(a[0],a[1],a[2],bi),o.specularColorTexture!==void 0&&s.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,In)),Promise.all(s)}}class x9{constructor(e){this.parser=e,this.name=Ot.EXT_MATERIALS_BUMP}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bn}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(i.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}}class _9{constructor(e){this.parser=e,this.name=Ot.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bn}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(i.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class A9{constructor(e){this.parser=e,this.name=Ot.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class S9{constructor(e){this.parser=e,this.name=Ot.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class M9{constructor(e){this.parser=e,this.name=Ot.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class w9{constructor(e){this.name=Ot.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=r.byteOffset||0,c=r.byteLength||0,h=r.count,f=r.byteStride,p=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(h,f,p,r.mode,r.filter).then(function(m){return m.buffer}):o.ready.then(function(){const m=new ArrayBuffer(h*f);return o.decodeGltfBuffer(new Uint8Array(m),h,f,p,r.mode,r.filter),m})})}else return null}}class E9{constructor(e){this.name=Ot.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const r=t.meshes[i.mesh];for(const c of r.primitives)if(c.mode!==Mr.TRIANGLES&&c.mode!==Mr.TRIANGLE_STRIP&&c.mode!==Mr.TRIANGLE_FAN&&c.mode!==void 0)return null;const o=i.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(h=>(l[c]=h,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const h=c.pop(),f=h.isGroup?h.children:[h],p=c[0].count,m=[];for(const y of f){const A=new Xe,x=new N,g=new sn,_=new N(1,1,1),M=new Mh(y.geometry,y.material,p);for(let w=0;w<p;w++)l.TRANSLATION&&x.fromBufferAttribute(l.TRANSLATION,w),l.ROTATION&&g.fromBufferAttribute(l.ROTATION,w),l.SCALE&&_.fromBufferAttribute(l.SCALE,w),M.setMatrixAt(w,A.compose(x,g,_));for(const w in l)if(w==="_COLOR_0"){const C=l[w];M.instanceColor=new ia(C.array,C.itemSize,C.normalized)}else w!=="TRANSLATION"&&w!=="ROTATION"&&w!=="SCALE"&&y.geometry.setAttribute(w,l[w]);Rt.prototype.copy.call(M,y),this.parser.assignFinalMaterial(M),m.push(M)}return h.isGroup?(h.clear(),h.add(...m),h):m[0]}))}}const b2="glTF",nd=12,Kb={JSON:1313821514,BIN:5130562};class b9{constructor(e){this.name=Ot.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,nd),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==b2)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-nd,s=new DataView(e,nd);let o=0;for(;o<r;){const a=s.getUint32(o,!0);o+=4;const l=s.getUint32(o,!0);if(o+=4,l===Kb.JSON){const c=new Uint8Array(e,nd+o,a);this.content=i.decode(c)}else if(l===Kb.BIN){const c=nd+o;this.body=e.slice(c,c+a)}o+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class C9{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Ot.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const h in o){const f=N_[h]||h.toLowerCase();a[f]=o[h]}for(const h in e.attributes){const f=N_[h]||h.toLowerCase();if(o[h]!==void 0){const p=i.accessors[e.attributes[h]],m=kc[p.componentType];c[f]=m.name,l[f]=p.normalized===!0}}return t.getDependency("bufferView",s).then(function(h){return new Promise(function(f,p){r.decodeDracoFile(h,function(m){for(const y in m.attributes){const A=m.attributes[y],x=l[y];x!==void 0&&(A.normalized=x)}f(m)},a,c,bi,p)})})}}class T9{constructor(){this.name=Ot.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class R9{constructor(){this.name=Ot.KHR_MESH_QUANTIZATION}}class C2 extends Cl{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=i[s+o];return t}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,h=r-t,f=(i-t)/h,p=f*f,m=p*f,y=e*c,A=y-c,x=-2*m+3*p,g=m-p,_=1-x,M=g-p+f;for(let w=0;w!==a;w++){const C=o[A+w+a],R=o[A+w+l]*h,P=o[y+w+a],B=o[y+w]*h;s[w]=_*C+M*R+x*P+g*B}return s}}const I9=new sn;class P9 extends C2{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return I9.fromArray(s).normalize().toArray(s),s}}const Mr={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},kc={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Yb={9728:zn,9729:$t,9984:ph,9985:sl,9986:Vo,9987:Yi},Qb={33071:Ki,33648:ml,10497:Yr},ux={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},N_={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Do={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},B9={CUBICSPLINE:void 0,LINEAR:na,STEP:yl},dx={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function L9(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new oo({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Kr})),n.DefaultMaterial}function Ua(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function ks(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function D9(n,e,t){let i=!1,r=!1,s=!1;for(let c=0,h=e.length;c<h;c++){const f=e[c];if(f.POSITION!==void 0&&(i=!0),f.NORMAL!==void 0&&(r=!0),f.COLOR_0!==void 0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);const o=[],a=[],l=[];for(let c=0,h=e.length;c<h;c++){const f=e[c];if(i){const p=f.POSITION!==void 0?t.getDependency("accessor",f.POSITION):n.attributes.position;o.push(p)}if(r){const p=f.NORMAL!==void 0?t.getDependency("accessor",f.NORMAL):n.attributes.normal;a.push(p)}if(s){const p=f.COLOR_0!==void 0?t.getDependency("accessor",f.COLOR_0):n.attributes.color;l.push(p)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const h=c[0],f=c[1],p=c[2];return i&&(n.morphAttributes.position=h),r&&(n.morphAttributes.normal=f),s&&(n.morphAttributes.color=p),n.morphTargetsRelative=!0,n})}function N9(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function F9(n){let e;const t=n.extensions&&n.extensions[Ot.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+hx(t.attributes):e=n.indices+":"+hx(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,r=n.targets.length;i<r;i++)e+=":"+hx(n.targets[i]);return e}function hx(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function F_(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function U9(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":n.search(/\.ktx2($|\?)/i)>0||n.search(/^data\:image\/ktx2/)===0?"image/ktx2":"image/png"}const O9=new Xe;class k9{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new a9,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=-1,s=!1,o=-1;if(typeof navigator<"u"){const a=navigator.userAgent;i=/^((?!chrome|android).)*safari/i.test(a)===!0;const l=a.match(/Version\/(\d+)/);r=i&&l?parseInt(l[1],10):-1,s=a.indexOf("Firefox")>-1,o=s?a.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||i&&r<17||s&&o<98?this.textureLoader=new zo(this.options.manager):this.textureLoader=new hS(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Ui(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};return Ua(s,a,r),ks(a,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(const l of a.scenes)l.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,h]of o.children.entries())s(h,a.children[c])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Ot.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){i.load(cr.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const r=t.byteLength||0,s=t.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const o=ux[r.type],a=kc[r.componentType],l=r.normalized===!0,c=new a(r.count*o);return Promise.resolve(new yt(c,o,l))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=ux[r.type],c=kc[r.componentType],h=c.BYTES_PER_ELEMENT,f=h*l,p=r.byteOffset||0,m=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,y=r.normalized===!0;let A,x;if(m&&m!==f){const g=Math.floor(p/m),_="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+g+":"+r.count;let M=t.cache.get(_);M||(A=new c(a,g*m,r.count*m/h),M=new au(A,m/h),t.cache.add(_,M)),x=new so(M,l,p%m/h,y)}else a===null?A=new c(r.count*l):A=new c(a,p,r.count*l),x=new yt(A,l,y);if(r.sparse!==void 0){const g=ux.SCALAR,_=kc[r.sparse.indices.componentType],M=r.sparse.indices.byteOffset||0,w=r.sparse.values.byteOffset||0,C=new _(o[1],M,r.sparse.count*g),R=new c(o[2],w,r.sparse.count*l);a!==null&&(x=new yt(x.array.slice(),x.itemSize,x.normalized)),x.normalized=!1;for(let P=0,B=C.length;P<B;P++){const I=C[P];if(x.setX(I,R[P*l]),l>=2&&x.setY(I,R[P*l+1]),l>=3&&x.setZ(I,R[P*l+2]),l>=4&&x.setW(I,R[P*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}x.normalized=y}return x})}loadTexture(e){const t=this.json,i=this.options,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=i.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,i){const r=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,i).then(function(h){h.flipY=!1,h.name=o.name||a.name||"",h.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(h.name=a.uri);const p=(s.samplers||{})[o.sampler]||{};return h.magFilter=Yb[p.magFilter]||$t,h.minFilter=Yb[p.minFilter]||Yi,h.wrapS=Qb[p.wrapS]||Yr,h.wrapT=Qb[p.wrapT]||Yr,h.generateMipmaps=!h.isCompressedTexture&&h.minFilter!==zn&&h.minFilter!==$t,r.associations.set(h,{textures:e}),h}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const i=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(f=>f.clone());const o=r.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=i.getDependency("bufferView",o.bufferView).then(function(f){c=!0;const p=new Blob([f],{type:o.mimeType});return l=a.createObjectURL(p),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const h=Promise.resolve(l).then(function(f){return new Promise(function(p,m){let y=p;t.isImageBitmapLoader===!0&&(y=function(A){const x=new tn(A);x.needsUpdate=!0,p(x)}),t.load(cr.resolveURL(f,s.path),y,void 0,m)})}).then(function(f){return c===!0&&a.revokeObjectURL(l),ks(f,o),f.userData.mimeType=o.mimeType||U9(o.uri),f}).catch(function(f){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),f});return this.sourceCache[e]=h,h}assignTexture(e,t,i,r){const s=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(o=o.clone(),o.channel=i.texCoord),s.extensions[Ot.KHR_TEXTURE_TRANSFORM]){const a=i.extensions!==void 0?i.extensions[Ot.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[Ot.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return r!==void 0&&(o.colorSpace=r),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new wh,pn.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new li,pn.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(a,l)),i=l}if(r||s||o){let a="ClonedMaterial:"+i.uuid+":";r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return oo}loadMaterial(e){const t=this,i=this.json,r=this.extensions,s=i.materials[e];let o;const a={},l=s.extensions||{},c=[];if(l[Ot.KHR_MATERIALS_UNLIT]){const f=r[Ot.KHR_MATERIALS_UNLIT];o=f.getMaterialType(),c.push(f.extendParams(a,s,t))}else{const f=s.pbrMetallicRoughness||{};if(a.color=new Ie(1,1,1),a.opacity=1,Array.isArray(f.baseColorFactor)){const p=f.baseColorFactor;a.color.setRGB(p[0],p[1],p[2],bi),a.opacity=p[3]}f.baseColorTexture!==void 0&&c.push(t.assignTexture(a,"map",f.baseColorTexture,In)),a.metalness=f.metallicFactor!==void 0?f.metallicFactor:1,a.roughness=f.roughnessFactor!==void 0?f.roughnessFactor:1,f.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(a,"metalnessMap",f.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",f.metallicRoughnessTexture))),o=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=Cr);const h=s.alphaMode||dx.OPAQUE;if(h===dx.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,h===dx.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==xn&&(c.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new ue(1,1),s.normalTexture.scale!==void 0)){const f=s.normalTexture.scale;a.normalScale.set(f,f)}if(s.occlusionTexture!==void 0&&o!==xn&&(c.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==xn){const f=s.emissiveFactor;a.emissive=new Ie().setRGB(f[0],f[1],f[2],bi)}return s.emissiveTexture!==void 0&&o!==xn&&c.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,In)),Promise.all(c).then(function(){const f=new o(a);return s.name&&(f.name=s.name),ks(f,s),t.associations.set(f,{materials:e}),s.extensions&&Ua(r,f,s),f})}createUniqueName(e){const t=Ht.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(a){return i[Ot.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return qb(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],h=F9(c),f=r[h];if(f)o.push(f.promise);else{let p;c.extensions&&c.extensions[Ot.KHR_DRACO_MESH_COMPRESSION]?p=s(c):p=qb(new gt,c,t),r[h]={primitive:c,promise:p},o.push(p)}}return Promise.all(o)}loadMesh(e){const t=this,i=this.json,r=this.extensions,s=i.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const h=o[l].material===void 0?L9(this.cache):this.getDependency("material",o[l].material);a.push(h)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),h=l[l.length-1],f=[];for(let m=0,y=h.length;m<y;m++){const A=h[m],x=o[m];let g;const _=c[m];if(x.mode===Mr.TRIANGLES||x.mode===Mr.TRIANGLE_STRIP||x.mode===Mr.TRIANGLE_FAN||x.mode===void 0)g=s.isSkinnedMesh===!0?new e0(A,_):new Yt(A,_),g.isSkinnedMesh===!0&&g.normalizeSkinWeights(),x.mode===Mr.TRIANGLE_STRIP?g.geometry=Jb(g.geometry,gh):x.mode===Mr.TRIANGLE_FAN&&(g.geometry=Jb(g.geometry,xl));else if(x.mode===Mr.LINES)g=new Lr(A,_);else if(x.mode===Mr.LINE_STRIP)g=new As(A,_);else if(x.mode===Mr.LINE_LOOP)g=new t0(A,_);else if(x.mode===Mr.POINTS)g=new n0(A,_);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+x.mode);Object.keys(g.geometry.morphAttributes).length>0&&N9(g,s),g.name=t.createUniqueName(s.name||"mesh_"+e),ks(g,s),x.extensions&&Ua(r,g,x),t.assignFinalMaterial(g),f.push(g)}for(let m=0,y=f.length;m<y;m++)t.associations.set(f[m],{meshes:e,primitives:m});if(f.length===1)return s.extensions&&Ua(r,f[0],s),f[0];const p=new Rr;s.extensions&&Ua(r,p,s),t.associations.set(p,{meshes:e});for(let m=0,y=f.length;m<y;m++)p.add(f[m]);return p})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new vn(XA.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(t=new gs(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),ks(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let r=0,s=t.joints.length;r<s;r++)i.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){const s=r.pop(),o=r,a=[],l=[];for(let c=0,h=o.length;c<h;c++){const f=o[c];if(f){a.push(f);const p=new Xe;s!==null&&p.fromArray(s.array,c*16),l.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new lu(a,l)})}loadAnimation(e){const t=this.json,i=this,r=t.animations[e],s=r.name?r.name:"animation_"+e,o=[],a=[],l=[],c=[],h=[];for(let f=0,p=r.channels.length;f<p;f++){const m=r.channels[f],y=r.samplers[m.sampler],A=m.target,x=A.node,g=r.parameters!==void 0?r.parameters[y.input]:y.input,_=r.parameters!==void 0?r.parameters[y.output]:y.output;A.node!==void 0&&(o.push(this.getDependency("node",x)),a.push(this.getDependency("accessor",g)),l.push(this.getDependency("accessor",_)),c.push(y),h.push(A))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c),Promise.all(h)]).then(function(f){const p=f[0],m=f[1],y=f[2],A=f[3],x=f[4],g=[];for(let _=0,M=p.length;_<M;_++){const w=p[_],C=m[_],R=y[_],P=A[_],B=x[_];if(w===void 0)continue;w.updateMatrix&&w.updateMatrix();const I=i._createAnimationTracks(w,C,R,P,B);if(I)for(let b=0;b<I.length;b++)g.push(I[b])}return new Al(s,void 0,g)})}createNodeMesh(e){const t=this.json,i=this,r=t.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=r.weights.length;l<c;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(e){const t=this.json,i=this,r=t.nodes[e],s=i._loadNodeShallow(e),o=[],a=r.children||[];for(let c=0,h=a.length;c<h;c++)o.push(i.getDependency("node",a[c]));const l=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),l]).then(function(c){const h=c[0],f=c[1],p=c[2];p!==null&&h.traverse(function(m){m.isSkinnedMesh&&m.bind(p,O9)});for(let m=0,y=f.length;m<y;m++)h.add(f[m]);return h})}_loadNodeShallow(e){const t=this.json,i=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?r.createUniqueName(s.name):"",a=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(r.getDependency("camera",s.camera).then(function(c){return r._getNodeRef(r.cameraCache,s.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let h;if(s.isBone===!0?h=new Sh:c.length>1?h=new Rr:c.length===1?h=c[0]:h=new Rt,h!==c[0])for(let f=0,p=c.length;f<p;f++)h.add(c[f]);if(s.name&&(h.userData.name=s.name,h.name=o),ks(h,s),s.extensions&&Ua(i,h,s),s.matrix!==void 0){const f=new Xe;f.fromArray(s.matrix),h.applyMatrix4(f)}else s.translation!==void 0&&h.position.fromArray(s.translation),s.rotation!==void 0&&h.quaternion.fromArray(s.rotation),s.scale!==void 0&&h.scale.fromArray(s.scale);return r.associations.has(h)||r.associations.set(h,{}),r.associations.get(h).nodes=e,h}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],r=this,s=new Rr;i.name&&(s.name=r.createUniqueName(i.name)),ks(s,i),i.extensions&&Ua(t,s,i);const o=i.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(r.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let h=0,f=l.length;h<f;h++)s.add(l[h]);const c=h=>{const f=new Map;for(const[p,m]of r.associations)(p instanceof pn||p instanceof tn)&&f.set(p,m);return h.traverse(p=>{const m=r.associations.get(p);m!=null&&f.set(p,m)}),f};return r.associations=c(s),s})}_createAnimationTracks(e,t,i,r,s){const o=[],a=e.name?e.name:e.uuid,l=[];Do[s.path]===Do.weights?e.traverse(function(p){p.morphTargetInfluences&&l.push(p.name?p.name:p.uuid)}):l.push(a);let c;switch(Do[s.path]){case Do.weights:c=ao;break;case Do.rotation:c=lo;break;case Do.position:case Do.scale:c=co;break;default:switch(i.itemSize){case 1:c=ao;break;case 2:case 3:default:c=co;break}break}const h=r.interpolation!==void 0?B9[r.interpolation]:na,f=this._getArrayFromAccessor(i);for(let p=0,m=l.length;p<m;p++){const y=new c(l[p]+"."+Do[s.path],t.array,f,h);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(y),o.push(y)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=F_(t.constructor),r=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)r[s]=t[s]*i;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){const r=this instanceof lo?P9:C2;return new r(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function z9(n,e,t){const i=e.attributes,r=new si;if(i.POSITION!==void 0){const a=t.json.accessors[i.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(r.set(new N(l[0],l[1],l[2]),new N(c[0],c[1],c[2])),a.normalized){const h=F_(kc[a.componentType]);r.min.multiplyScalar(h),r.max.multiplyScalar(h)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new N,l=new N;for(let c=0,h=s.length;c<h;c++){const f=s[c];if(f.POSITION!==void 0){const p=t.json.accessors[f.POSITION],m=p.min,y=p.max;if(m!==void 0&&y!==void 0){if(l.setX(Math.max(Math.abs(m[0]),Math.abs(y[0]))),l.setY(Math.max(Math.abs(m[1]),Math.abs(y[1]))),l.setZ(Math.max(Math.abs(m[2]),Math.abs(y[2]))),p.normalized){const A=F_(kc[p.componentType]);l.multiplyScalar(A)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;const o=new Hn;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=o}function qb(n,e,t){const i=e.attributes,r=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in i){const a=N_[o]||o.toLowerCase();a in n.attributes||r.push(s(i[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});r.push(o)}return Ft.workingColorSpace!==bi&&"COLOR_0"in i&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${Ft.workingColorSpace}" not supported.`),ks(n,e),z9(n,e,t),Promise.all(r).then(function(){return e.targets!==void 0?D9(n,e.targets,t):n})}new Xe;new Xe;function H9(n){const e=new Map,t=new Map,i=n.clone();return T2(n,i,function(r,s){e.set(s,r),t.set(r,s)}),i.traverse(function(r){if(!r.isSkinnedMesh)return;const s=r,o=e.get(r),a=o.skeleton.bones;s.skeleton=o.skeleton.clone(),s.bindMatrix.copy(o.bindMatrix),s.skeleton.bones=a.map(function(l){return t.get(l)}),s.bind(s.skeleton,s.bindMatrix)}),i}function T2(n,e,t){t(n,e);for(let i=0;i<n.children.length;i++)T2(n.children[i],e.children[i],t)}function G9({scene:n}){const e=H9(n),t=e.getObjectByProperty("type","SkinnedMesh");if(t==null)throw new Error("missing SkinnedMesh in loaded XRHand model");return t.frustumCulled=!1,e}function V9(n,e){n.renderOrder=(e==null?void 0:e.renderOrder)??0,n.traverse(t=>{t instanceof Yt&&t.material instanceof pn&&(t.material.colorWrite=(e==null?void 0:e.colorWrite)??!0)})}const W9=["wrist","thumb-metacarpal","thumb-phalanx-proximal","thumb-phalanx-distal","thumb-tip","index-finger-metacarpal","index-finger-phalanx-proximal","index-finger-phalanx-intermediate","index-finger-phalanx-distal","index-finger-tip","middle-finger-metacarpal","middle-finger-phalanx-proximal","middle-finger-phalanx-intermediate","middle-finger-phalanx-distal","middle-finger-tip","ring-finger-metacarpal","ring-finger-phalanx-proximal","ring-finger-phalanx-intermediate","ring-finger-phalanx-distal","ring-finger-tip","pinky-finger-metacarpal","pinky-finger-phalanx-proximal","pinky-finger-phalanx-intermediate","pinky-finger-phalanx-distal","pinky-finger-tip"];function j9(n,e,t){const i=new Float32Array(n.size*16),r=W9.map(s=>{const o=e.getObjectByName(s);if(o==null)throw new Error(`missing joint "${s}" in hand model`);return o.matrixAutoUpdate=!1,o});return s=>{const o=typeof t=="function"?t():t;if(s==null||o==null)return;s.fillPoses(n.values(),o,i);const a=r.length;for(let l=0;l<a;l++)r[l].matrix.fromArray(i,l*16)}}function X9(n){return n!=null&&typeof n=="object"&&"inputSource"in n}class J9 extends xn{constructor(){super({transparent:!0,toneMapped:!1,depthWrite:!1})}onBeforeCompile(e,t){super.onBeforeCompile(e,t),e.vertexShader=`varying vec2 vLocalPosition;
`+e.vertexShader,e.vertexShader=e.vertexShader.replace("#include <color_vertex>",`#include <color_vertex>
        vLocalPosition = position.xy * 2.0;`),e.fragmentShader=`varying vec2 vLocalPosition;
`+e.fragmentShader,e.fragmentShader=e.fragmentShader.replace("#include <color_fragment>",`#include <color_fragment>
          float value = max(0.0, 1.0 - sqrt(dot(vLocalPosition, vLocalPosition)));
          diffuseColor.a = diffuseColor.a * value * value;`)}}const K9=new N(0,0,1),Zb=new sn,fx=new N;function Y9(n,e,t,i,r){var l;const s=i.getIntersection();if(s==null||!i.getEnabled()||s.object.isVoidObject===!0||!R2(n)){e.visible=!1;return}e.visible=!0;const o=typeof r.color=="function"?r.color(i):r.color;Array.isArray(o)?t.color.set(...o):t.color.set(o??"white"),t.opacity=typeof r.opacity=="function"?r.opacity(i):r.opacity??.4,e.position.copy(s.pointOnFace),e.scale.setScalar(r.size??.1);const a=s.normal??((l=s.face)==null?void 0:l.normal);a!=null&&(Zb.setFromUnitVectors(K9,a),s.object.getWorldQuaternion(e.quaternion),e.quaternion.multiply(Zb),fx.set(0,0,r.cursorOffset??.01),fx.applyQuaternion(e.quaternion),e.position.add(fx)),e.updateMatrix()}function R2({visible:n,parent:e}){return n?e==null?!0:R2(e):!1}class Q9 extends xn{constructor(){super({transparent:!0,toneMapped:!1})}onBeforeCompile(e,t){super.onBeforeCompile(e,t),e.vertexShader=`varying float vFade;
`+e.vertexShader,e.vertexShader=e.vertexShader.replace("#include <color_vertex>",`#include <color_vertex>
            vFade = position.z + 0.5;`),e.fragmentShader=`varying float vFade;
`+e.fragmentShader,e.fragmentShader=e.fragmentShader.replace("#include <color_fragment>",`#include <color_fragment>
              diffuseColor.a *= vFade;`)}}function q9(n,e,t,i){const r=t.getIntersection();if(!t.getEnabled()||r==null){n.visible=!1;return}n.visible=!0;const s=typeof i.color=="function"?i.color(t):i.color;Array.isArray(s)?e.color.set(...s):e.color.set(s??"white"),e.opacity=typeof i.opacity=="function"?i.opacity(t):i.opacity??.4;const o=Math.min(i.maxLength??1,r.distance);n.position.z=-o/2;const a=i.size??.005;n.scale.set(a,a,o),n.updateMatrix()}function Z9(n,e,t,i,r,s={}){const o=f=>{f.inputSource===t&&n.down(Object.assign(f,{button:s.button??0}))},a=f=>{f.inputSource===t&&n.up(Object.assign(f,{button:s.button??0}))},l=`${i}start`,c=`${i}end`,h=r.length;for(let f=0;f<h;f++){const p=r[f];switch(p.type){case l:o(p);break;case c:a(p);break}}return e.addEventListener(l,o),e.addEventListener(c,a),()=>{e.removeEventListener(l,o),e.removeEventListener(c,a)}}function $9(n){var e;return n.getButtonsDown().size>0?.6:e8(((e=n.getIntersection())==null?void 0:e.distance)??1/0,.07,0,.2,.4)}function e8(n,e,t,i,r){return i+Math.max(0,Math.min(1,(n-e)/(t-e)))*(r-i)}function t8(n,e){return(t,i)=>{if(n===e)return t.identity(),!0;const r=typeof e=="function"?e():e;if(r==null)return!1;const s=i==null?void 0:i.getPose(n,r);return s==null?!1:(t.fromArray(s.transform.matrix),!0)}}function M0(n,e,t,i){i==null||i.copy(n.matrix);const r=I2(n.parent,i);return r??(i!=null&&n8(n,e,i),t)}function n8(n,e,t){if(n.updateWorldMatrix(!0,!1),e==null){t.copy(n.matrixWorld);return}e.updateWorldMatrix(!0,!1),t.copy(e.matrixWorld).invert().multiply(n.matrixWorld)}function I2(n,e){if(n!=null)return n.xrSpace!=null?n.xrSpace:(e==null||e.premultiply(n.matrix),I2(n.parent,e))}new N;new N;new N;new ca;new bl;async function i8(n,e=X8){const{scene:t}=await e.loadAsync(n.assetPath);return t.clone(!0)}function r8(n,e){n.renderOrder=(e==null?void 0:e.renderOrder)??0,n.traverse(t=>{t instanceof Yt&&t.material instanceof pn&&(t.material.colorWrite=(e==null?void 0:e.colorWrite)??!0)})}function s8(n,e,t){const i=[];for(const r in e.components){const s=e.components[r];let o=t[r];o==null&&(t[r]=o={state:"default"}),i.push(...Object.values(s.visualResponses).map(a=>o8(n,o,a)))}return()=>{const r=i.length;for(let s=0;s<r;s++)i[s]()}}function o8(n,e,t){const i=n.getObjectByName(t.valueNodeName);if(e.object=i,i==null)return()=>{};if(t.valueNodeProperty==="visibility")return()=>i.visible=t.states.includes(e.state);const r=n.getObjectByName(t.minNodeName),s=n.getObjectByName(t.maxNodeName);return r==null||s==null?()=>{}:()=>{const o=a8(e,t);i.quaternion.slerpQuaternions(r.quaternion,s.quaternion,o),i.position.lerpVectors(r.position,s.position,o),i.updateMatrix()}}function a8(n,{componentProperty:e,states:t}){const i=t.includes(n.state);switch(e){case"xAxis":return i?$b(n).x:.5;case"yAxis":return i?$b(n).y:.5;case"button":return i?n.button??0:0;case"state":return i?1:0}}const id=new ue;function $b({xAxis:n=0,yAxis:e=0}){if(id.lengthSq()>1){const i=Math.atan2(e,n);id.set(Math.cos(i),Math.sin(i))}else id.set(n,e);return id.multiplyScalar(.5).addScalar(.5),id}class l8{constructor(e){pt(this,"nativeEvent");pt(this,"NONE",0);pt(this,"CAPTURING_PHASE",1);pt(this,"AT_TARGET",2);pt(this,"BUBBLING_PHASE",3);pt(this,"relatedTarget",null);this.nativeEvent=e}get altKey(){return this.getFromNative("altKey",!1)}get button(){return this.getFromNative("button",0)}get buttons(){return this.getFromNative("buttons",0)}get clientX(){return this.getFromNative("clientX",0)}get clientY(){return this.getFromNative("clientY",0)}get ctrlKey(){return this.getFromNative("ctrlKey",!1)}get layerX(){return this.getFromNative("layerX",0)}get layerY(){return this.getFromNative("layerY",0)}get metaKey(){return this.getFromNative("metaKey",!1)}get movementX(){return this.getFromNative("movementX",0)}get movementY(){return this.getFromNative("movementY",0)}get offsetX(){return this.getFromNative("offsetX",0)}get offsetY(){return this.getFromNative("offsetY",0)}get pageX(){return this.getFromNative("pageX",0)}get pageY(){return this.getFromNative("pageY",0)}get screenX(){return this.getFromNative("screenX",0)}get screenY(){return this.getFromNative("screenY",0)}get shiftKey(){return this.getFromNative("shiftKey",!1)}get x(){return this.getFromNative("x",0)}get y(){return this.getFromNative("y",0)}get detail(){return this.getFromNative("detail",0)}get view(){return this.getFromNative("view",null)}get which(){return this.getFromNative("which",0)}get cancelBubble(){return this.getFromNative("cancelBubble",!1)}get composed(){return this.getFromNative("composed",!1)}get eventPhase(){return this.getFromNative("eventPhase",0)}get isTrusted(){return this.getFromNative("isTrusted",!1)}get returnValue(){return this.getFromNative("returnValue",!1)}get timeStamp(){return this.getFromNative("timeStamp",0)}get cancelable(){return this.getFromNative("cancelable",!1)}get defaultPrevented(){return this.getFromNative("defaultPrevented",!1)}getFromNative(e,t){return e in this.nativeEvent?this.nativeEvent[e]:t}}const px=new N;class _i extends l8{constructor(t,i,r,s,o,a,l=o.object,c=l,h={stopped:!i,stoppedImmediate:!1}){super(r);pt(this,"type");pt(this,"bubbles");pt(this,"internalPointer");pt(this,"intersection");pt(this,"camera");pt(this,"currentObject");pt(this,"object");pt(this,"propagationState");pt(this,"_pointer");pt(this,"_ray");pt(this,"_intersections",[]);pt(this,"_unprojectedPoint");this.type=t,this.bubbles=i,this.internalPointer=s,this.intersection=o,this.camera=a,this.currentObject=l,this.object=c,this.propagationState=h}get pointerId(){return this.internalPointer.id}get pointerType(){return this.internalPointer.type}get pointerState(){return this.internalPointer.state}get distance(){return this.intersection.distance}get distanceToRay(){return this.intersection.distanceToRay}get point(){return this.intersection.point}get index(){return this.intersection.index}get face(){return this.intersection.face}get faceIndex(){return this.intersection.faceIndex}get uv(){return this.intersection.uv}get uv1(){return this.intersection.uv1}get normal(){return this.intersection.normal}get instanceId(){return this.intersection.instanceId}get pointOnLine(){return this.intersection.pointOnLine}get batchId(){return this.intersection.batchId}get pointerPosition(){return this.intersection.pointerPosition}get pointerQuaternion(){return this.intersection.pointerQuaternion}get pointOnFace(){return this.intersection.pointOnFace}get localPoint(){return this.intersection.localPoint}get details(){return this.intersection.details}get target(){return this.object}get currentTarget(){return this.currentObject}get eventObject(){return this.currentObject}get srcElement(){return this.currentObject}get pointer(){return this._pointer==null&&(px.copy(this.intersection.point).project(this.camera),this._pointer=new ue(px.x,px.y)),this._pointer}get ray(){if(this._ray!=null)return this._ray;switch(this.intersection.details.type){case"screen-ray":case"ray":case"sphere":return this._ray=new _s(this.intersection.pointerPosition,new N(0,0,-1).applyQuaternion(this.intersection.pointerQuaternion));case"lines":return this._ray=new _s(this.intersection.details.line.start,this.intersection.details.line.end.clone().sub(this.intersection.details.line.start).normalize())}}get intersections(){return this._intersections==null&&(this._intersections=[{...this.intersection,eventObject:this.currentObject}]),this._intersections}get unprojectedPoint(){if(this._unprojectedPoint==null){const t=this.pointer;this._unprojectedPoint=new N(t.x,t.y,0).unproject(this.camera)}return this._unprojectedPoint}get stopped(){return this.propagationState.stoppedImmediate||this.propagationState.stopped}get stoppedImmediate(){return this.propagationState.stoppedImmediate}get delta(){throw new Error("not supported")}stopPropagation(){this.propagationState.stopped=!0}stopImmediatePropagation(){this.propagationState.stoppedImmediate=!0}retarget(t){return new _i(this.type,this.bubbles,this.nativeEvent,this.internalPointer,this.intersection,this.camera,t,this.target,this.propagationState)}}class Ag extends _i{get deltaX(){return this.nativeEvent.deltaX}get deltaY(){return this.nativeEvent.deltaY}get deltaZ(){return this.nativeEvent.deltaZ}constructor(e,t,i,r,s,o){super("wheel",!0,e,t,i,r,s,o)}retarget(e){return new Ag(this.nativeEvent,this.internalPointer,this.intersection,this.camera,e,this.target)}}function Wi(n){P2(n,n.currentObject)}function P2(n,e){if(e==null)return;const t=u8(e,n.type);if(t!=null&&t.length>0){const i=n.retarget(e),r=t.length;for(let s=0;s<r&&!i.stoppedImmediate;s++)t[s](i)}n.stopped||P2(n,e.parent)}const B2={click:"onClick",contextmenu:"onContextMenu",dblclick:"onDoubleClick",pointercancel:"onPointerCancel",pointerdown:"onPointerDown",pointerenter:"onPointerEnter",pointerleave:"onPointerLeave",pointermove:"onPointerMove",pointerout:"onPointerOut",pointerover:"onPointerOver",pointerup:"onPointerUp",wheel:"onWheel"},c8=Object.keys(B2);function u8(n,e){var i;if(n._listeners!=null&&e in n._listeners)return n._listeners[e];let t;if(n.isVoidObject&&e==="click"&&((i=n.parent)==null?void 0:i.__r3f)!=null&&(t=n.parent.__r3f.root.getState().onPointerMissed),n.__r3f!=null&&(t=n.__r3f.handlers[B2[e]]),t!=null)return[t]}const d8=1e10,h8=new qs(d8),eC=new Map;function f8(n){let e=eC.get(n);return e==null&&(e=new Yt(h8),e.isVoidObject=!0,e.parent=n,e.pointerEventsOrder=-1/0,eC.set(n,e)),e}function p8(n,e,t){var r;const i=e.normal??((r=e.face)==null?void 0:r.normal);return i==null?!1:(n.setFromNormalAndCoplanarPoint(i,e.localPoint),n.applyMatrix4(t),!0)}function m8(n,e,t){if(e==="none"||e==="listener"&&!n)return!1;if(t==="all")return!0;if(typeof t=="function")return({id:s,type:o,state:a})=>t(s,o,a);let i,r;return"deny"in t?(r=!0,i=t.deny):(r=!1,i=t.allow),Array.isArray(i)?s=>tC(i.includes(s.type),r):s=>tC(i===s.type,r)}function tC(n,e){return e?!n:n}function L2(n,e,t,i=!1,r,s,o){const a=i||g8(n,e),l=e.pointerEvents??r,c=l??e.defaultPointerEvents??"listener",h=e.pointerEventsType??s??"all",f=e.pointerEventsOrder??o??0,p=m8(a,c,h),m=t.length;if(m===1)(p===!0||typeof p=="function"&&p(t[0]))&&mx(t[0],e,c,h,f);else if(p===!0)for(let x=0;x<m;x++)mx(t[x],e,c,h,f);else if(typeof p=="function")for(let x=0;x<m;x++){const g=t[x];p(g)&&mx(g,e,c,h,f)}if(e.children.length===0||e.intersectChildren===!1)return;const y=e.interactableDescendants??e.children,A=y.length;for(let x=0;x<A;x++)L2(n,y[x],t,a,l,h,f)}function g8(n,e){var r;if(e.ancestorsHaveListeners||n==="pointer"&&e.ancestorsHavePointerListeners||n==="wheel"&&e.ancestorsHaveWheelListeners||e.__r3f!=null&&((r=e.__r3f)==null?void 0:r.eventCount)>0&&(n==="wheel"&&e.__r3f.handlers.onWheel!=null||n==="pointer"&&Object.keys(e.__r3f.handlers).some(s=>s!="onWheel")))return!0;if(e._listeners==null)return!1;if(n==="wheel"){const s=e._listeners.wheel;return s!=null&&s.length>0}const t=Object.entries(e._listeners),i=t.length;for(let s=0;s<i;s++){const o=t[s];if(o[0]!=="wheel"&&c8.includes(o[0])&&o[1]!=null&&o[1].length>0)return!0}return!1}function mx({intersector:n,options:e},t,i,r,s){var o;((o=e.filter)==null?void 0:o.call(e,t,i,r,s))!==!1&&n.executeIntersection(t,s)}function v8(n,e,{customSort:t=y8}={},i){let r,s,o;const a=n.length;for(let l=0;l<a;l++){const c=n[l],h=e==null?void 0:e[l];(r==null||t(c,h,r,s)<0)&&(o=l,r=c,s=h)}return o}function y8(n,e=0,t,i=0){return e!=i?i-e:n.distance-t.distance}const rd=Symbol("buttonsDownTime"),gx=Symbol("buttonsClickTime");globalThis.pointerEventspointerMap??(globalThis.pointerEventspointerMap=new Map);Rt.prototype.setPointerCapture=function(n){var e;(e=bS(n))==null||e.setCapture(this)};Rt.prototype.releasePointerCapture=function(n){const e=bS(n);e==null||!e.hasCaptured(this)||e.setCapture(void 0)};Rt.prototype.hasPointerCapture=function(n){var e;return((e=bS(n))==null?void 0:e.hasCaptured(this))??!1};function bS(n){var e;return(e=globalThis.pointerEventspointerMap)==null?void 0:e.get(n)}class D2{constructor(e,t,i,r,s,o,a,l,c={}){pt(this,"id");pt(this,"type");pt(this,"state");pt(this,"intersector");pt(this,"getCamera");pt(this,"onMoveCommited");pt(this,"parentSetPointerCapture");pt(this,"parentReleasePointerCapture");pt(this,"options");pt(this,"prevIntersection");pt(this,"intersection");pt(this,"prevEnabled",!0);pt(this,"enabled",!0);pt(this,"wheelIntersection");pt(this,"pointerEntered",[]);pt(this,"pointerEnteredHelper",[]);pt(this,"pointerCapture");pt(this,"buttonsDownTime",new Map);pt(this,"buttonsDown",new Set);pt(this,"wasMoved",!1);pt(this,"onFirstMove",[]);var h;this.id=e,this.type=t,this.state=i,this.intersector=r,this.getCamera=s,this.onMoveCommited=o,this.parentSetPointerCapture=a,this.parentReleasePointerCapture=l,this.options=c,(h=globalThis.pointerEventspointerMap)==null||h.set(e,this)}getPointerCapture(){return this.pointerCapture}hasCaptured(e){var t;return((t=this.pointerCapture)==null?void 0:t.object)===e}setCapture(e){var t,i,r;((t=this.pointerCapture)==null?void 0:t.object)!==e&&(this.pointerCapture!=null&&((i=this.parentReleasePointerCapture)==null||i.call(this),this.pointerCapture=void 0),e!=null&&this.intersection!=null&&(this.pointerCapture={object:e,intersection:this.intersection},(r=this.parentSetPointerCapture)==null||r.call(this)))}getButtonsDown(){return this.buttonsDown}getIntersection(){return this.intersection}getEnabled(){return this.enabled}setEnabled(e,t,i=!0){var r;this.enabled!==e&&(!e&&this.pointerCapture!=null&&((r=this.parentReleasePointerCapture)==null||r.call(this),this.pointerCapture=void 0),this.enabled=e,i&&this.commit(t,!1))}computeIntersection(e,t,i){return this.pointerCapture!=null?this.intersector.intersectPointerCapture(this.pointerCapture,i):(this.intersector.startIntersection(i),L2(e,t,[this]),this.intersector.finalizeIntersection(t))}setIntersection(e){this.intersection=e}commit(e,t){var l;const i=this.getCamera(),r=this.prevEnabled?this.prevIntersection:void 0,s=this.enabled?this.intersection:void 0;r!=null&&r.object!=(s==null?void 0:s.object)&&Wi(new _i("pointerout",!0,e,this,r,i));const o=this.pointerEntered;this.pointerEntered=[],this.pointerEnteredHelper.length=0,N2(s==null?void 0:s.object,this.pointerEntered,o,this.pointerEnteredHelper);const a=o.length;for(let c=0;c<a;c++){const h=o[c];Wi(new _i("pointerleave",!1,e,this,r,i,h))}s!=null&&(r==null?void 0:r.object)!=s.object&&Wi(new _i("pointerover",!0,e,this,s,i));for(let c=this.pointerEnteredHelper.length-1;c>=0;c--){const h=this.pointerEnteredHelper[c];Wi(new _i("pointerenter",!1,e,this,s,i,h))}if(t&&s!=null&&Wi(new _i("pointermove",!0,e,this,s,i)),this.prevIntersection=this.intersection,this.prevEnabled=this.enabled,!this.wasMoved&&this.intersector.isReady()){this.wasMoved=!0;const c=this.onFirstMove.length;for(let h=0;h<c;h++)this.onFirstMove[h](i);this.onFirstMove.length=0}(l=this.onMoveCommited)==null||l.call(this,this)}move(e,t){this.intersection=this.computeIntersection("pointer",e,t),this.commit(t,!0)}emitMove(e){this.intersection!=null&&Wi(new _i("pointermove",!0,e,this,this.intersection,this.getCamera()))}down(e){if(this.buttonsDown.add(e.button),!this.enabled)return;if(!this.wasMoved){this.onFirstMove.push(this.down.bind(this,e));return}if(this.intersection==null)return;Wi(new _i("pointerdown",!0,e,this,this.intersection,this.getCamera()));const{object:t}=this.intersection;t[rd]??(t[rd]=new Map),t[rd].set(e.button,e.timeStamp),this.buttonsDownTime.set(e.button,e.timeStamp)}up(e){if(this.buttonsDown.delete(e.button),!this.enabled)return;if(!this.wasMoved){this.onFirstMove.push(this.up.bind(this,e));return}if(this.intersection==null)return;const{clickThesholdMs:t,contextMenuButton:i=2,dblClickThresholdMs:r=500,clickThresholdMs:s=t??300}=this.options;this.pointerCapture=void 0;const o=x8(this.buttonsDownTime,this.intersection.object[rd],e.button,e.timeStamp,s),a=this.getCamera();if(o&&e.button===i&&Wi(new _i("contextmenu",!0,e,this,this.intersection,a)),Wi(new _i("pointerup",!0,e,this,this.intersection,a)),!o||e.button===i)return;Wi(new _i("click",!0,e,this,this.intersection,a));const{object:l}=this.intersection,c=l[gx]??(l[gx]=new Map),h=c.get(e.button);if(h==null||e.timeStamp-h>r){c.set(e.button,e.timeStamp);return}Wi(new _i("dblclick",!0,e,this,this.intersection,a)),c.delete(e.button)}cancel(e){if(this.enabled){if(!this.wasMoved){this.onFirstMove.push(this.cancel.bind(this,e));return}this.intersection!=null&&Wi(new _i("pointercancel",!0,e,this,this.intersection,this.getCamera()))}}wheel(e,t,i=!1){if(!this.enabled)return;if(!this.wasMoved&&i){this.onFirstMove.push(this.wheel.bind(this,e,t,i));return}i||(this.wheelIntersection=this.computeIntersection("wheel",e,t));const r=i?this.intersection:this.wheelIntersection;r!=null&&Wi(new Ag(t,this,r,this.getCamera()))}emitWheel(e,t=!1){if(!this.enabled)return;if(!this.wasMoved&&t){this.onFirstMove.push(this.emitWheel.bind(this,e,t));return}const i=t?this.intersection:this.wheelIntersection;i!=null&&Wi(new Ag(e,this,i,this.getCamera()))}exit(e){var t;this.wasMoved&&(this.pointerCapture!=null&&((t=this.parentReleasePointerCapture)==null||t.call(this),this.pointerCapture=void 0),this.intersection=void 0,this.commit(e,!1)),this.onFirstMove.length=0,this.wasMoved=!1}}function N2(n,e,t,i){if(n==null)return;const r=t.indexOf(n);r!=-1?t.splice(r,1):i.push(n),e.push(n),N2(n.parent,e,t,i)}function x8(n,e,t,i,r){if(e==null)return!1;const s=e.get(t);return!(s==null||i-s>r||s!=n.get(t))}function F2(n){return n.transformReady===!1?!1:n.parent==null?(n.matrixWorld.copy(n.matrix),!0):F2(n.parent)?(n.matrixWorld.multiplyMatrices(n.parent.matrixWorld,n.matrix),!0):!1}const sd=new Si,vx=new Si,nC=new ue,iC=new ue,rC=new ue,yx=new N,_8=new Xe,Vp=new N;function U2(n,e,t){Vp.copy(e).applyMatrix4(_8.copy(t.matrixWorld).invert());const i=t.geometry.attributes.uv;if(i==null||!(i instanceof yt))return!1;let r;return A8(t,(s,o,a)=>{t.getVertexPosition(s,sd.a),t.getVertexPosition(o,sd.b),t.getVertexPosition(a,sd.c);const l=sd.closestPointToPoint(Vp,yx).distanceTo(Vp);r!=null&&l>=r||(r=l,vx.copy(sd),nC.fromBufferAttribute(i,s),iC.fromBufferAttribute(i,o),rC.fromBufferAttribute(i,a))}),r==null?!1:(vx.closestPointToPoint(Vp,yx),vx.getInterpolation(yx,nC,iC,rC,n),!0)}function A8(n,e){const t=n.geometry.drawRange;if(n.geometry.index!=null){const o=n.geometry.index,a=Math.max(0,t.start),l=Math.min(o.count,t.start+t.count);for(let c=a;c<l;c+=3)e(o.getX(c),o.getX(c+1),o.getX(c+2));return}const i=n.geometry.attributes.position;if(i==null)return;const r=Math.max(0,t.start),s=Math.min(i.count,t.start+t.count);for(let o=r;o<s;o+=3)e(o,o+1,o+2)}new Xe;new TP;new N;new br;new _s;new ue;new N(0,0,0),new N(0,0,1);new Xe;new N;new N(0,0,-1);new br;new ue;new N;const S8=new N,Sg=new ue;class M8{constructor(e,t,i){pt(this,"space");pt(this,"getSphereRadius");pt(this,"options");pt(this,"fromPosition",new N);pt(this,"fromQuaternion",new sn);pt(this,"collisionSphere",new Hn);pt(this,"ready");pt(this,"intersects",[]);this.space=e,this.getSphereRadius=t,this.options=i}isReady(){return this.ready??this.prepareTransformation()}prepareTransformation(){const e=this.space.current;return e==null?this.ready=!1:(this.ready=F2(e),this.ready?(e.matrixWorld.decompose(this.fromPosition,this.fromQuaternion,S8),!0):!1)}intersectPointerCapture({intersection:e,object:t}){if(e.details.type!="sphere")throw new Error(`unable to process a pointer capture of type "${e.details.type}" with a sphere intersector`);if(!this.prepareTransformation())return e;sC.copy(e.point).sub(e.pointerPosition),oC.copy(e.pointerQuaternion).invert().multiply(this.fromQuaternion);const i=sC.clone().applyQuaternion(oC).add(this.fromPosition);e.object.updateWorldMatrix(!0,!1),p8(aC,e,e.object.matrixWorld);const r=aC.projectPoint(this.fromPosition,new N);let s=e.uv;return e.object instanceof Yt&&U2(Sg,i,e.object)&&(s=Sg.clone()),{details:{type:"sphere"},uv:s,distance:i.distanceTo(r),pointerPosition:this.fromPosition.clone(),pointerQuaternion:this.fromQuaternion.clone(),object:t,point:i,pointOnFace:r,face:e.face,localPoint:e.localPoint}}startIntersection(){this.prepareTransformation()&&(this.collisionSphere.center.copy(this.fromPosition),this.collisionSphere.radius=this.getSphereRadius())}executeIntersection(e){this.isReady()&&w8(this.collisionSphere,e,this.intersects)}finalizeIntersection(e){const t=this.fromPosition.clone(),i=this.fromQuaternion.clone(),r=v8(this.intersects,void 0,this.options),s=r==null?void 0:this.intersects[r];return this.intersects.length=0,s==null?{details:{type:"sphere"},distance:0,point:t,object:f8(e),pointerPosition:t,pointerQuaternion:i,pointOnFace:t,localPoint:t}:(s.object.updateWorldMatrix(!0,!1),Object.assign(s,{details:{type:"sphere"},pointOnFace:s.point,pointerPosition:this.fromPosition.clone(),pointerQuaternion:this.fromQuaternion.clone(),localPoint:s.point.clone().applyMatrix4(Mg.copy(s.object.matrixWorld).invert())}))}}const Wp=new Xe;function w8(n,e,t){if(e.updateWorldMatrix(!0,!1),e.spherecast!=null){e.spherecast(n,t);return}if(e instanceof Mh){e.geometry.boundingSphere==null&&e.geometry.computeBoundingSphere(),e.geometry.boundingBox==null&&e.geometry.computeBoundingBox();for(let r=0;r<e.count;r++){if(e.getMatrixAt(r,Wp),Wp.premultiply(e.matrixWorld),!lC(n,e,Wp))continue;const s=uC(n,e,Wp,r);s!=null&&t.push(s)}}if(!(e instanceof Yt)||!lC(n,e,e.matrixWorld))return;Mg.copy(e.matrixWorld).invert();const i=uC(n,e,e.matrixWorld);i!=null&&t.push(i)}const sC=new N,oC=new sn,aC=new br,zc=new Hn;function lC(n,{geometry:e},t){return e.boundingSphere==null&&e.computeBoundingSphere(),zc.copy(e.boundingSphere).applyMatrix4(t),zc.center.distanceToSquared(n.center)<(n.radius+zc.radius)**2}const jp=new N,xx=new N,cC=new N,E8=new N(1e-4,1e-4,1e-4),Mg=new Xe;function uC(n,e,t,i){Mg.copy(t).invert(),zc.copy(n).applyMatrix4(Mg);const{geometry:r}=e;r.boundingBox==null&&r.computeBoundingBox(),r.boundingBox.getSize(xx),r.boundingBox.getCenter(cC),r.boundingBox.clampPoint(zc.center,jp),jp.applyMatrix4(t);const s=jp.distanceToSquared(n.center);if(s>n.radius*n.radius)return;xx.max(E8);const o=zc.center.clone().sub(cC);o.divide(xx),b8(o);const a=jp.clone();let l;return U2(Sg,a,e)&&(l=Sg.clone()),{distance:Math.sqrt(s),face:{a:0,b:0,c:0,materialIndex:0,normal:o},uv:l,normal:o,point:a,instanceId:i,object:e}}function b8(n){const e=Math.abs(n.x),t=Math.abs(n.y),i=Math.abs(n.z);if(e>=t&&e>=i){n.set(n.x<0?-1:1,0,0);return}if(t>=e&&t>=i){n.set(0,n.y<0?-1:1,0);return}n.set(0,0,n.z<0?-1:1)}function C8(n,e,t,i={},r="grab"){return new D2(R8(),r,t,new M8(e,()=>i.radius??.07,i),n,void 0,void 0,void 0,i)}let T8=23412;function R8(){return T8++}function dC(n,e){if(e!=null&&e.createdAt!=null&&e.createdAt>=n.lastChangedTime)return e;const t=new gt;return t.setIndex(new yt(n.indices,1)),t.setAttribute("position",new yt(n.vertices,3)),Object.assign(t,{creationTime:n.lastChangedTime})}function hC(n,e){return e!=null&&e.createdAt!=null&&e.createdAt>=n.lastChangedTime?e:Object.assign(I8(n.polygon),{createdAt:n.lastChangedTime})}const od=new CP,Xp=new ue;function I8(n){if(n.length===0)return new gt;const e=new Zo,t=n.map(({x:r,z:s})=>new ue(r,s));od.setFromPoints(t),od.getSize(Xp);for(const r of t)r.sub(od.min),r.divide(Xp);e.setFromPoints(t);const i=new Ch(e);return i.scale(Xp.x,Xp.y,1),i.translate(od.min.x,od.min.y,0),i.rotateX(Math.PI/2),i}function wg(n,e=1){if(n!=null)return{x:n.x,y:n.y,z:n.z,w:"w"in n?n.w:e}}const O2=60/180*Math.PI,P8=60/180*Math.PI,B8=-30/180*Math.PI,L8=30/180*Math.PI;function D8(n,e,t,i,r,s){return n instanceof HTMLVideoElement?N8(n,e,i,r,s):F8(n,e,t,i,r,s)}function N8(n,e,t,{invertStereo:i,layout:r,shape:s="quad"},o={}){var p;const a=M0(t,e.origin,e.originReferenceSpace,eu);if(a==null)return;const l=CS(eu,Sl),c={invertStereo:i,layout:r,space:a,transform:l};RS(s,c,o.centralAngle,Sl);const h=`create${k2(s)}Layer`,f=(p=e.mediaBinding)==null?void 0:p[h](n,c);if(f!=null)return TS(f,o),f}function F8(n,e,t,i,{shape:r="quad",...s},o={}){var p;const a=M0(i,e.origin,e.originReferenceSpace,eu);if(a==null)return;const l=CS(eu,Sl),c={...s,isStatic:!(n instanceof ai),textureType:"texture",viewPixelWidth:s.layout==="stereo-left-right"?n.width/2:n.width,viewPixelHeight:s.layout==="stereo-top-bottom"?n.height/2:n.height,space:a,transform:l};RS(r,c,o.centralAngle,Sl);const h=`create${k2(r)}Layer`,f=(p=t.getBinding())==null?void 0:p[h](c);if(f!=null)return TS(f,o),f}const eu=new Xe,fC=new N,pC=new sn,Sl=new N;function CS(n,e=Sl){return n.decompose(fC,pC,e),new XRRigidTransform(wg(fC),wg(pC))}function k2(n){return`${n[0].toUpperCase()}${n.slice(1)}`}function TS(n,e={}){if(n.chromaticAberrationCorrection=e.chromaticAberrationCorrection,n.quality=e.quality??"default",n.blendTextureSourceAlpha=e.blendTextureSourceAlpha??!1,n instanceof XRCylinderLayer){n.centralAngle=(e==null?void 0:e.centralAngle)??O2;return}n instanceof XREquirectLayer&&(n.centralHorizontalAngle=(e==null?void 0:e.centralHorizontalAngle)??P8,n.lowerVerticalAngle=(e==null?void 0:e.lowerVerticalAngle)??B8,n.upperVerticalAngle=(e==null?void 0:e.upperVerticalAngle)??L8)}function U8(n,e,t,i){let r=!1;const s=async()=>{const o=await e.requestFrame();r||k8(n,t,o,i)};return t.addEventListener("redraw",s),s(),()=>{r=!0,t.removeEventListener("redraw",s)}}function O8(n){if(n instanceof ai)return n.texture;const e=n instanceof HTMLVideoElement?new XI(n):new tn(n);return e.colorSpace=In,e.needsUpdate=!0,e}function k8(n,e,t,i){const r=n.getContext(),s=n.xr.getBinding().getSubImage(e,t);n.state.bindTexture(r.TEXTURE_2D,s.colorTexture),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!0),r.texSubImage2D(r.TEXTURE_2D,0,0,0,i.width,i.height,r.RGBA,r.UNSIGNED_BYTE,i)}function z8(n,e,t,i){n.originReferenceSpace!=null&&(e.space=M0(i,n.origin,n.originReferenceSpace,eu),e.transform=CS(eu,Sl),RS(H8(e),e,t,Sl))}function RS(n,e,t,i){if(n==="cylinder"){const s=(i.x+i.z)/2,o=s*(t??O2);e.radius=s,e.aspectRatio=o/i.y}else n==="quad"?(e.width=i.x/2,e.height=i.y/2):e.radius=(i.x+i.y+i.z)/3}function H8(n){return n instanceof XRCylinderLayer?"cylinder":n instanceof XREquirectLayer?"equirect":"quad"}function z2(n,e,t){return new ai(n*t,e*t,{minFilter:$t,magFilter:$t,type:aa,depthTexture:new Ah(n,e)})}new Fi(0,0,0,"YXZ");class G8 extends Yt{constructor(t){const i=new gV,r=new Float32Array(t.length*3);for(let a=0;a<t.length;a++)t[a].toArray(r,a*3);i.setPoints(r);const s=(t.length*3-3)/(t.length*3-1),o=new AV({lineWidth:.1,resolution:void 0,visibility:s});super(i,o);pt(this,"multiplier");pt(this,"lineLengths");pt(this,"options",{});this.material.transparent=!0,this.multiplier=s,this.material=o,this.lineLengths=t.slice(0,-1).map((a,l)=>a.distanceTo(t[l+1]))}update(t){const i=t.getEnabled(),r=t.getIntersection();if(!i||t.getButtonsDown().size===0||r==null){this.visible=!1;return}if(this.visible=!0,r.details.type!="lines"){this.material.visibility=this.multiplier;return}const{distanceOnLine:s,lineIndex:o}=r.details,a=this.lineLengths[o];this.material.visibility=this.multiplier*(o+s/a)/this.lineLengths.length;const{color:l="white",opacity:c=.4,size:h=.01}=this.options;this.material.lineWidth=h,this.material.opacity=typeof c=="function"?c(t):c;const f=typeof l=="function"?l(t):l;Array.isArray(f)?this.material.color.set(...f):this.material.color.set(f)}}const mC=new Xe,Jp=new N,V8=new N,gC=new sn;async function W8(n,e,t,i=["point","plane","mesh"]){var h;typeof t=="string"&&(t=await e.requestReferenceSpace(t));const r=Array.isArray(i)?i:[i];let s,o,a;const l=n.getState();if(t instanceof XRSpace)s={space:t,entityTypes:r},a=l.origin;else{const f=M0(t,l.origin,l.originReferenceSpace,mC);if(f==null)return;mC.decompose(Jp,gC,V8);const p=wg(Jp);Jp.set(0,0,-1).applyQuaternion(gC);const m=new XRRay(p,wg(Jp,0));a=t,s={space:f,offsetRay:m,entityTypes:r},o=f}const c=await((h=e==null?void 0:e.requestHitTestSource)==null?void 0:h.call(e,s));if(c!=null)return{source:c,getWorldMatrix:j8.bind(null,n,o,a)}}function j8(n,e,t,i,r){if(e??(e=n.getState().originReferenceSpace),e==null)return!1;const s=r.getPose(e);return s==null?!1:(i.fromArray(s.transform.matrix),t!=null&&(t.updateWorldMatrix(!0,!1),i.premultiply(t.matrixWorld)),!0)}new N(1,1,1);new N(0,0,0);new Xe;new Xe;new N;new N;new N;new Fi;new N;new N;const X8=new E2,J8=z.createContext(void 0),H2=z.createContext(void 0),w0=z.createContext(void 0),K8=z.createContext(void 0),Y8={BASE_URL:"/CelestialNavigator/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},{useDebugValue:Q8}=xs,{useSyncExternalStoreWithSelector:q8}=d2;let vC=!1;const Z8=n=>n;function IS(n,e=Z8,t){(Y8?"production":void 0)!=="production"&&t&&!vC&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),vC=!0);const i=q8(n.subscribe,n.getState,n.getServerState||n.getInitialState,e,t);return Q8(i),i}function $8(n,e){const t=z.useRef(e);t.current=e;const[i,r]=z.useMemo(()=>{let s;return[o=>{let a=!1;return typeof navigator>"u"||navigator.xr==null?(s=!1,()=>{}):(navigator.xr.isSessionSupported(n).then(l=>{s=l,!a&&o()}).catch(l=>{var c;a||(c=t.current)==null||c.call(t,l)}),()=>a=!0)},()=>s]},[n]);return z.useSyncExternalStore(i,r)}function Hc(n){const e=z.useContext(H2);if(e==null)throw new Error("useXRInputSourceStateContext() can only be used inside the xr store config");if(n!=null&&e.type!=n)throw new Error(`useXRInputSourceStateContext(${n}) can not be used inside a component for input type "${e.type}"`);return e}z.forwardRef(({id:n,children:e,onPress:t,onRelease:i},r)=>{const s=Hc("controller"),[o,a]=z.useState(void 0);if(z.useImperativeHandle(r,()=>o,[o]),e6(s,n,l=>l==="pressed"?t==null?void 0:t():i==null?void 0:i()),Bn(()=>{var l;return a((l=s.gamepad[n])==null?void 0:l.object)}),o!=null)return QP(e,o)});function e6(n,e,t){const i=z.useRef(void 0);Bn(()=>{var s;const r=(s=n==null?void 0:n.gamepad[e])==null?void 0:s.state;r!=null&&r!=i.current&&t(r),i.current=r})}const t6=Symbol("loadXRControllerModel");z.forwardRef((n,e)=>{const t=Hc("controller"),i=DP(i8,[t.layout,void 0,t6]);r8(i,n),t.object=i,z.useImperativeHandle(e,()=>i,[i]);const r=z.useMemo(()=>s8(i,t.layout,t.gamepad),[i,t.layout,t.gamepad]);return Bn(r),L.jsx(BS,{space:"grip-space",children:L.jsx("primitive",{object:i})})});z.forwardRef((n,e)=>{const t=Hc("hand"),i=uu(E2,t.assetPath),r=z.useMemo(()=>G9(i),[i]);V9(r,n),t.object=r,z.useImperativeHandle(e,()=>r,[r]);const s=V2(),o=z.useMemo(()=>j9(t.inputSource.hand,r,s),[t.inputSource,r,s]);return Bn((a,l,c)=>o(c)),L.jsx("primitive",{object:r})});z.forwardRef(({joint:n,children:e},t)=>L.jsx(BS,{ref:t,space:n,children:e}));function n6(n){for(const e of Object.keys(n))delete n[e]}function i6(n,e,t,i){const r=z.useMemo(()=>({}),[]);n6(r),Object.assign(r,t);const s=A0(),o=z.useMemo(()=>C8(()=>s.getState().camera,n,e,r,i),[s,n,e,r,i]);return o6(o,t==null?void 0:t.makeDefault),o}z.forwardRef((n,e)=>{const t=z.useMemo(()=>{const r=n.materialClass??Q9;return new r},[n.materialClass]),i=z.useRef(null);return z.useImperativeHandle(e,()=>i.current,[]),Bn(()=>i.current!=null&&q9(i.current,t,n.pointer,n)),L.jsx("mesh",{matrixAutoUpdate:!1,renderOrder:n.renderOrder??2,ref:i,material:t,children:L.jsx("boxGeometry",{})})});const r6=z.forwardRef((n,e)=>{const t=z.useMemo(()=>{const o=n.materialClass??J9;return new o},[n.materialClass]),i=z.useRef(null),r=z.useRef(null);z.useImperativeHandle(e,()=>i.current,[]),Bn(()=>i.current!=null&&r.current!=null&&Y9(r.current,i.current,t,n.pointer,n));const s=Un(o=>o.scene);return L.jsxs(L.Fragment,{children:[L.jsx("group",{ref:r}),QP(L.jsx("mesh",{renderOrder:n.renderOrder??1,ref:i,matrixAutoUpdate:!1,material:t,children:L.jsx("planeGeometry",{})}),s)]})});function s6(n,e,t,i){const r=tu(s=>s.session);z.useEffect(()=>{if(r!=null)return Z9(n,r,e,t,i)},[t,e,n,r,i])}function o6(n,e=!1){const t=z.useContext(K8);if(t==null)throw new Error("xr pointers can only be used inside the XR component");z.useEffect(()=>{const i=t.register(n,e);return()=>{i()}},[t,n,e]),z.useEffect(()=>{if(n instanceof D2)return()=>n.exit({timeStamp:performance.now()})},[n])}z.forwardRef(({pointer:n,linePoints:e,...t},i)=>{const r=z.useMemo(()=>new G8(e),[e]);return z.useImperativeHandle(i,()=>r,[r]),r.options=t,Bn(()=>r.update(n)),L.jsx("primitive",{object:r})});function G2(n,e,t){const i=z.useContext(H2);if(i==null)throw new Error("DefaultXRInputSourceGrabPointer can only be used inside a XRInputSource");const r=z.useRef(null),s=i6(r,i,t);s6(s,i.inputSource,n,i.events);const o=t.cursorModel;return L.jsx(BS,{ref:r,space:e,children:o!==!1&&L.jsx(r6,{pointer:s,opacity:$9,...a6(o)})})}G2.bind(null,"select","index-finger-tip");G2.bind(null,"squeeze","grip-space");function a6(n){if(n!==!0)return n}function PS(){const n=z.useContext(J8);if(n==null)throw new Error("XR features can only be used inside the <XR> component");return n}function tu(n=t=>t,e){return IS(PS(),n,e)}const BS=z.forwardRef(({space:n,children:e},t)=>{const i=z.useRef(null),r=typeof n=="string"?V2(n):n;z.useImperativeHandle(t,()=>i.current,[]),c6(i,r);const s=z.useCallback(o=>{o!=null&&(o.transformReady=!1,o.visible=!1),i.current=o},[]);return L.jsx("group",{xrSpace:r,matrixAutoUpdate:!1,ref:s,children:r&&L.jsx(w0.Provider,{value:r,children:e})})});function V2(n){var r;switch(n){case"grip-space":return Hc().inputSource.gripSpace;case"target-ray-space":return Hc().inputSource.targetRaySpace;case"wrist":case"thumb-metacarpal":case"thumb-phalanx-proximal":case"thumb-phalanx-distal":case"thumb-tip":case"index-finger-metacarpal":case"index-finger-phalanx-proximal":case"index-finger-phalanx-intermediate":case"index-finger-phalanx-distal":case"index-finger-tip":case"middle-finger-metacarpal":case"middle-finger-phalanx-proximal":case"middle-finger-phalanx-intermediate":case"middle-finger-phalanx-distal":case"middle-finger-tip":case"ring-finger-metacarpal":case"ring-finger-phalanx-proximal":case"ring-finger-phalanx-intermediate":case"ring-finger-phalanx-distal":case"ring-finger-tip":case"pinky-finger-metacarpal":case"pinky-finger-phalanx-proximal":case"pinky-finger-phalanx-intermediate":case"pinky-finger-phalanx-distal":case"pinky-finger-tip":return Hc("hand").inputSource.hand.get(n);case"root":case"hips":case"spine-lower":case"spine-middle":case"spine-upper":case"chest":case"neck":case"head":case"left-shoulder":case"left-scapula":case"left-arm-upper":case"left-arm-lower":case"left-hand-wrist-twist":case"right-shoulder":case"right-scapula":case"right-arm-upper":case"right-arm-lower":case"right-hand-wrist-twist":case"left-hand-palm":case"left-hand-wrist":case"left-hand-thumb-metacarpal":case"left-hand-thumb-phalanx-proximal":case"left-hand-thumb-phalanx-distal":case"left-hand-thumb-tip":case"left-hand-index-metacarpal":case"left-hand-index-phalanx-proximal":case"left-hand-index-phalanx-intermediate":case"left-hand-index-phalanx-distal":case"left-hand-index-tip":case"left-hand-middle-metacarpal":case"left-hand-middle-phalanx-proximal":case"left-hand-middle-phalanx-intermediate":case"left-hand-middle-phalanx-distal":case"left-hand-middle-tip":case"left-hand-ring-metacarpal":case"left-hand-ring-phalanx-proximal":case"left-hand-ring-phalanx-intermediate":case"left-hand-ring-phalanx-distal":case"left-hand-ring-tip":case"left-hand-little-metacarpal":case"left-hand-little-phalanx-proximal":case"left-hand-little-phalanx-intermediate":case"left-hand-little-phalanx-distal":case"left-hand-little-tip":case"right-hand-palm":case"right-hand-wrist":case"right-hand-thumb-metacarpal":case"right-hand-thumb-phalanx-proximal":case"right-hand-thumb-phalanx-distal":case"right-hand-thumb-tip":case"right-hand-index-metacarpal":case"right-hand-index-phalanx-proximal":case"right-hand-index-phalanx-intermediate":case"right-hand-index-phalanx-distal":case"right-hand-index-tip":case"right-hand-middle-metacarpal":case"right-hand-middle-phalanx-proximal":case"right-hand-middle-phalanx-intermediate":case"right-hand-middle-phalanx-distal":case"right-hand-middle-tip":case"right-hand-ring-metacarpal":case"right-hand-ring-phalanx-proximal":case"right-hand-ring-phalanx-intermediate":case"right-hand-ring-phalanx-distal":case"right-hand-ring-tip":case"right-hand-little-metacarpal":case"right-hand-little-phalanx-proximal":case"right-hand-little-phalanx-intermediate":case"right-hand-little-phalanx-distal":case"right-hand-little-tip":case"left-upper-leg":case"left-lower-leg":case"left-foot-ankle-twist":case"left-foot-ankle":case"left-foot-subtalar":case"left-foot-transverse":case"left-foot-ball":case"right-upper-leg":case"right-lower-leg":case"right-foot-ankle-twist":case"right-foot-ankle":case"right-foot-subtalar":case"right-foot-transverse":case"right-foot-ball":return(r=tu(s=>s.body))==null?void 0:r.get(n)}if(n==null){const s=z.useContext(w0);if(s==null)throw new Error("XR objects must be placed inside the XROrigin");return s}const[e,t]=z.useState(void 0),i=tu(s=>s.session);return z.useEffect(()=>{if(i==null)return;let s=!1;return i.requestReferenceSpace(n).then(o=>{s||t(o)}),()=>void(s=!0)},[i,n]),e}function l6(n){const e=z.useContext(w0),t=tu(i=>e??i.originReferenceSpace);return z.useMemo(()=>n==null||t==null?void 0:t8(n,t),[n,t])}function c6(n,e,t){const i=l6(e);Bn((r,s,o)=>{n.current!=null&&(n.current.visible=n.current.transformReady=(i==null?void 0:i(n.current.matrix,o))??!1)},-100)}z.forwardRef(({mesh:n,...e},t)=>{const i=u6(n);return L.jsx("mesh",{ref:t,geometry:i,...e})});function u6(n,e=!0){const[t,i]=z.useState(dC(n,void 0));return Bn(()=>i(r=>dC(n,r))),z.useEffect(()=>{if(e)return()=>t.dispose()},[t]),t}z.forwardRef(({plane:n,...e},t)=>{const i=d6(n);return L.jsx("mesh",{ref:t,geometry:i,...e})});function d6(n,e=!0){const[t,i]=z.useState(hC(n,void 0));return Bn(()=>i(r=>hC(n,r))),z.useEffect(()=>{if(e)return()=>t.dispose()},[t]),t}z.forwardRef(({children:n,...e},t)=>{const i=Un(o=>o.gl.xr.getCamera()),r=z.useRef(null);z.useImperativeHandle(t,()=>r.current,[]);const s=tu(o=>o.originReferenceSpace);return z.useEffect(()=>{const o=r.current;if(o!=null)return o.add(i),()=>void o.remove(i)},[i]),L.jsx("group",{ref:r,...e,children:s!=null&&L.jsx(w0.Provider,{value:s,children:n})})});function h6(n,e,t){const i=z.useRef(void 0);f6(e,t,z.useCallback(r=>i.current=r,[])),Bn((r,s,o)=>{n==null||o==null||i.current==null||n(o.getHitTestResults(i.current.source),i.current.getWorldMatrix)})}function f6(n,e,t){const i=PS(),r=IS(i,s=>s.session);z.useEffect(()=>{if(r==null)return;let s,o=!1;const a=n instanceof XRSpace||typeof n=="string"?n:n==null?void 0:n.current;if(a!=null)return W8(i,r,a,e).then(l=>{o||(s=l,t(l))}),()=>{t(void 0),o=!0,s==null||s.source.cancel()}},[r,i,n,e,t])}z.forwardRef(({trackableType:n,onResults:e,space:t,...i},r)=>{const s=z.useRef(null);return z.useImperativeHandle(r,()=>s.current),h6(e,t??s,n),L.jsx("group",{...i,ref:s})});z.forwardRef((n,e)=>{const t=tu(s=>s.domOverlayRoot),{In:i,Out:r}=z.useMemo(i5,[]);return z.useEffect(()=>{if(t==null)return;const s=IR(t);return s.render(L.jsx(r,{})),()=>s.unmount()},[t,r]),L.jsx(i,{children:L.jsx("div",{...n,ref:e})})});z.forwardRef(({src:n,shape:e,colorFormat:t,depthFormat:i,layout:r,mipLevels:s,renderOrder:o=0,blendTextureSourceAlpha:a,centralAngle:l,centralHorizontalAngle:c,chromaticAberrationCorrection:h,lowerVerticalAngle:f,quality:p,upperVerticalAngle:m,invertStereo:y,pixelWidth:A,pixelHeight:x,dpr:g,renderTargetRef:_,layerEntryRef:M,...w},C)=>{const R=z.useRef(null),P=Un(H=>H.gl),B=PS(),I={blendTextureSourceAlpha:a,centralAngle:l,centralHorizontalAngle:c,chromaticAberrationCorrection:h,lowerVerticalAngle:f,quality:p,upperVerticalAngle:m},b=z.useRef(I);b.current=I;const U=z.useRef(o);return U.current=o,z.useEffect(()=>{if(R.current==null)return;const H=n??(_.current=z2(A,x,g)),X=D8(H,B.getState(),P.xr,R.current,{colorFormat:t,depthFormat:i,invertStereo:y,layout:r,mipLevels:s,shape:e},b.current);if(X==null)return;const ee=M.current={layer:X,renderOrder:U.current};if(B.addLayerEntry(ee),H instanceof HTMLVideoElement||H instanceof ai)return()=>{B.removeLayerEntry(ee),X.destroy()};const ne=U8(P,B,X,H);return()=>{B.removeLayerEntry(ee),ne(),X.destroy()}},[t,i,y,M,r,s,x,A,g,_,P,e,n,B]),M.current!=null&&(M.current.renderOrder=o),M.current!=null&&TS(M.current.layer,b.current),Bn(()=>{M.current==null||R.current==null||z8(B.getState(),M.current.layer,b.current.centralAngle,R.current)}),z.useImperativeHandle(C,()=>R.current,[]),L.jsx("mesh",{...w,renderOrder:-1/0,ref:R,children:L.jsx("meshBasicMaterial",{colorWrite:!1})})});z.forwardRef(({src:n,renderTargetRef:e,dpr:t,renderOrder:i,pixelWidth:r,pixelHeight:s,...o},a)=>{const l=z.useRef(null);return z.useEffect(()=>{if(l.current==null)return;const c=n??(e.current=z2(r,s,t)),h=O8(c);return l.current.map=h,l.current.needsUpdate=!0,()=>{if(c instanceof ai){c.dispose();return}h.dispose()}},[n,r,s,t,e]),L.jsx("mesh",{ref:a,...o,children:L.jsx("meshBasicMaterial",{ref:l,toneMapped:!1})})});new Gt;new Gt;const W2=z.forwardRef(({store:n,mode:e,onError:t,children:i,...r},s)=>{const o=IS(n,l=>l.session),a=$8(e,t);return L.jsx("button",{ref:s,...r,onClick:()=>o!=null?o.end():n.enterXR(e).catch(t),children:typeof i=="function"?i(a?o!=null?"entered":"exited":"unsupported"):i})});z.forwardRef((n,e)=>L.jsx(W2,{ref:e,mode:"immersive-ar",...n}));const p6=z.forwardRef((n,e)=>L.jsx(W2,{ref:e,mode:"immersive-vr",...n})),m6={onBlur:"pointerleave",onHover:"pointerenter",onMove:"pointermove",onSelect:{type:"click",filter:n=>n.pointerType==="ray"},onSelectEnd:{type:"pointerup",filter:n=>n.pointerType==="ray"},onSelectStart:{type:"pointerdown",filter:n=>n.pointerType==="ray"},onSqueeze:{type:"click",filter:n=>n.pointerType==="grab"},onSqueezeEnd:{type:"pointerup",filter:n=>n.pointerType==="grab"},onSqueezeStart:{type:"pointerdown",filter:n=>n.pointerType==="grab"}};function Fs(n,e,t){const i=z.useRef(t);i.current=t,z.useEffect(()=>{const{current:r}=n;if(r==null)return;const s=m6[e],o=typeof s=="string"?l=>{var c;return(c=i.current)==null?void 0:c.call(i,{intersection:l,intersections:[l],target:l.pointerState})}:l=>{var c;l instanceof _i&&!s.filter(l)||(c=i.current)==null||c.call(i,{intersection:l,intersections:[l],target:l.pointerState})},a=typeof s=="string"?s:s.type;return r.addEventListener(a,o),()=>r.removeEventListener(a,o)},[n,e])}const g6=z.forwardRef(({onHover:n,onBlur:e,onSelectStart:t,onSelectEnd:i,onSelect:r,onSqueezeStart:s,onSqueezeEnd:o,onSqueeze:a,onMove:l,children:c},h)=>{const f=z.useRef(null);return z.useImperativeHandle(h,()=>f.current),Fs(f,"onHover",n),Fs(f,"onBlur",e),Fs(f,"onSelectStart",t),Fs(f,"onSelectEnd",i),Fs(f,"onSelect",r),Fs(f,"onSqueezeStart",s),Fs(f,"onSqueezeEnd",o),Fs(f,"onSqueeze",a),Fs(f,"onMove",l),L.jsx("group",{ref:f,children:c})});z.forwardRef(function({onSelectStart:e,onSelectEnd:t,children:i,...r},s){const o=z.useRef(void 0),a=z.useRef(null),l=z.useMemo(()=>new Xe,[]);return z.useImperativeHandle(s,()=>a.current),Bn(()=>{const c=o.current,h=a.current;!h||!c||(h.applyMatrix4(l),c.updateWorldMatrix(!0,!1),h.applyMatrix4(c.matrixWorld),h.updateMatrixWorld(),l.copy(c.matrixWorld).invert())}),L.jsx(g6,{ref:a,onSelectStart:c=>{X9(c.target)&&(c.target.type==="controller"||c.target.type==="hand")&&c.target.object!=null&&(o.current=c.target.object,c.target.object.updateWorldMatrix(!0,!1),l.copy(c.target.object.matrixWorld).invert(),e==null||e(c))},onSelectEnd:c=>{c.target.controller===o.current&&(o.current=void 0),t==null||t(c)},...r,children:i})});function v6(){return L.jsxs(L.Fragment,{children:[L.jsx(p6,{}),L.jsx(t2,{children:L.jsx(p2,{})})]})}const y6=[{name:"forward",keys:["KeyW","ArrowUp"]},{name:"backward",keys:["KeyS","ArrowDown"]},{name:"leftward",keys:["KeyA","ArrowLeft"]},{name:"rightward",keys:["KeyD","ArrowRight"]},{name:"zoomIn",keys:["KeyE"]},{name:"zoomOut",keys:["KeyQ"]},{name:"reset",keys:["KeyR"]},{name:"toggle",keys:["KeyT"]}];function x6(){const{setBackgroundMusic:n}=f2(),e=Nt(a=>a.isEducationalPanelOpen),t=Nt(a=>a.setEducationalPanelOpen),i=Nt(a=>a.hoveredBody),r=Nt(a=>a.isVRMode),[s,o]=z.useState(!0);return z.useEffect(()=>{const a=document.createElement("canvas");a.getContext("webgl2")||a.getContext("webgl")||a.getContext("experimental-webgl")||(console.error("WebGL is not supported by your browser or device"),o(!1))},[]),z.useEffect(()=>{const a=new Audio("/CelestialNavigator/sounds/background.mp3");return a.loop=!0,a.volume=.3,a.addEventListener("error",l=>{console.error("Error loading background music:",l)}),n(a),()=>{a.pause(),a.currentTime=0}},[n]),s?r?L.jsx(v6,{}):L.jsx("div",{className:"w-full h-full bg-black",children:L.jsxs(y4,{map:y6,children:[L.jsxs(t2,{shadows:!1,dpr:[.5,1],camera:{position:[0,30,100],fov:45,near:.1,far:1e4},gl:{antialias:!1,powerPreference:"high-performance",alpha:!1,stencil:!1,depth:!0,failIfMajorPerformanceCaveat:!1,precision:"lowp"},frameloop:"demand",performance:{min:.5,max:1},onCreated:({gl:a,scene:l,camera:c})=>{a.setPixelRatio(Math.min(1.5,window.devicePixelRatio)),console.log("WebGL Renderer Information:",a.getContextAttributes());const h=a.getContext();h&&(console.log("WebGL Version:",h.getParameter(h.VERSION)),console.log("WebGL Vendor:",h.getParameter(h.VENDOR)),console.log("WebGL Renderer:",h.getParameter(h.RENDERER))),l.children.forEach(f=>{(f.type==="AmbientLight"||f.type==="DirectionalLight")&&"intensity"in f&&(f.intensity*=.8)})},children:[L.jsx("color",{attach:"background",args:["#000000"]}),L.jsxs(z.Suspense,{fallback:null,children:[L.jsx(p2,{}),L.jsx(o9,{}),L.jsx(n9,{}),L.jsx(r9,{})]})]}),L.jsx(H5,{}),L.jsx(z5,{}),L.jsx(V5,{}),L.jsx(W5,{}),L.jsx(k5,{}),L.jsx(X5,{hoveredObjectId:i}),L.jsx(j5,{isOpen:e,onClose:()=>t(!1)}),L.jsx(i9,{}),L.jsx(s9,{})]})}):L.jsx("div",{className:"w-full h-full flex items-center justify-center bg-black text-white p-8 text-center",children:L.jsxs("div",{children:[L.jsx("h1",{className:"text-2xl font-bold mb-4",children:"WebGL Support Required"}),L.jsx("p",{className:"mb-4",children:"Celestial Navigator requires WebGL to render 3D graphics. Your browser or device does not support WebGL."}),L.jsx("p",{children:"Please try using a modern browser like Chrome, Firefox, or Edge, or check if WebGL is enabled in your browser settings."})]})})}_x.createRoot(document.getElementById("root")).render(L.jsx(xs.StrictMode,{children:L.jsx(_N,{basename:"/CelestialNavigator",children:L.jsx(x6,{})})}));
