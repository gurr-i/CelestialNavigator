var DB=Object.defineProperty;var NB=(n,e,t)=>e in n?DB(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var pt=(n,e,t)=>NB(n,typeof e!="symbol"?e+"":e,t);function FB(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function k_(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var _b={exports:{}},Tg={},Ab={exports:{}},zt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hh=Symbol.for("react.element"),UB=Symbol.for("react.portal"),OB=Symbol.for("react.fragment"),kB=Symbol.for("react.strict_mode"),zB=Symbol.for("react.profiler"),HB=Symbol.for("react.provider"),GB=Symbol.for("react.context"),VB=Symbol.for("react.forward_ref"),WB=Symbol.for("react.suspense"),jB=Symbol.for("react.memo"),XB=Symbol.for("react.lazy"),hM=Symbol.iterator;function JB(n){return n===null||typeof n!="object"?null:(n=hM&&n[hM]||n["@@iterator"],typeof n=="function"?n:null)}var Sb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Mb=Object.assign,wb={};function ru(n,e,t){this.props=n,this.context=e,this.refs=wb,this.updater=t||Sb}ru.prototype.isReactComponent={};ru.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};ru.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function Eb(){}Eb.prototype=ru.prototype;function z_(n,e,t){this.props=n,this.context=e,this.refs=wb,this.updater=t||Sb}var H_=z_.prototype=new Eb;H_.constructor=z_;Mb(H_,ru.prototype);H_.isPureReactComponent=!0;var fM=Array.isArray,Cb=Object.prototype.hasOwnProperty,G_={current:null},bb={key:!0,ref:!0,__self:!0,__source:!0};function Tb(n,e,t){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Cb.call(e,i)&&!bb.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:hh,type:n,key:s,ref:o,props:r,_owner:G_.current}}function KB(n,e){return{$$typeof:hh,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function V_(n){return typeof n=="object"&&n!==null&&n.$$typeof===hh}function YB(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var pM=/\/+/g;function Pv(n,e){return typeof n=="object"&&n!==null&&n.key!=null?YB(""+n.key):e.toString(36)}function Zp(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case hh:case UB:o=!0}}if(o)return o=n,r=r(o),n=i===""?"."+Pv(o,0):i,fM(r)?(t="",n!=null&&(t=n.replace(pM,"$&/")+"/"),Zp(r,e,t,"",function(c){return c})):r!=null&&(V_(r)&&(r=KB(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(pM,"$&/")+"/")+n)),e.push(r)),1;if(o=0,i=i===""?".":i+":",fM(n))for(var a=0;a<n.length;a++){s=n[a];var l=i+Pv(s,a);o+=Zp(s,e,t,l,r)}else if(l=JB(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=i+Pv(s,a++),o+=Zp(s,e,t,l,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Df(n,e,t){if(n==null)return n;var i=[],r=0;return Zp(n,i,"","",function(s){return e.call(t,s,r++)}),i}function QB(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var zi={current:null},$p={transition:null},qB={ReactCurrentDispatcher:zi,ReactCurrentBatchConfig:$p,ReactCurrentOwner:G_};function Rb(){throw Error("act(...) is not supported in production builds of React.")}zt.Children={map:Df,forEach:function(n,e,t){Df(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Df(n,function(){e++}),e},toArray:function(n){return Df(n,function(e){return e})||[]},only:function(n){if(!V_(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};zt.Component=ru;zt.Fragment=OB;zt.Profiler=zB;zt.PureComponent=z_;zt.StrictMode=kB;zt.Suspense=WB;zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qB;zt.act=Rb;zt.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=Mb({},n.props),r=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=G_.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)Cb.call(e,l)&&!bb.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:hh,type:n.type,key:r,ref:s,props:i,_owner:o}};zt.createContext=function(n){return n={$$typeof:GB,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:HB,_context:n},n.Consumer=n};zt.createElement=Tb;zt.createFactory=function(n){var e=Tb.bind(null,n);return e.type=n,e};zt.createRef=function(){return{current:null}};zt.forwardRef=function(n){return{$$typeof:VB,render:n}};zt.isValidElement=V_;zt.lazy=function(n){return{$$typeof:XB,_payload:{_status:-1,_result:n},_init:QB}};zt.memo=function(n,e){return{$$typeof:jB,type:n,compare:e===void 0?null:e}};zt.startTransition=function(n){var e=$p.transition;$p.transition={};try{n()}finally{$p.transition=e}};zt.unstable_act=Rb;zt.useCallback=function(n,e){return zi.current.useCallback(n,e)};zt.useContext=function(n){return zi.current.useContext(n)};zt.useDebugValue=function(){};zt.useDeferredValue=function(n){return zi.current.useDeferredValue(n)};zt.useEffect=function(n,e){return zi.current.useEffect(n,e)};zt.useId=function(){return zi.current.useId()};zt.useImperativeHandle=function(n,e,t){return zi.current.useImperativeHandle(n,e,t)};zt.useInsertionEffect=function(n,e){return zi.current.useInsertionEffect(n,e)};zt.useLayoutEffect=function(n,e){return zi.current.useLayoutEffect(n,e)};zt.useMemo=function(n,e){return zi.current.useMemo(n,e)};zt.useReducer=function(n,e,t){return zi.current.useReducer(n,e,t)};zt.useRef=function(n){return zi.current.useRef(n)};zt.useState=function(n){return zi.current.useState(n)};zt.useSyncExternalStore=function(n,e,t){return zi.current.useSyncExternalStore(n,e,t)};zt.useTransition=function(){return zi.current.useTransition()};zt.version="18.3.1";Ab.exports=zt;var H=Ab.exports;const As=k_(H),ZB=FB({__proto__:null,default:As},[H]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $B=H,eL=Symbol.for("react.element"),tL=Symbol.for("react.fragment"),nL=Object.prototype.hasOwnProperty,iL=$B.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rL={key:!0,ref:!0,__self:!0,__source:!0};function Ib(n,e,t){var i,r={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)nL.call(e,i)&&!rL.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:eL,type:n,key:s,ref:o,props:r,_owner:iL.current}}Tg.Fragment=tL;Tg.jsx=Ib;Tg.jsxs=Ib;_b.exports=Tg;var L=_b.exports,Ax={},Pb={exports:{}},mr={},Bb={exports:{}},Lb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(F,k){var W=F.length;F.push(k);e:for(;0<W;){var Y=W-1>>>1,se=F[Y];if(0<r(se,k))F[Y]=k,F[W]=se,W=Y;else break e}}function t(F){return F.length===0?null:F[0]}function i(F){if(F.length===0)return null;var k=F[0],W=F.pop();if(W!==k){F[0]=W;e:for(var Y=0,se=F.length,Ce=se>>>1;Y<Ce;){var q=2*(Y+1)-1,ie=F[q],he=q+1,ae=F[he];if(0>r(ie,W))he<se&&0>r(ae,ie)?(F[Y]=ae,F[he]=W,Y=he):(F[Y]=ie,F[q]=W,Y=q);else if(he<se&&0>r(ae,W))F[Y]=ae,F[he]=W,Y=he;else break e}}return k}function r(F,k){var W=F.sortIndex-k.sortIndex;return W!==0?W:F.id-k.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,f=null,p=3,m=!1,v=!1,A=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(F){for(var k=t(c);k!==null;){if(k.callback===null)i(c);else if(k.startTime<=F)i(c),k.sortIndex=k.expirationTime,e(l,k);else break;k=t(c)}}function w(F){if(A=!1,_(F),!v)if(t(l)!==null)v=!0,re(I);else{var k=t(c);k!==null&&ge(w,k.startTime-F)}}function I(F,k){v=!1,A&&(A=!1,g(B),B=-1),m=!0;var W=p;try{for(_(k),f=t(l);f!==null&&(!(f.expirationTime>k)||F&&!U());){var Y=f.callback;if(typeof Y=="function"){f.callback=null,p=f.priorityLevel;var se=Y(f.expirationTime<=k);k=n.unstable_now(),typeof se=="function"?f.callback=se:f===t(l)&&i(l),_(k)}else i(l);f=t(l)}if(f!==null)var Ce=!0;else{var q=t(c);q!==null&&ge(w,q.startTime-k),Ce=!1}return Ce}finally{f=null,p=W,m=!1}}var T=!1,P=null,B=-1,R=5,C=-1;function U(){return!(n.unstable_now()-C<R)}function j(){if(P!==null){var F=n.unstable_now();C=F;var k=!0;try{k=P(!0,F)}finally{k?K():(T=!1,P=null)}}else T=!1}var K;if(typeof S=="function")K=function(){S(j)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,de=te.port2;te.port1.onmessage=j,K=function(){de.postMessage(null)}}else K=function(){x(j,0)};function re(F){P=F,T||(T=!0,K())}function ge(F,k){B=x(function(){F(n.unstable_now())},k)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,re(I))},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(F){switch(p){case 1:case 2:case 3:var k=3;break;default:k=p}var W=p;p=k;try{return F()}finally{p=W}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(F,k){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var W=p;p=F;try{return k()}finally{p=W}},n.unstable_scheduleCallback=function(F,k,W){var Y=n.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?Y+W:Y):W=Y,F){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=W+se,F={id:h++,callback:k,priorityLevel:F,startTime:W,expirationTime:se,sortIndex:-1},W>Y?(F.sortIndex=W,e(c,F),t(l)===null&&F===t(c)&&(A?(g(B),B=-1):A=!0,ge(w,W-Y))):(F.sortIndex=se,e(l,F),v||m||(v=!0,re(I))),F},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(F){var k=p;return function(){var W=p;p=k;try{return F.apply(this,arguments)}finally{p=W}}}})(Lb);Bb.exports=Lb;var sL=Bb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oL=H,hr=sL;function Re(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Db=new Set,Dd={};function wl(n,e){Vc(n,e),Vc(n+"Capture",e)}function Vc(n,e){for(Dd[n]=e,n=0;n<e.length;n++)Db.add(e[n])}var $s=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sx=Object.prototype.hasOwnProperty,aL=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,mM={},gM={};function lL(n){return Sx.call(gM,n)?!0:Sx.call(mM,n)?!1:aL.test(n)?gM[n]=!0:(mM[n]=!0,!1)}function cL(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function uL(n,e,t,i){if(e===null||typeof e>"u"||cL(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Hi(n,e,t,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var li={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){li[n]=new Hi(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];li[e]=new Hi(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){li[n]=new Hi(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){li[n]=new Hi(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){li[n]=new Hi(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){li[n]=new Hi(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){li[n]=new Hi(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){li[n]=new Hi(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){li[n]=new Hi(n,5,!1,n.toLowerCase(),null,!1,!1)});var W_=/[\-:]([a-z])/g;function j_(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(W_,j_);li[e]=new Hi(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(W_,j_);li[e]=new Hi(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(W_,j_);li[e]=new Hi(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){li[n]=new Hi(n,1,!1,n.toLowerCase(),null,!1,!1)});li.xlinkHref=new Hi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){li[n]=new Hi(n,1,!1,n.toLowerCase(),null,!0,!0)});function X_(n,e,t,i){var r=li.hasOwnProperty(e)?li[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(uL(e,t,r,i)&&(t=null),i||r===null?lL(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var uo=oL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Nf=Symbol.for("react.element"),pc=Symbol.for("react.portal"),mc=Symbol.for("react.fragment"),J_=Symbol.for("react.strict_mode"),Mx=Symbol.for("react.profiler"),Nb=Symbol.for("react.provider"),Fb=Symbol.for("react.context"),K_=Symbol.for("react.forward_ref"),wx=Symbol.for("react.suspense"),Ex=Symbol.for("react.suspense_list"),Y_=Symbol.for("react.memo"),No=Symbol.for("react.lazy"),Ub=Symbol.for("react.offscreen"),vM=Symbol.iterator;function Lu(n){return n===null||typeof n!="object"?null:(n=vM&&n[vM]||n["@@iterator"],typeof n=="function"?n:null)}var An=Object.assign,Bv;function cd(n){if(Bv===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Bv=e&&e[1]||""}return`
`+Bv+n}var Lv=!1;function Dv(n,e){if(!n||Lv)return"";Lv=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){i=c}n.call(e.prototype)}else{try{throw Error()}catch(c){i=c}n()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{Lv=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?cd(n):""}function dL(n){switch(n.tag){case 5:return cd(n.type);case 16:return cd("Lazy");case 13:return cd("Suspense");case 19:return cd("SuspenseList");case 0:case 2:case 15:return n=Dv(n.type,!1),n;case 11:return n=Dv(n.type.render,!1),n;case 1:return n=Dv(n.type,!0),n;default:return""}}function Cx(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case mc:return"Fragment";case pc:return"Portal";case Mx:return"Profiler";case J_:return"StrictMode";case wx:return"Suspense";case Ex:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Fb:return(n.displayName||"Context")+".Consumer";case Nb:return(n._context.displayName||"Context")+".Provider";case K_:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Y_:return e=n.displayName||null,e!==null?e:Cx(n.type)||"Memo";case No:e=n._payload,n=n._init;try{return Cx(n(e))}catch{}}return null}function hL(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Cx(e);case 8:return e===J_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Zo(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ob(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function fL(n){var e=Ob(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Ff(n){n._valueTracker||(n._valueTracker=fL(n))}function kb(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=Ob(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function fm(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function bx(n,e){var t=e.checked;return An({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function yM(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=Zo(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function zb(n,e){e=e.checked,e!=null&&X_(n,"checked",e,!1)}function Tx(n,e){zb(n,e);var t=Zo(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?Rx(n,e.type,t):e.hasOwnProperty("defaultValue")&&Rx(n,e.type,Zo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function xM(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function Rx(n,e,t){(e!=="number"||fm(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var ud=Array.isArray;function Pc(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+Zo(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function Ix(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Re(91));return An({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function _M(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Re(92));if(ud(t)){if(1<t.length)throw Error(Re(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Zo(t)}}function Hb(n,e){var t=Zo(e.value),i=Zo(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function AM(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function Gb(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Px(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?Gb(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Uf,Vb=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Uf=Uf||document.createElement("div"),Uf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Uf.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Nd(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var gd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pL=["Webkit","ms","Moz","O"];Object.keys(gd).forEach(function(n){pL.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),gd[e]=gd[n]})});function Wb(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||gd.hasOwnProperty(n)&&gd[n]?(""+e).trim():e+"px"}function jb(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=Wb(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var mL=An({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bx(n,e){if(e){if(mL[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Re(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Re(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Re(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Re(62))}}function Lx(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dx=null;function Q_(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Nx=null,Bc=null,Lc=null;function SM(n){if(n=mh(n)){if(typeof Nx!="function")throw Error(Re(280));var e=n.stateNode;e&&(e=Lg(e),Nx(n.stateNode,n.type,e))}}function Xb(n){Bc?Lc?Lc.push(n):Lc=[n]:Bc=n}function Jb(){if(Bc){var n=Bc,e=Lc;if(Lc=Bc=null,SM(n),e)for(n=0;n<e.length;n++)SM(e[n])}}function Kb(n,e){return n(e)}function Yb(){}var Nv=!1;function Qb(n,e,t){if(Nv)return n(e,t);Nv=!0;try{return Kb(n,e,t)}finally{Nv=!1,(Bc!==null||Lc!==null)&&(Yb(),Jb())}}function Fd(n,e){var t=n.stateNode;if(t===null)return null;var i=Lg(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Re(231,e,typeof t));return t}var Fx=!1;if($s)try{var Du={};Object.defineProperty(Du,"passive",{get:function(){Fx=!0}}),window.addEventListener("test",Du,Du),window.removeEventListener("test",Du,Du)}catch{Fx=!1}function gL(n,e,t,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(h){this.onError(h)}}var vd=!1,pm=null,mm=!1,Ux=null,vL={onError:function(n){vd=!0,pm=n}};function yL(n,e,t,i,r,s,o,a,l){vd=!1,pm=null,gL.apply(vL,arguments)}function xL(n,e,t,i,r,s,o,a,l){if(yL.apply(this,arguments),vd){if(vd){var c=pm;vd=!1,pm=null}else throw Error(Re(198));mm||(mm=!0,Ux=c)}}function El(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function qb(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function MM(n){if(El(n)!==n)throw Error(Re(188))}function _L(n){var e=n.alternate;if(!e){if(e=El(n),e===null)throw Error(Re(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return MM(r),n;if(s===i)return MM(r),e;s=s.sibling}throw Error(Re(188))}if(t.return!==i.return)t=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===t){o=!0,t=r,i=s;break}if(a===i){o=!0,i=r,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,i=r;break}if(a===i){o=!0,i=s,t=r;break}a=a.sibling}if(!o)throw Error(Re(189))}}if(t.alternate!==i)throw Error(Re(190))}if(t.tag!==3)throw Error(Re(188));return t.stateNode.current===t?n:e}function Zb(n){return n=_L(n),n!==null?$b(n):null}function $b(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=$b(n);if(e!==null)return e;n=n.sibling}return null}var eT=hr.unstable_scheduleCallback,wM=hr.unstable_cancelCallback,AL=hr.unstable_shouldYield,SL=hr.unstable_requestPaint,Pn=hr.unstable_now,ML=hr.unstable_getCurrentPriorityLevel,q_=hr.unstable_ImmediatePriority,tT=hr.unstable_UserBlockingPriority,gm=hr.unstable_NormalPriority,wL=hr.unstable_LowPriority,nT=hr.unstable_IdlePriority,Rg=null,ms=null;function EL(n){if(ms&&typeof ms.onCommitFiberRoot=="function")try{ms.onCommitFiberRoot(Rg,n,void 0,(n.current.flags&128)===128)}catch{}}var Kr=Math.clz32?Math.clz32:TL,CL=Math.log,bL=Math.LN2;function TL(n){return n>>>=0,n===0?32:31-(CL(n)/bL|0)|0}var Of=64,kf=4194304;function dd(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function vm(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~r;a!==0?i=dd(a):(s&=o,s!==0&&(i=dd(s)))}else o=t&~r,o!==0?i=dd(o):s!==0&&(i=dd(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-Kr(e),r=1<<t,i|=n[t],e&=~r;return i}function RL(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function IL(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Kr(s),a=1<<o,l=r[o];l===-1?(!(a&t)||a&i)&&(r[o]=RL(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function Ox(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function iT(){var n=Of;return Of<<=1,!(Of&4194240)&&(Of=64),n}function Fv(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function fh(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Kr(e),n[e]=t}function PL(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-Kr(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function Z_(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-Kr(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var Zt=0;function rT(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var sT,$_,oT,aT,lT,kx=!1,zf=[],Vo=null,Wo=null,jo=null,Ud=new Map,Od=new Map,Uo=[],BL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function EM(n,e){switch(n){case"focusin":case"focusout":Vo=null;break;case"dragenter":case"dragleave":Wo=null;break;case"mouseover":case"mouseout":jo=null;break;case"pointerover":case"pointerout":Ud.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Od.delete(e.pointerId)}}function Nu(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=mh(e),e!==null&&$_(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function LL(n,e,t,i,r){switch(e){case"focusin":return Vo=Nu(Vo,n,e,t,i,r),!0;case"dragenter":return Wo=Nu(Wo,n,e,t,i,r),!0;case"mouseover":return jo=Nu(jo,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return Ud.set(s,Nu(Ud.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Od.set(s,Nu(Od.get(s)||null,n,e,t,i,r)),!0}return!1}function cT(n){var e=ja(n.target);if(e!==null){var t=El(e);if(t!==null){if(e=t.tag,e===13){if(e=qb(t),e!==null){n.blockedOn=e,lT(n.priority,function(){oT(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function em(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=zx(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);Dx=i,t.target.dispatchEvent(i),Dx=null}else return e=mh(t),e!==null&&$_(e),n.blockedOn=t,!1;e.shift()}return!0}function CM(n,e,t){em(n)&&t.delete(e)}function DL(){kx=!1,Vo!==null&&em(Vo)&&(Vo=null),Wo!==null&&em(Wo)&&(Wo=null),jo!==null&&em(jo)&&(jo=null),Ud.forEach(CM),Od.forEach(CM)}function Fu(n,e){n.blockedOn===e&&(n.blockedOn=null,kx||(kx=!0,hr.unstable_scheduleCallback(hr.unstable_NormalPriority,DL)))}function kd(n){function e(r){return Fu(r,n)}if(0<zf.length){Fu(zf[0],n);for(var t=1;t<zf.length;t++){var i=zf[t];i.blockedOn===n&&(i.blockedOn=null)}}for(Vo!==null&&Fu(Vo,n),Wo!==null&&Fu(Wo,n),jo!==null&&Fu(jo,n),Ud.forEach(e),Od.forEach(e),t=0;t<Uo.length;t++)i=Uo[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<Uo.length&&(t=Uo[0],t.blockedOn===null);)cT(t),t.blockedOn===null&&Uo.shift()}var Dc=uo.ReactCurrentBatchConfig,ym=!0;function NL(n,e,t,i){var r=Zt,s=Dc.transition;Dc.transition=null;try{Zt=1,eA(n,e,t,i)}finally{Zt=r,Dc.transition=s}}function FL(n,e,t,i){var r=Zt,s=Dc.transition;Dc.transition=null;try{Zt=4,eA(n,e,t,i)}finally{Zt=r,Dc.transition=s}}function eA(n,e,t,i){if(ym){var r=zx(n,e,t,i);if(r===null)Xv(n,e,i,xm,t),EM(n,i);else if(LL(r,n,e,t,i))i.stopPropagation();else if(EM(n,i),e&4&&-1<BL.indexOf(n)){for(;r!==null;){var s=mh(r);if(s!==null&&sT(s),s=zx(n,e,t,i),s===null&&Xv(n,e,i,xm,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else Xv(n,e,i,null,t)}}var xm=null;function zx(n,e,t,i){if(xm=null,n=Q_(i),n=ja(n),n!==null)if(e=El(n),e===null)n=null;else if(t=e.tag,t===13){if(n=qb(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return xm=n,null}function uT(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ML()){case q_:return 1;case tT:return 4;case gm:case wL:return 16;case nT:return 536870912;default:return 16}default:return 16}}var zo=null,tA=null,tm=null;function dT(){if(tm)return tm;var n,e=tA,t=e.length,i,r="value"in zo?zo.value:zo.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===r[s-i];i++);return tm=r.slice(n,1<i?1-i:void 0)}function nm(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Hf(){return!0}function bM(){return!1}function gr(n){function e(t,i,r,s,o){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Hf:bM,this.isPropagationStopped=bM,this}return An(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Hf)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Hf)},persist:function(){},isPersistent:Hf}),e}var su={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nA=gr(su),ph=An({},su,{view:0,detail:0}),UL=gr(ph),Uv,Ov,Uu,Ig=An({},ph,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:iA,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Uu&&(Uu&&n.type==="mousemove"?(Uv=n.screenX-Uu.screenX,Ov=n.screenY-Uu.screenY):Ov=Uv=0,Uu=n),Uv)},movementY:function(n){return"movementY"in n?n.movementY:Ov}}),TM=gr(Ig),OL=An({},Ig,{dataTransfer:0}),kL=gr(OL),zL=An({},ph,{relatedTarget:0}),kv=gr(zL),HL=An({},su,{animationName:0,elapsedTime:0,pseudoElement:0}),GL=gr(HL),VL=An({},su,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),WL=gr(VL),jL=An({},su,{data:0}),RM=gr(jL),XL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},JL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},KL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function YL(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=KL[n])?!!e[n]:!1}function iA(){return YL}var QL=An({},ph,{key:function(n){if(n.key){var e=XL[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=nm(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?JL[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:iA,charCode:function(n){return n.type==="keypress"?nm(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?nm(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),qL=gr(QL),ZL=An({},Ig,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),IM=gr(ZL),$L=An({},ph,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:iA}),eD=gr($L),tD=An({},su,{propertyName:0,elapsedTime:0,pseudoElement:0}),nD=gr(tD),iD=An({},Ig,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),rD=gr(iD),sD=[9,13,27,32],rA=$s&&"CompositionEvent"in window,yd=null;$s&&"documentMode"in document&&(yd=document.documentMode);var oD=$s&&"TextEvent"in window&&!yd,hT=$s&&(!rA||yd&&8<yd&&11>=yd),PM=" ",BM=!1;function fT(n,e){switch(n){case"keyup":return sD.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pT(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var gc=!1;function aD(n,e){switch(n){case"compositionend":return pT(e);case"keypress":return e.which!==32?null:(BM=!0,PM);case"textInput":return n=e.data,n===PM&&BM?null:n;default:return null}}function lD(n,e){if(gc)return n==="compositionend"||!rA&&fT(n,e)?(n=dT(),tm=tA=zo=null,gc=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return hT&&e.locale!=="ko"?null:e.data;default:return null}}var cD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function LM(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!cD[n.type]:e==="textarea"}function mT(n,e,t,i){Xb(i),e=_m(e,"onChange"),0<e.length&&(t=new nA("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var xd=null,zd=null;function uD(n){CT(n,0)}function Pg(n){var e=xc(n);if(kb(e))return n}function dD(n,e){if(n==="change")return e}var gT=!1;if($s){var zv;if($s){var Hv="oninput"in document;if(!Hv){var DM=document.createElement("div");DM.setAttribute("oninput","return;"),Hv=typeof DM.oninput=="function"}zv=Hv}else zv=!1;gT=zv&&(!document.documentMode||9<document.documentMode)}function NM(){xd&&(xd.detachEvent("onpropertychange",vT),zd=xd=null)}function vT(n){if(n.propertyName==="value"&&Pg(zd)){var e=[];mT(e,zd,n,Q_(n)),Qb(uD,e)}}function hD(n,e,t){n==="focusin"?(NM(),xd=e,zd=t,xd.attachEvent("onpropertychange",vT)):n==="focusout"&&NM()}function fD(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Pg(zd)}function pD(n,e){if(n==="click")return Pg(e)}function mD(n,e){if(n==="input"||n==="change")return Pg(e)}function gD(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Qr=typeof Object.is=="function"?Object.is:gD;function Hd(n,e){if(Qr(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!Sx.call(e,r)||!Qr(n[r],e[r]))return!1}return!0}function FM(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function UM(n,e){var t=FM(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=FM(t)}}function yT(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?yT(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function xT(){for(var n=window,e=fm();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=fm(n.document)}return e}function sA(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function vD(n){var e=xT(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&yT(t.ownerDocument.documentElement,t)){if(i!==null&&sA(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=UM(t,s);var o=UM(t,i);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var yD=$s&&"documentMode"in document&&11>=document.documentMode,vc=null,Hx=null,_d=null,Gx=!1;function OM(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Gx||vc==null||vc!==fm(i)||(i=vc,"selectionStart"in i&&sA(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),_d&&Hd(_d,i)||(_d=i,i=_m(Hx,"onSelect"),0<i.length&&(e=new nA("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=vc)))}function Gf(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var yc={animationend:Gf("Animation","AnimationEnd"),animationiteration:Gf("Animation","AnimationIteration"),animationstart:Gf("Animation","AnimationStart"),transitionend:Gf("Transition","TransitionEnd")},Gv={},_T={};$s&&(_T=document.createElement("div").style,"AnimationEvent"in window||(delete yc.animationend.animation,delete yc.animationiteration.animation,delete yc.animationstart.animation),"TransitionEvent"in window||delete yc.transitionend.transition);function Bg(n){if(Gv[n])return Gv[n];if(!yc[n])return n;var e=yc[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in _T)return Gv[n]=e[t];return n}var AT=Bg("animationend"),ST=Bg("animationiteration"),MT=Bg("animationstart"),wT=Bg("transitionend"),ET=new Map,kM="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ra(n,e){ET.set(n,e),wl(e,[n])}for(var Vv=0;Vv<kM.length;Vv++){var Wv=kM[Vv],xD=Wv.toLowerCase(),_D=Wv[0].toUpperCase()+Wv.slice(1);ra(xD,"on"+_D)}ra(AT,"onAnimationEnd");ra(ST,"onAnimationIteration");ra(MT,"onAnimationStart");ra("dblclick","onDoubleClick");ra("focusin","onFocus");ra("focusout","onBlur");ra(wT,"onTransitionEnd");Vc("onMouseEnter",["mouseout","mouseover"]);Vc("onMouseLeave",["mouseout","mouseover"]);Vc("onPointerEnter",["pointerout","pointerover"]);Vc("onPointerLeave",["pointerout","pointerover"]);wl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wl("onBeforeInput",["compositionend","keypress","textInput","paste"]);wl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AD=new Set("cancel close invalid load scroll toggle".split(" ").concat(hd));function zM(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,xL(i,e,void 0,n),n.currentTarget=null}function CT(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;zM(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;zM(r,a,c),s=l}}}if(mm)throw n=Ux,mm=!1,Ux=null,n}function cn(n,e){var t=e[Jx];t===void 0&&(t=e[Jx]=new Set);var i=n+"__bubble";t.has(i)||(bT(e,n,2,!1),t.add(i))}function jv(n,e,t){var i=0;e&&(i|=4),bT(t,n,i,e)}var Vf="_reactListening"+Math.random().toString(36).slice(2);function Gd(n){if(!n[Vf]){n[Vf]=!0,Db.forEach(function(t){t!=="selectionchange"&&(AD.has(t)||jv(t,!1,n),jv(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Vf]||(e[Vf]=!0,jv("selectionchange",!1,e))}}function bT(n,e,t,i){switch(uT(e)){case 1:var r=NL;break;case 4:r=FL;break;default:r=eA}t=r.bind(null,e,t,n),r=void 0,!Fx||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function Xv(n,e,t,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=ja(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}Qb(function(){var c=s,h=Q_(t),f=[];e:{var p=ET.get(n);if(p!==void 0){var m=nA,v=n;switch(n){case"keypress":if(nm(t)===0)break e;case"keydown":case"keyup":m=qL;break;case"focusin":v="focus",m=kv;break;case"focusout":v="blur",m=kv;break;case"beforeblur":case"afterblur":m=kv;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=TM;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=kL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=eD;break;case AT:case ST:case MT:m=GL;break;case wT:m=nD;break;case"scroll":m=UL;break;case"wheel":m=rD;break;case"copy":case"cut":case"paste":m=WL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=IM}var A=(e&4)!==0,x=!A&&n==="scroll",g=A?p!==null?p+"Capture":null:p;A=[];for(var S=c,_;S!==null;){_=S;var w=_.stateNode;if(_.tag===5&&w!==null&&(_=w,g!==null&&(w=Fd(S,g),w!=null&&A.push(Vd(S,w,_)))),x)break;S=S.return}0<A.length&&(p=new m(p,v,null,t,h),f.push({event:p,listeners:A}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",p&&t!==Dx&&(v=t.relatedTarget||t.fromElement)&&(ja(v)||v[eo]))break e;if((m||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,m?(v=t.relatedTarget||t.toElement,m=c,v=v?ja(v):null,v!==null&&(x=El(v),v!==x||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=c),m!==v)){if(A=TM,w="onMouseLeave",g="onMouseEnter",S="mouse",(n==="pointerout"||n==="pointerover")&&(A=IM,w="onPointerLeave",g="onPointerEnter",S="pointer"),x=m==null?p:xc(m),_=v==null?p:xc(v),p=new A(w,S+"leave",m,t,h),p.target=x,p.relatedTarget=_,w=null,ja(h)===c&&(A=new A(g,S+"enter",v,t,h),A.target=_,A.relatedTarget=x,w=A),x=w,m&&v)t:{for(A=m,g=v,S=0,_=A;_;_=jl(_))S++;for(_=0,w=g;w;w=jl(w))_++;for(;0<S-_;)A=jl(A),S--;for(;0<_-S;)g=jl(g),_--;for(;S--;){if(A===g||g!==null&&A===g.alternate)break t;A=jl(A),g=jl(g)}A=null}else A=null;m!==null&&HM(f,p,m,A,!1),v!==null&&x!==null&&HM(f,x,v,A,!0)}}e:{if(p=c?xc(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var I=dD;else if(LM(p))if(gT)I=mD;else{I=fD;var T=hD}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(I=pD);if(I&&(I=I(n,c))){mT(f,I,t,h);break e}T&&T(n,p,c),n==="focusout"&&(T=p._wrapperState)&&T.controlled&&p.type==="number"&&Rx(p,"number",p.value)}switch(T=c?xc(c):window,n){case"focusin":(LM(T)||T.contentEditable==="true")&&(vc=T,Hx=c,_d=null);break;case"focusout":_d=Hx=vc=null;break;case"mousedown":Gx=!0;break;case"contextmenu":case"mouseup":case"dragend":Gx=!1,OM(f,t,h);break;case"selectionchange":if(yD)break;case"keydown":case"keyup":OM(f,t,h)}var P;if(rA)e:{switch(n){case"compositionstart":var B="onCompositionStart";break e;case"compositionend":B="onCompositionEnd";break e;case"compositionupdate":B="onCompositionUpdate";break e}B=void 0}else gc?fT(n,t)&&(B="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(B="onCompositionStart");B&&(hT&&t.locale!=="ko"&&(gc||B!=="onCompositionStart"?B==="onCompositionEnd"&&gc&&(P=dT()):(zo=h,tA="value"in zo?zo.value:zo.textContent,gc=!0)),T=_m(c,B),0<T.length&&(B=new RM(B,n,null,t,h),f.push({event:B,listeners:T}),P?B.data=P:(P=pT(t),P!==null&&(B.data=P)))),(P=oD?aD(n,t):lD(n,t))&&(c=_m(c,"onBeforeInput"),0<c.length&&(h=new RM("onBeforeInput","beforeinput",null,t,h),f.push({event:h,listeners:c}),h.data=P))}CT(f,e)})}function Vd(n,e,t){return{instance:n,listener:e,currentTarget:t}}function _m(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Fd(n,t),s!=null&&i.unshift(Vd(n,s,r)),s=Fd(n,e),s!=null&&i.push(Vd(n,s,r))),n=n.return}return i}function jl(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function HM(n,e,t,i,r){for(var s=e._reactName,o=[];t!==null&&t!==i;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=Fd(t,s),l!=null&&o.unshift(Vd(t,l,a))):r||(l=Fd(t,s),l!=null&&o.push(Vd(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var SD=/\r\n?/g,MD=/\u0000|\uFFFD/g;function GM(n){return(typeof n=="string"?n:""+n).replace(SD,`
`).replace(MD,"")}function Wf(n,e,t){if(e=GM(e),GM(n)!==e&&t)throw Error(Re(425))}function Am(){}var Vx=null,Wx=null;function jx(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Xx=typeof setTimeout=="function"?setTimeout:void 0,wD=typeof clearTimeout=="function"?clearTimeout:void 0,VM=typeof Promise=="function"?Promise:void 0,ED=typeof queueMicrotask=="function"?queueMicrotask:typeof VM<"u"?function(n){return VM.resolve(null).then(n).catch(CD)}:Xx;function CD(n){setTimeout(function(){throw n})}function Jv(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),kd(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);kd(e)}function Xo(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function WM(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var ou=Math.random().toString(36).slice(2),fs="__reactFiber$"+ou,Wd="__reactProps$"+ou,eo="__reactContainer$"+ou,Jx="__reactEvents$"+ou,bD="__reactListeners$"+ou,TD="__reactHandles$"+ou;function ja(n){var e=n[fs];if(e)return e;for(var t=n.parentNode;t;){if(e=t[eo]||t[fs]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=WM(n);n!==null;){if(t=n[fs])return t;n=WM(n)}return e}n=t,t=n.parentNode}return null}function mh(n){return n=n[fs]||n[eo],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function xc(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Re(33))}function Lg(n){return n[Wd]||null}var Kx=[],_c=-1;function sa(n){return{current:n}}function un(n){0>_c||(n.current=Kx[_c],Kx[_c]=null,_c--)}function sn(n,e){_c++,Kx[_c]=n.current,n.current=e}var $o={},Ci=sa($o),Zi=sa(!1),ul=$o;function Wc(n,e){var t=n.type.contextTypes;if(!t)return $o;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function $i(n){return n=n.childContextTypes,n!=null}function Sm(){un(Zi),un(Ci)}function jM(n,e,t){if(Ci.current!==$o)throw Error(Re(168));sn(Ci,e),sn(Zi,t)}function TT(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(Re(108,hL(n)||"Unknown",r));return An({},t,i)}function Mm(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||$o,ul=Ci.current,sn(Ci,n),sn(Zi,Zi.current),!0}function XM(n,e,t){var i=n.stateNode;if(!i)throw Error(Re(169));t?(n=TT(n,e,ul),i.__reactInternalMemoizedMergedChildContext=n,un(Zi),un(Ci),sn(Ci,n)):un(Zi),sn(Zi,t)}var Gs=null,Dg=!1,Kv=!1;function RT(n){Gs===null?Gs=[n]:Gs.push(n)}function RD(n){Dg=!0,RT(n)}function oa(){if(!Kv&&Gs!==null){Kv=!0;var n=0,e=Zt;try{var t=Gs;for(Zt=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}Gs=null,Dg=!1}catch(r){throw Gs!==null&&(Gs=Gs.slice(n+1)),eT(q_,oa),r}finally{Zt=e,Kv=!1}}return null}var Ac=[],Sc=0,wm=null,Em=0,Tr=[],Rr=0,dl=null,Xs=1,Js="";function Oa(n,e){Ac[Sc++]=Em,Ac[Sc++]=wm,wm=n,Em=e}function IT(n,e,t){Tr[Rr++]=Xs,Tr[Rr++]=Js,Tr[Rr++]=dl,dl=n;var i=Xs;n=Js;var r=32-Kr(i)-1;i&=~(1<<r),t+=1;var s=32-Kr(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Xs=1<<32-Kr(e)+r|t<<r|i,Js=s+n}else Xs=1<<s|t<<r|i,Js=n}function oA(n){n.return!==null&&(Oa(n,1),IT(n,1,0))}function aA(n){for(;n===wm;)wm=Ac[--Sc],Ac[Sc]=null,Em=Ac[--Sc],Ac[Sc]=null;for(;n===dl;)dl=Tr[--Rr],Tr[Rr]=null,Js=Tr[--Rr],Tr[Rr]=null,Xs=Tr[--Rr],Tr[Rr]=null}var cr=null,lr=null,pn=!1,Xr=null;function PT(n,e){var t=Pr(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function JM(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,cr=n,lr=Xo(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,cr=n,lr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=dl!==null?{id:Xs,overflow:Js}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Pr(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,cr=n,lr=null,!0):!1;default:return!1}}function Yx(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Qx(n){if(pn){var e=lr;if(e){var t=e;if(!JM(n,e)){if(Yx(n))throw Error(Re(418));e=Xo(t.nextSibling);var i=cr;e&&JM(n,e)?PT(i,t):(n.flags=n.flags&-4097|2,pn=!1,cr=n)}}else{if(Yx(n))throw Error(Re(418));n.flags=n.flags&-4097|2,pn=!1,cr=n}}}function KM(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;cr=n}function jf(n){if(n!==cr)return!1;if(!pn)return KM(n),pn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!jx(n.type,n.memoizedProps)),e&&(e=lr)){if(Yx(n))throw BT(),Error(Re(418));for(;e;)PT(n,e),e=Xo(e.nextSibling)}if(KM(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Re(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){lr=Xo(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}lr=null}}else lr=cr?Xo(n.stateNode.nextSibling):null;return!0}function BT(){for(var n=lr;n;)n=Xo(n.nextSibling)}function jc(){lr=cr=null,pn=!1}function lA(n){Xr===null?Xr=[n]:Xr.push(n)}var ID=uo.ReactCurrentBatchConfig;function Ou(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Re(309));var i=t.stateNode}if(!i)throw Error(Re(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(Re(284));if(!t._owner)throw Error(Re(290,n))}return n}function Xf(n,e){throw n=Object.prototype.toString.call(e),Error(Re(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function YM(n){var e=n._init;return e(n._payload)}function LT(n){function e(g,S){if(n){var _=g.deletions;_===null?(g.deletions=[S],g.flags|=16):_.push(S)}}function t(g,S){if(!n)return null;for(;S!==null;)e(g,S),S=S.sibling;return null}function i(g,S){for(g=new Map;S!==null;)S.key!==null?g.set(S.key,S):g.set(S.index,S),S=S.sibling;return g}function r(g,S){return g=Qo(g,S),g.index=0,g.sibling=null,g}function s(g,S,_){return g.index=_,n?(_=g.alternate,_!==null?(_=_.index,_<S?(g.flags|=2,S):_):(g.flags|=2,S)):(g.flags|=1048576,S)}function o(g){return n&&g.alternate===null&&(g.flags|=2),g}function a(g,S,_,w){return S===null||S.tag!==6?(S=ty(_,g.mode,w),S.return=g,S):(S=r(S,_),S.return=g,S)}function l(g,S,_,w){var I=_.type;return I===mc?h(g,S,_.props.children,w,_.key):S!==null&&(S.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===No&&YM(I)===S.type)?(w=r(S,_.props),w.ref=Ou(g,S,_),w.return=g,w):(w=cm(_.type,_.key,_.props,null,g.mode,w),w.ref=Ou(g,S,_),w.return=g,w)}function c(g,S,_,w){return S===null||S.tag!==4||S.stateNode.containerInfo!==_.containerInfo||S.stateNode.implementation!==_.implementation?(S=ny(_,g.mode,w),S.return=g,S):(S=r(S,_.children||[]),S.return=g,S)}function h(g,S,_,w,I){return S===null||S.tag!==7?(S=il(_,g.mode,w,I),S.return=g,S):(S=r(S,_),S.return=g,S)}function f(g,S,_){if(typeof S=="string"&&S!==""||typeof S=="number")return S=ty(""+S,g.mode,_),S.return=g,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Nf:return _=cm(S.type,S.key,S.props,null,g.mode,_),_.ref=Ou(g,null,S),_.return=g,_;case pc:return S=ny(S,g.mode,_),S.return=g,S;case No:var w=S._init;return f(g,w(S._payload),_)}if(ud(S)||Lu(S))return S=il(S,g.mode,_,null),S.return=g,S;Xf(g,S)}return null}function p(g,S,_,w){var I=S!==null?S.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return I!==null?null:a(g,S,""+_,w);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Nf:return _.key===I?l(g,S,_,w):null;case pc:return _.key===I?c(g,S,_,w):null;case No:return I=_._init,p(g,S,I(_._payload),w)}if(ud(_)||Lu(_))return I!==null?null:h(g,S,_,w,null);Xf(g,_)}return null}function m(g,S,_,w,I){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(_)||null,a(S,g,""+w,I);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Nf:return g=g.get(w.key===null?_:w.key)||null,l(S,g,w,I);case pc:return g=g.get(w.key===null?_:w.key)||null,c(S,g,w,I);case No:var T=w._init;return m(g,S,_,T(w._payload),I)}if(ud(w)||Lu(w))return g=g.get(_)||null,h(S,g,w,I,null);Xf(S,w)}return null}function v(g,S,_,w){for(var I=null,T=null,P=S,B=S=0,R=null;P!==null&&B<_.length;B++){P.index>B?(R=P,P=null):R=P.sibling;var C=p(g,P,_[B],w);if(C===null){P===null&&(P=R);break}n&&P&&C.alternate===null&&e(g,P),S=s(C,S,B),T===null?I=C:T.sibling=C,T=C,P=R}if(B===_.length)return t(g,P),pn&&Oa(g,B),I;if(P===null){for(;B<_.length;B++)P=f(g,_[B],w),P!==null&&(S=s(P,S,B),T===null?I=P:T.sibling=P,T=P);return pn&&Oa(g,B),I}for(P=i(g,P);B<_.length;B++)R=m(P,g,B,_[B],w),R!==null&&(n&&R.alternate!==null&&P.delete(R.key===null?B:R.key),S=s(R,S,B),T===null?I=R:T.sibling=R,T=R);return n&&P.forEach(function(U){return e(g,U)}),pn&&Oa(g,B),I}function A(g,S,_,w){var I=Lu(_);if(typeof I!="function")throw Error(Re(150));if(_=I.call(_),_==null)throw Error(Re(151));for(var T=I=null,P=S,B=S=0,R=null,C=_.next();P!==null&&!C.done;B++,C=_.next()){P.index>B?(R=P,P=null):R=P.sibling;var U=p(g,P,C.value,w);if(U===null){P===null&&(P=R);break}n&&P&&U.alternate===null&&e(g,P),S=s(U,S,B),T===null?I=U:T.sibling=U,T=U,P=R}if(C.done)return t(g,P),pn&&Oa(g,B),I;if(P===null){for(;!C.done;B++,C=_.next())C=f(g,C.value,w),C!==null&&(S=s(C,S,B),T===null?I=C:T.sibling=C,T=C);return pn&&Oa(g,B),I}for(P=i(g,P);!C.done;B++,C=_.next())C=m(P,g,B,C.value,w),C!==null&&(n&&C.alternate!==null&&P.delete(C.key===null?B:C.key),S=s(C,S,B),T===null?I=C:T.sibling=C,T=C);return n&&P.forEach(function(j){return e(g,j)}),pn&&Oa(g,B),I}function x(g,S,_,w){if(typeof _=="object"&&_!==null&&_.type===mc&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Nf:e:{for(var I=_.key,T=S;T!==null;){if(T.key===I){if(I=_.type,I===mc){if(T.tag===7){t(g,T.sibling),S=r(T,_.props.children),S.return=g,g=S;break e}}else if(T.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===No&&YM(I)===T.type){t(g,T.sibling),S=r(T,_.props),S.ref=Ou(g,T,_),S.return=g,g=S;break e}t(g,T);break}else e(g,T);T=T.sibling}_.type===mc?(S=il(_.props.children,g.mode,w,_.key),S.return=g,g=S):(w=cm(_.type,_.key,_.props,null,g.mode,w),w.ref=Ou(g,S,_),w.return=g,g=w)}return o(g);case pc:e:{for(T=_.key;S!==null;){if(S.key===T)if(S.tag===4&&S.stateNode.containerInfo===_.containerInfo&&S.stateNode.implementation===_.implementation){t(g,S.sibling),S=r(S,_.children||[]),S.return=g,g=S;break e}else{t(g,S);break}else e(g,S);S=S.sibling}S=ny(_,g.mode,w),S.return=g,g=S}return o(g);case No:return T=_._init,x(g,S,T(_._payload),w)}if(ud(_))return v(g,S,_,w);if(Lu(_))return A(g,S,_,w);Xf(g,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,S!==null&&S.tag===6?(t(g,S.sibling),S=r(S,_),S.return=g,g=S):(t(g,S),S=ty(_,g.mode,w),S.return=g,g=S),o(g)):t(g,S)}return x}var Xc=LT(!0),DT=LT(!1),Cm=sa(null),bm=null,Mc=null,cA=null;function uA(){cA=Mc=bm=null}function dA(n){var e=Cm.current;un(Cm),n._currentValue=e}function qx(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function Nc(n,e){bm=n,cA=Mc=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Yi=!0),n.firstContext=null)}function Lr(n){var e=n._currentValue;if(cA!==n)if(n={context:n,memoizedValue:e,next:null},Mc===null){if(bm===null)throw Error(Re(308));Mc=n,bm.dependencies={lanes:0,firstContext:n}}else Mc=Mc.next=n;return e}var Xa=null;function hA(n){Xa===null?Xa=[n]:Xa.push(n)}function NT(n,e,t,i){var r=e.interleaved;return r===null?(t.next=t,hA(e)):(t.next=r.next,r.next=t),e.interleaved=t,to(n,i)}function to(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Fo=!1;function fA(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function FT(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Ys(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Jo(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,Xt&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,to(n,t)}return r=i.interleaved,r===null?(e.next=e,hA(i)):(e.next=r.next,r.next=e),i.interleaved=e,to(n,t)}function im(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,Z_(n,t)}}function QM(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Tm(n,e,t,i){var r=n.updateQueue;Fo=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=n.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var f=r.baseState;o=0,h=c=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((i&p)===p){h!==null&&(h=h.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=n,A=a;switch(p=e,m=t,A.tag){case 1:if(v=A.payload,typeof v=="function"){f=v.call(m,f,p);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=A.payload,p=typeof v=="function"?v.call(m,f,p):v,p==null)break e;f=An({},f,p);break e;case 2:Fo=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=r.effects,p===null?r.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=m,l=f):h=h.next=m,o|=p;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;p=a,a=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(!0);if(h===null&&(l=f),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);fl|=o,n.lanes=o,n.memoizedState=f}}function qM(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(Re(191,r));r.call(i)}}}var gh={},gs=sa(gh),jd=sa(gh),Xd=sa(gh);function Ja(n){if(n===gh)throw Error(Re(174));return n}function pA(n,e){switch(sn(Xd,e),sn(jd,n),sn(gs,gh),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Px(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=Px(e,n)}un(gs),sn(gs,e)}function Jc(){un(gs),un(jd),un(Xd)}function UT(n){Ja(Xd.current);var e=Ja(gs.current),t=Px(e,n.type);e!==t&&(sn(jd,n),sn(gs,t))}function mA(n){jd.current===n&&(un(gs),un(jd))}var vn=sa(0);function Rm(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Yv=[];function gA(){for(var n=0;n<Yv.length;n++)Yv[n]._workInProgressVersionPrimary=null;Yv.length=0}var rm=uo.ReactCurrentDispatcher,Qv=uo.ReactCurrentBatchConfig,hl=0,_n=null,jn=null,ti=null,Im=!1,Ad=!1,Jd=0,PD=0;function vi(){throw Error(Re(321))}function vA(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Qr(n[t],e[t]))return!1;return!0}function yA(n,e,t,i,r,s){if(hl=s,_n=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,rm.current=n===null||n.memoizedState===null?ND:FD,n=t(i,r),Ad){s=0;do{if(Ad=!1,Jd=0,25<=s)throw Error(Re(301));s+=1,ti=jn=null,e.updateQueue=null,rm.current=UD,n=t(i,r)}while(Ad)}if(rm.current=Pm,e=jn!==null&&jn.next!==null,hl=0,ti=jn=_n=null,Im=!1,e)throw Error(Re(300));return n}function xA(){var n=Jd!==0;return Jd=0,n}function hs(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ti===null?_n.memoizedState=ti=n:ti=ti.next=n,ti}function Dr(){if(jn===null){var n=_n.alternate;n=n!==null?n.memoizedState:null}else n=jn.next;var e=ti===null?_n.memoizedState:ti.next;if(e!==null)ti=e,jn=n;else{if(n===null)throw Error(Re(310));jn=n,n={memoizedState:jn.memoizedState,baseState:jn.baseState,baseQueue:jn.baseQueue,queue:jn.queue,next:null},ti===null?_n.memoizedState=ti=n:ti=ti.next=n}return ti}function Kd(n,e){return typeof e=="function"?e(n):e}function qv(n){var e=Dr(),t=e.queue;if(t===null)throw Error(Re(311));t.lastRenderedReducer=n;var i=jn,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((hl&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:n(i,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=i):l=l.next=f,_n.lanes|=h,fl|=h}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,Qr(i,e.memoizedState)||(Yi=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,_n.lanes|=s,fl|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Zv(n){var e=Dr(),t=e.queue;if(t===null)throw Error(Re(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do s=n(s,o.action),o=o.next;while(o!==r);Qr(s,e.memoizedState)||(Yi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function OT(){}function kT(n,e){var t=_n,i=Dr(),r=e(),s=!Qr(i.memoizedState,r);if(s&&(i.memoizedState=r,Yi=!0),i=i.queue,_A(GT.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||ti!==null&&ti.memoizedState.tag&1){if(t.flags|=2048,Yd(9,HT.bind(null,t,i,r,e),void 0,null),ni===null)throw Error(Re(349));hl&30||zT(t,e,r)}return r}function zT(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=_n.updateQueue,e===null?(e={lastEffect:null,stores:null},_n.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function HT(n,e,t,i){e.value=t,e.getSnapshot=i,VT(e)&&WT(n)}function GT(n,e,t){return t(function(){VT(e)&&WT(n)})}function VT(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Qr(n,t)}catch{return!0}}function WT(n){var e=to(n,1);e!==null&&Yr(e,n,1,-1)}function ZM(n){var e=hs();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Kd,lastRenderedState:n},e.queue=n,n=n.dispatch=DD.bind(null,_n,n),[e.memoizedState,n]}function Yd(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=_n.updateQueue,e===null?(e={lastEffect:null,stores:null},_n.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function jT(){return Dr().memoizedState}function sm(n,e,t,i){var r=hs();_n.flags|=n,r.memoizedState=Yd(1|e,t,void 0,i===void 0?null:i)}function Ng(n,e,t,i){var r=Dr();i=i===void 0?null:i;var s=void 0;if(jn!==null){var o=jn.memoizedState;if(s=o.destroy,i!==null&&vA(i,o.deps)){r.memoizedState=Yd(e,t,s,i);return}}_n.flags|=n,r.memoizedState=Yd(1|e,t,s,i)}function $M(n,e){return sm(8390656,8,n,e)}function _A(n,e){return Ng(2048,8,n,e)}function XT(n,e){return Ng(4,2,n,e)}function JT(n,e){return Ng(4,4,n,e)}function KT(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function YT(n,e,t){return t=t!=null?t.concat([n]):null,Ng(4,4,KT.bind(null,e,n),t)}function AA(){}function QT(n,e){var t=Dr();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&vA(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function qT(n,e){var t=Dr();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&vA(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function ZT(n,e,t){return hl&21?(Qr(t,e)||(t=iT(),_n.lanes|=t,fl|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Yi=!0),n.memoizedState=t)}function BD(n,e){var t=Zt;Zt=t!==0&&4>t?t:4,n(!0);var i=Qv.transition;Qv.transition={};try{n(!1),e()}finally{Zt=t,Qv.transition=i}}function $T(){return Dr().memoizedState}function LD(n,e,t){var i=Yo(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},eR(n))tR(e,t);else if(t=NT(n,e,t,i),t!==null){var r=Oi();Yr(t,n,i,r),nR(t,e,i)}}function DD(n,e,t){var i=Yo(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(eR(n))tR(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(r.hasEagerState=!0,r.eagerState=a,Qr(a,o)){var l=e.interleaved;l===null?(r.next=r,hA(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}t=NT(n,e,r,i),t!==null&&(r=Oi(),Yr(t,n,i,r),nR(t,e,i))}}function eR(n){var e=n.alternate;return n===_n||e!==null&&e===_n}function tR(n,e){Ad=Im=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function nR(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,Z_(n,t)}}var Pm={readContext:Lr,useCallback:vi,useContext:vi,useEffect:vi,useImperativeHandle:vi,useInsertionEffect:vi,useLayoutEffect:vi,useMemo:vi,useReducer:vi,useRef:vi,useState:vi,useDebugValue:vi,useDeferredValue:vi,useTransition:vi,useMutableSource:vi,useSyncExternalStore:vi,useId:vi,unstable_isNewReconciler:!1},ND={readContext:Lr,useCallback:function(n,e){return hs().memoizedState=[n,e===void 0?null:e],n},useContext:Lr,useEffect:$M,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,sm(4194308,4,KT.bind(null,e,n),t)},useLayoutEffect:function(n,e){return sm(4194308,4,n,e)},useInsertionEffect:function(n,e){return sm(4,2,n,e)},useMemo:function(n,e){var t=hs();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=hs();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=LD.bind(null,_n,n),[i.memoizedState,n]},useRef:function(n){var e=hs();return n={current:n},e.memoizedState=n},useState:ZM,useDebugValue:AA,useDeferredValue:function(n){return hs().memoizedState=n},useTransition:function(){var n=ZM(!1),e=n[0];return n=BD.bind(null,n[1]),hs().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=_n,r=hs();if(pn){if(t===void 0)throw Error(Re(407));t=t()}else{if(t=e(),ni===null)throw Error(Re(349));hl&30||zT(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,$M(GT.bind(null,i,s,n),[n]),i.flags|=2048,Yd(9,HT.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=hs(),e=ni.identifierPrefix;if(pn){var t=Js,i=Xs;t=(i&~(1<<32-Kr(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=Jd++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=PD++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},FD={readContext:Lr,useCallback:QT,useContext:Lr,useEffect:_A,useImperativeHandle:YT,useInsertionEffect:XT,useLayoutEffect:JT,useMemo:qT,useReducer:qv,useRef:jT,useState:function(){return qv(Kd)},useDebugValue:AA,useDeferredValue:function(n){var e=Dr();return ZT(e,jn.memoizedState,n)},useTransition:function(){var n=qv(Kd)[0],e=Dr().memoizedState;return[n,e]},useMutableSource:OT,useSyncExternalStore:kT,useId:$T,unstable_isNewReconciler:!1},UD={readContext:Lr,useCallback:QT,useContext:Lr,useEffect:_A,useImperativeHandle:YT,useInsertionEffect:XT,useLayoutEffect:JT,useMemo:qT,useReducer:Zv,useRef:jT,useState:function(){return Zv(Kd)},useDebugValue:AA,useDeferredValue:function(n){var e=Dr();return jn===null?e.memoizedState=n:ZT(e,jn.memoizedState,n)},useTransition:function(){var n=Zv(Kd)[0],e=Dr().memoizedState;return[n,e]},useMutableSource:OT,useSyncExternalStore:kT,useId:$T,unstable_isNewReconciler:!1};function Vr(n,e){if(n&&n.defaultProps){e=An({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function Zx(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:An({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Fg={isMounted:function(n){return(n=n._reactInternals)?El(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=Oi(),r=Yo(n),s=Ys(i,r);s.payload=e,t!=null&&(s.callback=t),e=Jo(n,s,r),e!==null&&(Yr(e,n,r,i),im(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=Oi(),r=Yo(n),s=Ys(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Jo(n,s,r),e!==null&&(Yr(e,n,r,i),im(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Oi(),i=Yo(n),r=Ys(t,i);r.tag=2,e!=null&&(r.callback=e),e=Jo(n,r,i),e!==null&&(Yr(e,n,i,t),im(e,n,i))}};function ew(n,e,t,i,r,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!Hd(t,i)||!Hd(r,s):!0}function iR(n,e,t){var i=!1,r=$o,s=e.contextType;return typeof s=="object"&&s!==null?s=Lr(s):(r=$i(e)?ul:Ci.current,i=e.contextTypes,s=(i=i!=null)?Wc(n,r):$o),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Fg,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function tw(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&Fg.enqueueReplaceState(e,e.state,null)}function $x(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs={},fA(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Lr(s):(s=$i(e)?ul:Ci.current,r.context=Wc(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Zx(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Fg.enqueueReplaceState(r,r.state,null),Tm(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function Kc(n,e){try{var t="",i=e;do t+=dL(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r,digest:null}}function $v(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function e_(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var OD=typeof WeakMap=="function"?WeakMap:Map;function rR(n,e,t){t=Ys(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){Lm||(Lm=!0,u_=i),e_(n,e)},t}function sR(n,e,t){t=Ys(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){e_(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){e_(n,e),typeof i!="function"&&(Ko===null?Ko=new Set([this]):Ko.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function nw(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new OD;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=ZD.bind(null,n,e,t),e.then(n,n))}function iw(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function rw(n,e,t,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Ys(-1,1),e.tag=2,Jo(t,e,1))),t.lanes|=1),n)}var kD=uo.ReactCurrentOwner,Yi=!1;function Di(n,e,t,i){e.child=n===null?DT(e,null,t,i):Xc(e,n.child,t,i)}function sw(n,e,t,i,r){t=t.render;var s=e.ref;return Nc(e,r),i=yA(n,e,t,i,s,r),t=xA(),n!==null&&!Yi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,no(n,e,r)):(pn&&t&&oA(e),e.flags|=1,Di(n,e,i,r),e.child)}function ow(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!RA(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,oR(n,e,s,i,r)):(n=cm(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&r)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:Hd,t(o,i)&&n.ref===e.ref)return no(n,e,r)}return e.flags|=1,n=Qo(s,i),n.ref=e.ref,n.return=e,e.child=n}function oR(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(Hd(s,i)&&n.ref===e.ref)if(Yi=!1,e.pendingProps=i=s,(n.lanes&r)!==0)n.flags&131072&&(Yi=!0);else return e.lanes=n.lanes,no(n,e,r)}return t_(n,e,t,i,r)}function aR(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},sn(Ec,ar),ar|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,sn(Ec,ar),ar|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:t,sn(Ec,ar),ar|=i}else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,sn(Ec,ar),ar|=i;return Di(n,e,r,t),e.child}function lR(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function t_(n,e,t,i,r){var s=$i(t)?ul:Ci.current;return s=Wc(e,s),Nc(e,r),t=yA(n,e,t,i,s,r),i=xA(),n!==null&&!Yi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,no(n,e,r)):(pn&&i&&oA(e),e.flags|=1,Di(n,e,t,r),e.child)}function aw(n,e,t,i,r){if($i(t)){var s=!0;Mm(e)}else s=!1;if(Nc(e,r),e.stateNode===null)om(n,e),iR(e,t,i),$x(e,t,i,r),i=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=Lr(c):(c=$i(t)?ul:Ci.current,c=Wc(e,c));var h=t.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&tw(e,o,i,c),Fo=!1;var p=e.memoizedState;o.state=p,Tm(e,i,o,r),l=e.memoizedState,a!==i||p!==l||Zi.current||Fo?(typeof h=="function"&&(Zx(e,t,h,i),l=e.memoizedState),(a=Fo||ew(e,t,a,i,p,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,FT(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:Vr(e.type,a),o.props=c,f=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Lr(l):(l=$i(t)?ul:Ci.current,l=Wc(e,l));var m=t.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&tw(e,o,i,l),Fo=!1,p=e.memoizedState,o.state=p,Tm(e,i,o,r);var v=e.memoizedState;a!==f||p!==v||Zi.current||Fo?(typeof m=="function"&&(Zx(e,t,m,i),v=e.memoizedState),(c=Fo||ew(e,t,c,i,p,v,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=v),o.props=i,o.state=v,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),i=!1)}return n_(n,e,t,i,s,r)}function n_(n,e,t,i,r,s){lR(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&XM(e,t,!1),no(n,e,s);i=e.stateNode,kD.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=Xc(e,n.child,null,s),e.child=Xc(e,null,a,s)):Di(n,e,a,s),e.memoizedState=i.state,r&&XM(e,t,!0),e.child}function cR(n){var e=n.stateNode;e.pendingContext?jM(n,e.pendingContext,e.pendingContext!==e.context):e.context&&jM(n,e.context,!1),pA(n,e.containerInfo)}function lw(n,e,t,i,r){return jc(),lA(r),e.flags|=256,Di(n,e,t,i),e.child}var i_={dehydrated:null,treeContext:null,retryLane:0};function r_(n){return{baseLanes:n,cachePool:null,transitions:null}}function uR(n,e,t){var i=e.pendingProps,r=vn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),sn(vn,r&1),n===null)return Qx(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,n=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=kg(o,i,0,null),n=il(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=r_(t),e.memoizedState=i_,n):SA(e,o));if(r=n.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return zD(n,e,o,i,a,r,t);if(s){s=i.fallback,o=e.mode,r=n.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Qo(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=Qo(a,s):(s=il(s,o,t,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=n.child.memoizedState,o=o===null?r_(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=i_,i}return s=n.child,n=s.sibling,i=Qo(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function SA(n,e){return e=kg({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Jf(n,e,t,i){return i!==null&&lA(i),Xc(e,n.child,null,t),n=SA(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function zD(n,e,t,i,r,s,o){if(t)return e.flags&256?(e.flags&=-257,i=$v(Error(Re(422))),Jf(n,e,o,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=kg({mode:"visible",children:i.children},r,0,null),s=il(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Xc(e,n.child,null,o),e.child.memoizedState=r_(o),e.memoizedState=i_,s);if(!(e.mode&1))return Jf(n,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(Re(419)),i=$v(s,i,void 0),Jf(n,e,o,i)}if(a=(o&n.childLanes)!==0,Yi||a){if(i=ni,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,to(n,r),Yr(i,n,r,-1))}return TA(),i=$v(Error(Re(421))),Jf(n,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=$D.bind(null,n),r._reactRetry=e,null):(n=s.treeContext,lr=Xo(r.nextSibling),cr=e,pn=!0,Xr=null,n!==null&&(Tr[Rr++]=Xs,Tr[Rr++]=Js,Tr[Rr++]=dl,Xs=n.id,Js=n.overflow,dl=e),e=SA(e,i.children),e.flags|=4096,e)}function cw(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),qx(n.return,e,t)}function ey(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function dR(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Di(n,e,i.children,t),i=vn.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&cw(n,t,e);else if(n.tag===19)cw(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(sn(vn,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&Rm(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),ey(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&Rm(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}ey(e,!0,t,null,s);break;case"together":ey(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function om(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function no(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),fl|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Re(153));if(e.child!==null){for(n=e.child,t=Qo(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Qo(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function HD(n,e,t){switch(e.tag){case 3:cR(e),jc();break;case 5:UT(e);break;case 1:$i(e.type)&&Mm(e);break;case 4:pA(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;sn(Cm,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(sn(vn,vn.current&1),e.flags|=128,null):t&e.child.childLanes?uR(n,e,t):(sn(vn,vn.current&1),n=no(n,e,t),n!==null?n.sibling:null);sn(vn,vn.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return dR(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),sn(vn,vn.current),i)break;return null;case 22:case 23:return e.lanes=0,aR(n,e,t)}return no(n,e,t)}var hR,s_,fR,pR;hR=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};s_=function(){};fR=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,Ja(gs.current);var s=null;switch(t){case"input":r=bx(n,r),i=bx(n,i),s=[];break;case"select":r=An({},r,{value:void 0}),i=An({},i,{value:void 0}),s=[];break;case"textarea":r=Ix(n,r),i=Ix(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=Am)}Bx(t,i);var o;t=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Dd.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Dd.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&cn("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};pR=function(n,e,t,i){t!==i&&(e.flags|=4)};function ku(n,e){if(!pn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function yi(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function GD(n,e,t){var i=e.pendingProps;switch(aA(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yi(e),null;case 1:return $i(e.type)&&Sm(),yi(e),null;case 3:return i=e.stateNode,Jc(),un(Zi),un(Ci),gA(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(jf(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Xr!==null&&(f_(Xr),Xr=null))),s_(n,e),yi(e),null;case 5:mA(e);var r=Ja(Xd.current);if(t=e.type,n!==null&&e.stateNode!=null)fR(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Re(166));return yi(e),null}if(n=Ja(gs.current),jf(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[fs]=e,i[Wd]=s,n=(e.mode&1)!==0,t){case"dialog":cn("cancel",i),cn("close",i);break;case"iframe":case"object":case"embed":cn("load",i);break;case"video":case"audio":for(r=0;r<hd.length;r++)cn(hd[r],i);break;case"source":cn("error",i);break;case"img":case"image":case"link":cn("error",i),cn("load",i);break;case"details":cn("toggle",i);break;case"input":yM(i,s),cn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},cn("invalid",i);break;case"textarea":_M(i,s),cn("invalid",i)}Bx(t,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Wf(i.textContent,a,n),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Wf(i.textContent,a,n),r=["children",""+a]):Dd.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&cn("scroll",i)}switch(t){case"input":Ff(i),xM(i,s,!0);break;case"textarea":Ff(i),AM(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Am)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Gb(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[fs]=e,n[Wd]=i,hR(n,e,!1,!1),e.stateNode=n;e:{switch(o=Lx(t,i),t){case"dialog":cn("cancel",n),cn("close",n),r=i;break;case"iframe":case"object":case"embed":cn("load",n),r=i;break;case"video":case"audio":for(r=0;r<hd.length;r++)cn(hd[r],n);r=i;break;case"source":cn("error",n),r=i;break;case"img":case"image":case"link":cn("error",n),cn("load",n),r=i;break;case"details":cn("toggle",n),r=i;break;case"input":yM(n,i),r=bx(n,i),cn("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=An({},i,{value:void 0}),cn("invalid",n);break;case"textarea":_M(n,i),r=Ix(n,i),cn("invalid",n);break;default:r=i}Bx(t,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?jb(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Vb(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Nd(n,l):typeof l=="number"&&Nd(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Dd.hasOwnProperty(s)?l!=null&&s==="onScroll"&&cn("scroll",n):l!=null&&X_(n,s,l,o))}switch(t){case"input":Ff(n),xM(n,i,!1);break;case"textarea":Ff(n),AM(n);break;case"option":i.value!=null&&n.setAttribute("value",""+Zo(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?Pc(n,!!i.multiple,s,!1):i.defaultValue!=null&&Pc(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=Am)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return yi(e),null;case 6:if(n&&e.stateNode!=null)pR(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Re(166));if(t=Ja(Xd.current),Ja(gs.current),jf(e)){if(i=e.stateNode,t=e.memoizedProps,i[fs]=e,(s=i.nodeValue!==t)&&(n=cr,n!==null))switch(n.tag){case 3:Wf(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Wf(i.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[fs]=e,e.stateNode=i}return yi(e),null;case 13:if(un(vn),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(pn&&lr!==null&&e.mode&1&&!(e.flags&128))BT(),jc(),e.flags|=98560,s=!1;else if(s=jf(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(Re(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Re(317));s[fs]=e}else jc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;yi(e),s=!1}else Xr!==null&&(f_(Xr),Xr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||vn.current&1?Xn===0&&(Xn=3):TA())),e.updateQueue!==null&&(e.flags|=4),yi(e),null);case 4:return Jc(),s_(n,e),n===null&&Gd(e.stateNode.containerInfo),yi(e),null;case 10:return dA(e.type._context),yi(e),null;case 17:return $i(e.type)&&Sm(),yi(e),null;case 19:if(un(vn),s=e.memoizedState,s===null)return yi(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)ku(s,!1);else{if(Xn!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Rm(n),o!==null){for(e.flags|=128,ku(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return sn(vn,vn.current&1|2),e.child}n=n.sibling}s.tail!==null&&Pn()>Yc&&(e.flags|=128,i=!0,ku(s,!1),e.lanes=4194304)}else{if(!i)if(n=Rm(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),ku(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!pn)return yi(e),null}else 2*Pn()-s.renderingStartTime>Yc&&t!==1073741824&&(e.flags|=128,i=!0,ku(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Pn(),e.sibling=null,t=vn.current,sn(vn,i?t&1|2:t&1),e):(yi(e),null);case 22:case 23:return bA(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?ar&1073741824&&(yi(e),e.subtreeFlags&6&&(e.flags|=8192)):yi(e),null;case 24:return null;case 25:return null}throw Error(Re(156,e.tag))}function VD(n,e){switch(aA(e),e.tag){case 1:return $i(e.type)&&Sm(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Jc(),un(Zi),un(Ci),gA(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return mA(e),null;case 13:if(un(vn),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Re(340));jc()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return un(vn),null;case 4:return Jc(),null;case 10:return dA(e.type._context),null;case 22:case 23:return bA(),null;case 24:return null;default:return null}}var Kf=!1,Mi=!1,WD=typeof WeakSet=="function"?WeakSet:Set,$e=null;function wc(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){wn(n,e,i)}else t.current=null}function o_(n,e,t){try{t()}catch(i){wn(n,e,i)}}var uw=!1;function jD(n,e){if(Vx=ym,n=xT(),sA(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,h=0,f=n,p=null;t:for(;;){for(var m;f!==t||r!==0&&f.nodeType!==3||(a=o+r),f!==s||i!==0&&f.nodeType!==3||(l=o+i),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===n)break t;if(p===t&&++c===r&&(a=o),p===s&&++h===i&&(l=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(Wx={focusedElem:n,selectionRange:t},ym=!1,$e=e;$e!==null;)if(e=$e,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,$e=n;else for(;$e!==null;){e=$e;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var A=v.memoizedProps,x=v.memoizedState,g=e.stateNode,S=g.getSnapshotBeforeUpdate(e.elementType===e.type?A:Vr(e.type,A),x);g.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Re(163))}}catch(w){wn(e,e.return,w)}if(n=e.sibling,n!==null){n.return=e.return,$e=n;break}$e=e.return}return v=uw,uw=!1,v}function Sd(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&o_(e,t,s)}r=r.next}while(r!==i)}}function Ug(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function a_(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function mR(n){var e=n.alternate;e!==null&&(n.alternate=null,mR(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[fs],delete e[Wd],delete e[Jx],delete e[bD],delete e[TD])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function gR(n){return n.tag===5||n.tag===3||n.tag===4}function dw(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||gR(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function l_(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Am));else if(i!==4&&(n=n.child,n!==null))for(l_(n,e,t),n=n.sibling;n!==null;)l_(n,e,t),n=n.sibling}function c_(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(c_(n,e,t),n=n.sibling;n!==null;)c_(n,e,t),n=n.sibling}var ri=null,jr=!1;function Mo(n,e,t){for(t=t.child;t!==null;)vR(n,e,t),t=t.sibling}function vR(n,e,t){if(ms&&typeof ms.onCommitFiberUnmount=="function")try{ms.onCommitFiberUnmount(Rg,t)}catch{}switch(t.tag){case 5:Mi||wc(t,e);case 6:var i=ri,r=jr;ri=null,Mo(n,e,t),ri=i,jr=r,ri!==null&&(jr?(n=ri,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):ri.removeChild(t.stateNode));break;case 18:ri!==null&&(jr?(n=ri,t=t.stateNode,n.nodeType===8?Jv(n.parentNode,t):n.nodeType===1&&Jv(n,t),kd(n)):Jv(ri,t.stateNode));break;case 4:i=ri,r=jr,ri=t.stateNode.containerInfo,jr=!0,Mo(n,e,t),ri=i,jr=r;break;case 0:case 11:case 14:case 15:if(!Mi&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&o_(t,e,o),r=r.next}while(r!==i)}Mo(n,e,t);break;case 1:if(!Mi&&(wc(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){wn(t,e,a)}Mo(n,e,t);break;case 21:Mo(n,e,t);break;case 22:t.mode&1?(Mi=(i=Mi)||t.memoizedState!==null,Mo(n,e,t),Mi=i):Mo(n,e,t);break;default:Mo(n,e,t)}}function hw(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new WD),e.forEach(function(i){var r=eN.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function kr(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ri=a.stateNode,jr=!1;break e;case 3:ri=a.stateNode.containerInfo,jr=!0;break e;case 4:ri=a.stateNode.containerInfo,jr=!0;break e}a=a.return}if(ri===null)throw Error(Re(160));vR(s,o,r),ri=null,jr=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){wn(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)yR(e,n),e=e.sibling}function yR(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(kr(e,n),ds(n),i&4){try{Sd(3,n,n.return),Ug(3,n)}catch(A){wn(n,n.return,A)}try{Sd(5,n,n.return)}catch(A){wn(n,n.return,A)}}break;case 1:kr(e,n),ds(n),i&512&&t!==null&&wc(t,t.return);break;case 5:if(kr(e,n),ds(n),i&512&&t!==null&&wc(t,t.return),n.flags&32){var r=n.stateNode;try{Nd(r,"")}catch(A){wn(n,n.return,A)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&zb(r,s),Lx(a,o);var c=Lx(a,s);for(o=0;o<l.length;o+=2){var h=l[o],f=l[o+1];h==="style"?jb(r,f):h==="dangerouslySetInnerHTML"?Vb(r,f):h==="children"?Nd(r,f):X_(r,h,f,c)}switch(a){case"input":Tx(r,s);break;case"textarea":Hb(r,s);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Pc(r,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?Pc(r,!!s.multiple,s.defaultValue,!0):Pc(r,!!s.multiple,s.multiple?[]:"",!1))}r[Wd]=s}catch(A){wn(n,n.return,A)}}break;case 6:if(kr(e,n),ds(n),i&4){if(n.stateNode===null)throw Error(Re(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(A){wn(n,n.return,A)}}break;case 3:if(kr(e,n),ds(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{kd(e.containerInfo)}catch(A){wn(n,n.return,A)}break;case 4:kr(e,n),ds(n);break;case 13:kr(e,n),ds(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(EA=Pn())),i&4&&hw(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(Mi=(c=Mi)||h,kr(e,n),Mi=c):kr(e,n),ds(n),i&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!h&&n.mode&1)for($e=n,h=n.child;h!==null;){for(f=$e=h;$e!==null;){switch(p=$e,m=p.child,p.tag){case 0:case 11:case 14:case 15:Sd(4,p,p.return);break;case 1:wc(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){i=p,t=p.return;try{e=i,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(A){wn(i,t,A)}}break;case 5:wc(p,p.return);break;case 22:if(p.memoizedState!==null){pw(f);continue}}m!==null?(m.return=p,$e=m):pw(f)}h=h.sibling}e:for(h=null,f=n;;){if(f.tag===5){if(h===null){h=f;try{r=f.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Wb("display",o))}catch(A){wn(n,n.return,A)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(A){wn(n,n.return,A)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:kr(e,n),ds(n),i&4&&hw(n);break;case 21:break;default:kr(e,n),ds(n)}}function ds(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(gR(t)){var i=t;break e}t=t.return}throw Error(Re(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Nd(r,""),i.flags&=-33);var s=dw(n);c_(n,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=dw(n);l_(n,a,o);break;default:throw Error(Re(161))}}catch(l){wn(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function XD(n,e,t){$e=n,xR(n)}function xR(n,e,t){for(var i=(n.mode&1)!==0;$e!==null;){var r=$e,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Kf;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Mi;a=Kf;var c=Mi;if(Kf=o,(Mi=l)&&!c)for($e=r;$e!==null;)o=$e,l=o.child,o.tag===22&&o.memoizedState!==null?mw(r):l!==null?(l.return=o,$e=l):mw(r);for(;s!==null;)$e=s,xR(s),s=s.sibling;$e=r,Kf=a,Mi=c}fw(n)}else r.subtreeFlags&8772&&s!==null?(s.return=r,$e=s):fw(n)}}function fw(n){for(;$e!==null;){var e=$e;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Mi||Ug(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Mi)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:Vr(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&qM(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}qM(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&kd(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Re(163))}Mi||e.flags&512&&a_(e)}catch(p){wn(e,e.return,p)}}if(e===n){$e=null;break}if(t=e.sibling,t!==null){t.return=e.return,$e=t;break}$e=e.return}}function pw(n){for(;$e!==null;){var e=$e;if(e===n){$e=null;break}var t=e.sibling;if(t!==null){t.return=e.return,$e=t;break}$e=e.return}}function mw(n){for(;$e!==null;){var e=$e;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Ug(4,e)}catch(l){wn(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){wn(e,r,l)}}var s=e.return;try{a_(e)}catch(l){wn(e,s,l)}break;case 5:var o=e.return;try{a_(e)}catch(l){wn(e,o,l)}}}catch(l){wn(e,e.return,l)}if(e===n){$e=null;break}var a=e.sibling;if(a!==null){a.return=e.return,$e=a;break}$e=e.return}}var JD=Math.ceil,Bm=uo.ReactCurrentDispatcher,MA=uo.ReactCurrentOwner,Br=uo.ReactCurrentBatchConfig,Xt=0,ni=null,kn=null,si=0,ar=0,Ec=sa(0),Xn=0,Qd=null,fl=0,Og=0,wA=0,Md=null,Ki=null,EA=0,Yc=1/0,ks=null,Lm=!1,u_=null,Ko=null,Yf=!1,Ho=null,Dm=0,wd=0,d_=null,am=-1,lm=0;function Oi(){return Xt&6?Pn():am!==-1?am:am=Pn()}function Yo(n){return n.mode&1?Xt&2&&si!==0?si&-si:ID.transition!==null?(lm===0&&(lm=iT()),lm):(n=Zt,n!==0||(n=window.event,n=n===void 0?16:uT(n.type)),n):1}function Yr(n,e,t,i){if(50<wd)throw wd=0,d_=null,Error(Re(185));fh(n,t,i),(!(Xt&2)||n!==ni)&&(n===ni&&(!(Xt&2)&&(Og|=t),Xn===4&&Oo(n,si)),er(n,i),t===1&&Xt===0&&!(e.mode&1)&&(Yc=Pn()+500,Dg&&oa()))}function er(n,e){var t=n.callbackNode;IL(n,e);var i=vm(n,n===ni?si:0);if(i===0)t!==null&&wM(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&wM(t),e===1)n.tag===0?RD(gw.bind(null,n)):RT(gw.bind(null,n)),ED(function(){!(Xt&6)&&oa()}),t=null;else{switch(rT(i)){case 1:t=q_;break;case 4:t=tT;break;case 16:t=gm;break;case 536870912:t=nT;break;default:t=gm}t=bR(t,_R.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function _R(n,e){if(am=-1,lm=0,Xt&6)throw Error(Re(327));var t=n.callbackNode;if(Fc()&&n.callbackNode!==t)return null;var i=vm(n,n===ni?si:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=Nm(n,i);else{e=i;var r=Xt;Xt|=2;var s=SR();(ni!==n||si!==e)&&(ks=null,Yc=Pn()+500,nl(n,e));do try{QD();break}catch(a){AR(n,a)}while(!0);uA(),Bm.current=s,Xt=r,kn!==null?e=0:(ni=null,si=0,e=Xn)}if(e!==0){if(e===2&&(r=Ox(n),r!==0&&(i=r,e=h_(n,r))),e===1)throw t=Qd,nl(n,0),Oo(n,i),er(n,Pn()),t;if(e===6)Oo(n,i);else{if(r=n.current.alternate,!(i&30)&&!KD(r)&&(e=Nm(n,i),e===2&&(s=Ox(n),s!==0&&(i=s,e=h_(n,s))),e===1))throw t=Qd,nl(n,0),Oo(n,i),er(n,Pn()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error(Re(345));case 2:ka(n,Ki,ks);break;case 3:if(Oo(n,i),(i&130023424)===i&&(e=EA+500-Pn(),10<e)){if(vm(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){Oi(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=Xx(ka.bind(null,n,Ki,ks),e);break}ka(n,Ki,ks);break;case 4:if(Oo(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var o=31-Kr(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Pn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*JD(i/1960))-i,10<i){n.timeoutHandle=Xx(ka.bind(null,n,Ki,ks),i);break}ka(n,Ki,ks);break;case 5:ka(n,Ki,ks);break;default:throw Error(Re(329))}}}return er(n,Pn()),n.callbackNode===t?_R.bind(null,n):null}function h_(n,e){var t=Md;return n.current.memoizedState.isDehydrated&&(nl(n,e).flags|=256),n=Nm(n,e),n!==2&&(e=Ki,Ki=t,e!==null&&f_(e)),n}function f_(n){Ki===null?Ki=n:Ki.push.apply(Ki,n)}function KD(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!Qr(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Oo(n,e){for(e&=~wA,e&=~Og,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Kr(e),i=1<<t;n[t]=-1,e&=~i}}function gw(n){if(Xt&6)throw Error(Re(327));Fc();var e=vm(n,0);if(!(e&1))return er(n,Pn()),null;var t=Nm(n,e);if(n.tag!==0&&t===2){var i=Ox(n);i!==0&&(e=i,t=h_(n,i))}if(t===1)throw t=Qd,nl(n,0),Oo(n,e),er(n,Pn()),t;if(t===6)throw Error(Re(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,ka(n,Ki,ks),er(n,Pn()),null}function CA(n,e){var t=Xt;Xt|=1;try{return n(e)}finally{Xt=t,Xt===0&&(Yc=Pn()+500,Dg&&oa())}}function pl(n){Ho!==null&&Ho.tag===0&&!(Xt&6)&&Fc();var e=Xt;Xt|=1;var t=Br.transition,i=Zt;try{if(Br.transition=null,Zt=1,n)return n()}finally{Zt=i,Br.transition=t,Xt=e,!(Xt&6)&&oa()}}function bA(){ar=Ec.current,un(Ec)}function nl(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,wD(t)),kn!==null)for(t=kn.return;t!==null;){var i=t;switch(aA(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Sm();break;case 3:Jc(),un(Zi),un(Ci),gA();break;case 5:mA(i);break;case 4:Jc();break;case 13:un(vn);break;case 19:un(vn);break;case 10:dA(i.type._context);break;case 22:case 23:bA()}t=t.return}if(ni=n,kn=n=Qo(n.current,null),si=ar=e,Xn=0,Qd=null,wA=Og=fl=0,Ki=Md=null,Xa!==null){for(e=0;e<Xa.length;e++)if(t=Xa[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}t.pending=i}Xa=null}return n}function AR(n,e){do{var t=kn;try{if(uA(),rm.current=Pm,Im){for(var i=_n.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Im=!1}if(hl=0,ti=jn=_n=null,Ad=!1,Jd=0,MA.current=null,t===null||t.return===null){Xn=1,Qd=e,kn=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=si,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=iw(o);if(m!==null){m.flags&=-257,rw(m,o,a,s,e),m.mode&1&&nw(s,c,e),e=m,l=c;var v=e.updateQueue;if(v===null){var A=new Set;A.add(l),e.updateQueue=A}else v.add(l);break e}else{if(!(e&1)){nw(s,c,e),TA();break e}l=Error(Re(426))}}else if(pn&&a.mode&1){var x=iw(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),rw(x,o,a,s,e),lA(Kc(l,a));break e}}s=l=Kc(l,a),Xn!==4&&(Xn=2),Md===null?Md=[s]:Md.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=rR(s,l,e);QM(s,g);break e;case 1:a=l;var S=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Ko===null||!Ko.has(_)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=sR(s,a,e);QM(s,w);break e}}s=s.return}while(s!==null)}wR(t)}catch(I){e=I,kn===t&&t!==null&&(kn=t=t.return);continue}break}while(!0)}function SR(){var n=Bm.current;return Bm.current=Pm,n===null?Pm:n}function TA(){(Xn===0||Xn===3||Xn===2)&&(Xn=4),ni===null||!(fl&268435455)&&!(Og&268435455)||Oo(ni,si)}function Nm(n,e){var t=Xt;Xt|=2;var i=SR();(ni!==n||si!==e)&&(ks=null,nl(n,e));do try{YD();break}catch(r){AR(n,r)}while(!0);if(uA(),Xt=t,Bm.current=i,kn!==null)throw Error(Re(261));return ni=null,si=0,Xn}function YD(){for(;kn!==null;)MR(kn)}function QD(){for(;kn!==null&&!AL();)MR(kn)}function MR(n){var e=CR(n.alternate,n,ar);n.memoizedProps=n.pendingProps,e===null?wR(n):kn=e,MA.current=null}function wR(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=VD(t,e),t!==null){t.flags&=32767,kn=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Xn=6,kn=null;return}}else if(t=GD(t,e,ar),t!==null){kn=t;return}if(e=e.sibling,e!==null){kn=e;return}kn=e=n}while(e!==null);Xn===0&&(Xn=5)}function ka(n,e,t){var i=Zt,r=Br.transition;try{Br.transition=null,Zt=1,qD(n,e,t,i)}finally{Br.transition=r,Zt=i}return null}function qD(n,e,t,i){do Fc();while(Ho!==null);if(Xt&6)throw Error(Re(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Re(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(PL(n,s),n===ni&&(kn=ni=null,si=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Yf||(Yf=!0,bR(gm,function(){return Fc(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Br.transition,Br.transition=null;var o=Zt;Zt=1;var a=Xt;Xt|=4,MA.current=null,jD(n,t),yR(t,n),vD(Wx),ym=!!Vx,Wx=Vx=null,n.current=t,XD(t),SL(),Xt=a,Zt=o,Br.transition=s}else n.current=t;if(Yf&&(Yf=!1,Ho=n,Dm=r),s=n.pendingLanes,s===0&&(Ko=null),EL(t.stateNode),er(n,Pn()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],i(r.value,{componentStack:r.stack,digest:r.digest});if(Lm)throw Lm=!1,n=u_,u_=null,n;return Dm&1&&n.tag!==0&&Fc(),s=n.pendingLanes,s&1?n===d_?wd++:(wd=0,d_=n):wd=0,oa(),null}function Fc(){if(Ho!==null){var n=rT(Dm),e=Br.transition,t=Zt;try{if(Br.transition=null,Zt=16>n?16:n,Ho===null)var i=!1;else{if(n=Ho,Ho=null,Dm=0,Xt&6)throw Error(Re(331));var r=Xt;for(Xt|=4,$e=n.current;$e!==null;){var s=$e,o=s.child;if($e.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for($e=c;$e!==null;){var h=$e;switch(h.tag){case 0:case 11:case 15:Sd(8,h,s)}var f=h.child;if(f!==null)f.return=h,$e=f;else for(;$e!==null;){h=$e;var p=h.sibling,m=h.return;if(mR(h),h===c){$e=null;break}if(p!==null){p.return=m,$e=p;break}$e=m}}}var v=s.alternate;if(v!==null){var A=v.child;if(A!==null){v.child=null;do{var x=A.sibling;A.sibling=null,A=x}while(A!==null)}}$e=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,$e=o;else e:for(;$e!==null;){if(s=$e,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Sd(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,$e=g;break e}$e=s.return}}var S=n.current;for($e=S;$e!==null;){o=$e;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,$e=_;else e:for(o=S;$e!==null;){if(a=$e,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ug(9,a)}}catch(I){wn(a,a.return,I)}if(a===o){$e=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,$e=w;break e}$e=a.return}}if(Xt=r,oa(),ms&&typeof ms.onPostCommitFiberRoot=="function")try{ms.onPostCommitFiberRoot(Rg,n)}catch{}i=!0}return i}finally{Zt=t,Br.transition=e}}return!1}function vw(n,e,t){e=Kc(t,e),e=rR(n,e,1),n=Jo(n,e,1),e=Oi(),n!==null&&(fh(n,1,e),er(n,e))}function wn(n,e,t){if(n.tag===3)vw(n,n,t);else for(;e!==null;){if(e.tag===3){vw(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ko===null||!Ko.has(i))){n=Kc(t,n),n=sR(e,n,1),e=Jo(e,n,1),n=Oi(),e!==null&&(fh(e,1,n),er(e,n));break}}e=e.return}}function ZD(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=Oi(),n.pingedLanes|=n.suspendedLanes&t,ni===n&&(si&t)===t&&(Xn===4||Xn===3&&(si&130023424)===si&&500>Pn()-EA?nl(n,0):wA|=t),er(n,e)}function ER(n,e){e===0&&(n.mode&1?(e=kf,kf<<=1,!(kf&130023424)&&(kf=4194304)):e=1);var t=Oi();n=to(n,e),n!==null&&(fh(n,e,t),er(n,t))}function $D(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),ER(n,t)}function eN(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(Re(314))}i!==null&&i.delete(e),ER(n,t)}var CR;CR=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Zi.current)Yi=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Yi=!1,HD(n,e,t);Yi=!!(n.flags&131072)}else Yi=!1,pn&&e.flags&1048576&&IT(e,Em,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;om(n,e),n=e.pendingProps;var r=Wc(e,Ci.current);Nc(e,t),r=yA(null,e,i,n,r,t);var s=xA();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,$i(i)?(s=!0,Mm(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,fA(e),r.updater=Fg,e.stateNode=r,r._reactInternals=e,$x(e,i,n,t),e=n_(null,e,i,!0,s,t)):(e.tag=0,pn&&s&&oA(e),Di(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(om(n,e),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=nN(i),n=Vr(i,n),r){case 0:e=t_(null,e,i,n,t);break e;case 1:e=aw(null,e,i,n,t);break e;case 11:e=sw(null,e,i,n,t);break e;case 14:e=ow(null,e,i,Vr(i.type,n),t);break e}throw Error(Re(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Vr(i,r),t_(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Vr(i,r),aw(n,e,i,r,t);case 3:e:{if(cR(e),n===null)throw Error(Re(387));i=e.pendingProps,s=e.memoizedState,r=s.element,FT(n,e),Tm(e,i,null,t);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Kc(Error(Re(423)),e),e=lw(n,e,i,t,r);break e}else if(i!==r){r=Kc(Error(Re(424)),e),e=lw(n,e,i,t,r);break e}else for(lr=Xo(e.stateNode.containerInfo.firstChild),cr=e,pn=!0,Xr=null,t=DT(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(jc(),i===r){e=no(n,e,t);break e}Di(n,e,i,t)}e=e.child}return e;case 5:return UT(e),n===null&&Qx(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,o=r.children,jx(i,r)?o=null:s!==null&&jx(i,s)&&(e.flags|=32),lR(n,e),Di(n,e,o,t),e.child;case 6:return n===null&&Qx(e),null;case 13:return uR(n,e,t);case 4:return pA(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=Xc(e,null,i,t):Di(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Vr(i,r),sw(n,e,i,r,t);case 7:return Di(n,e,e.pendingProps,t),e.child;case 8:return Di(n,e,e.pendingProps.children,t),e.child;case 12:return Di(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,sn(Cm,i._currentValue),i._currentValue=o,s!==null)if(Qr(s.value,o)){if(s.children===r.children&&!Zi.current){e=no(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Ys(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),qx(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Re(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),qx(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Di(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Nc(e,t),r=Lr(r),i=i(r),e.flags|=1,Di(n,e,i,t),e.child;case 14:return i=e.type,r=Vr(i,e.pendingProps),r=Vr(i.type,r),ow(n,e,i,r,t);case 15:return oR(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Vr(i,r),om(n,e),e.tag=1,$i(i)?(n=!0,Mm(e)):n=!1,Nc(e,t),iR(e,i,r),$x(e,i,r,t),n_(null,e,i,!0,n,t);case 19:return dR(n,e,t);case 22:return aR(n,e,t)}throw Error(Re(156,e.tag))};function bR(n,e){return eT(n,e)}function tN(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pr(n,e,t,i){return new tN(n,e,t,i)}function RA(n){return n=n.prototype,!(!n||!n.isReactComponent)}function nN(n){if(typeof n=="function")return RA(n)?1:0;if(n!=null){if(n=n.$$typeof,n===K_)return 11;if(n===Y_)return 14}return 2}function Qo(n,e){var t=n.alternate;return t===null?(t=Pr(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function cm(n,e,t,i,r,s){var o=2;if(i=n,typeof n=="function")RA(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case mc:return il(t.children,r,s,e);case J_:o=8,r|=8;break;case Mx:return n=Pr(12,t,e,r|2),n.elementType=Mx,n.lanes=s,n;case wx:return n=Pr(13,t,e,r),n.elementType=wx,n.lanes=s,n;case Ex:return n=Pr(19,t,e,r),n.elementType=Ex,n.lanes=s,n;case Ub:return kg(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Nb:o=10;break e;case Fb:o=9;break e;case K_:o=11;break e;case Y_:o=14;break e;case No:o=16,i=null;break e}throw Error(Re(130,n==null?n:typeof n,""))}return e=Pr(o,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function il(n,e,t,i){return n=Pr(7,n,i,e),n.lanes=t,n}function kg(n,e,t,i){return n=Pr(22,n,i,e),n.elementType=Ub,n.lanes=t,n.stateNode={isHidden:!1},n}function ty(n,e,t){return n=Pr(6,n,null,e),n.lanes=t,n}function ny(n,e,t){return e=Pr(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function iN(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fv(0),this.expirationTimes=Fv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fv(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function IA(n,e,t,i,r,s,o,a,l){return n=new iN(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Pr(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},fA(s),n}function rN(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pc,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function TR(n){if(!n)return $o;n=n._reactInternals;e:{if(El(n)!==n||n.tag!==1)throw Error(Re(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if($i(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Re(171))}if(n.tag===1){var t=n.type;if($i(t))return TT(n,t,e)}return e}function RR(n,e,t,i,r,s,o,a,l){return n=IA(t,i,!0,n,r,s,o,a,l),n.context=TR(null),t=n.current,i=Oi(),r=Yo(t),s=Ys(i,r),s.callback=e??null,Jo(t,s,r),n.current.lanes=r,fh(n,r,i),er(n,i),n}function zg(n,e,t,i){var r=e.current,s=Oi(),o=Yo(r);return t=TR(t),e.context===null?e.context=t:e.pendingContext=t,e=Ys(s,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=Jo(r,e,o),n!==null&&(Yr(n,r,o,s),im(n,r,o)),o}function Fm(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function yw(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function PA(n,e){yw(n,e),(n=n.alternate)&&yw(n,e)}function sN(){return null}var IR=typeof reportError=="function"?reportError:function(n){console.error(n)};function BA(n){this._internalRoot=n}Hg.prototype.render=BA.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Re(409));zg(n,e,null,null)};Hg.prototype.unmount=BA.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;pl(function(){zg(null,n,null,null)}),e[eo]=null}};function Hg(n){this._internalRoot=n}Hg.prototype.unstable_scheduleHydration=function(n){if(n){var e=aT();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Uo.length&&e!==0&&e<Uo[t].priority;t++);Uo.splice(t,0,n),t===0&&cT(n)}};function LA(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Gg(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function xw(){}function oN(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=Fm(o);s.call(c)}}var o=RR(e,i,n,0,null,!1,!1,"",xw);return n._reactRootContainer=o,n[eo]=o.current,Gd(n.nodeType===8?n.parentNode:n),pl(),o}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=Fm(l);a.call(c)}}var l=IA(n,0,!1,null,null,!1,!1,"",xw);return n._reactRootContainer=l,n[eo]=l.current,Gd(n.nodeType===8?n.parentNode:n),pl(function(){zg(e,l,t,i)}),l}function Vg(n,e,t,i,r){var s=t._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=Fm(o);a.call(l)}}zg(e,o,n,r)}else o=oN(t,e,n,r,i);return Fm(o)}sT=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=dd(e.pendingLanes);t!==0&&(Z_(e,t|1),er(e,Pn()),!(Xt&6)&&(Yc=Pn()+500,oa()))}break;case 13:pl(function(){var i=to(n,1);if(i!==null){var r=Oi();Yr(i,n,1,r)}}),PA(n,1)}};$_=function(n){if(n.tag===13){var e=to(n,134217728);if(e!==null){var t=Oi();Yr(e,n,134217728,t)}PA(n,134217728)}};oT=function(n){if(n.tag===13){var e=Yo(n),t=to(n,e);if(t!==null){var i=Oi();Yr(t,n,e,i)}PA(n,e)}};aT=function(){return Zt};lT=function(n,e){var t=Zt;try{return Zt=n,e()}finally{Zt=t}};Nx=function(n,e,t){switch(e){case"input":if(Tx(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=Lg(i);if(!r)throw Error(Re(90));kb(i),Tx(i,r)}}}break;case"textarea":Hb(n,t);break;case"select":e=t.value,e!=null&&Pc(n,!!t.multiple,e,!1)}};Kb=CA;Yb=pl;var aN={usingClientEntryPoint:!1,Events:[mh,xc,Lg,Xb,Jb,CA]},zu={findFiberByHostInstance:ja,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lN={bundleType:zu.bundleType,version:zu.version,rendererPackageName:zu.rendererPackageName,rendererConfig:zu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:uo.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Zb(n),n===null?null:n.stateNode},findFiberByHostInstance:zu.findFiberByHostInstance||sN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qf.isDisabled&&Qf.supportsFiber)try{Rg=Qf.inject(lN),ms=Qf}catch{}}mr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aN;mr.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!LA(e))throw Error(Re(200));return rN(n,e,null,t)};mr.createRoot=function(n,e){if(!LA(n))throw Error(Re(299));var t=!1,i="",r=IR;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=IA(n,1,!1,null,null,t,!1,i,r),n[eo]=e.current,Gd(n.nodeType===8?n.parentNode:n),new BA(e)};mr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Re(188)):(n=Object.keys(n).join(","),Error(Re(268,n)));return n=Zb(e),n=n===null?null:n.stateNode,n};mr.flushSync=function(n){return pl(n)};mr.hydrate=function(n,e,t){if(!Gg(e))throw Error(Re(200));return Vg(null,n,e,!0,t)};mr.hydrateRoot=function(n,e,t){if(!LA(n))throw Error(Re(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",o=IR;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=RR(e,null,n,1,t??null,r,!1,s,o),n[eo]=e.current,Gd(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new Hg(e)};mr.render=function(n,e,t){if(!Gg(e))throw Error(Re(200));return Vg(null,n,e,!1,t)};mr.unmountComponentAtNode=function(n){if(!Gg(n))throw Error(Re(40));return n._reactRootContainer?(pl(function(){Vg(null,null,n,!1,function(){n._reactRootContainer=null,n[eo]=null})}),!0):!1};mr.unstable_batchedUpdates=CA;mr.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!Gg(t))throw Error(Re(200));if(n==null||n._reactInternals===void 0)throw Error(Re(38));return Vg(n,e,t,!1,i)};mr.version="18.3.1-next-f1338f8080-20240426";function PR(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(PR)}catch(n){console.error(n)}}PR(),Pb.exports=mr;var cN=Pb.exports,BR,_w=cN;BR=Ax.createRoot=_w.createRoot,Ax.hydrateRoot=_w.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Um(){return Um=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Um.apply(this,arguments)}var Ka;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Ka||(Ka={}));const Aw="popstate";function uN(n){n===void 0&&(n={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return p_("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(i,r){return typeof r=="string"?r:DR(r)}return hN(e,t,null,n)}function LR(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function dN(){return Math.random().toString(36).substr(2,8)}function Sw(n,e){return{usr:n.state,key:n.key,idx:e}}function p_(n,e,t,i){return t===void 0&&(t=null),Um({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?NR(e):e,{state:t,key:e&&e.key||i||dN()})}function DR(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function NR(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function hN(n,e,t,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=Ka.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(Um({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function f(){a=Ka.Pop;let x=h(),g=x==null?null:x-c;c=x,l&&l({action:a,location:A.location,delta:g})}function p(x,g){a=Ka.Push;let S=p_(A.location,x,g);c=h()+1;let _=Sw(S,c),w=A.createHref(S);try{o.pushState(_,"",w)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;r.location.assign(w)}s&&l&&l({action:a,location:A.location,delta:1})}function m(x,g){a=Ka.Replace;let S=p_(A.location,x,g);c=h();let _=Sw(S,c),w=A.createHref(S);o.replaceState(_,"",w),s&&l&&l({action:a,location:A.location,delta:0})}function v(x){let g=r.location.origin!=="null"?r.location.origin:r.location.href,S=typeof x=="string"?x:DR(x);return S=S.replace(/ $/,"%20"),LR(g,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,g)}let A={get action(){return a},get location(){return n(r,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(Aw,f),l=x,()=>{r.removeEventListener(Aw,f),l=null}},createHref(x){return e(r,x)},createURL:v,encodeLocation(x){let g=v(x);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:p,replace:m,go(x){return o.go(x)}};return A}var Mw;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Mw||(Mw={}));function fN(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}const FR=["post","put","patch","delete"];new Set(FR);const pN=["get",...FR];new Set(pN);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function m_(){return m_=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},m_.apply(this,arguments)}const mN=H.createContext(null),UR=H.createContext(null);function gN(){return H.useContext(UR)!=null}function vN(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function yN(n){let{basename:e="/",children:t=null,location:i,navigationType:r=Ka.Pop,navigator:s,static:o=!1,future:a}=n;gN()&&LR(!1);let l=e.replace(/^\/*/,"/"),c=H.useMemo(()=>({basename:l,navigator:s,static:o,future:m_({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=NR(i));let{pathname:h="/",search:f="",hash:p="",state:m=null,key:v="default"}=i,A=H.useMemo(()=>{let x=fN(h,l);return x==null?null:{location:{pathname:x,search:f,hash:p,state:m,key:v},navigationType:r}},[l,h,f,p,m,v,r]);return A==null?null:H.createElement(mN.Provider,{value:c},H.createElement(UR.Provider,{children:t,value:A}))}new Promise(()=>{});/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const xN="6";try{window.__reactRouterVersion=xN}catch{}const _N="startTransition",ww=ZB[_N];function AN(n){let{basename:e,children:t,future:i,window:r}=n,s=H.useRef();s.current==null&&(s.current=uN({window:r,v5Compat:!0}));let o=s.current,[a,l]=H.useState({action:o.action,location:o.location}),{v7_startTransition:c}=i||{},h=H.useCallback(f=>{c&&ww?ww(()=>l(f)):l(f)},[l,c]);return H.useLayoutEffect(()=>o.listen(h),[o,h]),H.useEffect(()=>vN(i),[i]),H.createElement(yN,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:i})}var Ew;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Ew||(Ew={}));var Cw;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(Cw||(Cw={}));/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Cl="170",za={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Ha={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},OR=0,g_=1,kR=2,SN=3,zR=0,Wg=1,Ed=2,Wr=3,qr=0,oi=1,zn=2,Qs=0,rl=1,qd=2,v_=3,y_=4,HR=5,ko=100,GR=101,VR=102,WR=103,jR=104,XR=200,JR=201,KR=202,YR=203,Om=204,km=205,QR=206,qR=207,ZR=208,$R=209,eI=210,tI=211,nI=212,iI=213,rI=214,zm=0,Hm=1,Gm=2,ml=3,Vm=4,Wm=5,jm=6,Xm=7,vh=0,sI=1,oI=2,vs=0,aI=1,lI=2,cI=3,DA=4,uI=5,dI=6,hI=7,x_="attached",fI="detached",jg=300,io=301,ea=302,Zd=303,$d=304,au=306,fr=1e3,Qi=1001,gl=1002,Hn=1003,yh=1004,MN=1004,Go=1005,wN=1005,en=1006,sl=1007,EN=1007,qi=1008,CN=1008,Zr=1009,NA=1010,FA=1011,Qc=1012,Xg=1013,ro=1014,Fi=1015,aa=1016,Jg=1017,Kg=1018,vl=1020,UA=35902,OA=1021,kA=1022,Ei=1023,zA=1024,HA=1025,ol=1026,yl=1027,Yg=1028,xh=1029,GA=1030,Qg=1031,bN=1032,qg=1033,Cd=33776,bd=33777,Td=33778,Rd=33779,Jm=35840,Km=35841,Ym=35842,Qm=35843,qm=36196,Zm=37492,$m=37496,eg=37808,tg=37809,ng=37810,ig=37811,rg=37812,sg=37813,og=37814,ag=37815,lg=37816,cg=37817,ug=37818,dg=37819,hg=37820,fg=37821,Id=36492,pg=36494,mg=36495,VA=36283,gg=36284,vg=36285,yg=36286,pI=2200,mI=2201,gI=2202,xl=2300,ta=2301,um=2302,Ya=2400,Qa=2401,eh=2402,Zg=2500,WA=2501,jA=0,_h=1,_l=2,vI=3200,yI=3201,TN=3202,RN=3203,la=0,xI=1,Ws="",Un="srgb",bi="srgb-linear",Ah="linear",qt="srgb",IN=0,Ga=7680,PN=7681,BN=7682,LN=7683,DN=34055,NN=34056,FN=5386,UN=512,ON=513,kN=514,zN=515,HN=516,GN=517,VN=518,__=519,_I=512,AI=513,SI=514,XA=515,MI=516,wI=517,EI=518,CI=519,th=35044,WN=35048,jN=35040,XN=35045,JN=35049,KN=35041,YN=35046,QN=35050,qN=35042,ZN="100",A_="300 es",ps=2e3,nh=2001;let ws=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}};const xi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let bw=1234567;const al=Math.PI/180,qc=180/Math.PI;function ur(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(xi[n&255]+xi[n>>8&255]+xi[n>>16&255]+xi[n>>24&255]+"-"+xi[e&255]+xi[e>>8&255]+"-"+xi[e>>16&15|64]+xi[e>>24&255]+"-"+xi[t&63|128]+xi[t>>8&255]+"-"+xi[t>>16&255]+xi[t>>24&255]+xi[i&255]+xi[i>>8&255]+xi[i>>16&255]+xi[i>>24&255]).toLowerCase()}function En(n,e,t){return Math.max(e,Math.min(t,n))}function JA(n,e){return(n%e+e)%e}function $N(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function eF(n,e,t){return n!==e?(t-n)/(e-n):0}function Pd(n,e,t){return(1-t)*n+t*e}function tF(n,e,t,i){return Pd(n,e,1-Math.exp(-t*i))}function nF(n,e=1){return e-Math.abs(JA(n,e*2)-e)}function iF(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function rF(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function sF(n,e){return n+Math.floor(Math.random()*(e-n+1))}function oF(n,e){return n+Math.random()*(e-n)}function aF(n){return n*(.5-Math.random())}function lF(n){n!==void 0&&(bw=n);let e=bw+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function cF(n){return n*al}function uF(n){return n*qc}function dF(n){return(n&n-1)===0&&n!==0}function hF(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function fF(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function pF(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+i)/2),h=o((e+i)/2),f=s((e-i)/2),p=o((e-i)/2),m=s((i-e)/2),v=o((i-e)/2);switch(r){case"XYX":n.set(a*h,l*f,l*p,a*c);break;case"YZY":n.set(l*p,a*h,l*f,a*c);break;case"ZXZ":n.set(l*f,l*p,a*h,a*c);break;case"XZX":n.set(a*h,l*v,l*m,a*c);break;case"YXY":n.set(l*m,a*h,l*v,a*c);break;case"ZYZ":n.set(l*v,l*m,a*h,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Ni(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function wt(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const KA={DEG2RAD:al,RAD2DEG:qc,generateUUID:ur,clamp:En,euclideanModulo:JA,mapLinear:$N,inverseLerp:eF,lerp:Pd,damp:tF,pingpong:nF,smoothstep:iF,smootherstep:rF,randInt:sF,randFloat:oF,randFloatSpread:aF,seededRandom:lF,degToRad:cF,radToDeg:uF,isPowerOfTwo:dF,ceilPowerOfTwo:hF,floorPowerOfTwo:fF,setQuaternionFromProperEuler:pF,normalize:wt,denormalize:Ni};class ue{constructor(e=0,t=0){ue.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(En(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Mt{constructor(e,t,i,r,s,o,a,l,c){Mt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,c)}set(e,t,i,r,s,o,a,l,c){const h=this.elements;return h[0]=e,h[1]=r,h[2]=a,h[3]=t,h[4]=s,h[5]=l,h[6]=i,h[7]=o,h[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],h=i[4],f=i[7],p=i[2],m=i[5],v=i[8],A=r[0],x=r[3],g=r[6],S=r[1],_=r[4],w=r[7],I=r[2],T=r[5],P=r[8];return s[0]=o*A+a*S+l*I,s[3]=o*x+a*_+l*T,s[6]=o*g+a*w+l*P,s[1]=c*A+h*S+f*I,s[4]=c*x+h*_+f*T,s[7]=c*g+h*w+f*P,s[2]=p*A+m*S+v*I,s[5]=p*x+m*_+v*T,s[8]=p*g+m*w+v*P,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8];return t*o*h-t*a*c-i*s*h+i*a*l+r*s*c-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8],f=h*o-a*c,p=a*l-h*s,m=c*s-o*l,v=t*f+i*p+r*m;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const A=1/v;return e[0]=f*A,e[1]=(r*c-h*i)*A,e[2]=(a*i-r*o)*A,e[3]=p*A,e[4]=(h*t-r*l)*A,e[5]=(r*s-a*t)*A,e[6]=m*A,e[7]=(i*l-c*t)*A,e[8]=(o*t-i*s)*A,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(iy.makeScale(e,t)),this}rotate(e){return this.premultiply(iy.makeRotation(-e)),this}translate(e,t){return this.premultiply(iy.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const iy=new Mt;function bI(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const mF={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Cc(n,e){return new mF[n](e)}function ih(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function TI(){const n=ih("canvas");return n.style.display="block",n}const Tw={};function fd(n){n in Tw||(Tw[n]=!0,console.warn(n))}function gF(n,e,t){return new Promise(function(i,r){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:i()}}setTimeout(s,t)})}function vF(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function yF(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const Ut={enabled:!0,workingColorSpace:bi,spaces:{},convert:function(n,e,t){return this.enabled===!1||e===t||!e||!t||(this.spaces[e].transfer===qt&&(n.r=qs(n.r),n.g=qs(n.g),n.b=qs(n.b)),this.spaces[e].primaries!==this.spaces[t].primaries&&(n.applyMatrix3(this.spaces[e].toXYZ),n.applyMatrix3(this.spaces[t].fromXYZ)),this.spaces[t].transfer===qt&&(n.r=Uc(n.r),n.g=Uc(n.g),n.b=Uc(n.b))),n},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)},getPrimaries:function(n){return this.spaces[n].primaries},getTransfer:function(n){return n===Ws?Ah:this.spaces[n].transfer},getLuminanceCoefficients:function(n,e=this.workingColorSpace){return n.fromArray(this.spaces[e].luminanceCoefficients)},define:function(n){Object.assign(this.spaces,n)},_getMatrix:function(n,e,t){return n.copy(this.spaces[e].toXYZ).multiply(this.spaces[t].fromXYZ)},_getDrawingBufferColorSpace:function(n){return this.spaces[n].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(n=this.workingColorSpace){return this.spaces[n].workingColorSpaceConfig.unpackColorSpace}};function qs(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Uc(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const Rw=[.64,.33,.3,.6,.15,.06],Iw=[.2126,.7152,.0722],Pw=[.3127,.329],Bw=new Mt().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),Lw=new Mt().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);Ut.define({[bi]:{primaries:Rw,whitePoint:Pw,transfer:Ah,toXYZ:Bw,fromXYZ:Lw,luminanceCoefficients:Iw,workingColorSpaceConfig:{unpackColorSpace:Un},outputColorSpaceConfig:{drawingBufferColorSpace:Un}},[Un]:{primaries:Rw,whitePoint:Pw,transfer:qt,toXYZ:Bw,fromXYZ:Lw,luminanceCoefficients:Iw,outputColorSpaceConfig:{drawingBufferColorSpace:Un}}});let Xl;class RI{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Xl===void 0&&(Xl=ih("canvas")),Xl.width=e.width,Xl.height=e.height;const i=Xl.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Xl}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=ih("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=qs(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(qs(t[i]/255)*255):t[i]=qs(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let xF=0;class qa{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:xF++}),this.uuid=ur(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(ry(r[o].image)):s.push(ry(r[o]))}else s=ry(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function ry(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?RI.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let _F=0;class tn extends ws{constructor(e=tn.DEFAULT_IMAGE,t=tn.DEFAULT_MAPPING,i=Qi,r=Qi,s=en,o=qi,a=Ei,l=Zr,c=tn.DEFAULT_ANISOTROPY,h=Ws){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:_F++}),this.uuid=ur(),this.name="",this.source=new qa(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new ue(0,0),this.repeat=new ue(1,1),this.center=new ue(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Mt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=h,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==jg)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case fr:e.x=e.x-Math.floor(e.x);break;case Qi:e.x=e.x<0?0:1;break;case gl:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case fr:e.y=e.y-Math.floor(e.y);break;case Qi:e.y=e.y<0?0:1;break;case gl:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}tn.DEFAULT_IMAGE=null;tn.DEFAULT_MAPPING=jg;tn.DEFAULT_ANISOTROPY=1;class Vt{constructor(e=0,t=0,i=0,r=1){Vt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,c=l[0],h=l[4],f=l[8],p=l[1],m=l[5],v=l[9],A=l[2],x=l[6],g=l[10];if(Math.abs(h-p)<.01&&Math.abs(f-A)<.01&&Math.abs(v-x)<.01){if(Math.abs(h+p)<.1&&Math.abs(f+A)<.1&&Math.abs(v+x)<.1&&Math.abs(c+m+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const _=(c+1)/2,w=(m+1)/2,I=(g+1)/2,T=(h+p)/4,P=(f+A)/4,B=(v+x)/4;return _>w&&_>I?_<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(_),r=T/i,s=P/i):w>I?w<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(w),i=T/r,s=B/r):I<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(I),i=P/s,r=B/s),this.set(i,r,s,t),this}let S=Math.sqrt((x-v)*(x-v)+(f-A)*(f-A)+(p-h)*(p-h));return Math.abs(S)<.001&&(S=1),this.x=(x-v)/S,this.y=(f-A)/S,this.z=(p-h)/S,this.w=Math.acos((c+m+g-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class II extends ws{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Vt(0,0,e,t),this.scissorTest=!1,this.viewport=new Vt(0,0,e,t);const r={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:en,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const s=new tn(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];const o=i.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,r=e.textures.length;i<r;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new qa(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class ci extends II{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class $g extends tn{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Hn,this.minFilter=Hn,this.wrapR=Qi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class AF extends ci{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new $g(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class YA extends tn{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Hn,this.minFilter=Hn,this.wrapR=Qi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class SF extends ci{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new YA(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class on{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],c=i[r+1],h=i[r+2],f=i[r+3];const p=s[o+0],m=s[o+1],v=s[o+2],A=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=h,e[t+3]=f;return}if(a===1){e[t+0]=p,e[t+1]=m,e[t+2]=v,e[t+3]=A;return}if(f!==A||l!==p||c!==m||h!==v){let x=1-a;const g=l*p+c*m+h*v+f*A,S=g>=0?1:-1,_=1-g*g;if(_>Number.EPSILON){const I=Math.sqrt(_),T=Math.atan2(I,g*S);x=Math.sin(x*T)/I,a=Math.sin(a*T)/I}const w=a*S;if(l=l*x+p*w,c=c*x+m*w,h=h*x+v*w,f=f*x+A*w,x===1-a){const I=1/Math.sqrt(l*l+c*c+h*h+f*f);l*=I,c*=I,h*=I,f*=I}}e[t]=l,e[t+1]=c,e[t+2]=h,e[t+3]=f}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],c=i[r+2],h=i[r+3],f=s[o],p=s[o+1],m=s[o+2],v=s[o+3];return e[t]=a*v+h*f+l*m-c*p,e[t+1]=l*v+h*p+c*f-a*m,e[t+2]=c*v+h*m+a*p-l*f,e[t+3]=h*v-a*f-l*p-c*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),h=a(r/2),f=a(s/2),p=l(i/2),m=l(r/2),v=l(s/2);switch(o){case"XYZ":this._x=p*h*f+c*m*v,this._y=c*m*f-p*h*v,this._z=c*h*v+p*m*f,this._w=c*h*f-p*m*v;break;case"YXZ":this._x=p*h*f+c*m*v,this._y=c*m*f-p*h*v,this._z=c*h*v-p*m*f,this._w=c*h*f+p*m*v;break;case"ZXY":this._x=p*h*f-c*m*v,this._y=c*m*f+p*h*v,this._z=c*h*v+p*m*f,this._w=c*h*f-p*m*v;break;case"ZYX":this._x=p*h*f-c*m*v,this._y=c*m*f+p*h*v,this._z=c*h*v-p*m*f,this._w=c*h*f+p*m*v;break;case"YZX":this._x=p*h*f+c*m*v,this._y=c*m*f+p*h*v,this._z=c*h*v-p*m*f,this._w=c*h*f-p*m*v;break;case"XZY":this._x=p*h*f-c*m*v,this._y=c*m*f-p*h*v,this._z=c*h*v+p*m*f,this._w=c*h*f+p*m*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],h=t[6],f=t[10],p=i+a+f;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(h-l)*m,this._y=(s-c)*m,this._z=(o-r)*m}else if(i>a&&i>f){const m=2*Math.sqrt(1+i-a-f);this._w=(h-l)/m,this._x=.25*m,this._y=(r+o)/m,this._z=(s+c)/m}else if(a>f){const m=2*Math.sqrt(1+a-i-f);this._w=(s-c)/m,this._x=(r+o)/m,this._y=.25*m,this._z=(l+h)/m}else{const m=2*Math.sqrt(1+f-i-a);this._w=(o-r)/m,this._x=(s+c)/m,this._y=(l+h)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(En(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,h=t._w;return this._x=i*h+o*a+r*c-s*l,this._y=r*h+o*l+s*a-i*c,this._z=s*h+o*c+i*l-r*a,this._w=o*h-i*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*i+t*this._x,this._y=m*r+t*this._y,this._z=m*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),h=Math.atan2(c,a),f=Math.sin((1-t)*h)/c,p=Math.sin(t*h)/c;return this._w=o*f+this._w*p,this._x=i*f+this._x*p,this._y=r*f+this._y*p,this._z=s*f+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class D{constructor(e=0,t=0,i=0){D.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Dw.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Dw.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*r-a*i),h=2*(a*t-s*r),f=2*(s*i-o*t);return this.x=t+l*c+o*f-a*h,this.y=i+l*h+a*c-s*f,this.z=r+l*f+s*h-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return sy.copy(this).projectOnVector(e),this.sub(sy)}reflect(e){return this.sub(sy.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(En(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const sy=new D,Dw=new on;class ai{constructor(e=new D(1/0,1/0,1/0),t=new D(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(zr.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(zr.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=zr.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,zr):zr.fromBufferAttribute(s,o),zr.applyMatrix4(e.matrixWorld),this.expandByPoint(zr);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),qf.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),qf.copy(i.boundingBox)),qf.applyMatrix4(e.matrixWorld),this.union(qf)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,zr),zr.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Hu),Zf.subVectors(this.max,Hu),Jl.subVectors(e.a,Hu),Kl.subVectors(e.b,Hu),Yl.subVectors(e.c,Hu),wo.subVectors(Kl,Jl),Eo.subVectors(Yl,Kl),Sa.subVectors(Jl,Yl);let t=[0,-wo.z,wo.y,0,-Eo.z,Eo.y,0,-Sa.z,Sa.y,wo.z,0,-wo.x,Eo.z,0,-Eo.x,Sa.z,0,-Sa.x,-wo.y,wo.x,0,-Eo.y,Eo.x,0,-Sa.y,Sa.x,0];return!oy(t,Jl,Kl,Yl,Zf)||(t=[1,0,0,0,1,0,0,0,1],!oy(t,Jl,Kl,Yl,Zf))?!1:($f.crossVectors(wo,Eo),t=[$f.x,$f.y,$f.z],oy(t,Jl,Kl,Yl,Zf))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,zr).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(zr).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ps[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ps[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ps[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ps[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ps[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ps[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ps[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ps[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ps),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Ps=[new D,new D,new D,new D,new D,new D,new D,new D],zr=new D,qf=new ai,Jl=new D,Kl=new D,Yl=new D,wo=new D,Eo=new D,Sa=new D,Hu=new D,Zf=new D,$f=new D,Ma=new D;function oy(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){Ma.fromArray(n,s);const a=r.x*Math.abs(Ma.x)+r.y*Math.abs(Ma.y)+r.z*Math.abs(Ma.z),l=e.dot(Ma),c=t.dot(Ma),h=i.dot(Ma);if(Math.max(-Math.max(l,c,h),Math.min(l,c,h))>a)return!1}return!0}const MF=new ai,Gu=new D,ay=new D;let Gn=class{constructor(e=new D,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):MF.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Gu.subVectors(e,this.center);const t=Gu.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(Gu,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(ay.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Gu.copy(e.center).add(ay)),this.expandByPoint(Gu.copy(e.center).sub(ay))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}};const Bs=new D,ly=new D,ep=new D,Co=new D,cy=new D,tp=new D,uy=new D;class Ss{constructor(e=new D,t=new D(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Bs)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Bs.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Bs.copy(this.origin).addScaledVector(this.direction,t),Bs.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){ly.copy(e).add(t).multiplyScalar(.5),ep.copy(t).sub(e).normalize(),Co.copy(this.origin).sub(ly);const s=e.distanceTo(t)*.5,o=-this.direction.dot(ep),a=Co.dot(this.direction),l=-Co.dot(ep),c=Co.lengthSq(),h=Math.abs(1-o*o);let f,p,m,v;if(h>0)if(f=o*l-a,p=o*a-l,v=s*h,f>=0)if(p>=-v)if(p<=v){const A=1/h;f*=A,p*=A,m=f*(f+o*p+2*a)+p*(o*f+p+2*l)+c}else p=s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+c;else p=-s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+c;else p<=-v?(f=Math.max(0,-(-o*s+a)),p=f>0?-s:Math.min(Math.max(-s,-l),s),m=-f*f+p*(p+2*l)+c):p<=v?(f=0,p=Math.min(Math.max(-s,-l),s),m=p*(p+2*l)+c):(f=Math.max(0,-(o*s+a)),p=f>0?s:Math.min(Math.max(-s,-l),s),m=-f*f+p*(p+2*l)+c);else p=o>0?-s:s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,f),r&&r.copy(ly).addScaledVector(ep,p),m}intersectSphere(e,t){Bs.subVectors(e.center,this.origin);const i=Bs.dot(this.direction),r=Bs.dot(Bs)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const c=1/this.direction.x,h=1/this.direction.y,f=1/this.direction.z,p=this.origin;return c>=0?(i=(e.min.x-p.x)*c,r=(e.max.x-p.x)*c):(i=(e.max.x-p.x)*c,r=(e.min.x-p.x)*c),h>=0?(s=(e.min.y-p.y)*h,o=(e.max.y-p.y)*h):(s=(e.max.y-p.y)*h,o=(e.min.y-p.y)*h),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),f>=0?(a=(e.min.z-p.z)*f,l=(e.max.z-p.z)*f):(a=(e.max.z-p.z)*f,l=(e.min.z-p.z)*f),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,Bs)!==null}intersectTriangle(e,t,i,r,s){cy.subVectors(t,e),tp.subVectors(i,e),uy.crossVectors(cy,tp);let o=this.direction.dot(uy),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Co.subVectors(this.origin,e);const l=a*this.direction.dot(tp.crossVectors(Co,tp));if(l<0)return null;const c=a*this.direction.dot(cy.cross(Co));if(c<0||l+c>o)return null;const h=-a*Co.dot(uy);return h<0?null:this.at(h/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Qe{constructor(e,t,i,r,s,o,a,l,c,h,f,p,m,v,A,x){Qe.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,c,h,f,p,m,v,A,x)}set(e,t,i,r,s,o,a,l,c,h,f,p,m,v,A,x){const g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=r,g[1]=s,g[5]=o,g[9]=a,g[13]=l,g[2]=c,g[6]=h,g[10]=f,g[14]=p,g[3]=m,g[7]=v,g[11]=A,g[15]=x,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Qe().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Ql.setFromMatrixColumn(e,0).length(),s=1/Ql.setFromMatrixColumn(e,1).length(),o=1/Ql.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),h=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){const p=o*h,m=o*f,v=a*h,A=a*f;t[0]=l*h,t[4]=-l*f,t[8]=c,t[1]=m+v*c,t[5]=p-A*c,t[9]=-a*l,t[2]=A-p*c,t[6]=v+m*c,t[10]=o*l}else if(e.order==="YXZ"){const p=l*h,m=l*f,v=c*h,A=c*f;t[0]=p+A*a,t[4]=v*a-m,t[8]=o*c,t[1]=o*f,t[5]=o*h,t[9]=-a,t[2]=m*a-v,t[6]=A+p*a,t[10]=o*l}else if(e.order==="ZXY"){const p=l*h,m=l*f,v=c*h,A=c*f;t[0]=p-A*a,t[4]=-o*f,t[8]=v+m*a,t[1]=m+v*a,t[5]=o*h,t[9]=A-p*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const p=o*h,m=o*f,v=a*h,A=a*f;t[0]=l*h,t[4]=v*c-m,t[8]=p*c+A,t[1]=l*f,t[5]=A*c+p,t[9]=m*c-v,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const p=o*l,m=o*c,v=a*l,A=a*c;t[0]=l*h,t[4]=A-p*f,t[8]=v*f+m,t[1]=f,t[5]=o*h,t[9]=-a*h,t[2]=-c*h,t[6]=m*f+v,t[10]=p-A*f}else if(e.order==="XZY"){const p=o*l,m=o*c,v=a*l,A=a*c;t[0]=l*h,t[4]=-f,t[8]=c*h,t[1]=p*f+A,t[5]=o*h,t[9]=m*f-v,t[2]=v*f-m,t[6]=a*h,t[10]=A*f+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(wF,e,EF)}lookAt(e,t,i){const r=this.elements;return sr.subVectors(e,t),sr.lengthSq()===0&&(sr.z=1),sr.normalize(),bo.crossVectors(i,sr),bo.lengthSq()===0&&(Math.abs(i.z)===1?sr.x+=1e-4:sr.z+=1e-4,sr.normalize(),bo.crossVectors(i,sr)),bo.normalize(),np.crossVectors(sr,bo),r[0]=bo.x,r[4]=np.x,r[8]=sr.x,r[1]=bo.y,r[5]=np.y,r[9]=sr.y,r[2]=bo.z,r[6]=np.z,r[10]=sr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],h=i[1],f=i[5],p=i[9],m=i[13],v=i[2],A=i[6],x=i[10],g=i[14],S=i[3],_=i[7],w=i[11],I=i[15],T=r[0],P=r[4],B=r[8],R=r[12],C=r[1],U=r[5],j=r[9],K=r[13],te=r[2],de=r[6],re=r[10],ge=r[14],F=r[3],k=r[7],W=r[11],Y=r[15];return s[0]=o*T+a*C+l*te+c*F,s[4]=o*P+a*U+l*de+c*k,s[8]=o*B+a*j+l*re+c*W,s[12]=o*R+a*K+l*ge+c*Y,s[1]=h*T+f*C+p*te+m*F,s[5]=h*P+f*U+p*de+m*k,s[9]=h*B+f*j+p*re+m*W,s[13]=h*R+f*K+p*ge+m*Y,s[2]=v*T+A*C+x*te+g*F,s[6]=v*P+A*U+x*de+g*k,s[10]=v*B+A*j+x*re+g*W,s[14]=v*R+A*K+x*ge+g*Y,s[3]=S*T+_*C+w*te+I*F,s[7]=S*P+_*U+w*de+I*k,s[11]=S*B+_*j+w*re+I*W,s[15]=S*R+_*K+w*ge+I*Y,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],h=e[2],f=e[6],p=e[10],m=e[14],v=e[3],A=e[7],x=e[11],g=e[15];return v*(+s*l*f-r*c*f-s*a*p+i*c*p+r*a*m-i*l*m)+A*(+t*l*m-t*c*p+s*o*p-r*o*m+r*c*h-s*l*h)+x*(+t*c*f-t*a*m-s*o*f+i*o*m+s*a*h-i*c*h)+g*(-r*a*h-t*l*f+t*a*p+r*o*f-i*o*p+i*l*h)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8],f=e[9],p=e[10],m=e[11],v=e[12],A=e[13],x=e[14],g=e[15],S=f*x*c-A*p*c+A*l*m-a*x*m-f*l*g+a*p*g,_=v*p*c-h*x*c-v*l*m+o*x*m+h*l*g-o*p*g,w=h*A*c-v*f*c+v*a*m-o*A*m-h*a*g+o*f*g,I=v*f*l-h*A*l-v*a*p+o*A*p+h*a*x-o*f*x,T=t*S+i*_+r*w+s*I;if(T===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/T;return e[0]=S*P,e[1]=(A*p*s-f*x*s-A*r*m+i*x*m+f*r*g-i*p*g)*P,e[2]=(a*x*s-A*l*s+A*r*c-i*x*c-a*r*g+i*l*g)*P,e[3]=(f*l*s-a*p*s-f*r*c+i*p*c+a*r*m-i*l*m)*P,e[4]=_*P,e[5]=(h*x*s-v*p*s+v*r*m-t*x*m-h*r*g+t*p*g)*P,e[6]=(v*l*s-o*x*s-v*r*c+t*x*c+o*r*g-t*l*g)*P,e[7]=(o*p*s-h*l*s+h*r*c-t*p*c-o*r*m+t*l*m)*P,e[8]=w*P,e[9]=(v*f*s-h*A*s-v*i*m+t*A*m+h*i*g-t*f*g)*P,e[10]=(o*A*s-v*a*s+v*i*c-t*A*c-o*i*g+t*a*g)*P,e[11]=(h*a*s-o*f*s-h*i*c+t*f*c+o*i*m-t*a*m)*P,e[12]=I*P,e[13]=(h*A*r-v*f*r+v*i*p-t*A*p-h*i*x+t*f*x)*P,e[14]=(v*a*r-o*A*r-v*i*l+t*A*l+o*i*x-t*a*x)*P,e[15]=(o*f*r-h*a*r+h*i*l-t*f*l-o*i*p+t*a*p)*P,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,c=s*o,h=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,h*a+i,h*l-r*o,0,c*l-r*a,h*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,h=o+o,f=a+a,p=s*c,m=s*h,v=s*f,A=o*h,x=o*f,g=a*f,S=l*c,_=l*h,w=l*f,I=i.x,T=i.y,P=i.z;return r[0]=(1-(A+g))*I,r[1]=(m+w)*I,r[2]=(v-_)*I,r[3]=0,r[4]=(m-w)*T,r[5]=(1-(p+g))*T,r[6]=(x+S)*T,r[7]=0,r[8]=(v+_)*P,r[9]=(x-S)*P,r[10]=(1-(p+A))*P,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Ql.set(r[0],r[1],r[2]).length();const o=Ql.set(r[4],r[5],r[6]).length(),a=Ql.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Hr.copy(this);const c=1/s,h=1/o,f=1/a;return Hr.elements[0]*=c,Hr.elements[1]*=c,Hr.elements[2]*=c,Hr.elements[4]*=h,Hr.elements[5]*=h,Hr.elements[6]*=h,Hr.elements[8]*=f,Hr.elements[9]*=f,Hr.elements[10]*=f,t.setFromRotationMatrix(Hr),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o,a=ps){const l=this.elements,c=2*s/(t-e),h=2*s/(i-r),f=(t+e)/(t-e),p=(i+r)/(i-r);let m,v;if(a===ps)m=-(o+s)/(o-s),v=-2*o*s/(o-s);else if(a===nh)m=-o/(o-s),v=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=f,l[12]=0,l[1]=0,l[5]=h,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=v,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,o,a=ps){const l=this.elements,c=1/(t-e),h=1/(i-r),f=1/(o-s),p=(t+e)*c,m=(i+r)*h;let v,A;if(a===ps)v=(o+s)*f,A=-2*f;else if(a===nh)v=s*f,A=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*h,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=A,l[14]=-v,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Ql=new D,Hr=new Qe,wF=new D(0,0,0),EF=new D(1,1,1),bo=new D,np=new D,sr=new D,Nw=new Qe,Fw=new on;class Ti{constructor(e=0,t=0,i=0,r=Ti.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],c=r[5],h=r[9],f=r[2],p=r[6],m=r[10];switch(t){case"XYZ":this._y=Math.asin(En(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,c),this._z=0);break;case"YXZ":this._x=Math.asin(-En(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin(En(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-f,m),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-En(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(En(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,c),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-En(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-h,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return Nw.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Nw,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Fw.setFromEuler(this),this.setFromQuaternion(Fw,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Ti.DEFAULT_ORDER="XYZ";class ll{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let CF=0;const Uw=new D,ql=new on,Ls=new Qe,ip=new D,Vu=new D,bF=new D,TF=new on,Ow=new D(1,0,0),kw=new D(0,1,0),zw=new D(0,0,1),Hw={type:"added"},RF={type:"removed"},Zl={type:"childadded",child:null},dy={type:"childremoved",child:null};class It extends ws{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:CF++}),this.uuid=ur(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=It.DEFAULT_UP.clone();const e=new D,t=new Ti,i=new on,r=new D(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Qe},normalMatrix:{value:new Mt}}),this.matrix=new Qe,this.matrixWorld=new Qe,this.matrixAutoUpdate=It.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=It.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new ll,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return ql.setFromAxisAngle(e,t),this.quaternion.multiply(ql),this}rotateOnWorldAxis(e,t){return ql.setFromAxisAngle(e,t),this.quaternion.premultiply(ql),this}rotateX(e){return this.rotateOnAxis(Ow,e)}rotateY(e){return this.rotateOnAxis(kw,e)}rotateZ(e){return this.rotateOnAxis(zw,e)}translateOnAxis(e,t){return Uw.copy(e).applyQuaternion(this.quaternion),this.position.add(Uw.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Ow,e)}translateY(e){return this.translateOnAxis(kw,e)}translateZ(e){return this.translateOnAxis(zw,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Ls.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?ip.copy(e):ip.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Vu.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ls.lookAt(Vu,ip,this.up):Ls.lookAt(ip,Vu,this.up),this.quaternion.setFromRotationMatrix(Ls),r&&(Ls.extractRotation(r.matrixWorld),ql.setFromRotationMatrix(Ls),this.quaternion.premultiply(ql.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(Hw),Zl.child=e,this.dispatchEvent(Zl),Zl.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(RF),dy.child=e,this.dispatchEvent(dy),dy.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Ls.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Ls.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ls),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(Hw),Zl.child=e,this.dispatchEvent(Zl),Zl.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Vu,e,bF),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Vu,TF,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,h=l.length;c<h;c++){const f=l[c];s(e.shapes,f)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),h=o(e.images),f=o(e.shapes),p=o(e.skeletons),m=o(e.animations),v=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),h.length>0&&(i.images=h),f.length>0&&(i.shapes=f),p.length>0&&(i.skeletons=p),m.length>0&&(i.animations=m),v.length>0&&(i.nodes=v)}return i.object=r,i;function o(a){const l=[];for(const c in a){const h=a[c];delete h.metadata,l.push(h)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}It.DEFAULT_UP=new D(0,1,0);It.DEFAULT_MATRIX_AUTO_UPDATE=!0;It.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Gr=new D,Ds=new D,hy=new D,Ns=new D,$l=new D,ec=new D,Gw=new D,fy=new D,py=new D,my=new D,gy=new Vt,vy=new Vt,yy=new Vt;class wi{constructor(e=new D,t=new D,i=new D){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Gr.subVectors(e,t),r.cross(Gr);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){Gr.subVectors(r,t),Ds.subVectors(i,t),hy.subVectors(e,t);const o=Gr.dot(Gr),a=Gr.dot(Ds),l=Gr.dot(hy),c=Ds.dot(Ds),h=Ds.dot(hy),f=o*c-a*a;if(f===0)return s.set(0,0,0),null;const p=1/f,m=(c*l-a*h)*p,v=(o*h-a*l)*p;return s.set(1-m-v,v,m)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Ns)===null?!1:Ns.x>=0&&Ns.y>=0&&Ns.x+Ns.y<=1}static getInterpolation(e,t,i,r,s,o,a,l){return this.getBarycoord(e,t,i,r,Ns)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,Ns.x),l.addScaledVector(o,Ns.y),l.addScaledVector(a,Ns.z),l)}static getInterpolatedAttribute(e,t,i,r,s,o){return gy.setScalar(0),vy.setScalar(0),yy.setScalar(0),gy.fromBufferAttribute(e,t),vy.fromBufferAttribute(e,i),yy.fromBufferAttribute(e,r),o.setScalar(0),o.addScaledVector(gy,s.x),o.addScaledVector(vy,s.y),o.addScaledVector(yy,s.z),o}static isFrontFacing(e,t,i,r){return Gr.subVectors(i,t),Ds.subVectors(e,t),Gr.cross(Ds).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Gr.subVectors(this.c,this.b),Ds.subVectors(this.a,this.b),Gr.cross(Ds).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return wi.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return wi.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return wi.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return wi.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return wi.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;$l.subVectors(r,i),ec.subVectors(s,i),fy.subVectors(e,i);const l=$l.dot(fy),c=ec.dot(fy);if(l<=0&&c<=0)return t.copy(i);py.subVectors(e,r);const h=$l.dot(py),f=ec.dot(py);if(h>=0&&f<=h)return t.copy(r);const p=l*f-h*c;if(p<=0&&l>=0&&h<=0)return o=l/(l-h),t.copy(i).addScaledVector($l,o);my.subVectors(e,s);const m=$l.dot(my),v=ec.dot(my);if(v>=0&&m<=v)return t.copy(s);const A=m*c-l*v;if(A<=0&&c>=0&&v<=0)return a=c/(c-v),t.copy(i).addScaledVector(ec,a);const x=h*v-m*f;if(x<=0&&f-h>=0&&m-v>=0)return Gw.subVectors(s,r),a=(f-h)/(f-h+(m-v)),t.copy(r).addScaledVector(Gw,a);const g=1/(x+A+p);return o=A*g,a=p*g,t.copy(i).addScaledVector($l,o).addScaledVector(ec,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const PI={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},To={h:0,s:0,l:0},rp={h:0,s:0,l:0};function xy(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class Ee{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Un){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Ut.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=Ut.workingColorSpace){return this.r=e,this.g=t,this.b=i,Ut.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=Ut.workingColorSpace){if(e=JA(e,1),t=En(t,0,1),i=En(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=xy(o,s,e+1/3),this.g=xy(o,s,e),this.b=xy(o,s,e-1/3)}return Ut.toWorkingColorSpace(this,r),this}setStyle(e,t=Un){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Un){const i=PI[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=qs(e.r),this.g=qs(e.g),this.b=qs(e.b),this}copyLinearToSRGB(e){return this.r=Uc(e.r),this.g=Uc(e.g),this.b=Uc(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Un){return Ut.fromWorkingColorSpace(_i.copy(this),e),Math.round(En(_i.r*255,0,255))*65536+Math.round(En(_i.g*255,0,255))*256+Math.round(En(_i.b*255,0,255))}getHexString(e=Un){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Ut.workingColorSpace){Ut.fromWorkingColorSpace(_i.copy(this),t);const i=_i.r,r=_i.g,s=_i.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,c;const h=(a+o)/2;if(a===o)l=0,c=0;else{const f=o-a;switch(c=h<=.5?f/(o+a):f/(2-o-a),o){case i:l=(r-s)/f+(r<s?6:0);break;case r:l=(s-i)/f+2;break;case s:l=(i-r)/f+4;break}l/=6}return e.h=l,e.s=c,e.l=h,e}getRGB(e,t=Ut.workingColorSpace){return Ut.fromWorkingColorSpace(_i.copy(this),t),e.r=_i.r,e.g=_i.g,e.b=_i.b,e}getStyle(e=Un){Ut.fromWorkingColorSpace(_i.copy(this),e);const t=_i.r,i=_i.g,r=_i.b;return e!==Un?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(To),this.setHSL(To.h+e,To.s+t,To.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(To),e.getHSL(rp);const i=Pd(To.h,rp.h,t),r=Pd(To.s,rp.s,t),s=Pd(To.l,rp.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const _i=new Ee;Ee.NAMES=PI;let IF=0;class mn extends ws{static get type(){return"Material"}get type(){return this.constructor.type}set type(e){}constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:IF++}),this.uuid=ur(),this.name="",this.blending=rl,this.side=qr,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Om,this.blendDst=km,this.blendEquation=ko,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ee(0,0,0),this.blendAlpha=0,this.depthFunc=ml,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=__,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Ga,this.stencilZFail=Ga,this.stencilZPass=Ga,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==rl&&(i.blending=this.blending),this.side!==qr&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==Om&&(i.blendSrc=this.blendSrc),this.blendDst!==km&&(i.blendDst=this.blendDst),this.blendEquation!==ko&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==ml&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==__&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Ga&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Ga&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Ga&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class Cn extends mn{static get type(){return"MeshBasicMaterial"}constructor(e){super(),this.isMeshBasicMaterial=!0,this.color=new Ee(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ti,this.combine=vh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const js=PF();function PF(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):c<-14?(i[l]=1024>>-c-14,i[l|256]=1024>>-c-14|32768,r[l]=-c-1,r[l|256]=-c-1):c<=15?(i[l]=c+15<<10,i[l|256]=c+15<<10|32768,r[l]=13,r[l|256]=13):c<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,h=0;for(;!(c&8388608);)c<<=1,h-=8388608;c&=-8388609,h+=947912704,s[l]=c|h}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function Ji(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=En(n,-65504,65504),js.floatView[0]=n;const e=js.uint32View[0],t=e>>23&511;return js.baseTable[t]+((e&8388607)>>js.shiftTable[t])}function pd(n){const e=n>>10;return js.uint32View[0]=js.mantissaTable[js.offsetTable[e]+(n&1023)]+js.exponentTable[e],js.floatView[0]}const BF={toHalfFloat:Ji,fromHalfFloat:pd},Nn=new D,sp=new ue;class yt{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=th,this.updateRanges=[],this.gpuType=Fi,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)sp.fromBufferAttribute(this,t),sp.applyMatrix3(e),this.setXY(t,sp.x,sp.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Nn.fromBufferAttribute(this,t),Nn.applyMatrix3(e),this.setXYZ(t,Nn.x,Nn.y,Nn.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Nn.fromBufferAttribute(this,t),Nn.applyMatrix4(e),this.setXYZ(t,Nn.x,Nn.y,Nn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Nn.fromBufferAttribute(this,t),Nn.applyNormalMatrix(e),this.setXYZ(t,Nn.x,Nn.y,Nn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Nn.fromBufferAttribute(this,t),Nn.transformDirection(e),this.setXYZ(t,Nn.x,Nn.y,Nn.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Ni(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=wt(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Ni(t,this.array)),t}setX(e,t){return this.normalized&&(t=wt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Ni(t,this.array)),t}setY(e,t){return this.normalized&&(t=wt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Ni(t,this.array)),t}setZ(e,t){return this.normalized&&(t=wt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Ni(t,this.array)),t}setW(e,t){return this.normalized&&(t=wt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=wt(t,this.array),i=wt(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=wt(t,this.array),i=wt(i,this.array),r=wt(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=wt(t,this.array),i=wt(i,this.array),r=wt(r,this.array),s=wt(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==th&&(e.usage=this.usage),e}}class LF extends yt{constructor(e,t,i){super(new Int8Array(e),t,i)}}class DF extends yt{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class NF extends yt{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class FF extends yt{constructor(e,t,i){super(new Int16Array(e),t,i)}}class QA extends yt{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class UF extends yt{constructor(e,t,i){super(new Int32Array(e),t,i)}}class qA extends yt{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class OF extends yt{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=pd(this.array[e*this.itemSize]);return this.normalized&&(t=Ni(t,this.array)),t}setX(e,t){return this.normalized&&(t=wt(t,this.array)),this.array[e*this.itemSize]=Ji(t),this}getY(e){let t=pd(this.array[e*this.itemSize+1]);return this.normalized&&(t=Ni(t,this.array)),t}setY(e,t){return this.normalized&&(t=wt(t,this.array)),this.array[e*this.itemSize+1]=Ji(t),this}getZ(e){let t=pd(this.array[e*this.itemSize+2]);return this.normalized&&(t=Ni(t,this.array)),t}setZ(e,t){return this.normalized&&(t=wt(t,this.array)),this.array[e*this.itemSize+2]=Ji(t),this}getW(e){let t=pd(this.array[e*this.itemSize+3]);return this.normalized&&(t=Ni(t,this.array)),t}setW(e,t){return this.normalized&&(t=wt(t,this.array)),this.array[e*this.itemSize+3]=Ji(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=wt(t,this.array),i=wt(i,this.array)),this.array[e+0]=Ji(t),this.array[e+1]=Ji(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=wt(t,this.array),i=wt(i,this.array),r=wt(r,this.array)),this.array[e+0]=Ji(t),this.array[e+1]=Ji(i),this.array[e+2]=Ji(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=wt(t,this.array),i=wt(i,this.array),r=wt(r,this.array),s=wt(s,this.array)),this.array[e+0]=Ji(t),this.array[e+1]=Ji(i),this.array[e+2]=Ji(r),this.array[e+3]=Ji(s),this}}class st extends yt{constructor(e,t,i){super(new Float32Array(e),t,i)}}let kF=0;const Er=new Qe,_y=new It,tc=new D,or=new ai,Wu=new ai,ei=new D;class gt extends ws{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:kF++}),this.uuid=ur(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(bI(e)?qA:QA)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Mt().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Er.makeRotationFromQuaternion(e),this.applyMatrix4(Er),this}rotateX(e){return Er.makeRotationX(e),this.applyMatrix4(Er),this}rotateY(e){return Er.makeRotationY(e),this.applyMatrix4(Er),this}rotateZ(e){return Er.makeRotationZ(e),this.applyMatrix4(Er),this}translate(e,t,i){return Er.makeTranslation(e,t,i),this.applyMatrix4(Er),this}scale(e,t,i){return Er.makeScale(e,t,i),this.applyMatrix4(Er),this}lookAt(e){return _y.lookAt(e),_y.updateMatrix(),this.applyMatrix4(_y.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(tc).negate(),this.translate(tc.x,tc.y,tc.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const i=[];for(let r=0,s=e.length;r<s;r++){const o=e[r];i.push(o.x,o.y,o.z||0)}this.setAttribute("position",new st(i,3))}else{for(let i=0,r=t.count;i<r;i++){const s=e[i];t.setXYZ(i,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ai);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new D(-1/0,-1/0,-1/0),new D(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];or.setFromBufferAttribute(s),this.morphTargetsRelative?(ei.addVectors(this.boundingBox.min,or.min),this.boundingBox.expandByPoint(ei),ei.addVectors(this.boundingBox.max,or.max),this.boundingBox.expandByPoint(ei)):(this.boundingBox.expandByPoint(or.min),this.boundingBox.expandByPoint(or.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Gn);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new D,1/0);return}if(e){const i=this.boundingSphere.center;if(or.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];Wu.setFromBufferAttribute(a),this.morphTargetsRelative?(ei.addVectors(or.min,Wu.min),or.expandByPoint(ei),ei.addVectors(or.max,Wu.max),or.expandByPoint(ei)):(or.expandByPoint(Wu.min),or.expandByPoint(Wu.max))}or.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)ei.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(ei));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,h=a.count;c<h;c++)ei.fromBufferAttribute(a,c),l&&(tc.fromBufferAttribute(e,c),ei.add(tc)),r=Math.max(r,i.distanceToSquared(ei))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new yt(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let B=0;B<i.count;B++)a[B]=new D,l[B]=new D;const c=new D,h=new D,f=new D,p=new ue,m=new ue,v=new ue,A=new D,x=new D;function g(B,R,C){c.fromBufferAttribute(i,B),h.fromBufferAttribute(i,R),f.fromBufferAttribute(i,C),p.fromBufferAttribute(s,B),m.fromBufferAttribute(s,R),v.fromBufferAttribute(s,C),h.sub(c),f.sub(c),m.sub(p),v.sub(p);const U=1/(m.x*v.y-v.x*m.y);isFinite(U)&&(A.copy(h).multiplyScalar(v.y).addScaledVector(f,-m.y).multiplyScalar(U),x.copy(f).multiplyScalar(m.x).addScaledVector(h,-v.x).multiplyScalar(U),a[B].add(A),a[R].add(A),a[C].add(A),l[B].add(x),l[R].add(x),l[C].add(x))}let S=this.groups;S.length===0&&(S=[{start:0,count:e.count}]);for(let B=0,R=S.length;B<R;++B){const C=S[B],U=C.start,j=C.count;for(let K=U,te=U+j;K<te;K+=3)g(e.getX(K+0),e.getX(K+1),e.getX(K+2))}const _=new D,w=new D,I=new D,T=new D;function P(B){I.fromBufferAttribute(r,B),T.copy(I);const R=a[B];_.copy(R),_.sub(I.multiplyScalar(I.dot(R))).normalize(),w.crossVectors(T,R);const U=w.dot(l[B])<0?-1:1;o.setXYZW(B,_.x,_.y,_.z,U)}for(let B=0,R=S.length;B<R;++B){const C=S[B],U=C.start,j=C.count;for(let K=U,te=U+j;K<te;K+=3)P(e.getX(K+0)),P(e.getX(K+1)),P(e.getX(K+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new yt(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let p=0,m=i.count;p<m;p++)i.setXYZ(p,0,0,0);const r=new D,s=new D,o=new D,a=new D,l=new D,c=new D,h=new D,f=new D;if(e)for(let p=0,m=e.count;p<m;p+=3){const v=e.getX(p+0),A=e.getX(p+1),x=e.getX(p+2);r.fromBufferAttribute(t,v),s.fromBufferAttribute(t,A),o.fromBufferAttribute(t,x),h.subVectors(o,s),f.subVectors(r,s),h.cross(f),a.fromBufferAttribute(i,v),l.fromBufferAttribute(i,A),c.fromBufferAttribute(i,x),a.add(h),l.add(h),c.add(h),i.setXYZ(v,a.x,a.y,a.z),i.setXYZ(A,l.x,l.y,l.z),i.setXYZ(x,c.x,c.y,c.z)}else for(let p=0,m=t.count;p<m;p+=3)r.fromBufferAttribute(t,p+0),s.fromBufferAttribute(t,p+1),o.fromBufferAttribute(t,p+2),h.subVectors(o,s),f.subVectors(r,s),h.cross(f),i.setXYZ(p+0,h.x,h.y,h.z),i.setXYZ(p+1,h.x,h.y,h.z),i.setXYZ(p+2,h.x,h.y,h.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)ei.fromBufferAttribute(e,t),ei.normalize(),e.setXYZ(t,ei.x,ei.y,ei.z)}toNonIndexed(){function e(a,l){const c=a.array,h=a.itemSize,f=a.normalized,p=new c.constructor(l.length*h);let m=0,v=0;for(let A=0,x=l.length;A<x;A++){a.isInterleavedBufferAttribute?m=l[A]*a.data.stride+a.offset:m=l[A]*h;for(let g=0;g<h;g++)p[v++]=c[m++]}return new yt(p,h,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new gt,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],c=e(l,i);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let h=0,f=c.length;h<f;h++){const p=c[h],m=e(p,i);l.push(m)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],h=[];for(let f=0,p=c.length;f<p;f++){const m=c[f];h.push(m.toJSON(e.data))}h.length>0&&(r[l]=h,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const c in r){const h=r[c];this.setAttribute(c,h.clone(t))}const s=e.morphAttributes;for(const c in s){const h=[],f=s[c];for(let p=0,m=f.length;p<m;p++)h.push(f[p].clone(t));this.morphAttributes[c]=h}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,h=o.length;c<h;c++){const f=o[c];this.addGroup(f.start,f.count,f.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Vw=new Qe,wa=new Ss,op=new Gn,Ww=new D,ap=new D,lp=new D,cp=new D,Ay=new D,up=new D,jw=new D,dp=new D;class xt extends It{constructor(e=new gt,t=new Cn){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){up.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const h=a[l],f=s[l];h!==0&&(Ay.fromBufferAttribute(f,e),o?up.addScaledVector(Ay,h):up.addScaledVector(Ay.sub(t),h))}t.add(up)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),op.copy(i.boundingSphere),op.applyMatrix4(s),wa.copy(e.ray).recast(e.near),!(op.containsPoint(wa.origin)===!1&&(wa.intersectSphere(op,Ww)===null||wa.origin.distanceToSquared(Ww)>(e.far-e.near)**2))&&(Vw.copy(s).invert(),wa.copy(e.ray).applyMatrix4(Vw),!(i.boundingBox!==null&&wa.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,wa)))}_computeIntersections(e,t,i){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,h=s.attributes.uv1,f=s.attributes.normal,p=s.groups,m=s.drawRange;if(a!==null)if(Array.isArray(o))for(let v=0,A=p.length;v<A;v++){const x=p[v],g=o[x.materialIndex],S=Math.max(x.start,m.start),_=Math.min(a.count,Math.min(x.start+x.count,m.start+m.count));for(let w=S,I=_;w<I;w+=3){const T=a.getX(w),P=a.getX(w+1),B=a.getX(w+2);r=hp(this,g,e,i,c,h,f,T,P,B),r&&(r.faceIndex=Math.floor(w/3),r.face.materialIndex=x.materialIndex,t.push(r))}}else{const v=Math.max(0,m.start),A=Math.min(a.count,m.start+m.count);for(let x=v,g=A;x<g;x+=3){const S=a.getX(x),_=a.getX(x+1),w=a.getX(x+2);r=hp(this,o,e,i,c,h,f,S,_,w),r&&(r.faceIndex=Math.floor(x/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(o))for(let v=0,A=p.length;v<A;v++){const x=p[v],g=o[x.materialIndex],S=Math.max(x.start,m.start),_=Math.min(l.count,Math.min(x.start+x.count,m.start+m.count));for(let w=S,I=_;w<I;w+=3){const T=w,P=w+1,B=w+2;r=hp(this,g,e,i,c,h,f,T,P,B),r&&(r.faceIndex=Math.floor(w/3),r.face.materialIndex=x.materialIndex,t.push(r))}}else{const v=Math.max(0,m.start),A=Math.min(l.count,m.start+m.count);for(let x=v,g=A;x<g;x+=3){const S=x,_=x+1,w=x+2;r=hp(this,o,e,i,c,h,f,S,_,w),r&&(r.faceIndex=Math.floor(x/3),t.push(r))}}}}function zF(n,e,t,i,r,s,o,a){let l;if(e.side===oi?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side===qr,a),l===null)return null;dp.copy(a),dp.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(dp);return c<t.near||c>t.far?null:{distance:c,point:dp.clone(),object:n}}function hp(n,e,t,i,r,s,o,a,l,c){n.getVertexPosition(a,ap),n.getVertexPosition(l,lp),n.getVertexPosition(c,cp);const h=zF(n,e,t,i,ap,lp,cp,jw);if(h){const f=new D;wi.getBarycoord(jw,ap,lp,cp,f),r&&(h.uv=wi.getInterpolatedAttribute(r,a,l,c,f,new ue)),s&&(h.uv1=wi.getInterpolatedAttribute(s,a,l,c,f,new ue)),o&&(h.normal=wi.getInterpolatedAttribute(o,a,l,c,f,new D),h.normal.dot(i.direction)>0&&h.normal.multiplyScalar(-1));const p={a,b:l,c,normal:new D,materialIndex:0};wi.getNormal(ap,lp,cp,p.normal),h.face=p,h.barycoord=f}return h}class Nr extends gt{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],h=[],f=[];let p=0,m=0;v("z","y","x",-1,-1,i,t,e,o,s,0),v("z","y","x",1,-1,i,t,-e,o,s,1),v("x","z","y",1,1,e,i,t,r,o,2),v("x","z","y",1,-1,e,i,-t,r,o,3),v("x","y","z",1,-1,e,t,i,r,s,4),v("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new st(c,3)),this.setAttribute("normal",new st(h,3)),this.setAttribute("uv",new st(f,2));function v(A,x,g,S,_,w,I,T,P,B,R){const C=w/P,U=I/B,j=w/2,K=I/2,te=T/2,de=P+1,re=B+1;let ge=0,F=0;const k=new D;for(let W=0;W<re;W++){const Y=W*U-K;for(let se=0;se<de;se++){const Ce=se*C-j;k[A]=Ce*S,k[x]=Y*_,k[g]=te,c.push(k.x,k.y,k.z),k[A]=0,k[x]=0,k[g]=T>0?1:-1,h.push(k.x,k.y,k.z),f.push(se/P),f.push(1-W/B),ge+=1}}for(let W=0;W<B;W++)for(let Y=0;Y<P;Y++){const se=p+Y+de*W,Ce=p+Y+de*(W+1),q=p+(Y+1)+de*(W+1),ie=p+(Y+1)+de*W;l.push(se,Ce,ie),l.push(Ce,q,ie),F+=6}a.addGroup(m,F,R),m+=F,p+=ge}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Nr(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Zc(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Li(n){const e={};for(let t=0;t<n.length;t++){const i=Zc(n[t]);for(const r in i)e[r]=i[r]}return e}function HF(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function BI(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Ut.workingColorSpace}const LI={clone:Zc,merge:Li};var GF=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,VF=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class pr extends mn{static get type(){return"ShaderMaterial"}constructor(e){super(),this.isShaderMaterial=!0,this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=GF,this.fragmentShader=VF,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Zc(e.uniforms),this.uniformsGroups=HF(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class Sh extends It{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Qe,this.projectionMatrix=new Qe,this.projectionMatrixInverse=new Qe,this.coordinateSystem=ps}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Ro=new D,Xw=new ue,Jw=new ue;let yn=class extends Sh{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=qc*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(al*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return qc*2*Math.atan(Math.tan(al*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Ro.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Ro.x,Ro.y).multiplyScalar(-e/Ro.z),Ro.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Ro.x,Ro.y).multiplyScalar(-e/Ro.z)}getViewSize(e,t){return this.getViewBounds(e,Xw,Jw),t.subVectors(Jw,Xw)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(al*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/c,r*=o.width/l,i*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}};const nc=-90,ic=1;class DI extends It{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new yn(nc,ic,e,t);r.layers=this.layers,this.add(r);const s=new yn(nc,ic,e,t);s.layers=this.layers,this.add(s);const o=new yn(nc,ic,e,t);o.layers=this.layers,this.add(o);const a=new yn(nc,ic,e,t);a.layers=this.layers,this.add(a);const l=new yn(nc,ic,e,t);l.layers=this.layers,this.add(l);const c=new yn(nc,ic,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,a,l]=t;for(const c of t)this.remove(c);if(e===ps)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===nh)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,h]=this.children,f=e.getRenderTarget(),p=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),v=e.xr.enabled;e.xr.enabled=!1;const A=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,c),i.texture.generateMipmaps=A,e.setRenderTarget(i,5,r),e.render(t,h),e.setRenderTarget(f,p,m),e.xr.enabled=v,i.texture.needsPMREMUpdate=!0}}class Mh extends tn{constructor(e,t,i,r,s,o,a,l,c,h){e=e!==void 0?e:[],t=t!==void 0?t:io,super(e,t,i,r,s,o,a,l,c,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class NI extends ci{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new Mh(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:en}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Nr(5,5,5),s=new pr({name:"CubemapFromEquirect",uniforms:Zc(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:oi,blending:Qs});s.uniforms.tEquirect.value=t;const o=new xt(r,s),a=t.minFilter;return t.minFilter===qi&&(t.minFilter=en),new DI(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const Sy=new D,WF=new D,jF=new Mt;class Ir{constructor(e=new D(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=Sy.subVectors(i,t).cross(WF.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(Sy),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||jF.getNormalMatrix(e),r=this.coplanarPoint(Sy).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Ea=new Gn,fp=new D;class wh{constructor(e=new Ir,t=new Ir,i=new Ir,r=new Ir,s=new Ir,o=new Ir){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=ps){const i=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],l=r[3],c=r[4],h=r[5],f=r[6],p=r[7],m=r[8],v=r[9],A=r[10],x=r[11],g=r[12],S=r[13],_=r[14],w=r[15];if(i[0].setComponents(l-s,p-c,x-m,w-g).normalize(),i[1].setComponents(l+s,p+c,x+m,w+g).normalize(),i[2].setComponents(l+o,p+h,x+v,w+S).normalize(),i[3].setComponents(l-o,p-h,x-v,w-S).normalize(),i[4].setComponents(l-a,p-f,x-A,w-_).normalize(),t===ps)i[5].setComponents(l+a,p+f,x+A,w+_).normalize();else if(t===nh)i[5].setComponents(a,f,A,_).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Ea.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Ea.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Ea)}intersectsSprite(e){return Ea.center.set(0,0,0),Ea.radius=.7071067811865476,Ea.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ea)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(fp.x=r.normal.x>0?e.max.x:e.min.x,fp.y=r.normal.y>0?e.max.y:e.min.y,fp.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(fp)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function FI(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function XF(n){const e=new WeakMap;function t(a,l){const c=a.array,h=a.usage,f=c.byteLength,p=n.createBuffer();n.bindBuffer(l,p),n.bufferData(l,c,h),a.onUploadCallback();let m;if(c instanceof Float32Array)m=n.FLOAT;else if(c instanceof Uint16Array)a.isFloat16BufferAttribute?m=n.HALF_FLOAT:m=n.UNSIGNED_SHORT;else if(c instanceof Int16Array)m=n.SHORT;else if(c instanceof Uint32Array)m=n.UNSIGNED_INT;else if(c instanceof Int32Array)m=n.INT;else if(c instanceof Int8Array)m=n.BYTE;else if(c instanceof Uint8Array)m=n.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)m=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:p,type:m,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:f}}function i(a,l,c){const h=l.array,f=l.updateRanges;if(n.bindBuffer(c,a),f.length===0)n.bufferSubData(c,0,h);else{f.sort((m,v)=>m.start-v.start);let p=0;for(let m=1;m<f.length;m++){const v=f[p],A=f[m];A.start<=v.start+v.count+1?v.count=Math.max(v.count,A.start+A.count-v.start):(++p,f[p]=A)}f.length=p+1;for(let m=0,v=f.length;m<v;m++){const A=f[m];n.bufferSubData(c,A.start*h.BYTES_PER_ELEMENT,h,A.start,A.count)}l.clearUpdateRanges()}l.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(n.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const h=e.get(a);(!h||h.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const c=e.get(a);if(c===void 0)e.set(a,t(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(c.buffer,a,l),c.version=a.version}}return{get:r,remove:s,update:o}}class ca extends gt{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),c=a+1,h=l+1,f=e/a,p=t/l,m=[],v=[],A=[],x=[];for(let g=0;g<h;g++){const S=g*p-o;for(let _=0;_<c;_++){const w=_*f-s;v.push(w,-S,0),A.push(0,0,1),x.push(_/a),x.push(1-g/l)}}for(let g=0;g<l;g++)for(let S=0;S<a;S++){const _=S+c*g,w=S+c*(g+1),I=S+1+c*(g+1),T=S+1+c*g;m.push(_,w,T),m.push(w,I,T)}this.setIndex(m),this.setAttribute("position",new st(v,3)),this.setAttribute("normal",new st(A,3)),this.setAttribute("uv",new st(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ca(e.width,e.height,e.widthSegments,e.heightSegments)}}var JF=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,KF=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,YF=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,QF=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,qF=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,ZF=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,$F=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,e3=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,t3=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,n3=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,i3=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,r3=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,s3=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,o3=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,a3=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,l3=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,c3=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,u3=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,d3=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,h3=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,f3=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,p3=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,m3=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,g3=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,v3=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,y3=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,x3=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,_3=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,A3=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,S3=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,M3="gl_FragColor = linearToOutputTexel( gl_FragColor );",w3=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,E3=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,C3=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,b3=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,T3=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,R3=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,I3=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,P3=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,B3=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,L3=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,D3=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,N3=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,F3=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,U3=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,O3=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,k3=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,z3=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,H3=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,G3=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,V3=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,W3=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,j3=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,X3=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,J3=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,K3=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Y3=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Q3=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,q3=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Z3=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,$3=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,eU=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,tU=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,nU=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,iU=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,rU=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,sU=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,oU=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,aU=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,lU=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,cU=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,uU=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,dU=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,hU=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,fU=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,pU=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,mU=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,gU=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,vU=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,yU=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,xU=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,_U=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,AU=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,SU=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,MU=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,wU=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,EU=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,CU=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,bU=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,TU=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,RU=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,IU=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,PU=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,BU=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,LU=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,DU=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,NU=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,FU=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,UU=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,OU=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,kU=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,zU=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,HU=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,GU=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,VU=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,WU=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,jU=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const XU=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,JU=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,KU=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,YU=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,QU=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,qU=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,ZU=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,$U=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,eO=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,tO=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,nO=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,iO=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,rO=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,sO=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,oO=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,aO=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,lO=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,cO=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,uO=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,dO=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,hO=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,fO=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,pO=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,mO=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,gO=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,vO=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,yO=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,xO=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,_O=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,AO=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,SO=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,MO=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,wO=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,EO=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,bt={alphahash_fragment:JF,alphahash_pars_fragment:KF,alphamap_fragment:YF,alphamap_pars_fragment:QF,alphatest_fragment:qF,alphatest_pars_fragment:ZF,aomap_fragment:$F,aomap_pars_fragment:e3,batching_pars_vertex:t3,batching_vertex:n3,begin_vertex:i3,beginnormal_vertex:r3,bsdfs:s3,iridescence_fragment:o3,bumpmap_pars_fragment:a3,clipping_planes_fragment:l3,clipping_planes_pars_fragment:c3,clipping_planes_pars_vertex:u3,clipping_planes_vertex:d3,color_fragment:h3,color_pars_fragment:f3,color_pars_vertex:p3,color_vertex:m3,common:g3,cube_uv_reflection_fragment:v3,defaultnormal_vertex:y3,displacementmap_pars_vertex:x3,displacementmap_vertex:_3,emissivemap_fragment:A3,emissivemap_pars_fragment:S3,colorspace_fragment:M3,colorspace_pars_fragment:w3,envmap_fragment:E3,envmap_common_pars_fragment:C3,envmap_pars_fragment:b3,envmap_pars_vertex:T3,envmap_physical_pars_fragment:k3,envmap_vertex:R3,fog_vertex:I3,fog_pars_vertex:P3,fog_fragment:B3,fog_pars_fragment:L3,gradientmap_pars_fragment:D3,lightmap_pars_fragment:N3,lights_lambert_fragment:F3,lights_lambert_pars_fragment:U3,lights_pars_begin:O3,lights_toon_fragment:z3,lights_toon_pars_fragment:H3,lights_phong_fragment:G3,lights_phong_pars_fragment:V3,lights_physical_fragment:W3,lights_physical_pars_fragment:j3,lights_fragment_begin:X3,lights_fragment_maps:J3,lights_fragment_end:K3,logdepthbuf_fragment:Y3,logdepthbuf_pars_fragment:Q3,logdepthbuf_pars_vertex:q3,logdepthbuf_vertex:Z3,map_fragment:$3,map_pars_fragment:eU,map_particle_fragment:tU,map_particle_pars_fragment:nU,metalnessmap_fragment:iU,metalnessmap_pars_fragment:rU,morphinstance_vertex:sU,morphcolor_vertex:oU,morphnormal_vertex:aU,morphtarget_pars_vertex:lU,morphtarget_vertex:cU,normal_fragment_begin:uU,normal_fragment_maps:dU,normal_pars_fragment:hU,normal_pars_vertex:fU,normal_vertex:pU,normalmap_pars_fragment:mU,clearcoat_normal_fragment_begin:gU,clearcoat_normal_fragment_maps:vU,clearcoat_pars_fragment:yU,iridescence_pars_fragment:xU,opaque_fragment:_U,packing:AU,premultiplied_alpha_fragment:SU,project_vertex:MU,dithering_fragment:wU,dithering_pars_fragment:EU,roughnessmap_fragment:CU,roughnessmap_pars_fragment:bU,shadowmap_pars_fragment:TU,shadowmap_pars_vertex:RU,shadowmap_vertex:IU,shadowmask_pars_fragment:PU,skinbase_vertex:BU,skinning_pars_vertex:LU,skinning_vertex:DU,skinnormal_vertex:NU,specularmap_fragment:FU,specularmap_pars_fragment:UU,tonemapping_fragment:OU,tonemapping_pars_fragment:kU,transmission_fragment:zU,transmission_pars_fragment:HU,uv_pars_fragment:GU,uv_pars_vertex:VU,uv_vertex:WU,worldpos_vertex:jU,background_vert:XU,background_frag:JU,backgroundCube_vert:KU,backgroundCube_frag:YU,cube_vert:QU,cube_frag:qU,depth_vert:ZU,depth_frag:$U,distanceRGBA_vert:eO,distanceRGBA_frag:tO,equirect_vert:nO,equirect_frag:iO,linedashed_vert:rO,linedashed_frag:sO,meshbasic_vert:oO,meshbasic_frag:aO,meshlambert_vert:lO,meshlambert_frag:cO,meshmatcap_vert:uO,meshmatcap_frag:dO,meshnormal_vert:hO,meshnormal_frag:fO,meshphong_vert:pO,meshphong_frag:mO,meshphysical_vert:gO,meshphysical_frag:vO,meshtoon_vert:yO,meshtoon_frag:xO,points_vert:_O,points_frag:AO,shadow_vert:SO,shadow_frag:MO,sprite_vert:wO,sprite_frag:EO},Ue={common:{diffuse:{value:new Ee(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Mt},alphaMap:{value:null},alphaMapTransform:{value:new Mt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Mt}},envmap:{envMap:{value:null},envMapRotation:{value:new Mt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Mt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Mt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Mt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Mt},normalScale:{value:new ue(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Mt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Mt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Mt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Mt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ee(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ee(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Mt},alphaTest:{value:0},uvTransform:{value:new Mt}},sprite:{diffuse:{value:new Ee(16777215)},opacity:{value:1},center:{value:new ue(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Mt},alphaMap:{value:null},alphaMapTransform:{value:new Mt},alphaTest:{value:0}}},Jr={basic:{uniforms:Li([Ue.common,Ue.specularmap,Ue.envmap,Ue.aomap,Ue.lightmap,Ue.fog]),vertexShader:bt.meshbasic_vert,fragmentShader:bt.meshbasic_frag},lambert:{uniforms:Li([Ue.common,Ue.specularmap,Ue.envmap,Ue.aomap,Ue.lightmap,Ue.emissivemap,Ue.bumpmap,Ue.normalmap,Ue.displacementmap,Ue.fog,Ue.lights,{emissive:{value:new Ee(0)}}]),vertexShader:bt.meshlambert_vert,fragmentShader:bt.meshlambert_frag},phong:{uniforms:Li([Ue.common,Ue.specularmap,Ue.envmap,Ue.aomap,Ue.lightmap,Ue.emissivemap,Ue.bumpmap,Ue.normalmap,Ue.displacementmap,Ue.fog,Ue.lights,{emissive:{value:new Ee(0)},specular:{value:new Ee(1118481)},shininess:{value:30}}]),vertexShader:bt.meshphong_vert,fragmentShader:bt.meshphong_frag},standard:{uniforms:Li([Ue.common,Ue.envmap,Ue.aomap,Ue.lightmap,Ue.emissivemap,Ue.bumpmap,Ue.normalmap,Ue.displacementmap,Ue.roughnessmap,Ue.metalnessmap,Ue.fog,Ue.lights,{emissive:{value:new Ee(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:bt.meshphysical_vert,fragmentShader:bt.meshphysical_frag},toon:{uniforms:Li([Ue.common,Ue.aomap,Ue.lightmap,Ue.emissivemap,Ue.bumpmap,Ue.normalmap,Ue.displacementmap,Ue.gradientmap,Ue.fog,Ue.lights,{emissive:{value:new Ee(0)}}]),vertexShader:bt.meshtoon_vert,fragmentShader:bt.meshtoon_frag},matcap:{uniforms:Li([Ue.common,Ue.bumpmap,Ue.normalmap,Ue.displacementmap,Ue.fog,{matcap:{value:null}}]),vertexShader:bt.meshmatcap_vert,fragmentShader:bt.meshmatcap_frag},points:{uniforms:Li([Ue.points,Ue.fog]),vertexShader:bt.points_vert,fragmentShader:bt.points_frag},dashed:{uniforms:Li([Ue.common,Ue.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:bt.linedashed_vert,fragmentShader:bt.linedashed_frag},depth:{uniforms:Li([Ue.common,Ue.displacementmap]),vertexShader:bt.depth_vert,fragmentShader:bt.depth_frag},normal:{uniforms:Li([Ue.common,Ue.bumpmap,Ue.normalmap,Ue.displacementmap,{opacity:{value:1}}]),vertexShader:bt.meshnormal_vert,fragmentShader:bt.meshnormal_frag},sprite:{uniforms:Li([Ue.sprite,Ue.fog]),vertexShader:bt.sprite_vert,fragmentShader:bt.sprite_frag},background:{uniforms:{uvTransform:{value:new Mt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:bt.background_vert,fragmentShader:bt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Mt}},vertexShader:bt.backgroundCube_vert,fragmentShader:bt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:bt.cube_vert,fragmentShader:bt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:bt.equirect_vert,fragmentShader:bt.equirect_frag},distanceRGBA:{uniforms:Li([Ue.common,Ue.displacementmap,{referencePosition:{value:new D},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:bt.distanceRGBA_vert,fragmentShader:bt.distanceRGBA_frag},shadow:{uniforms:Li([Ue.lights,Ue.fog,{color:{value:new Ee(0)},opacity:{value:1}}]),vertexShader:bt.shadow_vert,fragmentShader:bt.shadow_frag}};Jr.physical={uniforms:Li([Jr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Mt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Mt},clearcoatNormalScale:{value:new ue(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Mt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Mt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Mt},sheen:{value:0},sheenColor:{value:new Ee(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Mt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Mt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Mt},transmissionSamplerSize:{value:new ue},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Mt},attenuationDistance:{value:0},attenuationColor:{value:new Ee(0)},specularColor:{value:new Ee(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Mt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Mt},anisotropyVector:{value:new ue},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Mt}}]),vertexShader:bt.meshphysical_vert,fragmentShader:bt.meshphysical_frag};const pp={r:0,b:0,g:0},Ca=new Ti,CO=new Qe;function bO(n,e,t,i,r,s,o){const a=new Ee(0);let l=s===!0?0:1,c,h,f=null,p=0,m=null;function v(S){let _=S.isScene===!0?S.background:null;return _&&_.isTexture&&(_=(S.backgroundBlurriness>0?t:e).get(_)),_}function A(S){let _=!1;const w=v(S);w===null?g(a,l):w&&w.isColor&&(g(w,1),_=!0);const I=n.xr.getEnvironmentBlendMode();I==="additive"?i.buffers.color.setClear(0,0,0,1,o):I==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||_)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function x(S,_){const w=v(_);w&&(w.isCubeTexture||w.mapping===au)?(h===void 0&&(h=new xt(new Nr(1,1,1),new pr({name:"BackgroundCubeMaterial",uniforms:Zc(Jr.backgroundCube.uniforms),vertexShader:Jr.backgroundCube.vertexShader,fragmentShader:Jr.backgroundCube.fragmentShader,side:oi,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(I,T,P){this.matrixWorld.copyPosition(P.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(h)),Ca.copy(_.backgroundRotation),Ca.x*=-1,Ca.y*=-1,Ca.z*=-1,w.isCubeTexture&&w.isRenderTargetTexture===!1&&(Ca.y*=-1,Ca.z*=-1),h.material.uniforms.envMap.value=w,h.material.uniforms.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=_.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,h.material.uniforms.backgroundRotation.value.setFromMatrix4(CO.makeRotationFromEuler(Ca)),h.material.toneMapped=Ut.getTransfer(w.colorSpace)!==qt,(f!==w||p!==w.version||m!==n.toneMapping)&&(h.material.needsUpdate=!0,f=w,p=w.version,m=n.toneMapping),h.layers.enableAll(),S.unshift(h,h.geometry,h.material,0,0,null)):w&&w.isTexture&&(c===void 0&&(c=new xt(new ca(2,2),new pr({name:"BackgroundMaterial",uniforms:Zc(Jr.background.uniforms),vertexShader:Jr.background.vertexShader,fragmentShader:Jr.background.fragmentShader,side:qr,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=w,c.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,c.material.toneMapped=Ut.getTransfer(w.colorSpace)!==qt,w.matrixAutoUpdate===!0&&w.updateMatrix(),c.material.uniforms.uvTransform.value.copy(w.matrix),(f!==w||p!==w.version||m!==n.toneMapping)&&(c.material.needsUpdate=!0,f=w,p=w.version,m=n.toneMapping),c.layers.enableAll(),S.unshift(c,c.geometry,c.material,0,0,null))}function g(S,_){S.getRGB(pp,BI(n)),i.buffers.color.setClear(pp.r,pp.g,pp.b,_,o)}return{getClearColor:function(){return a},setClearColor:function(S,_=1){a.set(S),l=_,g(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(S){l=S,g(a,l)},render:A,addToRenderList:x}}function TO(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=p(null);let s=r,o=!1;function a(C,U,j,K,te){let de=!1;const re=f(K,j,U);s!==re&&(s=re,c(s.object)),de=m(C,K,j,te),de&&v(C,K,j,te),te!==null&&e.update(te,n.ELEMENT_ARRAY_BUFFER),(de||o)&&(o=!1,w(C,U,j,K),te!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(te).buffer))}function l(){return n.createVertexArray()}function c(C){return n.bindVertexArray(C)}function h(C){return n.deleteVertexArray(C)}function f(C,U,j){const K=j.wireframe===!0;let te=i[C.id];te===void 0&&(te={},i[C.id]=te);let de=te[U.id];de===void 0&&(de={},te[U.id]=de);let re=de[K];return re===void 0&&(re=p(l()),de[K]=re),re}function p(C){const U=[],j=[],K=[];for(let te=0;te<t;te++)U[te]=0,j[te]=0,K[te]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:U,enabledAttributes:j,attributeDivisors:K,object:C,attributes:{},index:null}}function m(C,U,j,K){const te=s.attributes,de=U.attributes;let re=0;const ge=j.getAttributes();for(const F in ge)if(ge[F].location>=0){const W=te[F];let Y=de[F];if(Y===void 0&&(F==="instanceMatrix"&&C.instanceMatrix&&(Y=C.instanceMatrix),F==="instanceColor"&&C.instanceColor&&(Y=C.instanceColor)),W===void 0||W.attribute!==Y||Y&&W.data!==Y.data)return!0;re++}return s.attributesNum!==re||s.index!==K}function v(C,U,j,K){const te={},de=U.attributes;let re=0;const ge=j.getAttributes();for(const F in ge)if(ge[F].location>=0){let W=de[F];W===void 0&&(F==="instanceMatrix"&&C.instanceMatrix&&(W=C.instanceMatrix),F==="instanceColor"&&C.instanceColor&&(W=C.instanceColor));const Y={};Y.attribute=W,W&&W.data&&(Y.data=W.data),te[F]=Y,re++}s.attributes=te,s.attributesNum=re,s.index=K}function A(){const C=s.newAttributes;for(let U=0,j=C.length;U<j;U++)C[U]=0}function x(C){g(C,0)}function g(C,U){const j=s.newAttributes,K=s.enabledAttributes,te=s.attributeDivisors;j[C]=1,K[C]===0&&(n.enableVertexAttribArray(C),K[C]=1),te[C]!==U&&(n.vertexAttribDivisor(C,U),te[C]=U)}function S(){const C=s.newAttributes,U=s.enabledAttributes;for(let j=0,K=U.length;j<K;j++)U[j]!==C[j]&&(n.disableVertexAttribArray(j),U[j]=0)}function _(C,U,j,K,te,de,re){re===!0?n.vertexAttribIPointer(C,U,j,te,de):n.vertexAttribPointer(C,U,j,K,te,de)}function w(C,U,j,K){A();const te=K.attributes,de=j.getAttributes(),re=U.defaultAttributeValues;for(const ge in de){const F=de[ge];if(F.location>=0){let k=te[ge];if(k===void 0&&(ge==="instanceMatrix"&&C.instanceMatrix&&(k=C.instanceMatrix),ge==="instanceColor"&&C.instanceColor&&(k=C.instanceColor)),k!==void 0){const W=k.normalized,Y=k.itemSize,se=e.get(k);if(se===void 0)continue;const Ce=se.buffer,q=se.type,ie=se.bytesPerElement,he=q===n.INT||q===n.UNSIGNED_INT||k.gpuType===Xg;if(k.isInterleavedBufferAttribute){const ae=k.data,Le=ae.stride,We=k.offset;if(ae.isInstancedInterleavedBuffer){for(let qe=0;qe<F.locationSize;qe++)g(F.location+qe,ae.meshPerAttribute);C.isInstancedMesh!==!0&&K._maxInstanceCount===void 0&&(K._maxInstanceCount=ae.meshPerAttribute*ae.count)}else for(let qe=0;qe<F.locationSize;qe++)x(F.location+qe);n.bindBuffer(n.ARRAY_BUFFER,Ce);for(let qe=0;qe<F.locationSize;qe++)_(F.location+qe,Y/F.locationSize,q,W,Le*ie,(We+Y/F.locationSize*qe)*ie,he)}else{if(k.isInstancedBufferAttribute){for(let ae=0;ae<F.locationSize;ae++)g(F.location+ae,k.meshPerAttribute);C.isInstancedMesh!==!0&&K._maxInstanceCount===void 0&&(K._maxInstanceCount=k.meshPerAttribute*k.count)}else for(let ae=0;ae<F.locationSize;ae++)x(F.location+ae);n.bindBuffer(n.ARRAY_BUFFER,Ce);for(let ae=0;ae<F.locationSize;ae++)_(F.location+ae,Y/F.locationSize,q,W,Y*ie,Y/F.locationSize*ae*ie,he)}}else if(re!==void 0){const W=re[ge];if(W!==void 0)switch(W.length){case 2:n.vertexAttrib2fv(F.location,W);break;case 3:n.vertexAttrib3fv(F.location,W);break;case 4:n.vertexAttrib4fv(F.location,W);break;default:n.vertexAttrib1fv(F.location,W)}}}}S()}function I(){B();for(const C in i){const U=i[C];for(const j in U){const K=U[j];for(const te in K)h(K[te].object),delete K[te];delete U[j]}delete i[C]}}function T(C){if(i[C.id]===void 0)return;const U=i[C.id];for(const j in U){const K=U[j];for(const te in K)h(K[te].object),delete K[te];delete U[j]}delete i[C.id]}function P(C){for(const U in i){const j=i[U];if(j[C.id]===void 0)continue;const K=j[C.id];for(const te in K)h(K[te].object),delete K[te];delete j[C.id]}}function B(){R(),o=!0,s!==r&&(s=r,c(s.object))}function R(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:B,resetDefaultState:R,dispose:I,releaseStatesOfGeometry:T,releaseStatesOfProgram:P,initAttributes:A,enableAttribute:x,disableUnusedAttributes:S}}function RO(n,e,t){let i;function r(c){i=c}function s(c,h){n.drawArrays(i,c,h),t.update(h,i,1)}function o(c,h,f){f!==0&&(n.drawArraysInstanced(i,c,h,f),t.update(h,i,f))}function a(c,h,f){if(f===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,c,0,h,0,f);let m=0;for(let v=0;v<f;v++)m+=h[v];t.update(m,i,1)}function l(c,h,f,p){if(f===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let v=0;v<c.length;v++)o(c[v],h[v],p[v]);else{m.multiDrawArraysInstancedWEBGL(i,c,0,h,0,p,0,f);let v=0;for(let A=0;A<f;A++)v+=h[A]*p[A];t.update(v,i,1)}}this.setMode=r,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function IO(n,e,t,i){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const P=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(P){return!(P!==Ei&&i.convert(P)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(P){const B=P===aa&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(P!==Zr&&i.convert(P)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&P!==Fi&&!B)}function l(P){if(P==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";P="mediump"}return P==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=t.precision!==void 0?t.precision:"highp";const h=l(c);h!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",h,"instead."),c=h);const f=t.logarithmicDepthBuffer===!0,p=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),m=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),v=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),A=n.getParameter(n.MAX_TEXTURE_SIZE),x=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),g=n.getParameter(n.MAX_VERTEX_ATTRIBS),S=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),_=n.getParameter(n.MAX_VARYING_VECTORS),w=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),I=v>0,T=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:c,logarithmicDepthBuffer:f,reverseDepthBuffer:p,maxTextures:m,maxVertexTextures:v,maxTextureSize:A,maxCubemapSize:x,maxAttributes:g,maxVertexUniforms:S,maxVaryings:_,maxFragmentUniforms:w,vertexTextures:I,maxSamples:T}}function PO(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new Ir,a=new Mt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,p){const m=f.length!==0||p||i!==0||r;return r=p,i=f.length,m},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(f,p){t=h(f,p,0)},this.setState=function(f,p,m){const v=f.clippingPlanes,A=f.clipIntersection,x=f.clipShadows,g=n.get(f);if(!r||v===null||v.length===0||s&&!x)s?h(null):c();else{const S=s?0:i,_=S*4;let w=g.clippingState||null;l.value=w,w=h(v,p,_,m);for(let I=0;I!==_;++I)w[I]=t[I];g.clippingState=w,this.numIntersection=A?this.numPlanes:0,this.numPlanes+=S}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function h(f,p,m,v){const A=f!==null?f.length:0;let x=null;if(A!==0){if(x=l.value,v!==!0||x===null){const g=m+A*4,S=p.matrixWorldInverse;a.getNormalMatrix(S),(x===null||x.length<g)&&(x=new Float32Array(g));for(let _=0,w=m;_!==A;++_,w+=4)o.copy(f[_]).applyMatrix4(S,a),o.normal.toArray(x,w),x[w+3]=o.constant}l.value=x,l.needsUpdate=!0}return e.numPlanes=A,e.numIntersection=0,x}}function BO(n){let e=new WeakMap;function t(o,a){return a===Zd?o.mapping=io:a===$d&&(o.mapping=ea),o}function i(o){if(o&&o.isTexture){const a=o.mapping;if(a===Zd||a===$d)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new NI(l.height);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",r),t(c.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class ys extends Sh{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=h*this.view.offsetY,l=a-h*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const bc=4,Kw=[.125,.215,.35,.446,.526,.582],Wa=20,My=new ys,Yw=new Ee;let wy=null,Ey=0,Cy=0,by=!1;const Va=(1+Math.sqrt(5))/2,rc=1/Va,Qw=[new D(-Va,rc,0),new D(Va,rc,0),new D(-rc,0,Va),new D(rc,0,Va),new D(0,Va,-rc),new D(0,Va,rc),new D(-1,1,-1),new D(1,1,-1),new D(-1,1,1),new D(1,1,1)];class S_{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){wy=this._renderer.getRenderTarget(),Ey=this._renderer.getActiveCubeFace(),Cy=this._renderer.getActiveMipmapLevel(),by=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=$w(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Zw(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(wy,Ey,Cy),this._renderer.xr.enabled=by,e.scissorTest=!1,mp(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===io||e.mapping===ea?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),wy=this._renderer.getRenderTarget(),Ey=this._renderer.getActiveCubeFace(),Cy=this._renderer.getActiveMipmapLevel(),by=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:en,minFilter:en,generateMipmaps:!1,type:aa,format:Ei,colorSpace:bi,depthBuffer:!1},r=qw(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=qw(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=LO(s)),this._blurMaterial=DO(s,e,t)}return r}_compileMaterial(e){const t=new xt(this._lodPlanes[0],e);this._renderer.compile(t,My)}_sceneToCubeUV(e,t,i,r){const a=new yn(90,1,t,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],h=this._renderer,f=h.autoClear,p=h.toneMapping;h.getClearColor(Yw),h.toneMapping=vs,h.autoClear=!1;const m=new Cn({name:"PMREM.Background",side:oi,depthWrite:!1,depthTest:!1}),v=new xt(new Nr,m);let A=!1;const x=e.background;x?x.isColor&&(m.color.copy(x),e.background=null,A=!0):(m.color.copy(Yw),A=!0);for(let g=0;g<6;g++){const S=g%3;S===0?(a.up.set(0,l[g],0),a.lookAt(c[g],0,0)):S===1?(a.up.set(0,0,l[g]),a.lookAt(0,c[g],0)):(a.up.set(0,l[g],0),a.lookAt(0,0,c[g]));const _=this._cubeSize;mp(r,S*_,g>2?_:0,_,_),h.setRenderTarget(r),A&&h.render(v,a),h.render(e,a)}v.geometry.dispose(),v.material.dispose(),h.toneMapping=p,h.autoClear=f,e.background=x}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===io||e.mapping===ea;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=$w()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Zw());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new xt(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;mp(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,My)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=Qw[(r-s-1)%Qw.length];this._blur(e,s-1,s,o,a)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const h=3,f=new xt(this._lodPlanes[r],c),p=c.uniforms,m=this._sizeLods[i]-1,v=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*Wa-1),A=s/v,x=isFinite(s)?1+Math.floor(h*A):Wa;x>Wa&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${x} samples when the maximum is set to ${Wa}`);const g=[];let S=0;for(let P=0;P<Wa;++P){const B=P/A,R=Math.exp(-B*B/2);g.push(R),P===0?S+=R:P<x&&(S+=2*R)}for(let P=0;P<g.length;P++)g[P]=g[P]/S;p.envMap.value=e.texture,p.samples.value=x,p.weights.value=g,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:_}=this;p.dTheta.value=v,p.mipInt.value=_-i;const w=this._sizeLods[r],I=3*w*(r>_-bc?r-_+bc:0),T=4*(this._cubeSize-w);mp(t,I,T,3*w,2*w),l.setRenderTarget(t),l.render(f,My)}}function LO(n){const e=[],t=[],i=[];let r=n;const s=n-bc+1+Kw.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>n-bc?l=Kw[o-n+bc-1]:o===0&&(l=0),i.push(l);const c=1/(a-2),h=-c,f=1+c,p=[h,h,f,h,f,f,h,h,f,f,h,f],m=6,v=6,A=3,x=2,g=1,S=new Float32Array(A*v*m),_=new Float32Array(x*v*m),w=new Float32Array(g*v*m);for(let T=0;T<m;T++){const P=T%3*2/3-1,B=T>2?0:-1,R=[P,B,0,P+2/3,B,0,P+2/3,B+1,0,P,B,0,P+2/3,B+1,0,P,B+1,0];S.set(R,A*v*T),_.set(p,x*v*T);const C=[T,T,T,T,T,T];w.set(C,g*v*T)}const I=new gt;I.setAttribute("position",new yt(S,A)),I.setAttribute("uv",new yt(_,x)),I.setAttribute("faceIndex",new yt(w,g)),e.push(I),r>bc&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function qw(n,e,t){const i=new ci(n,e,t);return i.texture.mapping=au,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function mp(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function DO(n,e,t){const i=new Float32Array(Wa),r=new D(0,1,0);return new pr({name:"SphericalGaussianBlur",defines:{n:Wa,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:ZA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Qs,depthTest:!1,depthWrite:!1})}function Zw(){return new pr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:ZA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Qs,depthTest:!1,depthWrite:!1})}function $w(){return new pr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:ZA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Qs,depthTest:!1,depthWrite:!1})}function ZA(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function NO(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){const l=a.mapping,c=l===Zd||l===$d,h=l===io||l===ea;if(c||h){let f=e.get(a);const p=f!==void 0?f.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==p)return t===null&&(t=new S_(n)),f=c?t.fromEquirectangular(a,f):t.fromCubemap(a,f),f.texture.pmremVersion=a.pmremVersion,e.set(a,f),f.texture;if(f!==void 0)return f.texture;{const m=a.image;return c&&m&&m.height>0||h&&m&&r(m)?(t===null&&(t=new S_(n)),f=c?t.fromEquirectangular(a):t.fromCubemap(a),f.texture.pmremVersion=a.pmremVersion,e.set(a,f),a.addEventListener("dispose",s),f.texture):null}}}return a}function r(a){let l=0;const c=6;for(let h=0;h<c;h++)a[h]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function FO(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return r===null&&fd("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function UO(n,e,t,i){const r={},s=new WeakMap;function o(f){const p=f.target;p.index!==null&&e.remove(p.index);for(const v in p.attributes)e.remove(p.attributes[v]);for(const v in p.morphAttributes){const A=p.morphAttributes[v];for(let x=0,g=A.length;x<g;x++)e.remove(A[x])}p.removeEventListener("dispose",o),delete r[p.id];const m=s.get(p);m&&(e.remove(m),s.delete(p)),i.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,t.memory.geometries--}function a(f,p){return r[p.id]===!0||(p.addEventListener("dispose",o),r[p.id]=!0,t.memory.geometries++),p}function l(f){const p=f.attributes;for(const v in p)e.update(p[v],n.ARRAY_BUFFER);const m=f.morphAttributes;for(const v in m){const A=m[v];for(let x=0,g=A.length;x<g;x++)e.update(A[x],n.ARRAY_BUFFER)}}function c(f){const p=[],m=f.index,v=f.attributes.position;let A=0;if(m!==null){const S=m.array;A=m.version;for(let _=0,w=S.length;_<w;_+=3){const I=S[_+0],T=S[_+1],P=S[_+2];p.push(I,T,T,P,P,I)}}else if(v!==void 0){const S=v.array;A=v.version;for(let _=0,w=S.length/3-1;_<w;_+=3){const I=_+0,T=_+1,P=_+2;p.push(I,T,T,P,P,I)}}else return;const x=new(bI(p)?qA:QA)(p,1);x.version=A;const g=s.get(f);g&&e.remove(g),s.set(f,x)}function h(f){const p=s.get(f);if(p){const m=f.index;m!==null&&p.version<m.version&&c(f)}else c(f);return s.get(f)}return{get:a,update:l,getWireframeAttribute:h}}function OO(n,e,t){let i;function r(p){i=p}let s,o;function a(p){s=p.type,o=p.bytesPerElement}function l(p,m){n.drawElements(i,m,s,p*o),t.update(m,i,1)}function c(p,m,v){v!==0&&(n.drawElementsInstanced(i,m,s,p*o,v),t.update(m,i,v))}function h(p,m,v){if(v===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,m,0,s,p,0,v);let x=0;for(let g=0;g<v;g++)x+=m[g];t.update(x,i,1)}function f(p,m,v,A){if(v===0)return;const x=e.get("WEBGL_multi_draw");if(x===null)for(let g=0;g<p.length;g++)c(p[g]/o,m[g],A[g]);else{x.multiDrawElementsInstancedWEBGL(i,m,0,s,p,0,A,0,v);let g=0;for(let S=0;S<v;S++)g+=m[S]*A[S];t.update(g,i,1)}}this.setMode=r,this.setIndex=a,this.render=l,this.renderInstances=c,this.renderMultiDraw=h,this.renderMultiDrawInstances=f}function kO(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function zO(n,e,t){const i=new WeakMap,r=new Vt;function s(o,a,l){const c=o.morphTargetInfluences,h=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,f=h!==void 0?h.length:0;let p=i.get(a);if(p===void 0||p.count!==f){let C=function(){B.dispose(),i.delete(a),a.removeEventListener("dispose",C)};var m=C;p!==void 0&&p.texture.dispose();const v=a.morphAttributes.position!==void 0,A=a.morphAttributes.normal!==void 0,x=a.morphAttributes.color!==void 0,g=a.morphAttributes.position||[],S=a.morphAttributes.normal||[],_=a.morphAttributes.color||[];let w=0;v===!0&&(w=1),A===!0&&(w=2),x===!0&&(w=3);let I=a.attributes.position.count*w,T=1;I>e.maxTextureSize&&(T=Math.ceil(I/e.maxTextureSize),I=e.maxTextureSize);const P=new Float32Array(I*T*4*f),B=new $g(P,I,T,f);B.type=Fi,B.needsUpdate=!0;const R=w*4;for(let U=0;U<f;U++){const j=g[U],K=S[U],te=_[U],de=I*T*4*U;for(let re=0;re<j.count;re++){const ge=re*R;v===!0&&(r.fromBufferAttribute(j,re),P[de+ge+0]=r.x,P[de+ge+1]=r.y,P[de+ge+2]=r.z,P[de+ge+3]=0),A===!0&&(r.fromBufferAttribute(K,re),P[de+ge+4]=r.x,P[de+ge+5]=r.y,P[de+ge+6]=r.z,P[de+ge+7]=0),x===!0&&(r.fromBufferAttribute(te,re),P[de+ge+8]=r.x,P[de+ge+9]=r.y,P[de+ge+10]=r.z,P[de+ge+11]=te.itemSize===4?r.w:1)}}p={count:f,texture:B,size:new ue(I,T)},i.set(a,p),a.addEventListener("dispose",C)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let v=0;for(let x=0;x<c.length;x++)v+=c[x];const A=a.morphTargetsRelative?1:1-v;l.getUniforms().setValue(n,"morphTargetBaseInfluence",A),l.getUniforms().setValue(n,"morphTargetInfluences",c)}l.getUniforms().setValue(n,"morphTargetsTexture",p.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",p.size)}return{update:s}}function HO(n,e,t,i){let r=new WeakMap;function s(l){const c=i.render.frame,h=l.geometry,f=e.get(l,h);if(r.get(f)!==c&&(e.update(f),r.set(f,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const p=l.skeleton;r.get(p)!==c&&(p.update(),r.set(p,c))}return f}function o(){r=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}class Eh extends tn{constructor(e,t,i,r,s,o,a,l,c,h=ol){if(h!==ol&&h!==yl)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&h===ol&&(i=ro),i===void 0&&h===yl&&(i=vl),super(null,r,s,o,a,l,h,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Hn,this.minFilter=l!==void 0?l:Hn,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const UI=new tn,eE=new Eh(1,1),OI=new $g,kI=new YA,zI=new Mh,tE=[],nE=[],iE=new Float32Array(16),rE=new Float32Array(9),sE=new Float32Array(4);function lu(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=tE[r];if(s===void 0&&(s=new Float32Array(r),tE[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Jn(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Kn(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function e0(n,e){let t=nE[e];t===void 0&&(t=new Int32Array(e),nE[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function GO(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function VO(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Jn(t,e))return;n.uniform2fv(this.addr,e),Kn(t,e)}}function WO(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Jn(t,e))return;n.uniform3fv(this.addr,e),Kn(t,e)}}function jO(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Jn(t,e))return;n.uniform4fv(this.addr,e),Kn(t,e)}}function XO(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Jn(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Kn(t,e)}else{if(Jn(t,i))return;sE.set(i),n.uniformMatrix2fv(this.addr,!1,sE),Kn(t,i)}}function JO(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Jn(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Kn(t,e)}else{if(Jn(t,i))return;rE.set(i),n.uniformMatrix3fv(this.addr,!1,rE),Kn(t,i)}}function KO(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Jn(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Kn(t,e)}else{if(Jn(t,i))return;iE.set(i),n.uniformMatrix4fv(this.addr,!1,iE),Kn(t,i)}}function YO(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function QO(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Jn(t,e))return;n.uniform2iv(this.addr,e),Kn(t,e)}}function qO(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Jn(t,e))return;n.uniform3iv(this.addr,e),Kn(t,e)}}function ZO(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Jn(t,e))return;n.uniform4iv(this.addr,e),Kn(t,e)}}function $O(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function ek(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Jn(t,e))return;n.uniform2uiv(this.addr,e),Kn(t,e)}}function tk(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Jn(t,e))return;n.uniform3uiv(this.addr,e),Kn(t,e)}}function nk(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Jn(t,e))return;n.uniform4uiv(this.addr,e),Kn(t,e)}}function ik(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let s;this.type===n.SAMPLER_2D_SHADOW?(eE.compareFunction=XA,s=eE):s=UI,t.setTexture2D(e||s,r)}function rk(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||kI,r)}function sk(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||zI,r)}function ok(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||OI,r)}function ak(n){switch(n){case 5126:return GO;case 35664:return VO;case 35665:return WO;case 35666:return jO;case 35674:return XO;case 35675:return JO;case 35676:return KO;case 5124:case 35670:return YO;case 35667:case 35671:return QO;case 35668:case 35672:return qO;case 35669:case 35673:return ZO;case 5125:return $O;case 36294:return ek;case 36295:return tk;case 36296:return nk;case 35678:case 36198:case 36298:case 36306:case 35682:return ik;case 35679:case 36299:case 36307:return rk;case 35680:case 36300:case 36308:case 36293:return sk;case 36289:case 36303:case 36311:case 36292:return ok}}function lk(n,e){n.uniform1fv(this.addr,e)}function ck(n,e){const t=lu(e,this.size,2);n.uniform2fv(this.addr,t)}function uk(n,e){const t=lu(e,this.size,3);n.uniform3fv(this.addr,t)}function dk(n,e){const t=lu(e,this.size,4);n.uniform4fv(this.addr,t)}function hk(n,e){const t=lu(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function fk(n,e){const t=lu(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function pk(n,e){const t=lu(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function mk(n,e){n.uniform1iv(this.addr,e)}function gk(n,e){n.uniform2iv(this.addr,e)}function vk(n,e){n.uniform3iv(this.addr,e)}function yk(n,e){n.uniform4iv(this.addr,e)}function xk(n,e){n.uniform1uiv(this.addr,e)}function _k(n,e){n.uniform2uiv(this.addr,e)}function Ak(n,e){n.uniform3uiv(this.addr,e)}function Sk(n,e){n.uniform4uiv(this.addr,e)}function Mk(n,e,t){const i=this.cache,r=e.length,s=e0(t,r);Jn(i,s)||(n.uniform1iv(this.addr,s),Kn(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||UI,s[o])}function wk(n,e,t){const i=this.cache,r=e.length,s=e0(t,r);Jn(i,s)||(n.uniform1iv(this.addr,s),Kn(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||kI,s[o])}function Ek(n,e,t){const i=this.cache,r=e.length,s=e0(t,r);Jn(i,s)||(n.uniform1iv(this.addr,s),Kn(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||zI,s[o])}function Ck(n,e,t){const i=this.cache,r=e.length,s=e0(t,r);Jn(i,s)||(n.uniform1iv(this.addr,s),Kn(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||OI,s[o])}function bk(n){switch(n){case 5126:return lk;case 35664:return ck;case 35665:return uk;case 35666:return dk;case 35674:return hk;case 35675:return fk;case 35676:return pk;case 5124:case 35670:return mk;case 35667:case 35671:return gk;case 35668:case 35672:return vk;case 35669:case 35673:return yk;case 5125:return xk;case 36294:return _k;case 36295:return Ak;case 36296:return Sk;case 35678:case 36198:case 36298:case 36306:case 35682:return Mk;case 35679:case 36299:case 36307:return wk;case 35680:case 36300:case 36308:case 36293:return Ek;case 36289:case 36303:case 36311:case 36292:return Ck}}class Tk{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=ak(t.type)}}class Rk{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=bk(t.type)}}class Ik{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const Ty=/(\w+)(\])?(\[|\.)?/g;function oE(n,e){n.seq.push(e),n.map[e.id]=e}function Pk(n,e,t){const i=n.name,r=i.length;for(Ty.lastIndex=0;;){const s=Ty.exec(i),o=Ty.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===r){oE(t,c===void 0?new Tk(a,n,e):new Rk(a,n,e));break}else{let f=t.map[a];f===void 0&&(f=new Ik(a),oE(t,f)),t=f}}}class dm{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);Pk(s,o,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function aE(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const Bk=37297;let Lk=0;function Dk(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}const lE=new Mt;function Nk(n){Ut._getMatrix(lE,Ut.workingColorSpace,n);const e=`mat3( ${lE.elements.map(t=>t.toFixed(4))} )`;switch(Ut.getTransfer(n)){case Ah:return[e,"LinearTransferOETF"];case qt:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function cE(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+Dk(n.getShaderSource(e),o)}else return r}function Fk(n,e){const t=Nk(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function Uk(n,e){let t;switch(e){case aI:t="Linear";break;case lI:t="Reinhard";break;case cI:t="Cineon";break;case DA:t="ACESFilmic";break;case dI:t="AgX";break;case hI:t="Neutral";break;case uI:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const gp=new D;function Ok(){Ut.getLuminanceCoefficients(gp);const n=gp.x.toFixed(4),e=gp.y.toFixed(4),t=gp.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function kk(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(md).join(`
`)}function zk(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function Hk(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function md(n){return n!==""}function uE(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function dE(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Gk=/^[ \t]*#include +<([\w\d./]+)>/gm;function M_(n){return n.replace(Gk,Wk)}const Vk=new Map;function Wk(n,e){let t=bt[e];if(t===void 0){const i=Vk.get(e);if(i!==void 0)t=bt[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return M_(t)}const jk=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function hE(n){return n.replace(jk,Xk)}function Xk(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function fE(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Jk(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===Wg?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Ed?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Wr&&(e="SHADOWMAP_TYPE_VSM"),e}function Kk(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case io:case ea:e="ENVMAP_TYPE_CUBE";break;case au:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Yk(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case ea:e="ENVMAP_MODE_REFRACTION";break}return e}function Qk(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case vh:e="ENVMAP_BLENDING_MULTIPLY";break;case sI:e="ENVMAP_BLENDING_MIX";break;case oI:e="ENVMAP_BLENDING_ADD";break}return e}function qk(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function Zk(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=Jk(t),c=Kk(t),h=Yk(t),f=Qk(t),p=qk(t),m=kk(t),v=zk(s),A=r.createProgram();let x,g,S=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(x=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(md).join(`
`),x.length>0&&(x+=`
`),g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(md).join(`
`),g.length>0&&(g+=`
`)):(x=[fE(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(md).join(`
`),g=[fE(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+h:"",t.envMap?"#define "+f:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==vs?"#define TONE_MAPPING":"",t.toneMapping!==vs?bt.tonemapping_pars_fragment:"",t.toneMapping!==vs?Uk("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",bt.colorspace_pars_fragment,Fk("linearToOutputTexel",t.outputColorSpace),Ok(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(md).join(`
`)),o=M_(o),o=uE(o,t),o=dE(o,t),a=M_(a),a=uE(a,t),a=dE(a,t),o=hE(o),a=hE(a),t.isRawShaderMaterial!==!0&&(S=`#version 300 es
`,x=[m,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+x,g=["#define varying in",t.glslVersion===A_?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===A_?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const _=S+x+o,w=S+g+a,I=aE(r,r.VERTEX_SHADER,_),T=aE(r,r.FRAGMENT_SHADER,w);r.attachShader(A,I),r.attachShader(A,T),t.index0AttributeName!==void 0?r.bindAttribLocation(A,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(A,0,"position"),r.linkProgram(A);function P(U){if(n.debug.checkShaderErrors){const j=r.getProgramInfoLog(A).trim(),K=r.getShaderInfoLog(I).trim(),te=r.getShaderInfoLog(T).trim();let de=!0,re=!0;if(r.getProgramParameter(A,r.LINK_STATUS)===!1)if(de=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,A,I,T);else{const ge=cE(r,I,"vertex"),F=cE(r,T,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(A,r.VALIDATE_STATUS)+`

Material Name: `+U.name+`
Material Type: `+U.type+`

Program Info Log: `+j+`
`+ge+`
`+F)}else j!==""?console.warn("THREE.WebGLProgram: Program Info Log:",j):(K===""||te==="")&&(re=!1);re&&(U.diagnostics={runnable:de,programLog:j,vertexShader:{log:K,prefix:x},fragmentShader:{log:te,prefix:g}})}r.deleteShader(I),r.deleteShader(T),B=new dm(r,A),R=Hk(r,A)}let B;this.getUniforms=function(){return B===void 0&&P(this),B};let R;this.getAttributes=function(){return R===void 0&&P(this),R};let C=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return C===!1&&(C=r.getProgramParameter(A,Bk)),C},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(A),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=Lk++,this.cacheKey=e,this.usedTimes=1,this.program=A,this.vertexShader=I,this.fragmentShader=T,this}let $k=0;class ez{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new tz(e),t.set(e,i)),i}}class tz{constructor(e){this.id=$k++,this.code=e,this.usedTimes=0}}function nz(n,e,t,i,r,s,o){const a=new ll,l=new ez,c=new Set,h=[],f=r.logarithmicDepthBuffer,p=r.vertexTextures;let m=r.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function A(R){return c.add(R),R===0?"uv":`uv${R}`}function x(R,C,U,j,K){const te=j.fog,de=K.geometry,re=R.isMeshStandardMaterial?j.environment:null,ge=(R.isMeshStandardMaterial?t:e).get(R.envMap||re),F=ge&&ge.mapping===au?ge.image.height:null,k=v[R.type];R.precision!==null&&(m=r.getMaxPrecision(R.precision),m!==R.precision&&console.warn("THREE.WebGLProgram.getParameters:",R.precision,"not supported, using",m,"instead."));const W=de.morphAttributes.position||de.morphAttributes.normal||de.morphAttributes.color,Y=W!==void 0?W.length:0;let se=0;de.morphAttributes.position!==void 0&&(se=1),de.morphAttributes.normal!==void 0&&(se=2),de.morphAttributes.color!==void 0&&(se=3);let Ce,q,ie,he;if(k){const Dt=Jr[k];Ce=Dt.vertexShader,q=Dt.fragmentShader}else Ce=R.vertexShader,q=R.fragmentShader,l.update(R),ie=l.getVertexShaderID(R),he=l.getFragmentShaderID(R);const ae=n.getRenderTarget(),Le=n.state.buffers.depth.getReversed(),We=K.isInstancedMesh===!0,qe=K.isBatchedMesh===!0,ke=!!R.map,me=!!R.matcap,xe=!!ge,V=!!R.aoMap,Je=!!R.lightMap,Me=!!R.bumpMap,De=!!R.normalMap,Ie=!!R.displacementMap,ot=!!R.emissiveMap,Ne=!!R.metalnessMap,z=!!R.roughnessMap,N=R.anisotropy>0,ne=R.clearcoat>0,ye=R.dispersion>0,we=R.iridescence>0,Ae=R.sheen>0,tt=R.transmission>0,Fe=N&&!!R.anisotropyMap,Ke=ne&&!!R.clearcoatMap,Tt=ne&&!!R.clearcoatNormalMap,be=ne&&!!R.clearcoatRoughnessMap,Ze=we&&!!R.iridescenceMap,ut=we&&!!R.iridescenceThicknessMap,mt=Ae&&!!R.sheenColorMap,Ye=Ae&&!!R.sheenRoughnessMap,J=!!R.specularMap,_e=!!R.specularColorMap,ze=!!R.specularIntensityMap,X=tt&&!!R.transmissionMap,Te=tt&&!!R.thicknessMap,fe=!!R.gradientMap,Se=!!R.alphaMap,je=R.alphaTest>0,Oe=!!R.alphaHash,ct=!!R.extensions;let Wt=vs;R.toneMapped&&(ae===null||ae.isXRRenderTarget===!0)&&(Wt=n.toneMapping);const an={shaderID:k,shaderType:R.type,shaderName:R.name,vertexShader:Ce,fragmentShader:q,defines:R.defines,customVertexShaderID:ie,customFragmentShaderID:he,isRawShaderMaterial:R.isRawShaderMaterial===!0,glslVersion:R.glslVersion,precision:m,batching:qe,batchingColor:qe&&K._colorsTexture!==null,instancing:We,instancingColor:We&&K.instanceColor!==null,instancingMorph:We&&K.morphTexture!==null,supportsVertexTextures:p,outputColorSpace:ae===null?n.outputColorSpace:ae.isXRRenderTarget===!0?ae.texture.colorSpace:bi,alphaToCoverage:!!R.alphaToCoverage,map:ke,matcap:me,envMap:xe,envMapMode:xe&&ge.mapping,envMapCubeUVHeight:F,aoMap:V,lightMap:Je,bumpMap:Me,normalMap:De,displacementMap:p&&Ie,emissiveMap:ot,normalMapObjectSpace:De&&R.normalMapType===xI,normalMapTangentSpace:De&&R.normalMapType===la,metalnessMap:Ne,roughnessMap:z,anisotropy:N,anisotropyMap:Fe,clearcoat:ne,clearcoatMap:Ke,clearcoatNormalMap:Tt,clearcoatRoughnessMap:be,dispersion:ye,iridescence:we,iridescenceMap:Ze,iridescenceThicknessMap:ut,sheen:Ae,sheenColorMap:mt,sheenRoughnessMap:Ye,specularMap:J,specularColorMap:_e,specularIntensityMap:ze,transmission:tt,transmissionMap:X,thicknessMap:Te,gradientMap:fe,opaque:R.transparent===!1&&R.blending===rl&&R.alphaToCoverage===!1,alphaMap:Se,alphaTest:je,alphaHash:Oe,combine:R.combine,mapUv:ke&&A(R.map.channel),aoMapUv:V&&A(R.aoMap.channel),lightMapUv:Je&&A(R.lightMap.channel),bumpMapUv:Me&&A(R.bumpMap.channel),normalMapUv:De&&A(R.normalMap.channel),displacementMapUv:Ie&&A(R.displacementMap.channel),emissiveMapUv:ot&&A(R.emissiveMap.channel),metalnessMapUv:Ne&&A(R.metalnessMap.channel),roughnessMapUv:z&&A(R.roughnessMap.channel),anisotropyMapUv:Fe&&A(R.anisotropyMap.channel),clearcoatMapUv:Ke&&A(R.clearcoatMap.channel),clearcoatNormalMapUv:Tt&&A(R.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:be&&A(R.clearcoatRoughnessMap.channel),iridescenceMapUv:Ze&&A(R.iridescenceMap.channel),iridescenceThicknessMapUv:ut&&A(R.iridescenceThicknessMap.channel),sheenColorMapUv:mt&&A(R.sheenColorMap.channel),sheenRoughnessMapUv:Ye&&A(R.sheenRoughnessMap.channel),specularMapUv:J&&A(R.specularMap.channel),specularColorMapUv:_e&&A(R.specularColorMap.channel),specularIntensityMapUv:ze&&A(R.specularIntensityMap.channel),transmissionMapUv:X&&A(R.transmissionMap.channel),thicknessMapUv:Te&&A(R.thicknessMap.channel),alphaMapUv:Se&&A(R.alphaMap.channel),vertexTangents:!!de.attributes.tangent&&(De||N),vertexColors:R.vertexColors,vertexAlphas:R.vertexColors===!0&&!!de.attributes.color&&de.attributes.color.itemSize===4,pointsUvs:K.isPoints===!0&&!!de.attributes.uv&&(ke||Se),fog:!!te,useFog:R.fog===!0,fogExp2:!!te&&te.isFogExp2,flatShading:R.flatShading===!0,sizeAttenuation:R.sizeAttenuation===!0,logarithmicDepthBuffer:f,reverseDepthBuffer:Le,skinning:K.isSkinnedMesh===!0,morphTargets:de.morphAttributes.position!==void 0,morphNormals:de.morphAttributes.normal!==void 0,morphColors:de.morphAttributes.color!==void 0,morphTargetsCount:Y,morphTextureStride:se,numDirLights:C.directional.length,numPointLights:C.point.length,numSpotLights:C.spot.length,numSpotLightMaps:C.spotLightMap.length,numRectAreaLights:C.rectArea.length,numHemiLights:C.hemi.length,numDirLightShadows:C.directionalShadowMap.length,numPointLightShadows:C.pointShadowMap.length,numSpotLightShadows:C.spotShadowMap.length,numSpotLightShadowsWithMaps:C.numSpotLightShadowsWithMaps,numLightProbes:C.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:R.dithering,shadowMapEnabled:n.shadowMap.enabled&&U.length>0,shadowMapType:n.shadowMap.type,toneMapping:Wt,decodeVideoTexture:ke&&R.map.isVideoTexture===!0&&Ut.getTransfer(R.map.colorSpace)===qt,decodeVideoTextureEmissive:ot&&R.emissiveMap.isVideoTexture===!0&&Ut.getTransfer(R.emissiveMap.colorSpace)===qt,premultipliedAlpha:R.premultipliedAlpha,doubleSided:R.side===zn,flipSided:R.side===oi,useDepthPacking:R.depthPacking>=0,depthPacking:R.depthPacking||0,index0AttributeName:R.index0AttributeName,extensionClipCullDistance:ct&&R.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(ct&&R.extensions.multiDraw===!0||qe)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:R.customProgramCacheKey()};return an.vertexUv1s=c.has(1),an.vertexUv2s=c.has(2),an.vertexUv3s=c.has(3),c.clear(),an}function g(R){const C=[];if(R.shaderID?C.push(R.shaderID):(C.push(R.customVertexShaderID),C.push(R.customFragmentShaderID)),R.defines!==void 0)for(const U in R.defines)C.push(U),C.push(R.defines[U]);return R.isRawShaderMaterial===!1&&(S(C,R),_(C,R),C.push(n.outputColorSpace)),C.push(R.customProgramCacheKey),C.join()}function S(R,C){R.push(C.precision),R.push(C.outputColorSpace),R.push(C.envMapMode),R.push(C.envMapCubeUVHeight),R.push(C.mapUv),R.push(C.alphaMapUv),R.push(C.lightMapUv),R.push(C.aoMapUv),R.push(C.bumpMapUv),R.push(C.normalMapUv),R.push(C.displacementMapUv),R.push(C.emissiveMapUv),R.push(C.metalnessMapUv),R.push(C.roughnessMapUv),R.push(C.anisotropyMapUv),R.push(C.clearcoatMapUv),R.push(C.clearcoatNormalMapUv),R.push(C.clearcoatRoughnessMapUv),R.push(C.iridescenceMapUv),R.push(C.iridescenceThicknessMapUv),R.push(C.sheenColorMapUv),R.push(C.sheenRoughnessMapUv),R.push(C.specularMapUv),R.push(C.specularColorMapUv),R.push(C.specularIntensityMapUv),R.push(C.transmissionMapUv),R.push(C.thicknessMapUv),R.push(C.combine),R.push(C.fogExp2),R.push(C.sizeAttenuation),R.push(C.morphTargetsCount),R.push(C.morphAttributeCount),R.push(C.numDirLights),R.push(C.numPointLights),R.push(C.numSpotLights),R.push(C.numSpotLightMaps),R.push(C.numHemiLights),R.push(C.numRectAreaLights),R.push(C.numDirLightShadows),R.push(C.numPointLightShadows),R.push(C.numSpotLightShadows),R.push(C.numSpotLightShadowsWithMaps),R.push(C.numLightProbes),R.push(C.shadowMapType),R.push(C.toneMapping),R.push(C.numClippingPlanes),R.push(C.numClipIntersection),R.push(C.depthPacking)}function _(R,C){a.disableAll(),C.supportsVertexTextures&&a.enable(0),C.instancing&&a.enable(1),C.instancingColor&&a.enable(2),C.instancingMorph&&a.enable(3),C.matcap&&a.enable(4),C.envMap&&a.enable(5),C.normalMapObjectSpace&&a.enable(6),C.normalMapTangentSpace&&a.enable(7),C.clearcoat&&a.enable(8),C.iridescence&&a.enable(9),C.alphaTest&&a.enable(10),C.vertexColors&&a.enable(11),C.vertexAlphas&&a.enable(12),C.vertexUv1s&&a.enable(13),C.vertexUv2s&&a.enable(14),C.vertexUv3s&&a.enable(15),C.vertexTangents&&a.enable(16),C.anisotropy&&a.enable(17),C.alphaHash&&a.enable(18),C.batching&&a.enable(19),C.dispersion&&a.enable(20),C.batchingColor&&a.enable(21),R.push(a.mask),a.disableAll(),C.fog&&a.enable(0),C.useFog&&a.enable(1),C.flatShading&&a.enable(2),C.logarithmicDepthBuffer&&a.enable(3),C.reverseDepthBuffer&&a.enable(4),C.skinning&&a.enable(5),C.morphTargets&&a.enable(6),C.morphNormals&&a.enable(7),C.morphColors&&a.enable(8),C.premultipliedAlpha&&a.enable(9),C.shadowMapEnabled&&a.enable(10),C.doubleSided&&a.enable(11),C.flipSided&&a.enable(12),C.useDepthPacking&&a.enable(13),C.dithering&&a.enable(14),C.transmission&&a.enable(15),C.sheen&&a.enable(16),C.opaque&&a.enable(17),C.pointsUvs&&a.enable(18),C.decodeVideoTexture&&a.enable(19),C.decodeVideoTextureEmissive&&a.enable(20),C.alphaToCoverage&&a.enable(21),R.push(a.mask)}function w(R){const C=v[R.type];let U;if(C){const j=Jr[C];U=LI.clone(j.uniforms)}else U=R.uniforms;return U}function I(R,C){let U;for(let j=0,K=h.length;j<K;j++){const te=h[j];if(te.cacheKey===C){U=te,++U.usedTimes;break}}return U===void 0&&(U=new Zk(n,C,R,s),h.push(U)),U}function T(R){if(--R.usedTimes===0){const C=h.indexOf(R);h[C]=h[h.length-1],h.pop(),R.destroy()}}function P(R){l.remove(R)}function B(){l.dispose()}return{getParameters:x,getProgramCacheKey:g,getUniforms:w,acquireProgram:I,releaseProgram:T,releaseShaderCache:P,programs:h,dispose:B}}function iz(){let n=new WeakMap;function e(o){return n.has(o)}function t(o){let a=n.get(o);return a===void 0&&(a={},n.set(o,a)),a}function i(o){n.delete(o)}function r(o,a,l){n.get(o)[a]=l}function s(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:s}}function rz(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function pE(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function mE(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(f,p,m,v,A,x){let g=n[e];return g===void 0?(g={id:f.id,object:f,geometry:p,material:m,groupOrder:v,renderOrder:f.renderOrder,z:A,group:x},n[e]=g):(g.id=f.id,g.object=f,g.geometry=p,g.material=m,g.groupOrder=v,g.renderOrder=f.renderOrder,g.z=A,g.group=x),e++,g}function a(f,p,m,v,A,x){const g=o(f,p,m,v,A,x);m.transmission>0?i.push(g):m.transparent===!0?r.push(g):t.push(g)}function l(f,p,m,v,A,x){const g=o(f,p,m,v,A,x);m.transmission>0?i.unshift(g):m.transparent===!0?r.unshift(g):t.unshift(g)}function c(f,p){t.length>1&&t.sort(f||rz),i.length>1&&i.sort(p||pE),r.length>1&&r.sort(p||pE)}function h(){for(let f=e,p=n.length;f<p;f++){const m=n[f];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:h,sort:c}}function sz(){let n=new WeakMap;function e(i,r){const s=n.get(i);let o;return s===void 0?(o=new mE,n.set(i,[o])):r>=s.length?(o=new mE,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function oz(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new D,color:new Ee};break;case"SpotLight":t={position:new D,direction:new D,color:new Ee,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new D,color:new Ee,distance:0,decay:0};break;case"HemisphereLight":t={direction:new D,skyColor:new Ee,groundColor:new Ee};break;case"RectAreaLight":t={color:new Ee,position:new D,halfWidth:new D,halfHeight:new D};break}return n[e.id]=t,t}}}function az(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ue};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ue};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ue,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let lz=0;function cz(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function uz(n){const e=new oz,t=az(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)i.probe.push(new D);const r=new D,s=new Qe,o=new Qe;function a(c){let h=0,f=0,p=0;for(let R=0;R<9;R++)i.probe[R].set(0,0,0);let m=0,v=0,A=0,x=0,g=0,S=0,_=0,w=0,I=0,T=0,P=0;c.sort(cz);for(let R=0,C=c.length;R<C;R++){const U=c[R],j=U.color,K=U.intensity,te=U.distance,de=U.shadow&&U.shadow.map?U.shadow.map.texture:null;if(U.isAmbientLight)h+=j.r*K,f+=j.g*K,p+=j.b*K;else if(U.isLightProbe){for(let re=0;re<9;re++)i.probe[re].addScaledVector(U.sh.coefficients[re],K);P++}else if(U.isDirectionalLight){const re=e.get(U);if(re.color.copy(U.color).multiplyScalar(U.intensity),U.castShadow){const ge=U.shadow,F=t.get(U);F.shadowIntensity=ge.intensity,F.shadowBias=ge.bias,F.shadowNormalBias=ge.normalBias,F.shadowRadius=ge.radius,F.shadowMapSize=ge.mapSize,i.directionalShadow[m]=F,i.directionalShadowMap[m]=de,i.directionalShadowMatrix[m]=U.shadow.matrix,S++}i.directional[m]=re,m++}else if(U.isSpotLight){const re=e.get(U);re.position.setFromMatrixPosition(U.matrixWorld),re.color.copy(j).multiplyScalar(K),re.distance=te,re.coneCos=Math.cos(U.angle),re.penumbraCos=Math.cos(U.angle*(1-U.penumbra)),re.decay=U.decay,i.spot[A]=re;const ge=U.shadow;if(U.map&&(i.spotLightMap[I]=U.map,I++,ge.updateMatrices(U),U.castShadow&&T++),i.spotLightMatrix[A]=ge.matrix,U.castShadow){const F=t.get(U);F.shadowIntensity=ge.intensity,F.shadowBias=ge.bias,F.shadowNormalBias=ge.normalBias,F.shadowRadius=ge.radius,F.shadowMapSize=ge.mapSize,i.spotShadow[A]=F,i.spotShadowMap[A]=de,w++}A++}else if(U.isRectAreaLight){const re=e.get(U);re.color.copy(j).multiplyScalar(K),re.halfWidth.set(U.width*.5,0,0),re.halfHeight.set(0,U.height*.5,0),i.rectArea[x]=re,x++}else if(U.isPointLight){const re=e.get(U);if(re.color.copy(U.color).multiplyScalar(U.intensity),re.distance=U.distance,re.decay=U.decay,U.castShadow){const ge=U.shadow,F=t.get(U);F.shadowIntensity=ge.intensity,F.shadowBias=ge.bias,F.shadowNormalBias=ge.normalBias,F.shadowRadius=ge.radius,F.shadowMapSize=ge.mapSize,F.shadowCameraNear=ge.camera.near,F.shadowCameraFar=ge.camera.far,i.pointShadow[v]=F,i.pointShadowMap[v]=de,i.pointShadowMatrix[v]=U.shadow.matrix,_++}i.point[v]=re,v++}else if(U.isHemisphereLight){const re=e.get(U);re.skyColor.copy(U.color).multiplyScalar(K),re.groundColor.copy(U.groundColor).multiplyScalar(K),i.hemi[g]=re,g++}}x>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Ue.LTC_FLOAT_1,i.rectAreaLTC2=Ue.LTC_FLOAT_2):(i.rectAreaLTC1=Ue.LTC_HALF_1,i.rectAreaLTC2=Ue.LTC_HALF_2)),i.ambient[0]=h,i.ambient[1]=f,i.ambient[2]=p;const B=i.hash;(B.directionalLength!==m||B.pointLength!==v||B.spotLength!==A||B.rectAreaLength!==x||B.hemiLength!==g||B.numDirectionalShadows!==S||B.numPointShadows!==_||B.numSpotShadows!==w||B.numSpotMaps!==I||B.numLightProbes!==P)&&(i.directional.length=m,i.spot.length=A,i.rectArea.length=x,i.point.length=v,i.hemi.length=g,i.directionalShadow.length=S,i.directionalShadowMap.length=S,i.pointShadow.length=_,i.pointShadowMap.length=_,i.spotShadow.length=w,i.spotShadowMap.length=w,i.directionalShadowMatrix.length=S,i.pointShadowMatrix.length=_,i.spotLightMatrix.length=w+I-T,i.spotLightMap.length=I,i.numSpotLightShadowsWithMaps=T,i.numLightProbes=P,B.directionalLength=m,B.pointLength=v,B.spotLength=A,B.rectAreaLength=x,B.hemiLength=g,B.numDirectionalShadows=S,B.numPointShadows=_,B.numSpotShadows=w,B.numSpotMaps=I,B.numLightProbes=P,i.version=lz++)}function l(c,h){let f=0,p=0,m=0,v=0,A=0;const x=h.matrixWorldInverse;for(let g=0,S=c.length;g<S;g++){const _=c[g];if(_.isDirectionalLight){const w=i.directional[f];w.direction.setFromMatrixPosition(_.matrixWorld),r.setFromMatrixPosition(_.target.matrixWorld),w.direction.sub(r),w.direction.transformDirection(x),f++}else if(_.isSpotLight){const w=i.spot[m];w.position.setFromMatrixPosition(_.matrixWorld),w.position.applyMatrix4(x),w.direction.setFromMatrixPosition(_.matrixWorld),r.setFromMatrixPosition(_.target.matrixWorld),w.direction.sub(r),w.direction.transformDirection(x),m++}else if(_.isRectAreaLight){const w=i.rectArea[v];w.position.setFromMatrixPosition(_.matrixWorld),w.position.applyMatrix4(x),o.identity(),s.copy(_.matrixWorld),s.premultiply(x),o.extractRotation(s),w.halfWidth.set(_.width*.5,0,0),w.halfHeight.set(0,_.height*.5,0),w.halfWidth.applyMatrix4(o),w.halfHeight.applyMatrix4(o),v++}else if(_.isPointLight){const w=i.point[p];w.position.setFromMatrixPosition(_.matrixWorld),w.position.applyMatrix4(x),p++}else if(_.isHemisphereLight){const w=i.hemi[A];w.direction.setFromMatrixPosition(_.matrixWorld),w.direction.transformDirection(x),A++}}}return{setup:a,setupView:l,state:i}}function gE(n){const e=new uz(n),t=[],i=[];function r(h){c.camera=h,t.length=0,i.length=0}function s(h){t.push(h)}function o(h){i.push(h)}function a(){e.setup(t)}function l(h){e.setupView(t,h)}const c={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:c,setupLights:a,setupLightsView:l,pushLight:s,pushShadow:o}}function dz(n){let e=new WeakMap;function t(r,s=0){const o=e.get(r);let a;return o===void 0?(a=new gE(n),e.set(r,[a])):s>=o.length?(a=new gE(n),o.push(a)):a=o[s],a}function i(){e=new WeakMap}return{get:t,dispose:i}}class $A extends mn{static get type(){return"MeshDepthMaterial"}constructor(e){super(),this.isMeshDepthMaterial=!0,this.depthPacking=vI,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class eS extends mn{static get type(){return"MeshDistanceMaterial"}constructor(e){super(),this.isMeshDistanceMaterial=!0,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const hz=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,fz=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function pz(n,e,t){let i=new wh;const r=new ue,s=new ue,o=new Vt,a=new $A({depthPacking:yI}),l=new eS,c={},h=t.maxTextureSize,f={[qr]:oi,[oi]:qr,[zn]:zn},p=new pr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ue},radius:{value:4}},vertexShader:hz,fragmentShader:fz}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const v=new gt;v.setAttribute("position",new yt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const A=new xt(v,p),x=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Wg;let g=this.type;this.render=function(T,P,B){if(x.enabled===!1||x.autoUpdate===!1&&x.needsUpdate===!1||T.length===0)return;const R=n.getRenderTarget(),C=n.getActiveCubeFace(),U=n.getActiveMipmapLevel(),j=n.state;j.setBlending(Qs),j.buffers.color.setClear(1,1,1,1),j.buffers.depth.setTest(!0),j.setScissorTest(!1);const K=g!==Wr&&this.type===Wr,te=g===Wr&&this.type!==Wr;for(let de=0,re=T.length;de<re;de++){const ge=T[de],F=ge.shadow;if(F===void 0){console.warn("THREE.WebGLShadowMap:",ge,"has no shadow.");continue}if(F.autoUpdate===!1&&F.needsUpdate===!1)continue;r.copy(F.mapSize);const k=F.getFrameExtents();if(r.multiply(k),s.copy(F.mapSize),(r.x>h||r.y>h)&&(r.x>h&&(s.x=Math.floor(h/k.x),r.x=s.x*k.x,F.mapSize.x=s.x),r.y>h&&(s.y=Math.floor(h/k.y),r.y=s.y*k.y,F.mapSize.y=s.y)),F.map===null||K===!0||te===!0){const Y=this.type!==Wr?{minFilter:Hn,magFilter:Hn}:{};F.map!==null&&F.map.dispose(),F.map=new ci(r.x,r.y,Y),F.map.texture.name=ge.name+".shadowMap",F.camera.updateProjectionMatrix()}n.setRenderTarget(F.map),n.clear();const W=F.getViewportCount();for(let Y=0;Y<W;Y++){const se=F.getViewport(Y);o.set(s.x*se.x,s.y*se.y,s.x*se.z,s.y*se.w),j.viewport(o),F.updateMatrices(ge,Y),i=F.getFrustum(),w(P,B,F.camera,ge,this.type)}F.isPointLightShadow!==!0&&this.type===Wr&&S(F,B),F.needsUpdate=!1}g=this.type,x.needsUpdate=!1,n.setRenderTarget(R,C,U)};function S(T,P){const B=e.update(A);p.defines.VSM_SAMPLES!==T.blurSamples&&(p.defines.VSM_SAMPLES=T.blurSamples,m.defines.VSM_SAMPLES=T.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),T.mapPass===null&&(T.mapPass=new ci(r.x,r.y)),p.uniforms.shadow_pass.value=T.map.texture,p.uniforms.resolution.value=T.mapSize,p.uniforms.radius.value=T.radius,n.setRenderTarget(T.mapPass),n.clear(),n.renderBufferDirect(P,null,B,p,A,null),m.uniforms.shadow_pass.value=T.mapPass.texture,m.uniforms.resolution.value=T.mapSize,m.uniforms.radius.value=T.radius,n.setRenderTarget(T.map),n.clear(),n.renderBufferDirect(P,null,B,m,A,null)}function _(T,P,B,R){let C=null;const U=B.isPointLight===!0?T.customDistanceMaterial:T.customDepthMaterial;if(U!==void 0)C=U;else if(C=B.isPointLight===!0?l:a,n.localClippingEnabled&&P.clipShadows===!0&&Array.isArray(P.clippingPlanes)&&P.clippingPlanes.length!==0||P.displacementMap&&P.displacementScale!==0||P.alphaMap&&P.alphaTest>0||P.map&&P.alphaTest>0){const j=C.uuid,K=P.uuid;let te=c[j];te===void 0&&(te={},c[j]=te);let de=te[K];de===void 0&&(de=C.clone(),te[K]=de,P.addEventListener("dispose",I)),C=de}if(C.visible=P.visible,C.wireframe=P.wireframe,R===Wr?C.side=P.shadowSide!==null?P.shadowSide:P.side:C.side=P.shadowSide!==null?P.shadowSide:f[P.side],C.alphaMap=P.alphaMap,C.alphaTest=P.alphaTest,C.map=P.map,C.clipShadows=P.clipShadows,C.clippingPlanes=P.clippingPlanes,C.clipIntersection=P.clipIntersection,C.displacementMap=P.displacementMap,C.displacementScale=P.displacementScale,C.displacementBias=P.displacementBias,C.wireframeLinewidth=P.wireframeLinewidth,C.linewidth=P.linewidth,B.isPointLight===!0&&C.isMeshDistanceMaterial===!0){const j=n.properties.get(C);j.light=B}return C}function w(T,P,B,R,C){if(T.visible===!1)return;if(T.layers.test(P.layers)&&(T.isMesh||T.isLine||T.isPoints)&&(T.castShadow||T.receiveShadow&&C===Wr)&&(!T.frustumCulled||i.intersectsObject(T))){T.modelViewMatrix.multiplyMatrices(B.matrixWorldInverse,T.matrixWorld);const K=e.update(T),te=T.material;if(Array.isArray(te)){const de=K.groups;for(let re=0,ge=de.length;re<ge;re++){const F=de[re],k=te[F.materialIndex];if(k&&k.visible){const W=_(T,k,R,C);T.onBeforeShadow(n,T,P,B,K,W,F),n.renderBufferDirect(B,null,K,W,T,F),T.onAfterShadow(n,T,P,B,K,W,F)}}}else if(te.visible){const de=_(T,te,R,C);T.onBeforeShadow(n,T,P,B,K,de,null),n.renderBufferDirect(B,null,K,de,T,null),T.onAfterShadow(n,T,P,B,K,de,null)}}const j=T.children;for(let K=0,te=j.length;K<te;K++)w(j[K],P,B,R,C)}function I(T){T.target.removeEventListener("dispose",I);for(const B in c){const R=c[B],C=T.target.uuid;C in R&&(R[C].dispose(),delete R[C])}}}const mz={[zm]:Hm,[Gm]:jm,[Vm]:Xm,[ml]:Wm,[Hm]:zm,[jm]:Gm,[Xm]:Vm,[Wm]:ml};function gz(n,e){function t(){let X=!1;const Te=new Vt;let fe=null;const Se=new Vt(0,0,0,0);return{setMask:function(je){fe!==je&&!X&&(n.colorMask(je,je,je,je),fe=je)},setLocked:function(je){X=je},setClear:function(je,Oe,ct,Wt,an){an===!0&&(je*=Wt,Oe*=Wt,ct*=Wt),Te.set(je,Oe,ct,Wt),Se.equals(Te)===!1&&(n.clearColor(je,Oe,ct,Wt),Se.copy(Te))},reset:function(){X=!1,fe=null,Se.set(-1,0,0,0)}}}function i(){let X=!1,Te=!1,fe=null,Se=null,je=null;return{setReversed:function(Oe){if(Te!==Oe){const ct=e.get("EXT_clip_control");Te?ct.clipControlEXT(ct.LOWER_LEFT_EXT,ct.ZERO_TO_ONE_EXT):ct.clipControlEXT(ct.LOWER_LEFT_EXT,ct.NEGATIVE_ONE_TO_ONE_EXT);const Wt=je;je=null,this.setClear(Wt)}Te=Oe},getReversed:function(){return Te},setTest:function(Oe){Oe?ae(n.DEPTH_TEST):Le(n.DEPTH_TEST)},setMask:function(Oe){fe!==Oe&&!X&&(n.depthMask(Oe),fe=Oe)},setFunc:function(Oe){if(Te&&(Oe=mz[Oe]),Se!==Oe){switch(Oe){case zm:n.depthFunc(n.NEVER);break;case Hm:n.depthFunc(n.ALWAYS);break;case Gm:n.depthFunc(n.LESS);break;case ml:n.depthFunc(n.LEQUAL);break;case Vm:n.depthFunc(n.EQUAL);break;case Wm:n.depthFunc(n.GEQUAL);break;case jm:n.depthFunc(n.GREATER);break;case Xm:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Se=Oe}},setLocked:function(Oe){X=Oe},setClear:function(Oe){je!==Oe&&(Te&&(Oe=1-Oe),n.clearDepth(Oe),je=Oe)},reset:function(){X=!1,fe=null,Se=null,je=null,Te=!1}}}function r(){let X=!1,Te=null,fe=null,Se=null,je=null,Oe=null,ct=null,Wt=null,an=null;return{setTest:function(Dt){X||(Dt?ae(n.STENCIL_TEST):Le(n.STENCIL_TEST))},setMask:function(Dt){Te!==Dt&&!X&&(n.stencilMask(Dt),Te=Dt)},setFunc:function(Dt,Bn,hi){(fe!==Dt||Se!==Bn||je!==hi)&&(n.stencilFunc(Dt,Bn,hi),fe=Dt,Se=Bn,je=hi)},setOp:function(Dt,Bn,hi){(Oe!==Dt||ct!==Bn||Wt!==hi)&&(n.stencilOp(Dt,Bn,hi),Oe=Dt,ct=Bn,Wt=hi)},setLocked:function(Dt){X=Dt},setClear:function(Dt){an!==Dt&&(n.clearStencil(Dt),an=Dt)},reset:function(){X=!1,Te=null,fe=null,Se=null,je=null,Oe=null,ct=null,Wt=null,an=null}}}const s=new t,o=new i,a=new r,l=new WeakMap,c=new WeakMap;let h={},f={},p=new WeakMap,m=[],v=null,A=!1,x=null,g=null,S=null,_=null,w=null,I=null,T=null,P=new Ee(0,0,0),B=0,R=!1,C=null,U=null,j=null,K=null,te=null;const de=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let re=!1,ge=0;const F=n.getParameter(n.VERSION);F.indexOf("WebGL")!==-1?(ge=parseFloat(/^WebGL (\d)/.exec(F)[1]),re=ge>=1):F.indexOf("OpenGL ES")!==-1&&(ge=parseFloat(/^OpenGL ES (\d)/.exec(F)[1]),re=ge>=2);let k=null,W={};const Y=n.getParameter(n.SCISSOR_BOX),se=n.getParameter(n.VIEWPORT),Ce=new Vt().fromArray(Y),q=new Vt().fromArray(se);function ie(X,Te,fe,Se){const je=new Uint8Array(4),Oe=n.createTexture();n.bindTexture(X,Oe),n.texParameteri(X,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(X,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let ct=0;ct<fe;ct++)X===n.TEXTURE_3D||X===n.TEXTURE_2D_ARRAY?n.texImage3D(Te,0,n.RGBA,1,1,Se,0,n.RGBA,n.UNSIGNED_BYTE,je):n.texImage2D(Te+ct,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,je);return Oe}const he={};he[n.TEXTURE_2D]=ie(n.TEXTURE_2D,n.TEXTURE_2D,1),he[n.TEXTURE_CUBE_MAP]=ie(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),he[n.TEXTURE_2D_ARRAY]=ie(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),he[n.TEXTURE_3D]=ie(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),a.setClear(0),ae(n.DEPTH_TEST),o.setFunc(ml),Me(!1),De(g_),ae(n.CULL_FACE),V(Qs);function ae(X){h[X]!==!0&&(n.enable(X),h[X]=!0)}function Le(X){h[X]!==!1&&(n.disable(X),h[X]=!1)}function We(X,Te){return f[X]!==Te?(n.bindFramebuffer(X,Te),f[X]=Te,X===n.DRAW_FRAMEBUFFER&&(f[n.FRAMEBUFFER]=Te),X===n.FRAMEBUFFER&&(f[n.DRAW_FRAMEBUFFER]=Te),!0):!1}function qe(X,Te){let fe=m,Se=!1;if(X){fe=p.get(Te),fe===void 0&&(fe=[],p.set(Te,fe));const je=X.textures;if(fe.length!==je.length||fe[0]!==n.COLOR_ATTACHMENT0){for(let Oe=0,ct=je.length;Oe<ct;Oe++)fe[Oe]=n.COLOR_ATTACHMENT0+Oe;fe.length=je.length,Se=!0}}else fe[0]!==n.BACK&&(fe[0]=n.BACK,Se=!0);Se&&n.drawBuffers(fe)}function ke(X){return v!==X?(n.useProgram(X),v=X,!0):!1}const me={[ko]:n.FUNC_ADD,[GR]:n.FUNC_SUBTRACT,[VR]:n.FUNC_REVERSE_SUBTRACT};me[WR]=n.MIN,me[jR]=n.MAX;const xe={[XR]:n.ZERO,[JR]:n.ONE,[KR]:n.SRC_COLOR,[Om]:n.SRC_ALPHA,[eI]:n.SRC_ALPHA_SATURATE,[ZR]:n.DST_COLOR,[QR]:n.DST_ALPHA,[YR]:n.ONE_MINUS_SRC_COLOR,[km]:n.ONE_MINUS_SRC_ALPHA,[$R]:n.ONE_MINUS_DST_COLOR,[qR]:n.ONE_MINUS_DST_ALPHA,[tI]:n.CONSTANT_COLOR,[nI]:n.ONE_MINUS_CONSTANT_COLOR,[iI]:n.CONSTANT_ALPHA,[rI]:n.ONE_MINUS_CONSTANT_ALPHA};function V(X,Te,fe,Se,je,Oe,ct,Wt,an,Dt){if(X===Qs){A===!0&&(Le(n.BLEND),A=!1);return}if(A===!1&&(ae(n.BLEND),A=!0),X!==HR){if(X!==x||Dt!==R){if((g!==ko||w!==ko)&&(n.blendEquation(n.FUNC_ADD),g=ko,w=ko),Dt)switch(X){case rl:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case qd:n.blendFunc(n.ONE,n.ONE);break;case v_:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case y_:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",X);break}else switch(X){case rl:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case qd:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case v_:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case y_:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",X);break}S=null,_=null,I=null,T=null,P.set(0,0,0),B=0,x=X,R=Dt}return}je=je||Te,Oe=Oe||fe,ct=ct||Se,(Te!==g||je!==w)&&(n.blendEquationSeparate(me[Te],me[je]),g=Te,w=je),(fe!==S||Se!==_||Oe!==I||ct!==T)&&(n.blendFuncSeparate(xe[fe],xe[Se],xe[Oe],xe[ct]),S=fe,_=Se,I=Oe,T=ct),(Wt.equals(P)===!1||an!==B)&&(n.blendColor(Wt.r,Wt.g,Wt.b,an),P.copy(Wt),B=an),x=X,R=!1}function Je(X,Te){X.side===zn?Le(n.CULL_FACE):ae(n.CULL_FACE);let fe=X.side===oi;Te&&(fe=!fe),Me(fe),X.blending===rl&&X.transparent===!1?V(Qs):V(X.blending,X.blendEquation,X.blendSrc,X.blendDst,X.blendEquationAlpha,X.blendSrcAlpha,X.blendDstAlpha,X.blendColor,X.blendAlpha,X.premultipliedAlpha),o.setFunc(X.depthFunc),o.setTest(X.depthTest),o.setMask(X.depthWrite),s.setMask(X.colorWrite);const Se=X.stencilWrite;a.setTest(Se),Se&&(a.setMask(X.stencilWriteMask),a.setFunc(X.stencilFunc,X.stencilRef,X.stencilFuncMask),a.setOp(X.stencilFail,X.stencilZFail,X.stencilZPass)),ot(X.polygonOffset,X.polygonOffsetFactor,X.polygonOffsetUnits),X.alphaToCoverage===!0?ae(n.SAMPLE_ALPHA_TO_COVERAGE):Le(n.SAMPLE_ALPHA_TO_COVERAGE)}function Me(X){C!==X&&(X?n.frontFace(n.CW):n.frontFace(n.CCW),C=X)}function De(X){X!==OR?(ae(n.CULL_FACE),X!==U&&(X===g_?n.cullFace(n.BACK):X===kR?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Le(n.CULL_FACE),U=X}function Ie(X){X!==j&&(re&&n.lineWidth(X),j=X)}function ot(X,Te,fe){X?(ae(n.POLYGON_OFFSET_FILL),(K!==Te||te!==fe)&&(n.polygonOffset(Te,fe),K=Te,te=fe)):Le(n.POLYGON_OFFSET_FILL)}function Ne(X){X?ae(n.SCISSOR_TEST):Le(n.SCISSOR_TEST)}function z(X){X===void 0&&(X=n.TEXTURE0+de-1),k!==X&&(n.activeTexture(X),k=X)}function N(X,Te,fe){fe===void 0&&(k===null?fe=n.TEXTURE0+de-1:fe=k);let Se=W[fe];Se===void 0&&(Se={type:void 0,texture:void 0},W[fe]=Se),(Se.type!==X||Se.texture!==Te)&&(k!==fe&&(n.activeTexture(fe),k=fe),n.bindTexture(X,Te||he[X]),Se.type=X,Se.texture=Te)}function ne(){const X=W[k];X!==void 0&&X.type!==void 0&&(n.bindTexture(X.type,null),X.type=void 0,X.texture=void 0)}function ye(){try{n.compressedTexImage2D.apply(n,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function we(){try{n.compressedTexImage3D.apply(n,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function Ae(){try{n.texSubImage2D.apply(n,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function tt(){try{n.texSubImage3D.apply(n,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function Fe(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function Ke(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function Tt(){try{n.texStorage2D.apply(n,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function be(){try{n.texStorage3D.apply(n,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function Ze(){try{n.texImage2D.apply(n,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function ut(){try{n.texImage3D.apply(n,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function mt(X){Ce.equals(X)===!1&&(n.scissor(X.x,X.y,X.z,X.w),Ce.copy(X))}function Ye(X){q.equals(X)===!1&&(n.viewport(X.x,X.y,X.z,X.w),q.copy(X))}function J(X,Te){let fe=c.get(Te);fe===void 0&&(fe=new WeakMap,c.set(Te,fe));let Se=fe.get(X);Se===void 0&&(Se=n.getUniformBlockIndex(Te,X.name),fe.set(X,Se))}function _e(X,Te){const Se=c.get(Te).get(X);l.get(Te)!==Se&&(n.uniformBlockBinding(Te,Se,X.__bindingPointIndex),l.set(Te,Se))}function ze(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),o.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),h={},k=null,W={},f={},p=new WeakMap,m=[],v=null,A=!1,x=null,g=null,S=null,_=null,w=null,I=null,T=null,P=new Ee(0,0,0),B=0,R=!1,C=null,U=null,j=null,K=null,te=null,Ce.set(0,0,n.canvas.width,n.canvas.height),q.set(0,0,n.canvas.width,n.canvas.height),s.reset(),o.reset(),a.reset()}return{buffers:{color:s,depth:o,stencil:a},enable:ae,disable:Le,bindFramebuffer:We,drawBuffers:qe,useProgram:ke,setBlending:V,setMaterial:Je,setFlipSided:Me,setCullFace:De,setLineWidth:Ie,setPolygonOffset:ot,setScissorTest:Ne,activeTexture:z,bindTexture:N,unbindTexture:ne,compressedTexImage2D:ye,compressedTexImage3D:we,texImage2D:Ze,texImage3D:ut,updateUBOMapping:J,uniformBlockBinding:_e,texStorage2D:Tt,texStorage3D:be,texSubImage2D:Ae,texSubImage3D:tt,compressedTexSubImage2D:Fe,compressedTexSubImage3D:Ke,scissor:mt,viewport:Ye,reset:ze}}function vz(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function yz(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function xz(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function w_(n,e,t,i){const r=_z(i);switch(t){case OA:return n*e;case zA:return n*e;case HA:return n*e*2;case Yg:return n*e/r.components*r.byteLength;case xh:return n*e/r.components*r.byteLength;case GA:return n*e*2/r.components*r.byteLength;case Qg:return n*e*2/r.components*r.byteLength;case kA:return n*e*3/r.components*r.byteLength;case Ei:return n*e*4/r.components*r.byteLength;case qg:return n*e*4/r.components*r.byteLength;case Cd:case bd:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Td:case Rd:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Km:case Qm:return Math.max(n,16)*Math.max(e,8)/4;case Jm:case Ym:return Math.max(n,8)*Math.max(e,8)/2;case qm:case Zm:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case $m:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case eg:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case tg:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case ng:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case ig:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case rg:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case sg:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case og:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case ag:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case lg:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case cg:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case ug:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case dg:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case hg:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case fg:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case Id:case pg:case mg:return Math.ceil(n/4)*Math.ceil(e/4)*16;case VA:case gg:return Math.ceil(n/4)*Math.ceil(e/4)*8;case vg:case yg:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function _z(n){switch(n){case Zr:case NA:return{byteLength:1,components:1};case Qc:case FA:case aa:return{byteLength:2,components:1};case Jg:case Kg:return{byteLength:2,components:4};case ro:case Xg:case Fi:return{byteLength:4,components:1};case UA:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}const Az={contain:vz,cover:yz,fill:xz,getByteLength:w_};function Sz(n,e,t,i,r,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new ue,h=new WeakMap;let f;const p=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function v(z,N){return m?new OffscreenCanvas(z,N):ih("canvas")}function A(z,N,ne){let ye=1;const we=Ne(z);if((we.width>ne||we.height>ne)&&(ye=ne/Math.max(we.width,we.height)),ye<1)if(typeof HTMLImageElement<"u"&&z instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&z instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&z instanceof ImageBitmap||typeof VideoFrame<"u"&&z instanceof VideoFrame){const Ae=Math.floor(ye*we.width),tt=Math.floor(ye*we.height);f===void 0&&(f=v(Ae,tt));const Fe=N?v(Ae,tt):f;return Fe.width=Ae,Fe.height=tt,Fe.getContext("2d").drawImage(z,0,0,Ae,tt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+we.width+"x"+we.height+") to ("+Ae+"x"+tt+")."),Fe}else return"data"in z&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+we.width+"x"+we.height+")."),z;return z}function x(z){return z.generateMipmaps}function g(z){n.generateMipmap(z)}function S(z){return z.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:z.isWebGL3DRenderTarget?n.TEXTURE_3D:z.isWebGLArrayRenderTarget||z.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function _(z,N,ne,ye,we=!1){if(z!==null){if(n[z]!==void 0)return n[z];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+z+"'")}let Ae=N;if(N===n.RED&&(ne===n.FLOAT&&(Ae=n.R32F),ne===n.HALF_FLOAT&&(Ae=n.R16F),ne===n.UNSIGNED_BYTE&&(Ae=n.R8)),N===n.RED_INTEGER&&(ne===n.UNSIGNED_BYTE&&(Ae=n.R8UI),ne===n.UNSIGNED_SHORT&&(Ae=n.R16UI),ne===n.UNSIGNED_INT&&(Ae=n.R32UI),ne===n.BYTE&&(Ae=n.R8I),ne===n.SHORT&&(Ae=n.R16I),ne===n.INT&&(Ae=n.R32I)),N===n.RG&&(ne===n.FLOAT&&(Ae=n.RG32F),ne===n.HALF_FLOAT&&(Ae=n.RG16F),ne===n.UNSIGNED_BYTE&&(Ae=n.RG8)),N===n.RG_INTEGER&&(ne===n.UNSIGNED_BYTE&&(Ae=n.RG8UI),ne===n.UNSIGNED_SHORT&&(Ae=n.RG16UI),ne===n.UNSIGNED_INT&&(Ae=n.RG32UI),ne===n.BYTE&&(Ae=n.RG8I),ne===n.SHORT&&(Ae=n.RG16I),ne===n.INT&&(Ae=n.RG32I)),N===n.RGB_INTEGER&&(ne===n.UNSIGNED_BYTE&&(Ae=n.RGB8UI),ne===n.UNSIGNED_SHORT&&(Ae=n.RGB16UI),ne===n.UNSIGNED_INT&&(Ae=n.RGB32UI),ne===n.BYTE&&(Ae=n.RGB8I),ne===n.SHORT&&(Ae=n.RGB16I),ne===n.INT&&(Ae=n.RGB32I)),N===n.RGBA_INTEGER&&(ne===n.UNSIGNED_BYTE&&(Ae=n.RGBA8UI),ne===n.UNSIGNED_SHORT&&(Ae=n.RGBA16UI),ne===n.UNSIGNED_INT&&(Ae=n.RGBA32UI),ne===n.BYTE&&(Ae=n.RGBA8I),ne===n.SHORT&&(Ae=n.RGBA16I),ne===n.INT&&(Ae=n.RGBA32I)),N===n.RGB&&ne===n.UNSIGNED_INT_5_9_9_9_REV&&(Ae=n.RGB9_E5),N===n.RGBA){const tt=we?Ah:Ut.getTransfer(ye);ne===n.FLOAT&&(Ae=n.RGBA32F),ne===n.HALF_FLOAT&&(Ae=n.RGBA16F),ne===n.UNSIGNED_BYTE&&(Ae=tt===qt?n.SRGB8_ALPHA8:n.RGBA8),ne===n.UNSIGNED_SHORT_4_4_4_4&&(Ae=n.RGBA4),ne===n.UNSIGNED_SHORT_5_5_5_1&&(Ae=n.RGB5_A1)}return(Ae===n.R16F||Ae===n.R32F||Ae===n.RG16F||Ae===n.RG32F||Ae===n.RGBA16F||Ae===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Ae}function w(z,N){let ne;return z?N===null||N===ro||N===vl?ne=n.DEPTH24_STENCIL8:N===Fi?ne=n.DEPTH32F_STENCIL8:N===Qc&&(ne=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):N===null||N===ro||N===vl?ne=n.DEPTH_COMPONENT24:N===Fi?ne=n.DEPTH_COMPONENT32F:N===Qc&&(ne=n.DEPTH_COMPONENT16),ne}function I(z,N){return x(z)===!0||z.isFramebufferTexture&&z.minFilter!==Hn&&z.minFilter!==en?Math.log2(Math.max(N.width,N.height))+1:z.mipmaps!==void 0&&z.mipmaps.length>0?z.mipmaps.length:z.isCompressedTexture&&Array.isArray(z.image)?N.mipmaps.length:1}function T(z){const N=z.target;N.removeEventListener("dispose",T),B(N),N.isVideoTexture&&h.delete(N)}function P(z){const N=z.target;N.removeEventListener("dispose",P),C(N)}function B(z){const N=i.get(z);if(N.__webglInit===void 0)return;const ne=z.source,ye=p.get(ne);if(ye){const we=ye[N.__cacheKey];we.usedTimes--,we.usedTimes===0&&R(z),Object.keys(ye).length===0&&p.delete(ne)}i.remove(z)}function R(z){const N=i.get(z);n.deleteTexture(N.__webglTexture);const ne=z.source,ye=p.get(ne);delete ye[N.__cacheKey],o.memory.textures--}function C(z){const N=i.get(z);if(z.depthTexture&&(z.depthTexture.dispose(),i.remove(z.depthTexture)),z.isWebGLCubeRenderTarget)for(let ye=0;ye<6;ye++){if(Array.isArray(N.__webglFramebuffer[ye]))for(let we=0;we<N.__webglFramebuffer[ye].length;we++)n.deleteFramebuffer(N.__webglFramebuffer[ye][we]);else n.deleteFramebuffer(N.__webglFramebuffer[ye]);N.__webglDepthbuffer&&n.deleteRenderbuffer(N.__webglDepthbuffer[ye])}else{if(Array.isArray(N.__webglFramebuffer))for(let ye=0;ye<N.__webglFramebuffer.length;ye++)n.deleteFramebuffer(N.__webglFramebuffer[ye]);else n.deleteFramebuffer(N.__webglFramebuffer);if(N.__webglDepthbuffer&&n.deleteRenderbuffer(N.__webglDepthbuffer),N.__webglMultisampledFramebuffer&&n.deleteFramebuffer(N.__webglMultisampledFramebuffer),N.__webglColorRenderbuffer)for(let ye=0;ye<N.__webglColorRenderbuffer.length;ye++)N.__webglColorRenderbuffer[ye]&&n.deleteRenderbuffer(N.__webglColorRenderbuffer[ye]);N.__webglDepthRenderbuffer&&n.deleteRenderbuffer(N.__webglDepthRenderbuffer)}const ne=z.textures;for(let ye=0,we=ne.length;ye<we;ye++){const Ae=i.get(ne[ye]);Ae.__webglTexture&&(n.deleteTexture(Ae.__webglTexture),o.memory.textures--),i.remove(ne[ye])}i.remove(z)}let U=0;function j(){U=0}function K(){const z=U;return z>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+z+" texture units while this GPU supports only "+r.maxTextures),U+=1,z}function te(z){const N=[];return N.push(z.wrapS),N.push(z.wrapT),N.push(z.wrapR||0),N.push(z.magFilter),N.push(z.minFilter),N.push(z.anisotropy),N.push(z.internalFormat),N.push(z.format),N.push(z.type),N.push(z.generateMipmaps),N.push(z.premultiplyAlpha),N.push(z.flipY),N.push(z.unpackAlignment),N.push(z.colorSpace),N.join()}function de(z,N){const ne=i.get(z);if(z.isVideoTexture&&Ie(z),z.isRenderTargetTexture===!1&&z.version>0&&ne.__version!==z.version){const ye=z.image;if(ye===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ye.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{q(ne,z,N);return}}t.bindTexture(n.TEXTURE_2D,ne.__webglTexture,n.TEXTURE0+N)}function re(z,N){const ne=i.get(z);if(z.version>0&&ne.__version!==z.version){q(ne,z,N);return}t.bindTexture(n.TEXTURE_2D_ARRAY,ne.__webglTexture,n.TEXTURE0+N)}function ge(z,N){const ne=i.get(z);if(z.version>0&&ne.__version!==z.version){q(ne,z,N);return}t.bindTexture(n.TEXTURE_3D,ne.__webglTexture,n.TEXTURE0+N)}function F(z,N){const ne=i.get(z);if(z.version>0&&ne.__version!==z.version){ie(ne,z,N);return}t.bindTexture(n.TEXTURE_CUBE_MAP,ne.__webglTexture,n.TEXTURE0+N)}const k={[fr]:n.REPEAT,[Qi]:n.CLAMP_TO_EDGE,[gl]:n.MIRRORED_REPEAT},W={[Hn]:n.NEAREST,[yh]:n.NEAREST_MIPMAP_NEAREST,[Go]:n.NEAREST_MIPMAP_LINEAR,[en]:n.LINEAR,[sl]:n.LINEAR_MIPMAP_NEAREST,[qi]:n.LINEAR_MIPMAP_LINEAR},Y={[_I]:n.NEVER,[CI]:n.ALWAYS,[AI]:n.LESS,[XA]:n.LEQUAL,[SI]:n.EQUAL,[EI]:n.GEQUAL,[MI]:n.GREATER,[wI]:n.NOTEQUAL};function se(z,N){if(N.type===Fi&&e.has("OES_texture_float_linear")===!1&&(N.magFilter===en||N.magFilter===sl||N.magFilter===Go||N.magFilter===qi||N.minFilter===en||N.minFilter===sl||N.minFilter===Go||N.minFilter===qi)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(z,n.TEXTURE_WRAP_S,k[N.wrapS]),n.texParameteri(z,n.TEXTURE_WRAP_T,k[N.wrapT]),(z===n.TEXTURE_3D||z===n.TEXTURE_2D_ARRAY)&&n.texParameteri(z,n.TEXTURE_WRAP_R,k[N.wrapR]),n.texParameteri(z,n.TEXTURE_MAG_FILTER,W[N.magFilter]),n.texParameteri(z,n.TEXTURE_MIN_FILTER,W[N.minFilter]),N.compareFunction&&(n.texParameteri(z,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(z,n.TEXTURE_COMPARE_FUNC,Y[N.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(N.magFilter===Hn||N.minFilter!==Go&&N.minFilter!==qi||N.type===Fi&&e.has("OES_texture_float_linear")===!1)return;if(N.anisotropy>1||i.get(N).__currentAnisotropy){const ne=e.get("EXT_texture_filter_anisotropic");n.texParameterf(z,ne.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(N.anisotropy,r.getMaxAnisotropy())),i.get(N).__currentAnisotropy=N.anisotropy}}}function Ce(z,N){let ne=!1;z.__webglInit===void 0&&(z.__webglInit=!0,N.addEventListener("dispose",T));const ye=N.source;let we=p.get(ye);we===void 0&&(we={},p.set(ye,we));const Ae=te(N);if(Ae!==z.__cacheKey){we[Ae]===void 0&&(we[Ae]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,ne=!0),we[Ae].usedTimes++;const tt=we[z.__cacheKey];tt!==void 0&&(we[z.__cacheKey].usedTimes--,tt.usedTimes===0&&R(N)),z.__cacheKey=Ae,z.__webglTexture=we[Ae].texture}return ne}function q(z,N,ne){let ye=n.TEXTURE_2D;(N.isDataArrayTexture||N.isCompressedArrayTexture)&&(ye=n.TEXTURE_2D_ARRAY),N.isData3DTexture&&(ye=n.TEXTURE_3D);const we=Ce(z,N),Ae=N.source;t.bindTexture(ye,z.__webglTexture,n.TEXTURE0+ne);const tt=i.get(Ae);if(Ae.version!==tt.__version||we===!0){t.activeTexture(n.TEXTURE0+ne);const Fe=Ut.getPrimaries(Ut.workingColorSpace),Ke=N.colorSpace===Ws?null:Ut.getPrimaries(N.colorSpace),Tt=N.colorSpace===Ws||Fe===Ke?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,N.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,N.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,N.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Tt);let be=A(N.image,!1,r.maxTextureSize);be=ot(N,be);const Ze=s.convert(N.format,N.colorSpace),ut=s.convert(N.type);let mt=_(N.internalFormat,Ze,ut,N.colorSpace,N.isVideoTexture);se(ye,N);let Ye;const J=N.mipmaps,_e=N.isVideoTexture!==!0,ze=tt.__version===void 0||we===!0,X=Ae.dataReady,Te=I(N,be);if(N.isDepthTexture)mt=w(N.format===yl,N.type),ze&&(_e?t.texStorage2D(n.TEXTURE_2D,1,mt,be.width,be.height):t.texImage2D(n.TEXTURE_2D,0,mt,be.width,be.height,0,Ze,ut,null));else if(N.isDataTexture)if(J.length>0){_e&&ze&&t.texStorage2D(n.TEXTURE_2D,Te,mt,J[0].width,J[0].height);for(let fe=0,Se=J.length;fe<Se;fe++)Ye=J[fe],_e?X&&t.texSubImage2D(n.TEXTURE_2D,fe,0,0,Ye.width,Ye.height,Ze,ut,Ye.data):t.texImage2D(n.TEXTURE_2D,fe,mt,Ye.width,Ye.height,0,Ze,ut,Ye.data);N.generateMipmaps=!1}else _e?(ze&&t.texStorage2D(n.TEXTURE_2D,Te,mt,be.width,be.height),X&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,be.width,be.height,Ze,ut,be.data)):t.texImage2D(n.TEXTURE_2D,0,mt,be.width,be.height,0,Ze,ut,be.data);else if(N.isCompressedTexture)if(N.isCompressedArrayTexture){_e&&ze&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Te,mt,J[0].width,J[0].height,be.depth);for(let fe=0,Se=J.length;fe<Se;fe++)if(Ye=J[fe],N.format!==Ei)if(Ze!==null)if(_e){if(X)if(N.layerUpdates.size>0){const je=w_(Ye.width,Ye.height,N.format,N.type);for(const Oe of N.layerUpdates){const ct=Ye.data.subarray(Oe*je/Ye.data.BYTES_PER_ELEMENT,(Oe+1)*je/Ye.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,fe,0,0,Oe,Ye.width,Ye.height,1,Ze,ct)}N.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,fe,0,0,0,Ye.width,Ye.height,be.depth,Ze,Ye.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,fe,mt,Ye.width,Ye.height,be.depth,0,Ye.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else _e?X&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,fe,0,0,0,Ye.width,Ye.height,be.depth,Ze,ut,Ye.data):t.texImage3D(n.TEXTURE_2D_ARRAY,fe,mt,Ye.width,Ye.height,be.depth,0,Ze,ut,Ye.data)}else{_e&&ze&&t.texStorage2D(n.TEXTURE_2D,Te,mt,J[0].width,J[0].height);for(let fe=0,Se=J.length;fe<Se;fe++)Ye=J[fe],N.format!==Ei?Ze!==null?_e?X&&t.compressedTexSubImage2D(n.TEXTURE_2D,fe,0,0,Ye.width,Ye.height,Ze,Ye.data):t.compressedTexImage2D(n.TEXTURE_2D,fe,mt,Ye.width,Ye.height,0,Ye.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):_e?X&&t.texSubImage2D(n.TEXTURE_2D,fe,0,0,Ye.width,Ye.height,Ze,ut,Ye.data):t.texImage2D(n.TEXTURE_2D,fe,mt,Ye.width,Ye.height,0,Ze,ut,Ye.data)}else if(N.isDataArrayTexture)if(_e){if(ze&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Te,mt,be.width,be.height,be.depth),X)if(N.layerUpdates.size>0){const fe=w_(be.width,be.height,N.format,N.type);for(const Se of N.layerUpdates){const je=be.data.subarray(Se*fe/be.data.BYTES_PER_ELEMENT,(Se+1)*fe/be.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Se,be.width,be.height,1,Ze,ut,je)}N.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,be.width,be.height,be.depth,Ze,ut,be.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,mt,be.width,be.height,be.depth,0,Ze,ut,be.data);else if(N.isData3DTexture)_e?(ze&&t.texStorage3D(n.TEXTURE_3D,Te,mt,be.width,be.height,be.depth),X&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,be.width,be.height,be.depth,Ze,ut,be.data)):t.texImage3D(n.TEXTURE_3D,0,mt,be.width,be.height,be.depth,0,Ze,ut,be.data);else if(N.isFramebufferTexture){if(ze)if(_e)t.texStorage2D(n.TEXTURE_2D,Te,mt,be.width,be.height);else{let fe=be.width,Se=be.height;for(let je=0;je<Te;je++)t.texImage2D(n.TEXTURE_2D,je,mt,fe,Se,0,Ze,ut,null),fe>>=1,Se>>=1}}else if(J.length>0){if(_e&&ze){const fe=Ne(J[0]);t.texStorage2D(n.TEXTURE_2D,Te,mt,fe.width,fe.height)}for(let fe=0,Se=J.length;fe<Se;fe++)Ye=J[fe],_e?X&&t.texSubImage2D(n.TEXTURE_2D,fe,0,0,Ze,ut,Ye):t.texImage2D(n.TEXTURE_2D,fe,mt,Ze,ut,Ye);N.generateMipmaps=!1}else if(_e){if(ze){const fe=Ne(be);t.texStorage2D(n.TEXTURE_2D,Te,mt,fe.width,fe.height)}X&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ze,ut,be)}else t.texImage2D(n.TEXTURE_2D,0,mt,Ze,ut,be);x(N)&&g(ye),tt.__version=Ae.version,N.onUpdate&&N.onUpdate(N)}z.__version=N.version}function ie(z,N,ne){if(N.image.length!==6)return;const ye=Ce(z,N),we=N.source;t.bindTexture(n.TEXTURE_CUBE_MAP,z.__webglTexture,n.TEXTURE0+ne);const Ae=i.get(we);if(we.version!==Ae.__version||ye===!0){t.activeTexture(n.TEXTURE0+ne);const tt=Ut.getPrimaries(Ut.workingColorSpace),Fe=N.colorSpace===Ws?null:Ut.getPrimaries(N.colorSpace),Ke=N.colorSpace===Ws||tt===Fe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,N.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,N.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,N.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ke);const Tt=N.isCompressedTexture||N.image[0].isCompressedTexture,be=N.image[0]&&N.image[0].isDataTexture,Ze=[];for(let Se=0;Se<6;Se++)!Tt&&!be?Ze[Se]=A(N.image[Se],!0,r.maxCubemapSize):Ze[Se]=be?N.image[Se].image:N.image[Se],Ze[Se]=ot(N,Ze[Se]);const ut=Ze[0],mt=s.convert(N.format,N.colorSpace),Ye=s.convert(N.type),J=_(N.internalFormat,mt,Ye,N.colorSpace),_e=N.isVideoTexture!==!0,ze=Ae.__version===void 0||ye===!0,X=we.dataReady;let Te=I(N,ut);se(n.TEXTURE_CUBE_MAP,N);let fe;if(Tt){_e&&ze&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Te,J,ut.width,ut.height);for(let Se=0;Se<6;Se++){fe=Ze[Se].mipmaps;for(let je=0;je<fe.length;je++){const Oe=fe[je];N.format!==Ei?mt!==null?_e?X&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,je,0,0,Oe.width,Oe.height,mt,Oe.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,je,J,Oe.width,Oe.height,0,Oe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):_e?X&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,je,0,0,Oe.width,Oe.height,mt,Ye,Oe.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,je,J,Oe.width,Oe.height,0,mt,Ye,Oe.data)}}}else{if(fe=N.mipmaps,_e&&ze){fe.length>0&&Te++;const Se=Ne(Ze[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,Te,J,Se.width,Se.height)}for(let Se=0;Se<6;Se++)if(be){_e?X&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,0,0,0,Ze[Se].width,Ze[Se].height,mt,Ye,Ze[Se].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,0,J,Ze[Se].width,Ze[Se].height,0,mt,Ye,Ze[Se].data);for(let je=0;je<fe.length;je++){const ct=fe[je].image[Se].image;_e?X&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,je+1,0,0,ct.width,ct.height,mt,Ye,ct.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,je+1,J,ct.width,ct.height,0,mt,Ye,ct.data)}}else{_e?X&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,0,0,0,mt,Ye,Ze[Se]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,0,J,mt,Ye,Ze[Se]);for(let je=0;je<fe.length;je++){const Oe=fe[je];_e?X&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,je+1,0,0,mt,Ye,Oe.image[Se]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,je+1,J,mt,Ye,Oe.image[Se])}}}x(N)&&g(n.TEXTURE_CUBE_MAP),Ae.__version=we.version,N.onUpdate&&N.onUpdate(N)}z.__version=N.version}function he(z,N,ne,ye,we,Ae){const tt=s.convert(ne.format,ne.colorSpace),Fe=s.convert(ne.type),Ke=_(ne.internalFormat,tt,Fe,ne.colorSpace),Tt=i.get(N),be=i.get(ne);if(be.__renderTarget=N,!Tt.__hasExternalTextures){const Ze=Math.max(1,N.width>>Ae),ut=Math.max(1,N.height>>Ae);we===n.TEXTURE_3D||we===n.TEXTURE_2D_ARRAY?t.texImage3D(we,Ae,Ke,Ze,ut,N.depth,0,tt,Fe,null):t.texImage2D(we,Ae,Ke,Ze,ut,0,tt,Fe,null)}t.bindFramebuffer(n.FRAMEBUFFER,z),De(N)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,ye,we,be.__webglTexture,0,Me(N)):(we===n.TEXTURE_2D||we>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&we<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,ye,we,be.__webglTexture,Ae),t.bindFramebuffer(n.FRAMEBUFFER,null)}function ae(z,N,ne){if(n.bindRenderbuffer(n.RENDERBUFFER,z),N.depthBuffer){const ye=N.depthTexture,we=ye&&ye.isDepthTexture?ye.type:null,Ae=w(N.stencilBuffer,we),tt=N.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Fe=Me(N);De(N)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Fe,Ae,N.width,N.height):ne?n.renderbufferStorageMultisample(n.RENDERBUFFER,Fe,Ae,N.width,N.height):n.renderbufferStorage(n.RENDERBUFFER,Ae,N.width,N.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,tt,n.RENDERBUFFER,z)}else{const ye=N.textures;for(let we=0;we<ye.length;we++){const Ae=ye[we],tt=s.convert(Ae.format,Ae.colorSpace),Fe=s.convert(Ae.type),Ke=_(Ae.internalFormat,tt,Fe,Ae.colorSpace),Tt=Me(N);ne&&De(N)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Tt,Ke,N.width,N.height):De(N)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Tt,Ke,N.width,N.height):n.renderbufferStorage(n.RENDERBUFFER,Ke,N.width,N.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Le(z,N){if(N&&N.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,z),!(N.depthTexture&&N.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const ye=i.get(N.depthTexture);ye.__renderTarget=N,(!ye.__webglTexture||N.depthTexture.image.width!==N.width||N.depthTexture.image.height!==N.height)&&(N.depthTexture.image.width=N.width,N.depthTexture.image.height=N.height,N.depthTexture.needsUpdate=!0),de(N.depthTexture,0);const we=ye.__webglTexture,Ae=Me(N);if(N.depthTexture.format===ol)De(N)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,we,0,Ae):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,we,0);else if(N.depthTexture.format===yl)De(N)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,we,0,Ae):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,we,0);else throw new Error("Unknown depthTexture format")}function We(z){const N=i.get(z),ne=z.isWebGLCubeRenderTarget===!0;if(N.__boundDepthTexture!==z.depthTexture){const ye=z.depthTexture;if(N.__depthDisposeCallback&&N.__depthDisposeCallback(),ye){const we=()=>{delete N.__boundDepthTexture,delete N.__depthDisposeCallback,ye.removeEventListener("dispose",we)};ye.addEventListener("dispose",we),N.__depthDisposeCallback=we}N.__boundDepthTexture=ye}if(z.depthTexture&&!N.__autoAllocateDepthBuffer){if(ne)throw new Error("target.depthTexture not supported in Cube render targets");Le(N.__webglFramebuffer,z)}else if(ne){N.__webglDepthbuffer=[];for(let ye=0;ye<6;ye++)if(t.bindFramebuffer(n.FRAMEBUFFER,N.__webglFramebuffer[ye]),N.__webglDepthbuffer[ye]===void 0)N.__webglDepthbuffer[ye]=n.createRenderbuffer(),ae(N.__webglDepthbuffer[ye],z,!1);else{const we=z.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ae=N.__webglDepthbuffer[ye];n.bindRenderbuffer(n.RENDERBUFFER,Ae),n.framebufferRenderbuffer(n.FRAMEBUFFER,we,n.RENDERBUFFER,Ae)}}else if(t.bindFramebuffer(n.FRAMEBUFFER,N.__webglFramebuffer),N.__webglDepthbuffer===void 0)N.__webglDepthbuffer=n.createRenderbuffer(),ae(N.__webglDepthbuffer,z,!1);else{const ye=z.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,we=N.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,we),n.framebufferRenderbuffer(n.FRAMEBUFFER,ye,n.RENDERBUFFER,we)}t.bindFramebuffer(n.FRAMEBUFFER,null)}function qe(z,N,ne){const ye=i.get(z);N!==void 0&&he(ye.__webglFramebuffer,z,z.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),ne!==void 0&&We(z)}function ke(z){const N=z.texture,ne=i.get(z),ye=i.get(N);z.addEventListener("dispose",P);const we=z.textures,Ae=z.isWebGLCubeRenderTarget===!0,tt=we.length>1;if(tt||(ye.__webglTexture===void 0&&(ye.__webglTexture=n.createTexture()),ye.__version=N.version,o.memory.textures++),Ae){ne.__webglFramebuffer=[];for(let Fe=0;Fe<6;Fe++)if(N.mipmaps&&N.mipmaps.length>0){ne.__webglFramebuffer[Fe]=[];for(let Ke=0;Ke<N.mipmaps.length;Ke++)ne.__webglFramebuffer[Fe][Ke]=n.createFramebuffer()}else ne.__webglFramebuffer[Fe]=n.createFramebuffer()}else{if(N.mipmaps&&N.mipmaps.length>0){ne.__webglFramebuffer=[];for(let Fe=0;Fe<N.mipmaps.length;Fe++)ne.__webglFramebuffer[Fe]=n.createFramebuffer()}else ne.__webglFramebuffer=n.createFramebuffer();if(tt)for(let Fe=0,Ke=we.length;Fe<Ke;Fe++){const Tt=i.get(we[Fe]);Tt.__webglTexture===void 0&&(Tt.__webglTexture=n.createTexture(),o.memory.textures++)}if(z.samples>0&&De(z)===!1){ne.__webglMultisampledFramebuffer=n.createFramebuffer(),ne.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,ne.__webglMultisampledFramebuffer);for(let Fe=0;Fe<we.length;Fe++){const Ke=we[Fe];ne.__webglColorRenderbuffer[Fe]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,ne.__webglColorRenderbuffer[Fe]);const Tt=s.convert(Ke.format,Ke.colorSpace),be=s.convert(Ke.type),Ze=_(Ke.internalFormat,Tt,be,Ke.colorSpace,z.isXRRenderTarget===!0),ut=Me(z);n.renderbufferStorageMultisample(n.RENDERBUFFER,ut,Ze,z.width,z.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Fe,n.RENDERBUFFER,ne.__webglColorRenderbuffer[Fe])}n.bindRenderbuffer(n.RENDERBUFFER,null),z.depthBuffer&&(ne.__webglDepthRenderbuffer=n.createRenderbuffer(),ae(ne.__webglDepthRenderbuffer,z,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Ae){t.bindTexture(n.TEXTURE_CUBE_MAP,ye.__webglTexture),se(n.TEXTURE_CUBE_MAP,N);for(let Fe=0;Fe<6;Fe++)if(N.mipmaps&&N.mipmaps.length>0)for(let Ke=0;Ke<N.mipmaps.length;Ke++)he(ne.__webglFramebuffer[Fe][Ke],z,N,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,Ke);else he(ne.__webglFramebuffer[Fe],z,N,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,0);x(N)&&g(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(tt){for(let Fe=0,Ke=we.length;Fe<Ke;Fe++){const Tt=we[Fe],be=i.get(Tt);t.bindTexture(n.TEXTURE_2D,be.__webglTexture),se(n.TEXTURE_2D,Tt),he(ne.__webglFramebuffer,z,Tt,n.COLOR_ATTACHMENT0+Fe,n.TEXTURE_2D,0),x(Tt)&&g(n.TEXTURE_2D)}t.unbindTexture()}else{let Fe=n.TEXTURE_2D;if((z.isWebGL3DRenderTarget||z.isWebGLArrayRenderTarget)&&(Fe=z.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Fe,ye.__webglTexture),se(Fe,N),N.mipmaps&&N.mipmaps.length>0)for(let Ke=0;Ke<N.mipmaps.length;Ke++)he(ne.__webglFramebuffer[Ke],z,N,n.COLOR_ATTACHMENT0,Fe,Ke);else he(ne.__webglFramebuffer,z,N,n.COLOR_ATTACHMENT0,Fe,0);x(N)&&g(Fe),t.unbindTexture()}z.depthBuffer&&We(z)}function me(z){const N=z.textures;for(let ne=0,ye=N.length;ne<ye;ne++){const we=N[ne];if(x(we)){const Ae=S(z),tt=i.get(we).__webglTexture;t.bindTexture(Ae,tt),g(Ae),t.unbindTexture()}}}const xe=[],V=[];function Je(z){if(z.samples>0){if(De(z)===!1){const N=z.textures,ne=z.width,ye=z.height;let we=n.COLOR_BUFFER_BIT;const Ae=z.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,tt=i.get(z),Fe=N.length>1;if(Fe)for(let Ke=0;Ke<N.length;Ke++)t.bindFramebuffer(n.FRAMEBUFFER,tt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ke,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,tt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ke,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,tt.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,tt.__webglFramebuffer);for(let Ke=0;Ke<N.length;Ke++){if(z.resolveDepthBuffer&&(z.depthBuffer&&(we|=n.DEPTH_BUFFER_BIT),z.stencilBuffer&&z.resolveStencilBuffer&&(we|=n.STENCIL_BUFFER_BIT)),Fe){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,tt.__webglColorRenderbuffer[Ke]);const Tt=i.get(N[Ke]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Tt,0)}n.blitFramebuffer(0,0,ne,ye,0,0,ne,ye,we,n.NEAREST),l===!0&&(xe.length=0,V.length=0,xe.push(n.COLOR_ATTACHMENT0+Ke),z.depthBuffer&&z.resolveDepthBuffer===!1&&(xe.push(Ae),V.push(Ae),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,V)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,xe))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Fe)for(let Ke=0;Ke<N.length;Ke++){t.bindFramebuffer(n.FRAMEBUFFER,tt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ke,n.RENDERBUFFER,tt.__webglColorRenderbuffer[Ke]);const Tt=i.get(N[Ke]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,tt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ke,n.TEXTURE_2D,Tt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,tt.__webglMultisampledFramebuffer)}else if(z.depthBuffer&&z.resolveDepthBuffer===!1&&l){const N=z.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[N])}}}function Me(z){return Math.min(r.maxSamples,z.samples)}function De(z){const N=i.get(z);return z.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&N.__useRenderToTexture!==!1}function Ie(z){const N=o.render.frame;h.get(z)!==N&&(h.set(z,N),z.update())}function ot(z,N){const ne=z.colorSpace,ye=z.format,we=z.type;return z.isCompressedTexture===!0||z.isVideoTexture===!0||ne!==bi&&ne!==Ws&&(Ut.getTransfer(ne)===qt?(ye!==Ei||we!==Zr)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ne)),N}function Ne(z){return typeof HTMLImageElement<"u"&&z instanceof HTMLImageElement?(c.width=z.naturalWidth||z.width,c.height=z.naturalHeight||z.height):typeof VideoFrame<"u"&&z instanceof VideoFrame?(c.width=z.displayWidth,c.height=z.displayHeight):(c.width=z.width,c.height=z.height),c}this.allocateTextureUnit=K,this.resetTextureUnits=j,this.setTexture2D=de,this.setTexture2DArray=re,this.setTexture3D=ge,this.setTextureCube=F,this.rebindTextures=qe,this.setupRenderTarget=ke,this.updateRenderTargetMipmap=me,this.updateMultisampleRenderTarget=Je,this.setupDepthRenderbuffer=We,this.setupFrameBufferTexture=he,this.useMultisampledRTT=De}function HI(n,e){function t(i,r=Ws){let s;const o=Ut.getTransfer(r);if(i===Zr)return n.UNSIGNED_BYTE;if(i===Jg)return n.UNSIGNED_SHORT_4_4_4_4;if(i===Kg)return n.UNSIGNED_SHORT_5_5_5_1;if(i===UA)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===NA)return n.BYTE;if(i===FA)return n.SHORT;if(i===Qc)return n.UNSIGNED_SHORT;if(i===Xg)return n.INT;if(i===ro)return n.UNSIGNED_INT;if(i===Fi)return n.FLOAT;if(i===aa)return n.HALF_FLOAT;if(i===OA)return n.ALPHA;if(i===kA)return n.RGB;if(i===Ei)return n.RGBA;if(i===zA)return n.LUMINANCE;if(i===HA)return n.LUMINANCE_ALPHA;if(i===ol)return n.DEPTH_COMPONENT;if(i===yl)return n.DEPTH_STENCIL;if(i===Yg)return n.RED;if(i===xh)return n.RED_INTEGER;if(i===GA)return n.RG;if(i===Qg)return n.RG_INTEGER;if(i===qg)return n.RGBA_INTEGER;if(i===Cd||i===bd||i===Td||i===Rd)if(o===qt)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===Cd)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===bd)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===Td)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===Rd)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===Cd)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===bd)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===Td)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Rd)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===Jm||i===Km||i===Ym||i===Qm)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===Jm)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===Km)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===Ym)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===Qm)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===qm||i===Zm||i===$m)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(i===qm||i===Zm)return o===qt?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===$m)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===eg||i===tg||i===ng||i===ig||i===rg||i===sg||i===og||i===ag||i===lg||i===cg||i===ug||i===dg||i===hg||i===fg)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(i===eg)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===tg)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===ng)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===ig)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===rg)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===sg)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===og)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===ag)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===lg)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===cg)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===ug)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===dg)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===hg)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===fg)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===Id||i===pg||i===mg)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(i===Id)return o===qt?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===pg)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===mg)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===VA||i===gg||i===vg||i===yg)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(i===Id)return s.COMPRESSED_RED_RGTC1_EXT;if(i===gg)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===vg)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===yg)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===vl?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}class GI extends yn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Ui extends It{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Mz={type:"move"};class Ry{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Ui,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Ui,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new D,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new D),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Ui,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new D,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new D),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const A of e.hand.values()){const x=t.getJointPose(A,i),g=this._getHandJoint(c,A);x!==null&&(g.matrix.fromArray(x.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=x.radius),g.visible=x!==null}const h=c.joints["index-finger-tip"],f=c.joints["thumb-tip"],p=h.position.distanceTo(f.position),m=.02,v=.005;c.inputState.pinching&&p>m+v?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&p<=m-v&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Mz)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new Ui;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}const wz=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Ez=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Cz{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const r=new tn,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!=i.depthNear||t.depthFar!=i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new pr({vertexShader:wz,fragmentShader:Ez,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new xt(new ca(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class bz extends ws{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=1,c=null,h=null,f=null,p=null,m=null,v=null;const A=new Cz,x=t.getContextAttributes();let g=null,S=null;const _=[],w=[],I=new ue;let T=null;const P=new yn;P.viewport=new Vt;const B=new yn;B.viewport=new Vt;const R=[P,B],C=new GI;let U=null,j=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(q){let ie=_[q];return ie===void 0&&(ie=new Ry,_[q]=ie),ie.getTargetRaySpace()},this.getControllerGrip=function(q){let ie=_[q];return ie===void 0&&(ie=new Ry,_[q]=ie),ie.getGripSpace()},this.getHand=function(q){let ie=_[q];return ie===void 0&&(ie=new Ry,_[q]=ie),ie.getHandSpace()};function K(q){const ie=w.indexOf(q.inputSource);if(ie===-1)return;const he=_[ie];he!==void 0&&(he.update(q.inputSource,q.frame,c||o),he.dispatchEvent({type:q.type,data:q.inputSource}))}function te(){r.removeEventListener("select",K),r.removeEventListener("selectstart",K),r.removeEventListener("selectend",K),r.removeEventListener("squeeze",K),r.removeEventListener("squeezestart",K),r.removeEventListener("squeezeend",K),r.removeEventListener("end",te),r.removeEventListener("inputsourceschange",de);for(let q=0;q<_.length;q++){const ie=w[q];ie!==null&&(w[q]=null,_[q].disconnect(ie))}U=null,j=null,A.reset(),e.setRenderTarget(g),m=null,p=null,f=null,r=null,S=null,Ce.stop(),i.isPresenting=!1,e.setPixelRatio(T),e.setSize(I.width,I.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(q){s=q,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(q){a=q,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(q){c=q},this.getBaseLayer=function(){return p!==null?p:m},this.getBinding=function(){return f},this.getFrame=function(){return v},this.getSession=function(){return r},this.setSession=async function(q){if(r=q,r!==null){if(g=e.getRenderTarget(),r.addEventListener("select",K),r.addEventListener("selectstart",K),r.addEventListener("selectend",K),r.addEventListener("squeeze",K),r.addEventListener("squeezestart",K),r.addEventListener("squeezeend",K),r.addEventListener("end",te),r.addEventListener("inputsourceschange",de),x.xrCompatible!==!0&&await t.makeXRCompatible(),T=e.getPixelRatio(),e.getSize(I),r.renderState.layers===void 0){const ie={antialias:x.antialias,alpha:!0,depth:x.depth,stencil:x.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(r,t,ie),r.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),S=new ci(m.framebufferWidth,m.framebufferHeight,{format:Ei,type:Zr,colorSpace:e.outputColorSpace,stencilBuffer:x.stencil})}else{let ie=null,he=null,ae=null;x.depth&&(ae=x.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,ie=x.stencil?yl:ol,he=x.stencil?vl:ro);const Le={colorFormat:t.RGBA8,depthFormat:ae,scaleFactor:s};f=new XRWebGLBinding(r,t),p=f.createProjectionLayer(Le),r.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),S=new ci(p.textureWidth,p.textureHeight,{format:Ei,type:Zr,depthTexture:new Eh(p.textureWidth,p.textureHeight,he,void 0,void 0,void 0,void 0,void 0,void 0,ie),stencilBuffer:x.stencil,colorSpace:e.outputColorSpace,samples:x.antialias?4:0,resolveDepthBuffer:p.ignoreDepthValues===!1})}S.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await r.requestReferenceSpace(a),Ce.setContext(r),Ce.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return A.getDepthTexture()};function de(q){for(let ie=0;ie<q.removed.length;ie++){const he=q.removed[ie],ae=w.indexOf(he);ae>=0&&(w[ae]=null,_[ae].disconnect(he))}for(let ie=0;ie<q.added.length;ie++){const he=q.added[ie];let ae=w.indexOf(he);if(ae===-1){for(let We=0;We<_.length;We++)if(We>=w.length){w.push(he),ae=We;break}else if(w[We]===null){w[We]=he,ae=We;break}if(ae===-1)break}const Le=_[ae];Le&&Le.connect(he)}}const re=new D,ge=new D;function F(q,ie,he){re.setFromMatrixPosition(ie.matrixWorld),ge.setFromMatrixPosition(he.matrixWorld);const ae=re.distanceTo(ge),Le=ie.projectionMatrix.elements,We=he.projectionMatrix.elements,qe=Le[14]/(Le[10]-1),ke=Le[14]/(Le[10]+1),me=(Le[9]+1)/Le[5],xe=(Le[9]-1)/Le[5],V=(Le[8]-1)/Le[0],Je=(We[8]+1)/We[0],Me=qe*V,De=qe*Je,Ie=ae/(-V+Je),ot=Ie*-V;if(ie.matrixWorld.decompose(q.position,q.quaternion,q.scale),q.translateX(ot),q.translateZ(Ie),q.matrixWorld.compose(q.position,q.quaternion,q.scale),q.matrixWorldInverse.copy(q.matrixWorld).invert(),Le[10]===-1)q.projectionMatrix.copy(ie.projectionMatrix),q.projectionMatrixInverse.copy(ie.projectionMatrixInverse);else{const Ne=qe+Ie,z=ke+Ie,N=Me-ot,ne=De+(ae-ot),ye=me*ke/z*Ne,we=xe*ke/z*Ne;q.projectionMatrix.makePerspective(N,ne,ye,we,Ne,z),q.projectionMatrixInverse.copy(q.projectionMatrix).invert()}}function k(q,ie){ie===null?q.matrixWorld.copy(q.matrix):q.matrixWorld.multiplyMatrices(ie.matrixWorld,q.matrix),q.matrixWorldInverse.copy(q.matrixWorld).invert()}this.updateCamera=function(q){if(r===null)return;let ie=q.near,he=q.far;A.texture!==null&&(A.depthNear>0&&(ie=A.depthNear),A.depthFar>0&&(he=A.depthFar)),C.near=B.near=P.near=ie,C.far=B.far=P.far=he,(U!==C.near||j!==C.far)&&(r.updateRenderState({depthNear:C.near,depthFar:C.far}),U=C.near,j=C.far),P.layers.mask=q.layers.mask|2,B.layers.mask=q.layers.mask|4,C.layers.mask=P.layers.mask|B.layers.mask;const ae=q.parent,Le=C.cameras;k(C,ae);for(let We=0;We<Le.length;We++)k(Le[We],ae);Le.length===2?F(C,P,B):C.projectionMatrix.copy(P.projectionMatrix),W(q,C,ae)};function W(q,ie,he){he===null?q.matrix.copy(ie.matrixWorld):(q.matrix.copy(he.matrixWorld),q.matrix.invert(),q.matrix.multiply(ie.matrixWorld)),q.matrix.decompose(q.position,q.quaternion,q.scale),q.updateMatrixWorld(!0),q.projectionMatrix.copy(ie.projectionMatrix),q.projectionMatrixInverse.copy(ie.projectionMatrixInverse),q.isPerspectiveCamera&&(q.fov=qc*2*Math.atan(1/q.projectionMatrix.elements[5]),q.zoom=1)}this.getCamera=function(){return C},this.getFoveation=function(){if(!(p===null&&m===null))return l},this.setFoveation=function(q){l=q,p!==null&&(p.fixedFoveation=q),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=q)},this.hasDepthSensing=function(){return A.texture!==null},this.getDepthSensingMesh=function(){return A.getMesh(C)};let Y=null;function se(q,ie){if(h=ie.getViewerPose(c||o),v=ie,h!==null){const he=h.views;m!==null&&(e.setRenderTargetFramebuffer(S,m.framebuffer),e.setRenderTarget(S));let ae=!1;he.length!==C.cameras.length&&(C.cameras.length=0,ae=!0);for(let We=0;We<he.length;We++){const qe=he[We];let ke=null;if(m!==null)ke=m.getViewport(qe);else{const xe=f.getViewSubImage(p,qe);ke=xe.viewport,We===0&&(e.setRenderTargetTextures(S,xe.colorTexture,p.ignoreDepthValues?void 0:xe.depthStencilTexture),e.setRenderTarget(S))}let me=R[We];me===void 0&&(me=new yn,me.layers.enable(We),me.viewport=new Vt,R[We]=me),me.matrix.fromArray(qe.transform.matrix),me.matrix.decompose(me.position,me.quaternion,me.scale),me.projectionMatrix.fromArray(qe.projectionMatrix),me.projectionMatrixInverse.copy(me.projectionMatrix).invert(),me.viewport.set(ke.x,ke.y,ke.width,ke.height),We===0&&(C.matrix.copy(me.matrix),C.matrix.decompose(C.position,C.quaternion,C.scale)),ae===!0&&C.cameras.push(me)}const Le=r.enabledFeatures;if(Le&&Le.includes("depth-sensing")){const We=f.getDepthInformation(he[0]);We&&We.isValid&&We.texture&&A.init(e,We,r.renderState)}}for(let he=0;he<_.length;he++){const ae=w[he],Le=_[he];ae!==null&&Le!==void 0&&Le.update(ae,ie,c||o)}Y&&Y(q,ie),ie.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:ie}),v=null}const Ce=new FI;Ce.setAnimationLoop(se),this.setAnimationLoop=function(q){Y=q},this.dispose=function(){}}}const ba=new Ti,Tz=new Qe;function Rz(n,e){function t(x,g){x.matrixAutoUpdate===!0&&x.updateMatrix(),g.value.copy(x.matrix)}function i(x,g){g.color.getRGB(x.fogColor.value,BI(n)),g.isFog?(x.fogNear.value=g.near,x.fogFar.value=g.far):g.isFogExp2&&(x.fogDensity.value=g.density)}function r(x,g,S,_,w){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(x,g):g.isMeshToonMaterial?(s(x,g),f(x,g)):g.isMeshPhongMaterial?(s(x,g),h(x,g)):g.isMeshStandardMaterial?(s(x,g),p(x,g),g.isMeshPhysicalMaterial&&m(x,g,w)):g.isMeshMatcapMaterial?(s(x,g),v(x,g)):g.isMeshDepthMaterial?s(x,g):g.isMeshDistanceMaterial?(s(x,g),A(x,g)):g.isMeshNormalMaterial?s(x,g):g.isLineBasicMaterial?(o(x,g),g.isLineDashedMaterial&&a(x,g)):g.isPointsMaterial?l(x,g,S,_):g.isSpriteMaterial?c(x,g):g.isShadowMaterial?(x.color.value.copy(g.color),x.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function s(x,g){x.opacity.value=g.opacity,g.color&&x.diffuse.value.copy(g.color),g.emissive&&x.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(x.map.value=g.map,t(g.map,x.mapTransform)),g.alphaMap&&(x.alphaMap.value=g.alphaMap,t(g.alphaMap,x.alphaMapTransform)),g.bumpMap&&(x.bumpMap.value=g.bumpMap,t(g.bumpMap,x.bumpMapTransform),x.bumpScale.value=g.bumpScale,g.side===oi&&(x.bumpScale.value*=-1)),g.normalMap&&(x.normalMap.value=g.normalMap,t(g.normalMap,x.normalMapTransform),x.normalScale.value.copy(g.normalScale),g.side===oi&&x.normalScale.value.negate()),g.displacementMap&&(x.displacementMap.value=g.displacementMap,t(g.displacementMap,x.displacementMapTransform),x.displacementScale.value=g.displacementScale,x.displacementBias.value=g.displacementBias),g.emissiveMap&&(x.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,x.emissiveMapTransform)),g.specularMap&&(x.specularMap.value=g.specularMap,t(g.specularMap,x.specularMapTransform)),g.alphaTest>0&&(x.alphaTest.value=g.alphaTest);const S=e.get(g),_=S.envMap,w=S.envMapRotation;_&&(x.envMap.value=_,ba.copy(w),ba.x*=-1,ba.y*=-1,ba.z*=-1,_.isCubeTexture&&_.isRenderTargetTexture===!1&&(ba.y*=-1,ba.z*=-1),x.envMapRotation.value.setFromMatrix4(Tz.makeRotationFromEuler(ba)),x.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,x.reflectivity.value=g.reflectivity,x.ior.value=g.ior,x.refractionRatio.value=g.refractionRatio),g.lightMap&&(x.lightMap.value=g.lightMap,x.lightMapIntensity.value=g.lightMapIntensity,t(g.lightMap,x.lightMapTransform)),g.aoMap&&(x.aoMap.value=g.aoMap,x.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,x.aoMapTransform))}function o(x,g){x.diffuse.value.copy(g.color),x.opacity.value=g.opacity,g.map&&(x.map.value=g.map,t(g.map,x.mapTransform))}function a(x,g){x.dashSize.value=g.dashSize,x.totalSize.value=g.dashSize+g.gapSize,x.scale.value=g.scale}function l(x,g,S,_){x.diffuse.value.copy(g.color),x.opacity.value=g.opacity,x.size.value=g.size*S,x.scale.value=_*.5,g.map&&(x.map.value=g.map,t(g.map,x.uvTransform)),g.alphaMap&&(x.alphaMap.value=g.alphaMap,t(g.alphaMap,x.alphaMapTransform)),g.alphaTest>0&&(x.alphaTest.value=g.alphaTest)}function c(x,g){x.diffuse.value.copy(g.color),x.opacity.value=g.opacity,x.rotation.value=g.rotation,g.map&&(x.map.value=g.map,t(g.map,x.mapTransform)),g.alphaMap&&(x.alphaMap.value=g.alphaMap,t(g.alphaMap,x.alphaMapTransform)),g.alphaTest>0&&(x.alphaTest.value=g.alphaTest)}function h(x,g){x.specular.value.copy(g.specular),x.shininess.value=Math.max(g.shininess,1e-4)}function f(x,g){g.gradientMap&&(x.gradientMap.value=g.gradientMap)}function p(x,g){x.metalness.value=g.metalness,g.metalnessMap&&(x.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,x.metalnessMapTransform)),x.roughness.value=g.roughness,g.roughnessMap&&(x.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,x.roughnessMapTransform)),g.envMap&&(x.envMapIntensity.value=g.envMapIntensity)}function m(x,g,S){x.ior.value=g.ior,g.sheen>0&&(x.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),x.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(x.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,x.sheenColorMapTransform)),g.sheenRoughnessMap&&(x.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,x.sheenRoughnessMapTransform))),g.clearcoat>0&&(x.clearcoat.value=g.clearcoat,x.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(x.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,x.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,x.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(x.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,x.clearcoatNormalMapTransform),x.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===oi&&x.clearcoatNormalScale.value.negate())),g.dispersion>0&&(x.dispersion.value=g.dispersion),g.iridescence>0&&(x.iridescence.value=g.iridescence,x.iridescenceIOR.value=g.iridescenceIOR,x.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],x.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(x.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,x.iridescenceMapTransform)),g.iridescenceThicknessMap&&(x.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,x.iridescenceThicknessMapTransform))),g.transmission>0&&(x.transmission.value=g.transmission,x.transmissionSamplerMap.value=S.texture,x.transmissionSamplerSize.value.set(S.width,S.height),g.transmissionMap&&(x.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,x.transmissionMapTransform)),x.thickness.value=g.thickness,g.thicknessMap&&(x.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,x.thicknessMapTransform)),x.attenuationDistance.value=g.attenuationDistance,x.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(x.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(x.anisotropyMap.value=g.anisotropyMap,t(g.anisotropyMap,x.anisotropyMapTransform))),x.specularIntensity.value=g.specularIntensity,x.specularColor.value.copy(g.specularColor),g.specularColorMap&&(x.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,x.specularColorMapTransform)),g.specularIntensityMap&&(x.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,x.specularIntensityMapTransform))}function v(x,g){g.matcap&&(x.matcap.value=g.matcap)}function A(x,g){const S=e.get(g).light;x.referencePosition.value.setFromMatrixPosition(S.matrixWorld),x.nearDistance.value=S.shadow.camera.near,x.farDistance.value=S.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function Iz(n,e,t,i){let r={},s={},o=[];const a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(S,_){const w=_.program;i.uniformBlockBinding(S,w)}function c(S,_){let w=r[S.id];w===void 0&&(v(S),w=h(S),r[S.id]=w,S.addEventListener("dispose",x));const I=_.program;i.updateUBOMapping(S,I);const T=e.render.frame;s[S.id]!==T&&(p(S),s[S.id]=T)}function h(S){const _=f();S.__bindingPointIndex=_;const w=n.createBuffer(),I=S.__size,T=S.usage;return n.bindBuffer(n.UNIFORM_BUFFER,w),n.bufferData(n.UNIFORM_BUFFER,I,T),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,_,w),w}function f(){for(let S=0;S<a;S++)if(o.indexOf(S)===-1)return o.push(S),S;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(S){const _=r[S.id],w=S.uniforms,I=S.__cache;n.bindBuffer(n.UNIFORM_BUFFER,_);for(let T=0,P=w.length;T<P;T++){const B=Array.isArray(w[T])?w[T]:[w[T]];for(let R=0,C=B.length;R<C;R++){const U=B[R];if(m(U,T,R,I)===!0){const j=U.__offset,K=Array.isArray(U.value)?U.value:[U.value];let te=0;for(let de=0;de<K.length;de++){const re=K[de],ge=A(re);typeof re=="number"||typeof re=="boolean"?(U.__data[0]=re,n.bufferSubData(n.UNIFORM_BUFFER,j+te,U.__data)):re.isMatrix3?(U.__data[0]=re.elements[0],U.__data[1]=re.elements[1],U.__data[2]=re.elements[2],U.__data[3]=0,U.__data[4]=re.elements[3],U.__data[5]=re.elements[4],U.__data[6]=re.elements[5],U.__data[7]=0,U.__data[8]=re.elements[6],U.__data[9]=re.elements[7],U.__data[10]=re.elements[8],U.__data[11]=0):(re.toArray(U.__data,te),te+=ge.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,j,U.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function m(S,_,w,I){const T=S.value,P=_+"_"+w;if(I[P]===void 0)return typeof T=="number"||typeof T=="boolean"?I[P]=T:I[P]=T.clone(),!0;{const B=I[P];if(typeof T=="number"||typeof T=="boolean"){if(B!==T)return I[P]=T,!0}else if(B.equals(T)===!1)return B.copy(T),!0}return!1}function v(S){const _=S.uniforms;let w=0;const I=16;for(let P=0,B=_.length;P<B;P++){const R=Array.isArray(_[P])?_[P]:[_[P]];for(let C=0,U=R.length;C<U;C++){const j=R[C],K=Array.isArray(j.value)?j.value:[j.value];for(let te=0,de=K.length;te<de;te++){const re=K[te],ge=A(re),F=w%I,k=F%ge.boundary,W=F+k;w+=k,W!==0&&I-W<ge.storage&&(w+=I-W),j.__data=new Float32Array(ge.storage/Float32Array.BYTES_PER_ELEMENT),j.__offset=w,w+=ge.storage}}}const T=w%I;return T>0&&(w+=I-T),S.__size=w,S.__cache={},this}function A(S){const _={boundary:0,storage:0};return typeof S=="number"||typeof S=="boolean"?(_.boundary=4,_.storage=4):S.isVector2?(_.boundary=8,_.storage=8):S.isVector3||S.isColor?(_.boundary=16,_.storage=12):S.isVector4?(_.boundary=16,_.storage=16):S.isMatrix3?(_.boundary=48,_.storage=48):S.isMatrix4?(_.boundary=64,_.storage=64):S.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",S),_}function x(S){const _=S.target;_.removeEventListener("dispose",x);const w=o.indexOf(_.__bindingPointIndex);o.splice(w,1),n.deleteBuffer(r[_.id]),delete r[_.id],delete s[_.id]}function g(){for(const S in r)n.deleteBuffer(r[S]);o=[],r={},s={}}return{bind:l,update:c,dispose:g}}class VI{constructor(e={}){const{canvas:t=TI(),context:i=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:f=!1,reverseDepthBuffer:p=!1}=e;this.isWebGLRenderer=!0;let m;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");m=i.getContextAttributes().alpha}else m=o;const v=new Uint32Array(4),A=new Int32Array(4);let x=null,g=null;const S=[],_=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Un,this.toneMapping=vs,this.toneMappingExposure=1;const w=this;let I=!1,T=0,P=0,B=null,R=-1,C=null;const U=new Vt,j=new Vt;let K=null;const te=new Ee(0);let de=0,re=t.width,ge=t.height,F=1,k=null,W=null;const Y=new Vt(0,0,re,ge),se=new Vt(0,0,re,ge);let Ce=!1;const q=new wh;let ie=!1,he=!1;const ae=new Qe,Le=new Qe,We=new D,qe=new Vt,ke={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let me=!1;function xe(){return B===null?F:1}let V=i;function Je(O,Z){return t.getContext(O,Z)}try{const O={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:h,failIfMajorPerformanceCaveat:f};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Cl}`),t.addEventListener("webglcontextlost",Se,!1),t.addEventListener("webglcontextrestored",je,!1),t.addEventListener("webglcontextcreationerror",Oe,!1),V===null){const Z="webgl2";if(V=Je(Z,O),V===null)throw Je(Z)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(O){throw console.error("THREE.WebGLRenderer: "+O.message),O}let Me,De,Ie,ot,Ne,z,N,ne,ye,we,Ae,tt,Fe,Ke,Tt,be,Ze,ut,mt,Ye,J,_e,ze,X;function Te(){Me=new FO(V),Me.init(),_e=new HI(V,Me),De=new IO(V,Me,e,_e),Ie=new gz(V,Me),De.reverseDepthBuffer&&p&&Ie.buffers.depth.setReversed(!0),ot=new kO(V),Ne=new iz,z=new Sz(V,Me,Ie,Ne,De,_e,ot),N=new BO(w),ne=new NO(w),ye=new XF(V),ze=new TO(V,ye),we=new UO(V,ye,ot,ze),Ae=new HO(V,we,ye,ot),mt=new zO(V,De,z),be=new PO(Ne),tt=new nz(w,N,ne,Me,De,ze,be),Fe=new Rz(w,Ne),Ke=new sz,Tt=new dz(Me),ut=new bO(w,N,ne,Ie,Ae,m,l),Ze=new pz(w,Ae,De),X=new Iz(V,ot,De,Ie),Ye=new RO(V,Me,ot),J=new OO(V,Me,ot),ot.programs=tt.programs,w.capabilities=De,w.extensions=Me,w.properties=Ne,w.renderLists=Ke,w.shadowMap=Ze,w.state=Ie,w.info=ot}Te();const fe=new bz(w,V);this.xr=fe,this.getContext=function(){return V},this.getContextAttributes=function(){return V.getContextAttributes()},this.forceContextLoss=function(){const O=Me.get("WEBGL_lose_context");O&&O.loseContext()},this.forceContextRestore=function(){const O=Me.get("WEBGL_lose_context");O&&O.restoreContext()},this.getPixelRatio=function(){return F},this.setPixelRatio=function(O){O!==void 0&&(F=O,this.setSize(re,ge,!1))},this.getSize=function(O){return O.set(re,ge)},this.setSize=function(O,Z,le=!0){if(fe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}re=O,ge=Z,t.width=Math.floor(O*F),t.height=Math.floor(Z*F),le===!0&&(t.style.width=O+"px",t.style.height=Z+"px"),this.setViewport(0,0,O,Z)},this.getDrawingBufferSize=function(O){return O.set(re*F,ge*F).floor()},this.setDrawingBufferSize=function(O,Z,le){re=O,ge=Z,F=le,t.width=Math.floor(O*le),t.height=Math.floor(Z*le),this.setViewport(0,0,O,Z)},this.getCurrentViewport=function(O){return O.copy(U)},this.getViewport=function(O){return O.copy(Y)},this.setViewport=function(O,Z,le,ce){O.isVector4?Y.set(O.x,O.y,O.z,O.w):Y.set(O,Z,le,ce),Ie.viewport(U.copy(Y).multiplyScalar(F).round())},this.getScissor=function(O){return O.copy(se)},this.setScissor=function(O,Z,le,ce){O.isVector4?se.set(O.x,O.y,O.z,O.w):se.set(O,Z,le,ce),Ie.scissor(j.copy(se).multiplyScalar(F).round())},this.getScissorTest=function(){return Ce},this.setScissorTest=function(O){Ie.setScissorTest(Ce=O)},this.setOpaqueSort=function(O){k=O},this.setTransparentSort=function(O){W=O},this.getClearColor=function(O){return O.copy(ut.getClearColor())},this.setClearColor=function(){ut.setClearColor.apply(ut,arguments)},this.getClearAlpha=function(){return ut.getClearAlpha()},this.setClearAlpha=function(){ut.setClearAlpha.apply(ut,arguments)},this.clear=function(O=!0,Z=!0,le=!0){let ce=0;if(O){let ee=!1;if(B!==null){const Be=B.texture.format;ee=Be===qg||Be===Qg||Be===xh}if(ee){const Be=B.texture.type,He=Be===Zr||Be===ro||Be===Qc||Be===vl||Be===Jg||Be===Kg,nt=ut.getClearColor(),it=ut.getClearAlpha(),vt=nt.r,_t=nt.g,rt=nt.b;He?(v[0]=vt,v[1]=_t,v[2]=rt,v[3]=it,V.clearBufferuiv(V.COLOR,0,v)):(A[0]=vt,A[1]=_t,A[2]=rt,A[3]=it,V.clearBufferiv(V.COLOR,0,A))}else ce|=V.COLOR_BUFFER_BIT}Z&&(ce|=V.DEPTH_BUFFER_BIT),le&&(ce|=V.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),V.clear(ce)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Se,!1),t.removeEventListener("webglcontextrestored",je,!1),t.removeEventListener("webglcontextcreationerror",Oe,!1),Ke.dispose(),Tt.dispose(),Ne.dispose(),N.dispose(),ne.dispose(),Ae.dispose(),ze.dispose(),X.dispose(),tt.dispose(),fe.dispose(),fe.removeEventListener("sessionstart",Lh),fe.removeEventListener("sessionend",Dh),ts.stop()};function Se(O){O.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),I=!0}function je(){console.log("THREE.WebGLRenderer: Context Restored."),I=!1;const O=ot.autoReset,Z=Ze.enabled,le=Ze.autoUpdate,ce=Ze.needsUpdate,ee=Ze.type;Te(),ot.autoReset=O,Ze.enabled=Z,Ze.autoUpdate=le,Ze.needsUpdate=ce,Ze.type=ee}function Oe(O){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",O.statusMessage)}function ct(O){const Z=O.target;Z.removeEventListener("dispose",ct),Wt(Z)}function Wt(O){an(O),Ne.remove(O)}function an(O){const Z=Ne.get(O).programs;Z!==void 0&&(Z.forEach(function(le){tt.releaseProgram(le)}),O.isShaderMaterial&&tt.releaseShaderCache(O))}this.renderBufferDirect=function(O,Z,le,ce,ee,Be){Z===null&&(Z=ke);const He=ee.isMesh&&ee.matrixWorld.determinant()<0,nt=E0(O,Z,le,ce,ee);Ie.setMaterial(ce,He);let it=le.index,vt=1;if(ce.wireframe===!0){if(it=we.getWireframeAttribute(le),it===void 0)return;vt=2}const _t=le.drawRange,rt=le.attributes.position;let Pt=_t.start*vt,Ht=(_t.start+_t.count)*vt;Be!==null&&(Pt=Math.max(Pt,Be.start*vt),Ht=Math.min(Ht,(Be.start+Be.count)*vt)),it!==null?(Pt=Math.max(Pt,0),Ht=Math.min(Ht,it.count)):rt!=null&&(Pt=Math.max(Pt,0),Ht=Math.min(Ht,rt.count));const ft=Ht-Pt;if(ft<0||ft===1/0)return;ze.setup(ee,ce,nt,le,it);let Et,Bt=Ye;if(it!==null&&(Et=ye.get(it),Bt=J,Bt.setIndex(Et)),ee.isMesh)ce.wireframe===!0?(Ie.setLineWidth(ce.wireframeLinewidth*xe()),Bt.setMode(V.LINES)):Bt.setMode(V.TRIANGLES);else if(ee.isLine){let Ve=ce.linewidth;Ve===void 0&&(Ve=1),Ie.setLineWidth(Ve*xe()),ee.isLineSegments?Bt.setMode(V.LINES):ee.isLineLoop?Bt.setMode(V.LINE_LOOP):Bt.setMode(V.LINE_STRIP)}else ee.isPoints?Bt.setMode(V.POINTS):ee.isSprite&&Bt.setMode(V.TRIANGLES);if(ee.isBatchedMesh)if(ee._multiDrawInstances!==null)Bt.renderMultiDrawInstances(ee._multiDrawStarts,ee._multiDrawCounts,ee._multiDrawCount,ee._multiDrawInstances);else if(Me.get("WEBGL_multi_draw"))Bt.renderMultiDraw(ee._multiDrawStarts,ee._multiDrawCounts,ee._multiDrawCount);else{const Ve=ee._multiDrawStarts,dn=ee._multiDrawCounts,Nt=ee._multiDrawCount,Yn=it?ye.get(it).bytesPerElement:1,Tn=Ne.get(ce).currentProgram.getUniforms();for(let Qn=0;Qn<Nt;Qn++)Tn.setValue(V,"_gl_DrawID",Qn),Bt.render(Ve[Qn]/Yn,dn[Qn])}else if(ee.isInstancedMesh)Bt.renderInstances(Pt,ft,ee.count);else if(le.isInstancedBufferGeometry){const Ve=le._maxInstanceCount!==void 0?le._maxInstanceCount:1/0,dn=Math.min(le.instanceCount,Ve);Bt.renderInstances(Pt,ft,dn)}else Bt.render(Pt,ft)};function Dt(O,Z,le){O.transparent===!0&&O.side===zn&&O.forceSinglePass===!1?(O.side=oi,O.needsUpdate=!0,Bl(O,Z,le),O.side=qr,O.needsUpdate=!0,Bl(O,Z,le),O.side=zn):Bl(O,Z,le)}this.compile=function(O,Z,le=null){le===null&&(le=O),g=Tt.get(le),g.init(Z),_.push(g),le.traverseVisible(function(ee){ee.isLight&&ee.layers.test(Z.layers)&&(g.pushLight(ee),ee.castShadow&&g.pushShadow(ee))}),O!==le&&O.traverseVisible(function(ee){ee.isLight&&ee.layers.test(Z.layers)&&(g.pushLight(ee),ee.castShadow&&g.pushShadow(ee))}),g.setupLights();const ce=new Set;return O.traverse(function(ee){if(!(ee.isMesh||ee.isPoints||ee.isLine||ee.isSprite))return;const Be=ee.material;if(Be)if(Array.isArray(Be))for(let He=0;He<Be.length;He++){const nt=Be[He];Dt(nt,le,ee),ce.add(nt)}else Dt(Be,le,ee),ce.add(Be)}),_.pop(),g=null,ce},this.compileAsync=function(O,Z,le=null){const ce=this.compile(O,Z,le);return new Promise(ee=>{function Be(){if(ce.forEach(function(He){Ne.get(He).currentProgram.isReady()&&ce.delete(He)}),ce.size===0){ee(O);return}setTimeout(Be,10)}Me.get("KHR_parallel_shader_compile")!==null?Be():setTimeout(Be,10)})};let Bn=null;function hi(O){Bn&&Bn(O)}function Lh(){ts.stop()}function Dh(){ts.start()}const ts=new FI;ts.setAnimationLoop(hi),typeof self<"u"&&ts.setContext(self),this.setAnimationLoop=function(O){Bn=O,fe.setAnimationLoop(O),O===null?ts.stop():ts.start()},fe.addEventListener("sessionstart",Lh),fe.addEventListener("sessionend",Dh),this.render=function(O,Z){if(Z!==void 0&&Z.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(I===!0)return;if(O.matrixWorldAutoUpdate===!0&&O.updateMatrixWorld(),Z.parent===null&&Z.matrixWorldAutoUpdate===!0&&Z.updateMatrixWorld(),fe.enabled===!0&&fe.isPresenting===!0&&(fe.cameraAutoUpdate===!0&&fe.updateCamera(Z),Z=fe.getCamera()),O.isScene===!0&&O.onBeforeRender(w,O,Z,B),g=Tt.get(O,_.length),g.init(Z),_.push(g),Le.multiplyMatrices(Z.projectionMatrix,Z.matrixWorldInverse),q.setFromProjectionMatrix(Le),he=this.localClippingEnabled,ie=be.init(this.clippingPlanes,he),x=Ke.get(O,S.length),x.init(),S.push(x),fe.enabled===!0&&fe.isPresenting===!0){const Be=w.xr.getDepthSensingMesh();Be!==null&&ha(Be,Z,-1/0,w.sortObjects)}ha(O,Z,0,w.sortObjects),x.finish(),w.sortObjects===!0&&x.sort(k,W),me=fe.enabled===!1||fe.isPresenting===!1||fe.hasDepthSensing()===!1,me&&ut.addToRenderList(x,O),this.info.render.frame++,ie===!0&&be.beginShadows();const le=g.state.shadowsArray;Ze.render(le,O,Z),ie===!0&&be.endShadows(),this.info.autoReset===!0&&this.info.reset();const ce=x.opaque,ee=x.transmissive;if(g.setupLights(),Z.isArrayCamera){const Be=Z.cameras;if(ee.length>0)for(let He=0,nt=Be.length;He<nt;He++){const it=Be[He];ho(ce,ee,O,it)}me&&ut.render(O);for(let He=0,nt=Be.length;He<nt;He++){const it=Be[He];Nh(x,O,it,it.viewport)}}else ee.length>0&&ho(ce,ee,O,Z),me&&ut.render(O),Nh(x,O,Z);B!==null&&(z.updateMultisampleRenderTarget(B),z.updateRenderTargetMipmap(B)),O.isScene===!0&&O.onAfterRender(w,O,Z),ze.resetDefaultState(),R=-1,C=null,_.pop(),_.length>0?(g=_[_.length-1],ie===!0&&be.setGlobalState(w.clippingPlanes,g.state.camera)):g=null,S.pop(),S.length>0?x=S[S.length-1]:x=null};function ha(O,Z,le,ce){if(O.visible===!1)return;if(O.layers.test(Z.layers)){if(O.isGroup)le=O.renderOrder;else if(O.isLOD)O.autoUpdate===!0&&O.update(Z);else if(O.isLight)g.pushLight(O),O.castShadow&&g.pushShadow(O);else if(O.isSprite){if(!O.frustumCulled||q.intersectsSprite(O)){ce&&qe.setFromMatrixPosition(O.matrixWorld).applyMatrix4(Le);const He=Ae.update(O),nt=O.material;nt.visible&&x.push(O,He,nt,le,qe.z,null)}}else if((O.isMesh||O.isLine||O.isPoints)&&(!O.frustumCulled||q.intersectsObject(O))){const He=Ae.update(O),nt=O.material;if(ce&&(O.boundingSphere!==void 0?(O.boundingSphere===null&&O.computeBoundingSphere(),qe.copy(O.boundingSphere.center)):(He.boundingSphere===null&&He.computeBoundingSphere(),qe.copy(He.boundingSphere.center)),qe.applyMatrix4(O.matrixWorld).applyMatrix4(Le)),Array.isArray(nt)){const it=He.groups;for(let vt=0,_t=it.length;vt<_t;vt++){const rt=it[vt],Pt=nt[rt.materialIndex];Pt&&Pt.visible&&x.push(O,He,Pt,le,qe.z,rt)}}else nt.visible&&x.push(O,He,nt,le,qe.z,null)}}const Be=O.children;for(let He=0,nt=Be.length;He<nt;He++)ha(Be[He],Z,le,ce)}function Nh(O,Z,le,ce){const ee=O.opaque,Be=O.transmissive,He=O.transparent;g.setupLightsView(le),ie===!0&&be.setGlobalState(w.clippingPlanes,le),ce&&Ie.viewport(U.copy(ce)),ee.length>0&&Pl(ee,Z,le),Be.length>0&&Pl(Be,Z,le),He.length>0&&Pl(He,Z,le),Ie.buffers.depth.setTest(!0),Ie.buffers.depth.setMask(!0),Ie.buffers.color.setMask(!0),Ie.setPolygonOffset(!1)}function ho(O,Z,le,ce){if((le.isScene===!0?le.overrideMaterial:null)!==null)return;g.state.transmissionRenderTarget[ce.id]===void 0&&(g.state.transmissionRenderTarget[ce.id]=new ci(1,1,{generateMipmaps:!0,type:Me.has("EXT_color_buffer_half_float")||Me.has("EXT_color_buffer_float")?aa:Zr,minFilter:qi,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Ut.workingColorSpace}));const Be=g.state.transmissionRenderTarget[ce.id],He=ce.viewport||U;Be.setSize(He.z,He.w);const nt=w.getRenderTarget();w.setRenderTarget(Be),w.getClearColor(te),de=w.getClearAlpha(),de<1&&w.setClearColor(16777215,.5),w.clear(),me&&ut.render(le);const it=w.toneMapping;w.toneMapping=vs;const vt=ce.viewport;if(ce.viewport!==void 0&&(ce.viewport=void 0),g.setupLightsView(ce),ie===!0&&be.setGlobalState(w.clippingPlanes,ce),Pl(O,le,ce),z.updateMultisampleRenderTarget(Be),z.updateRenderTargetMipmap(Be),Me.has("WEBGL_multisampled_render_to_texture")===!1){let _t=!1;for(let rt=0,Pt=Z.length;rt<Pt;rt++){const Ht=Z[rt],ft=Ht.object,Et=Ht.geometry,Bt=Ht.material,Ve=Ht.group;if(Bt.side===zn&&ft.layers.test(ce.layers)){const dn=Bt.side;Bt.side=oi,Bt.needsUpdate=!0,Fh(ft,le,ce,Et,Bt,Ve),Bt.side=dn,Bt.needsUpdate=!0,_t=!0}}_t===!0&&(z.updateMultisampleRenderTarget(Be),z.updateRenderTargetMipmap(Be))}w.setRenderTarget(nt),w.setClearColor(te,de),vt!==void 0&&(ce.viewport=vt),w.toneMapping=it}function Pl(O,Z,le){const ce=Z.isScene===!0?Z.overrideMaterial:null;for(let ee=0,Be=O.length;ee<Be;ee++){const He=O[ee],nt=He.object,it=He.geometry,vt=ce===null?He.material:ce,_t=He.group;nt.layers.test(le.layers)&&Fh(nt,Z,le,it,vt,_t)}}function Fh(O,Z,le,ce,ee,Be){O.onBeforeRender(w,Z,le,ce,ee,Be),O.modelViewMatrix.multiplyMatrices(le.matrixWorldInverse,O.matrixWorld),O.normalMatrix.getNormalMatrix(O.modelViewMatrix),ee.onBeforeRender(w,Z,le,ce,O,Be),ee.transparent===!0&&ee.side===zn&&ee.forceSinglePass===!1?(ee.side=oi,ee.needsUpdate=!0,w.renderBufferDirect(le,Z,ce,ee,O,Be),ee.side=qr,ee.needsUpdate=!0,w.renderBufferDirect(le,Z,ce,ee,O,Be),ee.side=zn):w.renderBufferDirect(le,Z,ce,ee,O,Be),O.onAfterRender(w,Z,le,ce,ee,Be)}function Bl(O,Z,le){Z.isScene!==!0&&(Z=ke);const ce=Ne.get(O),ee=g.state.lights,Be=g.state.shadowsArray,He=ee.state.version,nt=tt.getParameters(O,ee.state,Be,Z,le),it=tt.getProgramCacheKey(nt);let vt=ce.programs;ce.environment=O.isMeshStandardMaterial?Z.environment:null,ce.fog=Z.fog,ce.envMap=(O.isMeshStandardMaterial?ne:N).get(O.envMap||ce.environment),ce.envMapRotation=ce.environment!==null&&O.envMap===null?Z.environmentRotation:O.envMapRotation,vt===void 0&&(O.addEventListener("dispose",ct),vt=new Map,ce.programs=vt);let _t=vt.get(it);if(_t!==void 0){if(ce.currentProgram===_t&&ce.lightsStateVersion===He)return Oh(O,nt),_t}else nt.uniforms=tt.getUniforms(O),O.onBeforeCompile(nt,w),_t=tt.acquireProgram(nt,it),vt.set(it,_t),ce.uniforms=nt.uniforms;const rt=ce.uniforms;return(!O.isShaderMaterial&&!O.isRawShaderMaterial||O.clipping===!0)&&(rt.clippingPlanes=be.uniform),Oh(O,nt),ce.needsLights=kh(O),ce.lightsStateVersion=He,ce.needsLights&&(rt.ambientLightColor.value=ee.state.ambient,rt.lightProbe.value=ee.state.probe,rt.directionalLights.value=ee.state.directional,rt.directionalLightShadows.value=ee.state.directionalShadow,rt.spotLights.value=ee.state.spot,rt.spotLightShadows.value=ee.state.spotShadow,rt.rectAreaLights.value=ee.state.rectArea,rt.ltc_1.value=ee.state.rectAreaLTC1,rt.ltc_2.value=ee.state.rectAreaLTC2,rt.pointLights.value=ee.state.point,rt.pointLightShadows.value=ee.state.pointShadow,rt.hemisphereLights.value=ee.state.hemi,rt.directionalShadowMap.value=ee.state.directionalShadowMap,rt.directionalShadowMatrix.value=ee.state.directionalShadowMatrix,rt.spotShadowMap.value=ee.state.spotShadowMap,rt.spotLightMatrix.value=ee.state.spotLightMatrix,rt.spotLightMap.value=ee.state.spotLightMap,rt.pointShadowMap.value=ee.state.pointShadowMap,rt.pointShadowMatrix.value=ee.state.pointShadowMatrix),ce.currentProgram=_t,ce.uniformsList=null,_t}function Uh(O){if(O.uniformsList===null){const Z=O.currentProgram.getUniforms();O.uniformsList=dm.seqWithValue(Z.seq,O.uniforms)}return O.uniformsList}function Oh(O,Z){const le=Ne.get(O);le.outputColorSpace=Z.outputColorSpace,le.batching=Z.batching,le.batchingColor=Z.batchingColor,le.instancing=Z.instancing,le.instancingColor=Z.instancingColor,le.instancingMorph=Z.instancingMorph,le.skinning=Z.skinning,le.morphTargets=Z.morphTargets,le.morphNormals=Z.morphNormals,le.morphColors=Z.morphColors,le.morphTargetsCount=Z.morphTargetsCount,le.numClippingPlanes=Z.numClippingPlanes,le.numIntersection=Z.numClipIntersection,le.vertexAlphas=Z.vertexAlphas,le.vertexTangents=Z.vertexTangents,le.toneMapping=Z.toneMapping}function E0(O,Z,le,ce,ee){Z.isScene!==!0&&(Z=ke),z.resetTextureUnits();const Be=Z.fog,He=ce.isMeshStandardMaterial?Z.environment:null,nt=B===null?w.outputColorSpace:B.isXRRenderTarget===!0?B.texture.colorSpace:bi,it=(ce.isMeshStandardMaterial?ne:N).get(ce.envMap||He),vt=ce.vertexColors===!0&&!!le.attributes.color&&le.attributes.color.itemSize===4,_t=!!le.attributes.tangent&&(!!ce.normalMap||ce.anisotropy>0),rt=!!le.morphAttributes.position,Pt=!!le.morphAttributes.normal,Ht=!!le.morphAttributes.color;let ft=vs;ce.toneMapped&&(B===null||B.isXRRenderTarget===!0)&&(ft=w.toneMapping);const Et=le.morphAttributes.position||le.morphAttributes.normal||le.morphAttributes.color,Bt=Et!==void 0?Et.length:0,Ve=Ne.get(ce),dn=g.state.lights;if(ie===!0&&(he===!0||O!==C)){const hn=O===C&&ce.id===R;be.setState(ce,O,hn)}let Nt=!1;ce.version===Ve.__version?(Ve.needsLights&&Ve.lightsStateVersion!==dn.state.version||Ve.outputColorSpace!==nt||ee.isBatchedMesh&&Ve.batching===!1||!ee.isBatchedMesh&&Ve.batching===!0||ee.isBatchedMesh&&Ve.batchingColor===!0&&ee.colorTexture===null||ee.isBatchedMesh&&Ve.batchingColor===!1&&ee.colorTexture!==null||ee.isInstancedMesh&&Ve.instancing===!1||!ee.isInstancedMesh&&Ve.instancing===!0||ee.isSkinnedMesh&&Ve.skinning===!1||!ee.isSkinnedMesh&&Ve.skinning===!0||ee.isInstancedMesh&&Ve.instancingColor===!0&&ee.instanceColor===null||ee.isInstancedMesh&&Ve.instancingColor===!1&&ee.instanceColor!==null||ee.isInstancedMesh&&Ve.instancingMorph===!0&&ee.morphTexture===null||ee.isInstancedMesh&&Ve.instancingMorph===!1&&ee.morphTexture!==null||Ve.envMap!==it||ce.fog===!0&&Ve.fog!==Be||Ve.numClippingPlanes!==void 0&&(Ve.numClippingPlanes!==be.numPlanes||Ve.numIntersection!==be.numIntersection)||Ve.vertexAlphas!==vt||Ve.vertexTangents!==_t||Ve.morphTargets!==rt||Ve.morphNormals!==Pt||Ve.morphColors!==Ht||Ve.toneMapping!==ft||Ve.morphTargetsCount!==Bt)&&(Nt=!0):(Nt=!0,Ve.__version=ce.version);let Yn=Ve.currentProgram;Nt===!0&&(Yn=Bl(ce,Z,ee));let Tn=!1,Qn=!1,fo=!1;const $t=Yn.getUniforms(),Ri=Ve.uniforms;if(Ie.useProgram(Yn.program)&&(Tn=!0,Qn=!0,fo=!0),ce.id!==R&&(R=ce.id,Qn=!0),Tn||C!==O){Ie.buffers.depth.getReversed()?(ae.copy(O.projectionMatrix),vF(ae),yF(ae),$t.setValue(V,"projectionMatrix",ae)):$t.setValue(V,"projectionMatrix",O.projectionMatrix),$t.setValue(V,"viewMatrix",O.matrixWorldInverse);const ns=$t.map.cameraPosition;ns!==void 0&&ns.setValue(V,We.setFromMatrixPosition(O.matrixWorld)),De.logarithmicDepthBuffer&&$t.setValue(V,"logDepthBufFC",2/(Math.log(O.far+1)/Math.LN2)),(ce.isMeshPhongMaterial||ce.isMeshToonMaterial||ce.isMeshLambertMaterial||ce.isMeshBasicMaterial||ce.isMeshStandardMaterial||ce.isShaderMaterial)&&$t.setValue(V,"isOrthographic",O.isOrthographicCamera===!0),C!==O&&(C=O,Qn=!0,fo=!0)}if(ee.isSkinnedMesh){$t.setOptional(V,ee,"bindMatrix"),$t.setOptional(V,ee,"bindMatrixInverse");const hn=ee.skeleton;hn&&(hn.boneTexture===null&&hn.computeBoneTexture(),$t.setValue(V,"boneTexture",hn.boneTexture,z))}ee.isBatchedMesh&&($t.setOptional(V,ee,"batchingTexture"),$t.setValue(V,"batchingTexture",ee._matricesTexture,z),$t.setOptional(V,ee,"batchingIdTexture"),$t.setValue(V,"batchingIdTexture",ee._indirectTexture,z),$t.setOptional(V,ee,"batchingColorTexture"),ee._colorsTexture!==null&&$t.setValue(V,"batchingColorTexture",ee._colorsTexture,z));const po=le.morphAttributes;if((po.position!==void 0||po.normal!==void 0||po.color!==void 0)&&mt.update(ee,le,Yn),(Qn||Ve.receiveShadow!==ee.receiveShadow)&&(Ve.receiveShadow=ee.receiveShadow,$t.setValue(V,"receiveShadow",ee.receiveShadow)),ce.isMeshGouraudMaterial&&ce.envMap!==null&&(Ri.envMap.value=it,Ri.flipEnvMap.value=it.isCubeTexture&&it.isRenderTargetTexture===!1?-1:1),ce.isMeshStandardMaterial&&ce.envMap===null&&Z.environment!==null&&(Ri.envMapIntensity.value=Z.environmentIntensity),Qn&&($t.setValue(V,"toneMappingExposure",w.toneMappingExposure),Ve.needsLights&&C0(Ri,fo),Be&&ce.fog===!0&&Fe.refreshFogUniforms(Ri,Be),Fe.refreshMaterialUniforms(Ri,ce,F,ge,g.state.transmissionRenderTarget[O.id]),dm.upload(V,Uh(Ve),Ri,z)),ce.isShaderMaterial&&ce.uniformsNeedUpdate===!0&&(dm.upload(V,Uh(Ve),Ri,z),ce.uniformsNeedUpdate=!1),ce.isSpriteMaterial&&$t.setValue(V,"center",ee.center),$t.setValue(V,"modelViewMatrix",ee.modelViewMatrix),$t.setValue(V,"normalMatrix",ee.normalMatrix),$t.setValue(V,"modelMatrix",ee.matrixWorld),ce.isShaderMaterial||ce.isRawShaderMaterial){const hn=ce.uniformsGroups;for(let ns=0,is=hn.length;ns<is;ns++){const zh=hn[ns];X.update(zh,Yn),X.bind(zh,Yn)}}return Yn}function C0(O,Z){O.ambientLightColor.needsUpdate=Z,O.lightProbe.needsUpdate=Z,O.directionalLights.needsUpdate=Z,O.directionalLightShadows.needsUpdate=Z,O.pointLights.needsUpdate=Z,O.pointLightShadows.needsUpdate=Z,O.spotLights.needsUpdate=Z,O.spotLightShadows.needsUpdate=Z,O.rectAreaLights.needsUpdate=Z,O.hemisphereLights.needsUpdate=Z}function kh(O){return O.isMeshLambertMaterial||O.isMeshToonMaterial||O.isMeshPhongMaterial||O.isMeshStandardMaterial||O.isShadowMaterial||O.isShaderMaterial&&O.lights===!0}this.getActiveCubeFace=function(){return T},this.getActiveMipmapLevel=function(){return P},this.getRenderTarget=function(){return B},this.setRenderTargetTextures=function(O,Z,le){Ne.get(O.texture).__webglTexture=Z,Ne.get(O.depthTexture).__webglTexture=le;const ce=Ne.get(O);ce.__hasExternalTextures=!0,ce.__autoAllocateDepthBuffer=le===void 0,ce.__autoAllocateDepthBuffer||Me.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ce.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(O,Z){const le=Ne.get(O);le.__webglFramebuffer=Z,le.__useDefaultFramebuffer=Z===void 0},this.setRenderTarget=function(O,Z=0,le=0){B=O,T=Z,P=le;let ce=!0,ee=null,Be=!1,He=!1;if(O){const it=Ne.get(O);if(it.__useDefaultFramebuffer!==void 0)Ie.bindFramebuffer(V.FRAMEBUFFER,null),ce=!1;else if(it.__webglFramebuffer===void 0)z.setupRenderTarget(O);else if(it.__hasExternalTextures)z.rebindTextures(O,Ne.get(O.texture).__webglTexture,Ne.get(O.depthTexture).__webglTexture);else if(O.depthBuffer){const rt=O.depthTexture;if(it.__boundDepthTexture!==rt){if(rt!==null&&Ne.has(rt)&&(O.width!==rt.image.width||O.height!==rt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");z.setupDepthRenderbuffer(O)}}const vt=O.texture;(vt.isData3DTexture||vt.isDataArrayTexture||vt.isCompressedArrayTexture)&&(He=!0);const _t=Ne.get(O).__webglFramebuffer;O.isWebGLCubeRenderTarget?(Array.isArray(_t[Z])?ee=_t[Z][le]:ee=_t[Z],Be=!0):O.samples>0&&z.useMultisampledRTT(O)===!1?ee=Ne.get(O).__webglMultisampledFramebuffer:Array.isArray(_t)?ee=_t[le]:ee=_t,U.copy(O.viewport),j.copy(O.scissor),K=O.scissorTest}else U.copy(Y).multiplyScalar(F).floor(),j.copy(se).multiplyScalar(F).floor(),K=Ce;if(Ie.bindFramebuffer(V.FRAMEBUFFER,ee)&&ce&&Ie.drawBuffers(O,ee),Ie.viewport(U),Ie.scissor(j),Ie.setScissorTest(K),Be){const it=Ne.get(O.texture);V.framebufferTexture2D(V.FRAMEBUFFER,V.COLOR_ATTACHMENT0,V.TEXTURE_CUBE_MAP_POSITIVE_X+Z,it.__webglTexture,le)}else if(He){const it=Ne.get(O.texture),vt=Z||0;V.framebufferTextureLayer(V.FRAMEBUFFER,V.COLOR_ATTACHMENT0,it.__webglTexture,le||0,vt)}R=-1},this.readRenderTargetPixels=function(O,Z,le,ce,ee,Be,He){if(!(O&&O.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let nt=Ne.get(O).__webglFramebuffer;if(O.isWebGLCubeRenderTarget&&He!==void 0&&(nt=nt[He]),nt){Ie.bindFramebuffer(V.FRAMEBUFFER,nt);try{const it=O.texture,vt=it.format,_t=it.type;if(!De.textureFormatReadable(vt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!De.textureTypeReadable(_t)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Z>=0&&Z<=O.width-ce&&le>=0&&le<=O.height-ee&&V.readPixels(Z,le,ce,ee,_e.convert(vt),_e.convert(_t),Be)}finally{const it=B!==null?Ne.get(B).__webglFramebuffer:null;Ie.bindFramebuffer(V.FRAMEBUFFER,it)}}},this.readRenderTargetPixelsAsync=async function(O,Z,le,ce,ee,Be,He){if(!(O&&O.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let nt=Ne.get(O).__webglFramebuffer;if(O.isWebGLCubeRenderTarget&&He!==void 0&&(nt=nt[He]),nt){const it=O.texture,vt=it.format,_t=it.type;if(!De.textureFormatReadable(vt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!De.textureTypeReadable(_t))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(Z>=0&&Z<=O.width-ce&&le>=0&&le<=O.height-ee){Ie.bindFramebuffer(V.FRAMEBUFFER,nt);const rt=V.createBuffer();V.bindBuffer(V.PIXEL_PACK_BUFFER,rt),V.bufferData(V.PIXEL_PACK_BUFFER,Be.byteLength,V.STREAM_READ),V.readPixels(Z,le,ce,ee,_e.convert(vt),_e.convert(_t),0);const Pt=B!==null?Ne.get(B).__webglFramebuffer:null;Ie.bindFramebuffer(V.FRAMEBUFFER,Pt);const Ht=V.fenceSync(V.SYNC_GPU_COMMANDS_COMPLETE,0);return V.flush(),await gF(V,Ht,4),V.bindBuffer(V.PIXEL_PACK_BUFFER,rt),V.getBufferSubData(V.PIXEL_PACK_BUFFER,0,Be),V.deleteBuffer(rt),V.deleteSync(Ht),Be}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(O,Z=null,le=0){O.isTexture!==!0&&(fd("WebGLRenderer: copyFramebufferToTexture function signature has changed."),Z=arguments[0]||null,O=arguments[1]);const ce=Math.pow(2,-le),ee=Math.floor(O.image.width*ce),Be=Math.floor(O.image.height*ce),He=Z!==null?Z.x:0,nt=Z!==null?Z.y:0;z.setTexture2D(O,0),V.copyTexSubImage2D(V.TEXTURE_2D,le,0,0,He,nt,ee,Be),Ie.unbindTexture()},this.copyTextureToTexture=function(O,Z,le=null,ce=null,ee=0){O.isTexture!==!0&&(fd("WebGLRenderer: copyTextureToTexture function signature has changed."),ce=arguments[0]||null,O=arguments[1],Z=arguments[2],ee=arguments[3]||0,le=null);let Be,He,nt,it,vt,_t,rt,Pt,Ht;const ft=O.isCompressedTexture?O.mipmaps[ee]:O.image;le!==null?(Be=le.max.x-le.min.x,He=le.max.y-le.min.y,nt=le.isBox3?le.max.z-le.min.z:1,it=le.min.x,vt=le.min.y,_t=le.isBox3?le.min.z:0):(Be=ft.width,He=ft.height,nt=ft.depth||1,it=0,vt=0,_t=0),ce!==null?(rt=ce.x,Pt=ce.y,Ht=ce.z):(rt=0,Pt=0,Ht=0);const Et=_e.convert(Z.format),Bt=_e.convert(Z.type);let Ve;Z.isData3DTexture?(z.setTexture3D(Z,0),Ve=V.TEXTURE_3D):Z.isDataArrayTexture||Z.isCompressedArrayTexture?(z.setTexture2DArray(Z,0),Ve=V.TEXTURE_2D_ARRAY):(z.setTexture2D(Z,0),Ve=V.TEXTURE_2D),V.pixelStorei(V.UNPACK_FLIP_Y_WEBGL,Z.flipY),V.pixelStorei(V.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Z.premultiplyAlpha),V.pixelStorei(V.UNPACK_ALIGNMENT,Z.unpackAlignment);const dn=V.getParameter(V.UNPACK_ROW_LENGTH),Nt=V.getParameter(V.UNPACK_IMAGE_HEIGHT),Yn=V.getParameter(V.UNPACK_SKIP_PIXELS),Tn=V.getParameter(V.UNPACK_SKIP_ROWS),Qn=V.getParameter(V.UNPACK_SKIP_IMAGES);V.pixelStorei(V.UNPACK_ROW_LENGTH,ft.width),V.pixelStorei(V.UNPACK_IMAGE_HEIGHT,ft.height),V.pixelStorei(V.UNPACK_SKIP_PIXELS,it),V.pixelStorei(V.UNPACK_SKIP_ROWS,vt),V.pixelStorei(V.UNPACK_SKIP_IMAGES,_t);const fo=O.isDataArrayTexture||O.isData3DTexture,$t=Z.isDataArrayTexture||Z.isData3DTexture;if(O.isRenderTargetTexture||O.isDepthTexture){const Ri=Ne.get(O),po=Ne.get(Z),hn=Ne.get(Ri.__renderTarget),ns=Ne.get(po.__renderTarget);Ie.bindFramebuffer(V.READ_FRAMEBUFFER,hn.__webglFramebuffer),Ie.bindFramebuffer(V.DRAW_FRAMEBUFFER,ns.__webglFramebuffer);for(let is=0;is<nt;is++)fo&&V.framebufferTextureLayer(V.READ_FRAMEBUFFER,V.COLOR_ATTACHMENT0,Ne.get(O).__webglTexture,ee,_t+is),O.isDepthTexture?($t&&V.framebufferTextureLayer(V.DRAW_FRAMEBUFFER,V.COLOR_ATTACHMENT0,Ne.get(Z).__webglTexture,ee,Ht+is),V.blitFramebuffer(it,vt,Be,He,rt,Pt,Be,He,V.DEPTH_BUFFER_BIT,V.NEAREST)):$t?V.copyTexSubImage3D(Ve,ee,rt,Pt,Ht+is,it,vt,Be,He):V.copyTexSubImage2D(Ve,ee,rt,Pt,Ht+is,it,vt,Be,He);Ie.bindFramebuffer(V.READ_FRAMEBUFFER,null),Ie.bindFramebuffer(V.DRAW_FRAMEBUFFER,null)}else $t?O.isDataTexture||O.isData3DTexture?V.texSubImage3D(Ve,ee,rt,Pt,Ht,Be,He,nt,Et,Bt,ft.data):Z.isCompressedArrayTexture?V.compressedTexSubImage3D(Ve,ee,rt,Pt,Ht,Be,He,nt,Et,ft.data):V.texSubImage3D(Ve,ee,rt,Pt,Ht,Be,He,nt,Et,Bt,ft):O.isDataTexture?V.texSubImage2D(V.TEXTURE_2D,ee,rt,Pt,Be,He,Et,Bt,ft.data):O.isCompressedTexture?V.compressedTexSubImage2D(V.TEXTURE_2D,ee,rt,Pt,ft.width,ft.height,Et,ft.data):V.texSubImage2D(V.TEXTURE_2D,ee,rt,Pt,Be,He,Et,Bt,ft);V.pixelStorei(V.UNPACK_ROW_LENGTH,dn),V.pixelStorei(V.UNPACK_IMAGE_HEIGHT,Nt),V.pixelStorei(V.UNPACK_SKIP_PIXELS,Yn),V.pixelStorei(V.UNPACK_SKIP_ROWS,Tn),V.pixelStorei(V.UNPACK_SKIP_IMAGES,Qn),ee===0&&Z.generateMipmaps&&V.generateMipmap(Ve),Ie.unbindTexture()},this.copyTextureToTexture3D=function(O,Z,le=null,ce=null,ee=0){return O.isTexture!==!0&&(fd("WebGLRenderer: copyTextureToTexture3D function signature has changed."),le=arguments[0]||null,ce=arguments[1]||null,O=arguments[2],Z=arguments[3],ee=arguments[4]||0),fd('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(O,Z,le,ce,ee)},this.initRenderTarget=function(O){Ne.get(O).__webglFramebuffer===void 0&&z.setupRenderTarget(O)},this.initTexture=function(O){O.isCubeTexture?z.setTextureCube(O,0):O.isData3DTexture?z.setTexture3D(O,0):O.isDataArrayTexture||O.isCompressedArrayTexture?z.setTexture2DArray(O,0):z.setTexture2D(O,0),Ie.unbindTexture()},this.resetState=function(){T=0,P=0,B=null,Ie.reset(),ze.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return ps}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorspace=Ut._getDrawingBufferColorSpace(e),t.unpackColorSpace=Ut._getUnpackColorSpace()}}class t0{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Ee(e),this.density=t}clone(){return new t0(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class n0{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new Ee(e),this.near=t,this.far=i}clone(){return new n0(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class tS extends It{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Ti,this.environmentIntensity=1,this.environmentRotation=new Ti,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class cu{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=th,this.updateRanges=[],this.version=0,this.uuid=ur()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ur()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ur()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Bi=new D;class so{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Bi.fromBufferAttribute(this,t),Bi.applyMatrix4(e),this.setXYZ(t,Bi.x,Bi.y,Bi.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Bi.fromBufferAttribute(this,t),Bi.applyNormalMatrix(e),this.setXYZ(t,Bi.x,Bi.y,Bi.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Bi.fromBufferAttribute(this,t),Bi.transformDirection(e),this.setXYZ(t,Bi.x,Bi.y,Bi.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=Ni(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=wt(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=wt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=wt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=wt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=wt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Ni(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Ni(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Ni(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Ni(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=wt(t,this.array),i=wt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=wt(t,this.array),i=wt(i,this.array),r=wt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=wt(t,this.array),i=wt(i,this.array),r=wt(r,this.array),s=wt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new yt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new so(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class nS extends mn{static get type(){return"SpriteMaterial"}constructor(e){super(),this.isSpriteMaterial=!0,this.color=new Ee(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let sc;const ju=new D,oc=new D,ac=new D,lc=new ue,Xu=new ue,WI=new Qe,vp=new D,Ju=new D,yp=new D,vE=new ue,Iy=new ue,yE=new ue;class jI extends It{constructor(e=new nS){if(super(),this.isSprite=!0,this.type="Sprite",sc===void 0){sc=new gt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new cu(t,5);sc.setIndex([0,1,2,0,2,3]),sc.setAttribute("position",new so(i,3,0,!1)),sc.setAttribute("uv",new so(i,2,3,!1))}this.geometry=sc,this.material=e,this.center=new ue(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),oc.setFromMatrixScale(this.matrixWorld),WI.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),ac.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&oc.multiplyScalar(-ac.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;xp(vp.set(-.5,-.5,0),ac,o,oc,r,s),xp(Ju.set(.5,-.5,0),ac,o,oc,r,s),xp(yp.set(.5,.5,0),ac,o,oc,r,s),vE.set(0,0),Iy.set(1,0),yE.set(1,1);let a=e.ray.intersectTriangle(vp,Ju,yp,!1,ju);if(a===null&&(xp(Ju.set(-.5,.5,0),ac,o,oc,r,s),Iy.set(0,1),a=e.ray.intersectTriangle(vp,yp,Ju,!1,ju),a===null))return;const l=e.ray.origin.distanceTo(ju);l<e.near||l>e.far||t.push({distance:l,point:ju.clone(),uv:wi.getInterpolation(ju,vp,Ju,yp,vE,Iy,yE,new ue),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function xp(n,e,t,i,r,s){lc.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(Xu.x=s*lc.x-r*lc.y,Xu.y=r*lc.x+s*lc.y):Xu.copy(lc),n.copy(e),n.x+=Xu.x,n.y+=Xu.y,n.applyMatrix4(WI)}const _p=new D,xE=new D;class XI extends It{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let i=0;i<t.length;i++)if(t[i].distance===e){const r=t.splice(i,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){_p.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(_p);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){_p.setFromMatrixPosition(e.matrixWorld),xE.setFromMatrixPosition(this.matrixWorld);const i=_p.distanceTo(xE)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),i>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const _E=new D,AE=new Vt,SE=new Vt,Pz=new D,ME=new Qe,Ap=new D,Py=new Gn,wE=new Qe,By=new Ss;class i0 extends xt{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=x_,this.bindMatrix=new Qe,this.bindMatrixInverse=new Qe,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new ai),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Ap),this.boundingBox.expandByPoint(Ap)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Gn),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Ap),this.boundingSphere.expandByPoint(Ap)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Py.copy(this.boundingSphere),Py.applyMatrix4(r),e.ray.intersectsSphere(Py)!==!1&&(wE.copy(r).invert(),By.copy(e.ray).applyMatrix4(wE),!(this.boundingBox!==null&&By.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,By)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Vt,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===x_?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===fI?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;AE.fromBufferAttribute(r.attributes.skinIndex,e),SE.fromBufferAttribute(r.attributes.skinWeight,e),_E.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=SE.getComponent(s);if(o!==0){const a=AE.getComponent(s);ME.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(Pz.copy(_E).applyMatrix4(ME),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Ch extends It{constructor(){super(),this.isBone=!0,this.type="Bone"}}class xs extends tn{constructor(e=null,t=1,i=1,r,s,o,a,l,c=Hn,h=Hn,f,p){super(null,o,a,l,c,h,r,s,f,p),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const EE=new Qe,Bz=new Qe;class uu{constructor(e=[],t=[]){this.uuid=ur(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Qe)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new Qe;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:Bz;EE.multiplyMatrices(a,t[s]),EE.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new uu(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new xs(t,e,e,Ei,Fi);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new Ch),this.bones.push(o),this.boneInverses.push(new Qe().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class na extends yt{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const cc=new Qe,CE=new Qe,Sp=[],bE=new ai,Lz=new Qe,Ku=new xt,Yu=new Gn;class bh extends xt{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new na(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,Lz)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new ai),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,cc),bE.copy(e.boundingBox).applyMatrix4(cc),this.boundingBox.union(bE)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Gn),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,cc),Yu.copy(e.boundingSphere).applyMatrix4(cc),this.boundingSphere.union(Yu)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=i.length+1,o=e*s+1;for(let a=0;a<i.length;a++)i[a]=r[o+a]}raycast(e,t){const i=this.matrixWorld,r=this.count;if(Ku.geometry=this.geometry,Ku.material=this.material,Ku.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Yu.copy(this.boundingSphere),Yu.applyMatrix4(i),e.ray.intersectsSphere(Yu)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,cc),CE.multiplyMatrices(i,cc),Ku.matrixWorld=CE,Ku.raycast(e,Sp);for(let o=0,a=Sp.length;o<a;o++){const l=Sp[o];l.instanceId=s,l.object=this,t.push(l)}Sp.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new na(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new xs(new Float32Array(r*this.count),r,this.count,Yg,Fi));const s=this.morphTexture.source.data.data;let o=0;for(let c=0;c<i.length;c++)o+=i[c];const a=this.geometry.morphTargetsRelative?1:1-o,l=r*e;s[l]=a,s.set(i,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function Ly(n,e){return n-e}function Dz(n,e){return n.z-e.z}function Nz(n,e){return e.z-n.z}class Fz{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i,r){const s=this.pool,o=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const a=s[this.index];o.push(a),this.index++,a.start=e,a.count=t,a.z=i,a.index=r}reset(){this.list.length=0,this.index=0}}const ji=new Qe,Uz=new Ee(1,1,1),Dy=new wh,Mp=new ai,Ta=new Gn,Qu=new D,TE=new D,Oz=new D,Ny=new Fz,Ai=new xt,wp=[];function kz(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let s=0;s<r;s++)for(let o=0;o<i;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*i);e.needsUpdate=!0}function Ra(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)e[i]=n[i]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class JI extends xt{get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}constructor(e,t,i=t*2,r){super(new gt,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new xs(t,e,e,Ei,Fi);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new xs(t,e,e,xh,ro);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new xs(t,e,e,Ei,Fi);i.colorSpace=Ut.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:a,itemSize:l,normalized:c}=o,h=new a.constructor(i*l),f=new yt(h,l,c);t.setAttribute(s,f)}if(e.getIndex()!==null){const s=i>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new yt(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error(`BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),s=t.getAttribute(i);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ai);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,ji),this.getBoundingBoxAt(s,Mp).applyMatrix4(ji),e.union(Mp)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Gn);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,ji),this.getBoundingSphereAt(s,Ta).applyMatrix4(ji),e.union(Ta)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(Ly),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=i):(r=this._instanceInfo.length,this._instanceInfo.push(i));const s=this._matricesTexture;ji.identity().toArray(s.image.data,r*16),s.needsUpdate=!0;const o=this._colorsTexture;return o&&(Uz.toArray(o.image.data,r*4),o.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,t=-1,i=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const o=e.getIndex();if(o!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=i===-1?o.count:i),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");let l;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(Ly),l=this._availableGeometryIds.shift(),s[l]=r):(l=this._geometryCount,this._geometryCount++,s.push(r)),this.setGeometryAt(l,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,l}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,s=i.getIndex(),o=t.getIndex(),a=this._geometryInfo[e];if(r&&o.count>a.reservedIndexCount||t.attributes.position.count>a.reservedVertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,c=a.reservedVertexCount;a.vertexCount=t.getAttribute("position").count;for(const h in i.attributes){const f=t.getAttribute(h),p=i.getAttribute(h);kz(f,p,l);const m=f.itemSize;for(let v=f.count,A=c;v<A;v++){const x=l+v;for(let g=0;g<m;g++)p.setComponent(x,g,0)}p.needsUpdate=!0,p.addUpdateRange(l*m,c*m)}if(r){const h=a.indexStart,f=a.reservedIndexCount;a.indexCount=t.getIndex().count;for(let p=0;p<o.count;p++)s.setX(h+p,l+o.getX(p));for(let p=o.count,m=f;p<m;p++)s.setX(h+p,l);s.needsUpdate=!0,s.addUpdateRange(h,a.reservedIndexCount)}return a.start=r?a.indexStart:a.vertexStart,a.count=r?a.indexCount:a.vertexCount,a.boundingBox=null,t.boundingBox!==null&&(a.boundingBox=t.boundingBox.clone()),a.boundingSphere=null,t.boundingSphere!==null&&(a.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const i=this._instanceInfo;for(let r=0,s=i.length;r<s;r++)i[r].geometryIndex===e&&this.deleteInstance(r);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){const t=this._instanceInfo;return e>=t.length||t[e].active===!1?this:(t[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this)}optimize(){let e=0,t=0;const i=this._geometryInfo,r=i.map((o,a)=>a).sort((o,a)=>i[o].vertexStart-i[a].vertexStart),s=this.geometry;for(let o=0,a=i.length;o<a;o++){const l=r[o],c=i[l];if(c.active!==!1){if(s.index!==null){if(c.indexStart!==t){const{indexStart:h,vertexStart:f,reservedIndexCount:p}=c,m=s.index,v=m.array,A=e-f;for(let x=h;x<h+p;x++)v[x]=v[x]+A;m.array.copyWithin(t,h,h+p),m.addUpdateRange(t,p),c.indexStart=t}t+=c.reservedIndexCount}if(c.vertexStart!==e){const{vertexStart:h,reservedVertexCount:f}=c,p=s.attributes;for(const m in p){const v=p[m],{array:A,itemSize:x}=v;A.copyWithin(e*x,h*x,(h+f)*x),v.addUpdateRange(e*x,f*x)}c.vertexStart=e}e+=c.reservedVertexCount,c.start=s.index?c.indexStart:c.vertexStart,this._nextIndexStart=s.index?c.indexStart+c.reservedIndexCount:0,this._nextVertexStart=c.vertexStart+c.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){const s=new ai,o=i.index,a=i.attributes.position;for(let l=r.start,c=r.start+r.count;l<c;l++){let h=l;o&&(h=o.getX(h)),s.expandByPoint(Qu.fromBufferAttribute(a,h))}r.boundingBox=s}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){const s=new Gn;this.getBoundingBoxAt(e,Mp),Mp.getCenter(s.center);const o=i.index,a=i.attributes.position;let l=0;for(let c=r.start,h=r.start+r.count;c<h;c++){let f=c;o&&(f=o.getX(f)),Qu.fromBufferAttribute(a,f),l=Math.max(l,s.center.distanceToSquared(Qu))}s.radius=Math.sqrt(l),r.boundingSphere=s}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){const i=this._instanceInfo,r=this._matricesTexture,s=this._matricesTexture.image.data;return e>=i.length||i[e].active===!1?this:(t.toArray(s,e*16),r.needsUpdate=!0,this)}getMatrixAt(e,t){const i=this._instanceInfo,r=this._matricesTexture.image.data;return e>=i.length||i[e].active===!1?null:t.fromArray(r,e*16)}setColorAt(e,t){this._colorsTexture===null&&this._initColorsTexture();const i=this._colorsTexture,r=this._colorsTexture.image.data,s=this._instanceInfo;return e>=s.length||s[e].active===!1?this:(t.toArray(r,e*4),i.needsUpdate=!0,this)}getColorAt(e,t){const i=this._colorsTexture.image.data,r=this._instanceInfo;return e>=r.length||r[e].active===!1?null:t.fromArray(i,e*4)}setVisibleAt(e,t){const i=this._instanceInfo;return e>=i.length||i[e].active===!1||i[e].visible===t?this:(i[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._instanceInfo;return e>=t.length||t[e].active===!1?!1:t[e].visible}setGeometryIdAt(e,t){const i=this._instanceInfo,r=this._geometryInfo;return e>=i.length||i[e].active===!1||t>=r.length||r[t].active===!1?null:(i[e].geometryIndex=t,this)}getGeometryIdAt(e){const t=this._instanceInfo;return e>=t.length||t[e].active===!1?-1:t[e].geometryIndex}getGeometryRangeAt(e,t={}){if(e<0||e>=this._geometryCount)return null;const i=this._geometryInfo[e];return t.vertexStart=i.vertexStart,t.vertexCount=i.vertexCount,t.reservedVertexCount=i.reservedVertexCount,t.indexStart=i.indexStart,t.indexCount=i.indexCount,t.reservedIndexCount=i.reservedIndexCount,t.start=i.start,t.count=i.count,t}setInstanceCount(e){const t=this._availableInstanceIds,i=this._instanceInfo;for(t.sort(Ly);t[t.length-1]===i.length;)i.pop(),t.pop();if(e<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),s=new Int32Array(e);Ra(this._multiDrawCounts,r),Ra(this._multiDrawStarts,s),this._multiDrawCounts=r,this._multiDrawStarts=s,this._maxInstanceCount=e;const o=this._indirectTexture,a=this._matricesTexture,l=this._colorsTexture;o.dispose(),this._initIndirectTexture(),Ra(o.image.data,this._indirectTexture.image.data),a.dispose(),this._initMatricesTexture(),Ra(a.image.data,this._matricesTexture.image.data),l&&(l.dispose(),this._initColorsTexture(),Ra(l.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const i=[...this._geometryInfo].filter(a=>a.active);if(Math.max(...i.map(a=>a.vertexStart+a.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(l=>l.indexStart+l.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new gt,this._initializeGeometry(s));const o=this.geometry;s.index&&Ra(s.index.array,o.index.array);for(const a in s.attributes)Ra(s.attributes[a].array,o.attributes[a].array)}raycast(e,t){const i=this._instanceInfo,r=this._geometryInfo,s=this.matrixWorld,o=this.geometry;Ai.material=this.material,Ai.geometry.index=o.index,Ai.geometry.attributes=o.attributes,Ai.geometry.boundingBox===null&&(Ai.geometry.boundingBox=new ai),Ai.geometry.boundingSphere===null&&(Ai.geometry.boundingSphere=new Gn);for(let a=0,l=i.length;a<l;a++){if(!i[a].visible||!i[a].active)continue;const c=i[a].geometryIndex,h=r[c];Ai.geometry.setDrawRange(h.start,h.count),this.getMatrixAt(a,Ai.matrixWorld).premultiply(s),this.getBoundingBoxAt(c,Ai.geometry.boundingBox),this.getBoundingSphereAt(c,Ai.geometry.boundingSphere),Ai.raycast(e,wp);for(let f=0,p=wp.length;f<p;f++){const m=wp[f];m.object=this,m.batchId=a,t.push(m)}wp.length=0}Ai.material=null,Ai.geometry.index=null,Ai.geometry.attributes={},Ai.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,i,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=r.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._instanceInfo,c=this._multiDrawStarts,h=this._multiDrawCounts,f=this._geometryInfo,p=this.perObjectFrustumCulled,m=this._indirectTexture,v=m.image.data;p&&(ji.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),Dy.setFromProjectionMatrix(ji,e.coordinateSystem));let A=0;if(this.sortObjects){ji.copy(this.matrixWorld).invert(),Qu.setFromMatrixPosition(i.matrixWorld).applyMatrix4(ji),TE.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(ji);for(let S=0,_=l.length;S<_;S++)if(l[S].visible&&l[S].active){const w=l[S].geometryIndex;this.getMatrixAt(S,ji),this.getBoundingSphereAt(w,Ta).applyMatrix4(ji);let I=!1;if(p&&(I=!Dy.intersectsSphere(Ta)),!I){const T=f[w],P=Oz.subVectors(Ta.center,Qu).dot(TE);Ny.push(T.start,T.count,P,S)}}const x=Ny.list,g=this.customSort;g===null?x.sort(s.transparent?Nz:Dz):g.call(this,x,i);for(let S=0,_=x.length;S<_;S++){const w=x[S];c[A]=w.start*a,h[A]=w.count,v[A]=w.index,A++}Ny.reset()}else for(let x=0,g=l.length;x<g;x++)if(l[x].visible&&l[x].active){const S=l[x].geometryIndex;let _=!1;if(p&&(this.getMatrixAt(x,ji),this.getBoundingSphereAt(S,Ta).applyMatrix4(ji),_=!Dy.intersectsSphere(Ta)),!_){const w=f[S];c[A]=w.start*a,h[A]=w.count,v[A]=x,A++}}m.needsUpdate=!0,this._multiDrawCount=A,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,s,o){this.onBeforeRender(e,null,r,s,o)}}class ui extends mn{static get type(){return"LineBasicMaterial"}constructor(e){super(),this.isLineBasicMaterial=!0,this.color=new Ee(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const xg=new D,_g=new D,RE=new Qe,qu=new Ss,Ep=new Gn,Fy=new D,IE=new D;class Ms extends It{constructor(e=new gt,t=new ui){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)xg.fromBufferAttribute(t,r-1),_g.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=xg.distanceTo(_g);e.setAttribute("lineDistance",new st(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Ep.copy(i.boundingSphere),Ep.applyMatrix4(r),Ep.radius+=s,e.ray.intersectsSphere(Ep)===!1)return;RE.copy(r).invert(),qu.copy(e.ray).applyMatrix4(RE);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=this.isLineSegments?2:1,h=i.index,p=i.attributes.position;if(h!==null){const m=Math.max(0,o.start),v=Math.min(h.count,o.start+o.count);for(let A=m,x=v-1;A<x;A+=c){const g=h.getX(A),S=h.getX(A+1),_=Cp(this,e,qu,l,g,S);_&&t.push(_)}if(this.isLineLoop){const A=h.getX(v-1),x=h.getX(m),g=Cp(this,e,qu,l,A,x);g&&t.push(g)}}else{const m=Math.max(0,o.start),v=Math.min(p.count,o.start+o.count);for(let A=m,x=v-1;A<x;A+=c){const g=Cp(this,e,qu,l,A,A+1);g&&t.push(g)}if(this.isLineLoop){const A=Cp(this,e,qu,l,v-1,m);A&&t.push(A)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function Cp(n,e,t,i,r,s){const o=n.geometry.attributes.position;if(xg.fromBufferAttribute(o,r),_g.fromBufferAttribute(o,s),t.distanceSqToSegment(xg,_g,Fy,IE)>i)return;Fy.applyMatrix4(n.matrixWorld);const l=e.ray.origin.distanceTo(Fy);if(!(l<e.near||l>e.far))return{distance:l,point:IE.clone().applyMatrix4(n.matrixWorld),index:r,face:null,faceIndex:null,barycoord:null,object:n}}const PE=new D,BE=new D;class Fr extends Ms{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)PE.fromBufferAttribute(t,r),BE.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+PE.distanceTo(BE);e.setAttribute("lineDistance",new st(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class r0 extends Ms{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Th extends mn{static get type(){return"PointsMaterial"}constructor(e){super(),this.isPointsMaterial=!0,this.color=new Ee(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const LE=new Qe,E_=new Ss,bp=new Gn,Tp=new D;class s0 extends It{constructor(e=new gt,t=new Th){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),bp.copy(i.boundingSphere),bp.applyMatrix4(r),bp.radius+=s,e.ray.intersectsSphere(bp)===!1)return;LE.copy(r).invert(),E_.copy(e.ray).applyMatrix4(LE);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=i.index,f=i.attributes.position;if(c!==null){const p=Math.max(0,o.start),m=Math.min(c.count,o.start+o.count);for(let v=p,A=m;v<A;v++){const x=c.getX(v);Tp.fromBufferAttribute(f,x),DE(Tp,x,l,r,e,t,this)}}else{const p=Math.max(0,o.start),m=Math.min(f.count,o.start+o.count);for(let v=p,A=m;v<A;v++)Tp.fromBufferAttribute(f,v),DE(Tp,v,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function DE(n,e,t,i,r,s,o){const a=E_.distanceSqToPoint(n);if(a<t){const l=new D;E_.closestPointToPoint(n,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class KI extends tn{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:en,this.magFilter=s!==void 0?s:en,this.generateMipmaps=!1;const h=this;function f(){h.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class zz extends tn{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Hn,this.minFilter=Hn,this.generateMipmaps=!1,this.needsUpdate=!0}}class o0 extends tn{constructor(e,t,i,r,s,o,a,l,c,h,f,p){super(null,o,a,l,c,h,r,s,f,p),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Hz extends o0{constructor(e,t,i,r,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Qi,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Gz extends o0{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,io),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class C_ extends tn{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class $r{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let a=0,l=s-1,c;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=i[r]-o,c<0)a=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,i[r]===o)return r/(s-1);const h=i[r],p=i[r+1]-h,m=(o-h)/p;return(r+m)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new ue:new D);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new D,r=[],s=[],o=[],a=new D,l=new Qe;for(let m=0;m<=e;m++){const v=m/e;r[m]=this.getTangentAt(v,new D)}s[0]=new D,o[0]=new D;let c=Number.MAX_VALUE;const h=Math.abs(r[0].x),f=Math.abs(r[0].y),p=Math.abs(r[0].z);h<=c&&(c=h,i.set(1,0,0)),f<=c&&(c=f,i.set(0,1,0)),p<=c&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(r[m-1],r[m]),a.length()>Number.EPSILON){a.normalize();const v=Math.acos(En(r[m-1].dot(r[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,v))}o[m].crossVectors(r[m],s[m])}if(t===!0){let m=Math.acos(En(s[0].dot(s[e]),-1,1));m/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let v=1;v<=e;v++)s[v].applyMatrix4(l.makeRotationAxis(r[v],m*v)),o[v].crossVectors(r[v],s[v])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class a0 extends $r{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t=new ue){const i=t,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const h=Math.cos(this.aRotation),f=Math.sin(this.aRotation),p=l-this.aX,m=c-this.aY;l=p*h-m*f+this.aX,c=p*f+m*h+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class YI extends a0{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function iS(){let n=0,e=0,t=0,i=0;function r(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,h,f){let p=(o-s)/c-(a-s)/(c+h)+(a-o)/h,m=(a-o)/h-(l-o)/(h+f)+(l-a)/f;p*=h,m*=h,r(o,a,p,m)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+i*a}}}const Rp=new D,Uy=new iS,Oy=new iS,ky=new iS;class Tc extends $r{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new D){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,h;this.closed||a>0?c=r[(a-1)%s]:(Rp.subVectors(r[0],r[1]).add(r[0]),c=Rp);const f=r[a%s],p=r[(a+1)%s];if(this.closed||a+2<s?h=r[(a+2)%s]:(Rp.subVectors(r[s-1],r[s-2]).add(r[s-1]),h=Rp),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let v=Math.pow(c.distanceToSquared(f),m),A=Math.pow(f.distanceToSquared(p),m),x=Math.pow(p.distanceToSquared(h),m);A<1e-4&&(A=1),v<1e-4&&(v=A),x<1e-4&&(x=A),Uy.initNonuniformCatmullRom(c.x,f.x,p.x,h.x,v,A,x),Oy.initNonuniformCatmullRom(c.y,f.y,p.y,h.y,v,A,x),ky.initNonuniformCatmullRom(c.z,f.z,p.z,h.z,v,A,x)}else this.curveType==="catmullrom"&&(Uy.initCatmullRom(c.x,f.x,p.x,h.x,this.tension),Oy.initCatmullRom(c.y,f.y,p.y,h.y,this.tension),ky.initCatmullRom(c.z,f.z,p.z,h.z,this.tension));return i.set(Uy.calc(l),Oy.calc(l),ky.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new D().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function NE(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,a=n*n,l=n*a;return(2*t-2*i+s+o)*l+(-3*t+3*i-2*s-o)*a+s*n+t}function Vz(n,e){const t=1-n;return t*t*e}function Wz(n,e){return 2*(1-n)*n*e}function jz(n,e){return n*n*e}function Bd(n,e,t,i){return Vz(n,e)+Wz(n,t)+jz(n,i)}function Xz(n,e){const t=1-n;return t*t*t*e}function Jz(n,e){const t=1-n;return 3*t*t*n*e}function Kz(n,e){return 3*(1-n)*n*n*e}function Yz(n,e){return n*n*n*e}function Ld(n,e,t,i,r){return Xz(n,e)+Jz(n,t)+Kz(n,i)+Yz(n,r)}class rS extends $r{constructor(e=new ue,t=new ue,i=new ue,r=new ue){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new ue){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Ld(e,r.x,s.x,o.x,a.x),Ld(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class QI extends $r{constructor(e=new D,t=new D,i=new D,r=new D){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new D){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Ld(e,r.x,s.x,o.x,a.x),Ld(e,r.y,s.y,o.y,a.y),Ld(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class sS extends $r{constructor(e=new ue,t=new ue){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new ue){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ue){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class qI extends $r{constructor(e=new D,t=new D){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new D){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new D){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class oS extends $r{constructor(e=new ue,t=new ue,i=new ue){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new ue){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(Bd(e,r.x,s.x,o.x),Bd(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class aS extends $r{constructor(e=new D,t=new D,i=new D){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new D){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(Bd(e,r.x,s.x,o.x),Bd(e,r.y,s.y,o.y),Bd(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class lS extends $r{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new ue){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],c=r[o],h=r[o>r.length-2?r.length-1:o+1],f=r[o>r.length-3?r.length-1:o+2];return i.set(NE(a,l.x,c.x,h.x,f.x),NE(a,l.y,c.y,h.y,f.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new ue().fromArray(r))}return this}}var Ag=Object.freeze({__proto__:null,ArcCurve:YI,CatmullRomCurve3:Tc,CubicBezierCurve:rS,CubicBezierCurve3:QI,EllipseCurve:a0,LineCurve:sS,LineCurve3:qI,QuadraticBezierCurve:oS,QuadraticBezierCurve3:aS,SplineCurve:lS});class ZI extends $r{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Ag[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const h=l[c];i&&i.equals(h)||(t.push(h),i=h)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new Ag[r.type]().fromJSON(r))}return this}}class rh extends ZI{constructor(e){super(),this.type="Path",this.currentPoint=new ue,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new sS(this.currentPoint.clone(),new ue(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new oS(this.currentPoint.clone(),new ue(e,t),new ue(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new rS(this.currentPoint.clone(),new ue(e,t),new ue(i,r),new ue(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new lS(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,l){const c=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+c,t+h,i,r,s,o,a,l),this}absellipse(e,t,i,r,s,o,a,l){const c=new a0(e,t,i,r,s,o,a,l);if(this.curves.length>0){const f=c.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(c);const h=c.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Rh extends gt{constructor(e=[new ue(0,-.5),new ue(.5,0),new ue(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=En(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],h=1/t,f=new D,p=new ue,m=new D,v=new D,A=new D;let x=0,g=0;for(let S=0;S<=e.length-1;S++)switch(S){case 0:x=e[S+1].x-e[S].x,g=e[S+1].y-e[S].y,m.x=g*1,m.y=-x,m.z=g*0,A.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(A.x,A.y,A.z);break;default:x=e[S+1].x-e[S].x,g=e[S+1].y-e[S].y,m.x=g*1,m.y=-x,m.z=g*0,v.copy(m),m.x+=A.x,m.y+=A.y,m.z+=A.z,m.normalize(),l.push(m.x,m.y,m.z),A.copy(v)}for(let S=0;S<=t;S++){const _=i+S*h*r,w=Math.sin(_),I=Math.cos(_);for(let T=0;T<=e.length-1;T++){f.x=e[T].x*w,f.y=e[T].y,f.z=e[T].x*I,o.push(f.x,f.y,f.z),p.x=S/t,p.y=T/(e.length-1),a.push(p.x,p.y);const P=l[3*T+0]*w,B=l[3*T+1],R=l[3*T+0]*I;c.push(P,B,R)}}for(let S=0;S<t;S++)for(let _=0;_<e.length-1;_++){const w=_+S*e.length,I=w,T=w+e.length,P=w+e.length+1,B=w+1;s.push(I,T,B),s.push(P,B,T)}this.setIndex(s),this.setAttribute("position",new st(o,3)),this.setAttribute("uv",new st(a,2)),this.setAttribute("normal",new st(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Rh(e.points,e.segments,e.phiStart,e.phiLength)}}class l0 extends Rh{constructor(e=1,t=1,i=4,r=8){const s=new rh;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new l0(e.radius,e.length,e.capSegments,e.radialSegments)}}class cl extends gt{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],l=[],c=new D,h=new ue;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let f=0,p=3;f<=t;f++,p+=3){const m=i+f/t*r;c.x=e*Math.cos(m),c.y=e*Math.sin(m),o.push(c.x,c.y,c.z),a.push(0,0,1),h.x=(o[p]/e+1)/2,h.y=(o[p+1]/e+1)/2,l.push(h.x,h.y)}for(let f=1;f<=t;f++)s.push(f,f+1,0);this.setIndex(s),this.setAttribute("position",new st(o,3)),this.setAttribute("normal",new st(a,3)),this.setAttribute("uv",new st(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new cl(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class oo extends gt{constructor(e=1,t=1,i=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const h=[],f=[],p=[],m=[];let v=0;const A=[],x=i/2;let g=0;S(),o===!1&&(e>0&&_(!0),t>0&&_(!1)),this.setIndex(h),this.setAttribute("position",new st(f,3)),this.setAttribute("normal",new st(p,3)),this.setAttribute("uv",new st(m,2));function S(){const w=new D,I=new D;let T=0;const P=(t-e)/i;for(let B=0;B<=s;B++){const R=[],C=B/s,U=C*(t-e)+e;for(let j=0;j<=r;j++){const K=j/r,te=K*l+a,de=Math.sin(te),re=Math.cos(te);I.x=U*de,I.y=-C*i+x,I.z=U*re,f.push(I.x,I.y,I.z),w.set(de,P,re).normalize(),p.push(w.x,w.y,w.z),m.push(K,1-C),R.push(v++)}A.push(R)}for(let B=0;B<r;B++)for(let R=0;R<s;R++){const C=A[R][B],U=A[R+1][B],j=A[R+1][B+1],K=A[R][B+1];(e>0||R!==0)&&(h.push(C,U,K),T+=3),(t>0||R!==s-1)&&(h.push(U,j,K),T+=3)}c.addGroup(g,T,0),g+=T}function _(w){const I=v,T=new ue,P=new D;let B=0;const R=w===!0?e:t,C=w===!0?1:-1;for(let j=1;j<=r;j++)f.push(0,x*C,0),p.push(0,C,0),m.push(.5,.5),v++;const U=v;for(let j=0;j<=r;j++){const te=j/r*l+a,de=Math.cos(te),re=Math.sin(te);P.x=R*re,P.y=x*C,P.z=R*de,f.push(P.x,P.y,P.z),p.push(0,C,0),T.x=de*.5+.5,T.y=re*.5*C+.5,m.push(T.x,T.y),v++}for(let j=0;j<r;j++){const K=I+j,te=U+j;w===!0?h.push(te,te+1,K):h.push(te+1,te,K),B+=3}c.addGroup(g,B,w===!0?1:2),g+=B}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new oo(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class c0 extends oo{constructor(e=1,t=1,i=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new c0(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class ua extends gt{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];a(r),c(i),h(),this.setAttribute("position",new st(s,3)),this.setAttribute("normal",new st(s.slice(),3)),this.setAttribute("uv",new st(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(S){const _=new D,w=new D,I=new D;for(let T=0;T<t.length;T+=3)m(t[T+0],_),m(t[T+1],w),m(t[T+2],I),l(_,w,I,S)}function l(S,_,w,I){const T=I+1,P=[];for(let B=0;B<=T;B++){P[B]=[];const R=S.clone().lerp(w,B/T),C=_.clone().lerp(w,B/T),U=T-B;for(let j=0;j<=U;j++)j===0&&B===T?P[B][j]=R:P[B][j]=R.clone().lerp(C,j/U)}for(let B=0;B<T;B++)for(let R=0;R<2*(T-B)-1;R++){const C=Math.floor(R/2);R%2===0?(p(P[B][C+1]),p(P[B+1][C]),p(P[B][C])):(p(P[B][C+1]),p(P[B+1][C+1]),p(P[B+1][C]))}}function c(S){const _=new D;for(let w=0;w<s.length;w+=3)_.x=s[w+0],_.y=s[w+1],_.z=s[w+2],_.normalize().multiplyScalar(S),s[w+0]=_.x,s[w+1]=_.y,s[w+2]=_.z}function h(){const S=new D;for(let _=0;_<s.length;_+=3){S.x=s[_+0],S.y=s[_+1],S.z=s[_+2];const w=x(S)/2/Math.PI+.5,I=g(S)/Math.PI+.5;o.push(w,1-I)}v(),f()}function f(){for(let S=0;S<o.length;S+=6){const _=o[S+0],w=o[S+2],I=o[S+4],T=Math.max(_,w,I),P=Math.min(_,w,I);T>.9&&P<.1&&(_<.2&&(o[S+0]+=1),w<.2&&(o[S+2]+=1),I<.2&&(o[S+4]+=1))}}function p(S){s.push(S.x,S.y,S.z)}function m(S,_){const w=S*3;_.x=e[w+0],_.y=e[w+1],_.z=e[w+2]}function v(){const S=new D,_=new D,w=new D,I=new D,T=new ue,P=new ue,B=new ue;for(let R=0,C=0;R<s.length;R+=9,C+=6){S.set(s[R+0],s[R+1],s[R+2]),_.set(s[R+3],s[R+4],s[R+5]),w.set(s[R+6],s[R+7],s[R+8]),T.set(o[C+0],o[C+1]),P.set(o[C+2],o[C+3]),B.set(o[C+4],o[C+5]),I.copy(S).add(_).add(w).divideScalar(3);const U=x(I);A(T,C+0,S,U),A(P,C+2,_,U),A(B,C+4,w,U)}}function A(S,_,w,I){I<0&&S.x===1&&(o[_]=S.x-1),w.x===0&&w.z===0&&(o[_]=I/2/Math.PI+.5)}function x(S){return Math.atan2(S.z,-S.x)}function g(S){return Math.atan2(-S.y,Math.sqrt(S.x*S.x+S.z*S.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ua(e.vertices,e.indices,e.radius,e.details)}}class u0 extends ua{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new u0(e.radius,e.detail)}}const Ip=new D,Pp=new D,zy=new D,Bp=new wi;class $I extends gt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(al*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],h=["a","b","c"],f=new Array(3),p={},m=[];for(let v=0;v<l;v+=3){o?(c[0]=o.getX(v),c[1]=o.getX(v+1),c[2]=o.getX(v+2)):(c[0]=v,c[1]=v+1,c[2]=v+2);const{a:A,b:x,c:g}=Bp;if(A.fromBufferAttribute(a,c[0]),x.fromBufferAttribute(a,c[1]),g.fromBufferAttribute(a,c[2]),Bp.getNormal(zy),f[0]=`${Math.round(A.x*r)},${Math.round(A.y*r)},${Math.round(A.z*r)}`,f[1]=`${Math.round(x.x*r)},${Math.round(x.y*r)},${Math.round(x.z*r)}`,f[2]=`${Math.round(g.x*r)},${Math.round(g.y*r)},${Math.round(g.z*r)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let S=0;S<3;S++){const _=(S+1)%3,w=f[S],I=f[_],T=Bp[h[S]],P=Bp[h[_]],B=`${w}_${I}`,R=`${I}_${w}`;R in p&&p[R]?(zy.dot(p[R].normal)<=s&&(m.push(T.x,T.y,T.z),m.push(P.x,P.y,P.z)),p[R]=null):B in p||(p[B]={index0:c[S],index1:c[_],normal:zy.clone()})}}for(const v in p)if(p[v]){const{index0:A,index1:x}=p[v];Ip.fromBufferAttribute(a,A),Pp.fromBufferAttribute(a,x),m.push(Ip.x,Ip.y,Ip.z),m.push(Pp.x,Pp.y,Pp.z)}this.setAttribute("position",new st(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class qo extends rh{constructor(e){super(e),this.uuid=ur(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new rh().fromJSON(r))}return this}}const Qz={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=e2(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,h,f,p,m;if(i&&(s=tH(n,e,s,t)),n.length>80*t){a=c=n[0],l=h=n[1];for(let v=t;v<r;v+=t)f=n[v],p=n[v+1],f<a&&(a=f),p<l&&(l=p),f>c&&(c=f),p>h&&(h=p);m=Math.max(c-a,h-l),m=m!==0?32767/m:0}return sh(s,o,t,a,l,m,0),o}};function e2(n,e,t,i,r){let s,o;if(r===hH(n,e,t,i)>0)for(s=e;s<t;s+=i)o=FE(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=FE(s,n[s],n[s+1],o);return o&&d0(o,o.next)&&(ah(o),o=o.next),o}function Al(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(d0(t,t.next)||xn(t.prev,t,t.next)===0)){if(ah(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function sh(n,e,t,i,r,s,o){if(!n)return;!o&&s&&oH(n,i,r,s);let a=n,l,c;for(;n.prev!==n.next;){if(l=n.prev,c=n.next,s?Zz(n,i,r,s):qz(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(c.i/t|0),ah(n),n=c.next,a=c.next;continue}if(n=c,n===a){o?o===1?(n=$z(Al(n),e,t),sh(n,e,t,i,r,s,2)):o===2&&eH(n,e,t,i,r,s):sh(Al(n),e,t,i,r,s,1);break}}}function qz(n){const e=n.prev,t=n,i=n.next;if(xn(e,t,i)>=0)return!1;const r=e.x,s=t.x,o=i.x,a=e.y,l=t.y,c=i.y,h=r<s?r<o?r:o:s<o?s:o,f=a<l?a<c?a:c:l<c?l:c,p=r>s?r>o?r:o:s>o?s:o,m=a>l?a>c?a:c:l>c?l:c;let v=i.next;for(;v!==e;){if(v.x>=h&&v.x<=p&&v.y>=f&&v.y<=m&&Rc(r,a,s,l,o,c,v.x,v.y)&&xn(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function Zz(n,e,t,i){const r=n.prev,s=n,o=n.next;if(xn(r,s,o)>=0)return!1;const a=r.x,l=s.x,c=o.x,h=r.y,f=s.y,p=o.y,m=a<l?a<c?a:c:l<c?l:c,v=h<f?h<p?h:p:f<p?f:p,A=a>l?a>c?a:c:l>c?l:c,x=h>f?h>p?h:p:f>p?f:p,g=b_(m,v,e,t,i),S=b_(A,x,e,t,i);let _=n.prevZ,w=n.nextZ;for(;_&&_.z>=g&&w&&w.z<=S;){if(_.x>=m&&_.x<=A&&_.y>=v&&_.y<=x&&_!==r&&_!==o&&Rc(a,h,l,f,c,p,_.x,_.y)&&xn(_.prev,_,_.next)>=0||(_=_.prevZ,w.x>=m&&w.x<=A&&w.y>=v&&w.y<=x&&w!==r&&w!==o&&Rc(a,h,l,f,c,p,w.x,w.y)&&xn(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;_&&_.z>=g;){if(_.x>=m&&_.x<=A&&_.y>=v&&_.y<=x&&_!==r&&_!==o&&Rc(a,h,l,f,c,p,_.x,_.y)&&xn(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;w&&w.z<=S;){if(w.x>=m&&w.x<=A&&w.y>=v&&w.y<=x&&w!==r&&w!==o&&Rc(a,h,l,f,c,p,w.x,w.y)&&xn(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function $z(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!d0(r,s)&&t2(r,i,i.next,s)&&oh(r,s)&&oh(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),ah(i),ah(i.next),i=n=s),i=i.next}while(i!==n);return Al(i)}function eH(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&cH(o,a)){let l=n2(o,a);o=Al(o,o.next),l=Al(l,l.next),sh(o,e,t,i,r,s,0),sh(l,e,t,i,r,s,0);return}a=a.next}o=o.next}while(o!==n)}function tH(n,e,t,i){const r=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:n.length,c=e2(n,a,l,i,!1),c===c.next&&(c.steiner=!0),r.push(lH(c));for(r.sort(nH),s=0;s<r.length;s++)t=iH(r[s],t);return t}function nH(n,e){return n.x-e.x}function iH(n,e){const t=rH(n,e);if(!t)return e;const i=n2(t,n);return Al(i,i.next),Al(t,t.next)}function rH(n,e){let t=e,i=-1/0,r;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const p=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=s&&p>i&&(i=p,r=t.x<t.next.x?t:t.next,p===s))return r}t=t.next}while(t!==e);if(!r)return null;const a=r,l=r.x,c=r.y;let h=1/0,f;t=r;do s>=t.x&&t.x>=l&&s!==t.x&&Rc(o<c?s:i,o,l,c,o<c?i:s,o,t.x,t.y)&&(f=Math.abs(o-t.y)/(s-t.x),oh(t,n)&&(f<h||f===h&&(t.x>r.x||t.x===r.x&&sH(r,t)))&&(r=t,h=f)),t=t.next;while(t!==a);return r}function sH(n,e){return xn(n.prev,n,e.prev)<0&&xn(e.next,n,n.next)<0}function oH(n,e,t,i){let r=n;do r.z===0&&(r.z=b_(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,aH(r)}function aH(n){let e,t,i,r,s,o,a,l,c=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<c&&(a++,i=i.nextZ,!!i);e++);for(l=c;a>0||l>0&&i;)a!==0&&(l===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,c*=2}while(o>1);return n}function b_(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function lH(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Rc(n,e,t,i,r,s,o,a){return(r-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(i-a)}function cH(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!uH(n,e)&&(oh(n,e)&&oh(e,n)&&dH(n,e)&&(xn(n.prev,n,e.prev)||xn(n,e.prev,e))||d0(n,e)&&xn(n.prev,n,n.next)>0&&xn(e.prev,e,e.next)>0)}function xn(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function d0(n,e){return n.x===e.x&&n.y===e.y}function t2(n,e,t,i){const r=Dp(xn(n,e,t)),s=Dp(xn(n,e,i)),o=Dp(xn(t,i,n)),a=Dp(xn(t,i,e));return!!(r!==s&&o!==a||r===0&&Lp(n,t,e)||s===0&&Lp(n,i,e)||o===0&&Lp(t,n,i)||a===0&&Lp(t,e,i))}function Lp(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Dp(n){return n>0?1:n<0?-1:0}function uH(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&t2(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function oh(n,e){return xn(n.prev,n,n.next)<0?xn(n,e,n.next)>=0&&xn(n,n.prev,e)>=0:xn(n,e,n.prev)<0||xn(n,n.next,e)<0}function dH(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function n2(n,e){const t=new T_(n.i,n.x,n.y),i=new T_(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function FE(n,e,t,i){const r=new T_(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function ah(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function T_(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function hH(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class _s{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return _s.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];UE(e),OE(i,e);let o=e.length;t.forEach(UE);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,OE(i,t[l]);const a=Qz.triangulate(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function UE(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function OE(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class h0 extends gt{constructor(e=new qo([new ue(.5,.5),new ue(-.5,.5),new ue(-.5,-.5),new ue(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new st(r,3)),this.setAttribute("uv",new st(s,2)),this.computeVertexNormals();function o(a){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,h=t.steps!==void 0?t.steps:1,f=t.depth!==void 0?t.depth:1;let p=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,v=t.bevelSize!==void 0?t.bevelSize:m-.1,A=t.bevelOffset!==void 0?t.bevelOffset:0,x=t.bevelSegments!==void 0?t.bevelSegments:3;const g=t.extrudePath,S=t.UVGenerator!==void 0?t.UVGenerator:fH;let _,w=!1,I,T,P,B;g&&(_=g.getSpacedPoints(h),w=!0,p=!1,I=g.computeFrenetFrames(h,!1),T=new D,P=new D,B=new D),p||(x=0,m=0,v=0,A=0);const R=a.extractPoints(c);let C=R.shape;const U=R.holes;if(!_s.isClockWise(C)){C=C.reverse();for(let me=0,xe=U.length;me<xe;me++){const V=U[me];_s.isClockWise(V)&&(U[me]=V.reverse())}}const K=_s.triangulateShape(C,U),te=C;for(let me=0,xe=U.length;me<xe;me++){const V=U[me];C=C.concat(V)}function de(me,xe,V){return xe||console.error("THREE.ExtrudeGeometry: vec does not exist"),me.clone().addScaledVector(xe,V)}const re=C.length,ge=K.length;function F(me,xe,V){let Je,Me,De;const Ie=me.x-xe.x,ot=me.y-xe.y,Ne=V.x-me.x,z=V.y-me.y,N=Ie*Ie+ot*ot,ne=Ie*z-ot*Ne;if(Math.abs(ne)>Number.EPSILON){const ye=Math.sqrt(N),we=Math.sqrt(Ne*Ne+z*z),Ae=xe.x-ot/ye,tt=xe.y+Ie/ye,Fe=V.x-z/we,Ke=V.y+Ne/we,Tt=((Fe-Ae)*z-(Ke-tt)*Ne)/(Ie*z-ot*Ne);Je=Ae+Ie*Tt-me.x,Me=tt+ot*Tt-me.y;const be=Je*Je+Me*Me;if(be<=2)return new ue(Je,Me);De=Math.sqrt(be/2)}else{let ye=!1;Ie>Number.EPSILON?Ne>Number.EPSILON&&(ye=!0):Ie<-Number.EPSILON?Ne<-Number.EPSILON&&(ye=!0):Math.sign(ot)===Math.sign(z)&&(ye=!0),ye?(Je=-ot,Me=Ie,De=Math.sqrt(N)):(Je=Ie,Me=ot,De=Math.sqrt(N/2))}return new ue(Je/De,Me/De)}const k=[];for(let me=0,xe=te.length,V=xe-1,Je=me+1;me<xe;me++,V++,Je++)V===xe&&(V=0),Je===xe&&(Je=0),k[me]=F(te[me],te[V],te[Je]);const W=[];let Y,se=k.concat();for(let me=0,xe=U.length;me<xe;me++){const V=U[me];Y=[];for(let Je=0,Me=V.length,De=Me-1,Ie=Je+1;Je<Me;Je++,De++,Ie++)De===Me&&(De=0),Ie===Me&&(Ie=0),Y[Je]=F(V[Je],V[De],V[Ie]);W.push(Y),se=se.concat(Y)}for(let me=0;me<x;me++){const xe=me/x,V=m*Math.cos(xe*Math.PI/2),Je=v*Math.sin(xe*Math.PI/2)+A;for(let Me=0,De=te.length;Me<De;Me++){const Ie=de(te[Me],k[Me],Je);ae(Ie.x,Ie.y,-V)}for(let Me=0,De=U.length;Me<De;Me++){const Ie=U[Me];Y=W[Me];for(let ot=0,Ne=Ie.length;ot<Ne;ot++){const z=de(Ie[ot],Y[ot],Je);ae(z.x,z.y,-V)}}}const Ce=v+A;for(let me=0;me<re;me++){const xe=p?de(C[me],se[me],Ce):C[me];w?(P.copy(I.normals[0]).multiplyScalar(xe.x),T.copy(I.binormals[0]).multiplyScalar(xe.y),B.copy(_[0]).add(P).add(T),ae(B.x,B.y,B.z)):ae(xe.x,xe.y,0)}for(let me=1;me<=h;me++)for(let xe=0;xe<re;xe++){const V=p?de(C[xe],se[xe],Ce):C[xe];w?(P.copy(I.normals[me]).multiplyScalar(V.x),T.copy(I.binormals[me]).multiplyScalar(V.y),B.copy(_[me]).add(P).add(T),ae(B.x,B.y,B.z)):ae(V.x,V.y,f/h*me)}for(let me=x-1;me>=0;me--){const xe=me/x,V=m*Math.cos(xe*Math.PI/2),Je=v*Math.sin(xe*Math.PI/2)+A;for(let Me=0,De=te.length;Me<De;Me++){const Ie=de(te[Me],k[Me],Je);ae(Ie.x,Ie.y,f+V)}for(let Me=0,De=U.length;Me<De;Me++){const Ie=U[Me];Y=W[Me];for(let ot=0,Ne=Ie.length;ot<Ne;ot++){const z=de(Ie[ot],Y[ot],Je);w?ae(z.x,z.y+_[h-1].y,_[h-1].x+V):ae(z.x,z.y,f+V)}}}q(),ie();function q(){const me=r.length/3;if(p){let xe=0,V=re*xe;for(let Je=0;Je<ge;Je++){const Me=K[Je];Le(Me[2]+V,Me[1]+V,Me[0]+V)}xe=h+x*2,V=re*xe;for(let Je=0;Je<ge;Je++){const Me=K[Je];Le(Me[0]+V,Me[1]+V,Me[2]+V)}}else{for(let xe=0;xe<ge;xe++){const V=K[xe];Le(V[2],V[1],V[0])}for(let xe=0;xe<ge;xe++){const V=K[xe];Le(V[0]+re*h,V[1]+re*h,V[2]+re*h)}}i.addGroup(me,r.length/3-me,0)}function ie(){const me=r.length/3;let xe=0;he(te,xe),xe+=te.length;for(let V=0,Je=U.length;V<Je;V++){const Me=U[V];he(Me,xe),xe+=Me.length}i.addGroup(me,r.length/3-me,1)}function he(me,xe){let V=me.length;for(;--V>=0;){const Je=V;let Me=V-1;Me<0&&(Me=me.length-1);for(let De=0,Ie=h+x*2;De<Ie;De++){const ot=re*De,Ne=re*(De+1),z=xe+Je+ot,N=xe+Me+ot,ne=xe+Me+Ne,ye=xe+Je+Ne;We(z,N,ne,ye)}}}function ae(me,xe,V){l.push(me),l.push(xe),l.push(V)}function Le(me,xe,V){qe(me),qe(xe),qe(V);const Je=r.length/3,Me=S.generateTopUV(i,r,Je-3,Je-2,Je-1);ke(Me[0]),ke(Me[1]),ke(Me[2])}function We(me,xe,V,Je){qe(me),qe(xe),qe(Je),qe(xe),qe(V),qe(Je);const Me=r.length/3,De=S.generateSideWallUV(i,r,Me-6,Me-3,Me-2,Me-1);ke(De[0]),ke(De[1]),ke(De[3]),ke(De[1]),ke(De[2]),ke(De[3])}function qe(me){r.push(l[me*3+0]),r.push(l[me*3+1]),r.push(l[me*3+2])}function ke(me){s.push(me.x),s.push(me.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return pH(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new Ag[r.type]().fromJSON(r)),new h0(i,e.options)}}const fH={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],a=e[i*3],l=e[i*3+1],c=e[r*3],h=e[r*3+1];return[new ue(s,o),new ue(a,l),new ue(c,h)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[i*3],h=e[i*3+1],f=e[i*3+2],p=e[r*3],m=e[r*3+1],v=e[r*3+2],A=e[s*3],x=e[s*3+1],g=e[s*3+2];return Math.abs(a-h)<Math.abs(o-c)?[new ue(o,1-l),new ue(c,1-f),new ue(p,1-v),new ue(A,1-g)]:[new ue(a,1-l),new ue(h,1-f),new ue(m,1-v),new ue(x,1-g)]}};function pH(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class f0 extends ua{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new f0(e.radius,e.detail)}}class Ih extends ua{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ih(e.radius,e.detail)}}class $c extends gt{constructor(e=.5,t=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],l=[],c=[],h=[];let f=e;const p=(t-e)/r,m=new D,v=new ue;for(let A=0;A<=r;A++){for(let x=0;x<=i;x++){const g=s+x/i*o;m.x=f*Math.cos(g),m.y=f*Math.sin(g),l.push(m.x,m.y,m.z),c.push(0,0,1),v.x=(m.x/t+1)/2,v.y=(m.y/t+1)/2,h.push(v.x,v.y)}f+=p}for(let A=0;A<r;A++){const x=A*(i+1);for(let g=0;g<i;g++){const S=g+x,_=S,w=S+i+1,I=S+i+2,T=S+1;a.push(_,w,T),a.push(w,I,T)}}this.setIndex(a),this.setAttribute("position",new st(l,3)),this.setAttribute("normal",new st(c,3)),this.setAttribute("uv",new st(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $c(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Ph extends gt{constructor(e=new qo([new ue(0,.5),new ue(-.5,-.5),new ue(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let h=0;h<e.length;h++)c(e[h]),this.addGroup(a,l,h),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new st(r,3)),this.setAttribute("normal",new st(s,3)),this.setAttribute("uv",new st(o,2));function c(h){const f=r.length/3,p=h.extractPoints(t);let m=p.shape;const v=p.holes;_s.isClockWise(m)===!1&&(m=m.reverse());for(let x=0,g=v.length;x<g;x++){const S=v[x];_s.isClockWise(S)===!0&&(v[x]=S.reverse())}const A=_s.triangulateShape(m,v);for(let x=0,g=v.length;x<g;x++){const S=v[x];m=m.concat(S)}for(let x=0,g=m.length;x<g;x++){const S=m[x];r.push(S.x,S.y,0),s.push(0,0,1),o.push(S.x,S.y)}for(let x=0,g=A.length;x<g;x++){const S=A[x],_=S[0]+f,w=S[1]+f,I=S[2]+f;i.push(_,w,I),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return mH(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new Ph(i,e.curveSegments)}}function mH(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class ia extends gt{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let c=0;const h=[],f=new D,p=new D,m=[],v=[],A=[],x=[];for(let g=0;g<=i;g++){const S=[],_=g/i;let w=0;g===0&&o===0?w=.5/t:g===i&&l===Math.PI&&(w=-.5/t);for(let I=0;I<=t;I++){const T=I/t;f.x=-e*Math.cos(r+T*s)*Math.sin(o+_*a),f.y=e*Math.cos(o+_*a),f.z=e*Math.sin(r+T*s)*Math.sin(o+_*a),v.push(f.x,f.y,f.z),p.copy(f).normalize(),A.push(p.x,p.y,p.z),x.push(T+w,1-_),S.push(c++)}h.push(S)}for(let g=0;g<i;g++)for(let S=0;S<t;S++){const _=h[g][S+1],w=h[g][S],I=h[g+1][S],T=h[g+1][S+1];(g!==0||o>0)&&m.push(_,w,T),(g!==i-1||l<Math.PI)&&m.push(w,I,T)}this.setIndex(m),this.setAttribute("position",new st(v,3)),this.setAttribute("normal",new st(A,3)),this.setAttribute("uv",new st(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ia(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class p0 extends ua{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new p0(e.radius,e.detail)}}class m0 extends gt{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],l=[],c=[],h=new D,f=new D,p=new D;for(let m=0;m<=i;m++)for(let v=0;v<=r;v++){const A=v/r*s,x=m/i*Math.PI*2;f.x=(e+t*Math.cos(x))*Math.cos(A),f.y=(e+t*Math.cos(x))*Math.sin(A),f.z=t*Math.sin(x),a.push(f.x,f.y,f.z),h.x=e*Math.cos(A),h.y=e*Math.sin(A),p.subVectors(f,h).normalize(),l.push(p.x,p.y,p.z),c.push(v/r),c.push(m/i)}for(let m=1;m<=i;m++)for(let v=1;v<=r;v++){const A=(r+1)*m+v-1,x=(r+1)*(m-1)+v-1,g=(r+1)*(m-1)+v,S=(r+1)*m+v;o.push(A,x,S),o.push(x,g,S)}this.setIndex(o),this.setAttribute("position",new st(a,3)),this.setAttribute("normal",new st(l,3)),this.setAttribute("uv",new st(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new m0(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class g0 extends gt{constructor(e=1,t=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],c=[],h=[],f=new D,p=new D,m=new D,v=new D,A=new D,x=new D,g=new D;for(let _=0;_<=i;++_){const w=_/i*s*Math.PI*2;S(w,s,o,e,m),S(w+.01,s,o,e,v),x.subVectors(v,m),g.addVectors(v,m),A.crossVectors(x,g),g.crossVectors(A,x),A.normalize(),g.normalize();for(let I=0;I<=r;++I){const T=I/r*Math.PI*2,P=-t*Math.cos(T),B=t*Math.sin(T);f.x=m.x+(P*g.x+B*A.x),f.y=m.y+(P*g.y+B*A.y),f.z=m.z+(P*g.z+B*A.z),l.push(f.x,f.y,f.z),p.subVectors(f,m).normalize(),c.push(p.x,p.y,p.z),h.push(_/i),h.push(I/r)}}for(let _=1;_<=i;_++)for(let w=1;w<=r;w++){const I=(r+1)*(_-1)+(w-1),T=(r+1)*_+(w-1),P=(r+1)*_+w,B=(r+1)*(_-1)+w;a.push(I,T,B),a.push(T,P,B)}this.setIndex(a),this.setAttribute("position",new st(l,3)),this.setAttribute("normal",new st(c,3)),this.setAttribute("uv",new st(h,2));function S(_,w,I,T,P){const B=Math.cos(_),R=Math.sin(_),C=I/w*_,U=Math.cos(C);P.x=T*(2+U)*.5*B,P.y=T*(2+U)*R*.5,P.z=T*Math.sin(C)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new g0(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class v0 extends gt{constructor(e=new aS(new D(-1,-1,0),new D(-1,1,0),new D(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new D,l=new D,c=new ue;let h=new D;const f=[],p=[],m=[],v=[];A(),this.setIndex(v),this.setAttribute("position",new st(f,3)),this.setAttribute("normal",new st(p,3)),this.setAttribute("uv",new st(m,2));function A(){for(let _=0;_<t;_++)x(_);x(s===!1?t:0),S(),g()}function x(_){h=e.getPointAt(_/t,h);const w=o.normals[_],I=o.binormals[_];for(let T=0;T<=r;T++){const P=T/r*Math.PI*2,B=Math.sin(P),R=-Math.cos(P);l.x=R*w.x+B*I.x,l.y=R*w.y+B*I.y,l.z=R*w.z+B*I.z,l.normalize(),p.push(l.x,l.y,l.z),a.x=h.x+i*l.x,a.y=h.y+i*l.y,a.z=h.z+i*l.z,f.push(a.x,a.y,a.z)}}function g(){for(let _=1;_<=t;_++)for(let w=1;w<=r;w++){const I=(r+1)*(_-1)+(w-1),T=(r+1)*_+(w-1),P=(r+1)*_+w,B=(r+1)*(_-1)+w;v.push(I,T,B),v.push(T,P,B)}}function S(){for(let _=0;_<=t;_++)for(let w=0;w<=r;w++)c.x=_/t,c.y=w/r,m.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new v0(new Ag[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class i2 extends gt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new D,s=new D;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,h=l.length;c<h;++c){const f=l[c],p=f.start,m=f.count;for(let v=p,A=p+m;v<A;v+=3)for(let x=0;x<3;x++){const g=a.getX(v+x),S=a.getX(v+(x+1)%3);r.fromBufferAttribute(o,g),s.fromBufferAttribute(o,S),kE(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const h=3*a+c,f=3*a+(c+1)%3;r.fromBufferAttribute(o,h),s.fromBufferAttribute(o,f),kE(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new st(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function kE(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var zE=Object.freeze({__proto__:null,BoxGeometry:Nr,CapsuleGeometry:l0,CircleGeometry:cl,ConeGeometry:c0,CylinderGeometry:oo,DodecahedronGeometry:u0,EdgesGeometry:$I,ExtrudeGeometry:h0,IcosahedronGeometry:f0,LatheGeometry:Rh,OctahedronGeometry:Ih,PlaneGeometry:ca,PolyhedronGeometry:ua,RingGeometry:$c,ShapeGeometry:Ph,SphereGeometry:ia,TetrahedronGeometry:p0,TorusGeometry:m0,TorusKnotGeometry:g0,TubeGeometry:v0,WireframeGeometry:i2});class r2 extends mn{static get type(){return"ShadowMaterial"}constructor(e){super(),this.isShadowMaterial=!0,this.color=new Ee(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class s2 extends pr{static get type(){return"RawShaderMaterial"}constructor(e){super(e),this.isRawShaderMaterial=!0}}class jt extends mn{static get type(){return"MeshStandardMaterial"}constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.color=new Ee(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ee(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=la,this.normalScale=new ue(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ti,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class bn extends jt{static get type(){return"MeshPhysicalMaterial"}constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ue(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return En(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ee(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ee(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ee(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class o2 extends mn{static get type(){return"MeshPhongMaterial"}constructor(e){super(),this.isMeshPhongMaterial=!0,this.color=new Ee(16777215),this.specular=new Ee(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ee(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=la,this.normalScale=new ue(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ti,this.combine=vh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class a2 extends mn{static get type(){return"MeshToonMaterial"}constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.color=new Ee(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ee(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=la,this.normalScale=new ue(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class l2 extends mn{static get type(){return"MeshNormalMaterial"}constructor(e){super(),this.isMeshNormalMaterial=!0,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=la,this.normalScale=new ue(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class c2 extends mn{static get type(){return"MeshLambertMaterial"}constructor(e){super(),this.isMeshLambertMaterial=!0,this.color=new Ee(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ee(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=la,this.normalScale=new ue(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ti,this.combine=vh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class u2 extends mn{static get type(){return"MeshMatcapMaterial"}constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.color=new Ee(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=la,this.normalScale=new ue(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class d2 extends ui{static get type(){return"LineDashedMaterial"}constructor(e){super(),this.isLineDashedMaterial=!0,this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Za(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function h2(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function f2(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function R_(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=n[a+l]}return r}function cS(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)}function gH(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],h=c.getValueSize(),f=[],p=[];for(let m=0;m<c.times.length;++m){const v=c.times[m]*r;if(!(v<t||v>=i)){f.push(c.times[m]);for(let A=0;A<h;++A)p.push(c.values[m*h+A])}}f.length!==0&&(c.times=Za(f,c.times.constructor),c.values=Za(p,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function vH(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=n.tracks.find(function(g){return g.name===a.name&&g.ValueTypeName===l});if(c===void 0)continue;let h=0;const f=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=f/3);let p=0;const m=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);const v=a.times.length-1;let A;if(s<=a.times[0]){const g=h,S=f-h;A=a.values.slice(g,S)}else if(s>=a.times[v]){const g=v*f+h,S=g+f-h;A=a.values.slice(g,S)}else{const g=a.createInterpolant(),S=h,_=f-h;g.evaluate(s),A=g.resultBuffer.slice(S,_)}l==="quaternion"&&new on().fromArray(A).normalize().conjugate().toArray(A);const x=c.times.length;for(let g=0;g<x;++g){const S=g*m+p;if(l==="quaternion")on.multiplyQuaternionsFlat(c.values,S,A,0,c.values,S);else{const _=m-p*2;for(let w=0;w<_;++w)c.values[S+w]-=A[w]}}}return n.blendMode=WA,n}const yH={convertArray:Za,isTypedArray:h2,getKeyframeOrder:f2,sortedArray:R_,flattenJSON:cS,subclip:gH,makeClipAdditive:vH};class bl{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class p2 extends bl{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Ya,endingEnd:Ya}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case Qa:s=e,a=2*t-i;break;case eh:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case Qa:o=e,l=2*i-t;break;case eh:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const c=(i-t)*.5,h=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-i),this._offsetPrev=s*h,this._offsetNext=o*h}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,h=this._offsetPrev,f=this._offsetNext,p=this._weightPrev,m=this._weightNext,v=(i-t)/(r-t),A=v*v,x=A*v,g=-p*x+2*p*A-p*v,S=(1+p)*x+(-1.5-2*p)*A+(-.5+p)*v+1,_=(-1-m)*x+(1.5+m)*A+.5*v,w=m*x-m*A;for(let I=0;I!==a;++I)s[I]=g*o[h+I]+S*o[c+I]+_*o[l+I]+w*o[f+I];return s}}class uS extends bl{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,h=(i-t)/(r-t),f=1-h;for(let p=0;p!==a;++p)s[p]=o[c+p]*f+o[l+p]*h;return s}}class m2 extends bl{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class es{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Za(t,this.TimeBufferType),this.values=Za(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Za(e.times,Array),values:Za(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new m2(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new uS(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new p2(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case xl:t=this.InterpolantFactoryMethodDiscrete;break;case ta:t=this.InterpolantFactoryMethodLinear;break;case um:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return xl;case this.InterpolantFactoryMethodLinear:return ta;case this.InterpolantFactoryMethodSmooth:return um}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&h2(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===um,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],h=e[a+1];if(c!==h&&(a!==1||c!==e[0]))if(r)l=!0;else{const f=a*i,p=f-i,m=f+i;for(let v=0;v!==i;++v){const A=t[f+v];if(A!==t[p+v]||A!==t[m+v]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const f=a*i,p=o*i;for(let m=0;m!==i;++m)t[p+m]=t[f+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,c=0;c!==i;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}es.prototype.TimeBufferType=Float32Array;es.prototype.ValueBufferType=Float32Array;es.prototype.DefaultInterpolation=ta;class Tl extends es{constructor(e,t,i){super(e,t,i)}}Tl.prototype.ValueTypeName="bool";Tl.prototype.ValueBufferType=Array;Tl.prototype.DefaultInterpolation=xl;Tl.prototype.InterpolantFactoryMethodLinear=void 0;Tl.prototype.InterpolantFactoryMethodSmooth=void 0;class dS extends es{}dS.prototype.ValueTypeName="color";class ao extends es{}ao.prototype.ValueTypeName="number";class g2 extends bl{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let c=e*a;for(let h=c+a;c!==h;c+=4)on.slerpFlat(s,0,o,c-a,o,c,l);return s}}class lo extends es{InterpolantFactoryMethodLinear(e){return new g2(this.times,this.values,this.getValueSize(),e)}}lo.prototype.ValueTypeName="quaternion";lo.prototype.InterpolantFactoryMethodSmooth=void 0;class Rl extends es{constructor(e,t,i){super(e,t,i)}}Rl.prototype.ValueTypeName="string";Rl.prototype.ValueBufferType=Array;Rl.prototype.DefaultInterpolation=xl;Rl.prototype.InterpolantFactoryMethodLinear=void 0;Rl.prototype.InterpolantFactoryMethodSmooth=void 0;class co extends es{}co.prototype.ValueTypeName="vector";class Sl{constructor(e="",t=-1,i=[],r=Zg){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=ur(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(_H(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(es.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const h=f2(l);l=R_(l,1,h),c=R_(c,1,h),!r&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new ao(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],h=c.name.match(s);if(h&&h.length>1){const f=h[1];let p=r[f];p||(r[f]=p=[]),p.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(f,p,m,v,A){if(m.length!==0){const x=[],g=[];cS(m,x,g,v),x.length!==0&&A.push(new f(p,x,g))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let f=0;f<c.length;f++){const p=c[f].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const m={};let v;for(v=0;v<p.length;v++)if(p[v].morphTargets)for(let A=0;A<p[v].morphTargets.length;A++)m[p[v].morphTargets[A]]=-1;for(const A in m){const x=[],g=[];for(let S=0;S!==p[v].morphTargets.length;++S){const _=p[v];x.push(_.time),g.push(_.morphTarget===A?1:0)}r.push(new ao(".morphTargetInfluence["+A+"]",x,g))}l=m.length*o}else{const m=".bones["+t[f].name+"]";i(co,m+".position",p,"pos",r),i(lo,m+".quaternion",p,"rot",r),i(co,m+".scale",p,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function xH(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ao;case"vector":case"vector2":case"vector3":case"vector4":return co;case"color":return dS;case"quaternion":return lo;case"bool":case"boolean":return Tl;case"string":return Rl}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function _H(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=xH(n.type);if(n.times===void 0){const t=[],i=[];cS(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Ks={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class hS{constructor(e,t,i){const r=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(h){a++,s===!1&&r.onStart!==void 0&&r.onStart(h,o,a),s=!0},this.itemEnd=function(h){o++,r.onProgress!==void 0&&r.onProgress(h,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(h){r.onError!==void 0&&r.onError(h)},this.resolveURL=function(h){return l?l(h):h},this.setURLModifier=function(h){return l=h,this},this.addHandler=function(h,f){return c.push(h,f),this},this.removeHandler=function(h){const f=c.indexOf(h);return f!==-1&&c.splice(f,2),this},this.getHandler=function(h){for(let f=0,p=c.length;f<p;f+=2){const m=c[f],v=c[f+1];if(m.global&&(m.lastIndex=0),m.test(h))return v}return null}}}const v2=new hS;class di{constructor(e){this.manager=e!==void 0?e:v2,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}di.DEFAULT_MATERIAL_NAME="__DEFAULT";const Fs={};class AH extends Error{constructor(e,t){super(e),this.response=t}}class ki extends di{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Ks.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Fs[e]!==void 0){Fs[e].push({onLoad:t,onProgress:i,onError:r});return}Fs[e]=[],Fs[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const h=Fs[e],f=c.body.getReader(),p=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),m=p?parseInt(p):0,v=m!==0;let A=0;const x=new ReadableStream({start(g){S();function S(){f.read().then(({done:_,value:w})=>{if(_)g.close();else{A+=w.byteLength;const I=new ProgressEvent("progress",{lengthComputable:v,loaded:A,total:m});for(let T=0,P=h.length;T<P;T++){const B=h[T];B.onProgress&&B.onProgress(I)}g.enqueue(w),S()}},_=>{g.error(_)})}}});return new Response(x)}else throw new AH(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(h=>new DOMParser().parseFromString(h,a));case"json":return c.json();default:if(a===void 0)return c.text();{const f=/charset="?([^;"\s]*)"?/i.exec(a),p=f&&f[1]?f[1].toLowerCase():void 0,m=new TextDecoder(p);return c.arrayBuffer().then(v=>m.decode(v))}}}).then(c=>{Ks.add(e,c);const h=Fs[e];delete Fs[e];for(let f=0,p=h.length;f<p;f++){const m=h[f];m.onLoad&&m.onLoad(c)}}).catch(c=>{const h=Fs[e];if(h===void 0)throw this.manager.itemError(e),c;delete Fs[e];for(let f=0,p=h.length;f<p;f++){const m=h[f];m.onError&&m.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class SH extends di{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new ki(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=Sl.parse(e[i]);t.push(r)}return t}}class MH extends di{constructor(e){super(e)}load(e,t,i,r){const s=this,o=[],a=new o0,l=new ki(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function h(f){l.load(e[f],function(p){const m=s.parse(p,!0);o[f]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},c+=1,c===6&&(m.mipmapCount===1&&(a.minFilter=en),a.image=o,a.format=m.format,a.needsUpdate=!0,t&&t(a))},i,r)}if(Array.isArray(e))for(let f=0,p=e.length;f<p;++f)h(f);else l.load(e,function(f){const p=s.parse(f,!0);if(p.isCubemap){const m=p.mipmaps.length/p.mipmapCount;for(let v=0;v<m;v++){o[v]={mipmaps:[]};for(let A=0;A<p.mipmapCount;A++)o[v].mipmaps.push(p.mipmaps[v*p.mipmapCount+A]),o[v].format=p.format,o[v].width=p.width,o[v].height=p.height}a.image=o}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=en),a.format=p.format,a.needsUpdate=!0,t&&t(a)},i,r);return a}}class lh extends di{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Ks.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=ih("img");function l(){h(),Ks.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(f){h(),r&&r(f),s.manager.itemError(e),s.manager.itemEnd(e)}function h(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class wH extends di{constructor(e){super(e)}load(e,t,i,r){const s=new Mh;s.colorSpace=Un;const o=new lh(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(h){s.images[c]=h,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return s}}class EH extends di{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new xs,a=new ki(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let c;try{c=s.parse(l)}catch(h){if(r!==void 0)r(h);else{console.error(h);return}}c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:Qi,o.wrapT=c.wrapT!==void 0?c.wrapT:Qi,o.magFilter=c.magFilter!==void 0?c.magFilter:en,o.minFilter=c.minFilter!==void 0?c.minFilter:en,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0&&(o.colorSpace=c.colorSpace),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=qi),c.mipmapCount===1&&(o.minFilter=en),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c)},i,r),o}}class ch extends di{constructor(e){super(e)}load(e,t,i,r){const s=new tn,o=new lh(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class da extends It{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Ee(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class y2 extends da{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(It.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Ee(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Hy=new Qe,HE=new D,GE=new D;class fS{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ue(512,512),this.map=null,this.mapPass=null,this.matrix=new Qe,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new wh,this._frameExtents=new ue(1,1),this._viewportCount=1,this._viewports=[new Vt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;HE.setFromMatrixPosition(e.matrixWorld),t.position.copy(HE),GE.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(GE),t.updateMatrixWorld(),Hy.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Hy),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(Hy)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class CH extends fS{constructor(){super(new yn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=qc*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class y0 extends da{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(It.DEFAULT_UP),this.updateMatrix(),this.target=new It,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new CH}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const VE=new Qe,Zu=new D,Gy=new D;class bH extends fS{constructor(){super(new yn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ue(4,2),this._viewportCount=6,this._viewports=[new Vt(2,1,1,1),new Vt(0,1,1,1),new Vt(3,1,1,1),new Vt(1,1,1,1),new Vt(3,0,1,1),new Vt(1,0,1,1)],this._cubeDirections=[new D(1,0,0),new D(-1,0,0),new D(0,0,1),new D(0,0,-1),new D(0,1,0),new D(0,-1,0)],this._cubeUps=[new D(0,1,0),new D(0,1,0),new D(0,1,0),new D(0,1,0),new D(0,0,1),new D(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),Zu.setFromMatrixPosition(e.matrixWorld),i.position.copy(Zu),Gy.copy(i.position),Gy.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(Gy),i.updateMatrixWorld(),r.makeTranslation(-Zu.x,-Zu.y,-Zu.z),VE.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(VE)}}class du extends da{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new bH}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class TH extends fS{constructor(){super(new ys(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class x0 extends da{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(It.DEFAULT_UP),this.updateMatrix(),this.target=new It,this.shadow=new TH}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class x2 extends da{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class _2 extends da{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class A2{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new D)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class S2 extends da{constructor(e=new A2,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class _0 extends di{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,o=new ki(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new Ee().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new Ee().setHex(o.value);break;case"v2":r.uniforms[s].value=new ue().fromArray(o.value);break;case"v3":r.uniforms[s].value=new D().fromArray(o.value);break;case"v4":r.uniforms[s].value=new Vt().fromArray(o.value);break;case"m3":r.uniforms[s].value=new Mt().fromArray(o.value);break;case"m4":r.uniforms[s].value=new Qe().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new ue().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new ue().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return _0.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:r2,SpriteMaterial:nS,RawShaderMaterial:s2,ShaderMaterial:pr,PointsMaterial:Th,MeshPhysicalMaterial:bn,MeshStandardMaterial:jt,MeshPhongMaterial:o2,MeshToonMaterial:a2,MeshNormalMaterial:l2,MeshLambertMaterial:c2,MeshDepthMaterial:$A,MeshDistanceMaterial:eS,MeshBasicMaterial:Cn,MeshMatcapMaterial:u2,LineDashedMaterial:d2,LineBasicMaterial:ui,Material:mn};return new t[e]}}class dr{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class M2 extends gt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class w2 extends di{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new ki(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(m,v){if(t[v]!==void 0)return t[v];const x=m.interleavedBuffers[v],g=s(m,x.buffer),S=Cc(x.type,g),_=new cu(S,x.stride);return _.uuid=x.uuid,t[v]=_,_}function s(m,v){if(i[v]!==void 0)return i[v];const x=m.arrayBuffers[v],g=new Uint32Array(x).buffer;return i[v]=g,g}const o=e.isInstancedBufferGeometry?new M2:new gt,a=e.data.index;if(a!==void 0){const m=Cc(a.type,a.array);o.setIndex(new yt(m,1))}const l=e.data.attributes;for(const m in l){const v=l[m];let A;if(v.isInterleavedBufferAttribute){const x=r(e.data,v.data);A=new so(x,v.itemSize,v.offset,v.normalized)}else{const x=Cc(v.type,v.array),g=v.isInstancedBufferAttribute?na:yt;A=new g(x,v.itemSize,v.normalized)}v.name!==void 0&&(A.name=v.name),v.usage!==void 0&&A.setUsage(v.usage),o.setAttribute(m,A)}const c=e.data.morphAttributes;if(c)for(const m in c){const v=c[m],A=[];for(let x=0,g=v.length;x<g;x++){const S=v[x];let _;if(S.isInterleavedBufferAttribute){const w=r(e.data,S.data);_=new so(w,S.itemSize,S.offset,S.normalized)}else{const w=Cc(S.type,S.array);_=new yt(w,S.itemSize,S.normalized)}S.name!==void 0&&(_.name=S.name),A.push(_)}o.morphAttributes[m]=A}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const f=e.data.groups||e.data.drawcalls||e.data.offsets;if(f!==void 0)for(let m=0,v=f.length;m!==v;++m){const A=f[m];o.addGroup(A.start,A.count,A.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const m=new D;p.center!==void 0&&m.fromArray(p.center),o.boundingSphere=new Gn(m,p.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class RH extends di{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===""?dr.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new ki(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(f){r!==void 0&&r(f),console.error("THREE:ObjectLoader: Can't parse "+e+".",f.message);return}const h=c.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?dr.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new ki(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,i),h=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,h),this.bindLightTargets(c),t!==void 0){let f=!1;for(const p in o)if(o[p].data instanceof HTMLImageElement){f=!0;break}f===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),this.bindLightTargets(l),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new qo().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new uu().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new w2;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in zE?a=zE[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new _0;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=Sl.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function o(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:i.resourcePath+c;return o(h)}else return l.data?{data:Cc(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new hS(t);s=new lh(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,h=e.length;c<h;c++){const f=e[c],p=f.url;if(Array.isArray(p)){const m=[];for(let v=0,A=p.length;v<A;v++){const x=p[v],g=a(x);g!==null&&(g instanceof HTMLImageElement?m.push(g):m.push(new xs(g.data,g.width,g.height)))}r[f.uuid]=new qa(m)}else{const m=a(f.url);r[f.uuid]=new qa(m)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:Cc(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new lh(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const h=[];for(let f=0,p=c.length;f<p;f++){const m=c[f],v=await s(m);v!==null&&(v instanceof HTMLImageElement?h.push(v):h.push(new xs(v.data,v.width,v.height)))}i[l.uuid]=new qa(h)}else{const h=await s(l.url);i[l.uuid]=new qa(h)}}}return i}parseTextures(e,t){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],c=l.data;let h;Array.isArray(c)?(h=new Mh,c.length===6&&(h.needsUpdate=!0)):(c&&c.data?h=new xs:h=new tn,c&&(h.needsUpdate=!0)),h.source=l,h.uuid=a.uuid,a.name!==void 0&&(h.name=a.name),a.mapping!==void 0&&(h.mapping=i(a.mapping,IH)),a.channel!==void 0&&(h.channel=a.channel),a.offset!==void 0&&h.offset.fromArray(a.offset),a.repeat!==void 0&&h.repeat.fromArray(a.repeat),a.center!==void 0&&h.center.fromArray(a.center),a.rotation!==void 0&&(h.rotation=a.rotation),a.wrap!==void 0&&(h.wrapS=i(a.wrap[0],WE),h.wrapT=i(a.wrap[1],WE)),a.format!==void 0&&(h.format=a.format),a.internalFormat!==void 0&&(h.internalFormat=a.internalFormat),a.type!==void 0&&(h.type=a.type),a.colorSpace!==void 0&&(h.colorSpace=a.colorSpace),a.minFilter!==void 0&&(h.minFilter=i(a.minFilter,jE)),a.magFilter!==void 0&&(h.magFilter=i(a.magFilter,jE)),a.anisotropy!==void 0&&(h.anisotropy=a.anisotropy),a.flipY!==void 0&&(h.flipY=a.flipY),a.generateMipmaps!==void 0&&(h.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(h.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(h.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(h.compareFunction=a.compareFunction),a.userData!==void 0&&(h.userData=a.userData),r[a.uuid]=h}return r}parseObject(e,t,i,r,s){let o;function a(p){return t[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),t[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const m=[];for(let v=0,A=p.length;v<A;v++){const x=p[v];i[x]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",x),m.push(i[x])}return m}return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),i[p]}}function c(p){return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),r[p]}let h,f;switch(e.type){case"Scene":o=new tS,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Ee(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new n0(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new t0(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new yn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new ys(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new x2(e.color,e.intensity);break;case"DirectionalLight":o=new x0(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new du(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new _2(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new y0(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new y2(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new S2().fromJSON(e);break;case"SkinnedMesh":h=a(e.geometry),f=l(e.material),o=new i0(h,f),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":h=a(e.geometry),f=l(e.material),o=new xt(h,f);break;case"InstancedMesh":h=a(e.geometry),f=l(e.material);const p=e.count,m=e.instanceMatrix,v=e.instanceColor;o=new bh(h,f,p),o.instanceMatrix=new na(new Float32Array(m.array),16),v!==void 0&&(o.instanceColor=new na(new Float32Array(v.array),v.itemSize));break;case"BatchedMesh":h=a(e.geometry),f=l(e.material),o=new JI(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,f),o.geometry=h,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(A=>{const x=new ai;x.min.fromArray(A.boxMin),x.max.fromArray(A.boxMax);const g=new Gn;return g.radius=A.sphereRadius,g.center.fromArray(A.sphereCenter),{boxInitialized:A.boxInitialized,box:x,sphereInitialized:A.sphereInitialized,sphere:g}}),o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=c(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=c(e.colorsTexture.uuid));break;case"LOD":o=new XI;break;case"Line":o=new Ms(a(e.geometry),l(e.material));break;case"LineLoop":o=new r0(a(e.geometry),l(e.material));break;case"LineSegments":o=new Fr(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new s0(a(e.geometry),l(e.material));break;case"Sprite":o=new jI(l(e.material));break;case"Group":o=new Ui;break;case"Bone":o=new Ch;break;default:o=new It}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let m=0;m<p.length;m++)o.add(this.parseObject(p[m],t,i,r,s))}if(e.animations!==void 0){const p=e.animations;for(let m=0;m<p.length;m++){const v=p[m];o.animations.push(s[v])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const p=e.levels;for(let m=0;m<p.length;m++){const v=p[m],A=o.getObjectByProperty("uuid",v.object);A!==void 0&&o.addLevel(A,v.distance,v.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,r=e.getObjectByProperty("uuid",i);r!==void 0?t.target=r:t.target=new It}})}}const IH={UVMapping:jg,CubeReflectionMapping:io,CubeRefractionMapping:ea,EquirectangularReflectionMapping:Zd,EquirectangularRefractionMapping:$d,CubeUVReflectionMapping:au},WE={RepeatWrapping:fr,ClampToEdgeWrapping:Qi,MirroredRepeatWrapping:gl},jE={NearestFilter:Hn,NearestMipmapNearestFilter:yh,NearestMipmapLinearFilter:Go,LinearFilter:en,LinearMipmapNearestFilter:sl,LinearMipmapLinearFilter:qi};class pS extends di{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Ks.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(c=>{t&&t(c),s.manager.itemEnd(e)}).catch(c=>{r&&r(c)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return Ks.add(e,c),t&&t(c),s.manager.itemEnd(e),c}).catch(function(c){r&&r(c),Ks.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Ks.add(e,l),s.manager.itemStart(e)}}let Np;class mS{static getContext(){return Np===void 0&&(Np=new(window.AudioContext||window.webkitAudioContext)),Np}static setContext(e){Np=e}}class PH extends di{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new ki(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);mS.getContext().decodeAudioData(c,function(f){t(f)}).catch(a)}catch(c){a(c)}},i,r);function a(l){r?r(l):console.error(l),s.manager.itemError(e)}}}const XE=new Qe,JE=new Qe,Ia=new Qe;class BH{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new yn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new yn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Ia.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(al*t.fov*.5)/t.zoom;let a,l;JE.elements[12]=-r,XE.elements[12]=r,a=-o*t.aspect+s,l=o*t.aspect+s,Ia.elements[0]=2*t.near/(l-a),Ia.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Ia),a=-o*t.aspect-s,l=o*t.aspect-s,Ia.elements[0]=2*t.near/(l-a),Ia.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Ia)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(JE),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(XE)}}class gS{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=KE(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=KE();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function KE(){return performance.now()}const Pa=new D,YE=new on,LH=new D,Ba=new D;class DH extends It{constructor(){super(),this.type="AudioListener",this.context=mS.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new gS}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Pa,YE,LH),Ba.set(0,0,-1).applyQuaternion(YE),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Pa.x,r),t.positionY.linearRampToValueAtTime(Pa.y,r),t.positionZ.linearRampToValueAtTime(Pa.z,r),t.forwardX.linearRampToValueAtTime(Ba.x,r),t.forwardY.linearRampToValueAtTime(Ba.y,r),t.forwardZ.linearRampToValueAtTime(Ba.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(Pa.x,Pa.y,Pa.z),t.setOrientation(Ba.x,Ba.y,Ba.z,i.x,i.y,i.z)}}let E2=class extends It{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}};const La=new D,QE=new on,NH=new D,Da=new D;class FH extends E2{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(La,QE,NH),Da.set(0,0,1).applyQuaternion(QE);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(La.x,i),t.positionY.linearRampToValueAtTime(La.y,i),t.positionZ.linearRampToValueAtTime(La.z,i),t.orientationX.linearRampToValueAtTime(Da.x,i),t.orientationY.linearRampToValueAtTime(Da.y,i),t.orientationZ.linearRampToValueAtTime(Da.z,i)}else t.setPosition(La.x,La.y,La.z),t.setOrientation(Da.x,Da.y,Da.z)}}class UH{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class C2{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(i[l]!==i[l+t]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){on.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;on.multiplyQuaternionsFlat(e,o,e,t,e,i),on.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const vS="\\[\\]\\.:\\/",OH=new RegExp("["+vS+"]","g"),yS="[^"+vS+"]",kH="[^"+vS.replace("\\.","")+"]",zH=/((?:WC+[\/:])*)/.source.replace("WC",yS),HH=/(WCOD+)?/.source.replace("WCOD",kH),GH=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",yS),VH=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",yS),WH=new RegExp("^"+zH+HH+GH+VH+"$"),jH=["material","materials","bones","map"];class XH{constructor(e,t,i){const r=i||Gt.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class Gt{constructor(e,t,i){this.path=t,this.parsedPath=i||Gt.parseTrackName(t),this.node=Gt.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Gt.Composite(e,t,i):new Gt(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(OH,"")}static parseTrackName(e){const t=WH.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);jH.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=Gt.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let c=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===c){c=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[r];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Gt.Composite=XH;Gt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Gt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Gt.prototype.GetterByBindingType=[Gt.prototype._getValue_direct,Gt.prototype._getValue_array,Gt.prototype._getValue_arrayElement,Gt.prototype._getValue_toArray];Gt.prototype.SetterByBindingTypeAndVersioning=[[Gt.prototype._setValue_direct,Gt.prototype._setValue_direct_setNeedsUpdate,Gt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Gt.prototype._setValue_array,Gt.prototype._setValue_array_setNeedsUpdate,Gt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Gt.prototype._setValue_arrayElement,Gt.prototype._setValue_arrayElement_setNeedsUpdate,Gt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Gt.prototype._setValue_fromArray,Gt.prototype._setValue_fromArray_setNeedsUpdate,Gt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class JH{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ur(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let h=0,f=arguments.length;h!==f;++h){const p=arguments[h],m=p.uuid;let v=t[m];if(v===void 0){v=l++,t[m]=v,e.push(p);for(let A=0,x=o;A!==x;++A)s[A].push(new Gt(p,i[A],r[A]))}else if(v<c){a=e[v];const A=--c,x=e[A];t[x.uuid]=v,e[v]=x,t[m]=A,e[A]=p;for(let g=0,S=o;g!==S;++g){const _=s[g],w=_[A];let I=_[v];_[v]=w,I===void 0&&(I=new Gt(p,i[g],r[g])),_[A]=I}}else e[v]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,h=t[c];if(h!==void 0&&h>=s){const f=s++,p=e[f];t[p.uuid]=h,e[h]=p,t[c]=f,e[f]=l;for(let m=0,v=r;m!==v;++m){const A=i[m],x=A[f],g=A[h];A[h]=x,A[f]=g}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],h=c.uuid,f=t[h];if(f!==void 0)if(delete t[h],f<s){const p=--s,m=e[p],v=--o,A=e[v];t[m.uuid]=f,e[f]=m,t[A.uuid]=p,e[p]=A,e.pop();for(let x=0,g=r;x!==g;++x){const S=i[x],_=S[p],w=S[v];S[f]=_,S[p]=w,S.pop()}}else{const p=--o,m=e[p];p>0&&(t[m.uuid]=f),e[f]=m,e.pop();for(let v=0,A=r;v!==A;++v){const x=i[v];x[f]=x[p],x.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,h=this.nCachedObjects_,f=new Array(c);r=s.length,i[e]=r,o.push(e),a.push(t),s.push(f);for(let p=h,m=l.length;p!==m;++p){const v=l[p];f[p]=new Gt(v,e,t)}return f}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];t[c]=i,o[i]=l,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class b2{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:Ya,endingEnd:Ya};for(let c=0;c!==o;++c){const h=s[c].createInterpolant(null);a[c]=h,h.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=mI,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+i,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case WA:for(let h=0,f=l.length;h!==f;++h)l[h].evaluate(o),c[h].accumulateAdditive(a);break;case Zg:default:for(let h=0,f=l.length;h!==f;++h)l[h].evaluate(o),c[h].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===gI;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===pI){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=Qa,r.endingEnd=Qa):(e?r.endingStart=this.zeroSlopeAtStart?Qa:Ya:r.endingStart=eh,t?r.endingEnd=this.zeroSlopeAtEnd?Qa:Ya:r.endingEnd=eh)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=i,this}}const KH=new Float32Array(1);class YH extends ws{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let h=c[l];h===void 0&&(h={},c[l]=h);for(let f=0;f!==s;++f){const p=r[f],m=p.name;let v=h[m];if(v!==void 0)++v.referenceCount,o[f]=v;else{if(v=o[f],v!==void 0){v._cacheIndex===null&&(++v.referenceCount,this._addInactiveBinding(v,l,m));continue}const A=t&&t._propertyBindings[f].binding.parsedPath;v=new C2(Gt.create(i,m,A),p.ValueTypeName,p.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,l,m),o[f]=v}a[f].resultBuffer=v.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],h=e._byClipCacheIndex;c._byClipCacheIndex=h,l[h]=c,l.pop(),e._byClipCacheIndex=null;const f=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete f[p],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new uS(new Float32Array(2),new Float32Array(2),1,KH),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?Sl.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(i===void 0&&(o!==null?i=o.blendMode:i=Zg),l!==void 0){const f=l.actionByRoot[s];if(f!==void 0&&f.blendMode===i)return f;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const h=new b2(this,o,t,i);return this._bindAction(h,c),this._addInactiveAction(h,a,s),h}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?Sl.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==i;++c)t[c]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const h=c._cacheIndex,f=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,f._cacheIndex=h,t[h]=f,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class xS{constructor(e){this.value=e}clone(){return new xS(this.value.clone===void 0?this.value:this.value.clone())}}let QH=0;class qH extends ws{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:QH++}),this.name="",this.usage=th,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++){const s=Array.isArray(t[i])?t[i]:[t[i]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class ZH extends cu{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class $H{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const qE=new Qe;class _S{constructor(e,t,i=0,r=1/0){this.ray=new Ss(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new ll,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return qE.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(qE),this}intersectObject(e,t=!0,i=[]){return I_(e,this,i,t),i.sort(ZE),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)I_(e[r],this,i,t);return i.sort(ZE),i}}function ZE(n,e){return n.distance-e.distance}function I_(n,e,t,i){let r=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(r=!1),r===!0&&i===!0){const s=n.children;for(let o=0,a=s.length;o<a;o++)I_(s[o],e,t,!0)}}class Sg{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(En(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class e4{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}class AS{constructor(e,t,i,r){AS.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,i,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let i=0;i<4;i++)this.elements[i]=e[i+t];return this}set(e,t,i,r){const s=this.elements;return s[0]=e,s[2]=t,s[1]=i,s[3]=r,this}}const $E=new ue;class T2{constructor(e=new ue(1/0,1/0),t=new ue(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=$E.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,$E).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const eC=new D,Fp=new D;class R2{constructor(e=new D,t=new D){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){eC.subVectors(e,this.start),Fp.subVectors(this.end,this.start);const i=Fp.dot(Fp);let s=Fp.dot(eC)/i;return t&&(s=En(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const tC=new D;class t4 extends It{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new gt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,h=a/l*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(h),Math.sin(h),1)}i.setAttribute("position",new st(r,3));const s=new ui({fog:!1,toneMapped:!1});this.cone=new Fr(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),tC.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(tC),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Io=new D,Up=new Qe,Vy=new Qe;class n4 extends Fr{constructor(e){const t=I2(e),i=new gt,r=[],s=[],o=new Ee(0,0,1),a=new Ee(0,1,0);for(let c=0;c<t.length;c++){const h=t[c];h.parent&&h.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new st(r,3)),i.setAttribute("color",new st(s,3));const l=new ui({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");Vy.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(Up.multiplyMatrices(Vy,a.matrixWorld),Io.setFromMatrixPosition(Up),r.setXYZ(o,Io.x,Io.y,Io.z),Up.multiplyMatrices(Vy,a.parent.matrixWorld),Io.setFromMatrixPosition(Up),r.setXYZ(o+1,Io.x,Io.y,Io.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function I2(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,I2(n.children[t]));return e}class i4 extends xt{constructor(e,t,i){const r=new ia(t,4,2),s=new Cn({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const r4=new D,nC=new Ee,iC=new Ee;class s4 extends It{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new Ih(t);r.rotateY(Math.PI*.5),this.material=new Cn({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new yt(o,3)),this.add(new xt(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");nC.copy(this.light.color),iC.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?nC:iC;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(r4.setFromMatrixPosition(this.light.matrixWorld).negate())}}class o4 extends Fr{constructor(e=10,t=10,i=4473924,r=8947848){i=new Ee(i),r=new Ee(r);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let p=0,m=0,v=-a;p<=t;p++,v+=o){l.push(-a,0,v,a,0,v),l.push(v,0,-a,v,0,a);const A=p===s?i:r;A.toArray(c,m),m+=3,A.toArray(c,m),m+=3,A.toArray(c,m),m+=3,A.toArray(c,m),m+=3}const h=new gt;h.setAttribute("position",new st(l,3)),h.setAttribute("color",new st(c,3));const f=new ui({vertexColors:!0,toneMapped:!1});super(h,f),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class a4 extends Fr{constructor(e=10,t=16,i=8,r=64,s=4473924,o=8947848){s=new Ee(s),o=new Ee(o);const a=[],l=[];if(t>1)for(let f=0;f<t;f++){const p=f/t*(Math.PI*2),m=Math.sin(p)*e,v=Math.cos(p)*e;a.push(0,0,0),a.push(m,0,v);const A=f&1?s:o;l.push(A.r,A.g,A.b),l.push(A.r,A.g,A.b)}for(let f=0;f<i;f++){const p=f&1?s:o,m=e-e/i*f;for(let v=0;v<r;v++){let A=v/r*(Math.PI*2),x=Math.sin(A)*m,g=Math.cos(A)*m;a.push(x,0,g),l.push(p.r,p.g,p.b),A=(v+1)/r*(Math.PI*2),x=Math.sin(A)*m,g=Math.cos(A)*m,a.push(x,0,g),l.push(p.r,p.g,p.b)}}const c=new gt;c.setAttribute("position",new st(a,3)),c.setAttribute("color",new st(l,3));const h=new ui({vertexColors:!0,toneMapped:!1});super(c,h),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const rC=new D,Op=new D,sC=new D;class l4 extends It{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new gt;r.setAttribute("position",new st([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new ui({fog:!1,toneMapped:!1});this.lightPlane=new Ms(r,s),this.add(this.lightPlane),r=new gt,r.setAttribute("position",new st([0,0,0,0,0,1],3)),this.targetLine=new Ms(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),rC.setFromMatrixPosition(this.light.matrixWorld),Op.setFromMatrixPosition(this.light.target.matrixWorld),sC.subVectors(Op,rC),this.lightPlane.lookAt(Op),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Op),this.targetLine.scale.z=sC.length()}}const kp=new D,Mn=new Sh;class c4 extends Fr{constructor(e){const t=new gt,i=new ui({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(v,A){l(v),l(A)}function l(v){r.push(0,0,0),s.push(0,0,0),o[v]===void 0&&(o[v]=[]),o[v].push(r.length/3-1)}t.setAttribute("position",new st(r,3)),t.setAttribute("color",new st(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new Ee(16755200),h=new Ee(16711680),f=new Ee(43775),p=new Ee(16777215),m=new Ee(3355443);this.setColors(c,h,f,p,m)}setColors(e,t,i,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;Mn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),In("c",t,e,Mn,0,0,-1),In("t",t,e,Mn,0,0,1),In("n1",t,e,Mn,-i,-r,-1),In("n2",t,e,Mn,i,-r,-1),In("n3",t,e,Mn,-i,r,-1),In("n4",t,e,Mn,i,r,-1),In("f1",t,e,Mn,-i,-r,1),In("f2",t,e,Mn,i,-r,1),In("f3",t,e,Mn,-i,r,1),In("f4",t,e,Mn,i,r,1),In("u1",t,e,Mn,i*.7,r*1.1,-1),In("u2",t,e,Mn,-i*.7,r*1.1,-1),In("u3",t,e,Mn,0,r*2,-1),In("cf1",t,e,Mn,-i,0,1),In("cf2",t,e,Mn,i,0,1),In("cf3",t,e,Mn,0,-r,1),In("cf4",t,e,Mn,0,r,1),In("cn1",t,e,Mn,-i,0,-1),In("cn2",t,e,Mn,i,0,-1),In("cn3",t,e,Mn,0,-r,-1),In("cn4",t,e,Mn,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function In(n,e,t,i,r,s,o){kp.set(r,s,o).unproject(i);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let c=0,h=a.length;c<h;c++)l.setXYZ(a[c],kp.x,kp.y,kp.z)}}const zp=new ai;class u4 extends Fr{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new gt;s.setIndex(new yt(i,1)),s.setAttribute("position",new yt(r,3)),super(s,new ui({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&zp.setFromObject(this.object),zp.isEmpty())return;const t=zp.min,i=zp.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class d4 extends Fr{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new gt;s.setIndex(new yt(i,1)),s.setAttribute("position",new st(r,3)),super(s,new ui({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class h4 extends Ms{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new gt;o.setAttribute("position",new st(s,3)),o.computeBoundingSphere(),super(o,new ui({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new gt;l.setAttribute("position",new st(a,3)),l.computeBoundingSphere(),this.add(new xt(l,new Cn({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const oC=new D;let Hp,Wy;class f4 extends It{constructor(e=new D(0,0,1),t=new D(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",Hp===void 0&&(Hp=new gt,Hp.setAttribute("position",new st([0,0,0,0,1,0],3)),Wy=new oo(0,.5,1,5,1),Wy.translate(0,-.5,0)),this.position.copy(t),this.line=new Ms(Hp,new ui({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new xt(Wy,new Cn({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{oC.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(oC,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class p4 extends Fr{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new gt;r.setAttribute("position",new st(t,3)),r.setAttribute("color",new st(i,3));const s=new ui({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new Ee,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class m4{constructor(){this.type="ShapePath",this.color=new Ee,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new rh,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(g){const S=[];for(let _=0,w=g.length;_<w;_++){const I=g[_],T=new qo;T.curves=I.curves,S.push(T)}return S}function i(g,S){const _=S.length;let w=!1;for(let I=_-1,T=0;T<_;I=T++){let P=S[I],B=S[T],R=B.x-P.x,C=B.y-P.y;if(Math.abs(C)>Number.EPSILON){if(C<0&&(P=S[T],R=-R,B=S[I],C=-C),g.y<P.y||g.y>B.y)continue;if(g.y===P.y){if(g.x===P.x)return!0}else{const U=C*(g.x-P.x)-R*(g.y-P.y);if(U===0)return!0;if(U<0)continue;w=!w}}else{if(g.y!==P.y)continue;if(B.x<=g.x&&g.x<=P.x||P.x<=g.x&&g.x<=B.x)return!0}}return w}const r=_s.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new qo,l.curves=a.curves,c.push(l),c;let h=!r(s[0].getPoints());h=e?!h:h;const f=[],p=[];let m=[],v=0,A;p[v]=void 0,m[v]=[];for(let g=0,S=s.length;g<S;g++)a=s[g],A=a.getPoints(),o=r(A),o=e?!o:o,o?(!h&&p[v]&&v++,p[v]={s:new qo,p:A},p[v].s.curves=a.curves,h&&v++,m[v]=[]):m[v].push({h:a,p:A[0]});if(!p[0])return t(s);if(p.length>1){let g=!1,S=0;for(let _=0,w=p.length;_<w;_++)f[_]=[];for(let _=0,w=p.length;_<w;_++){const I=m[_];for(let T=0;T<I.length;T++){const P=I[T];let B=!0;for(let R=0;R<p.length;R++)i(P.p,p[R].p)&&(_!==R&&S++,B?(B=!1,f[R].push(P)):g=!0);B&&f[_].push(P)}}S>0&&g===!1&&(m=f)}let x;for(let g=0,S=p.length;g<S;g++){l=p[g].s,c.push(l),x=m[g];for(let _=0,w=x.length;_<w;_++)l.holes.push(x[_].h)}return c}}let g4=class extends ws{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}};class v4 extends ci{constructor(e=1,t=1,i=1,r={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,t,{...r,count:i}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Cl}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Cl);const y4=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:DA,AddEquation:ko,AddOperation:oI,AdditiveAnimationBlendMode:WA,AdditiveBlending:qd,AgXToneMapping:dI,AlphaFormat:OA,AlwaysCompare:CI,AlwaysDepth:Hm,AlwaysStencilFunc:__,AmbientLight:x2,AnimationAction:b2,AnimationClip:Sl,AnimationLoader:SH,AnimationMixer:YH,AnimationObjectGroup:JH,AnimationUtils:yH,ArcCurve:YI,ArrayCamera:GI,ArrowHelper:f4,AttachedBindMode:x_,Audio:E2,AudioAnalyser:UH,AudioContext:mS,AudioListener:DH,AudioLoader:PH,AxesHelper:p4,BackSide:oi,BasicDepthPacking:vI,BasicShadowMap:zR,BatchedMesh:JI,Bone:Ch,BooleanKeyframeTrack:Tl,Box2:T2,Box3:ai,Box3Helper:d4,BoxGeometry:Nr,BoxHelper:u4,BufferAttribute:yt,BufferGeometry:gt,BufferGeometryLoader:w2,ByteType:NA,Cache:Ks,Camera:Sh,CameraHelper:c4,CanvasTexture:C_,CapsuleGeometry:l0,CatmullRomCurve3:Tc,CineonToneMapping:cI,CircleGeometry:cl,ClampToEdgeWrapping:Qi,Clock:gS,Color:Ee,ColorKeyframeTrack:dS,ColorManagement:Ut,CompressedArrayTexture:Hz,CompressedCubeTexture:Gz,CompressedTexture:o0,CompressedTextureLoader:MH,ConeGeometry:c0,ConstantAlphaFactor:iI,ConstantColorFactor:tI,Controls:g4,CubeCamera:DI,CubeReflectionMapping:io,CubeRefractionMapping:ea,CubeTexture:Mh,CubeTextureLoader:wH,CubeUVReflectionMapping:au,CubicBezierCurve:rS,CubicBezierCurve3:QI,CubicInterpolant:p2,CullFaceBack:g_,CullFaceFront:kR,CullFaceFrontBack:SN,CullFaceNone:OR,Curve:$r,CurvePath:ZI,CustomBlending:HR,CustomToneMapping:uI,CylinderGeometry:oo,Cylindrical:e4,Data3DTexture:YA,DataArrayTexture:$g,DataTexture:xs,DataTextureLoader:EH,DataUtils:BF,DecrementStencilOp:LN,DecrementWrapStencilOp:NN,DefaultLoadingManager:v2,DepthFormat:ol,DepthStencilFormat:yl,DepthTexture:Eh,DetachedBindMode:fI,DirectionalLight:x0,DirectionalLightHelper:l4,DiscreteInterpolant:m2,DodecahedronGeometry:u0,DoubleSide:zn,DstAlphaFactor:QR,DstColorFactor:ZR,DynamicCopyUsage:QN,DynamicDrawUsage:WN,DynamicReadUsage:JN,EdgesGeometry:$I,EllipseCurve:a0,EqualCompare:SI,EqualDepth:Vm,EqualStencilFunc:kN,EquirectangularReflectionMapping:Zd,EquirectangularRefractionMapping:$d,Euler:Ti,EventDispatcher:ws,ExtrudeGeometry:h0,FileLoader:ki,Float16BufferAttribute:OF,Float32BufferAttribute:st,FloatType:Fi,Fog:n0,FogExp2:t0,FramebufferTexture:zz,FrontSide:qr,Frustum:wh,GLBufferAttribute:$H,GLSL1:ZN,GLSL3:A_,GreaterCompare:MI,GreaterDepth:jm,GreaterEqualCompare:EI,GreaterEqualDepth:Wm,GreaterEqualStencilFunc:VN,GreaterStencilFunc:HN,GridHelper:o4,Group:Ui,HalfFloatType:aa,HemisphereLight:y2,HemisphereLightHelper:s4,IcosahedronGeometry:f0,ImageBitmapLoader:pS,ImageLoader:lh,ImageUtils:RI,IncrementStencilOp:BN,IncrementWrapStencilOp:DN,InstancedBufferAttribute:na,InstancedBufferGeometry:M2,InstancedInterleavedBuffer:ZH,InstancedMesh:bh,Int16BufferAttribute:FF,Int32BufferAttribute:UF,Int8BufferAttribute:LF,IntType:Xg,InterleavedBuffer:cu,InterleavedBufferAttribute:so,Interpolant:bl,InterpolateDiscrete:xl,InterpolateLinear:ta,InterpolateSmooth:um,InvertStencilOp:FN,KeepStencilOp:Ga,KeyframeTrack:es,LOD:XI,LatheGeometry:Rh,Layers:ll,LessCompare:AI,LessDepth:Gm,LessEqualCompare:XA,LessEqualDepth:ml,LessEqualStencilFunc:zN,LessStencilFunc:ON,Light:da,LightProbe:S2,Line:Ms,Line3:R2,LineBasicMaterial:ui,LineCurve:sS,LineCurve3:qI,LineDashedMaterial:d2,LineLoop:r0,LineSegments:Fr,LinearFilter:en,LinearInterpolant:uS,LinearMipMapLinearFilter:CN,LinearMipMapNearestFilter:EN,LinearMipmapLinearFilter:qi,LinearMipmapNearestFilter:sl,LinearSRGBColorSpace:bi,LinearToneMapping:aI,LinearTransfer:Ah,Loader:di,LoaderUtils:dr,LoadingManager:hS,LoopOnce:pI,LoopPingPong:gI,LoopRepeat:mI,LuminanceAlphaFormat:HA,LuminanceFormat:zA,MOUSE:za,Material:mn,MaterialLoader:_0,MathUtils:KA,Matrix2:AS,Matrix3:Mt,Matrix4:Qe,MaxEquation:jR,Mesh:xt,MeshBasicMaterial:Cn,MeshDepthMaterial:$A,MeshDistanceMaterial:eS,MeshLambertMaterial:c2,MeshMatcapMaterial:u2,MeshNormalMaterial:l2,MeshPhongMaterial:o2,MeshPhysicalMaterial:bn,MeshStandardMaterial:jt,MeshToonMaterial:a2,MinEquation:WR,MirroredRepeatWrapping:gl,MixOperation:sI,MultiplyBlending:y_,MultiplyOperation:vh,NearestFilter:Hn,NearestMipMapLinearFilter:wN,NearestMipMapNearestFilter:MN,NearestMipmapLinearFilter:Go,NearestMipmapNearestFilter:yh,NeutralToneMapping:hI,NeverCompare:_I,NeverDepth:zm,NeverStencilFunc:UN,NoBlending:Qs,NoColorSpace:Ws,NoToneMapping:vs,NormalAnimationBlendMode:Zg,NormalBlending:rl,NotEqualCompare:wI,NotEqualDepth:Xm,NotEqualStencilFunc:GN,NumberKeyframeTrack:ao,Object3D:It,ObjectLoader:RH,ObjectSpaceNormalMap:xI,OctahedronGeometry:Ih,OneFactor:JR,OneMinusConstantAlphaFactor:rI,OneMinusConstantColorFactor:nI,OneMinusDstAlphaFactor:qR,OneMinusDstColorFactor:$R,OneMinusSrcAlphaFactor:km,OneMinusSrcColorFactor:YR,OrthographicCamera:ys,PCFShadowMap:Wg,PCFSoftShadowMap:Ed,PMREMGenerator:S_,Path:rh,PerspectiveCamera:yn,Plane:Ir,PlaneGeometry:ca,PlaneHelper:h4,PointLight:du,PointLightHelper:i4,Points:s0,PointsMaterial:Th,PolarGridHelper:a4,PolyhedronGeometry:ua,PositionalAudio:FH,PropertyBinding:Gt,PropertyMixer:C2,QuadraticBezierCurve:oS,QuadraticBezierCurve3:aS,Quaternion:on,QuaternionKeyframeTrack:lo,QuaternionLinearInterpolant:g2,RED_GREEN_RGTC2_Format:vg,RED_RGTC1_Format:VA,REVISION:Cl,RGBADepthPacking:yI,RGBAFormat:Ei,RGBAIntegerFormat:qg,RGBA_ASTC_10x10_Format:dg,RGBA_ASTC_10x5_Format:lg,RGBA_ASTC_10x6_Format:cg,RGBA_ASTC_10x8_Format:ug,RGBA_ASTC_12x10_Format:hg,RGBA_ASTC_12x12_Format:fg,RGBA_ASTC_4x4_Format:eg,RGBA_ASTC_5x4_Format:tg,RGBA_ASTC_5x5_Format:ng,RGBA_ASTC_6x5_Format:ig,RGBA_ASTC_6x6_Format:rg,RGBA_ASTC_8x5_Format:sg,RGBA_ASTC_8x6_Format:og,RGBA_ASTC_8x8_Format:ag,RGBA_BPTC_Format:Id,RGBA_ETC2_EAC_Format:$m,RGBA_PVRTC_2BPPV1_Format:Qm,RGBA_PVRTC_4BPPV1_Format:Ym,RGBA_S3TC_DXT1_Format:bd,RGBA_S3TC_DXT3_Format:Td,RGBA_S3TC_DXT5_Format:Rd,RGBDepthPacking:TN,RGBFormat:kA,RGBIntegerFormat:bN,RGB_BPTC_SIGNED_Format:pg,RGB_BPTC_UNSIGNED_Format:mg,RGB_ETC1_Format:qm,RGB_ETC2_Format:Zm,RGB_PVRTC_2BPPV1_Format:Km,RGB_PVRTC_4BPPV1_Format:Jm,RGB_S3TC_DXT1_Format:Cd,RGDepthPacking:RN,RGFormat:GA,RGIntegerFormat:Qg,RawShaderMaterial:s2,Ray:Ss,Raycaster:_S,RectAreaLight:_2,RedFormat:Yg,RedIntegerFormat:xh,ReinhardToneMapping:lI,RenderTarget:II,RepeatWrapping:fr,ReplaceStencilOp:PN,ReverseSubtractEquation:VR,RingGeometry:$c,SIGNED_RED_GREEN_RGTC2_Format:yg,SIGNED_RED_RGTC1_Format:gg,SRGBColorSpace:Un,SRGBTransfer:qt,Scene:tS,ShaderChunk:bt,ShaderLib:Jr,ShaderMaterial:pr,ShadowMaterial:r2,Shape:qo,ShapeGeometry:Ph,ShapePath:m4,ShapeUtils:_s,ShortType:FA,Skeleton:uu,SkeletonHelper:n4,SkinnedMesh:i0,Source:qa,Sphere:Gn,SphereGeometry:ia,Spherical:Sg,SphericalHarmonics3:A2,SplineCurve:lS,SpotLight:y0,SpotLightHelper:t4,Sprite:jI,SpriteMaterial:nS,SrcAlphaFactor:Om,SrcAlphaSaturateFactor:eI,SrcColorFactor:KR,StaticCopyUsage:YN,StaticDrawUsage:th,StaticReadUsage:XN,StereoCamera:BH,StreamCopyUsage:qN,StreamDrawUsage:jN,StreamReadUsage:KN,StringKeyframeTrack:Rl,SubtractEquation:GR,SubtractiveBlending:v_,TOUCH:Ha,TangentSpaceNormalMap:la,TetrahedronGeometry:p0,Texture:tn,TextureLoader:ch,TextureUtils:Az,TorusGeometry:m0,TorusKnotGeometry:g0,Triangle:wi,TriangleFanDrawMode:_l,TriangleStripDrawMode:_h,TrianglesDrawMode:jA,TubeGeometry:v0,UVMapping:jg,Uint16BufferAttribute:QA,Uint32BufferAttribute:qA,Uint8BufferAttribute:DF,Uint8ClampedBufferAttribute:NF,Uniform:xS,UniformsGroup:qH,UniformsLib:Ue,UniformsUtils:LI,UnsignedByteType:Zr,UnsignedInt248Type:vl,UnsignedInt5999Type:UA,UnsignedIntType:ro,UnsignedShort4444Type:Jg,UnsignedShort5551Type:Kg,UnsignedShortType:Qc,VSMShadowMap:Wr,Vector2:ue,Vector3:D,Vector4:Vt,VectorKeyframeTrack:co,VideoTexture:KI,WebGL3DRenderTarget:SF,WebGLArrayRenderTarget:AF,WebGLCoordinateSystem:ps,WebGLCubeRenderTarget:NI,WebGLMultipleRenderTargets:v4,WebGLRenderTarget:ci,WebGLRenderer:VI,WebGLUtils:HI,WebGPUCoordinateSystem:nh,WireframeGeometry:i2,WrapAroundEnding:eh,ZeroCurvatureEnding:Ya,ZeroFactor:XR,ZeroSlopeEnding:Qa,ZeroStencilOp:IN,createCanvasElement:TI},Symbol.toStringTag,{value:"Module"}));var P2={exports:{}},Il={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Il.ConcurrentRoot=1;Il.ContinuousEventPriority=4;Il.DefaultEventPriority=16;Il.DiscreteEventPriority=1;Il.IdleEventPriority=536870912;Il.LegacyRoot=0;P2.exports=Il;var Ic=P2.exports;function x4(n){let e;const t=new Set,i=(c,h)=>{const f=typeof c=="function"?c(e):c;if(f!==e){const p=e;e=h?f:Object.assign({},e,f),t.forEach(m=>m(e,p))}},r=()=>e,s=(c,h=r,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=h(e);function m(){const v=h(e);if(!f(p,v)){const A=p;c(p=v,A)}}return t.add(m),()=>t.delete(m)},l={setState:i,getState:r,subscribe:(c,h,f)=>h||f?s(c,h,f):(t.add(c),()=>t.delete(c)),destroy:()=>t.clear()};return e=n(i,r,l),l}const _4=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),aC=_4?H.useEffect:H.useLayoutEffect;function B2(n){const e=typeof n=="function"?x4(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=H.useReducer(x=>x+1,0),o=e.getState(),a=H.useRef(o),l=H.useRef(i),c=H.useRef(r),h=H.useRef(!1),f=H.useRef();f.current===void 0&&(f.current=i(o));let p,m=!1;(a.current!==o||l.current!==i||c.current!==r||h.current)&&(p=i(o),m=!r(f.current,p)),aC(()=>{m&&(f.current=p),a.current=o,l.current=i,c.current=r,h.current=!1});const v=H.useRef(o);aC(()=>{const x=()=>{try{const S=e.getState(),_=l.current(S);c.current(f.current,_)||(a.current=S,f.current=_,s())}catch{h.current=!0,s()}},g=e.subscribe(x);return e.getState()!==v.current&&x(),g},[]);const A=m?p:f.current;return H.useDebugValue(A),A};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}const A4=n=>typeof n=="object"&&typeof n.then=="function",$a=[];function L2(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}function D2(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const s of $a)if(L2(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return i.lifespan&&i.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,i.lifespan)),s.response;if(!t)throw s.promise}const r={keys:e,equal:i.equal,remove:()=>{const s=$a.indexOf(r);s!==-1&&$a.splice(s,1)},promise:(A4(n)?n:n(...e)).then(s=>{r.response=s,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(s=>r.error=s)};if($a.push(r),!t)throw r.promise}const N2=(n,e,t)=>D2(n,e,!1,t),S4=(n,e,t)=>void D2(n,e,!0,t),M4=n=>{if(n===void 0||n.length===0)$a.splice(0,$a.length);else{const e=$a.find(t=>L2(n,t.keys,t.equal));e&&e.remove()}};var F2={exports:{}},jy={exports:{}},Xy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lC;function w4(){return lC||(lC=1,function(n){function e(F,k){var W=F.length;F.push(k);e:for(;0<W;){var Y=W-1>>>1,se=F[Y];if(0<r(se,k))F[Y]=k,F[W]=se,W=Y;else break e}}function t(F){return F.length===0?null:F[0]}function i(F){if(F.length===0)return null;var k=F[0],W=F.pop();if(W!==k){F[0]=W;e:for(var Y=0,se=F.length,Ce=se>>>1;Y<Ce;){var q=2*(Y+1)-1,ie=F[q],he=q+1,ae=F[he];if(0>r(ie,W))he<se&&0>r(ae,ie)?(F[Y]=ae,F[he]=W,Y=he):(F[Y]=ie,F[q]=W,Y=q);else if(he<se&&0>r(ae,W))F[Y]=ae,F[he]=W,Y=he;else break e}}return k}function r(F,k){var W=F.sortIndex-k.sortIndex;return W!==0?W:F.id-k.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,f=null,p=3,m=!1,v=!1,A=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(F){for(var k=t(c);k!==null;){if(k.callback===null)i(c);else if(k.startTime<=F)i(c),k.sortIndex=k.expirationTime,e(l,k);else break;k=t(c)}}function w(F){if(A=!1,_(F),!v)if(t(l)!==null)v=!0,re(I);else{var k=t(c);k!==null&&ge(w,k.startTime-F)}}function I(F,k){v=!1,A&&(A=!1,g(B),B=-1),m=!0;var W=p;try{for(_(k),f=t(l);f!==null&&(!(f.expirationTime>k)||F&&!U());){var Y=f.callback;if(typeof Y=="function"){f.callback=null,p=f.priorityLevel;var se=Y(f.expirationTime<=k);k=n.unstable_now(),typeof se=="function"?f.callback=se:f===t(l)&&i(l),_(k)}else i(l);f=t(l)}if(f!==null)var Ce=!0;else{var q=t(c);q!==null&&ge(w,q.startTime-k),Ce=!1}return Ce}finally{f=null,p=W,m=!1}}var T=!1,P=null,B=-1,R=5,C=-1;function U(){return!(n.unstable_now()-C<R)}function j(){if(P!==null){var F=n.unstable_now();C=F;var k=!0;try{k=P(!0,F)}finally{k?K():(T=!1,P=null)}}else T=!1}var K;if(typeof S=="function")K=function(){S(j)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,de=te.port2;te.port1.onmessage=j,K=function(){de.postMessage(null)}}else K=function(){x(j,0)};function re(F){P=F,T||(T=!0,K())}function ge(F,k){B=x(function(){F(n.unstable_now())},k)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,re(I))},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(F){switch(p){case 1:case 2:case 3:var k=3;break;default:k=p}var W=p;p=k;try{return F()}finally{p=W}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(F,k){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var W=p;p=F;try{return k()}finally{p=W}},n.unstable_scheduleCallback=function(F,k,W){var Y=n.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?Y+W:Y):W=Y,F){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=W+se,F={id:h++,callback:k,priorityLevel:F,startTime:W,expirationTime:se,sortIndex:-1},W>Y?(F.sortIndex=W,e(c,F),t(l)===null&&F===t(c)&&(A?(g(B),B=-1):A=!0,ge(w,W-Y))):(F.sortIndex=se,e(l,F),v||m||(v=!0,re(I))),F},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(F){var k=p;return function(){var W=p;p=k;try{return F.apply(this,arguments)}finally{p=W}}}}(Xy)),Xy}var cC;function E4(){return cC||(cC=1,jy.exports=w4()),jy.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C4=function(e){var t={},i=H,r=E4(),s=Object.assign;function o(u){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+u,y=1;y<arguments.length;y++)d+="&args[]="+encodeURIComponent(arguments[y]);return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),v=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),w=Symbol.for("react.offscreen"),I=Symbol.iterator;function T(u){return u===null||typeof u!="object"?null:(u=I&&u[I]||u["@@iterator"],typeof u=="function"?u:null)}function P(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case h:return"Fragment";case c:return"Portal";case p:return"Profiler";case f:return"StrictMode";case x:return"Suspense";case g:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case v:return(u.displayName||"Context")+".Consumer";case m:return(u._context.displayName||"Context")+".Provider";case A:var d=u.render;return u=u.displayName,u||(u=d.displayName||d.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case S:return d=u.displayName||null,d!==null?d:P(u.type)||"Memo";case _:d=u._payload,u=u._init;try{return P(u(d))}catch{}}return null}function B(u){var d=u.type;switch(u.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return u=d.render,u=u.displayName||u.name||"",d.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return P(d);case 8:return d===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function R(u){var d=u,y=u;if(u.alternate)for(;d.return;)d=d.return;else{u=d;do d=u,d.flags&4098&&(y=d.return),u=d.return;while(u)}return d.tag===3?y:null}function C(u){if(R(u)!==u)throw Error(o(188))}function U(u){var d=u.alternate;if(!d){if(d=R(u),d===null)throw Error(o(188));return d!==u?null:u}for(var y=u,M=d;;){var E=y.return;if(E===null)break;var b=E.alternate;if(b===null){if(M=E.return,M!==null){y=M;continue}break}if(E.child===b.child){for(b=E.child;b;){if(b===y)return C(E),u;if(b===M)return C(E),d;b=b.sibling}throw Error(o(188))}if(y.return!==M.return)y=E,M=b;else{for(var G=!1,Q=E.child;Q;){if(Q===y){G=!0,y=E,M=b;break}if(Q===M){G=!0,M=E,y=b;break}Q=Q.sibling}if(!G){for(Q=b.child;Q;){if(Q===y){G=!0,y=b,M=E;break}if(Q===M){G=!0,M=b,y=E;break}Q=Q.sibling}if(!G)throw Error(o(189))}}if(y.alternate!==M)throw Error(o(190))}if(y.tag!==3)throw Error(o(188));return y.stateNode.current===y?u:d}function j(u){return u=U(u),u!==null?K(u):null}function K(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){var d=K(u);if(d!==null)return d;u=u.sibling}return null}function te(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){if(u.tag!==4){var d=te(u);if(d!==null)return d}u=u.sibling}return null}var de=Array.isArray,re=e.getPublicInstance,ge=e.getRootHostContext,F=e.getChildHostContext,k=e.prepareForCommit,W=e.resetAfterCommit,Y=e.createInstance,se=e.appendInitialChild,Ce=e.finalizeInitialChildren,q=e.prepareUpdate,ie=e.shouldSetTextContent,he=e.createTextInstance,ae=e.scheduleTimeout,Le=e.cancelTimeout,We=e.noTimeout,qe=e.isPrimaryRenderer,ke=e.supportsMutation,me=e.supportsPersistence,xe=e.supportsHydration,V=e.getInstanceFromNode,Je=e.preparePortalMount,Me=e.getCurrentEventPriority,De=e.detachDeletedInstance,Ie=e.supportsMicrotasks,ot=e.scheduleMicrotask,Ne=e.supportsTestSelectors,z=e.findFiberRoot,N=e.getBoundingRect,ne=e.getTextContent,ye=e.isHiddenSubtree,we=e.matchAccessibilityRole,Ae=e.setFocusIfFocusable,tt=e.setupIntersectionObserver,Fe=e.appendChild,Ke=e.appendChildToContainer,Tt=e.commitTextUpdate,be=e.commitMount,Ze=e.commitUpdate,ut=e.insertBefore,mt=e.insertInContainerBefore,Ye=e.removeChild,J=e.removeChildFromContainer,_e=e.resetTextContent,ze=e.hideInstance,X=e.hideTextInstance,Te=e.unhideInstance,fe=e.unhideTextInstance,Se=e.clearContainer,je=e.cloneInstance,Oe=e.createContainerChildSet,ct=e.appendChildToContainerChildSet,Wt=e.finalizeContainerChildren,an=e.replaceContainerChildren,Dt=e.cloneHiddenInstance,Bn=e.cloneHiddenTextInstance,hi=e.canHydrateInstance,Lh=e.canHydrateTextInstance,Dh=e.canHydrateSuspenseInstance,ts=e.isSuspenseInstancePending,ha=e.isSuspenseInstanceFallback,Nh=e.registerSuspenseInstanceRetry,ho=e.getNextHydratableSibling,Pl=e.getFirstHydratableChild,Fh=e.getFirstHydratableChildWithinContainer,Bl=e.getFirstHydratableChildWithinSuspenseInstance,Uh=e.hydrateInstance,Oh=e.hydrateTextInstance,E0=e.hydrateSuspenseInstance,C0=e.getNextHydratableInstanceAfterSuspenseInstance,kh=e.commitHydratedContainer,O=e.commitHydratedSuspenseInstance,Z=e.clearSuspenseBoundary,le=e.clearSuspenseBoundaryFromContainer,ce=e.shouldDeleteUnhydratedTailInstances,ee=e.didNotMatchHydratedContainerTextInstance,Be=e.didNotMatchHydratedTextInstance,He;function nt(u){if(He===void 0)try{throw Error()}catch(y){var d=y.stack.trim().match(/\n( *(at )?)/);He=d&&d[1]||""}return`
`+He+u}var it=!1;function vt(u,d){if(!u||it)return"";it=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(Pe){var M=Pe}Reflect.construct(u,[],d)}else{try{d.call()}catch(Pe){M=Pe}u.call(d.prototype)}else{try{throw Error()}catch(Pe){M=Pe}u()}}catch(Pe){if(Pe&&M&&typeof Pe.stack=="string"){for(var E=Pe.stack.split(`
`),b=M.stack.split(`
`),G=E.length-1,Q=b.length-1;1<=G&&0<=Q&&E[G]!==b[Q];)Q--;for(;1<=G&&0<=Q;G--,Q--)if(E[G]!==b[Q]){if(G!==1||Q!==1)do if(G--,Q--,0>Q||E[G]!==b[Q]){var ve=`
`+E[G].replace(" at new "," at ");return u.displayName&&ve.includes("<anonymous>")&&(ve=ve.replace("<anonymous>",u.displayName)),ve}while(1<=G&&0<=Q);break}}}finally{it=!1,Error.prepareStackTrace=y}return(u=u?u.displayName||u.name:"")?nt(u):""}var _t=Object.prototype.hasOwnProperty,rt=[],Pt=-1;function Ht(u){return{current:u}}function ft(u){0>Pt||(u.current=rt[Pt],rt[Pt]=null,Pt--)}function Et(u,d){Pt++,rt[Pt]=u.current,u.current=d}var Bt={},Ve=Ht(Bt),dn=Ht(!1),Nt=Bt;function Yn(u,d){var y=u.type.contextTypes;if(!y)return Bt;var M=u.stateNode;if(M&&M.__reactInternalMemoizedUnmaskedChildContext===d)return M.__reactInternalMemoizedMaskedChildContext;var E={},b;for(b in y)E[b]=d[b];return M&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=d,u.__reactInternalMemoizedMaskedChildContext=E),E}function Tn(u){return u=u.childContextTypes,u!=null}function Qn(){ft(dn),ft(Ve)}function fo(u,d,y){if(Ve.current!==Bt)throw Error(o(168));Et(Ve,d),Et(dn,y)}function $t(u,d,y){var M=u.stateNode;if(d=d.childContextTypes,typeof M.getChildContext!="function")return y;M=M.getChildContext();for(var E in M)if(!(E in d))throw Error(o(108,B(u)||"Unknown",E));return s({},y,M)}function Ri(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||Bt,Nt=Ve.current,Et(Ve,u),Et(dn,dn.current),!0}function po(u,d,y){var M=u.stateNode;if(!M)throw Error(o(169));y?(u=$t(u,d,Nt),M.__reactInternalMemoizedMergedChildContext=u,ft(dn),ft(Ve),Et(Ve,u)):ft(dn),Et(dn,y)}var hn=Math.clz32?Math.clz32:zh,ns=Math.log,is=Math.LN2;function zh(u){return u>>>=0,u===0?32:31-(ns(u)/is|0)|0}var Hh=64,Gh=4194304;function pu(u){switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return u&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return u}}function Vh(u,d){var y=u.pendingLanes;if(y===0)return 0;var M=0,E=u.suspendedLanes,b=u.pingedLanes,G=y&268435455;if(G!==0){var Q=G&~E;Q!==0?M=pu(Q):(b&=G,b!==0&&(M=pu(b)))}else G=y&~E,G!==0?M=pu(G):b!==0&&(M=pu(b));if(M===0)return 0;if(d!==0&&d!==M&&!(d&E)&&(E=M&-M,b=d&-d,E>=b||E===16&&(b&4194240)!==0))return d;if(M&4&&(M|=y&16),d=u.entangledLanes,d!==0)for(u=u.entanglements,d&=M;0<d;)y=31-hn(d),E=1<<y,M|=u[y],d&=~E;return M}function XP(u,d){switch(u){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function JP(u,d){for(var y=u.suspendedLanes,M=u.pingedLanes,E=u.expirationTimes,b=u.pendingLanes;0<b;){var G=31-hn(b),Q=1<<G,ve=E[G];ve===-1?(!(Q&y)||Q&M)&&(E[G]=XP(Q,d)):ve<=d&&(u.expiredLanes|=Q),b&=~Q}}function b0(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function T0(u){for(var d=[],y=0;31>y;y++)d.push(u);return d}function mu(u,d,y){u.pendingLanes|=d,d!==536870912&&(u.suspendedLanes=0,u.pingedLanes=0),u=u.eventTimes,d=31-hn(d),u[d]=y}function KP(u,d){var y=u.pendingLanes&~d;u.pendingLanes=d,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=d,u.mutableReadLanes&=d,u.entangledLanes&=d,d=u.entanglements;var M=u.eventTimes;for(u=u.expirationTimes;0<y;){var E=31-hn(y),b=1<<E;d[E]=0,M[E]=-1,u[E]=-1,y&=~b}}function R0(u,d){var y=u.entangledLanes|=d;for(u=u.entanglements;y;){var M=31-hn(y),E=1<<M;E&d|u[M]&d&&(u[M]|=d),y&=~E}}var Jt=0;function NS(u){return u&=-u,1<u?4<u?u&268435455?16:536870912:4:1}var I0=r.unstable_scheduleCallback,FS=r.unstable_cancelCallback,YP=r.unstable_shouldYield,QP=r.unstable_requestPaint,qn=r.unstable_now,P0=r.unstable_ImmediatePriority,qP=r.unstable_UserBlockingPriority,B0=r.unstable_NormalPriority,ZP=r.unstable_IdlePriority,Wh=null,rs=null;function $P(u){if(rs&&typeof rs.onCommitFiberRoot=="function")try{rs.onCommitFiberRoot(Wh,u,void 0,(u.current.flags&128)===128)}catch{}}function eB(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var ss=typeof Object.is=="function"?Object.is:eB,Es=null,jh=!1,L0=!1;function US(u){Es===null?Es=[u]:Es.push(u)}function tB(u){jh=!0,US(u)}function os(){if(!L0&&Es!==null){L0=!0;var u=0,d=Jt;try{var y=Es;for(Jt=1;u<y.length;u++){var M=y[u];do M=M(!0);while(M!==null)}Es=null,jh=!1}catch(E){throw Es!==null&&(Es=Es.slice(u+1)),I0(P0,os),E}finally{Jt=d,L0=!1}}return null}var nB=a.ReactCurrentBatchConfig;function Xh(u,d){if(ss(u,d))return!0;if(typeof u!="object"||u===null||typeof d!="object"||d===null)return!1;var y=Object.keys(u),M=Object.keys(d);if(y.length!==M.length)return!1;for(M=0;M<y.length;M++){var E=y[M];if(!_t.call(d,E)||!ss(u[E],d[E]))return!1}return!0}function iB(u){switch(u.tag){case 5:return nt(u.type);case 16:return nt("Lazy");case 13:return nt("Suspense");case 19:return nt("SuspenseList");case 0:case 2:case 15:return u=vt(u.type,!1),u;case 11:return u=vt(u.type.render,!1),u;case 1:return u=vt(u.type,!0),u;default:return""}}function Ur(u,d){if(u&&u.defaultProps){d=s({},d),u=u.defaultProps;for(var y in u)d[y]===void 0&&(d[y]=u[y]);return d}return d}var Jh=Ht(null),Kh=null,Ll=null,D0=null;function N0(){D0=Ll=Kh=null}function OS(u,d,y){qe?(Et(Jh,d._currentValue),d._currentValue=y):(Et(Jh,d._currentValue2),d._currentValue2=y)}function F0(u){var d=Jh.current;ft(Jh),qe?u._currentValue=d:u._currentValue2=d}function U0(u,d,y){for(;u!==null;){var M=u.alternate;if((u.childLanes&d)!==d?(u.childLanes|=d,M!==null&&(M.childLanes|=d)):M!==null&&(M.childLanes&d)!==d&&(M.childLanes|=d),u===y)break;u=u.return}}function Dl(u,d){Kh=u,D0=Ll=null,u=u.dependencies,u!==null&&u.firstContext!==null&&(u.lanes&d&&(ir=!0),u.firstContext=null)}function vr(u){var d=qe?u._currentValue:u._currentValue2;if(D0!==u)if(u={context:u,memoizedValue:d,next:null},Ll===null){if(Kh===null)throw Error(o(308));Ll=u,Kh.dependencies={lanes:0,firstContext:u}}else Ll=Ll.next=u;return d}var as=null,mo=!1;function O0(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kS(u,d){u=u.updateQueue,d.updateQueue===u&&(d.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function Cs(u,d){return{eventTime:u,lane:d,tag:0,payload:null,callback:null,next:null}}function go(u,d){var y=u.updateQueue;y!==null&&(y=y.shared,Ln!==null&&u.mode&1&&!(Lt&2)?(u=y.interleaved,u===null?(d.next=d,as===null?as=[y]:as.push(y)):(d.next=u.next,u.next=d),y.interleaved=d):(u=y.pending,u===null?d.next=d:(d.next=u.next,u.next=d),y.pending=d))}function Yh(u,d,y){if(d=d.updateQueue,d!==null&&(d=d.shared,(y&4194240)!==0)){var M=d.lanes;M&=u.pendingLanes,y|=M,d.lanes=y,R0(u,y)}}function zS(u,d){var y=u.updateQueue,M=u.alternate;if(M!==null&&(M=M.updateQueue,y===M)){var E=null,b=null;if(y=y.firstBaseUpdate,y!==null){do{var G={eventTime:y.eventTime,lane:y.lane,tag:y.tag,payload:y.payload,callback:y.callback,next:null};b===null?E=b=G:b=b.next=G,y=y.next}while(y!==null);b===null?E=b=d:b=b.next=d}else E=b=d;y={baseState:M.baseState,firstBaseUpdate:E,lastBaseUpdate:b,shared:M.shared,effects:M.effects},u.updateQueue=y;return}u=y.lastBaseUpdate,u===null?y.firstBaseUpdate=d:u.next=d,y.lastBaseUpdate=d}function Qh(u,d,y,M){var E=u.updateQueue;mo=!1;var b=E.firstBaseUpdate,G=E.lastBaseUpdate,Q=E.shared.pending;if(Q!==null){E.shared.pending=null;var ve=Q,Pe=ve.next;ve.next=null,G===null?b=Pe:G.next=Pe,G=ve;var et=u.alternate;et!==null&&(et=et.updateQueue,Q=et.lastBaseUpdate,Q!==G&&(Q===null?et.firstBaseUpdate=Pe:Q.next=Pe,et.lastBaseUpdate=ve))}if(b!==null){var At=E.baseState;G=0,et=Pe=ve=null,Q=b;do{var dt=Q.lane,nn=Q.eventTime;if((M&dt)===dt){et!==null&&(et=et.next={eventTime:nn,lane:0,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null});e:{var lt=u,gi=Q;switch(dt=d,nn=y,gi.tag){case 1:if(lt=gi.payload,typeof lt=="function"){At=lt.call(nn,At,dt);break e}At=lt;break e;case 3:lt.flags=lt.flags&-65537|128;case 0:if(lt=gi.payload,dt=typeof lt=="function"?lt.call(nn,At,dt):lt,dt==null)break e;At=s({},At,dt);break e;case 2:mo=!0}}Q.callback!==null&&Q.lane!==0&&(u.flags|=64,dt=E.effects,dt===null?E.effects=[Q]:dt.push(Q))}else nn={eventTime:nn,lane:dt,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null},et===null?(Pe=et=nn,ve=At):et=et.next=nn,G|=dt;if(Q=Q.next,Q===null){if(Q=E.shared.pending,Q===null)break;dt=Q,Q=dt.next,dt.next=null,E.lastBaseUpdate=dt,E.shared.pending=null}}while(!0);if(et===null&&(ve=At),E.baseState=ve,E.firstBaseUpdate=Pe,E.lastBaseUpdate=et,d=E.shared.interleaved,d!==null){E=d;do G|=E.lane,E=E.next;while(E!==d)}else b===null&&(E.shared.lanes=0);Vl|=G,u.lanes=G,u.memoizedState=At}}function HS(u,d,y){if(u=d.effects,d.effects=null,u!==null)for(d=0;d<u.length;d++){var M=u[d],E=M.callback;if(E!==null){if(M.callback=null,M=y,typeof E!="function")throw Error(o(191,E));E.call(M)}}}var GS=new i.Component().refs;function k0(u,d,y,M){d=u.memoizedState,y=y(M,d),y=y==null?d:s({},d,y),u.memoizedState=y,u.lanes===0&&(u.updateQueue.baseState=y)}var qh={isMounted:function(u){return(u=u._reactInternals)?R(u)===u:!1},enqueueSetState:function(u,d,y){u=u._reactInternals;var M=Pi(),E=xo(u),b=Cs(M,E);b.payload=d,y!=null&&(b.callback=y),go(u,b),d=Sr(u,E,M),d!==null&&Yh(d,u,E)},enqueueReplaceState:function(u,d,y){u=u._reactInternals;var M=Pi(),E=xo(u),b=Cs(M,E);b.tag=1,b.payload=d,y!=null&&(b.callback=y),go(u,b),d=Sr(u,E,M),d!==null&&Yh(d,u,E)},enqueueForceUpdate:function(u,d){u=u._reactInternals;var y=Pi(),M=xo(u),E=Cs(y,M);E.tag=2,d!=null&&(E.callback=d),go(u,E),d=Sr(u,M,y),d!==null&&Yh(d,u,M)}};function VS(u,d,y,M,E,b,G){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(M,b,G):d.prototype&&d.prototype.isPureReactComponent?!Xh(y,M)||!Xh(E,b):!0}function WS(u,d,y){var M=!1,E=Bt,b=d.contextType;return typeof b=="object"&&b!==null?b=vr(b):(E=Tn(d)?Nt:Ve.current,M=d.contextTypes,b=(M=M!=null)?Yn(u,E):Bt),d=new d(y,b),u.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=qh,u.stateNode=d,d._reactInternals=u,M&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=E,u.__reactInternalMemoizedMaskedChildContext=b),d}function jS(u,d,y,M){u=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(y,M),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(y,M),d.state!==u&&qh.enqueueReplaceState(d,d.state,null)}function z0(u,d,y,M){var E=u.stateNode;E.props=y,E.state=u.memoizedState,E.refs=GS,O0(u);var b=d.contextType;typeof b=="object"&&b!==null?E.context=vr(b):(b=Tn(d)?Nt:Ve.current,E.context=Yn(u,b)),E.state=u.memoizedState,b=d.getDerivedStateFromProps,typeof b=="function"&&(k0(u,d,b,y),E.state=u.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(d=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),d!==E.state&&qh.enqueueReplaceState(E,E.state,null),Qh(u,y,E,M),E.state=u.memoizedState),typeof E.componentDidMount=="function"&&(u.flags|=4194308)}var Nl=[],Fl=0,Zh=null,$h=0,yr=[],xr=0,fa=null,bs=1,Ts="";function pa(u,d){Nl[Fl++]=$h,Nl[Fl++]=Zh,Zh=u,$h=d}function XS(u,d,y){yr[xr++]=bs,yr[xr++]=Ts,yr[xr++]=fa,fa=u;var M=bs;u=Ts;var E=32-hn(M)-1;M&=~(1<<E),y+=1;var b=32-hn(d)+E;if(30<b){var G=E-E%5;b=(M&(1<<G)-1).toString(32),M>>=G,E-=G,bs=1<<32-hn(d)+E|y<<E|M,Ts=b+u}else bs=1<<b|y<<E|M,Ts=u}function H0(u){u.return!==null&&(pa(u,1),XS(u,1,0))}function G0(u){for(;u===Zh;)Zh=Nl[--Fl],Nl[Fl]=null,$h=Nl[--Fl],Nl[Fl]=null;for(;u===fa;)fa=yr[--xr],yr[xr]=null,Ts=yr[--xr],yr[xr]=null,bs=yr[--xr],yr[xr]=null}var tr=null,nr=null,fn=!1,gu=!1,Or=null;function JS(u,d){var y=Mr(5,null,null,0);y.elementType="DELETED",y.stateNode=d,y.return=u,d=u.deletions,d===null?(u.deletions=[y],u.flags|=16):d.push(y)}function KS(u,d){switch(u.tag){case 5:return d=hi(d,u.type,u.pendingProps),d!==null?(u.stateNode=d,tr=u,nr=Pl(d),!0):!1;case 6:return d=Lh(d,u.pendingProps),d!==null?(u.stateNode=d,tr=u,nr=null,!0):!1;case 13:if(d=Dh(d),d!==null){var y=fa!==null?{id:bs,overflow:Ts}:null;return u.memoizedState={dehydrated:d,treeContext:y,retryLane:1073741824},y=Mr(18,null,null,0),y.stateNode=d,y.return=u,u.child=y,tr=u,nr=null,!0}return!1;default:return!1}}function V0(u){return(u.mode&1)!==0&&(u.flags&128)===0}function W0(u){if(fn){var d=nr;if(d){var y=d;if(!KS(u,d)){if(V0(u))throw Error(o(418));d=ho(y);var M=tr;d&&KS(u,d)?JS(M,y):(u.flags=u.flags&-4097|2,fn=!1,tr=u)}}else{if(V0(u))throw Error(o(418));u.flags=u.flags&-4097|2,fn=!1,tr=u}}}function YS(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;tr=u}function vu(u){if(!xe||u!==tr)return!1;if(!fn)return YS(u),fn=!0,!1;if(u.tag!==3&&(u.tag!==5||ce(u.type)&&!ie(u.type,u.memoizedProps))){var d=nr;if(d){if(V0(u)){for(u=nr;u;)u=ho(u);throw Error(o(418))}for(;d;)JS(u,d),d=ho(d)}}if(YS(u),u.tag===13){if(!xe)throw Error(o(316));if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(o(317));nr=C0(u)}else nr=tr?ho(u.stateNode):null;return!0}function Ul(){xe&&(nr=tr=null,gu=fn=!1)}function j0(u){Or===null?Or=[u]:Or.push(u)}function yu(u,d,y){if(u=y.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(y._owner){if(y=y._owner,y){if(y.tag!==1)throw Error(o(309));var M=y.stateNode}if(!M)throw Error(o(147,u));var E=M,b=""+u;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===b?d.ref:(d=function(G){var Q=E.refs;Q===GS&&(Q=E.refs={}),G===null?delete Q[b]:Q[b]=G},d._stringRef=b,d)}if(typeof u!="string")throw Error(o(284));if(!y._owner)throw Error(o(290,u))}return u}function ef(u,d){throw u=Object.prototype.toString.call(d),Error(o(31,u==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":u))}function QS(u){var d=u._init;return d(u._payload)}function qS(u){function d(oe,$){if(u){var pe=oe.deletions;pe===null?(oe.deletions=[$],oe.flags|=16):pe.push($)}}function y(oe,$){if(!u)return null;for(;$!==null;)d(oe,$),$=$.sibling;return null}function M(oe,$){for(oe=new Map;$!==null;)$.key!==null?oe.set($.key,$):oe.set($.index,$),$=$.sibling;return oe}function E(oe,$){return oe=Ao(oe,$),oe.index=0,oe.sibling=null,oe}function b(oe,$,pe){return oe.index=pe,u?(pe=oe.alternate,pe!==null?(pe=pe.index,pe<$?(oe.flags|=2,$):pe):(oe.flags|=2,$)):(oe.flags|=1048576,$)}function G(oe){return u&&oe.alternate===null&&(oe.flags|=2),oe}function Q(oe,$,pe,Xe){return $===null||$.tag!==6?($=Tv(pe,oe.mode,Xe),$.return=oe,$):($=E($,pe),$.return=oe,$)}function ve(oe,$,pe,Xe){var at=pe.type;return at===h?et(oe,$,pe.props.children,Xe,pe.key):$!==null&&($.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===_&&QS(at)===$.type)?(Xe=E($,pe.props),Xe.ref=yu(oe,$,pe),Xe.return=oe,Xe):(Xe=Bf(pe.type,pe.key,pe.props,null,oe.mode,Xe),Xe.ref=yu(oe,$,pe),Xe.return=oe,Xe)}function Pe(oe,$,pe,Xe){return $===null||$.tag!==4||$.stateNode.containerInfo!==pe.containerInfo||$.stateNode.implementation!==pe.implementation?($=Rv(pe,oe.mode,Xe),$.return=oe,$):($=E($,pe.children||[]),$.return=oe,$)}function et(oe,$,pe,Xe,at){return $===null||$.tag!==7?($=Aa(pe,oe.mode,Xe,at),$.return=oe,$):($=E($,pe),$.return=oe,$)}function At(oe,$,pe){if(typeof $=="string"&&$!==""||typeof $=="number")return $=Tv(""+$,oe.mode,pe),$.return=oe,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case l:return pe=Bf($.type,$.key,$.props,null,oe.mode,pe),pe.ref=yu(oe,null,$),pe.return=oe,pe;case c:return $=Rv($,oe.mode,pe),$.return=oe,$;case _:var Xe=$._init;return At(oe,Xe($._payload),pe)}if(de($)||T($))return $=Aa($,oe.mode,pe,null),$.return=oe,$;ef(oe,$)}return null}function dt(oe,$,pe,Xe){var at=$!==null?$.key:null;if(typeof pe=="string"&&pe!==""||typeof pe=="number")return at!==null?null:Q(oe,$,""+pe,Xe);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case l:return pe.key===at?ve(oe,$,pe,Xe):null;case c:return pe.key===at?Pe(oe,$,pe,Xe):null;case _:return at=pe._init,dt(oe,$,at(pe._payload),Xe)}if(de(pe)||T(pe))return at!==null?null:et(oe,$,pe,Xe,null);ef(oe,pe)}return null}function nn(oe,$,pe,Xe,at){if(typeof Xe=="string"&&Xe!==""||typeof Xe=="number")return oe=oe.get(pe)||null,Q($,oe,""+Xe,at);if(typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case l:return oe=oe.get(Xe.key===null?pe:Xe.key)||null,ve($,oe,Xe,at);case c:return oe=oe.get(Xe.key===null?pe:Xe.key)||null,Pe($,oe,Xe,at);case _:var Rt=Xe._init;return nn(oe,$,pe,Rt(Xe._payload),at)}if(de(Xe)||T(Xe))return oe=oe.get(pe)||null,et($,oe,Xe,at,null);ef($,Xe)}return null}function lt(oe,$,pe,Xe){for(var at=null,Rt=null,St=$,Kt=$=0,$n=null;St!==null&&Kt<pe.length;Kt++){St.index>Kt?($n=St,St=null):$n=St.sibling;var Yt=dt(oe,St,pe[Kt],Xe);if(Yt===null){St===null&&(St=$n);break}u&&St&&Yt.alternate===null&&d(oe,St),$=b(Yt,$,Kt),Rt===null?at=Yt:Rt.sibling=Yt,Rt=Yt,St=$n}if(Kt===pe.length)return y(oe,St),fn&&pa(oe,Kt),at;if(St===null){for(;Kt<pe.length;Kt++)St=At(oe,pe[Kt],Xe),St!==null&&($=b(St,$,Kt),Rt===null?at=St:Rt.sibling=St,Rt=St);return fn&&pa(oe,Kt),at}for(St=M(oe,St);Kt<pe.length;Kt++)$n=nn(St,oe,Kt,pe[Kt],Xe),$n!==null&&(u&&$n.alternate!==null&&St.delete($n.key===null?Kt:$n.key),$=b($n,$,Kt),Rt===null?at=$n:Rt.sibling=$n,Rt=$n);return u&&St.forEach(function(So){return d(oe,So)}),fn&&pa(oe,Kt),at}function gi(oe,$,pe,Xe){var at=T(pe);if(typeof at!="function")throw Error(o(150));if(pe=at.call(pe),pe==null)throw Error(o(151));for(var Rt=at=null,St=$,Kt=$=0,$n=null,Yt=pe.next();St!==null&&!Yt.done;Kt++,Yt=pe.next()){St.index>Kt?($n=St,St=null):$n=St.sibling;var So=dt(oe,St,Yt.value,Xe);if(So===null){St===null&&(St=$n);break}u&&St&&So.alternate===null&&d(oe,St),$=b(So,$,Kt),Rt===null?at=So:Rt.sibling=So,Rt=So,St=$n}if(Yt.done)return y(oe,St),fn&&pa(oe,Kt),at;if(St===null){for(;!Yt.done;Kt++,Yt=pe.next())Yt=At(oe,Yt.value,Xe),Yt!==null&&($=b(Yt,$,Kt),Rt===null?at=Yt:Rt.sibling=Yt,Rt=Yt);return fn&&pa(oe,Kt),at}for(St=M(oe,St);!Yt.done;Kt++,Yt=pe.next())Yt=nn(St,oe,Kt,Yt.value,Xe),Yt!==null&&(u&&Yt.alternate!==null&&St.delete(Yt.key===null?Kt:Yt.key),$=b(Yt,$,Kt),Rt===null?at=Yt:Rt.sibling=Yt,Rt=Yt);return u&&St.forEach(function(LB){return d(oe,LB)}),fn&&pa(oe,Kt),at}function wr(oe,$,pe,Xe){if(typeof pe=="object"&&pe!==null&&pe.type===h&&pe.key===null&&(pe=pe.props.children),typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case l:e:{for(var at=pe.key,Rt=$;Rt!==null;){if(Rt.key===at){if(at=pe.type,at===h){if(Rt.tag===7){y(oe,Rt.sibling),$=E(Rt,pe.props.children),$.return=oe,oe=$;break e}}else if(Rt.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===_&&QS(at)===Rt.type){y(oe,Rt.sibling),$=E(Rt,pe.props),$.ref=yu(oe,Rt,pe),$.return=oe,oe=$;break e}y(oe,Rt);break}else d(oe,Rt);Rt=Rt.sibling}pe.type===h?($=Aa(pe.props.children,oe.mode,Xe,pe.key),$.return=oe,oe=$):(Xe=Bf(pe.type,pe.key,pe.props,null,oe.mode,Xe),Xe.ref=yu(oe,$,pe),Xe.return=oe,oe=Xe)}return G(oe);case c:e:{for(Rt=pe.key;$!==null;){if($.key===Rt)if($.tag===4&&$.stateNode.containerInfo===pe.containerInfo&&$.stateNode.implementation===pe.implementation){y(oe,$.sibling),$=E($,pe.children||[]),$.return=oe,oe=$;break e}else{y(oe,$);break}else d(oe,$);$=$.sibling}$=Rv(pe,oe.mode,Xe),$.return=oe,oe=$}return G(oe);case _:return Rt=pe._init,wr(oe,$,Rt(pe._payload),Xe)}if(de(pe))return lt(oe,$,pe,Xe);if(T(pe))return gi(oe,$,pe,Xe);ef(oe,pe)}return typeof pe=="string"&&pe!==""||typeof pe=="number"?(pe=""+pe,$!==null&&$.tag===6?(y(oe,$.sibling),$=E($,pe),$.return=oe,oe=$):(y(oe,$),$=Tv(pe,oe.mode,Xe),$.return=oe,oe=$),G(oe)):y(oe,$)}return wr}var Ol=qS(!0),ZS=qS(!1),xu={},_r=Ht(xu),_u=Ht(xu),kl=Ht(xu);function ls(u){if(u===xu)throw Error(o(174));return u}function X0(u,d){Et(kl,d),Et(_u,u),Et(_r,xu),u=ge(d),ft(_r),Et(_r,u)}function zl(){ft(_r),ft(_u),ft(kl)}function $S(u){var d=ls(kl.current),y=ls(_r.current);d=F(y,u.type,d),y!==d&&(Et(_u,u),Et(_r,d))}function J0(u){_u.current===u&&(ft(_r),ft(_u))}var gn=Ht(0);function tf(u){for(var d=u;d!==null;){if(d.tag===13){var y=d.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||ts(y)||ha(y)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if(d.flags&128)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===u)break;for(;d.sibling===null;){if(d.return===null||d.return===u)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var K0=[];function Y0(){for(var u=0;u<K0.length;u++){var d=K0[u];qe?d._workInProgressVersionPrimary=null:d._workInProgressVersionSecondary=null}K0.length=0}var nf=a.ReactCurrentDispatcher,Ar=a.ReactCurrentBatchConfig,Hl=0,Sn=null,fi=null,Zn=null,rf=!1,Au=!1,Su=0,rB=0;function pi(){throw Error(o(321))}function Q0(u,d){if(d===null)return!1;for(var y=0;y<d.length&&y<u.length;y++)if(!ss(u[y],d[y]))return!1;return!0}function q0(u,d,y,M,E,b){if(Hl=b,Sn=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,nf.current=u===null||u.memoizedState===null?lB:cB,u=y(M,E),Au){b=0;do{if(Au=!1,Su=0,25<=b)throw Error(o(301));b+=1,Zn=fi=null,d.updateQueue=null,nf.current=uB,u=y(M,E)}while(Au)}if(nf.current=cf,d=fi!==null&&fi.next!==null,Hl=0,Zn=fi=Sn=null,rf=!1,d)throw Error(o(300));return u}function Z0(){var u=Su!==0;return Su=0,u}function Rs(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zn===null?Sn.memoizedState=Zn=u:Zn=Zn.next=u,Zn}function cs(){if(fi===null){var u=Sn.alternate;u=u!==null?u.memoizedState:null}else u=fi.next;var d=Zn===null?Sn.memoizedState:Zn.next;if(d!==null)Zn=d,fi=u;else{if(u===null)throw Error(o(310));fi=u,u={memoizedState:fi.memoizedState,baseState:fi.baseState,baseQueue:fi.baseQueue,queue:fi.queue,next:null},Zn===null?Sn.memoizedState=Zn=u:Zn=Zn.next=u}return Zn}function ma(u,d){return typeof d=="function"?d(u):d}function sf(u){var d=cs(),y=d.queue;if(y===null)throw Error(o(311));y.lastRenderedReducer=u;var M=fi,E=M.baseQueue,b=y.pending;if(b!==null){if(E!==null){var G=E.next;E.next=b.next,b.next=G}M.baseQueue=E=b,y.pending=null}if(E!==null){b=E.next,M=M.baseState;var Q=G=null,ve=null,Pe=b;do{var et=Pe.lane;if((Hl&et)===et)ve!==null&&(ve=ve.next={lane:0,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null}),M=Pe.hasEagerState?Pe.eagerState:u(M,Pe.action);else{var At={lane:et,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null};ve===null?(Q=ve=At,G=M):ve=ve.next=At,Sn.lanes|=et,Vl|=et}Pe=Pe.next}while(Pe!==null&&Pe!==b);ve===null?G=M:ve.next=Q,ss(M,d.memoizedState)||(ir=!0),d.memoizedState=M,d.baseState=G,d.baseQueue=ve,y.lastRenderedState=M}if(u=y.interleaved,u!==null){E=u;do b=E.lane,Sn.lanes|=b,Vl|=b,E=E.next;while(E!==u)}else E===null&&(y.lanes=0);return[d.memoizedState,y.dispatch]}function of(u){var d=cs(),y=d.queue;if(y===null)throw Error(o(311));y.lastRenderedReducer=u;var M=y.dispatch,E=y.pending,b=d.memoizedState;if(E!==null){y.pending=null;var G=E=E.next;do b=u(b,G.action),G=G.next;while(G!==E);ss(b,d.memoizedState)||(ir=!0),d.memoizedState=b,d.baseQueue===null&&(d.baseState=b),y.lastRenderedState=b}return[b,M]}function e1(){}function t1(u,d){var y=Sn,M=cs(),E=d(),b=!ss(M.memoizedState,E);if(b&&(M.memoizedState=E,ir=!0),M=M.queue,wu(r1.bind(null,y,M,u),[u]),M.getSnapshot!==d||b||Zn!==null&&Zn.memoizedState.tag&1){if(y.flags|=2048,Mu(9,i1.bind(null,y,M,E,d),void 0,null),Ln===null)throw Error(o(349));Hl&30||n1(y,d,E)}return E}function n1(u,d,y){u.flags|=16384,u={getSnapshot:d,value:y},d=Sn.updateQueue,d===null?(d={lastEffect:null,stores:null},Sn.updateQueue=d,d.stores=[u]):(y=d.stores,y===null?d.stores=[u]:y.push(u))}function i1(u,d,y,M){d.value=y,d.getSnapshot=M,s1(d)&&Sr(u,1,-1)}function r1(u,d,y){return y(function(){s1(d)&&Sr(u,1,-1)})}function s1(u){var d=u.getSnapshot;u=u.value;try{var y=d();return!ss(u,y)}catch{return!0}}function $0(u){var d=Rs();return typeof u=="function"&&(u=u()),d.memoizedState=d.baseState=u,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ma,lastRenderedState:u},d.queue=u,u=u.dispatch=aB.bind(null,Sn,u),[d.memoizedState,u]}function Mu(u,d,y,M){return u={tag:u,create:d,destroy:y,deps:M,next:null},d=Sn.updateQueue,d===null?(d={lastEffect:null,stores:null},Sn.updateQueue=d,d.lastEffect=u.next=u):(y=d.lastEffect,y===null?d.lastEffect=u.next=u:(M=y.next,y.next=u,u.next=M,d.lastEffect=u)),u}function o1(){return cs().memoizedState}function af(u,d,y,M){var E=Rs();Sn.flags|=u,E.memoizedState=Mu(1|d,y,void 0,M===void 0?null:M)}function lf(u,d,y,M){var E=cs();M=M===void 0?null:M;var b=void 0;if(fi!==null){var G=fi.memoizedState;if(b=G.destroy,M!==null&&Q0(M,G.deps)){E.memoizedState=Mu(d,y,b,M);return}}Sn.flags|=u,E.memoizedState=Mu(1|d,y,b,M)}function ev(u,d){return af(8390656,8,u,d)}function wu(u,d){return lf(2048,8,u,d)}function a1(u,d){return lf(4,2,u,d)}function l1(u,d){return lf(4,4,u,d)}function c1(u,d){if(typeof d=="function")return u=u(),d(u),function(){d(null)};if(d!=null)return u=u(),d.current=u,function(){d.current=null}}function u1(u,d,y){return y=y!=null?y.concat([u]):null,lf(4,4,c1.bind(null,d,u),y)}function tv(){}function d1(u,d){var y=cs();d=d===void 0?null:d;var M=y.memoizedState;return M!==null&&d!==null&&Q0(d,M[1])?M[0]:(y.memoizedState=[u,d],u)}function h1(u,d){var y=cs();d=d===void 0?null:d;var M=y.memoizedState;return M!==null&&d!==null&&Q0(d,M[1])?M[0]:(u=u(),y.memoizedState=[u,d],u)}function sB(u,d){var y=Jt;Jt=y!==0&&4>y?y:4,u(!0);var M=Ar.transition;Ar.transition={};try{u(!1),d()}finally{Jt=y,Ar.transition=M}}function f1(){return cs().memoizedState}function oB(u,d,y){var M=xo(u);y={lane:M,action:y,hasEagerState:!1,eagerState:null,next:null},p1(u)?m1(d,y):(g1(u,d,y),y=Pi(),u=Sr(u,M,y),u!==null&&v1(u,d,M))}function aB(u,d,y){var M=xo(u),E={lane:M,action:y,hasEagerState:!1,eagerState:null,next:null};if(p1(u))m1(d,E);else{g1(u,d,E);var b=u.alternate;if(u.lanes===0&&(b===null||b.lanes===0)&&(b=d.lastRenderedReducer,b!==null))try{var G=d.lastRenderedState,Q=b(G,y);if(E.hasEagerState=!0,E.eagerState=Q,ss(Q,G))return}catch{}finally{}y=Pi(),u=Sr(u,M,y),u!==null&&v1(u,d,M)}}function p1(u){var d=u.alternate;return u===Sn||d!==null&&d===Sn}function m1(u,d){Au=rf=!0;var y=u.pending;y===null?d.next=d:(d.next=y.next,y.next=d),u.pending=d}function g1(u,d,y){Ln!==null&&u.mode&1&&!(Lt&2)?(u=d.interleaved,u===null?(y.next=y,as===null?as=[d]:as.push(d)):(y.next=u.next,u.next=y),d.interleaved=y):(u=d.pending,u===null?y.next=y:(y.next=u.next,u.next=y),d.pending=y)}function v1(u,d,y){if(y&4194240){var M=d.lanes;M&=u.pendingLanes,y|=M,d.lanes=y,R0(u,y)}}var cf={readContext:vr,useCallback:pi,useContext:pi,useEffect:pi,useImperativeHandle:pi,useInsertionEffect:pi,useLayoutEffect:pi,useMemo:pi,useReducer:pi,useRef:pi,useState:pi,useDebugValue:pi,useDeferredValue:pi,useTransition:pi,useMutableSource:pi,useSyncExternalStore:pi,useId:pi,unstable_isNewReconciler:!1},lB={readContext:vr,useCallback:function(u,d){return Rs().memoizedState=[u,d===void 0?null:d],u},useContext:vr,useEffect:ev,useImperativeHandle:function(u,d,y){return y=y!=null?y.concat([u]):null,af(4194308,4,c1.bind(null,d,u),y)},useLayoutEffect:function(u,d){return af(4194308,4,u,d)},useInsertionEffect:function(u,d){return af(4,2,u,d)},useMemo:function(u,d){var y=Rs();return d=d===void 0?null:d,u=u(),y.memoizedState=[u,d],u},useReducer:function(u,d,y){var M=Rs();return d=y!==void 0?y(d):d,M.memoizedState=M.baseState=d,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:d},M.queue=u,u=u.dispatch=oB.bind(null,Sn,u),[M.memoizedState,u]},useRef:function(u){var d=Rs();return u={current:u},d.memoizedState=u},useState:$0,useDebugValue:tv,useDeferredValue:function(u){var d=$0(u),y=d[0],M=d[1];return ev(function(){var E=Ar.transition;Ar.transition={};try{M(u)}finally{Ar.transition=E}},[u]),y},useTransition:function(){var u=$0(!1),d=u[0];return u=sB.bind(null,u[1]),Rs().memoizedState=u,[d,u]},useMutableSource:function(){},useSyncExternalStore:function(u,d,y){var M=Sn,E=Rs();if(fn){if(y===void 0)throw Error(o(407));y=y()}else{if(y=d(),Ln===null)throw Error(o(349));Hl&30||n1(M,d,y)}E.memoizedState=y;var b={value:y,getSnapshot:d};return E.queue=b,ev(r1.bind(null,M,b,u),[u]),M.flags|=2048,Mu(9,i1.bind(null,M,b,y,d),void 0,null),y},useId:function(){var u=Rs(),d=Ln.identifierPrefix;if(fn){var y=Ts,M=bs;y=(M&~(1<<32-hn(M)-1)).toString(32)+y,d=":"+d+"R"+y,y=Su++,0<y&&(d+="H"+y.toString(32)),d+=":"}else y=rB++,d=":"+d+"r"+y.toString(32)+":";return u.memoizedState=d},unstable_isNewReconciler:!1},cB={readContext:vr,useCallback:d1,useContext:vr,useEffect:wu,useImperativeHandle:u1,useInsertionEffect:a1,useLayoutEffect:l1,useMemo:h1,useReducer:sf,useRef:o1,useState:function(){return sf(ma)},useDebugValue:tv,useDeferredValue:function(u){var d=sf(ma),y=d[0],M=d[1];return wu(function(){var E=Ar.transition;Ar.transition={};try{M(u)}finally{Ar.transition=E}},[u]),y},useTransition:function(){var u=sf(ma)[0],d=cs().memoizedState;return[u,d]},useMutableSource:e1,useSyncExternalStore:t1,useId:f1,unstable_isNewReconciler:!1},uB={readContext:vr,useCallback:d1,useContext:vr,useEffect:wu,useImperativeHandle:u1,useInsertionEffect:a1,useLayoutEffect:l1,useMemo:h1,useReducer:of,useRef:o1,useState:function(){return of(ma)},useDebugValue:tv,useDeferredValue:function(u){var d=of(ma),y=d[0],M=d[1];return wu(function(){var E=Ar.transition;Ar.transition={};try{M(u)}finally{Ar.transition=E}},[u]),y},useTransition:function(){var u=of(ma)[0],d=cs().memoizedState;return[u,d]},useMutableSource:e1,useSyncExternalStore:t1,useId:f1,unstable_isNewReconciler:!1};function nv(u,d){try{var y="",M=d;do y+=iB(M),M=M.return;while(M);var E=y}catch(b){E=`
Error generating stack: `+b.message+`
`+b.stack}return{value:u,source:d,stack:E}}function iv(u,d){try{console.error(d.value)}catch(y){setTimeout(function(){throw y})}}var dB=typeof WeakMap=="function"?WeakMap:Map;function y1(u,d,y){y=Cs(-1,y),y.tag=3,y.payload={element:null};var M=d.value;return y.callback=function(){Ef||(Ef=!0,Av=M),iv(u,d)},y}function x1(u,d,y){y=Cs(-1,y),y.tag=3;var M=u.type.getDerivedStateFromError;if(typeof M=="function"){var E=d.value;y.payload=function(){return M(E)},y.callback=function(){iv(u,d)}}var b=u.stateNode;return b!==null&&typeof b.componentDidCatch=="function"&&(y.callback=function(){iv(u,d),typeof M!="function"&&(vo===null?vo=new Set([this]):vo.add(this));var G=d.stack;this.componentDidCatch(d.value,{componentStack:G!==null?G:""})}),y}function _1(u,d,y){var M=u.pingCache;if(M===null){M=u.pingCache=new dB;var E=new Set;M.set(d,E)}else E=M.get(d),E===void 0&&(E=new Set,M.set(d,E));E.has(y)||(E.add(y),u=EB.bind(null,u,d,y),d.then(u,u))}function A1(u){do{var d;if((d=u.tag===13)&&(d=u.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return u;u=u.return}while(u!==null);return null}function S1(u,d,y,M,E){return u.mode&1?(u.flags|=65536,u.lanes=E,u):(u===d?u.flags|=65536:(u.flags|=128,y.flags|=131072,y.flags&=-52805,y.tag===1&&(y.alternate===null?y.tag=17:(d=Cs(-1,1),d.tag=2,go(y,d))),y.lanes|=1),u)}function us(u){u.flags|=4}function M1(u,d){if(u!==null&&u.child===d.child)return!0;if(d.flags&16)return!1;for(u=d.child;u!==null;){if(u.flags&12854||u.subtreeFlags&12854)return!1;u=u.sibling}return!0}var Eu,Cu,uf,df;if(ke)Eu=function(u,d){for(var y=d.child;y!==null;){if(y.tag===5||y.tag===6)se(u,y.stateNode);else if(y.tag!==4&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===d)break;for(;y.sibling===null;){if(y.return===null||y.return===d)return;y=y.return}y.sibling.return=y.return,y=y.sibling}},Cu=function(){},uf=function(u,d,y,M,E){if(u=u.memoizedProps,u!==M){var b=d.stateNode,G=ls(_r.current);y=q(b,y,u,M,E,G),(d.updateQueue=y)&&us(d)}},df=function(u,d,y,M){y!==M&&us(d)};else if(me){Eu=function(u,d,y,M){for(var E=d.child;E!==null;){if(E.tag===5){var b=E.stateNode;y&&M&&(b=Dt(b,E.type,E.memoizedProps,E)),se(u,b)}else if(E.tag===6)b=E.stateNode,y&&M&&(b=Bn(b,E.memoizedProps,E)),se(u,b);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)b=E.child,b!==null&&(b.return=E),Eu(u,E,!0,!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===d)break;for(;E.sibling===null;){if(E.return===null||E.return===d)return;E=E.return}E.sibling.return=E.return,E=E.sibling}};var w1=function(u,d,y,M){for(var E=d.child;E!==null;){if(E.tag===5){var b=E.stateNode;y&&M&&(b=Dt(b,E.type,E.memoizedProps,E)),ct(u,b)}else if(E.tag===6)b=E.stateNode,y&&M&&(b=Bn(b,E.memoizedProps,E)),ct(u,b);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)b=E.child,b!==null&&(b.return=E),w1(u,E,!0,!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===d)break;for(;E.sibling===null;){if(E.return===null||E.return===d)return;E=E.return}E.sibling.return=E.return,E=E.sibling}};Cu=function(u,d){var y=d.stateNode;if(!M1(u,d)){u=y.containerInfo;var M=Oe(u);w1(M,d,!1,!1),y.pendingChildren=M,us(d),Wt(u,M)}},uf=function(u,d,y,M,E){var b=u.stateNode,G=u.memoizedProps;if((u=M1(u,d))&&G===M)d.stateNode=b;else{var Q=d.stateNode,ve=ls(_r.current),Pe=null;G!==M&&(Pe=q(Q,y,G,M,E,ve)),u&&Pe===null?d.stateNode=b:(b=je(b,Pe,y,G,M,d,u,Q),Ce(b,y,M,E,ve)&&us(d),d.stateNode=b,u?us(d):Eu(b,d,!1,!1))}},df=function(u,d,y,M){y!==M?(u=ls(kl.current),y=ls(_r.current),d.stateNode=he(M,u,y,d),us(d)):d.stateNode=u.stateNode}}else Cu=function(){},uf=function(){},df=function(){};function bu(u,d){if(!fn)switch(u.tailMode){case"hidden":d=u.tail;for(var y=null;d!==null;)d.alternate!==null&&(y=d),d=d.sibling;y===null?u.tail=null:y.sibling=null;break;case"collapsed":y=u.tail;for(var M=null;y!==null;)y.alternate!==null&&(M=y),y=y.sibling;M===null?d||u.tail===null?u.tail=null:u.tail.sibling=null:M.sibling=null}}function mi(u){var d=u.alternate!==null&&u.alternate.child===u.child,y=0,M=0;if(d)for(var E=u.child;E!==null;)y|=E.lanes|E.childLanes,M|=E.subtreeFlags&14680064,M|=E.flags&14680064,E.return=u,E=E.sibling;else for(E=u.child;E!==null;)y|=E.lanes|E.childLanes,M|=E.subtreeFlags,M|=E.flags,E.return=u,E=E.sibling;return u.subtreeFlags|=M,u.childLanes=y,d}function hB(u,d,y){var M=d.pendingProps;switch(G0(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mi(d),null;case 1:return Tn(d.type)&&Qn(),mi(d),null;case 3:return M=d.stateNode,zl(),ft(dn),ft(Ve),Y0(),M.pendingContext&&(M.context=M.pendingContext,M.pendingContext=null),(u===null||u.child===null)&&(vu(d)?us(d):u===null||u.memoizedState.isDehydrated&&!(d.flags&256)||(d.flags|=1024,Or!==null&&(wv(Or),Or=null))),Cu(u,d),mi(d),null;case 5:J0(d),y=ls(kl.current);var E=d.type;if(u!==null&&d.stateNode!=null)uf(u,d,E,M,y),u.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!M){if(d.stateNode===null)throw Error(o(166));return mi(d),null}if(u=ls(_r.current),vu(d)){if(!xe)throw Error(o(175));u=Uh(d.stateNode,d.type,d.memoizedProps,y,u,d,!gu),d.updateQueue=u,u!==null&&us(d)}else{var b=Y(E,M,y,u,d);Eu(b,d,!1,!1),d.stateNode=b,Ce(b,E,M,y,u)&&us(d)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return mi(d),null;case 6:if(u&&d.stateNode!=null)df(u,d,u.memoizedProps,M);else{if(typeof M!="string"&&d.stateNode===null)throw Error(o(166));if(u=ls(kl.current),y=ls(_r.current),vu(d)){if(!xe)throw Error(o(176));if(u=d.stateNode,M=d.memoizedProps,(y=Oh(u,M,d,!gu))&&(E=tr,E!==null))switch(b=(E.mode&1)!==0,E.tag){case 3:ee(E.stateNode.containerInfo,u,M,b);break;case 5:Be(E.type,E.memoizedProps,E.stateNode,u,M,b)}y&&us(d)}else d.stateNode=he(M,u,y,d)}return mi(d),null;case 13:if(ft(gn),M=d.memoizedState,fn&&nr!==null&&d.mode&1&&!(d.flags&128)){for(u=nr;u;)u=ho(u);return Ul(),d.flags|=98560,d}if(M!==null&&M.dehydrated!==null){if(M=vu(d),u===null){if(!M)throw Error(o(318));if(!xe)throw Error(o(344));if(u=d.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(o(317));E0(u,d)}else Ul(),!(d.flags&128)&&(d.memoizedState=null),d.flags|=4;return mi(d),null}return Or!==null&&(wv(Or),Or=null),d.flags&128?(d.lanes=y,d):(M=M!==null,y=!1,u===null?vu(d):y=u.memoizedState!==null,M&&!y&&(d.child.flags|=8192,d.mode&1&&(u===null||gn.current&1?Wn===0&&(Wn=3):Cv())),d.updateQueue!==null&&(d.flags|=4),mi(d),null);case 4:return zl(),Cu(u,d),u===null&&Je(d.stateNode.containerInfo),mi(d),null;case 10:return F0(d.type._context),mi(d),null;case 17:return Tn(d.type)&&Qn(),mi(d),null;case 19:if(ft(gn),E=d.memoizedState,E===null)return mi(d),null;if(M=(d.flags&128)!==0,b=E.rendering,b===null)if(M)bu(E,!1);else{if(Wn!==0||u!==null&&u.flags&128)for(u=d.child;u!==null;){if(b=tf(u),b!==null){for(d.flags|=128,bu(E,!1),u=b.updateQueue,u!==null&&(d.updateQueue=u,d.flags|=4),d.subtreeFlags=0,u=y,M=d.child;M!==null;)y=M,E=u,y.flags&=14680066,b=y.alternate,b===null?(y.childLanes=0,y.lanes=E,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=b.childLanes,y.lanes=b.lanes,y.child=b.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=b.memoizedProps,y.memoizedState=b.memoizedState,y.updateQueue=b.updateQueue,y.type=b.type,E=b.dependencies,y.dependencies=E===null?null:{lanes:E.lanes,firstContext:E.firstContext}),M=M.sibling;return Et(gn,gn.current&1|2),d.child}u=u.sibling}E.tail!==null&&qn()>_v&&(d.flags|=128,M=!0,bu(E,!1),d.lanes=4194304)}else{if(!M)if(u=tf(b),u!==null){if(d.flags|=128,M=!0,u=u.updateQueue,u!==null&&(d.updateQueue=u,d.flags|=4),bu(E,!0),E.tail===null&&E.tailMode==="hidden"&&!b.alternate&&!fn)return mi(d),null}else 2*qn()-E.renderingStartTime>_v&&y!==1073741824&&(d.flags|=128,M=!0,bu(E,!1),d.lanes=4194304);E.isBackwards?(b.sibling=d.child,d.child=b):(u=E.last,u!==null?u.sibling=b:d.child=b,E.last=b)}return E.tail!==null?(d=E.tail,E.rendering=d,E.tail=d.sibling,E.renderingStartTime=qn(),d.sibling=null,u=gn.current,Et(gn,M?u&1|2:u&1),d):(mi(d),null);case 22:case 23:return Ev(),M=d.memoizedState!==null,u!==null&&u.memoizedState!==null!==M&&(d.flags|=8192),M&&d.mode&1?rr&1073741824&&(mi(d),ke&&d.subtreeFlags&6&&(d.flags|=8192)):mi(d),null;case 24:return null;case 25:return null}throw Error(o(156,d.tag))}var fB=a.ReactCurrentOwner,ir=!1;function Ii(u,d,y,M){d.child=u===null?ZS(d,null,y,M):Ol(d,u.child,y,M)}function E1(u,d,y,M,E){y=y.render;var b=d.ref;return Dl(d,E),M=q0(u,d,y,M,b,E),y=Z0(),u!==null&&!ir?(d.updateQueue=u.updateQueue,d.flags&=-2053,u.lanes&=~E,Is(u,d,E)):(fn&&y&&H0(d),d.flags|=1,Ii(u,d,M,E),d.child)}function C1(u,d,y,M,E){if(u===null){var b=y.type;return typeof b=="function"&&!bv(b)&&b.defaultProps===void 0&&y.compare===null&&y.defaultProps===void 0?(d.tag=15,d.type=b,b1(u,d,b,M,E)):(u=Bf(y.type,null,M,d,d.mode,E),u.ref=d.ref,u.return=d,d.child=u)}if(b=u.child,!(u.lanes&E)){var G=b.memoizedProps;if(y=y.compare,y=y!==null?y:Xh,y(G,M)&&u.ref===d.ref)return Is(u,d,E)}return d.flags|=1,u=Ao(b,M),u.ref=d.ref,u.return=d,d.child=u}function b1(u,d,y,M,E){if(u!==null&&Xh(u.memoizedProps,M)&&u.ref===d.ref)if(ir=!1,(u.lanes&E)!==0)u.flags&131072&&(ir=!0);else return d.lanes=u.lanes,Is(u,d,E);return rv(u,d,y,M,E)}function T1(u,d,y){var M=d.pendingProps,E=M.children,b=u!==null?u.memoizedState:null;if(M.mode==="hidden")if(!(d.mode&1))d.memoizedState={baseLanes:0,cachePool:null},Et(Gl,rr),rr|=y;else if(y&1073741824)d.memoizedState={baseLanes:0,cachePool:null},M=b!==null?b.baseLanes:y,Et(Gl,rr),rr|=M;else return u=b!==null?b.baseLanes|y:y,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:u,cachePool:null},d.updateQueue=null,Et(Gl,rr),rr|=u,null;else b!==null?(M=b.baseLanes|y,d.memoizedState=null):M=y,Et(Gl,rr),rr|=M;return Ii(u,d,E,y),d.child}function R1(u,d){var y=d.ref;(u===null&&y!==null||u!==null&&u.ref!==y)&&(d.flags|=512,d.flags|=2097152)}function rv(u,d,y,M,E){var b=Tn(y)?Nt:Ve.current;return b=Yn(d,b),Dl(d,E),y=q0(u,d,y,M,b,E),M=Z0(),u!==null&&!ir?(d.updateQueue=u.updateQueue,d.flags&=-2053,u.lanes&=~E,Is(u,d,E)):(fn&&M&&H0(d),d.flags|=1,Ii(u,d,y,E),d.child)}function I1(u,d,y,M,E){if(Tn(y)){var b=!0;Ri(d)}else b=!1;if(Dl(d,E),d.stateNode===null)u!==null&&(u.alternate=null,d.alternate=null,d.flags|=2),WS(d,y,M),z0(d,y,M,E),M=!0;else if(u===null){var G=d.stateNode,Q=d.memoizedProps;G.props=Q;var ve=G.context,Pe=y.contextType;typeof Pe=="object"&&Pe!==null?Pe=vr(Pe):(Pe=Tn(y)?Nt:Ve.current,Pe=Yn(d,Pe));var et=y.getDerivedStateFromProps,At=typeof et=="function"||typeof G.getSnapshotBeforeUpdate=="function";At||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(Q!==M||ve!==Pe)&&jS(d,G,M,Pe),mo=!1;var dt=d.memoizedState;G.state=dt,Qh(d,M,G,E),ve=d.memoizedState,Q!==M||dt!==ve||dn.current||mo?(typeof et=="function"&&(k0(d,y,et,M),ve=d.memoizedState),(Q=mo||VS(d,y,Q,M,dt,ve,Pe))?(At||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount()),typeof G.componentDidMount=="function"&&(d.flags|=4194308)):(typeof G.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=M,d.memoizedState=ve),G.props=M,G.state=ve,G.context=Pe,M=Q):(typeof G.componentDidMount=="function"&&(d.flags|=4194308),M=!1)}else{G=d.stateNode,kS(u,d),Q=d.memoizedProps,Pe=d.type===d.elementType?Q:Ur(d.type,Q),G.props=Pe,At=d.pendingProps,dt=G.context,ve=y.contextType,typeof ve=="object"&&ve!==null?ve=vr(ve):(ve=Tn(y)?Nt:Ve.current,ve=Yn(d,ve));var nn=y.getDerivedStateFromProps;(et=typeof nn=="function"||typeof G.getSnapshotBeforeUpdate=="function")||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(Q!==At||dt!==ve)&&jS(d,G,M,ve),mo=!1,dt=d.memoizedState,G.state=dt,Qh(d,M,G,E);var lt=d.memoizedState;Q!==At||dt!==lt||dn.current||mo?(typeof nn=="function"&&(k0(d,y,nn,M),lt=d.memoizedState),(Pe=mo||VS(d,y,Pe,M,dt,lt,ve)||!1)?(et||typeof G.UNSAFE_componentWillUpdate!="function"&&typeof G.componentWillUpdate!="function"||(typeof G.componentWillUpdate=="function"&&G.componentWillUpdate(M,lt,ve),typeof G.UNSAFE_componentWillUpdate=="function"&&G.UNSAFE_componentWillUpdate(M,lt,ve)),typeof G.componentDidUpdate=="function"&&(d.flags|=4),typeof G.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof G.componentDidUpdate!="function"||Q===u.memoizedProps&&dt===u.memoizedState||(d.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||Q===u.memoizedProps&&dt===u.memoizedState||(d.flags|=1024),d.memoizedProps=M,d.memoizedState=lt),G.props=M,G.state=lt,G.context=ve,M=Pe):(typeof G.componentDidUpdate!="function"||Q===u.memoizedProps&&dt===u.memoizedState||(d.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||Q===u.memoizedProps&&dt===u.memoizedState||(d.flags|=1024),M=!1)}return sv(u,d,y,M,b,E)}function sv(u,d,y,M,E,b){R1(u,d);var G=(d.flags&128)!==0;if(!M&&!G)return E&&po(d,y,!1),Is(u,d,b);M=d.stateNode,fB.current=d;var Q=G&&typeof y.getDerivedStateFromError!="function"?null:M.render();return d.flags|=1,u!==null&&G?(d.child=Ol(d,u.child,null,b),d.child=Ol(d,null,Q,b)):Ii(u,d,Q,b),d.memoizedState=M.state,E&&po(d,y,!0),d.child}function P1(u){var d=u.stateNode;d.pendingContext?fo(u,d.pendingContext,d.pendingContext!==d.context):d.context&&fo(u,d.context,!1),X0(u,d.containerInfo)}function B1(u,d,y,M,E){return Ul(),j0(E),d.flags|=256,Ii(u,d,y,M),d.child}var hf={dehydrated:null,treeContext:null,retryLane:0};function ff(u){return{baseLanes:u,cachePool:null}}function L1(u,d,y){var M=d.pendingProps,E=gn.current,b=!1,G=(d.flags&128)!==0,Q;if((Q=G)||(Q=u!==null&&u.memoizedState===null?!1:(E&2)!==0),Q?(b=!0,d.flags&=-129):(u===null||u.memoizedState!==null)&&(E|=1),Et(gn,E&1),u===null)return W0(d),u=d.memoizedState,u!==null&&(u=u.dehydrated,u!==null)?(d.mode&1?ha(u)?d.lanes=8:d.lanes=1073741824:d.lanes=1,null):(E=M.children,u=M.fallback,b?(M=d.mode,b=d.child,E={mode:"hidden",children:E},!(M&1)&&b!==null?(b.childLanes=0,b.pendingProps=E):b=Lf(E,M,0,null),u=Aa(u,M,y,null),b.return=d,u.return=d,b.sibling=u,d.child=b,d.child.memoizedState=ff(y),d.memoizedState=hf,u):ov(d,E));if(E=u.memoizedState,E!==null){if(Q=E.dehydrated,Q!==null){if(G)return d.flags&256?(d.flags&=-257,pf(u,d,y,Error(o(422)))):d.memoizedState!==null?(d.child=u.child,d.flags|=128,null):(b=M.fallback,E=d.mode,M=Lf({mode:"visible",children:M.children},E,0,null),b=Aa(b,E,y,null),b.flags|=2,M.return=d,b.return=d,M.sibling=b,d.child=M,d.mode&1&&Ol(d,u.child,null,y),d.child.memoizedState=ff(y),d.memoizedState=hf,b);if(!(d.mode&1))d=pf(u,d,y,null);else if(ha(Q))d=pf(u,d,y,Error(o(419)));else if(M=(y&u.childLanes)!==0,ir||M){if(M=Ln,M!==null){switch(y&-y){case 4:b=2;break;case 16:b=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:b=32;break;case 536870912:b=268435456;break;default:b=0}M=b&(M.suspendedLanes|y)?0:b,M!==0&&M!==E.retryLane&&(E.retryLane=M,Sr(u,M,-1))}Cv(),d=pf(u,d,y,Error(o(421)))}else ts(Q)?(d.flags|=128,d.child=u.child,d=CB.bind(null,u),Nh(Q,d),d=null):(y=E.treeContext,xe&&(nr=Bl(Q),tr=d,fn=!0,Or=null,gu=!1,y!==null&&(yr[xr++]=bs,yr[xr++]=Ts,yr[xr++]=fa,bs=y.id,Ts=y.overflow,fa=d)),d=ov(d,d.pendingProps.children),d.flags|=4096);return d}return b?(M=N1(u,d,M.children,M.fallback,y),b=d.child,E=u.child.memoizedState,b.memoizedState=E===null?ff(y):{baseLanes:E.baseLanes|y,cachePool:null},b.childLanes=u.childLanes&~y,d.memoizedState=hf,M):(y=D1(u,d,M.children,y),d.memoizedState=null,y)}return b?(M=N1(u,d,M.children,M.fallback,y),b=d.child,E=u.child.memoizedState,b.memoizedState=E===null?ff(y):{baseLanes:E.baseLanes|y,cachePool:null},b.childLanes=u.childLanes&~y,d.memoizedState=hf,M):(y=D1(u,d,M.children,y),d.memoizedState=null,y)}function ov(u,d){return d=Lf({mode:"visible",children:d},u.mode,0,null),d.return=u,u.child=d}function D1(u,d,y,M){var E=u.child;return u=E.sibling,y=Ao(E,{mode:"visible",children:y}),!(d.mode&1)&&(y.lanes=M),y.return=d,y.sibling=null,u!==null&&(M=d.deletions,M===null?(d.deletions=[u],d.flags|=16):M.push(u)),d.child=y}function N1(u,d,y,M,E){var b=d.mode;u=u.child;var G=u.sibling,Q={mode:"hidden",children:y};return!(b&1)&&d.child!==u?(y=d.child,y.childLanes=0,y.pendingProps=Q,d.deletions=null):(y=Ao(u,Q),y.subtreeFlags=u.subtreeFlags&14680064),G!==null?M=Ao(G,M):(M=Aa(M,b,E,null),M.flags|=2),M.return=d,y.return=d,y.sibling=M,d.child=y,M}function pf(u,d,y,M){return M!==null&&j0(M),Ol(d,u.child,null,y),u=ov(d,d.pendingProps.children),u.flags|=2,d.memoizedState=null,u}function F1(u,d,y){u.lanes|=d;var M=u.alternate;M!==null&&(M.lanes|=d),U0(u.return,d,y)}function av(u,d,y,M,E){var b=u.memoizedState;b===null?u.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:M,tail:y,tailMode:E}:(b.isBackwards=d,b.rendering=null,b.renderingStartTime=0,b.last=M,b.tail=y,b.tailMode=E)}function U1(u,d,y){var M=d.pendingProps,E=M.revealOrder,b=M.tail;if(Ii(u,d,M.children,y),M=gn.current,M&2)M=M&1|2,d.flags|=128;else{if(u!==null&&u.flags&128)e:for(u=d.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&F1(u,y,d);else if(u.tag===19)F1(u,y,d);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===d)break e;for(;u.sibling===null;){if(u.return===null||u.return===d)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}M&=1}if(Et(gn,M),!(d.mode&1))d.memoizedState=null;else switch(E){case"forwards":for(y=d.child,E=null;y!==null;)u=y.alternate,u!==null&&tf(u)===null&&(E=y),y=y.sibling;y=E,y===null?(E=d.child,d.child=null):(E=y.sibling,y.sibling=null),av(d,!1,E,y,b);break;case"backwards":for(y=null,E=d.child,d.child=null;E!==null;){if(u=E.alternate,u!==null&&tf(u)===null){d.child=E;break}u=E.sibling,E.sibling=y,y=E,E=u}av(d,!0,y,null,b);break;case"together":av(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function Is(u,d,y){if(u!==null&&(d.dependencies=u.dependencies),Vl|=d.lanes,!(y&d.childLanes))return null;if(u!==null&&d.child!==u.child)throw Error(o(153));if(d.child!==null){for(u=d.child,y=Ao(u,u.pendingProps),d.child=y,y.return=d;u.sibling!==null;)u=u.sibling,y=y.sibling=Ao(u,u.pendingProps),y.return=d;y.sibling=null}return d.child}function pB(u,d,y){switch(d.tag){case 3:P1(d),Ul();break;case 5:$S(d);break;case 1:Tn(d.type)&&Ri(d);break;case 4:X0(d,d.stateNode.containerInfo);break;case 10:OS(d,d.type._context,d.memoizedProps.value);break;case 13:var M=d.memoizedState;if(M!==null)return M.dehydrated!==null?(Et(gn,gn.current&1),d.flags|=128,null):y&d.child.childLanes?L1(u,d,y):(Et(gn,gn.current&1),u=Is(u,d,y),u!==null?u.sibling:null);Et(gn,gn.current&1);break;case 19:if(M=(y&d.childLanes)!==0,u.flags&128){if(M)return U1(u,d,y);d.flags|=128}var E=d.memoizedState;if(E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),Et(gn,gn.current),M)break;return null;case 22:case 23:return d.lanes=0,T1(u,d,y)}return Is(u,d,y)}function mB(u,d){switch(G0(d),d.tag){case 1:return Tn(d.type)&&Qn(),u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 3:return zl(),ft(dn),ft(Ve),Y0(),u=d.flags,u&65536&&!(u&128)?(d.flags=u&-65537|128,d):null;case 5:return J0(d),null;case 13:if(ft(gn),u=d.memoizedState,u!==null&&u.dehydrated!==null){if(d.alternate===null)throw Error(o(340));Ul()}return u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 19:return ft(gn),null;case 4:return zl(),null;case 10:return F0(d.type._context),null;case 22:case 23:return Ev(),null;case 24:return null;default:return null}}var mf=!1,ga=!1,gB=typeof WeakSet=="function"?WeakSet:Set,Ge=null;function gf(u,d){var y=u.ref;if(y!==null)if(typeof y=="function")try{y(null)}catch(M){Wi(u,d,M)}else y.current=null}function lv(u,d,y){try{y()}catch(M){Wi(u,d,M)}}var O1=!1;function vB(u,d){for(k(u.containerInfo),Ge=d;Ge!==null;)if(u=Ge,d=u.child,(u.subtreeFlags&1028)!==0&&d!==null)d.return=u,Ge=d;else for(;Ge!==null;){u=Ge;try{var y=u.alternate;if(u.flags&1024)switch(u.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var M=y.memoizedProps,E=y.memoizedState,b=u.stateNode,G=b.getSnapshotBeforeUpdate(u.elementType===u.type?M:Ur(u.type,M),E);b.__reactInternalSnapshotBeforeUpdate=G}break;case 3:ke&&Se(u.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(Q){Wi(u,u.return,Q)}if(d=u.sibling,d!==null){d.return=u.return,Ge=d;break}Ge=u.return}return y=O1,O1=!1,y}function va(u,d,y){var M=d.updateQueue;if(M=M!==null?M.lastEffect:null,M!==null){var E=M=M.next;do{if((E.tag&u)===u){var b=E.destroy;E.destroy=void 0,b!==void 0&&lv(d,y,b)}E=E.next}while(E!==M)}}function Tu(u,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var y=d=d.next;do{if((y.tag&u)===u){var M=y.create;y.destroy=M()}y=y.next}while(y!==d)}}function cv(u){var d=u.ref;if(d!==null){var y=u.stateNode;switch(u.tag){case 5:u=re(y);break;default:u=y}typeof d=="function"?d(u):d.current=u}}function k1(u,d,y){if(rs&&typeof rs.onCommitFiberUnmount=="function")try{rs.onCommitFiberUnmount(Wh,d)}catch{}switch(d.tag){case 0:case 11:case 14:case 15:if(u=d.updateQueue,u!==null&&(u=u.lastEffect,u!==null)){var M=u=u.next;do{var E=M,b=E.destroy;E=E.tag,b!==void 0&&(E&2||E&4)&&lv(d,y,b),M=M.next}while(M!==u)}break;case 1:if(gf(d,y),u=d.stateNode,typeof u.componentWillUnmount=="function")try{u.props=d.memoizedProps,u.state=d.memoizedState,u.componentWillUnmount()}catch(G){Wi(d,y,G)}break;case 5:gf(d,y);break;case 4:ke?j1(u,d,y):me&&me&&(d=d.stateNode.containerInfo,y=Oe(d),an(d,y))}}function z1(u,d,y){for(var M=d;;)if(k1(u,M,y),M.child===null||ke&&M.tag===4){if(M===d)break;for(;M.sibling===null;){if(M.return===null||M.return===d)return;M=M.return}M.sibling.return=M.return,M=M.sibling}else M.child.return=M,M=M.child}function H1(u){var d=u.alternate;d!==null&&(u.alternate=null,H1(d)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(d=u.stateNode,d!==null&&De(d)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function G1(u){return u.tag===5||u.tag===3||u.tag===4}function V1(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||G1(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function W1(u){if(ke){e:{for(var d=u.return;d!==null;){if(G1(d))break e;d=d.return}throw Error(o(160))}var y=d;switch(y.tag){case 5:d=y.stateNode,y.flags&32&&(_e(d),y.flags&=-33),y=V1(u),dv(u,y,d);break;case 3:case 4:d=y.stateNode.containerInfo,y=V1(u),uv(u,y,d);break;default:throw Error(o(161))}}}function uv(u,d,y){var M=u.tag;if(M===5||M===6)u=u.stateNode,d?mt(y,u,d):Ke(y,u);else if(M!==4&&(u=u.child,u!==null))for(uv(u,d,y),u=u.sibling;u!==null;)uv(u,d,y),u=u.sibling}function dv(u,d,y){var M=u.tag;if(M===5||M===6)u=u.stateNode,d?ut(y,u,d):Fe(y,u);else if(M!==4&&(u=u.child,u!==null))for(dv(u,d,y),u=u.sibling;u!==null;)dv(u,d,y),u=u.sibling}function j1(u,d,y){for(var M=d,E=!1,b,G;;){if(!E){E=M.return;e:for(;;){if(E===null)throw Error(o(160));switch(b=E.stateNode,E.tag){case 5:G=!1;break e;case 3:b=b.containerInfo,G=!0;break e;case 4:b=b.containerInfo,G=!0;break e}E=E.return}E=!0}if(M.tag===5||M.tag===6)z1(u,M,y),G?J(b,M.stateNode):Ye(b,M.stateNode);else if(M.tag===18)G?le(b,M.stateNode):Z(b,M.stateNode);else if(M.tag===4){if(M.child!==null){b=M.stateNode.containerInfo,G=!0,M.child.return=M,M=M.child;continue}}else if(k1(u,M,y),M.child!==null){M.child.return=M,M=M.child;continue}if(M===d)break;for(;M.sibling===null;){if(M.return===null||M.return===d)return;M=M.return,M.tag===4&&(E=!1)}M.sibling.return=M.return,M=M.sibling}}function hv(u,d){if(ke){switch(d.tag){case 0:case 11:case 14:case 15:va(3,d,d.return),Tu(3,d),va(5,d,d.return);return;case 1:return;case 5:var y=d.stateNode;if(y!=null){var M=d.memoizedProps;u=u!==null?u.memoizedProps:M;var E=d.type,b=d.updateQueue;d.updateQueue=null,b!==null&&Ze(y,b,E,u,M,d)}return;case 6:if(d.stateNode===null)throw Error(o(162));y=d.memoizedProps,Tt(d.stateNode,u!==null?u.memoizedProps:y,y);return;case 3:xe&&u!==null&&u.memoizedState.isDehydrated&&kh(d.stateNode.containerInfo);return;case 12:return;case 13:vf(d);return;case 19:vf(d);return;case 17:return}throw Error(o(163))}switch(d.tag){case 0:case 11:case 14:case 15:va(3,d,d.return),Tu(3,d),va(5,d,d.return);return;case 12:return;case 13:vf(d);return;case 19:vf(d);return;case 3:xe&&u!==null&&u.memoizedState.isDehydrated&&kh(d.stateNode.containerInfo);break;case 22:case 23:return}e:if(me){switch(d.tag){case 1:case 5:case 6:break e;case 3:case 4:d=d.stateNode,an(d.containerInfo,d.pendingChildren);break e}throw Error(o(163))}}function vf(u){var d=u.updateQueue;if(d!==null){u.updateQueue=null;var y=u.stateNode;y===null&&(y=u.stateNode=new gB),d.forEach(function(M){var E=bB.bind(null,u,M);y.has(M)||(y.add(M),M.then(E,E))})}}function yB(u,d){for(Ge=d;Ge!==null;){d=Ge;var y=d.deletions;if(y!==null)for(var M=0;M<y.length;M++){var E=y[M];try{var b=u;ke?j1(b,E,d):z1(b,E,d);var G=E.alternate;G!==null&&(G.return=null),E.return=null}catch(at){Wi(E,d,at)}}if(y=d.child,d.subtreeFlags&12854&&y!==null)y.return=d,Ge=y;else for(;Ge!==null;){d=Ge;try{var Q=d.flags;if(Q&32&&ke&&_e(d.stateNode),Q&512){var ve=d.alternate;if(ve!==null){var Pe=ve.ref;Pe!==null&&(typeof Pe=="function"?Pe(null):Pe.current=null)}}if(Q&8192)switch(d.tag){case 13:if(d.memoizedState!==null){var et=d.alternate;(et===null||et.memoizedState===null)&&(xv=qn())}break;case 22:var At=d.memoizedState!==null,dt=d.alternate,nn=dt!==null&&dt.memoizedState!==null;if(y=d,ke){e:if(M=y,E=At,b=null,ke)for(var lt=M;;){if(lt.tag===5){if(b===null){b=lt;var gi=lt.stateNode;E?ze(gi):Te(lt.stateNode,lt.memoizedProps)}}else if(lt.tag===6){if(b===null){var wr=lt.stateNode;E?X(wr):fe(wr,lt.memoizedProps)}}else if((lt.tag!==22&&lt.tag!==23||lt.memoizedState===null||lt===M)&&lt.child!==null){lt.child.return=lt,lt=lt.child;continue}if(lt===M)break;for(;lt.sibling===null;){if(lt.return===null||lt.return===M)break e;b===lt&&(b=null),lt=lt.return}b===lt&&(b=null),lt.sibling.return=lt.return,lt=lt.sibling}}if(At&&!nn&&y.mode&1){Ge=y;for(var oe=y.child;oe!==null;){for(y=Ge=oe;Ge!==null;){M=Ge;var $=M.child;switch(M.tag){case 0:case 11:case 14:case 15:va(4,M,M.return);break;case 1:gf(M,M.return);var pe=M.stateNode;if(typeof pe.componentWillUnmount=="function"){var Xe=M.return;try{pe.props=M.memoizedProps,pe.state=M.memoizedState,pe.componentWillUnmount()}catch(at){Wi(M,Xe,at)}}break;case 5:gf(M,M.return);break;case 22:if(M.memoizedState!==null){K1(y);continue}}$!==null?($.return=M,Ge=$):K1(y)}oe=oe.sibling}}}switch(Q&4102){case 2:W1(d),d.flags&=-3;break;case 6:W1(d),d.flags&=-3,hv(d.alternate,d);break;case 4096:d.flags&=-4097;break;case 4100:d.flags&=-4097,hv(d.alternate,d);break;case 4:hv(d.alternate,d)}}catch(at){Wi(d,d.return,at)}if(y=d.sibling,y!==null){y.return=d.return,Ge=y;break}Ge=d.return}}}function xB(u,d,y){Ge=u,X1(u)}function X1(u,d,y){for(var M=(u.mode&1)!==0;Ge!==null;){var E=Ge,b=E.child;if(E.tag===22&&M){var G=E.memoizedState!==null||mf;if(!G){var Q=E.alternate,ve=Q!==null&&Q.memoizedState!==null||ga;Q=mf;var Pe=ga;if(mf=G,(ga=ve)&&!Pe)for(Ge=E;Ge!==null;)G=Ge,ve=G.child,G.tag===22&&G.memoizedState!==null?Y1(E):ve!==null?(ve.return=G,Ge=ve):Y1(E);for(;b!==null;)Ge=b,X1(b),b=b.sibling;Ge=E,mf=Q,ga=Pe}J1(u)}else E.subtreeFlags&8772&&b!==null?(b.return=E,Ge=b):J1(u)}}function J1(u){for(;Ge!==null;){var d=Ge;if(d.flags&8772){var y=d.alternate;try{if(d.flags&8772)switch(d.tag){case 0:case 11:case 15:ga||Tu(5,d);break;case 1:var M=d.stateNode;if(d.flags&4&&!ga)if(y===null)M.componentDidMount();else{var E=d.elementType===d.type?y.memoizedProps:Ur(d.type,y.memoizedProps);M.componentDidUpdate(E,y.memoizedState,M.__reactInternalSnapshotBeforeUpdate)}var b=d.updateQueue;b!==null&&HS(d,b,M);break;case 3:var G=d.updateQueue;if(G!==null){if(y=null,d.child!==null)switch(d.child.tag){case 5:y=re(d.child.stateNode);break;case 1:y=d.child.stateNode}HS(d,G,y)}break;case 5:var Q=d.stateNode;y===null&&d.flags&4&&be(Q,d.type,d.memoizedProps,d);break;case 6:break;case 4:break;case 12:break;case 13:if(xe&&d.memoizedState===null){var ve=d.alternate;if(ve!==null){var Pe=ve.memoizedState;if(Pe!==null){var et=Pe.dehydrated;et!==null&&O(et)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}ga||d.flags&512&&cv(d)}catch(At){Wi(d,d.return,At)}}if(d===u){Ge=null;break}if(y=d.sibling,y!==null){y.return=d.return,Ge=y;break}Ge=d.return}}function K1(u){for(;Ge!==null;){var d=Ge;if(d===u){Ge=null;break}var y=d.sibling;if(y!==null){y.return=d.return,Ge=y;break}Ge=d.return}}function Y1(u){for(;Ge!==null;){var d=Ge;try{switch(d.tag){case 0:case 11:case 15:var y=d.return;try{Tu(4,d)}catch(ve){Wi(d,y,ve)}break;case 1:var M=d.stateNode;if(typeof M.componentDidMount=="function"){var E=d.return;try{M.componentDidMount()}catch(ve){Wi(d,E,ve)}}var b=d.return;try{cv(d)}catch(ve){Wi(d,b,ve)}break;case 5:var G=d.return;try{cv(d)}catch(ve){Wi(d,G,ve)}}}catch(ve){Wi(d,d.return,ve)}if(d===u){Ge=null;break}var Q=d.sibling;if(Q!==null){Q.return=d.return,Ge=Q;break}Ge=d.return}}var yf=0,xf=1,_f=2,Af=3,Sf=4;if(typeof Symbol=="function"&&Symbol.for){var Ru=Symbol.for;yf=Ru("selector.component"),xf=Ru("selector.has_pseudo_class"),_f=Ru("selector.role"),Af=Ru("selector.test_id"),Sf=Ru("selector.text")}function fv(u){var d=V(u);if(d!=null){if(typeof d.memoizedProps["data-testname"]!="string")throw Error(o(364));return d}if(u=z(u),u===null)throw Error(o(362));return u.stateNode.current}function pv(u,d){switch(d.$$typeof){case yf:if(u.type===d.value)return!0;break;case xf:e:{d=d.value,u=[u,0];for(var y=0;y<u.length;){var M=u[y++],E=u[y++],b=d[E];if(M.tag!==5||!ye(M)){for(;b!=null&&pv(M,b);)E++,b=d[E];if(E===d.length){d=!0;break e}else for(M=M.child;M!==null;)u.push(M,E),M=M.sibling}}d=!1}return d;case _f:if(u.tag===5&&we(u.stateNode,d.value))return!0;break;case Sf:if((u.tag===5||u.tag===6)&&(u=ne(u),u!==null&&0<=u.indexOf(d.value)))return!0;break;case Af:if(u.tag===5&&(u=u.memoizedProps["data-testname"],typeof u=="string"&&u.toLowerCase()===d.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function mv(u){switch(u.$$typeof){case yf:return"<"+(P(u.value)||"Unknown")+">";case xf:return":has("+(mv(u)||"")+")";case _f:return'[role="'+u.value+'"]';case Sf:return'"'+u.value+'"';case Af:return'[data-testname="'+u.value+'"]';default:throw Error(o(365))}}function Q1(u,d){var y=[];u=[u,0];for(var M=0;M<u.length;){var E=u[M++],b=u[M++],G=d[b];if(E.tag!==5||!ye(E)){for(;G!=null&&pv(E,G);)b++,G=d[b];if(b===d.length)y.push(E);else for(E=E.child;E!==null;)u.push(E,b),E=E.sibling}}return y}function gv(u,d){if(!Ne)throw Error(o(363));u=fv(u),u=Q1(u,d),d=[],u=Array.from(u);for(var y=0;y<u.length;){var M=u[y++];if(M.tag===5)ye(M)||d.push(M.stateNode);else for(M=M.child;M!==null;)u.push(M),M=M.sibling}return d}var _B=Math.ceil,Mf=a.ReactCurrentDispatcher,vv=a.ReactCurrentOwner,Rn=a.ReactCurrentBatchConfig,Lt=0,Ln=null,Dn=null,ii=0,rr=0,Gl=Ht(0),Wn=0,Iu=null,Vl=0,wf=0,yv=0,Pu=null,Gi=null,xv=0,_v=1/0;function Wl(){_v=qn()+500}var Ef=!1,Av=null,vo=null,Cf=!1,yo=null,bf=0,Bu=0,Sv=null,Tf=-1,Rf=0;function Pi(){return Lt&6?qn():Tf!==-1?Tf:Tf=qn()}function xo(u){return u.mode&1?Lt&2&&ii!==0?ii&-ii:nB.transition!==null?(Rf===0&&(u=Hh,Hh<<=1,!(Hh&4194240)&&(Hh=64),Rf=u),Rf):(u=Jt,u!==0?u:Me()):1}function Sr(u,d,y){if(50<Bu)throw Bu=0,Sv=null,Error(o(185));var M=If(u,d);return M===null?null:(mu(M,d,y),(!(Lt&2)||M!==Ln)&&(M===Ln&&(!(Lt&2)&&(wf|=d),Wn===4&&_o(M,ii)),Vi(M,y),d===1&&Lt===0&&!(u.mode&1)&&(Wl(),jh&&os())),M)}function If(u,d){u.lanes|=d;var y=u.alternate;for(y!==null&&(y.lanes|=d),y=u,u=u.return;u!==null;)u.childLanes|=d,y=u.alternate,y!==null&&(y.childLanes|=d),y=u,u=u.return;return y.tag===3?y.stateNode:null}function Vi(u,d){var y=u.callbackNode;JP(u,d);var M=Vh(u,u===Ln?ii:0);if(M===0)y!==null&&FS(y),u.callbackNode=null,u.callbackPriority=0;else if(d=M&-M,u.callbackPriority!==d){if(y!=null&&FS(y),d===1)u.tag===0?tB(Z1.bind(null,u)):US(Z1.bind(null,u)),Ie?ot(function(){Lt===0&&os()}):I0(P0,os),y=null;else{switch(NS(M)){case 1:y=P0;break;case 4:y=qP;break;case 16:y=B0;break;case 536870912:y=ZP;break;default:y=B0}y=aM(y,q1.bind(null,u))}u.callbackPriority=d,u.callbackNode=y}}function q1(u,d){if(Tf=-1,Rf=0,Lt&6)throw Error(o(327));var y=u.callbackNode;if(_a()&&u.callbackNode!==y)return null;var M=Vh(u,u===Ln?ii:0);if(M===0)return null;if(M&30||M&u.expiredLanes||d)d=Pf(u,M);else{d=M;var E=Lt;Lt|=2;var b=tM();(Ln!==u||ii!==d)&&(Wl(),ya(u,d));do try{MB();break}catch(Q){eM(u,Q)}while(!0);N0(),Mf.current=b,Lt=E,Dn!==null?d=0:(Ln=null,ii=0,d=Wn)}if(d!==0){if(d===2&&(E=b0(u),E!==0&&(M=E,d=Mv(u,E))),d===1)throw y=Iu,ya(u,0),_o(u,M),Vi(u,qn()),y;if(d===6)_o(u,M);else{if(E=u.current.alternate,!(M&30)&&!AB(E)&&(d=Pf(u,M),d===2&&(b=b0(u),b!==0&&(M=b,d=Mv(u,b))),d===1))throw y=Iu,ya(u,0),_o(u,M),Vi(u,qn()),y;switch(u.finishedWork=E,u.finishedLanes=M,d){case 0:case 1:throw Error(o(345));case 2:xa(u,Gi);break;case 3:if(_o(u,M),(M&130023424)===M&&(d=xv+500-qn(),10<d)){if(Vh(u,0)!==0)break;if(E=u.suspendedLanes,(E&M)!==M){Pi(),u.pingedLanes|=u.suspendedLanes&E;break}u.timeoutHandle=ae(xa.bind(null,u,Gi),d);break}xa(u,Gi);break;case 4:if(_o(u,M),(M&4194240)===M)break;for(d=u.eventTimes,E=-1;0<M;){var G=31-hn(M);b=1<<G,G=d[G],G>E&&(E=G),M&=~b}if(M=E,M=qn()-M,M=(120>M?120:480>M?480:1080>M?1080:1920>M?1920:3e3>M?3e3:4320>M?4320:1960*_B(M/1960))-M,10<M){u.timeoutHandle=ae(xa.bind(null,u,Gi),M);break}xa(u,Gi);break;case 5:xa(u,Gi);break;default:throw Error(o(329))}}}return Vi(u,qn()),u.callbackNode===y?q1.bind(null,u):null}function Mv(u,d){var y=Pu;return u.current.memoizedState.isDehydrated&&(ya(u,d).flags|=256),u=Pf(u,d),u!==2&&(d=Gi,Gi=y,d!==null&&wv(d)),u}function wv(u){Gi===null?Gi=u:Gi.push.apply(Gi,u)}function AB(u){for(var d=u;;){if(d.flags&16384){var y=d.updateQueue;if(y!==null&&(y=y.stores,y!==null))for(var M=0;M<y.length;M++){var E=y[M],b=E.getSnapshot;E=E.value;try{if(!ss(b(),E))return!1}catch{return!1}}}if(y=d.child,d.subtreeFlags&16384&&y!==null)y.return=d,d=y;else{if(d===u)break;for(;d.sibling===null;){if(d.return===null||d.return===u)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function _o(u,d){for(d&=~yv,d&=~wf,u.suspendedLanes|=d,u.pingedLanes&=~d,u=u.expirationTimes;0<d;){var y=31-hn(d),M=1<<y;u[y]=-1,d&=~M}}function Z1(u){if(Lt&6)throw Error(o(327));_a();var d=Vh(u,0);if(!(d&1))return Vi(u,qn()),null;var y=Pf(u,d);if(u.tag!==0&&y===2){var M=b0(u);M!==0&&(d=M,y=Mv(u,M))}if(y===1)throw y=Iu,ya(u,0),_o(u,d),Vi(u,qn()),y;if(y===6)throw Error(o(345));return u.finishedWork=u.current.alternate,u.finishedLanes=d,xa(u,Gi),Vi(u,qn()),null}function $1(u){yo!==null&&yo.tag===0&&!(Lt&6)&&_a();var d=Lt;Lt|=1;var y=Rn.transition,M=Jt;try{if(Rn.transition=null,Jt=1,u)return u()}finally{Jt=M,Rn.transition=y,Lt=d,!(Lt&6)&&os()}}function Ev(){rr=Gl.current,ft(Gl)}function ya(u,d){u.finishedWork=null,u.finishedLanes=0;var y=u.timeoutHandle;if(y!==We&&(u.timeoutHandle=We,Le(y)),Dn!==null)for(y=Dn.return;y!==null;){var M=y;switch(G0(M),M.tag){case 1:M=M.type.childContextTypes,M!=null&&Qn();break;case 3:zl(),ft(dn),ft(Ve),Y0();break;case 5:J0(M);break;case 4:zl();break;case 13:ft(gn);break;case 19:ft(gn);break;case 10:F0(M.type._context);break;case 22:case 23:Ev()}y=y.return}if(Ln=u,Dn=u=Ao(u.current,null),ii=rr=d,Wn=0,Iu=null,yv=wf=Vl=0,Gi=Pu=null,as!==null){for(d=0;d<as.length;d++)if(y=as[d],M=y.interleaved,M!==null){y.interleaved=null;var E=M.next,b=y.pending;if(b!==null){var G=b.next;b.next=E,M.next=G}y.pending=M}as=null}return u}function eM(u,d){do{var y=Dn;try{if(N0(),nf.current=cf,rf){for(var M=Sn.memoizedState;M!==null;){var E=M.queue;E!==null&&(E.pending=null),M=M.next}rf=!1}if(Hl=0,Zn=fi=Sn=null,Au=!1,Su=0,vv.current=null,y===null||y.return===null){Wn=1,Iu=d,Dn=null;break}e:{var b=u,G=y.return,Q=y,ve=d;if(d=ii,Q.flags|=32768,ve!==null&&typeof ve=="object"&&typeof ve.then=="function"){var Pe=ve,et=Q,At=et.tag;if(!(et.mode&1)&&(At===0||At===11||At===15)){var dt=et.alternate;dt?(et.updateQueue=dt.updateQueue,et.memoizedState=dt.memoizedState,et.lanes=dt.lanes):(et.updateQueue=null,et.memoizedState=null)}var nn=A1(G);if(nn!==null){nn.flags&=-257,S1(nn,G,Q,b,d),nn.mode&1&&_1(b,Pe,d),d=nn,ve=Pe;var lt=d.updateQueue;if(lt===null){var gi=new Set;gi.add(ve),d.updateQueue=gi}else lt.add(ve);break e}else{if(!(d&1)){_1(b,Pe,d),Cv();break e}ve=Error(o(426))}}else if(fn&&Q.mode&1){var wr=A1(G);if(wr!==null){!(wr.flags&65536)&&(wr.flags|=256),S1(wr,G,Q,b,d),j0(ve);break e}}b=ve,Wn!==4&&(Wn=2),Pu===null?Pu=[b]:Pu.push(b),ve=nv(ve,Q),Q=G;do{switch(Q.tag){case 3:Q.flags|=65536,d&=-d,Q.lanes|=d;var oe=y1(Q,ve,d);zS(Q,oe);break e;case 1:b=ve;var $=Q.type,pe=Q.stateNode;if(!(Q.flags&128)&&(typeof $.getDerivedStateFromError=="function"||pe!==null&&typeof pe.componentDidCatch=="function"&&(vo===null||!vo.has(pe)))){Q.flags|=65536,d&=-d,Q.lanes|=d;var Xe=x1(Q,b,d);zS(Q,Xe);break e}}Q=Q.return}while(Q!==null)}iM(y)}catch(at){d=at,Dn===y&&y!==null&&(Dn=y=y.return);continue}break}while(!0)}function tM(){var u=Mf.current;return Mf.current=cf,u===null?cf:u}function Cv(){(Wn===0||Wn===3||Wn===2)&&(Wn=4),Ln===null||!(Vl&268435455)&&!(wf&268435455)||_o(Ln,ii)}function Pf(u,d){var y=Lt;Lt|=2;var M=tM();Ln===u&&ii===d||ya(u,d);do try{SB();break}catch(E){eM(u,E)}while(!0);if(N0(),Lt=y,Mf.current=M,Dn!==null)throw Error(o(261));return Ln=null,ii=0,Wn}function SB(){for(;Dn!==null;)nM(Dn)}function MB(){for(;Dn!==null&&!YP();)nM(Dn)}function nM(u){var d=oM(u.alternate,u,rr);u.memoizedProps=u.pendingProps,d===null?iM(u):Dn=d,vv.current=null}function iM(u){var d=u;do{var y=d.alternate;if(u=d.return,d.flags&32768){if(y=mB(y,d),y!==null){y.flags&=32767,Dn=y;return}if(u!==null)u.flags|=32768,u.subtreeFlags=0,u.deletions=null;else{Wn=6,Dn=null;return}}else if(y=hB(y,d,rr),y!==null){Dn=y;return}if(d=d.sibling,d!==null){Dn=d;return}Dn=d=u}while(d!==null);Wn===0&&(Wn=5)}function xa(u,d){var y=Jt,M=Rn.transition;try{Rn.transition=null,Jt=1,wB(u,d,y)}finally{Rn.transition=M,Jt=y}return null}function wB(u,d,y){do _a();while(yo!==null);if(Lt&6)throw Error(o(327));var M=u.finishedWork,E=u.finishedLanes;if(M===null)return null;if(u.finishedWork=null,u.finishedLanes=0,M===u.current)throw Error(o(177));u.callbackNode=null,u.callbackPriority=0;var b=M.lanes|M.childLanes;if(KP(u,b),u===Ln&&(Dn=Ln=null,ii=0),!(M.subtreeFlags&2064)&&!(M.flags&2064)||Cf||(Cf=!0,aM(B0,function(){return _a(),null})),b=(M.flags&15990)!==0,M.subtreeFlags&15990||b){b=Rn.transition,Rn.transition=null;var G=Jt;Jt=1;var Q=Lt;Lt|=4,vv.current=null,vB(u,M),yB(u,M),W(u.containerInfo),u.current=M,xB(M),QP(),Lt=Q,Jt=G,Rn.transition=b}else u.current=M;if(Cf&&(Cf=!1,yo=u,bf=E),b=u.pendingLanes,b===0&&(vo=null),$P(M.stateNode),Vi(u,qn()),d!==null)for(y=u.onRecoverableError,M=0;M<d.length;M++)y(d[M]);if(Ef)throw Ef=!1,u=Av,Av=null,u;return bf&1&&u.tag!==0&&_a(),b=u.pendingLanes,b&1?u===Sv?Bu++:(Bu=0,Sv=u):Bu=0,os(),null}function _a(){if(yo!==null){var u=NS(bf),d=Rn.transition,y=Jt;try{if(Rn.transition=null,Jt=16>u?16:u,yo===null)var M=!1;else{if(u=yo,yo=null,bf=0,Lt&6)throw Error(o(331));var E=Lt;for(Lt|=4,Ge=u.current;Ge!==null;){var b=Ge,G=b.child;if(Ge.flags&16){var Q=b.deletions;if(Q!==null){for(var ve=0;ve<Q.length;ve++){var Pe=Q[ve];for(Ge=Pe;Ge!==null;){var et=Ge;switch(et.tag){case 0:case 11:case 15:va(8,et,b)}var At=et.child;if(At!==null)At.return=et,Ge=At;else for(;Ge!==null;){et=Ge;var dt=et.sibling,nn=et.return;if(H1(et),et===Pe){Ge=null;break}if(dt!==null){dt.return=nn,Ge=dt;break}Ge=nn}}}var lt=b.alternate;if(lt!==null){var gi=lt.child;if(gi!==null){lt.child=null;do{var wr=gi.sibling;gi.sibling=null,gi=wr}while(gi!==null)}}Ge=b}}if(b.subtreeFlags&2064&&G!==null)G.return=b,Ge=G;else e:for(;Ge!==null;){if(b=Ge,b.flags&2048)switch(b.tag){case 0:case 11:case 15:va(9,b,b.return)}var oe=b.sibling;if(oe!==null){oe.return=b.return,Ge=oe;break e}Ge=b.return}}var $=u.current;for(Ge=$;Ge!==null;){G=Ge;var pe=G.child;if(G.subtreeFlags&2064&&pe!==null)pe.return=G,Ge=pe;else e:for(G=$;Ge!==null;){if(Q=Ge,Q.flags&2048)try{switch(Q.tag){case 0:case 11:case 15:Tu(9,Q)}}catch(at){Wi(Q,Q.return,at)}if(Q===G){Ge=null;break e}var Xe=Q.sibling;if(Xe!==null){Xe.return=Q.return,Ge=Xe;break e}Ge=Q.return}}if(Lt=E,os(),rs&&typeof rs.onPostCommitFiberRoot=="function")try{rs.onPostCommitFiberRoot(Wh,u)}catch{}M=!0}return M}finally{Jt=y,Rn.transition=d}}return!1}function rM(u,d,y){d=nv(y,d),d=y1(u,d,1),go(u,d),d=Pi(),u=If(u,1),u!==null&&(mu(u,1,d),Vi(u,d))}function Wi(u,d,y){if(u.tag===3)rM(u,u,y);else for(;d!==null;){if(d.tag===3){rM(d,u,y);break}else if(d.tag===1){var M=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof M.componentDidCatch=="function"&&(vo===null||!vo.has(M))){u=nv(y,u),u=x1(d,u,1),go(d,u),u=Pi(),d=If(d,1),d!==null&&(mu(d,1,u),Vi(d,u));break}}d=d.return}}function EB(u,d,y){var M=u.pingCache;M!==null&&M.delete(d),d=Pi(),u.pingedLanes|=u.suspendedLanes&y,Ln===u&&(ii&y)===y&&(Wn===4||Wn===3&&(ii&130023424)===ii&&500>qn()-xv?ya(u,0):yv|=y),Vi(u,d)}function sM(u,d){d===0&&(u.mode&1?(d=Gh,Gh<<=1,!(Gh&130023424)&&(Gh=4194304)):d=1);var y=Pi();u=If(u,d),u!==null&&(mu(u,d,y),Vi(u,y))}function CB(u){var d=u.memoizedState,y=0;d!==null&&(y=d.retryLane),sM(u,y)}function bB(u,d){var y=0;switch(u.tag){case 13:var M=u.stateNode,E=u.memoizedState;E!==null&&(y=E.retryLane);break;case 19:M=u.stateNode;break;default:throw Error(o(314))}M!==null&&M.delete(d),sM(u,y)}var oM;oM=function(u,d,y){if(u!==null)if(u.memoizedProps!==d.pendingProps||dn.current)ir=!0;else{if(!(u.lanes&y)&&!(d.flags&128))return ir=!1,pB(u,d,y);ir=!!(u.flags&131072)}else ir=!1,fn&&d.flags&1048576&&XS(d,$h,d.index);switch(d.lanes=0,d.tag){case 2:var M=d.type;u!==null&&(u.alternate=null,d.alternate=null,d.flags|=2),u=d.pendingProps;var E=Yn(d,Ve.current);Dl(d,y),E=q0(null,d,M,u,E,y);var b=Z0();return d.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,Tn(M)?(b=!0,Ri(d)):b=!1,d.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,O0(d),E.updater=qh,d.stateNode=E,E._reactInternals=d,z0(d,M,u,y),d=sv(null,d,M,!0,b,y)):(d.tag=0,fn&&b&&H0(d),Ii(null,d,E,y),d=d.child),d;case 16:M=d.elementType;e:{switch(u!==null&&(u.alternate=null,d.alternate=null,d.flags|=2),u=d.pendingProps,E=M._init,M=E(M._payload),d.type=M,E=d.tag=RB(M),u=Ur(M,u),E){case 0:d=rv(null,d,M,u,y);break e;case 1:d=I1(null,d,M,u,y);break e;case 11:d=E1(null,d,M,u,y);break e;case 14:d=C1(null,d,M,Ur(M.type,u),y);break e}throw Error(o(306,M,""))}return d;case 0:return M=d.type,E=d.pendingProps,E=d.elementType===M?E:Ur(M,E),rv(u,d,M,E,y);case 1:return M=d.type,E=d.pendingProps,E=d.elementType===M?E:Ur(M,E),I1(u,d,M,E,y);case 3:e:{if(P1(d),u===null)throw Error(o(387));M=d.pendingProps,b=d.memoizedState,E=b.element,kS(u,d),Qh(d,M,null,y);var G=d.memoizedState;if(M=G.element,xe&&b.isDehydrated)if(b={element:M,isDehydrated:!1,cache:G.cache,transitions:G.transitions},d.updateQueue.baseState=b,d.memoizedState=b,d.flags&256){E=Error(o(423)),d=B1(u,d,M,y,E);break e}else if(M!==E){E=Error(o(424)),d=B1(u,d,M,y,E);break e}else for(xe&&(nr=Fh(d.stateNode.containerInfo),tr=d,fn=!0,Or=null,gu=!1),y=ZS(d,null,M,y),d.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling;else{if(Ul(),M===E){d=Is(u,d,y);break e}Ii(u,d,M,y)}d=d.child}return d;case 5:return $S(d),u===null&&W0(d),M=d.type,E=d.pendingProps,b=u!==null?u.memoizedProps:null,G=E.children,ie(M,E)?G=null:b!==null&&ie(M,b)&&(d.flags|=32),R1(u,d),Ii(u,d,G,y),d.child;case 6:return u===null&&W0(d),null;case 13:return L1(u,d,y);case 4:return X0(d,d.stateNode.containerInfo),M=d.pendingProps,u===null?d.child=Ol(d,null,M,y):Ii(u,d,M,y),d.child;case 11:return M=d.type,E=d.pendingProps,E=d.elementType===M?E:Ur(M,E),E1(u,d,M,E,y);case 7:return Ii(u,d,d.pendingProps,y),d.child;case 8:return Ii(u,d,d.pendingProps.children,y),d.child;case 12:return Ii(u,d,d.pendingProps.children,y),d.child;case 10:e:{if(M=d.type._context,E=d.pendingProps,b=d.memoizedProps,G=E.value,OS(d,M,G),b!==null)if(ss(b.value,G)){if(b.children===E.children&&!dn.current){d=Is(u,d,y);break e}}else for(b=d.child,b!==null&&(b.return=d);b!==null;){var Q=b.dependencies;if(Q!==null){G=b.child;for(var ve=Q.firstContext;ve!==null;){if(ve.context===M){if(b.tag===1){ve=Cs(-1,y&-y),ve.tag=2;var Pe=b.updateQueue;if(Pe!==null){Pe=Pe.shared;var et=Pe.pending;et===null?ve.next=ve:(ve.next=et.next,et.next=ve),Pe.pending=ve}}b.lanes|=y,ve=b.alternate,ve!==null&&(ve.lanes|=y),U0(b.return,y,d),Q.lanes|=y;break}ve=ve.next}}else if(b.tag===10)G=b.type===d.type?null:b.child;else if(b.tag===18){if(G=b.return,G===null)throw Error(o(341));G.lanes|=y,Q=G.alternate,Q!==null&&(Q.lanes|=y),U0(G,y,d),G=b.sibling}else G=b.child;if(G!==null)G.return=b;else for(G=b;G!==null;){if(G===d){G=null;break}if(b=G.sibling,b!==null){b.return=G.return,G=b;break}G=G.return}b=G}Ii(u,d,E.children,y),d=d.child}return d;case 9:return E=d.type,M=d.pendingProps.children,Dl(d,y),E=vr(E),M=M(E),d.flags|=1,Ii(u,d,M,y),d.child;case 14:return M=d.type,E=Ur(M,d.pendingProps),E=Ur(M.type,E),C1(u,d,M,E,y);case 15:return b1(u,d,d.type,d.pendingProps,y);case 17:return M=d.type,E=d.pendingProps,E=d.elementType===M?E:Ur(M,E),u!==null&&(u.alternate=null,d.alternate=null,d.flags|=2),d.tag=1,Tn(M)?(u=!0,Ri(d)):u=!1,Dl(d,y),WS(d,M,E),z0(d,M,E,y),sv(null,d,M,!0,u,y);case 19:return U1(u,d,y);case 22:return T1(u,d,y)}throw Error(o(156,d.tag))};function aM(u,d){return I0(u,d)}function TB(u,d,y,M){this.tag=u,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=M,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mr(u,d,y,M){return new TB(u,d,y,M)}function bv(u){return u=u.prototype,!(!u||!u.isReactComponent)}function RB(u){if(typeof u=="function")return bv(u)?1:0;if(u!=null){if(u=u.$$typeof,u===A)return 11;if(u===S)return 14}return 2}function Ao(u,d){var y=u.alternate;return y===null?(y=Mr(u.tag,d,u.key,u.mode),y.elementType=u.elementType,y.type=u.type,y.stateNode=u.stateNode,y.alternate=u,u.alternate=y):(y.pendingProps=d,y.type=u.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=u.flags&14680064,y.childLanes=u.childLanes,y.lanes=u.lanes,y.child=u.child,y.memoizedProps=u.memoizedProps,y.memoizedState=u.memoizedState,y.updateQueue=u.updateQueue,d=u.dependencies,y.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},y.sibling=u.sibling,y.index=u.index,y.ref=u.ref,y}function Bf(u,d,y,M,E,b){var G=2;if(M=u,typeof u=="function")bv(u)&&(G=1);else if(typeof u=="string")G=5;else e:switch(u){case h:return Aa(y.children,E,b,d);case f:G=8,E|=8;break;case p:return u=Mr(12,y,d,E|2),u.elementType=p,u.lanes=b,u;case x:return u=Mr(13,y,d,E),u.elementType=x,u.lanes=b,u;case g:return u=Mr(19,y,d,E),u.elementType=g,u.lanes=b,u;case w:return Lf(y,E,b,d);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case m:G=10;break e;case v:G=9;break e;case A:G=11;break e;case S:G=14;break e;case _:G=16,M=null;break e}throw Error(o(130,u==null?u:typeof u,""))}return d=Mr(G,y,d,E),d.elementType=u,d.type=M,d.lanes=b,d}function Aa(u,d,y,M){return u=Mr(7,u,M,d),u.lanes=y,u}function Lf(u,d,y,M){return u=Mr(22,u,M,d),u.elementType=w,u.lanes=y,u.stateNode={},u}function Tv(u,d,y){return u=Mr(6,u,null,d),u.lanes=y,u}function Rv(u,d,y){return d=Mr(4,u.children!==null?u.children:[],u.key,d),d.lanes=y,d.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},d}function IB(u,d,y,M,E){this.tag=d,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=We,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=T0(0),this.expirationTimes=T0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=T0(0),this.identifierPrefix=M,this.onRecoverableError=E,xe&&(this.mutableSourceEagerHydrationData=null)}function lM(u,d,y,M,E,b,G,Q,ve){return u=new IB(u,d,y,Q,ve),d===1?(d=1,b===!0&&(d|=8)):d=0,b=Mr(3,null,null,d),u.current=b,b.stateNode=u,b.memoizedState={element:M,isDehydrated:y,cache:null,transitions:null},O0(b),u}function cM(u){if(!u)return Bt;u=u._reactInternals;e:{if(R(u)!==u||u.tag!==1)throw Error(o(170));var d=u;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(Tn(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(o(171))}if(u.tag===1){var y=u.type;if(Tn(y))return $t(u,y,d)}return d}function uM(u){var d=u._reactInternals;if(d===void 0)throw typeof u.render=="function"?Error(o(188)):(u=Object.keys(u).join(","),Error(o(268,u)));return u=j(d),u===null?null:u.stateNode}function dM(u,d){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var y=u.retryLane;u.retryLane=y!==0&&y<d?y:d}}function Iv(u,d){dM(u,d),(u=u.alternate)&&dM(u,d)}function PB(u){return u=j(u),u===null?null:u.stateNode}function BB(){return null}return t.attemptContinuousHydration=function(u){if(u.tag===13){var d=Pi();Sr(u,134217728,d),Iv(u,134217728)}},t.attemptHydrationAtCurrentPriority=function(u){if(u.tag===13){var d=Pi(),y=xo(u);Sr(u,y,d),Iv(u,y)}},t.attemptSynchronousHydration=function(u){switch(u.tag){case 3:var d=u.stateNode;if(d.current.memoizedState.isDehydrated){var y=pu(d.pendingLanes);y!==0&&(R0(d,y|1),Vi(d,qn()),!(Lt&6)&&(Wl(),os()))}break;case 13:var M=Pi();$1(function(){return Sr(u,1,M)}),Iv(u,1)}},t.batchedUpdates=function(u,d){var y=Lt;Lt|=1;try{return u(d)}finally{Lt=y,Lt===0&&(Wl(),jh&&os())}},t.createComponentSelector=function(u){return{$$typeof:yf,value:u}},t.createContainer=function(u,d,y,M,E,b,G){return lM(u,d,!1,null,y,M,E,b,G)},t.createHasPseudoClassSelector=function(u){return{$$typeof:xf,value:u}},t.createHydrationContainer=function(u,d,y,M,E,b,G,Q,ve){return u=lM(y,M,!0,u,E,b,G,Q,ve),u.context=cM(null),y=u.current,M=Pi(),E=xo(y),b=Cs(M,E),b.callback=d??null,go(y,b),u.current.lanes=E,mu(u,E,M),Vi(u,M),u},t.createPortal=function(u,d,y){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:M==null?null:""+M,children:u,containerInfo:d,implementation:y}},t.createRoleSelector=function(u){return{$$typeof:_f,value:u}},t.createTestNameSelector=function(u){return{$$typeof:Af,value:u}},t.createTextSelector=function(u){return{$$typeof:Sf,value:u}},t.deferredUpdates=function(u){var d=Jt,y=Rn.transition;try{return Rn.transition=null,Jt=16,u()}finally{Jt=d,Rn.transition=y}},t.discreteUpdates=function(u,d,y,M,E){var b=Jt,G=Rn.transition;try{return Rn.transition=null,Jt=1,u(d,y,M,E)}finally{Jt=b,Rn.transition=G,Lt===0&&Wl()}},t.findAllNodes=gv,t.findBoundingRects=function(u,d){if(!Ne)throw Error(o(363));d=gv(u,d),u=[];for(var y=0;y<d.length;y++)u.push(N(d[y]));for(d=u.length-1;0<d;d--){y=u[d];for(var M=y.x,E=M+y.width,b=y.y,G=b+y.height,Q=d-1;0<=Q;Q--)if(d!==Q){var ve=u[Q],Pe=ve.x,et=Pe+ve.width,At=ve.y,dt=At+ve.height;if(M>=Pe&&b>=At&&E<=et&&G<=dt){u.splice(d,1);break}else if(M!==Pe||y.width!==ve.width||dt<b||At>G){if(!(b!==At||y.height!==ve.height||et<M||Pe>E)){Pe>M&&(ve.width+=Pe-M,ve.x=M),et<E&&(ve.width=E-Pe),u.splice(d,1);break}}else{At>b&&(ve.height+=At-b,ve.y=b),dt<G&&(ve.height=G-At),u.splice(d,1);break}}}return u},t.findHostInstance=uM,t.findHostInstanceWithNoPortals=function(u){return u=U(u),u=u!==null?te(u):null,u===null?null:u.stateNode},t.findHostInstanceWithWarning=function(u){return uM(u)},t.flushControlled=function(u){var d=Lt;Lt|=1;var y=Rn.transition,M=Jt;try{Rn.transition=null,Jt=1,u()}finally{Jt=M,Rn.transition=y,Lt=d,Lt===0&&(Wl(),os())}},t.flushPassiveEffects=_a,t.flushSync=$1,t.focusWithin=function(u,d){if(!Ne)throw Error(o(363));for(u=fv(u),d=Q1(u,d),d=Array.from(d),u=0;u<d.length;){var y=d[u++];if(!ye(y)){if(y.tag===5&&Ae(y.stateNode))return!0;for(y=y.child;y!==null;)d.push(y),y=y.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Jt},t.getFindAllNodesFailureDescription=function(u,d){if(!Ne)throw Error(o(363));var y=0,M=[];u=[fv(u),0];for(var E=0;E<u.length;){var b=u[E++],G=u[E++],Q=d[G];if((b.tag!==5||!ye(b))&&(pv(b,Q)&&(M.push(mv(Q)),G++,G>y&&(y=G)),G<d.length))for(b=b.child;b!==null;)u.push(b,G),b=b.sibling}if(y<d.length){for(u=[];y<d.length;y++)u.push(mv(d[y]));return`findAllNodes was able to match part of the selector:
  `+(M.join(" > ")+`

No matching component was found for:
  `)+u.join(" > ")}return null},t.getPublicRootInstance=function(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 5:return re(u.child.stateNode);default:return u.child.stateNode}},t.injectIntoDevTools=function(u){if(u={bundleType:u.bundleType,version:u.version,rendererPackageName:u.rendererPackageName,rendererConfig:u.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:PB,findFiberByHostInstance:u.findFiberByHostInstance||BB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")u=!1;else{var d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(d.isDisabled||!d.supportsFiber)u=!0;else{try{Wh=d.inject(u),rs=d}catch{}u=!!d.checkDCE}}return u},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(u,d,y,M){if(!Ne)throw Error(o(363));u=gv(u,d);var E=tt(u,y,M).disconnect;return{disconnect:function(){E()}}},t.registerMutableSourceForHydration=function(u,d){var y=d._getVersion;y=y(d._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[d,y]:u.mutableSourceEagerHydrationData.push(d,y)},t.runWithPriority=function(u,d){var y=Jt;try{return Jt=u,d()}finally{Jt=y}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(u,d,y,M){var E=d.current,b=Pi(),G=xo(E);return y=cM(y),d.context===null?d.context=y:d.pendingContext=y,d=Cs(b,G),d.payload={element:u},M=M===void 0?null:M,M!==null&&(d.callback=M),go(E,d),u=Sr(E,G,b),u!==null&&Yh(u,E,G),G},t};F2.exports=C4;var b4=F2.exports;const T4=k_(b4);var U2={exports:{}},O2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(F,k){var W=F.length;F.push(k);e:for(;0<W;){var Y=W-1>>>1,se=F[Y];if(0<r(se,k))F[Y]=k,F[W]=se,W=Y;else break e}}function t(F){return F.length===0?null:F[0]}function i(F){if(F.length===0)return null;var k=F[0],W=F.pop();if(W!==k){F[0]=W;e:for(var Y=0,se=F.length,Ce=se>>>1;Y<Ce;){var q=2*(Y+1)-1,ie=F[q],he=q+1,ae=F[he];if(0>r(ie,W))he<se&&0>r(ae,ie)?(F[Y]=ae,F[he]=W,Y=he):(F[Y]=ie,F[q]=W,Y=q);else if(he<se&&0>r(ae,W))F[Y]=ae,F[he]=W,Y=he;else break e}}return k}function r(F,k){var W=F.sortIndex-k.sortIndex;return W!==0?W:F.id-k.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,f=null,p=3,m=!1,v=!1,A=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(F){for(var k=t(c);k!==null;){if(k.callback===null)i(c);else if(k.startTime<=F)i(c),k.sortIndex=k.expirationTime,e(l,k);else break;k=t(c)}}function w(F){if(A=!1,_(F),!v)if(t(l)!==null)v=!0,re(I);else{var k=t(c);k!==null&&ge(w,k.startTime-F)}}function I(F,k){v=!1,A&&(A=!1,g(B),B=-1),m=!0;var W=p;try{for(_(k),f=t(l);f!==null&&(!(f.expirationTime>k)||F&&!U());){var Y=f.callback;if(typeof Y=="function"){f.callback=null,p=f.priorityLevel;var se=Y(f.expirationTime<=k);k=n.unstable_now(),typeof se=="function"?f.callback=se:f===t(l)&&i(l),_(k)}else i(l);f=t(l)}if(f!==null)var Ce=!0;else{var q=t(c);q!==null&&ge(w,q.startTime-k),Ce=!1}return Ce}finally{f=null,p=W,m=!1}}var T=!1,P=null,B=-1,R=5,C=-1;function U(){return!(n.unstable_now()-C<R)}function j(){if(P!==null){var F=n.unstable_now();C=F;var k=!0;try{k=P(!0,F)}finally{k?K():(T=!1,P=null)}}else T=!1}var K;if(typeof S=="function")K=function(){S(j)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,de=te.port2;te.port1.onmessage=j,K=function(){de.postMessage(null)}}else K=function(){x(j,0)};function re(F){P=F,T||(T=!0,K())}function ge(F,k){B=x(function(){F(n.unstable_now())},k)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,re(I))},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(F){switch(p){case 1:case 2:case 3:var k=3;break;default:k=p}var W=p;p=k;try{return F()}finally{p=W}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(F,k){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var W=p;p=F;try{return k()}finally{p=W}},n.unstable_scheduleCallback=function(F,k,W){var Y=n.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?Y+W:Y):W=Y,F){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=W+se,F={id:h++,callback:k,priorityLevel:F,startTime:W,expirationTime:se,sortIndex:-1},W>Y?(F.sortIndex=W,e(c,F),t(l)===null&&F===t(c)&&(A?(g(B),B=-1):A=!0,ge(w,W-Y))):(F.sortIndex=se,e(l,F),v||m||(v=!0,re(I))),F},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(F){var k=p;return function(){var W=p;p=k;try{return F.apply(this,arguments)}finally{p=W}}}})(O2);U2.exports=O2;var uC=U2.exports;const SS={},R4=n=>void Object.assign(SS,n);function I4(n,e){function t(h,{args:f=[],attach:p,...m},v){let A=`${h[0].toUpperCase()}${h.slice(1)}`,x;if(h==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const g=m.object;x=hc(g,{type:h,root:v,attach:p,primitive:!0})}else{const g=SS[A];if(!g)throw new Error(`R3F: ${A} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(f))throw new Error("R3F: The args prop must be an array!");x=hc(new g(...f),{type:h,root:v,attach:p,memoizedProps:{args:f}})}return x.__r3f.attach===void 0&&(x.isBufferGeometry?x.__r3f.attach="geometry":x.isMaterial&&(x.__r3f.attach="material")),A!=="inject"&&Yy(x,m),x}function i(h,f){let p=!1;if(f){var m,v;(m=f.__r3f)!=null&&m.attach?Ky(h,f,f.__r3f.attach):f.isObject3D&&h.isObject3D&&(h.add(f),p=!0),p||(v=h.__r3f)==null||v.objects.push(f),f.__r3f||hc(f,{}),f.__r3f.parent=h,B_(f),fc(f)}}function r(h,f,p){let m=!1;if(f){var v,A;if((v=f.__r3f)!=null&&v.attach)Ky(h,f,f.__r3f.attach);else if(f.isObject3D&&h.isObject3D){f.parent=h,f.dispatchEvent({type:"added"}),h.dispatchEvent({type:"childadded",child:f});const x=h.children.filter(S=>S!==f),g=x.indexOf(p);h.children=[...x.slice(0,g),f,...x.slice(g)],m=!0}m||(A=h.__r3f)==null||A.objects.push(f),f.__r3f||hc(f,{}),f.__r3f.parent=h,B_(f),fc(f)}}function s(h,f,p=!1){h&&[...h].forEach(m=>o(f,m,p))}function o(h,f,p){if(f){var m,v,A;if(f.__r3f&&(f.__r3f.parent=null),(m=h.__r3f)!=null&&m.objects&&(h.__r3f.objects=h.__r3f.objects.filter(w=>w!==f)),(v=f.__r3f)!=null&&v.attach)mC(h,f,f.__r3f.attach);else if(f.isObject3D&&h.isObject3D){var x;h.remove(f),(x=f.__r3f)!=null&&x.root&&O4(hm(f),f)}const S=(A=f.__r3f)==null?void 0:A.primitive,_=!S&&(p===void 0?f.dispose!==null:p);if(!S){var g;s((g=f.__r3f)==null?void 0:g.objects,f,_),s(f.children,f,_)}if(delete f.__r3f,_&&f.dispose&&f.type!=="Scene"){const w=()=>{try{f.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?uC.unstable_scheduleCallback(uC.unstable_IdlePriority,w):w()}fc(h)}}function a(h,f,p,m){var v;const A=(v=h.__r3f)==null?void 0:v.parent;if(!A)return;const x=t(f,p,h.__r3f.root);if(h.children){for(const g of h.children)g.__r3f&&i(x,g);h.children=h.children.filter(g=>!g.__r3f)}h.__r3f.objects.forEach(g=>i(x,g)),h.__r3f.objects=[],h.__r3f.autoRemovedBeforeAppend||o(A,h),x.parent&&(x.__r3f.autoRemovedBeforeAppend=!0),i(A,x),x.raycast&&x.__r3f.eventCount&&hm(x).getState().internal.interaction.push(x),[m,m.alternate].forEach(g=>{g!==null&&(g.stateNode=x,g.ref&&(typeof g.ref=="function"?g.ref(x):g.ref.current=x))})}const l=()=>{};return{reconciler:T4({createInstance:t,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(h,f)=>{if(!f)return;const p=h.getState().scene;p.__r3f&&(p.__r3f.root=h,i(p,f))},removeChildFromContainer:(h,f)=>{f&&o(h.getState().scene,f)},insertInContainerBefore:(h,f,p)=>{if(!f||!p)return;const m=h.getState().scene;m.__r3f&&r(m,f,p)},getRootHostContext:()=>null,getChildHostContext:h=>h,finalizeInitialChildren(h){var f;return!!((f=h==null?void 0:h.__r3f)!=null?f:{}).handlers},prepareUpdate(h,f,p,m){var v;if(((v=h==null?void 0:h.__r3f)!=null?v:{}).primitive&&m.object&&m.object!==h)return[!0];{const{args:x=[],children:g,...S}=m,{args:_=[],children:w,...I}=p;if(!Array.isArray(x))throw new Error("R3F: the args prop must be an array!");if(x.some((P,B)=>P!==_[B]))return[!0];const T=j2(h,S,I,!0);return T.changes.length?[!1,T]:null}},commitUpdate(h,[f,p],m,v,A,x){f?a(h,m,A,x):Yy(h,p)},commitMount(h,f,p,m){var v;const A=(v=h.__r3f)!=null?v:{};h.raycast&&A.handlers&&A.eventCount&&hm(h).getState().internal.interaction.push(h)},getPublicInstance:h=>h,prepareForCommit:()=>null,preparePortalMount:h=>hc(h.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(h){var f;const{attach:p,parent:m}=(f=h.__r3f)!=null?f:{};p&&m&&mC(m,h,p),h.isObject3D&&(h.visible=!1),fc(h)},unhideInstance(h,f){var p;const{attach:m,parent:v}=(p=h.__r3f)!=null?p:{};m&&v&&Ky(v,h,m),(h.isObject3D&&f.visible==null||f.visible)&&(h.visible=!0),fc(h)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():Ic.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&rn.fun(performance.now)?performance.now:rn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:rn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:rn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:Yy}}var dC,hC;const Jy=n=>"colorSpace"in n||"outputColorSpace"in n,k2=()=>{var n;return(n=SS.ColorManagement)!=null?n:null},z2=n=>n&&n.isOrthographicCamera,P4=n=>n&&n.hasOwnProperty("current"),Bh=typeof window<"u"&&((dC=window.document)!=null&&dC.createElement||((hC=window.navigator)==null?void 0:hC.product)==="ReactNative")?H.useLayoutEffect:H.useEffect;function H2(n){const e=H.useRef(n);return Bh(()=>void(e.current=n),[n]),e}function B4({set:n}){return Bh(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class G2 extends H.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}G2.getDerivedStateFromError=()=>({error:!0});const V2="__default",fC=new Map,L4=n=>n&&!!n.memoized&&!!n.changes;function W2(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const $u=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function hm(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const rn={obj:n=>n===Object(n)&&!rn.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(rn.str(n)||rn.num(n)||rn.boo(n))return n===e;const s=rn.obj(n);if(s&&i==="reference")return n===e;const o=rn.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(a in r?e:n)if(!rn.equ(n[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:n)if(n[a]!==e[a])return!1;if(rn.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function D4(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function N4(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function hc(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function P_(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),r=i.pop();return t=i.reduce((s,o)=>s[o],n),{target:t,key:r}}else return{target:t,key:e}}const pC=/-\d+$/;function Ky(n,e,t){if(rn.str(t)){if(pC.test(t)){const s=t.replace(pC,""),{target:o,key:a}=P_(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:i,key:r}=P_(n,t);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=t(n,e)}function mC(n,e,t){var i,r;if(rn.str(t)){const{target:s,key:o}=P_(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(r=e.__r3f)==null||delete r.previousAttach}function j2(n,{children:e,key:t,ref:i,...r},{children:s,key:o,ref:a,...l}={},c=!1){const h=n.__r3f,f=Object.entries(r),p=[];if(c){const v=Object.keys(l);for(let A=0;A<v.length;A++)r.hasOwnProperty(v[A])||f.unshift([v[A],V2+"remove"])}f.forEach(([v,A])=>{var x;if((x=n.__r3f)!=null&&x.primitive&&v==="object"||rn.equ(A,l[v]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(v))return p.push([v,A,!0,[]]);let g=[];v.includes("-")&&(g=v.split("-")),p.push([v,A,!1,g]);for(const S in r){const _=r[S];S.startsWith(`${v}-`)&&p.push([S,_,!1,S.split("-")])}});const m={...r};return h!=null&&h.memoizedProps&&h!=null&&h.memoizedProps.args&&(m.args=h.memoizedProps.args),h!=null&&h.memoizedProps&&h!=null&&h.memoizedProps.attach&&(m.attach=h.memoizedProps.attach),{memoized:m,changes:p}}const F4=typeof process<"u"&&!1;function Yy(n,e){var t;const i=n.__r3f,r=i==null?void 0:i.root,s=r==null||r.getState==null?void 0:r.getState(),{memoized:o,changes:a}=L4(e)?e:j2(n,e),l=i==null?void 0:i.eventCount;n.__r3f&&(n.__r3f.memoizedProps=o);for(let p=0;p<a.length;p++){let[m,v,A,x]=a[p];if(Jy(n)){const w="srgb",I="srgb-linear";m==="encoding"?(m="colorSpace",v=v===3001?w:I):m==="outputEncoding"&&(m="outputColorSpace",v=v===3001?w:I)}let g=n,S=g[m];if(x.length&&(S=x.reduce((_,w)=>_[w],n),!(S&&S.set))){const[_,...w]=x.reverse();g=w.reverse().reduce((I,T)=>I[T],n),m=_}if(v===V2+"remove")if(g.constructor){let _=fC.get(g.constructor);_||(_=new g.constructor,fC.set(g.constructor,_)),v=_[m]}else v=0;if(A&&i)v?i.handlers[m]=v:delete i.handlers[m],i.eventCount=Object.keys(i.handlers).length;else if(S&&S.set&&(S.copy||S instanceof ll)){if(Array.isArray(v))S.fromArray?S.fromArray(v):S.set(...v);else if(S.copy&&v&&v.constructor&&(F4?S.constructor.name===v.constructor.name:S.constructor===v.constructor))S.copy(v);else if(v!==void 0){var c;const _=(c=S)==null?void 0:c.isColor;!_&&S.setScalar?S.setScalar(v):S instanceof ll&&v instanceof ll?S.mask=v.mask:S.set(v),!k2()&&s&&!s.linear&&_&&S.convertSRGBToLinear()}}else{var h;if(g[m]=v,(h=g[m])!=null&&h.isTexture&&g[m].format===Ei&&g[m].type===Zr&&s){const _=g[m];Jy(_)&&Jy(s.gl)?_.colorSpace=s.gl.outputColorSpace:_.encoding=s.gl.outputEncoding}}fc(n)}if(i&&i.parent&&n.raycast&&l!==i.eventCount){const p=hm(n).getState().internal,m=p.interaction.indexOf(n);m>-1&&p.interaction.splice(m,1),i.eventCount&&p.interaction.push(n)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(t=n.__r3f)!=null&&t.parent&&B_(n),n}function fc(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function B_(n){n.onUpdate==null||n.onUpdate(n)}function X2(n,e){n.manual||(z2(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function Gp(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function U4(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Ic.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Ic.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Ic.ContinuousEventPriority;default:return Ic.DefaultEventPriority}}function J2(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function O4(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{J2(t.capturedMap,e,i,r)})}function k4(n){function e(l){const{internal:c}=n.getState(),h=l.offsetX-c.initialClick[0],f=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(h*h+f*f))}function t(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(h=>{var f;return(f=c.__r3f)==null?void 0:f.handlers["onPointer"+h]}))}function i(l,c){const h=n.getState(),f=new Set,p=[],m=c?c(h.internal.interaction):h.internal.interaction;for(let g=0;g<m.length;g++){const S=$u(m[g]);S&&(S.raycaster.camera=void 0)}h.previousRoot||h.events.compute==null||h.events.compute(l,h);function v(g){const S=$u(g);if(!S||!S.events.enabled||S.raycaster.camera===null)return[];if(S.raycaster.camera===void 0){var _;S.events.compute==null||S.events.compute(l,S,(_=S.previousRoot)==null?void 0:_.getState()),S.raycaster.camera===void 0&&(S.raycaster.camera=null)}return S.raycaster.camera?S.raycaster.intersectObject(g,!0):[]}let A=m.flatMap(v).sort((g,S)=>{const _=$u(g.object),w=$u(S.object);return!_||!w?g.distance-S.distance:w.events.priority-_.events.priority||g.distance-S.distance}).filter(g=>{const S=Gp(g);return f.has(S)?!1:(f.add(S),!0)});h.events.filter&&(A=h.events.filter(A,h));for(const g of A){let S=g.object;for(;S;){var x;(x=S.__r3f)!=null&&x.eventCount&&p.push({...g,eventObject:S}),S=S.parent}}if("pointerId"in l&&h.internal.capturedMap.has(l.pointerId))for(let g of h.internal.capturedMap.get(l.pointerId).values())f.has(Gp(g.intersection))||p.push(g.intersection);return p}function r(l,c,h,f){const p=n.getState();if(l.length){const m={stopped:!1};for(const v of l){const A=$u(v.object)||p,{raycaster:x,pointer:g,camera:S,internal:_}=A,w=new D(g.x,g.y,0).unproject(S),I=C=>{var U,j;return(U=(j=_.capturedMap.get(C))==null?void 0:j.has(v.eventObject))!=null?U:!1},T=C=>{const U={intersection:v,target:c.target};_.capturedMap.has(C)?_.capturedMap.get(C).set(v.eventObject,U):_.capturedMap.set(C,new Map([[v.eventObject,U]])),c.target.setPointerCapture(C)},P=C=>{const U=_.capturedMap.get(C);U&&J2(_.capturedMap,v.eventObject,U,C)};let B={};for(let C in c){let U=c[C];typeof U!="function"&&(B[C]=U)}let R={...v,...B,pointer:g,intersections:l,stopped:m.stopped,delta:h,unprojectedPoint:w,ray:x.ray,camera:S,stopPropagation(){const C="pointerId"in c&&_.capturedMap.get(c.pointerId);if((!C||C.has(v.eventObject))&&(R.stopped=m.stopped=!0,_.hovered.size&&Array.from(_.hovered.values()).find(U=>U.eventObject===v.eventObject))){const U=l.slice(0,l.indexOf(v));s([...U,v])}},target:{hasPointerCapture:I,setPointerCapture:T,releasePointerCapture:P},currentTarget:{hasPointerCapture:I,setPointerCapture:T,releasePointerCapture:P},nativeEvent:c};if(f(R),m.stopped===!0)break}}return l}function s(l){const{internal:c}=n.getState();for(const h of c.hovered.values())if(!l.length||!l.find(f=>f.object===h.object&&f.index===h.index&&f.instanceId===h.instanceId)){const p=h.eventObject.__r3f,m=p==null?void 0:p.handlers;if(c.hovered.delete(Gp(h)),p!=null&&p.eventCount){const v={...h,intersections:l};m.onPointerOut==null||m.onPointerOut(v),m.onPointerLeave==null||m.onPointerLeave(v)}}}function o(l,c){for(let h=0;h<c.length;h++){const f=c[h].__r3f;f==null||f.handlers.onPointerMissed==null||f.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:h}=n.getState();"pointerId"in c&&h.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{h.capturedMap.has(c.pointerId)&&(h.capturedMap.delete(c.pointerId),s([]))})}}return function(h){const{onPointerMissed:f,internal:p}=n.getState();p.lastEvent.current=h;const m=l==="onPointerMove",v=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",x=i(h,m?t:void 0),g=v?e(h):0;l==="onPointerDown"&&(p.initialClick=[h.offsetX,h.offsetY],p.initialHits=x.map(_=>_.eventObject)),v&&!x.length&&g<=2&&(o(h,p.interaction),f&&f(h)),m&&s(x);function S(_){const w=_.eventObject,I=w.__r3f,T=I==null?void 0:I.handlers;if(I!=null&&I.eventCount)if(m){if(T.onPointerOver||T.onPointerEnter||T.onPointerOut||T.onPointerLeave){const P=Gp(_),B=p.hovered.get(P);B?B.stopped&&_.stopPropagation():(p.hovered.set(P,_),T.onPointerOver==null||T.onPointerOver(_),T.onPointerEnter==null||T.onPointerEnter(_))}T.onPointerMove==null||T.onPointerMove(_)}else{const P=T[l];P?(!v||p.initialHits.includes(w))&&(o(h,p.interaction.filter(B=>!p.initialHits.includes(B))),P(_)):v&&p.initialHits.includes(w)&&o(h,p.interaction.filter(B=>!p.initialHits.includes(B)))}}r(x,h,g,S)}}return{handlePointer:a}}const z4=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],K2=n=>!!(n!=null&&n.render),MS=H.createContext(null),H4=(n,e)=>{const t=B2((a,l)=>{const c=new D,h=new D,f=new D;function p(g=l().camera,S=h,_=l().size){const{width:w,height:I,top:T,left:P}=_,B=w/I;S.isVector3?f.copy(S):f.set(...S);const R=g.getWorldPosition(c).distanceTo(f);if(z2(g))return{width:w/g.zoom,height:I/g.zoom,top:T,left:P,factor:1,distance:R,aspect:B};{const C=g.fov*Math.PI/180,U=2*Math.tan(C/2)*R,j=U*(w/I);return{width:j,height:U,top:T,left:P,factor:w/j,distance:R,aspect:B}}}let m;const v=g=>a(S=>({performance:{...S.performance,current:g}})),A=new ue;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(g=1)=>n(l(),g),advance:(g,S)=>e(g,S,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new gS,pointer:A,mouse:A,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const g=l();m&&clearTimeout(m),g.performance.current!==g.performance.min&&v(g.performance.min),m=setTimeout(()=>v(l().performance.max),g.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:g=>a(S=>({...S,events:{...S.events,...g}})),setSize:(g,S,_,w,I)=>{const T=l().camera,P={width:g,height:S,top:w||0,left:I||0,updateStyle:_};a(B=>({size:P,viewport:{...B.viewport,...p(T,h,P)}}))},setDpr:g=>a(S=>{const _=W2(g);return{viewport:{...S.viewport,dpr:_,initialDpr:S.viewport.initialDpr||_}}}),setFrameloop:(g="always")=>{const S=l().clock;S.stop(),S.elapsedTime=0,g!=="never"&&(S.start(),S.elapsedTime=0),a(()=>({frameloop:g}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:H.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(g,S,_)=>{const w=l().internal;return w.priority=w.priority+(S>0?1:0),w.subscribers.push({ref:g,priority:S,store:_}),w.subscribers=w.subscribers.sort((I,T)=>I.priority-T.priority),()=>{const I=l().internal;I!=null&&I.subscribers&&(I.priority=I.priority-(S>0?1:0),I.subscribers=I.subscribers.filter(T=>T.ref!==g))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:h,set:f}=t.getState();if(l.width!==r.width||l.height!==r.height||c.dpr!==s){var p;r=l,s=c.dpr,X2(a,l),h.setPixelRatio(c.dpr);const m=(p=l.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&h.domElement instanceof HTMLCanvasElement;h.setSize(l.width,l.height,m)}a!==o&&(o=a,f(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let Vp,G4=new Set,V4=new Set,W4=new Set;function Qy(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function ed(n,e){switch(n){case"before":return Qy(G4,e);case"after":return Qy(V4,e);case"tail":return Qy(W4,e)}}let qy,Zy;function $y(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),qy=e.internal.subscribers,Vp=0;Vp<qy.length;Vp++)Zy=qy[Vp],Zy.ref.current(Zy.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function j4(n){let e=!1,t=!1,i,r,s;function o(c){r=requestAnimationFrame(o),e=!0,i=0,ed("before",c),t=!0;for(const f of n.values()){var h;s=f.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((h=s.gl.xr)!=null&&h.isPresenting)&&(i+=$y(c,s))}if(t=!1,ed("after",c),i===0)return ed("tail",c),e=!1,cancelAnimationFrame(r)}function a(c,h=1){var f;if(!c)return n.forEach(p=>a(p.store.getState(),h));(f=c.gl.xr)!=null&&f.isPresenting||!c.internal.active||c.frameloop==="never"||(h>1?c.internal.frames=Math.min(60,c.internal.frames+h):t?c.internal.frames=2:c.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function l(c,h=!0,f,p){if(h&&ed("before",c),f)$y(c,f,p);else for(const m of n.values())$y(c,m.store.getState());h&&ed("after",c)}return{loop:o,invalidate:a,advance:l}}function A0(){const n=H.useContext(MS);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Fn(n=t=>t,e){return A0()(n,e)}function Vn(n,e=0){const t=A0(),i=t.getState().internal.subscribe,r=H2(n);return Bh(()=>i(r,e,t),[e,i,t]),null}const gC=new WeakMap;function Y2(n,e){return function(t,...i){let r=gC.get(t);return r||(r=new t,gC.set(t,r)),n&&n(r),Promise.all(i.map(s=>new Promise((o,a)=>r.load(s,l=>{l.scene&&Object.assign(l,D4(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l==null?void 0:l.message}`))))))}}function hu(n,e,t,i){const r=Array.isArray(e)?e:[e],s=N2(Y2(t,i),[n,...r],{equal:rn.equ});return Array.isArray(e)?s:s[0]}hu.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return S4(Y2(t),[n,...i])};hu.clear=function(n,e){const t=Array.isArray(e)?e:[e];return M4([n,...t])};const eu=new Map,{invalidate:vC,advance:yC}=j4(eu),{reconciler:uh,applyProps:uc}=I4(eu,U4),dc={objects:"shallow",strict:!1},X4=(n,e)=>{const t=typeof n=="function"?n(e):n;return K2(t)?t:new VI({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function J4(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:i,height:r,top:s,left:o,updateStyle:a=t}=e;return{width:i,height:r,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:i,height:r,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:i,height:r,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function K4(n){const e=eu.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||H4(vC,yC),o=t||uh.createContainer(s,Ic.ConcurrentRoot,null,!1,null,"",r,null);e||eu.set(n,{fiber:o,store:s});let a,l=!1,c;return{configure(h={}){let{gl:f,size:p,scene:m,events:v,onCreated:A,shadows:x=!1,linear:g=!1,flat:S=!1,legacy:_=!1,orthographic:w=!1,frameloop:I="always",dpr:T=[1,2],performance:P,raycaster:B,camera:R,onPointerMissed:C}=h,U=s.getState(),j=U.gl;U.gl||U.set({gl:j=X4(f,n)});let K=U.raycaster;K||U.set({raycaster:K=new _S});const{params:te,...de}=B||{};if(rn.equ(de,K,dc)||uc(K,{...de}),rn.equ(te,K.params,dc)||uc(K,{params:{...K.params,...te}}),!U.camera||U.camera===c&&!rn.equ(c,R,dc)){c=R;const W=R instanceof Sh,Y=W?R:w?new ys(0,0,0,0,.1,1e3):new yn(75,0,.1,1e3);W||(Y.position.z=5,R&&(uc(Y,R),("aspect"in R||"left"in R||"right"in R||"bottom"in R||"top"in R)&&(Y.manual=!0,Y.updateProjectionMatrix())),!U.camera&&!(R!=null&&R.rotation)&&Y.lookAt(0,0,0)),U.set({camera:Y}),K.camera=Y}if(!U.scene){let W;m!=null&&m.isScene?W=m:(W=new tS,m&&uc(W,m)),U.set({scene:hc(W)})}if(!U.xr){var re;const W=(Ce,q)=>{const ie=s.getState();ie.frameloop!=="never"&&yC(Ce,!0,ie,q)},Y=()=>{const Ce=s.getState();Ce.gl.xr.enabled=Ce.gl.xr.isPresenting,Ce.gl.xr.setAnimationLoop(Ce.gl.xr.isPresenting?W:null),Ce.gl.xr.isPresenting||vC(Ce)},se={connect(){const Ce=s.getState().gl;Ce.xr.addEventListener("sessionstart",Y),Ce.xr.addEventListener("sessionend",Y)},disconnect(){const Ce=s.getState().gl;Ce.xr.removeEventListener("sessionstart",Y),Ce.xr.removeEventListener("sessionend",Y)}};typeof((re=j.xr)==null?void 0:re.addEventListener)=="function"&&se.connect(),U.set({xr:se})}if(j.shadowMap){const W=j.shadowMap.enabled,Y=j.shadowMap.type;if(j.shadowMap.enabled=!!x,rn.boo(x))j.shadowMap.type=Ed;else if(rn.str(x)){var ge;const se={basic:zR,percentage:Wg,soft:Ed,variance:Wr};j.shadowMap.type=(ge=se[x])!=null?ge:Ed}else rn.obj(x)&&Object.assign(j.shadowMap,x);(W!==j.shadowMap.enabled||Y!==j.shadowMap.type)&&(j.shadowMap.needsUpdate=!0)}const F=k2();F&&("enabled"in F?F.enabled=!_:"legacyMode"in F&&(F.legacyMode=_)),l||uc(j,{outputEncoding:g?3e3:3001,toneMapping:S?vs:DA}),U.legacy!==_&&U.set(()=>({legacy:_})),U.linear!==g&&U.set(()=>({linear:g})),U.flat!==S&&U.set(()=>({flat:S})),f&&!rn.fun(f)&&!K2(f)&&!rn.equ(f,j,dc)&&uc(j,f),v&&!U.events.handlers&&U.set({events:v(s)});const k=J4(n,p);return rn.equ(k,U.size,dc)||U.setSize(k.width,k.height,k.updateStyle,k.top,k.left),T&&U.viewport.dpr!==W2(T)&&U.setDpr(T),U.frameloop!==I&&U.setFrameloop(I),U.onPointerMissed||U.set({onPointerMissed:C}),P&&!rn.equ(P,U.performance,dc)&&U.set(W=>({performance:{...W.performance,...P}})),a=A,l=!0,this},render(h){return l||this.configure(),uh.updateContainer(L.jsx(Y4,{store:s,children:h,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){Q2(n)}}}function Y4({store:n,children:e,onCreated:t,rootElement:i}){return Bh(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),L.jsx(MS.Provider,{value:n,children:e})}function Q2(n,e){const t=eu.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),uh.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,a,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),N4(r),eu.delete(n)}catch{}},500)})}}function q2(n,e,t){return L.jsx(Q4,{children:n,container:e,state:t},e.uuid)}function Q4({state:n={},children:e,container:t}){const{events:i,size:r,...s}=n,o=A0(),[a]=H.useState(()=>new _S),[l]=H.useState(()=>new ue),c=H.useCallback((f,p)=>{const m={...f};Object.keys(f).forEach(A=>{(z4.includes(A)||f[A]!==p[A]&&p[A])&&delete m[A]});let v;if(p&&r){const A=p.camera;v=f.viewport.getCurrentViewport(A,new D,r),A!==f.camera&&X2(A,r)}return{...m,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...f.events,...p==null?void 0:p.events,...i},size:{...f.size,...r},viewport:{...f.viewport,...v},...s}},[n]),[h]=H.useState(()=>{const f=o.getState();return B2((m,v)=>({...f,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...f.events,...i},size:{...f.size,...r},...s,set:m,get:v,setEvents:A=>m(x=>({...x,events:{...x.events,...A}}))}))});return H.useEffect(()=>{const f=o.subscribe(p=>h.setState(m=>c(p,m)));return()=>{f()}},[c]),H.useEffect(()=>{h.setState(f=>c(o.getState(),f))},[c]),H.useEffect(()=>()=>{h.destroy()},[]),L.jsx(L.Fragment,{children:uh.createPortal(L.jsx(MS.Provider,{value:h,children:e}),h,null)})}uh.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:H.version});const ex={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function q4(n){const{handlePointer:e}=k4(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(ex).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var i;const{set:r,events:s}=n.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:t}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,a])=>{const[l,c]=ex[o];t.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[a]=ex[s];i.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}function xC(n,e){let t;return(...i)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...i),e)}}function Z4({debounce:n,scroll:e,polyfill:t,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=H.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),a=H.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),l=n?typeof n=="number"?n:n.scroll:null,c=n?typeof n=="number"?n:n.resize:null,h=H.useRef(!1);H.useEffect(()=>(h.current=!0,()=>void(h.current=!1)));const[f,p,m]=H.useMemo(()=>{const g=()=>{if(!a.current.element)return;const{left:S,top:_,width:w,height:I,bottom:T,right:P,x:B,y:R}=a.current.element.getBoundingClientRect(),C={left:S,top:_,width:w,height:I,bottom:T,right:P,x:B,y:R};a.current.element instanceof HTMLElement&&i&&(C.height=a.current.element.offsetHeight,C.width=a.current.element.offsetWidth),Object.freeze(C),h.current&&!nG(a.current.lastBounds,C)&&o(a.current.lastBounds=C)};return[g,c?xC(g,c):g,l?xC(g,l):g]},[o,i,l,c]);function v(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(g=>g.removeEventListener("scroll",m,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function A(){a.current.element&&(a.current.resizeObserver=new r(m),a.current.resizeObserver.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(g=>g.addEventListener("scroll",m,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{m()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const x=g=>{!g||g===a.current.element||(v(),a.current.element=g,a.current.scrollContainers=Z2(g),A())};return eG(m,!!e),$4(p),H.useEffect(()=>{v(),A()},[e,m,p]),H.useEffect(()=>v,[]),[x,s,f]}function $4(n){H.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function eG(n,e){H.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function Z2(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...Z2(n.parentElement)]}const tG=["x","y","top","bottom","left","right","width","height"],nG=(n,e)=>tG.every(t=>n[t]===e[t]);var iG=Object.defineProperty,rG=Object.defineProperties,sG=Object.getOwnPropertyDescriptors,_C=Object.getOwnPropertySymbols,oG=Object.prototype.hasOwnProperty,aG=Object.prototype.propertyIsEnumerable,AC=(n,e,t)=>e in n?iG(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,SC=(n,e)=>{for(var t in e||(e={}))oG.call(e,t)&&AC(n,t,e[t]);if(_C)for(var t of _C(e))aG.call(e,t)&&AC(n,t,e[t]);return n},lG=(n,e)=>rG(n,sG(e)),MC,wC;typeof window<"u"&&((MC=window.document)!=null&&MC.createElement||((wC=window.navigator)==null?void 0:wC.product)==="ReactNative")?H.useLayoutEffect:H.useEffect;function $2(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=n.child;for(;i;){const r=$2(i,e,t);if(r)return r;i=i.sibling}}function eP(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const EC=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=EC;return}return EC.apply(this,arguments)};const wS=eP(H.createContext(null));class tP extends H.Component{render(){return H.createElement(wS.Provider,{value:this._reactInternals},this.props.children)}}function cG(){const n=H.useContext(wS);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=H.useId();return H.useMemo(()=>{for(const i of[n,n==null?void 0:n.alternate]){if(!i)continue;const r=$2(i,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[n,e])}function uG(){const n=cG(),[e]=H.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const r=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;r&&r!==wS&&!e.has(r)&&e.set(r,H.useContext(eP(r)))}t=t.return}return e}function dG(){const n=uG();return H.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>H.createElement(e,null,H.createElement(t.Provider,lG(SC({},i),{value:n.get(t)}))),e=>H.createElement(tP,SC({},e))),[n])}const hG=H.forwardRef(function({children:e,fallback:t,resize:i,style:r,gl:s,events:o=q4,eventSource:a,eventPrefix:l,shadows:c,linear:h,flat:f,legacy:p,orthographic:m,frameloop:v,dpr:A,performance:x,raycaster:g,camera:S,scene:_,onPointerMissed:w,onCreated:I,...T},P){H.useMemo(()=>R4(y4),[]);const B=dG(),[R,C]=Z4({scroll:!0,debounce:{scroll:50,resize:0},...i}),U=H.useRef(null),j=H.useRef(null);H.useImperativeHandle(P,()=>U.current);const K=H2(w),[te,de]=H.useState(!1),[re,ge]=H.useState(!1);if(te)throw te;if(re)throw re;const F=H.useRef(null);Bh(()=>{const W=U.current;C.width>0&&C.height>0&&W&&(F.current||(F.current=K4(W)),F.current.configure({gl:s,events:o,shadows:c,linear:h,flat:f,legacy:p,orthographic:m,frameloop:v,dpr:A,performance:x,raycaster:g,camera:S,scene:_,size:C,onPointerMissed:(...Y)=>K.current==null?void 0:K.current(...Y),onCreated:Y=>{Y.events.connect==null||Y.events.connect(a?P4(a)?a.current:a:j.current),l&&Y.setEvents({compute:(se,Ce)=>{const q=se[l+"X"],ie=se[l+"Y"];Ce.pointer.set(q/Ce.size.width*2-1,-(ie/Ce.size.height)*2+1),Ce.raycaster.setFromCamera(Ce.pointer,Ce.camera)}}),I==null||I(Y)}}),F.current.render(L.jsx(B,{children:L.jsx(G2,{set:ge,children:L.jsx(H.Suspense,{fallback:L.jsx(B4,{set:de}),children:e??null})})})))}),H.useEffect(()=>{const W=U.current;if(W)return()=>Q2(W)},[]);const k=a?"none":"auto";return L.jsx("div",{ref:j,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:k,...r},...T,children:L.jsx("div",{ref:R,style:{width:"100%",height:"100%"},children:L.jsx("canvas",{ref:U,style:{display:"block"},children:t})})})}),nP=H.forwardRef(function(e,t){return L.jsx(tP,{children:L.jsx(hG,{...e,ref:t})})});function dh(){return dh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},dh.apply(null,arguments)}const CC=n=>{let e;const t=new Set,i=(c,h)=>{const f=typeof c=="function"?c(e):c;if(!Object.is(f,e)){const p=e;e=h??(typeof f!="object"||f===null)?f:Object.assign({},e,f),t.forEach(m=>m(e,p))}},r=()=>e,a={setState:i,getState:r,getInitialState:()=>l,subscribe:c=>(t.add(c),()=>t.delete(c))},l=e=n(i,r,a);return a},fG=n=>n?CC(n):CC,pG=n=>n;function mG(n,e=pG){const t=As.useSyncExternalStore(n.subscribe,()=>e(n.getState()),()=>e(n.getInitialState()));return As.useDebugValue(t),t}const bC=n=>{const e=fG(n),t=i=>mG(e,i);return Object.assign(t,e),t},ES=n=>n?bC(n):bC,gG=n=>(e,t,i)=>{const r=i.subscribe;return i.subscribe=(o,a,l)=>{let c=o;if(a){const h=(l==null?void 0:l.equalityFn)||Object.is;let f=o(i.getState());c=p=>{const m=o(p);if(!h(f,m)){const v=f;a(f=m,v)}},l!=null&&l.fireImmediately&&a(f,f)}return r(c)},n(e,t,i)},vG=gG,iP=H.createContext(null);function yG({map:n,children:e,onChange:t,domElement:i}){const r=n.map(l=>l.name+l.keys).join("-"),s=H.useMemo(()=>ES(vG(()=>n.reduce((l,c)=>({...l,[c.name]:!1}),{}))),[r]),o=H.useMemo(()=>[s.subscribe,s.getState,s],[r]),a=s.setState;return H.useEffect(()=>{const c=n.map(({name:m,keys:v,up:A})=>({keys:v,up:A,fn:x=>{a({[m]:x}),t&&t(m,x,o[1]())}})).reduce((m,{keys:v,fn:A,up:x=!0})=>(v.forEach(g=>m[g]={fn:A,pressed:!1,up:x}),m),{}),h=({key:m,code:v})=>{const A=c[m]||c[v];if(!A)return;const{fn:x,pressed:g,up:S}=A;A.pressed=!0,(S||!g)&&x(!0)},f=({key:m,code:v})=>{const A=c[m]||c[v];if(!A)return;const{fn:x,up:g}=A;A.pressed=!1,g&&x(!1)},p=i||window;return p.addEventListener("keydown",h,{passive:!0}),p.addEventListener("keyup",f,{passive:!0}),()=>{p.removeEventListener("keydown",h),p.removeEventListener("keyup",f)}},[i,r]),H.createElement(iP.Provider,{value:o,children:e})}function Na(n){const[e,t,i]=H.useContext(iP);return n?i(n):[e,t]}const xG=parseInt(Cl.replace(/\D+/g,""));function TC(n,e){if(e===jA)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===_l||e===_h){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,r=[];if(t)if(e===_l)for(let o=1;o<=i;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2===0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}var _G=Object.defineProperty,AG=(n,e,t)=>e in n?_G(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,SG=(n,e,t)=>(AG(n,e+"",t),t);class MG{constructor(){SG(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}var wG=Object.defineProperty,EG=(n,e,t)=>e in n?wG(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ht=(n,e,t)=>(EG(n,typeof e!="symbol"?e+"":e,t),t);const Wp=new Ss,RC=new Ir,CG=Math.cos(70*(Math.PI/180)),IC=(n,e)=>(n%e+e)%e;let bG=class extends MG{constructor(e,t){super(),ht(this,"object"),ht(this,"domElement"),ht(this,"enabled",!0),ht(this,"target",new D),ht(this,"minDistance",0),ht(this,"maxDistance",1/0),ht(this,"minZoom",0),ht(this,"maxZoom",1/0),ht(this,"minPolarAngle",0),ht(this,"maxPolarAngle",Math.PI),ht(this,"minAzimuthAngle",-1/0),ht(this,"maxAzimuthAngle",1/0),ht(this,"enableDamping",!1),ht(this,"dampingFactor",.05),ht(this,"enableZoom",!0),ht(this,"zoomSpeed",1),ht(this,"enableRotate",!0),ht(this,"rotateSpeed",1),ht(this,"enablePan",!0),ht(this,"panSpeed",1),ht(this,"screenSpacePanning",!0),ht(this,"keyPanSpeed",7),ht(this,"zoomToCursor",!1),ht(this,"autoRotate",!1),ht(this,"autoRotateSpeed",2),ht(this,"reverseOrbit",!1),ht(this,"reverseHorizontalOrbit",!1),ht(this,"reverseVerticalOrbit",!1),ht(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),ht(this,"mouseButtons",{LEFT:za.ROTATE,MIDDLE:za.DOLLY,RIGHT:za.PAN}),ht(this,"touches",{ONE:Ha.ROTATE,TWO:Ha.DOLLY_PAN}),ht(this,"target0"),ht(this,"position0"),ht(this,"zoom0"),ht(this,"_domElementKeyEvents",null),ht(this,"getPolarAngle"),ht(this,"getAzimuthalAngle"),ht(this,"setPolarAngle"),ht(this,"setAzimuthalAngle"),ht(this,"getDistance"),ht(this,"getZoomScale"),ht(this,"listenToKeyEvents"),ht(this,"stopListenToKeyEvents"),ht(this,"saveState"),ht(this,"reset"),ht(this,"update"),ht(this,"connect"),ht(this,"dispose"),ht(this,"dollyIn"),ht(this,"dollyOut"),ht(this,"getScale"),ht(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>h.phi,this.getAzimuthalAngle=()=>h.theta,this.setPolarAngle=J=>{let _e=IC(J,2*Math.PI),ze=h.phi;ze<0&&(ze+=2*Math.PI),_e<0&&(_e+=2*Math.PI);let X=Math.abs(_e-ze);2*Math.PI-X<X&&(_e<ze?_e+=2*Math.PI:ze+=2*Math.PI),f.phi=_e-ze,i.update()},this.setAzimuthalAngle=J=>{let _e=IC(J,2*Math.PI),ze=h.theta;ze<0&&(ze+=2*Math.PI),_e<0&&(_e+=2*Math.PI);let X=Math.abs(_e-ze);2*Math.PI-X<X&&(_e<ze?_e+=2*Math.PI:ze+=2*Math.PI),f.theta=_e-ze,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=J=>{J.addEventListener("keydown",Fe),this._domElementKeyEvents=J},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Fe),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(r),i.update(),l=a.NONE},this.update=(()=>{const J=new D,_e=new D(0,1,0),ze=new on().setFromUnitVectors(e.up,_e),X=ze.clone().invert(),Te=new D,fe=new on,Se=2*Math.PI;return function(){const Oe=i.object.position;ze.setFromUnitVectors(e.up,_e),X.copy(ze).invert(),J.copy(Oe).sub(i.target),J.applyQuaternion(ze),h.setFromVector3(J),i.autoRotate&&l===a.NONE&&te(j()),i.enableDamping?(h.theta+=f.theta*i.dampingFactor,h.phi+=f.phi*i.dampingFactor):(h.theta+=f.theta,h.phi+=f.phi);let ct=i.minAzimuthAngle,Wt=i.maxAzimuthAngle;isFinite(ct)&&isFinite(Wt)&&(ct<-Math.PI?ct+=Se:ct>Math.PI&&(ct-=Se),Wt<-Math.PI?Wt+=Se:Wt>Math.PI&&(Wt-=Se),ct<=Wt?h.theta=Math.max(ct,Math.min(Wt,h.theta)):h.theta=h.theta>(ct+Wt)/2?Math.max(ct,h.theta):Math.min(Wt,h.theta)),h.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,h.phi)),h.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(m,i.dampingFactor):i.target.add(m),i.zoomToCursor&&R||i.object.isOrthographicCamera?h.radius=Ce(h.radius):h.radius=Ce(h.radius*p),J.setFromSpherical(h),J.applyQuaternion(X),Oe.copy(i.target).add(J),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(f.theta*=1-i.dampingFactor,f.phi*=1-i.dampingFactor,m.multiplyScalar(1-i.dampingFactor)):(f.set(0,0,0),m.set(0,0,0));let an=!1;if(i.zoomToCursor&&R){let Dt=null;if(i.object instanceof yn&&i.object.isPerspectiveCamera){const Bn=J.length();Dt=Ce(Bn*p);const hi=Bn-Dt;i.object.position.addScaledVector(P,hi),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const Bn=new D(B.x,B.y,0);Bn.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/p)),i.object.updateProjectionMatrix(),an=!0;const hi=new D(B.x,B.y,0);hi.unproject(i.object),i.object.position.sub(hi).add(Bn),i.object.updateMatrixWorld(),Dt=J.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;Dt!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(Dt).add(i.object.position):(Wp.origin.copy(i.object.position),Wp.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(Wp.direction))<CG?e.lookAt(i.target):(RC.setFromNormalAndCoplanarPoint(i.object.up,i.target),Wp.intersectPlane(RC,i.target))))}else i.object instanceof ys&&i.object.isOrthographicCamera&&(an=p!==1,an&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/p)),i.object.updateProjectionMatrix()));return p=1,R=!1,an||Te.distanceToSquared(i.object.position)>c||8*(1-fe.dot(i.object.quaternion))>c?(i.dispatchEvent(r),Te.copy(i.object.position),fe.copy(i.object.quaternion),an=!1,!0):!1}})(),this.connect=J=>{i.domElement=J,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",be),i.domElement.addEventListener("pointerdown",N),i.domElement.addEventListener("pointercancel",ye),i.domElement.addEventListener("wheel",tt)},this.dispose=()=>{var J,_e,ze,X,Te,fe;i.domElement&&(i.domElement.style.touchAction="auto"),(J=i.domElement)==null||J.removeEventListener("contextmenu",be),(_e=i.domElement)==null||_e.removeEventListener("pointerdown",N),(ze=i.domElement)==null||ze.removeEventListener("pointercancel",ye),(X=i.domElement)==null||X.removeEventListener("wheel",tt),(Te=i.domElement)==null||Te.ownerDocument.removeEventListener("pointermove",ne),(fe=i.domElement)==null||fe.ownerDocument.removeEventListener("pointerup",ye),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",Fe)};const i=this,r={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const c=1e-6,h=new Sg,f=new Sg;let p=1;const m=new D,v=new ue,A=new ue,x=new ue,g=new ue,S=new ue,_=new ue,w=new ue,I=new ue,T=new ue,P=new D,B=new ue;let R=!1;const C=[],U={};function j(){return 2*Math.PI/60/60*i.autoRotateSpeed}function K(){return Math.pow(.95,i.zoomSpeed)}function te(J){i.reverseOrbit||i.reverseHorizontalOrbit?f.theta+=J:f.theta-=J}function de(J){i.reverseOrbit||i.reverseVerticalOrbit?f.phi+=J:f.phi-=J}const re=(()=>{const J=new D;return function(ze,X){J.setFromMatrixColumn(X,0),J.multiplyScalar(-ze),m.add(J)}})(),ge=(()=>{const J=new D;return function(ze,X){i.screenSpacePanning===!0?J.setFromMatrixColumn(X,1):(J.setFromMatrixColumn(X,0),J.crossVectors(i.object.up,J)),J.multiplyScalar(ze),m.add(J)}})(),F=(()=>{const J=new D;return function(ze,X){const Te=i.domElement;if(Te&&i.object instanceof yn&&i.object.isPerspectiveCamera){const fe=i.object.position;J.copy(fe).sub(i.target);let Se=J.length();Se*=Math.tan(i.object.fov/2*Math.PI/180),re(2*ze*Se/Te.clientHeight,i.object.matrix),ge(2*X*Se/Te.clientHeight,i.object.matrix)}else Te&&i.object instanceof ys&&i.object.isOrthographicCamera?(re(ze*(i.object.right-i.object.left)/i.object.zoom/Te.clientWidth,i.object.matrix),ge(X*(i.object.top-i.object.bottom)/i.object.zoom/Te.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function k(J){i.object instanceof yn&&i.object.isPerspectiveCamera||i.object instanceof ys&&i.object.isOrthographicCamera?p=J:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function W(J){k(p/J)}function Y(J){k(p*J)}function se(J){if(!i.zoomToCursor||!i.domElement)return;R=!0;const _e=i.domElement.getBoundingClientRect(),ze=J.clientX-_e.left,X=J.clientY-_e.top,Te=_e.width,fe=_e.height;B.x=ze/Te*2-1,B.y=-(X/fe)*2+1,P.set(B.x,B.y,1).unproject(i.object).sub(i.object.position).normalize()}function Ce(J){return Math.max(i.minDistance,Math.min(i.maxDistance,J))}function q(J){v.set(J.clientX,J.clientY)}function ie(J){se(J),w.set(J.clientX,J.clientY)}function he(J){g.set(J.clientX,J.clientY)}function ae(J){A.set(J.clientX,J.clientY),x.subVectors(A,v).multiplyScalar(i.rotateSpeed);const _e=i.domElement;_e&&(te(2*Math.PI*x.x/_e.clientHeight),de(2*Math.PI*x.y/_e.clientHeight)),v.copy(A),i.update()}function Le(J){I.set(J.clientX,J.clientY),T.subVectors(I,w),T.y>0?W(K()):T.y<0&&Y(K()),w.copy(I),i.update()}function We(J){S.set(J.clientX,J.clientY),_.subVectors(S,g).multiplyScalar(i.panSpeed),F(_.x,_.y),g.copy(S),i.update()}function qe(J){se(J),J.deltaY<0?Y(K()):J.deltaY>0&&W(K()),i.update()}function ke(J){let _e=!1;switch(J.code){case i.keys.UP:F(0,i.keyPanSpeed),_e=!0;break;case i.keys.BOTTOM:F(0,-i.keyPanSpeed),_e=!0;break;case i.keys.LEFT:F(i.keyPanSpeed,0),_e=!0;break;case i.keys.RIGHT:F(-i.keyPanSpeed,0),_e=!0;break}_e&&(J.preventDefault(),i.update())}function me(){if(C.length==1)v.set(C[0].pageX,C[0].pageY);else{const J=.5*(C[0].pageX+C[1].pageX),_e=.5*(C[0].pageY+C[1].pageY);v.set(J,_e)}}function xe(){if(C.length==1)g.set(C[0].pageX,C[0].pageY);else{const J=.5*(C[0].pageX+C[1].pageX),_e=.5*(C[0].pageY+C[1].pageY);g.set(J,_e)}}function V(){const J=C[0].pageX-C[1].pageX,_e=C[0].pageY-C[1].pageY,ze=Math.sqrt(J*J+_e*_e);w.set(0,ze)}function Je(){i.enableZoom&&V(),i.enablePan&&xe()}function Me(){i.enableZoom&&V(),i.enableRotate&&me()}function De(J){if(C.length==1)A.set(J.pageX,J.pageY);else{const ze=Ye(J),X=.5*(J.pageX+ze.x),Te=.5*(J.pageY+ze.y);A.set(X,Te)}x.subVectors(A,v).multiplyScalar(i.rotateSpeed);const _e=i.domElement;_e&&(te(2*Math.PI*x.x/_e.clientHeight),de(2*Math.PI*x.y/_e.clientHeight)),v.copy(A)}function Ie(J){if(C.length==1)S.set(J.pageX,J.pageY);else{const _e=Ye(J),ze=.5*(J.pageX+_e.x),X=.5*(J.pageY+_e.y);S.set(ze,X)}_.subVectors(S,g).multiplyScalar(i.panSpeed),F(_.x,_.y),g.copy(S)}function ot(J){const _e=Ye(J),ze=J.pageX-_e.x,X=J.pageY-_e.y,Te=Math.sqrt(ze*ze+X*X);I.set(0,Te),T.set(0,Math.pow(I.y/w.y,i.zoomSpeed)),W(T.y),w.copy(I)}function Ne(J){i.enableZoom&&ot(J),i.enablePan&&Ie(J)}function z(J){i.enableZoom&&ot(J),i.enableRotate&&De(J)}function N(J){var _e,ze;i.enabled!==!1&&(C.length===0&&((_e=i.domElement)==null||_e.ownerDocument.addEventListener("pointermove",ne),(ze=i.domElement)==null||ze.ownerDocument.addEventListener("pointerup",ye)),Ze(J),J.pointerType==="touch"?Ke(J):we(J))}function ne(J){i.enabled!==!1&&(J.pointerType==="touch"?Tt(J):Ae(J))}function ye(J){var _e,ze,X;ut(J),C.length===0&&((_e=i.domElement)==null||_e.releasePointerCapture(J.pointerId),(ze=i.domElement)==null||ze.ownerDocument.removeEventListener("pointermove",ne),(X=i.domElement)==null||X.ownerDocument.removeEventListener("pointerup",ye)),i.dispatchEvent(o),l=a.NONE}function we(J){let _e;switch(J.button){case 0:_e=i.mouseButtons.LEFT;break;case 1:_e=i.mouseButtons.MIDDLE;break;case 2:_e=i.mouseButtons.RIGHT;break;default:_e=-1}switch(_e){case za.DOLLY:if(i.enableZoom===!1)return;ie(J),l=a.DOLLY;break;case za.ROTATE:if(J.ctrlKey||J.metaKey||J.shiftKey){if(i.enablePan===!1)return;he(J),l=a.PAN}else{if(i.enableRotate===!1)return;q(J),l=a.ROTATE}break;case za.PAN:if(J.ctrlKey||J.metaKey||J.shiftKey){if(i.enableRotate===!1)return;q(J),l=a.ROTATE}else{if(i.enablePan===!1)return;he(J),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function Ae(J){if(i.enabled!==!1)switch(l){case a.ROTATE:if(i.enableRotate===!1)return;ae(J);break;case a.DOLLY:if(i.enableZoom===!1)return;Le(J);break;case a.PAN:if(i.enablePan===!1)return;We(J);break}}function tt(J){i.enabled===!1||i.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(J.preventDefault(),i.dispatchEvent(s),qe(J),i.dispatchEvent(o))}function Fe(J){i.enabled===!1||i.enablePan===!1||ke(J)}function Ke(J){switch(mt(J),C.length){case 1:switch(i.touches.ONE){case Ha.ROTATE:if(i.enableRotate===!1)return;me(),l=a.TOUCH_ROTATE;break;case Ha.PAN:if(i.enablePan===!1)return;xe(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(i.touches.TWO){case Ha.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Je(),l=a.TOUCH_DOLLY_PAN;break;case Ha.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Me(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function Tt(J){switch(mt(J),l){case a.TOUCH_ROTATE:if(i.enableRotate===!1)return;De(J),i.update();break;case a.TOUCH_PAN:if(i.enablePan===!1)return;Ie(J),i.update();break;case a.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Ne(J),i.update();break;case a.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;z(J),i.update();break;default:l=a.NONE}}function be(J){i.enabled!==!1&&J.preventDefault()}function Ze(J){C.push(J)}function ut(J){delete U[J.pointerId];for(let _e=0;_e<C.length;_e++)if(C[_e].pointerId==J.pointerId){C.splice(_e,1);return}}function mt(J){let _e=U[J.pointerId];_e===void 0&&(_e=new ue,U[J.pointerId]=_e),_e.set(J.pageX,J.pageY)}function Ye(J){const _e=J.pointerId===C[0].pointerId?C[1]:C[0];return U[_e.pointerId]}this.dollyIn=(J=K())=>{Y(J),i.update()},this.dollyOut=(J=K())=>{W(J),i.update()},this.getScale=()=>p,this.setScale=J=>{k(J),i.update()},this.getZoomScale=()=>K(),t!==void 0&&this.connect(t),this.update()}};function Mg(n){if(typeof TextDecoder<"u")return new TextDecoder().decode(n);let e="";for(let t=0,i=n.length;t<i;t++)e+=String.fromCharCode(n[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const el="srgb",Zs="srgb-linear",PC=3001,TG=3e3;let CS=class extends di{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new LG(t)}),this.register(function(t){return new DG(t)}),this.register(function(t){return new VG(t)}),this.register(function(t){return new WG(t)}),this.register(function(t){return new jG(t)}),this.register(function(t){return new FG(t)}),this.register(function(t){return new UG(t)}),this.register(function(t){return new OG(t)}),this.register(function(t){return new kG(t)}),this.register(function(t){return new BG(t)}),this.register(function(t){return new zG(t)}),this.register(function(t){return new NG(t)}),this.register(function(t){return new GG(t)}),this.register(function(t){return new HG(t)}),this.register(function(t){return new IG(t)}),this.register(function(t){return new XG(t)}),this.register(function(t){return new JG(t)})}load(e,t,i,r){const s=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const c=dr.extractUrlBase(e);o=dr.resolveURL(c,this.path)}else o=dr.extractUrlBase(e);this.manager.itemStart(e);const a=function(c){r?r(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new ki(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(h){t(h),s.manager.itemEnd(e)},a)}catch(h){a(h)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(Mg(new Uint8Array(e.slice(0,4)))===rP){try{o[Ot.KHR_BINARY_GLTF]=new KG(e)}catch(h){r&&r(h);return}s=JSON.parse(o[Ot.KHR_BINARY_GLTF].content)}else s=JSON.parse(Mg(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new aV(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const h=this.pluginCallbacks[c](l);h.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[h.name]=h,o[h.name]=!0}if(s.extensionsUsed)for(let c=0;c<s.extensionsUsed.length;++c){const h=s.extensionsUsed[c],f=s.extensionsRequired||[];switch(h){case Ot.KHR_MATERIALS_UNLIT:o[h]=new PG;break;case Ot.KHR_DRACO_MESH_COMPRESSION:o[h]=new YG(s,this.dracoLoader);break;case Ot.KHR_TEXTURE_TRANSFORM:o[h]=new QG;break;case Ot.KHR_MESH_QUANTIZATION:o[h]=new qG;break;default:f.indexOf(h)>=0&&a[h]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+h+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}};function RG(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Ot={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};let IG=class{constructor(e){this.parser=e,this.name=Ot.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const h=new Ee(16777215);l.color!==void 0&&h.setRGB(l.color[0],l.color[1],l.color[2],Zs);const f=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new x0(h),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new du(h),c.distance=f;break;case"spot":c=new y0(h),c.distance=f,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,zs(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(c),t.cache.add(i,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return i._getNodeRef(t.cache,a,l)})}},PG=class{constructor(){this.name=Ot.KHR_MATERIALS_UNLIT}getMaterialType(){return Cn}extendParams(e,t,i){const r=[];e.color=new Ee(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],Zs),e.opacity=o[3]}s.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",s.baseColorTexture,el))}return Promise.all(r)}},BG=class{constructor(e){this.parser=e,this.name=Ot.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}},LG=class{constructor(e){this.parser=e,this.name=Ot.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bn}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new ue(a,a)}return Promise.all(s)}},DG=class{constructor(e){this.parser=e,this.name=Ot.KHR_MATERIALS_DISPERSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bn}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}},NG=class{constructor(e){this.parser=e,this.name=Ot.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bn}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}},FG=class{constructor(e){this.parser=e,this.name=Ot.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bn}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Ee(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];if(o.sheenColorFactor!==void 0){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],Zs)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,el)),o.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}},UG=class{constructor(e){this.parser=e,this.name=Ot.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bn}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}},OG=class{constructor(e){this.parser=e,this.name=Ot.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bn}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new Ee().setRGB(a[0],a[1],a[2],Zs),Promise.all(s)}},kG=class{constructor(e){this.parser=e,this.name=Ot.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bn}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}},zG=class{constructor(e){this.parser=e,this.name=Ot.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bn}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new Ee().setRGB(a[0],a[1],a[2],Zs),o.specularColorTexture!==void 0&&s.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,el)),Promise.all(s)}},HG=class{constructor(e){this.parser=e,this.name=Ot.EXT_MATERIALS_BUMP}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bn}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(i.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}},GG=class{constructor(e){this.parser=e,this.name=Ot.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bn}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(i.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}},VG=class{constructor(e){this.parser=e,this.name=Ot.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}},WG=class{constructor(e){this.parser=e,this.name=Ot.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}},jG=class{constructor(e){this.parser=e,this.name=Ot.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}},XG=class{constructor(e){this.name=Ot.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=r.byteOffset||0,c=r.byteLength||0,h=r.count,f=r.byteStride,p=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(h,f,p,r.mode,r.filter).then(function(m){return m.buffer}):o.ready.then(function(){const m=new ArrayBuffer(h*f);return o.decodeGltfBuffer(new Uint8Array(m),h,f,p,r.mode,r.filter),m})})}else return null}},JG=class{constructor(e){this.name=Ot.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const r=t.meshes[i.mesh];for(const c of r.primitives)if(c.mode!==Cr.TRIANGLES&&c.mode!==Cr.TRIANGLE_STRIP&&c.mode!==Cr.TRIANGLE_FAN&&c.mode!==void 0)return null;const o=i.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(h=>(l[c]=h,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const h=c.pop(),f=h.isGroup?h.children:[h],p=c[0].count,m=[];for(const v of f){const A=new Qe,x=new D,g=new on,S=new D(1,1,1),_=new bh(v.geometry,v.material,p);for(let w=0;w<p;w++)l.TRANSLATION&&x.fromBufferAttribute(l.TRANSLATION,w),l.ROTATION&&g.fromBufferAttribute(l.ROTATION,w),l.SCALE&&S.fromBufferAttribute(l.SCALE,w),_.setMatrixAt(w,A.compose(x,g,S));for(const w in l)if(w==="_COLOR_0"){const I=l[w];_.instanceColor=new na(I.array,I.itemSize,I.normalized)}else w!=="TRANSLATION"&&w!=="ROTATION"&&w!=="SCALE"&&v.geometry.setAttribute(w,l[w]);It.prototype.copy.call(_,v),this.parser.assignFinalMaterial(_),m.push(_)}return h.isGroup?(h.clear(),h.add(...m),h):m[0]}))}};const rP="glTF",td=12,BC={JSON:1313821514,BIN:5130562};let KG=class{constructor(e){this.name=Ot.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,td);if(this.header={magic:Mg(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==rP)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-td,r=new DataView(e,td);let s=0;for(;s<i;){const o=r.getUint32(s,!0);s+=4;const a=r.getUint32(s,!0);if(s+=4,a===BC.JSON){const l=new Uint8Array(e,td+s,o);this.content=Mg(l)}else if(a===BC.BIN){const l=td+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}},YG=class{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Ot.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const h in o){const f=L_[h]||h.toLowerCase();a[f]=o[h]}for(const h in e.attributes){const f=L_[h]||h.toLowerCase();if(o[h]!==void 0){const p=i.accessors[e.attributes[h]],m=Oc[p.componentType];c[f]=m.name,l[f]=p.normalized===!0}}return t.getDependency("bufferView",s).then(function(h){return new Promise(function(f,p){r.decodeDracoFile(h,function(m){for(const v in m.attributes){const A=m.attributes[v],x=l[v];x!==void 0&&(A.normalized=x)}f(m)},a,c,Zs,p)})})}},QG=class{constructor(){this.name=Ot.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}},qG=class{constructor(){this.name=Ot.KHR_MESH_QUANTIZATION}},sP=class extends bl{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=i[s+o];return t}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,h=r-t,f=(i-t)/h,p=f*f,m=p*f,v=e*c,A=v-c,x=-2*m+3*p,g=m-p,S=1-x,_=g-p+f;for(let w=0;w!==a;w++){const I=o[A+w+a],T=o[A+w+l]*h,P=o[v+w+a],B=o[v+w]*h;s[w]=S*I+_*T+x*P+g*B}return s}};const ZG=new on;let $G=class extends sP{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return ZG.fromArray(s).normalize().toArray(s),s}};const Cr={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Oc={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},LC={9728:Hn,9729:en,9984:yh,9985:sl,9986:Go,9987:qi},DC={33071:Qi,33648:gl,10497:fr},tx={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},L_={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...xG>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Po={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},eV={CUBICSPLINE:void 0,LINEAR:ta,STEP:xl},nx={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function tV(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new jt({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:qr})),n.DefaultMaterial}function Fa(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function zs(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function nV(n,e,t){let i=!1,r=!1,s=!1;for(let c=0,h=e.length;c<h;c++){const f=e[c];if(f.POSITION!==void 0&&(i=!0),f.NORMAL!==void 0&&(r=!0),f.COLOR_0!==void 0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);const o=[],a=[],l=[];for(let c=0,h=e.length;c<h;c++){const f=e[c];if(i){const p=f.POSITION!==void 0?t.getDependency("accessor",f.POSITION):n.attributes.position;o.push(p)}if(r){const p=f.NORMAL!==void 0?t.getDependency("accessor",f.NORMAL):n.attributes.normal;a.push(p)}if(s){const p=f.COLOR_0!==void 0?t.getDependency("accessor",f.COLOR_0):n.attributes.color;l.push(p)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const h=c[0],f=c[1],p=c[2];return i&&(n.morphAttributes.position=h),r&&(n.morphAttributes.normal=f),s&&(n.morphAttributes.color=p),n.morphTargetsRelative=!0,n})}function iV(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function rV(n){let e;const t=n.extensions&&n.extensions[Ot.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+ix(t.attributes):e=n.indices+":"+ix(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,r=n.targets.length;i<r;i++)e+=":"+ix(n.targets[i]);return e}function ix(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function D_(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function sV(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const oV=new Qe;let aV=class{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new RG,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||r&&s<98?this.textureLoader=new ch(this.options.manager):this.textureLoader=new pS(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new ki(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};return Fa(s,a,r),zs(a,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(const l of a.scenes)l.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,h]of o.children.entries())s(h,a.children[c])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Ot.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){i.load(dr.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const r=t.byteLength||0,s=t.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const o=tx[r.type],a=Oc[r.componentType],l=r.normalized===!0,c=new a(r.count*o);return Promise.resolve(new yt(c,o,l))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=tx[r.type],c=Oc[r.componentType],h=c.BYTES_PER_ELEMENT,f=h*l,p=r.byteOffset||0,m=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,v=r.normalized===!0;let A,x;if(m&&m!==f){const g=Math.floor(p/m),S="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+g+":"+r.count;let _=t.cache.get(S);_||(A=new c(a,g*m,r.count*m/h),_=new cu(A,m/h),t.cache.add(S,_)),x=new so(_,l,p%m/h,v)}else a===null?A=new c(r.count*l):A=new c(a,p,r.count*l),x=new yt(A,l,v);if(r.sparse!==void 0){const g=tx.SCALAR,S=Oc[r.sparse.indices.componentType],_=r.sparse.indices.byteOffset||0,w=r.sparse.values.byteOffset||0,I=new S(o[1],_,r.sparse.count*g),T=new c(o[2],w,r.sparse.count*l);a!==null&&(x=new yt(x.array.slice(),x.itemSize,x.normalized));for(let P=0,B=I.length;P<B;P++){const R=I[P];if(x.setX(R,T[P*l]),l>=2&&x.setY(R,T[P*l+1]),l>=3&&x.setZ(R,T[P*l+2]),l>=4&&x.setW(R,T[P*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return x})}loadTexture(e){const t=this.json,i=this.options,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=i.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,i){const r=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,i).then(function(h){h.flipY=!1,h.name=o.name||a.name||"",h.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(h.name=a.uri);const p=(s.samplers||{})[o.sampler]||{};return h.magFilter=LC[p.magFilter]||en,h.minFilter=LC[p.minFilter]||qi,h.wrapS=DC[p.wrapS]||fr,h.wrapT=DC[p.wrapT]||fr,r.associations.set(h,{textures:e}),h}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const i=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(f=>f.clone());const o=r.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=i.getDependency("bufferView",o.bufferView).then(function(f){c=!0;const p=new Blob([f],{type:o.mimeType});return l=a.createObjectURL(p),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const h=Promise.resolve(l).then(function(f){return new Promise(function(p,m){let v=p;t.isImageBitmapLoader===!0&&(v=function(A){const x=new tn(A);x.needsUpdate=!0,p(x)}),t.load(dr.resolveURL(f,s.path),v,void 0,m)})}).then(function(f){return c===!0&&a.revokeObjectURL(l),zs(f,o),f.userData.mimeType=o.mimeType||sV(o.uri),f}).catch(function(f){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),f});return this.sourceCache[e]=h,h}assignTexture(e,t,i,r){const s=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(o=o.clone(),o.channel=i.texCoord),s.extensions[Ot.KHR_TEXTURE_TRANSFORM]){const a=i.extensions!==void 0?i.extensions[Ot.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[Ot.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return r!==void 0&&(typeof r=="number"&&(r=r===PC?el:Zs),"colorSpace"in o?o.colorSpace=r:o.encoding=r===el?PC:TG),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new Th,mn.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new ui,mn.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(a,l)),i=l}if(r||s||o){let a="ClonedMaterial:"+i.uuid+":";r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return jt}loadMaterial(e){const t=this,i=this.json,r=this.extensions,s=i.materials[e];let o;const a={},l=s.extensions||{},c=[];if(l[Ot.KHR_MATERIALS_UNLIT]){const f=r[Ot.KHR_MATERIALS_UNLIT];o=f.getMaterialType(),c.push(f.extendParams(a,s,t))}else{const f=s.pbrMetallicRoughness||{};if(a.color=new Ee(1,1,1),a.opacity=1,Array.isArray(f.baseColorFactor)){const p=f.baseColorFactor;a.color.setRGB(p[0],p[1],p[2],Zs),a.opacity=p[3]}f.baseColorTexture!==void 0&&c.push(t.assignTexture(a,"map",f.baseColorTexture,el)),a.metalness=f.metallicFactor!==void 0?f.metallicFactor:1,a.roughness=f.roughnessFactor!==void 0?f.roughnessFactor:1,f.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(a,"metalnessMap",f.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",f.metallicRoughnessTexture))),o=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=zn);const h=s.alphaMode||nx.OPAQUE;if(h===nx.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,h===nx.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==Cn&&(c.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new ue(1,1),s.normalTexture.scale!==void 0)){const f=s.normalTexture.scale;a.normalScale.set(f,f)}if(s.occlusionTexture!==void 0&&o!==Cn&&(c.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==Cn){const f=s.emissiveFactor;a.emissive=new Ee().setRGB(f[0],f[1],f[2],Zs)}return s.emissiveTexture!==void 0&&o!==Cn&&c.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,el)),Promise.all(c).then(function(){const f=new o(a);return s.name&&(f.name=s.name),zs(f,s),t.associations.set(f,{materials:e}),s.extensions&&Fa(r,f,s),f})}createUniqueName(e){const t=Gt.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(a){return i[Ot.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return NC(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],h=rV(c),f=r[h];if(f)o.push(f.promise);else{let p;c.extensions&&c.extensions[Ot.KHR_DRACO_MESH_COMPRESSION]?p=s(c):p=NC(new gt,c,t),r[h]={primitive:c,promise:p},o.push(p)}}return Promise.all(o)}loadMesh(e){const t=this,i=this.json,r=this.extensions,s=i.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const h=o[l].material===void 0?tV(this.cache):this.getDependency("material",o[l].material);a.push(h)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),h=l[l.length-1],f=[];for(let m=0,v=h.length;m<v;m++){const A=h[m],x=o[m];let g;const S=c[m];if(x.mode===Cr.TRIANGLES||x.mode===Cr.TRIANGLE_STRIP||x.mode===Cr.TRIANGLE_FAN||x.mode===void 0)g=s.isSkinnedMesh===!0?new i0(A,S):new xt(A,S),g.isSkinnedMesh===!0&&g.normalizeSkinWeights(),x.mode===Cr.TRIANGLE_STRIP?g.geometry=TC(g.geometry,_h):x.mode===Cr.TRIANGLE_FAN&&(g.geometry=TC(g.geometry,_l));else if(x.mode===Cr.LINES)g=new Fr(A,S);else if(x.mode===Cr.LINE_STRIP)g=new Ms(A,S);else if(x.mode===Cr.LINE_LOOP)g=new r0(A,S);else if(x.mode===Cr.POINTS)g=new s0(A,S);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+x.mode);Object.keys(g.geometry.morphAttributes).length>0&&iV(g,s),g.name=t.createUniqueName(s.name||"mesh_"+e),zs(g,s),x.extensions&&Fa(r,g,x),t.assignFinalMaterial(g),f.push(g)}for(let m=0,v=f.length;m<v;m++)t.associations.set(f[m],{meshes:e,primitives:m});if(f.length===1)return s.extensions&&Fa(r,f[0],s),f[0];const p=new Ui;s.extensions&&Fa(r,p,s),t.associations.set(p,{meshes:e});for(let m=0,v=f.length;m<v;m++)p.add(f[m]);return p})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new yn(KA.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(t=new ys(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),zs(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let r=0,s=t.joints.length;r<s;r++)i.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){const s=r.pop(),o=r,a=[],l=[];for(let c=0,h=o.length;c<h;c++){const f=o[c];if(f){a.push(f);const p=new Qe;s!==null&&p.fromArray(s.array,c*16),l.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new uu(a,l)})}loadAnimation(e){const t=this.json,i=this,r=t.animations[e],s=r.name?r.name:"animation_"+e,o=[],a=[],l=[],c=[],h=[];for(let f=0,p=r.channels.length;f<p;f++){const m=r.channels[f],v=r.samplers[m.sampler],A=m.target,x=A.node,g=r.parameters!==void 0?r.parameters[v.input]:v.input,S=r.parameters!==void 0?r.parameters[v.output]:v.output;A.node!==void 0&&(o.push(this.getDependency("node",x)),a.push(this.getDependency("accessor",g)),l.push(this.getDependency("accessor",S)),c.push(v),h.push(A))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c),Promise.all(h)]).then(function(f){const p=f[0],m=f[1],v=f[2],A=f[3],x=f[4],g=[];for(let S=0,_=p.length;S<_;S++){const w=p[S],I=m[S],T=v[S],P=A[S],B=x[S];if(w===void 0)continue;w.updateMatrix&&w.updateMatrix();const R=i._createAnimationTracks(w,I,T,P,B);if(R)for(let C=0;C<R.length;C++)g.push(R[C])}return new Sl(s,void 0,g)})}createNodeMesh(e){const t=this.json,i=this,r=t.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=r.weights.length;l<c;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(e){const t=this.json,i=this,r=t.nodes[e],s=i._loadNodeShallow(e),o=[],a=r.children||[];for(let c=0,h=a.length;c<h;c++)o.push(i.getDependency("node",a[c]));const l=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),l]).then(function(c){const h=c[0],f=c[1],p=c[2];p!==null&&h.traverse(function(m){m.isSkinnedMesh&&m.bind(p,oV)});for(let m=0,v=f.length;m<v;m++)h.add(f[m]);return h})}_loadNodeShallow(e){const t=this.json,i=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?r.createUniqueName(s.name):"",a=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(r.getDependency("camera",s.camera).then(function(c){return r._getNodeRef(r.cameraCache,s.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let h;if(s.isBone===!0?h=new Ch:c.length>1?h=new Ui:c.length===1?h=c[0]:h=new It,h!==c[0])for(let f=0,p=c.length;f<p;f++)h.add(c[f]);if(s.name&&(h.userData.name=s.name,h.name=o),zs(h,s),s.extensions&&Fa(i,h,s),s.matrix!==void 0){const f=new Qe;f.fromArray(s.matrix),h.applyMatrix4(f)}else s.translation!==void 0&&h.position.fromArray(s.translation),s.rotation!==void 0&&h.quaternion.fromArray(s.rotation),s.scale!==void 0&&h.scale.fromArray(s.scale);return r.associations.has(h)||r.associations.set(h,{}),r.associations.get(h).nodes=e,h}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],r=this,s=new Ui;i.name&&(s.name=r.createUniqueName(i.name)),zs(s,i),i.extensions&&Fa(t,s,i);const o=i.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(r.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let h=0,f=l.length;h<f;h++)s.add(l[h]);const c=h=>{const f=new Map;for(const[p,m]of r.associations)(p instanceof mn||p instanceof tn)&&f.set(p,m);return h.traverse(p=>{const m=r.associations.get(p);m!=null&&f.set(p,m)}),f};return r.associations=c(s),s})}_createAnimationTracks(e,t,i,r,s){const o=[],a=e.name?e.name:e.uuid,l=[];Po[s.path]===Po.weights?e.traverse(function(p){p.morphTargetInfluences&&l.push(p.name?p.name:p.uuid)}):l.push(a);let c;switch(Po[s.path]){case Po.weights:c=ao;break;case Po.rotation:c=lo;break;case Po.position:case Po.scale:c=co;break;default:switch(i.itemSize){case 1:c=ao;break;case 2:case 3:default:c=co;break}break}const h=r.interpolation!==void 0?eV[r.interpolation]:ta,f=this._getArrayFromAccessor(i);for(let p=0,m=l.length;p<m;p++){const v=new c(l[p]+"."+Po[s.path],t.array,f,h);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(v),o.push(v)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=D_(t.constructor),r=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)r[s]=t[s]*i;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){const r=this instanceof lo?$G:sP;return new r(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}};function lV(n,e,t){const i=e.attributes,r=new ai;if(i.POSITION!==void 0){const a=t.json.accessors[i.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(r.set(new D(l[0],l[1],l[2]),new D(c[0],c[1],c[2])),a.normalized){const h=D_(Oc[a.componentType]);r.min.multiplyScalar(h),r.max.multiplyScalar(h)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new D,l=new D;for(let c=0,h=s.length;c<h;c++){const f=s[c];if(f.POSITION!==void 0){const p=t.json.accessors[f.POSITION],m=p.min,v=p.max;if(m!==void 0&&v!==void 0){if(l.setX(Math.max(Math.abs(m[0]),Math.abs(v[0]))),l.setY(Math.max(Math.abs(m[1]),Math.abs(v[1]))),l.setZ(Math.max(Math.abs(m[2]),Math.abs(v[2]))),p.normalized){const A=D_(Oc[p.componentType]);l.multiplyScalar(A)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;const o=new Gn;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=o}function NC(n,e,t){const i=e.attributes,r=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in i){const a=L_[o]||o.toLowerCase();a in n.attributes||r.push(s(i[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});r.push(o)}return zs(n,e),lV(n,e,t),Promise.all(r).then(function(){return e.targets!==void 0?nV(n,e.targets,t):n})}const rx=new WeakMap;class cV extends di{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,r){const s=new ki(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(t).catch(r)},i,r)}decodeDracoFile(e,t,i,r){const s={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const c=t.attributeTypes[l];c.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=c.name)}const i=JSON.stringify(t);if(rx.has(e)){const l=rx.get(e);if(l.key===i)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(r=l,new Promise((c,h)=>{r._callbacks[s]={resolve:c,reject:h},r.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),rx.set(e,{key:i,promise:a}),a}_createGeometry(e){const t=new gt;e.index&&t.setIndex(new yt(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const r=e.attributes[i],s=r.name,o=r.array,a=r.itemSize;t.setAttribute(s,new yt(o,a))}return t}_loadLibrary(e,t){const i=new ki(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((r,s)=>{i.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const r=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const s=uV.toString(),o=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const o=s.data;switch(o.type){case"decode":r._callbacks[o.id].resolve(o);break;case"error":r._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function uV(){let n,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(h){n.onModuleLoaded=function(f){h({draco:f})},DracoDecoderModule(n)});break;case"decode":const l=a.buffer,c=a.taskConfig;e.then(h=>{const f=h.draco,p=new f.Decoder,m=new f.DecoderBuffer;m.Init(new Int8Array(l),l.byteLength);try{const v=t(f,p,m,c),A=v.attributes.map(x=>x.array.buffer);v.index&&A.push(v.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:v},A)}catch(v){console.error(v),self.postMessage({type:"error",id:a.id,error:v.message})}finally{f.destroy(m),f.destroy(p)}});break}};function t(o,a,l,c){const h=c.attributeIDs,f=c.attributeTypes;let p,m;const v=a.GetEncodedGeometryType(l);if(v===o.TRIANGULAR_MESH)p=new o.Mesh,m=a.DecodeBufferToMesh(l,p);else if(v===o.POINT_CLOUD)p=new o.PointCloud,m=a.DecodeBufferToPointCloud(l,p);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!m.ok()||p.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+m.error_msg());const A={index:null,attributes:[]};for(const x in h){const g=self[f[x]];let S,_;if(c.useUniqueIDs)_=h[x],S=a.GetAttributeByUniqueId(p,_);else{if(_=a.GetAttributeId(p,o[h[x]]),_===-1)continue;S=a.GetAttribute(p,_)}A.attributes.push(r(o,a,p,x,g,S))}return v===o.TRIANGULAR_MESH&&(A.index=i(o,a,p)),o.destroy(p),A}function i(o,a,l){const h=l.num_faces()*3,f=h*4,p=o._malloc(f);a.GetTrianglesUInt32Array(l,f,p);const m=new Uint32Array(o.HEAPF32.buffer,p,h).slice();return o._free(p),{array:m,itemSize:1}}function r(o,a,l,c,h,f){const p=f.num_components(),v=l.num_points()*p,A=v*h.BYTES_PER_ELEMENT,x=s(o,h),g=o._malloc(A);a.GetAttributeDataArrayForAllPoints(l,f,x,A,g);const S=new h(o.HEAPF32.buffer,g,v).slice();return o._free(g),{name:c,array:S,itemSize:p}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let jp;const sx=()=>{if(jp)return jp;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let r=n;WebAssembly.validate(t)&&(r=e);let s;const o=WebAssembly.instantiate(a(r),{}).then(f=>{s=f.instance,s.exports.__wasm_call_ctors()});function a(f){const p=new Uint8Array(f.length);for(let v=0;v<f.length;++v){const A=f.charCodeAt(v);p[v]=A>96?A-71:A>64?A-65:A>47?A+4:A>46?63:62}let m=0;for(let v=0;v<f.length;++v)p[m++]=p[v]<60?i[p[v]]:(p[v]-60)*64+p[++v];return p.buffer.slice(0,m)}function l(f,p,m,v,A,x){const g=s.exports.sbrk,S=m+3&-4,_=g(S*v),w=g(A.length),I=new Uint8Array(s.exports.memory.buffer);I.set(A,w);const T=f(_,m,v,w,A.length);if(T===0&&x&&x(_,S,v),p.set(I.subarray(_,_+m*v)),g(_-g(0)),T!==0)throw new Error(`Malformed buffer data: ${T}`)}const c={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},h={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return jp={ready:o,supported:!0,decodeVertexBuffer(f,p,m,v,A){l(s.exports.meshopt_decodeVertexBuffer,f,p,m,v,s.exports[c[A]])},decodeIndexBuffer(f,p,m,v){l(s.exports.meshopt_decodeIndexBuffer,f,p,m,v)},decodeIndexSequence(f,p,m,v){l(s.exports.meshopt_decodeIndexSequence,f,p,m,v)},decodeGltfBuffer(f,p,m,v,A,x){l(s.exports[h[A]],f,p,m,v,s.exports[c[x]])}},jp},dV=()=>parseInt(Cl.replace(/\D+/g,"")),hV=dV();var fV=Object.defineProperty,pV=(n,e,t)=>e in n?fV(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Qt=(n,e,t)=>(pV(n,typeof e!="symbol"?e+"":e,t),t);function ox(n,e,t,i,r){let s;if(n=n.subarray||n.slice?n:n.buffer,t=t.subarray||t.slice?t:t.buffer,n=e?n.subarray?n.subarray(e,r&&e+r):n.slice(e,r&&e+r):n,t.set)t.set(n,i);else for(s=0;s<n.length;s++)t[s+i]=n[s];return t}function mV(n){return n instanceof Float32Array?n:n instanceof gt?n.getAttribute("position").array:n.map(e=>{const t=Array.isArray(e);return e instanceof D?[e.x,e.y,e.z]:e instanceof ue?[e.x,e.y,0]:t&&e.length===3?[e[0],e[1],e[2]]:t&&e.length===2?[e[0],e[1],0]:e}).flat()}class gV extends gt{constructor(){super(),Qt(this,"type","MeshLine"),Qt(this,"isMeshLine",!0),Qt(this,"positions",[]),Qt(this,"previous",[]),Qt(this,"next",[]),Qt(this,"side",[]),Qt(this,"width",[]),Qt(this,"indices_array",[]),Qt(this,"uvs",[]),Qt(this,"counters",[]),Qt(this,"widthCallback",null),Qt(this,"_attributes"),Qt(this,"_points",[]),Qt(this,"points"),Qt(this,"matrixWorld",new Qe),Object.defineProperties(this,{points:{enumerable:!0,get(){return this._points},set(e){this.setPoints(e,this.widthCallback)}}})}setMatrixWorld(e){this.matrixWorld=e}setPoints(e,t){if(e=mV(e),this._points=e,this.widthCallback=t??null,this.positions=[],this.counters=[],e.length&&e[0]instanceof D)for(let i=0;i<e.length;i++){const r=e[i],s=i/(e.length-1);this.positions.push(r.x,r.y,r.z),this.positions.push(r.x,r.y,r.z),this.counters.push(s),this.counters.push(s)}else for(let i=0;i<e.length;i+=3){const r=i/(e.length-1);this.positions.push(e[i],e[i+1],e[i+2]),this.positions.push(e[i],e[i+1],e[i+2]),this.counters.push(r),this.counters.push(r)}this.process()}compareV3(e,t){const i=e*6,r=t*6;return this.positions[i]===this.positions[r]&&this.positions[i+1]===this.positions[r+1]&&this.positions[i+2]===this.positions[r+2]}copyV3(e){const t=e*6;return[this.positions[t],this.positions[t+1],this.positions[t+2]]}process(){const e=this.positions.length/6;this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[];let t,i;this.compareV3(0,e-1)?i=this.copyV3(e-2):i=this.copyV3(0),this.previous.push(i[0],i[1],i[2]),this.previous.push(i[0],i[1],i[2]);for(let r=0;r<e;r++){if(this.side.push(1),this.side.push(-1),this.widthCallback?t=this.widthCallback(r/(e-1)):t=1,this.width.push(t),this.width.push(t),this.uvs.push(r/(e-1),0),this.uvs.push(r/(e-1),1),r<e-1){i=this.copyV3(r),this.previous.push(i[0],i[1],i[2]),this.previous.push(i[0],i[1],i[2]);const s=r*2;this.indices_array.push(s,s+1,s+2),this.indices_array.push(s+2,s+1,s+3)}r>0&&(i=this.copyV3(r),this.next.push(i[0],i[1],i[2]),this.next.push(i[0],i[1],i[2]))}this.compareV3(e-1,0)?i=this.copyV3(1):i=this.copyV3(e-1),this.next.push(i[0],i[1],i[2]),this.next.push(i[0],i[1],i[2]),!this._attributes||this._attributes.position.count!==this.counters.length?this._attributes={position:new yt(new Float32Array(this.positions),3),previous:new yt(new Float32Array(this.previous),3),next:new yt(new Float32Array(this.next),3),side:new yt(new Float32Array(this.side),1),width:new yt(new Float32Array(this.width),1),uv:new yt(new Float32Array(this.uvs),2),index:new yt(new Uint16Array(this.indices_array),1),counters:new yt(new Float32Array(this.counters),1)}:(this._attributes.position.copyArray(new Float32Array(this.positions)),this._attributes.position.needsUpdate=!0,this._attributes.previous.copyArray(new Float32Array(this.previous)),this._attributes.previous.needsUpdate=!0,this._attributes.next.copyArray(new Float32Array(this.next)),this._attributes.next.needsUpdate=!0,this._attributes.side.copyArray(new Float32Array(this.side)),this._attributes.side.needsUpdate=!0,this._attributes.width.copyArray(new Float32Array(this.width)),this._attributes.width.needsUpdate=!0,this._attributes.uv.copyArray(new Float32Array(this.uvs)),this._attributes.uv.needsUpdate=!0,this._attributes.index.copyArray(new Uint16Array(this.indices_array)),this._attributes.index.needsUpdate=!0),this.setAttribute("position",this._attributes.position),this.setAttribute("previous",this._attributes.previous),this.setAttribute("next",this._attributes.next),this.setAttribute("side",this._attributes.side),this.setAttribute("width",this._attributes.width),this.setAttribute("uv",this._attributes.uv),this.setAttribute("counters",this._attributes.counters),this.setAttribute("position",this._attributes.position),this.setAttribute("previous",this._attributes.previous),this.setAttribute("next",this._attributes.next),this.setAttribute("side",this._attributes.side),this.setAttribute("width",this._attributes.width),this.setAttribute("uv",this._attributes.uv),this.setAttribute("counters",this._attributes.counters),this.setIndex(this._attributes.index),this.computeBoundingSphere(),this.computeBoundingBox()}advance({x:e,y:t,z:i}){const r=this._attributes.position.array,s=this._attributes.previous.array,o=this._attributes.next.array,a=r.length;ox(r,0,s,0,a),ox(r,6,r,0,a-6),r[a-6]=e,r[a-5]=t,r[a-4]=i,r[a-3]=e,r[a-2]=t,r[a-1]=i,ox(r,6,o,0,a-6),o[a-6]=e,o[a-5]=t,o[a-4]=i,o[a-3]=e,o[a-2]=t,o[a-1]=i,this._attributes.position.needsUpdate=!0,this._attributes.previous.needsUpdate=!0,this._attributes.next.needsUpdate=!0}}const vV=`
  #include <common>
  #include <logdepthbuf_pars_vertex>
  #include <fog_pars_vertex>
  #include <clipping_planes_pars_vertex>

  attribute vec3 previous;
  attribute vec3 next;
  attribute float side;
  attribute float width;
  attribute float counters;
  
  uniform vec2 resolution;
  uniform float lineWidth;
  uniform vec3 color;
  uniform float opacity;
  uniform float sizeAttenuation;
  
  varying vec2 vUV;
  varying vec4 vColor;
  varying float vCounters;
  
  vec2 fix(vec4 i, float aspect) {
    vec2 res = i.xy / i.w;
    res.x *= aspect;
    return res;
  }
  
  void main() {
    float aspect = resolution.x / resolution.y;
    vColor = vec4(color, opacity);
    vUV = uv;
    vCounters = counters;
  
    mat4 m = projectionMatrix * modelViewMatrix;
    vec4 finalPosition = m * vec4(position, 1.0) * aspect;
    vec4 prevPos = m * vec4(previous, 1.0);
    vec4 nextPos = m * vec4(next, 1.0);
  
    vec2 currentP = fix(finalPosition, aspect);
    vec2 prevP = fix(prevPos, aspect);
    vec2 nextP = fix(nextPos, aspect);
  
    float w = lineWidth * width;
  
    vec2 dir;
    if (nextP == currentP) dir = normalize(currentP - prevP);
    else if (prevP == currentP) dir = normalize(nextP - currentP);
    else {
      vec2 dir1 = normalize(currentP - prevP);
      vec2 dir2 = normalize(nextP - currentP);
      dir = normalize(dir1 + dir2);
  
      vec2 perp = vec2(-dir1.y, dir1.x);
      vec2 miter = vec2(-dir.y, dir.x);
      //w = clamp(w / dot(miter, perp), 0., 4. * lineWidth * width);
    }
  
    //vec2 normal = (cross(vec3(dir, 0.), vec3(0., 0., 1.))).xy;
    vec4 normal = vec4(-dir.y, dir.x, 0., 1.);
    normal.xy *= .5 * w;
    //normal *= projectionMatrix;
    if (sizeAttenuation == 0.) {
      normal.xy *= finalPosition.w;
      normal.xy /= (vec4(resolution, 0., 1.) * projectionMatrix).xy * aspect;
    }
  
    finalPosition.xy += normal.xy * side;
    gl_Position = finalPosition;
    #include <logdepthbuf_vertex>
    #include <fog_vertex>
    vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
    #include <clipping_planes_vertex>
    #include <fog_vertex>
  }
`,yV=parseInt(Cl.replace(/\D+/g,"")),xV=yV>=154?"colorspace_fragment":"encodings_fragment",_V=`
  #include <fog_pars_fragment>
  #include <logdepthbuf_pars_fragment>
  #include <clipping_planes_pars_fragment>
  
  uniform sampler2D map;
  uniform sampler2D alphaMap;
  uniform float useGradient;
  uniform float useMap;
  uniform float useAlphaMap;
  uniform float useDash;
  uniform float dashArray;
  uniform float dashOffset;
  uniform float dashRatio;
  uniform float visibility;
  uniform float alphaTest;
  uniform vec2 repeat;
  uniform vec3 gradient[2];
  
  varying vec2 vUV;
  varying vec4 vColor;
  varying float vCounters;
  
  void main() {
    #include <logdepthbuf_fragment>
    vec4 diffuseColor = vColor;
    if (useGradient == 1.) diffuseColor = vec4(mix(gradient[0], gradient[1], vCounters), 1.0);
    if (useMap == 1.) diffuseColor *= texture2D(map, vUV * repeat);
    if (useAlphaMap == 1.) diffuseColor.a *= texture2D(alphaMap, vUV * repeat).a;
    if (diffuseColor.a < alphaTest) discard;
    if (useDash == 1.) diffuseColor.a *= ceil(mod(vCounters + dashOffset, dashArray) - (dashArray * dashRatio));
    diffuseColor.a *= step(vCounters, visibility);
    #include <clipping_planes_fragment>
    gl_FragColor = diffuseColor;     
    #include <fog_fragment>
    #include <tonemapping_fragment>
    #include <${xV}>
  }
`;class AV extends pr{constructor(e){super({uniforms:{...Ue.fog,lineWidth:{value:1},map:{value:null},useMap:{value:0},alphaMap:{value:null},useAlphaMap:{value:0},color:{value:new Ee(16777215)},gradient:{value:[new Ee(16711680),new Ee(65280)]},opacity:{value:1},resolution:{value:new ue(1,1)},sizeAttenuation:{value:1},dashArray:{value:0},dashOffset:{value:0},dashRatio:{value:.5},useDash:{value:0},useGradient:{value:0},visibility:{value:1},alphaTest:{value:0},repeat:{value:new ue(1,1)}},vertexShader:vV,fragmentShader:_V}),Qt(this,"lineWidth"),Qt(this,"map"),Qt(this,"useMap"),Qt(this,"alphaMap"),Qt(this,"useAlphaMap"),Qt(this,"color"),Qt(this,"gradient"),Qt(this,"resolution"),Qt(this,"sizeAttenuation"),Qt(this,"dashArray"),Qt(this,"dashOffset"),Qt(this,"dashRatio"),Qt(this,"useDash"),Qt(this,"useGradient"),Qt(this,"visibility"),Qt(this,"repeat"),this.type="MeshLineMaterial",Object.defineProperties(this,{lineWidth:{enumerable:!0,get(){return this.uniforms.lineWidth.value},set(t){this.uniforms.lineWidth.value=t}},map:{enumerable:!0,get(){return this.uniforms.map.value},set(t){this.uniforms.map.value=t}},useMap:{enumerable:!0,get(){return this.uniforms.useMap.value},set(t){this.uniforms.useMap.value=t}},alphaMap:{enumerable:!0,get(){return this.uniforms.alphaMap.value},set(t){this.uniforms.alphaMap.value=t}},useAlphaMap:{enumerable:!0,get(){return this.uniforms.useAlphaMap.value},set(t){this.uniforms.useAlphaMap.value=t}},color:{enumerable:!0,get(){return this.uniforms.color.value},set(t){this.uniforms.color.value=t}},gradient:{enumerable:!0,get(){return this.uniforms.gradient.value},set(t){this.uniforms.gradient.value=t}},opacity:{enumerable:!0,get(){return this.uniforms.opacity.value},set(t){this.uniforms.opacity.value=t}},resolution:{enumerable:!0,get(){return this.uniforms.resolution.value},set(t){this.uniforms.resolution.value.copy(t)}},sizeAttenuation:{enumerable:!0,get(){return this.uniforms.sizeAttenuation.value},set(t){this.uniforms.sizeAttenuation.value=t}},dashArray:{enumerable:!0,get(){return this.uniforms.dashArray.value},set(t){this.uniforms.dashArray.value=t,this.useDash=t!==0?1:0}},dashOffset:{enumerable:!0,get(){return this.uniforms.dashOffset.value},set(t){this.uniforms.dashOffset.value=t}},dashRatio:{enumerable:!0,get(){return this.uniforms.dashRatio.value},set(t){this.uniforms.dashRatio.value=t}},useDash:{enumerable:!0,get(){return this.uniforms.useDash.value},set(t){this.uniforms.useDash.value=t}},useGradient:{enumerable:!0,get(){return this.uniforms.useGradient.value},set(t){this.uniforms.useGradient.value=t}},visibility:{enumerable:!0,get(){return this.uniforms.visibility.value},set(t){this.uniforms.visibility.value=t}},alphaTest:{enumerable:!0,get(){return this.uniforms.alphaTest.value},set(t){this.uniforms.alphaTest.value=t}},repeat:{enumerable:!0,get(){return this.uniforms.repeat.value},set(t){this.uniforms.repeat.value.copy(t)}}}),this.setValues(e)}copy(e){return super.copy(e),this.lineWidth=e.lineWidth,this.map=e.map,this.useMap=e.useMap,this.alphaMap=e.alphaMap,this.useAlphaMap=e.useAlphaMap,this.color.copy(e.color),this.gradient=e.gradient,this.opacity=e.opacity,this.resolution.copy(e.resolution),this.sizeAttenuation=e.sizeAttenuation,this.dashArray=e.dashArray,this.dashOffset=e.dashOffset,this.dashRatio=e.dashRatio,this.useDash=e.useDash,this.useGradient=e.useGradient,this.visibility=e.visibility,this.alphaTest=e.alphaTest,this.repeat.copy(e.repeat),this}}let Xp=null,oP="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function aP(n=!0,e=!0,t){return i=>{t&&t(i),n&&(Xp||(Xp=new cV),Xp.setDecoderPath(typeof n=="string"?n:oP),i.setDRACOLoader(Xp)),e&&i.setMeshoptDecoder(typeof sx=="function"?sx():sx)}}const tl=(n,e,t,i)=>hu(CS,n,aP(e,t,i));tl.preload=(n,e,t,i)=>hu.preload(CS,n,aP(e,t,i));tl.clear=n=>hu.clear(CS,n);tl.setDecoderPath=n=>{oP=n};function SV(n,e,t){const i=Fn(p=>p.size),r=Fn(p=>p.viewport),s=typeof n=="number"?n:i.width*r.dpr,o=i.height*r.dpr,a=(typeof n=="number"?t:n)||{},{samples:l=0,depth:c,...h}=a,f=H.useMemo(()=>{const p=new ci(s,o,{minFilter:en,magFilter:en,type:aa,...h});return c&&(p.depthTexture=new Eh(s,o,Fi)),p.samples=l,p},[]);return H.useLayoutEffect(()=>{f.setSize(s,o),l&&(f.samples=l)},[l,f,s,o]),H.useEffect(()=>()=>f.dispose(),[]),f}const MV=n=>typeof n=="function",wV=H.forwardRef(({envMap:n,resolution:e=256,frames:t=1/0,makeDefault:i,children:r,...s},o)=>{const a=Fn(({set:x})=>x),l=Fn(({camera:x})=>x),c=Fn(({size:x})=>x),h=H.useRef(null);H.useImperativeHandle(o,()=>h.current,[]);const f=H.useRef(null),p=SV(e);H.useLayoutEffect(()=>{s.manual||(h.current.aspect=c.width/c.height)},[c,s]),H.useLayoutEffect(()=>{h.current.updateProjectionMatrix()});let m=0,v=null;const A=MV(r);return Vn(x=>{A&&(t===1/0||m<t)&&(f.current.visible=!1,x.gl.setRenderTarget(p),v=x.scene.background,n&&(x.scene.background=n),x.gl.render(x.scene,h.current),x.scene.background=v,x.gl.setRenderTarget(null),f.current.visible=!0,m++)}),H.useLayoutEffect(()=>{if(i){const x=l;return a(()=>({camera:h.current})),()=>a(()=>({camera:x}))}},[h,i,a]),H.createElement(H.Fragment,null,H.createElement("perspectiveCamera",dh({ref:h},s),!A&&r),H.createElement("group",{ref:f},A&&r(p.texture)))}),EV=H.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:i,enableDamping:r=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:l,...c},h)=>{const f=Fn(T=>T.invalidate),p=Fn(T=>T.camera),m=Fn(T=>T.gl),v=Fn(T=>T.events),A=Fn(T=>T.setEvents),x=Fn(T=>T.set),g=Fn(T=>T.get),S=Fn(T=>T.performance),_=e||p,w=i||v.connected||m.domElement,I=H.useMemo(()=>new bG(_),[_]);return Vn(()=>{I.enabled&&I.update()},-1),H.useEffect(()=>(s&&I.connect(s===!0?w:s),I.connect(w),()=>void I.dispose()),[s,w,t,I,f]),H.useEffect(()=>{const T=R=>{f(),t&&S.regress(),o&&o(R)},P=R=>{a&&a(R)},B=R=>{l&&l(R)};return I.addEventListener("change",T),I.addEventListener("start",P),I.addEventListener("end",B),()=>{I.removeEventListener("start",P),I.removeEventListener("end",B),I.removeEventListener("change",T)}},[o,a,l,I,f,A]),H.useEffect(()=>{if(n){const T=g().controls;return x({controls:I}),()=>x({controls:T})}},[n,I]),H.createElement("primitive",dh({ref:h,object:I,enableDamping:r},c))});function CV(n,e){const t=n+"Geometry";return H.forwardRef(({args:i,children:r,...s},o)=>{const a=H.useRef(null);return H.useImperativeHandle(o,()=>a.current),H.useLayoutEffect(()=>void(e==null?void 0:e(a.current))),H.createElement("mesh",dh({ref:a},s),H.createElement(t,{attach:"geometry",args:i}),r)})}const ax=CV("sphere");class bV extends pr{constructor(){super({uniforms:{time:{value:0},fade:{value:1}},vertexShader:`
      uniform float time;
      attribute float size;
      varying vec3 vColor;
      void main() {
        vColor = color;
        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);
        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(time + 100.0));
        gl_Position = projectionMatrix * mvPosition;
      }`,fragmentShader:`
      uniform sampler2D pointTexture;
      uniform float fade;
      varying vec3 vColor;
      void main() {
        float opacity = 1.0;
        if (fade == 1.0) {
          float d = distance(gl_PointCoord, vec2(0.5, 0.5));
          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));
        }
        gl_FragColor = vec4(vColor, opacity);

        #include <tonemapping_fragment>
	      #include <${hV>=154?"colorspace_fragment":"encodings_fragment"}>
      }`})}}const TV=n=>new D().setFromSpherical(new Sg(n,Math.acos(1-Math.random()*2),Math.random()*2*Math.PI)),RV=H.forwardRef(({radius:n=100,depth:e=50,count:t=5e3,saturation:i=0,factor:r=4,fade:s=!1,speed:o=1},a)=>{const l=H.useRef(),[c,h,f]=H.useMemo(()=>{const m=[],v=[],A=Array.from({length:t},()=>(.5+.5*Math.random())*r),x=new Ee;let g=n+e;const S=e/t;for(let _=0;_<t;_++)g-=S*Math.random(),m.push(...TV(g).toArray()),x.setHSL(_/t,i,.9),v.push(x.r,x.g,x.b);return[new Float32Array(m),new Float32Array(v),new Float32Array(A)]},[t,e,r,n,i]);Vn(m=>l.current&&(l.current.uniforms.time.value=m.clock.elapsedTime*o));const[p]=H.useState(()=>new bV);return H.createElement("points",{ref:a},H.createElement("bufferGeometry",null,H.createElement("bufferAttribute",{attach:"attributes-position",args:[c,3]}),H.createElement("bufferAttribute",{attach:"attributes-color",args:[h,3]}),H.createElement("bufferAttribute",{attach:"attributes-size",args:[f,1]})),H.createElement("primitive",{ref:l,object:p,attach:"material",blending:qd,"uniforms-fade-value":s,depthWrite:!1,transparent:!0,vertexColors:!0}))}),IV={BASE_URL:"/CelestialNavigator/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},FC=n=>{let e;const t=new Set,i=(h,f)=>{const p=typeof h=="function"?h(e):h;if(!Object.is(p,e)){const m=e;e=f??(typeof p!="object"||p===null)?p:Object.assign({},e,p),t.forEach(v=>v(e,m))}},r=()=>e,l={setState:i,getState:r,getInitialState:()=>c,subscribe:h=>(t.add(h),()=>t.delete(h)),destroy:()=>{(IV?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},c=e=n(i,r,l);return l},PV=n=>n?FC(n):FC;var lP={exports:{}},cP={},uP={exports:{}},dP={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tu=H;function BV(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var LV=typeof Object.is=="function"?Object.is:BV,DV=tu.useState,NV=tu.useEffect,FV=tu.useLayoutEffect,UV=tu.useDebugValue;function OV(n,e){var t=e(),i=DV({inst:{value:t,getSnapshot:e}}),r=i[0].inst,s=i[1];return FV(function(){r.value=t,r.getSnapshot=e,lx(r)&&s({inst:r})},[n,t,e]),NV(function(){return lx(r)&&s({inst:r}),n(function(){lx(r)&&s({inst:r})})},[n]),UV(t),t}function lx(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!LV(n,t)}catch{return!0}}function kV(n,e){return e()}var zV=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?kV:OV;dP.useSyncExternalStore=tu.useSyncExternalStore!==void 0?tu.useSyncExternalStore:zV;uP.exports=dP;var HV=uP.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S0=H,GV=HV;function VV(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var WV=typeof Object.is=="function"?Object.is:VV,jV=GV.useSyncExternalStore,XV=S0.useRef,JV=S0.useEffect,KV=S0.useMemo,YV=S0.useDebugValue;cP.useSyncExternalStoreWithSelector=function(n,e,t,i,r){var s=XV(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=KV(function(){function l(m){if(!c){if(c=!0,h=m,m=i(m),r!==void 0&&o.hasValue){var v=o.value;if(r(v,m))return f=v}return f=m}if(v=f,WV(h,m))return v;var A=i(m);return r!==void 0&&r(v,A)?v:(h=m,f=A)}var c=!1,h,f,p=t===void 0?null:t;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,t,i,r]);var a=jV(n,s[0],s[1]);return JV(function(){o.hasValue=!0,o.value=a},[a]),YV(a),a};lP.exports=cP;var QV=lP.exports;const hP=k_(QV),fP={BASE_URL:"/CelestialNavigator/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},{useDebugValue:qV}=As,{useSyncExternalStoreWithSelector:ZV}=hP;let UC=!1;const $V=n=>n;function e5(n,e=$V,t){(fP?"production":void 0)!=="production"&&t&&!UC&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),UC=!0);const i=ZV(n.subscribe,n.getState,n.getServerState||n.getInitialState,e,t);return qV(i),i}const OC=n=>{(fP?"production":void 0)!=="production"&&typeof n!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof n=="function"?PV(n):n,t=(i,r)=>e5(e,i,r);return Object.assign(t,e),t},t5=n=>n?OC(n):OC;var kC,zC;const HC=typeof window<"u"&&((kC=window.document)!=null&&kC.createElement||((zC=window.navigator)==null?void 0:zC.product)==="ReactNative")?As.useLayoutEffect:As.useEffect;function n5(){const n=t5(e=>({current:new Array,version:0,set:e}));return{In:({children:e})=>{const t=n(r=>r.set),i=n(r=>r.version);return HC(()=>{t(r=>({version:r.version+1}))},[]),HC(()=>(t(({current:r})=>({current:[...r,e]})),()=>t(({current:r})=>({current:r.filter(s=>s!==e)}))),[e,i]),null},Out:()=>{const e=n(t=>t.current);return As.createElement(As.Fragment,null,e)}}}const pP=ES((n,e)=>({backgroundMusic:null,hitSound:null,successSound:null,isMuted:!0,setBackgroundMusic:t=>n({backgroundMusic:t}),setHitSound:t=>n({hitSound:t}),setSuccessSound:t=>n({successSound:t}),toggleMute:()=>{const{isMuted:t}=e(),i=!t;n({isMuted:i}),console.log(`Sound ${i?"muted":"unmuted"}`)},playHit:()=>{const{hitSound:t,isMuted:i}=e();if(t){if(i){console.log("Hit sound skipped (muted)");return}const r=t.cloneNode();r.volume=.3,r.play().catch(s=>{console.log("Hit sound play prevented:",s)})}},playSuccess:()=>{const{successSound:t,isMuted:i}=e();if(t){if(i){console.log("Success sound skipped (muted)");return}t.currentTime=0,t.play().catch(r=>{console.log("Success sound play prevented:",r)})}}})),Ft=ES(n=>({focusedBody:null,hoveredBody:null,cameraDistance:50,isLoaded:!1,followSpacecraft:!1,isPaused:!1,timeScale:1,simulationTime:0,isEducationalPanelOpen:!1,isVRMode:!1,setFocusedBody:e=>n({focusedBody:e}),setHoveredBody:e=>n({hoveredBody:e}),setCameraDistance:e=>n({cameraDistance:e}),setLoaded:e=>n({isLoaded:e}),setFollowSpacecraft:e=>n({followSpacecraft:e}),setIsPaused:e=>n({isPaused:e}),setTimeScale:e=>n({timeScale:e}),incrementSimulationTime:e=>n(t=>({simulationTime:t.isPaused?t.simulationTime:t.simulationTime+e*t.timeScale})),setEducationalPanelOpen:e=>n({isEducationalPanelOpen:e}),setVRMode:e=>n({isVRMode:e})})),i5=()=>{const e=(()=>{const i=new Ui,r=new oo(.2,.2,1.2,16),s=new jt({color:14540253,metalness:.8,roughness:.2}),o=new xt(r,s);o.rotation.x=Math.PI/2,i.add(o);const a=new Nr(3,1,.05),l=new jt({color:2245802,metalness:.3,roughness:.4,side:zn}),c=new xt(a,l);c.position.set(-1.6,0,0),i.add(c);const h=new xt(a,l);h.position.set(1.6,0,0),i.add(h);const f=new oo(.1,.1,1,8),p=new jt({color:8947848,metalness:.9,roughness:.1}),m=new xt(f,p);m.rotation.z=Math.PI/2,m.position.set(-.8,0,0),i.add(m);const v=new xt(f,p);v.rotation.z=Math.PI/2,v.position.set(.8,0,0),i.add(v);for(let A=-.5;A<=.5;A+=.25){const x=new Nr(.3,.3,.3),g=new jt({color:Math.random()>.5?16777215:12303291,metalness:.7,roughness:.3}),S=new xt(x,g);S.position.set(0,A,.2),i.add(S)}return i})(),t=new du(16777215,.5,10);return t.position.set(0,0,0),L.jsxs("group",{children:[L.jsx("primitive",{object:e}),L.jsx("primitive",{object:t})]})},r5=()=>{const e=(()=>{const i=new Ui,r=new cl(.8,6),s=new jt({color:13938487,metalness:1,roughness:.2,side:zn,emissive:4473890,emissiveIntensity:.2}),o=new xt(r,s);i.add(o);for(let w=0;w<19;w++){const I=Math.PI*2/19*w,T=.5,P=Math.cos(I)*T,B=Math.sin(I)*T,R=new cl(.15,6),C=new jt({color:16766720,metalness:1,roughness:.1,side:zn}),U=new xt(R,C);U.position.set(P,B,.01),i.add(U)}const a=new oo(.05,.05,1.6,8),l=new jt({color:5592405,metalness:.7,roughness:.3}),c=new xt(a,l);c.position.set(0,0,.8),c.rotation.x=Math.PI/2,i.add(c);const h=new cl(.2,32),f=new jt({color:13938487,metalness:1,roughness:.1,side:zn}),p=new xt(h,f);p.position.set(0,0,1.6),i.add(p);const m=new ca(3,2);for(let w=0;w<5;w++){const I=new jt({color:15921906,metalness:.5,roughness:.4,side:zn,transparent:!0,opacity:.8}),T=new xt(m,I);T.position.set(0,0,-.1-w*.05),T.rotation.x=Math.PI/10,i.add(T)}const v=new Nr(.8,.8,1),A=new jt({color:3355443,metalness:.7,roughness:.3}),x=new xt(v,A);x.position.set(0,0,-.7),i.add(x);const g=new Nr(1.8,.6,.05),S=new jt({color:2245802,metalness:.3,roughness:.4,side:zn}),_=new xt(g,S);return _.position.set(0,-1,-.7),i.add(_),i})(),t=new du(16777215,.5,10);return t.position.set(0,0,0),L.jsxs("group",{children:[L.jsx("primitive",{object:e}),L.jsx("primitive",{object:t})]})},s5=({id:n,position:e,rotation:t=[0,0,0],radius:i=1,textureUrl:r,type:s,name:o,rotationSpeed:a=.001,orbitSpeed:l=0,orbitRadius:c=0,orbitCenter:h=[0,0,0],eccentricity:f=0,orbitTilt:p=0,axialTilt:m=0})=>{const v=H.useRef(null),A=Ft(k=>k.focusedBody),x=Ft(k=>k.setFocusedBody),g=Ft(k=>k.setHoveredBody);H.useEffect(()=>{v.current&&(v.current.userData.id=n,console.log(`Set userData.id=${n} for celestial body`))},[n]);const S=()=>s==="star"?"/CelestialNavigator/textures/sun.jpg":n==="mercury"?"/CelestialNavigator/textures/planets/mercury.jpg":n==="venus"?"/CelestialNavigator/textures/planets/venus.jpg":n==="earth"?"/CelestialNavigator/textures/planets/earth.jpg":n==="moon"?"/CelestialNavigator/textures/planets/moon.jpg":n==="mars"?"/CelestialNavigator/textures/planets/mars.jpg":n==="jupiter"?"/CelestialNavigator/textures/planets/jupiter.jpg":n==="saturn"?"/CelestialNavigator/textures/planets/saturn.jpg":n==="uranus"?"/CelestialNavigator/textures/planets/uranus.jpg":n==="neptune"?"/CelestialNavigator/textures/planets/neptune.jpg":n==="pluto"?"/CelestialNavigator/textures/planets/pluto.jpg":null,_=()=>s==="star"?new Ee("#FFA726"):n==="mercury"?new Ee("#A37B7B"):n==="venus"?new Ee("#E6C073"):n==="earth"?new Ee("#4B6CB7"):n==="moon"?new Ee("#BFBFBF"):n==="mars"?new Ee("#C75D48"):n==="jupiter"?new Ee("#E0B080"):n==="saturn"?new Ee("#E8D8A0"):n==="uranus"?new Ee("#99CCCC"):n==="neptune"?new Ee("#334CA5"):n==="pluto"?new Ee("#D9C6B0"):new Ee("#CCCCCC"),w=r||S(),I=H.useMemo(()=>{if(!w)return null;try{const k=new tn;return k.needsUpdate=!0,new ch().load(w)}catch(k){return console.warn(`Failed to load texture for ${o}:`,k),null}},[w,o]),T=H.useMemo(()=>{if(!["moon","mercury","venus","earth","mars","pluto"].includes(n))return null;try{let k="";if(n==="moon")k="/CelestialNavigator/textures/planets/moon_normal.jpg";else if(n==="mercury")k="/CelestialNavigator/textures/planets/mercury_normal.jpg";else if(n==="venus")k="/CelestialNavigator/textures/planets/venus_normal.jpg";else if(n==="earth")k="/CelestialNavigator/textures/planets/earth_normal.jpg";else if(n==="mars")k="/CelestialNavigator/textures/planets/mars_normal.jpg";else if(n==="pluto")k="/CelestialNavigator/textures/planets/pluto_normal.jpg";else return null;return new ch().load(k,void 0,void 0,Y=>{console.warn(`Failed to load ${n} normal map, falling back to regular texture`)})}catch{return null}},[n]),P=H.useMemo(()=>{var W;const k=!I||((W=I.image)==null?void 0:W.width)<20;return s==="star"?new jt({map:k?null:I,emissive:new Ee("#FFA726"),emissiveIntensity:1,emissiveMap:I,color:k?_():16777215,transparent:!1,opacity:1}):n==="mercury"?new jt({map:k?null:I,normalMap:T,normalScale:new ue(.7,.7),roughness:.85,metalness:.4,color:k?_():15658734}):n==="venus"?new jt({map:k?null:I,normalMap:T,normalScale:new ue(.2,.2),roughness:.6,metalness:.1,color:k?_():16777181}):n==="earth"?new jt({map:k?null:I,normalMap:T,normalScale:new ue(.8,.8),roughness:.6,metalness:.1,emissive:new Ee("#334455"),emissiveIntensity:.1,color:k?_():16777215}):n==="moon"?new jt({map:k?null:I,normalMap:T,normalScale:new ue(.8,.8),bumpMap:k?null:I,bumpScale:.04,roughness:.9,metalness:.1,emissive:new Ee("#111111"),emissiveIntensity:.03,color:k?_():14540253}):n==="mars"?new jt({map:k?null:I,normalMap:T,normalScale:new ue(1,1),roughness:.9,metalness:.1,color:k?_():16764091}):n==="jupiter"?new jt({map:k?null:I,roughness:.75,metalness:0,color:k?_():16774624}):n==="saturn"?new jt({map:k?null:I,roughness:.8,metalness:0,color:k?_():16776416}):n==="uranus"?new jt({map:k?null:I,roughness:.6,metalness:.1,color:k?_():14743039}):n==="neptune"?new jt({map:k?null:I,roughness:.65,metalness:.1,color:k?_():12640511}):n==="pluto"?new jt({map:k?null:I,normalMap:T,normalScale:new ue(.5,.5),roughness:.85,metalness:0,color:k?_():15786192}):s==="spacecraft"?new jt({map:k?null:I,roughness:.3,metalness:.8,emissive:new Ee("#223344"),emissiveIntensity:.2,color:k?_():14540253}):new jt({map:k?null:I,roughness:.7,metalness:.2,color:k?_():16777215})},[I,s,n,T]),B=H.useMemo(()=>{const k=["earth","venus","jupiter","saturn","uranus","neptune","titan"].includes(n);if(s==="star"||n==="sun"){const Y=new ia(i*1.03,64,64),se=new Cn({color:new Ee("#FFA726"),transparent:!0,opacity:.15,side:oi,blending:qd});return new xt(Y,se)}if((s==="planet"||s==="moon")&&k){let W="#4FC3F7",Y=.15,se=1.05;return n==="earth"?(W="#4FC3F7",Y=.18,se=1.05):n==="venus"?(W="#E6C073",Y=.3,se=1.08):n==="jupiter"?(W="#E0B080",Y=.15,se=1.04):n==="saturn"?(W="#E8D8A0",Y=.15,se=1.04):n==="uranus"?(W="#B4D0CF",Y=.15,se=1.04):n==="neptune"?(W="#334CA5",Y=.15,se=1.04):n==="titan"&&(W="#E09060",Y=.25,se=1.07),new xt(new ia(i*se,64,64),new jt({color:W,transparent:!0,opacity:Y,side:oi,depthWrite:!1}))}return null},[s,i,n]),R=(k,W)=>{const{center:Y,radius:se,eccentricity:Ce,tilt:q}=W,he=se*(1-Ce*Ce)/(1+Ce*Math.cos(k));let ae=Y[0]+he*Math.cos(k),Le=0,We=Y[2]+he*Math.sin(k);const qe=Le*Math.cos(q)-We*Math.sin(q),ke=Le*Math.sin(q)+We*Math.cos(q);return{x:ae,y:qe,z:ke}},C=H.useMemo(()=>{if(l>0&&c>0){const k=f,W=p;let Y=[...h];if(n==="moon"||n==="iss"||n==="jwst")return null;const se={center:Y,radius:c,eccentricity:k,tilt:W},Ce=[],q=100;for(let qe=0;qe<=q;qe++){const ke=qe/q*Math.PI*2,me=R(ke,se);Ce.push(new D(me.x,me.y,me.z))}const ie=new Tc(Ce);ie.closed=!0;const he=new gt().setFromPoints(ie.getPoints(100));let ae="#555555",Le=.3,We=1.2;return s==="moon"||s==="spacecraft"?(ae="#4FC3F7",Le=.6,We=1.8):s==="planet"&&(Le=.7,We=1.5,n==="mercury"?ae="#A6A6A6":n==="venus"?ae="#E8A735":n==="earth"?ae="#3498DB":n==="mars"?ae="#C0392B":n==="jupiter"?ae="#E67E22":n==="saturn"?ae="#F1C40F":n==="uranus"?ae="#1ABC9C":n==="neptune"?ae="#3498DB":n==="pluto"&&(ae="#BDC3C7")),L.jsxs("line",{children:[L.jsx("bufferGeometry",{attach:"geometry",...he}),L.jsx("lineBasicMaterial",{attach:"material",color:ae,opacity:Le,transparent:!0,linewidth:We})]})}return null},[h,c,l,f,p,s,n]),U=H.useRef(!1),j=Ft(k=>k.isPaused),K=Ft(k=>k.timeScale),te=Ft(k=>k.simulationTime);Vn((k,W)=>{if(!v.current)return;if(m&&!v.current.userData.axialTiltApplied){const se=new D(0,0,1),Ce=m||0,q=new on().setFromAxisAngle(se,Ce);v.current.quaternion.premultiply(q),v.current.userData.axialTiltApplied=!0}if(j)return;let Y=!0;if(s==="planet"&&n!=="earth"?Math.random()>.5&&(Y=!1):n==="iss"||n==="jwst"?Y=!0:n!=="moon"&&n!=="earth"&&s!=="star"&&Math.random()>.7&&(Y=!1),!!Y){if(a){const se=new D(0,1,0);v.current.rotateOnAxis(se,a*W*10*K)}if(l>0&&c>0){let se=[...h];if(n==="moon"){let ie=null;if(ie=k.scene.children.find(he=>he.userData&&he.userData.id==="earth"),ie||k.scene.traverse(he=>{he.userData&&he.userData.id==="earth"&&(ie=he)}),ie){const he=new D;ie.getWorldPosition(he);const ae=c,Le=p,We=f,ke=te*l,xe=ae*(1-We*We)/(1+We*Math.cos(ke)),V=he.x+xe*Math.cos(ke),Je=he.y+xe*Math.sin(ke)*Math.sin(Le),Me=he.z+xe*Math.sin(ke)*Math.cos(Le);v.current.position.set(V,Je,Me),v.current.scale.set(.27,.27,.27);return}else console.warn("Earth not found in scene for moon orbit calculation")}if(n==="iss"){let ie=null;if(ie=k.scene.children.find(he=>he.userData&&he.userData.id==="earth"),ie||k.scene.traverse(he=>{he.userData&&he.userData.id==="earth"&&(ie=he)}),ie){const he=new D;ie.getWorldPosition(he);const Le=te*l*5,We=c,qe=p,ke=f,xe=We*(1-ke*ke)/(1+ke*Math.cos(Le)),V=he.x+xe*Math.cos(Le),Je=he.y+xe*Math.sin(Le)*Math.sin(qe),Me=he.z+xe*Math.sin(Le)*Math.cos(qe);v.current.position.set(V,Je,Me),v.current.userData.earthPosition=he.clone();return}else console.warn("Earth not found in scene for ISS orbit calculation")}if(n==="jwst"){let ie=null,he=null;if(ie=k.scene.children.find(ae=>ae.userData&&ae.userData.id==="earth"),he=k.scene.children.find(ae=>ae.userData&&ae.userData.id==="sun"),ie||k.scene.traverse(ae=>{ae.userData&&ae.userData.id==="earth"&&(ie=ae)}),he||k.scene.traverse(ae=>{ae.userData&&ae.userData.id==="sun"&&(he=ae)}),ie){const ae=new D;ie.getWorldPosition(ae);let Le;if(he){const Ne=new D;he.getWorldPosition(Ne),Le=ae.clone().sub(Ne).normalize()}else Le=ae.clone().normalize();const We=ae.clone().add(Le.clone().multiplyScalar(25)),ke=te*l,me=c,xe=p,V=f,Me=me*(1-V*V)/(1+V*Math.cos(ke)),De=We.x+Me*Math.cos(ke),Ie=We.y+Me*Math.sin(ke)*Math.sin(xe),ot=We.z+Me*Math.sin(ke)*Math.cos(xe);v.current.position.set(De,Ie,ot),v.current.userData.earthPosition=ae.clone(),v.current.userData.l2Position=We.clone();return}else console.warn("Earth not found in scene for JWST orbit calculation")}if(!U.current&&n==="moon"){U.current=!0,console.log("Initializing Moon position - skipping default positioning");return}else if(!U.current){console.log(`Initializing ${n} at its starting position`);let ie=0;n==="mercury"?ie=0:n==="venus"?ie=2:n==="earth"?ie=4:n==="mars"?ie=5.5:n==="jupiter"?ie=1:n==="saturn"?ie=3:n==="uranus"?ie=.5:n==="neptune"?ie=2.5:n==="pluto"?ie=4.5:n==="iss"?ie=0:n==="jwst"&&(ie=3);const he=R(ie,{center:se,radius:c,eccentricity:f,tilt:p});v.current.position.x=he.x,v.current.position.y=he.y,v.current.position.z=he.z,v.current.userData.id=n,console.log(`${n} initialized at position:`,v.current.position),U.current=!0}const Ce=te*l*5,q=R(Ce,{center:se,radius:c,eccentricity:f,tilt:p});v.current.position.x=q.x,v.current.position.y=q.y,v.current.position.z=q.z,v.current.userData.id=n,n==="saturn"&&v.current.children.length>0&&(v.current.children[0].rotation.x=Math.PI/2,v.current.children[0].rotation.y=.3)}}});const de=k=>{k.stopPropagation(),x(n)},re=A===n,ge=H.useMemo(()=>{if(!["saturn","uranus","neptune","jupiter"].includes(n)||s==="star"||n==="sun")return null;let k=0,W=0,Y="#FFFFFF",se=.8,Ce=Math.PI/2,q=0;n==="saturn"?(k=i*1.4,W=i*2.3,Y="#E8D8A0",se=.85,q=.3):n==="uranus"?(k=i*1.3,W=i*1.6,Y="#93A1A1",se=.6,Ce=Math.PI/2-1.7064,q=.1):n==="neptune"?(k=i*1.2,W=i*1.5,Y="#334455",se=.5,q=.2):n==="jupiter"&&(k=i*1.3,W=i*1.8,Y="#C0B090",se=.25,q=.1);const ie=new Ui,he=n==="saturn"?128:64,ae=new $c(k,W,he),Le=new jt({color:Y,side:zn,transparent:!0,opacity:se,roughness:.8,metalness:.1});if(n==="saturn"){const ke=document.createElement("canvas");ke.width=1024,ke.height=1024/8;const me=ke.getContext("2d");if(me){me.fillStyle="#E8D8A0",me.fillRect(0,0,1024,1024/8);const xe=20;for(let Me=0;Me<xe;Me++){const De=Math.random()*1024,Ie=5+Math.random()*20,ot=.3+Math.random()*.5;me.fillStyle=`rgba(101, 84, 43, ${ot})`,me.fillRect(De,0,Ie,1024/8)}me.fillStyle="rgba(0, 0, 0, 0.8)",me.fillRect(1024*.65,0,1024*.05,1024/8);const V=new C_(ke);V.wrapS=fr,V.repeat.set(2,1),Le.map=V,[.45,.65,.75].forEach(Me=>{const De=k+(W-k)*Me,Ie=De+(W-k)*.03,ot=new $c(De,Ie,128),Ne=new Cn({color:"#000000",side:zn,transparent:!0,opacity:.6}),z=new xt(ot,Ne);z.rotation.x=Ce,z.rotation.y=q,ie.add(z)})}}if(n==="jupiter"){const ke=document.createElement("canvas");ke.width=512,ke.height=32;const me=ke.getContext("2d");if(me){const xe=me.createLinearGradient(0,0,512,0);xe.addColorStop(0,"rgba(192, 176, 144, 0.3)"),xe.addColorStop(.3,"rgba(192, 176, 144, 0.25)"),xe.addColorStop(.7,"rgba(192, 176, 144, 0.2)"),xe.addColorStop(1,"rgba(192, 176, 144, 0.15)"),me.fillStyle=xe,me.fillRect(0,0,512,32);for(let Je=0;Je<30;Je++){const Me=Math.random()*512,De=1+Math.random()*3;me.fillStyle=`rgba(255, 255, 255, ${.05+Math.random()*.1})`,me.fillRect(Me,0,De,32)}const V=new C_(ke);V.wrapS=fr,V.repeat.set(4,1),Le.map=V}}const We=new xt(ae,Le);return We.rotation.x=Ce,We.rotation.y=q,ie.add(We),ie},[n,i]),F=()=>s!=="spacecraft"?null:n==="iss"?L.jsx(i5,{}):n==="jwst"?L.jsx(r5,{}):null;return L.jsxs(L.Fragment,{children:[C&&C,n==="moon"&&L.jsx("group",{children:L.jsxs("line",{children:[L.jsx("bufferGeometry",{attach:"geometry",children:(()=>{const k=[];for(let se=0;se<=100;se++){const Ce=se/100*Math.PI*2,q=c*(1-f*f)/(1+f*Math.cos(Ce)),ie=q*Math.cos(Ce),he=q*Math.sin(Ce)*Math.sin(p),ae=q*Math.sin(Ce)*Math.cos(p);k.push(new D(ie,he,ae))}const Y=new Tc(k);return Y.closed=!0,Y.getPoints(100)})()}),L.jsx("lineBasicMaterial",{attach:"material",color:"#AAAAAA",opacity:.4,transparent:!0,linewidth:1})]})}),n==="iss"&&L.jsx("group",{children:(()=>{if(!v.current||!v.current.userData.earthPosition)return null;const k=v.current.userData.earthPosition;return L.jsxs("line",{children:[L.jsx("bufferGeometry",{attach:"geometry",children:(()=>{const W=[];for(let Ce=0;Ce<=100;Ce++){const q=Ce/100*Math.PI*2,ie=c*(1-f*f)/(1+f*Math.cos(q)),he=k.x+ie*Math.cos(q),ae=k.y+ie*Math.sin(q)*Math.sin(p),Le=k.z+ie*Math.sin(q)*Math.cos(p);W.push(new D(he,ae,Le))}const se=new Tc(W);return se.closed=!0,se.getPoints(100)})()}),L.jsx("lineBasicMaterial",{attach:"material",color:"#55AAFF",opacity:.8,transparent:!0,linewidth:2})]})})()}),n==="jwst"&&L.jsx("group",{children:(()=>{if(!v.current||!v.current.userData.l2Position)return null;const k=v.current.userData.l2Position;return L.jsxs("line",{children:[L.jsx("bufferGeometry",{attach:"geometry",children:(()=>{const W=[];for(let Ce=0;Ce<=100;Ce++){const q=Ce/100*Math.PI*2,ie=c*(1-f*f)/(1+f*Math.cos(q)),he=k.x+ie*Math.cos(q),ae=k.y+ie*Math.sin(q)*Math.sin(p),Le=k.z+ie*Math.sin(q)*Math.cos(p);W.push(new D(he,ae,Le))}const se=new Tc(W);return se.closed=!0,se.getPoints(100)})()}),L.jsx("lineBasicMaterial",{attach:"material",color:"#FFAA22",opacity:.7,transparent:!0,linewidth:1.5})]})})()}),L.jsxs("group",{position:l>0?[0,0,0]:e,rotation:t?new Ti(...t):void 0,children:[L.jsx(H.Suspense,{fallback:L.jsx(ax,{args:[i,16,8],ref:v,children:L.jsx("meshStandardMaterial",{color:"#CCCCCC"})}),children:F()||L.jsx(ax,{args:[i,64,32],ref:v,onClick:de,onPointerOver:k=>{k.stopPropagation(),g(n),document.body.style.cursor="pointer"},onPointerOut:k=>{k.stopPropagation(),g(null),document.body.style.cursor="auto"},children:L.jsx("primitive",{object:P,attach:"material"})})}),B&&L.jsx("primitive",{object:B}),ge&&L.jsx("primitive",{object:ge}),re&&L.jsx(ax,{args:[i*1.1,32,32],children:L.jsx("meshBasicMaterial",{color:"#4FC3F7",transparent:!0,opacity:.2,wireframe:!0})})]})]})},cx=({id:n,position:e,radius:t=1,rotationSpeed:i=.001,orbitSpeed:r=0,orbitRadius:s=0,orbitCenter:o=[0,0,0],eccentricity:a=0,orbitTilt:l=0})=>{const c=H.useRef(null),[h,f]=H.useState(!1),p=H.useRef(!1),m=()=>n==="iss"?"/CelestialNavigator/models/iss.glb":n==="jwst"?"/CelestialNavigator/models/jwst.glb":n==="voyager"?"/CelestialNavigator/models/voyager.glb":"/CelestialNavigator/models/iss.glb",{scene:v}=tl(m());H.useEffect(()=>{v&&(f(!0),console.log(`Spacecraft model for ${n} loaded successfully`),c.current&&(n==="iss"?c.current.scale.set(.02,.02,.02):n==="jwst"?c.current.scale.set(.03,.03,.03):n==="voyager"&&c.current.scale.set(.02,.02,.02)))},[v,n]);const A=(_,w)=>{const{center:I,radius:T,eccentricity:P,tilt:B}=w,C=T*(1-P*P)/(1+P*Math.cos(_));let U=I[0]+C*Math.cos(_),j=0,K=I[2]+C*Math.sin(_);const te=j*Math.cos(B)-K*Math.sin(B),de=j*Math.sin(B)+K*Math.cos(B);return{x:U,y:te,z:de}},x=Ft(_=>_.isPaused),g=Ft(_=>_.timeScale),S=Ft(_=>_.simulationTime);return Vn((_,w)=>{if(!(!c.current||!h)&&!x){if(c.current.rotation.y+=i*w*5*g,(n==="iss"||n==="jwst")&&r>0&&s>0){let I=null;if(I=_.scene.children.find(T=>T.userData&&T.userData.id==="earth"),I||_.scene.traverse(T=>{T.userData&&T.userData.id==="earth"&&(I=T)}),I){const T=new D;I.getWorldPosition(T);const P={center:[T.x,T.y,T.z],radius:s,eccentricity:a,tilt:l},B=S*r*5,R=A(B,P);c.current.position.x=R.x,c.current.position.y=R.y,c.current.position.z=R.z;const C=A(B+.01,P),U=new D(C.x-R.x,C.y-R.y,C.z-R.z).normalize();if(U.length()>0){const j=new D(c.current.position.x+U.x,c.current.position.y+U.y,c.current.position.z+U.z);c.current.lookAt(j),n==="iss"?c.current.rotation.x+=Math.PI/2:n==="jwst"&&(c.current.rotation.z+=Math.PI/4)}return}}if(r>0&&s>0){const I={center:o,radius:s,eccentricity:a,tilt:l};if(!p.current){let C=0;n==="iss"?C=0:n==="jwst"?C=3:n==="voyager"&&(C=5);const U=A(C,I);c.current.position.x=U.x,c.current.position.y=U.y,c.current.position.z=U.z,p.current=!0}const T=S*r*5,P=A(T,I);c.current.position.x=P.x,c.current.position.y=P.y,c.current.position.z=P.z;const B=A(T+.01,I),R=new D(B.x-P.x,B.y-P.y,B.z-P.z).normalize();if(R.length()>0){const C=new D(c.current.position.x+R.x,c.current.position.y+R.y,c.current.position.z+R.z);c.current.lookAt(C),n==="iss"?c.current.rotation.x+=Math.PI/2:n==="jwst"&&(c.current.rotation.z+=Math.PI/4)}}else c.current.position.set(e[0],e[1],e[2])}}),tl.preload("/CelestialNavigator/models/iss.glb"),tl.preload("/CelestialNavigator/models/jwst.glb"),tl.preload("/CelestialNavigator/models/voyager.glb"),L.jsx("group",{ref:c,children:h?L.jsx("primitive",{object:v.clone()}):L.jsxs("mesh",{children:[L.jsx("boxGeometry",{args:[t,t,t]}),L.jsx("meshStandardMaterial",{color:"#CCCCCC"})]})})},o5=({position:n})=>{const e=H.useRef(null),t=Ft(r=>r.followSpacecraft),i=Ft(r=>r.setFollowSpacecraft);return H.useEffect(()=>{const r=s=>{s.code==="KeyT"&&i(!t)};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[t,i]),Vn(({clock:r})=>{if(!e.current)return;const s=r.getElapsedTime();e.current.position.x=n[0]+Math.sin(s*.3)*20,e.current.position.y=n[1]+Math.sin(s*.2)*5,e.current.position.z=n[2]+Math.cos(s*.3)*20;const o=new D(e.current.position.x+Math.sin(s*.3+.1)*20,e.current.position.y+Math.sin(s*.2+.1)*5,e.current.position.z+Math.cos(s*.3+.1)*20);e.current.lookAt(o)}),L.jsxs("group",{ref:e,position:n,children:[L.jsxs("mesh",{castShadow:!0,receiveShadow:!0,children:[L.jsx("capsuleGeometry",{args:[1,5,16,16]}),L.jsx("meshStandardMaterial",{color:"#424242",metalness:.8,roughness:.2})]}),L.jsxs("mesh",{position:[0,2,0],castShadow:!0,children:[L.jsx("sphereGeometry",{args:[1.2,32,32,0,Math.PI*2,0,Math.PI*.5]}),L.jsx("meshStandardMaterial",{color:"#4FC3F7",opacity:.9,transparent:!0,metalness:.2})]}),L.jsxs("mesh",{position:[0,-1,0],rotation:[0,0,Math.PI/2],castShadow:!0,children:[L.jsx("cylinderGeometry",{args:[.2,.2,8,8]}),L.jsx("meshStandardMaterial",{color:"#424242",metalness:.7})]}),L.jsx("pointLight",{position:[0,-3,0],color:"#4FC3F7",intensity:2,distance:10}),L.jsxs("mesh",{position:[0,-3,0],children:[L.jsx("sphereGeometry",{args:[.6,16,16]}),L.jsx("meshBasicMaterial",{color:"#4FC3F7"})]})]})},Vs=[{id:"sun",name:"Sun",type:"star",position:[0,0,0],radius:20,rotationSpeed:.001,textureUrl:"/CelestialNavigator/textures/sun.jpg",diameter:1392700,temperature:"5,500°C (surface), 15,000,000°C (core)",description:"The Sun is the star at the center of the Solar System. It is a nearly perfect sphere of hot plasma, heated to incandescence by nuclear fusion reactions in its core."},{id:"mercury",name:"Mercury",type:"planet",position:[35,0,0],radius:1.74,rotationSpeed:5e-4,orbitSpeed:.15,orbitRadius:35,orbitCenter:[0,0,0],eccentricity:.205,orbitTilt:.1222,axialTilt:.0017,textureUrl:"/CelestialNavigator/textures/planets/mercury.jpg",diameter:4879,dayLength:"58.7 Earth days",yearLength:"88 Earth days",temperature:"-173°C to 427°C",description:"Mercury is the smallest and innermost planet in the Solar System. It has the most eccentric orbit of all planets, creating a notably elliptical path."},{id:"venus",name:"Venus",type:"planet",position:[50,0,0],radius:4.35,rotationSpeed:-2e-4,orbitSpeed:.12,orbitRadius:50,orbitCenter:[0,0,0],eccentricity:.007,orbitTilt:.0594,axialTilt:3.0963,textureUrl:"/CelestialNavigator/textures/planets/venus.jpg",diameter:12104,dayLength:"243 Earth days",yearLength:"225 Earth days",temperature:"462°C (average)",description:"Venus is the second planet from the Sun and the hottest planet in our solar system. It rotates in the opposite direction to most planets."},{id:"earth",name:"Earth",type:"planet",position:[70,0,0],radius:4.6,rotationSpeed:.01,orbitSpeed:.1,orbitRadius:70,orbitCenter:[0,0,0],eccentricity:.017,orbitTilt:0,axialTilt:.4101,textureUrl:"/CelestialNavigator/textures/planets/earth.jpg",diameter:12756,dayLength:"24 hours",yearLength:"365.25 days",temperature:"-88°C to 58°C",description:"Earth is the third planet from the Sun and the only astronomical object known to harbor life. Its 23.5° axial tilt causes seasons."},{id:"moon",name:"Moon",type:"moon",position:[0,0,0],radius:1.26,rotationSpeed:1e-6,orbitSpeed:.1,orbitRadius:10,orbitCenter:[0,0,0],eccentricity:.0549,orbitTilt:.089,axialTilt:.116,textureUrl:"/CelestialNavigator/textures/planets/moon.jpg",diameter:3475,dayLength:"29.5 Earth days",temperature:"-173°C to 127°C",description:"The Moon is Earth's only natural satellite. It is tidally locked to Earth, meaning the same side always faces us."},{id:"mars",name:"Mars",type:"planet",position:[90,0,0],radius:2.45,rotationSpeed:.01,orbitSpeed:.08,orbitRadius:90,orbitCenter:[0,0,0],eccentricity:.094,orbitTilt:.0323,axialTilt:.4398,textureUrl:"/CelestialNavigator/textures/planets/mars.jpg",diameter:6792,dayLength:"24.6 hours",yearLength:"687 Earth days",temperature:"-153°C to 20°C",description:"Mars is the fourth planet from the Sun. Its reddish appearance is due to iron oxide (rust) on its surface. Its axial tilt is similar to Earth's."},{id:"jupiter",name:"Jupiter",type:"planet",position:[130,0,0],radius:11.2,rotationSpeed:.02,orbitSpeed:.06,orbitRadius:130,orbitCenter:[0,0,0],eccentricity:.049,orbitTilt:.0227,axialTilt:.0546,textureUrl:"/CelestialNavigator/textures/planets/jupiter.jpg",diameter:142984,dayLength:"9.9 hours",yearLength:"11.9 Earth years",temperature:"-145°C (cloud tops)",description:"Jupiter is the fifth planet from the Sun and the largest in the Solar System. Its fast rotation causes a visible equatorial bulge."},{id:"saturn",name:"Saturn",type:"planet",position:[170,0,0],radius:9.45,rotationSpeed:.018,orbitSpeed:.04,orbitRadius:170,orbitCenter:[0,0,0],eccentricity:.057,orbitTilt:.0435,axialTilt:.466,textureUrl:"/CelestialNavigator/textures/planets/saturn.jpg",diameter:120536,dayLength:"10.7 hours",yearLength:"29.5 Earth years",temperature:"-178°C (cloud tops)",description:"Saturn is the sixth planet from the Sun, known for its spectacular ring system. Like Jupiter, it's a gas giant with a fast rotation period."},{id:"uranus",name:"Uranus",type:"planet",position:[200,0,0],radius:4,rotationSpeed:.012,orbitSpeed:.03,orbitRadius:200,orbitCenter:[0,0,0],eccentricity:.046,orbitTilt:.0134,axialTilt:1.7064,textureUrl:"/CelestialNavigator/textures/planets/uranus.jpg",diameter:51118,dayLength:"17.2 hours",yearLength:"84 Earth years",temperature:"-224°C (cloud tops)",description:"Uranus is the seventh planet from the Sun. Its extreme axial tilt of 98 degrees means it essentially rotates on its side, likely due to a massive collision."},{id:"neptune",name:"Neptune",type:"planet",position:[230,0,0],radius:3.88,rotationSpeed:.014,orbitSpeed:.025,orbitRadius:230,orbitCenter:[0,0,0],eccentricity:.011,orbitTilt:.0309,axialTilt:.4939,textureUrl:"/CelestialNavigator/textures/planets/neptune.jpg",diameter:49528,dayLength:"16.1 hours",yearLength:"165 Earth years",temperature:"-218°C (cloud tops)",description:"Neptune is the eighth and farthest known planet from the Sun. Despite being smaller than Uranus, it's more massive and has the strongest winds in the Solar System."},{id:"pluto",name:"Pluto",type:"dwarf",position:[260,0,0],radius:.19,rotationSpeed:.006,orbitSpeed:.02,orbitRadius:260,orbitCenter:[0,0,0],eccentricity:.244,orbitTilt:.2967,axialTilt:2.0856,textureUrl:"/CelestialNavigator/textures/planets/pluto.jpg",diameter:2376,dayLength:"6.4 Earth days",yearLength:"248 Earth years",temperature:"-240°C (average)",description:"Pluto is a dwarf planet with the most eccentric and inclined orbit of the former planets. Its orbit is so elliptical that it sometimes comes closer to the Sun than Neptune."},{id:"iss",name:"International Space Station",type:"spacecraft",position:[70,6,0],radius:.4,rotationSpeed:.02,orbitSpeed:1.5,orbitRadius:7,orbitCenter:[0,0,0],eccentricity:3e-4,orbitTilt:.9,description:"The International Space Station is a modular space station in low Earth orbit with an inclination of 51.6 degrees, completing an orbit every 90 minutes."},{id:"jwst",name:"James Webb Telescope",type:"spacecraft",position:[100,10,30],radius:.6,rotationSpeed:.01,orbitSpeed:.4,orbitRadius:25,orbitCenter:[0,0,0],eccentricity:.0035,orbitTilt:.4,description:"The James Webb Space Telescope orbits around the Sun-Earth L2 point, 1.5 million km from Earth, with a 6-month orbital period in a complex 'halo' pattern."},{id:"voyager",name:"Voyager",type:"spacecraft",position:[300,20,150],radius:.04,rotationSpeed:.008,orbitSpeed:.01,orbitRadius:300,orbitCenter:[0,0,0],eccentricity:.2,orbitTilt:.35,description:"The Voyager spacecraft (Voyager 1 and 2) are space probes launched in 1977 that have now traveled beyond our solar system into interstellar space, making them the most distant human-made objects."}],mP=()=>{Fn();const n=H.useRef(null),e=H.useRef(new D(0,0,0)),t=H.useRef(.001),i=Ft(_=>_.focusedBody),r=Ft(_=>_.setLoaded),s=Ft(_=>_.cameraDistance),o=Na(_=>_.forward),a=Na(_=>_.backward),l=Na(_=>_.leftward),c=Na(_=>_.rightward),h=Na(_=>_.zoomIn),f=Na(_=>_.zoomOut),p=Na(_=>_.reset),m=2,v=5,A=H.useRef(null);H.useEffect(()=>{const _=w=>{w.ctrlKey&&w.preventDefault()};return document.addEventListener("wheel",_,{passive:!1}),()=>{document.removeEventListener("wheel",_)}},[]),H.useEffect(()=>{const _=setTimeout(()=>{r(!0)},3e3);return()=>clearTimeout(_)},[r]);const x=H.useRef({});H.useEffect(()=>{Vs.forEach(_=>{x.current[_.id]=new D(_.position[0],_.position[1],_.position[2])})},[]),H.useEffect(()=>{if(i){const _=Vs.find(w=>w.id===i);_&&(_.type==="star"?t.current=1e-4:_.type==="planet"?t.current=5e-4:t.current=.001)}else e.current.set(0,0,0),t.current=1e-4},[i]),Ft(_=>_.isPaused),Ft(_=>_.timeScale);const g=Ft(_=>_.simulationTime),S=Ft(_=>_.incrementSimulationTime);return Vn((_,w)=>{if(!n.current)return;S(w),Vs.forEach(B=>{if(B.orbitSpeed&&B.orbitRadius&&B.orbitCenter){const R=g*B.orbitSpeed*5;let C=0;B.id==="mercury"?C=.12:B.id==="venus"?C=.05:B.id==="earth"?C=0:B.id==="mars"?C=-.03:B.id==="jupiter"?C=.02:B.id==="saturn"?C=-.05:B.id==="uranus"?C=.08:B.id==="neptune"?C=-.06:B.id==="pluto"&&(C=.17);const U=B.orbitCenter[0]+Math.cos(R)*B.orbitRadius,j=B.orbitCenter[1]+Math.sin(R)*Math.sin(C)*B.orbitRadius,K=B.orbitCenter[2]+Math.sin(R)*Math.cos(C)*B.orbitRadius;x.current[B.id]=new D(U,j,K),i===B.id&&A.current&&A.current.target.set(U,j,K)}});const I=i?x.current[i]||new D(0,0,0):new D(0,0,0),T=new D;T.subVectors(I,n.current.position).normalize();const P=new D;if(P.crossVectors(T,n.current.up).normalize(),new D(0,1,0),o&&n.current.position.addScaledVector(T,m*w*50),a&&n.current.position.addScaledVector(T,-m*w*50),l&&n.current.position.addScaledVector(P,-m*w*50),c&&n.current.position.addScaledVector(P,m*w*50),h&&n.current.position.addScaledVector(T,v*w*50),f&&n.current.position.addScaledVector(T,-v*w*50),p)if(i){const B=Vs.find(R=>R.id===i);if(B){const R=(B.radius||1)*5+s,C=x.current[B.id]||new D(B.position[0],B.position[1],B.position[2]);n.current.position.set(C.x+R,C.y+R*.5,C.z+R),A.current&&A.current.target.copy(C)}}else n.current.position.set(0,30,100),A.current&&A.current.target.set(0,0,0)}),H.useEffect(()=>{if(A.current&&i){const _=Vs.find(w=>w.id===i);if(_){const w=x.current[_.id]||new D(_.position[0],_.position[1],_.position[2]);A.current.target.copy(w)}}},[i]),L.jsxs(L.Fragment,{children:[L.jsx(wV,{ref:n,makeDefault:!0,position:[0,30,100],fov:45,near:.1,far:1e4}),L.jsx(EV,{ref:A,enablePan:!0,enableZoom:!0,enableRotate:!0,zoomSpeed:1,rotateSpeed:.8,panSpeed:.8,minDistance:30,maxDistance:1e3,target:[0,0,0]}),L.jsx("ambientLight",{intensity:.5}),L.jsx("pointLight",{position:[0,0,0],intensity:2.5,color:"#FFA726",castShadow:!1}),L.jsx("pointLight",{position:[100,50,100],intensity:.6,color:"#FFFFFF",castShadow:!1}),L.jsx(RV,{radius:1500,depth:300,count:5e3}),Vs.map(_=>L.jsx(s5,{id:_.id,position:_.position,rotation:_.rotation,radius:_.radius,textureUrl:_.textureUrl,type:_.type,name:_.name,rotationSpeed:_.rotationSpeed,orbitSpeed:_.orbitSpeed,orbitRadius:_.orbitRadius,orbitCenter:_.orbitCenter,eccentricity:_.eccentricity,orbitTilt:_.orbitTilt,axialTilt:_.axialTilt},_.id)),L.jsx(cx,{id:"iss",name:"ISS",type:"spacecraft",position:[0,0,0],radius:.5,rotationSpeed:.01,orbitSpeed:.6,orbitRadius:8,orbitCenter:[0,0,0],eccentricity:.001,orbitTilt:.8}),L.jsx(cx,{id:"jwst",name:"James Webb Space Telescope",type:"spacecraft",position:[0,0,0],radius:.6,rotationSpeed:.005,orbitSpeed:.05,orbitRadius:20,orbitCenter:[0,0,0],eccentricity:.1,orbitTilt:.2}),L.jsx(cx,{id:"voyager",name:"Voyager",type:"spacecraft",position:[0,0,0],radius:.4,rotationSpeed:.008,orbitSpeed:.01,orbitRadius:300,orbitCenter:[0,0,0],eccentricity:.2,orbitTilt:.35}),L.jsx(o5,{position:[50,10,30]})]})};function gP(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var r=n.length;for(e=0;e<r;e++)n[e]&&(t=gP(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function a5(){for(var n,e,t=0,i="",r=arguments.length;t<r;t++)(n=arguments[t])&&(e=gP(n))&&(i&&(i+=" "),i+=e);return i}const bS="-",l5=n=>{const e=u5(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:i}=n;return{getClassGroupId:o=>{const a=o.split(bS);return a[0]===""&&a.length!==1&&a.shift(),vP(a,e)||c5(o)},getConflictingClassGroupIds:(o,a)=>{const l=t[o]||[];return a&&i[o]?[...l,...i[o]]:l}}},vP=(n,e)=>{var o;if(n.length===0)return e.classGroupId;const t=n[0],i=e.nextPart.get(t),r=i?vP(n.slice(1),i):void 0;if(r)return r;if(e.validators.length===0)return;const s=n.join(bS);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId},GC=/^\[(.+)\]$/,c5=n=>{if(GC.test(n)){const e=GC.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},u5=n=>{const{theme:e,prefix:t}=n,i={nextPart:new Map,validators:[]};return h5(Object.entries(n.classGroups),t).forEach(([s,o])=>{N_(o,i,s,e)}),i},N_=(n,e,t,i)=>{n.forEach(r=>{if(typeof r=="string"){const s=r===""?e:VC(e,r);s.classGroupId=t;return}if(typeof r=="function"){if(d5(r)){N_(r(i),e,t,i);return}e.validators.push({validator:r,classGroupId:t});return}Object.entries(r).forEach(([s,o])=>{N_(o,VC(e,s),t,i)})})},VC=(n,e)=>{let t=n;return e.split(bS).forEach(i=>{t.nextPart.has(i)||t.nextPart.set(i,{nextPart:new Map,validators:[]}),t=t.nextPart.get(i)}),t},d5=n=>n.isThemeGetter,h5=(n,e)=>e?n.map(([t,i])=>{const r=i.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[t,r]}):n,f5=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,i=new Map;const r=(s,o)=>{t.set(s,o),e++,e>n&&(e=0,i=t,t=new Map)};return{get(s){let o=t.get(s);if(o!==void 0)return o;if((o=i.get(s))!==void 0)return r(s,o),o},set(s,o){t.has(s)?t.set(s,o):r(s,o)}}},yP="!",p5=n=>{const{separator:e,experimentalParseClassName:t}=n,i=e.length===1,r=e[0],s=e.length,o=a=>{const l=[];let c=0,h=0,f;for(let x=0;x<a.length;x++){let g=a[x];if(c===0){if(g===r&&(i||a.slice(x,x+s)===e)){l.push(a.slice(h,x)),h=x+s;continue}if(g==="/"){f=x;continue}}g==="["?c++:g==="]"&&c--}const p=l.length===0?a:a.substring(h),m=p.startsWith(yP),v=m?p.substring(1):p,A=f&&f>h?f-h:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:v,maybePostfixModifierPosition:A}};return t?a=>t({className:a,parseClassName:o}):o},m5=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(i=>{i[0]==="["?(e.push(...t.sort(),i),t=[]):t.push(i)}),e.push(...t.sort()),e},g5=n=>({cache:f5(n.cacheSize),parseClassName:p5(n),...l5(n)}),v5=/\s+/,y5=(n,e)=>{const{parseClassName:t,getClassGroupId:i,getConflictingClassGroupIds:r}=e,s=[],o=n.trim().split(v5);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:h,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:m}=t(c);let v=!!m,A=i(v?p.substring(0,m):p);if(!A){if(!v){a=c+(a.length>0?" "+a:a);continue}if(A=i(p),!A){a=c+(a.length>0?" "+a:a);continue}v=!1}const x=m5(h).join(":"),g=f?x+yP:x,S=g+A;if(s.includes(S))continue;s.push(S);const _=r(A,v);for(let w=0;w<_.length;++w){const I=_[w];s.push(g+I)}a=c+(a.length>0?" "+a:a)}return a};function x5(){let n=0,e,t,i="";for(;n<arguments.length;)(e=arguments[n++])&&(t=xP(e))&&(i&&(i+=" "),i+=t);return i}const xP=n=>{if(typeof n=="string")return n;let e,t="";for(let i=0;i<n.length;i++)n[i]&&(e=xP(n[i]))&&(t&&(t+=" "),t+=e);return t};function _5(n,...e){let t,i,r,s=o;function o(l){const c=e.reduce((h,f)=>f(h),n());return t=g5(c),i=t.cache.get,r=t.cache.set,s=a,a(l)}function a(l){const c=i(l);if(c)return c;const h=y5(l,t);return r(l,h),h}return function(){return s(x5.apply(null,arguments))}}const ln=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},_P=/^\[(?:([a-z-]+):)?(.+)\]$/i,A5=/^\d+\/\d+$/,S5=new Set(["px","full","screen"]),M5=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,w5=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,E5=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,C5=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,b5=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Us=n=>kc(n)||S5.has(n)||A5.test(n),Bo=n=>fu(n,"length",N5),kc=n=>!!n&&!Number.isNaN(Number(n)),ux=n=>fu(n,"number",kc),nd=n=>!!n&&Number.isInteger(Number(n)),T5=n=>n.endsWith("%")&&kc(n.slice(0,-1)),Ct=n=>_P.test(n),Lo=n=>M5.test(n),R5=new Set(["length","size","percentage"]),I5=n=>fu(n,R5,AP),P5=n=>fu(n,"position",AP),B5=new Set(["image","url"]),L5=n=>fu(n,B5,U5),D5=n=>fu(n,"",F5),id=()=>!0,fu=(n,e,t)=>{const i=_P.exec(n);return i?i[1]?typeof e=="string"?i[1]===e:e.has(i[1]):t(i[2]):!1},N5=n=>w5.test(n)&&!E5.test(n),AP=()=>!1,F5=n=>C5.test(n),U5=n=>b5.test(n),O5=()=>{const n=ln("colors"),e=ln("spacing"),t=ln("blur"),i=ln("brightness"),r=ln("borderColor"),s=ln("borderRadius"),o=ln("borderSpacing"),a=ln("borderWidth"),l=ln("contrast"),c=ln("grayscale"),h=ln("hueRotate"),f=ln("invert"),p=ln("gap"),m=ln("gradientColorStops"),v=ln("gradientColorStopPositions"),A=ln("inset"),x=ln("margin"),g=ln("opacity"),S=ln("padding"),_=ln("saturate"),w=ln("scale"),I=ln("sepia"),T=ln("skew"),P=ln("space"),B=ln("translate"),R=()=>["auto","contain","none"],C=()=>["auto","hidden","clip","visible","scroll"],U=()=>["auto",Ct,e],j=()=>[Ct,e],K=()=>["",Us,Bo],te=()=>["auto",kc,Ct],de=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],re=()=>["solid","dashed","dotted","double","none"],ge=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],F=()=>["start","end","center","between","around","evenly","stretch"],k=()=>["","0",Ct],W=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Y=()=>[kc,Ct];return{cacheSize:500,separator:":",theme:{colors:[id],spacing:[Us,Bo],blur:["none","",Lo,Ct],brightness:Y(),borderColor:[n],borderRadius:["none","","full",Lo,Ct],borderSpacing:j(),borderWidth:K(),contrast:Y(),grayscale:k(),hueRotate:Y(),invert:k(),gap:j(),gradientColorStops:[n],gradientColorStopPositions:[T5,Bo],inset:U(),margin:U(),opacity:Y(),padding:j(),saturate:Y(),scale:Y(),sepia:k(),skew:Y(),space:j(),translate:j()},classGroups:{aspect:[{aspect:["auto","square","video",Ct]}],container:["container"],columns:[{columns:[Lo]}],"break-after":[{"break-after":W()}],"break-before":[{"break-before":W()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...de(),Ct]}],overflow:[{overflow:C()}],"overflow-x":[{"overflow-x":C()}],"overflow-y":[{"overflow-y":C()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[A]}],"inset-x":[{"inset-x":[A]}],"inset-y":[{"inset-y":[A]}],start:[{start:[A]}],end:[{end:[A]}],top:[{top:[A]}],right:[{right:[A]}],bottom:[{bottom:[A]}],left:[{left:[A]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",nd,Ct]}],basis:[{basis:U()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ct]}],grow:[{grow:k()}],shrink:[{shrink:k()}],order:[{order:["first","last","none",nd,Ct]}],"grid-cols":[{"grid-cols":[id]}],"col-start-end":[{col:["auto",{span:["full",nd,Ct]},Ct]}],"col-start":[{"col-start":te()}],"col-end":[{"col-end":te()}],"grid-rows":[{"grid-rows":[id]}],"row-start-end":[{row:["auto",{span:[nd,Ct]},Ct]}],"row-start":[{"row-start":te()}],"row-end":[{"row-end":te()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ct]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ct]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...F()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...F(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...F(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[S]}],px:[{px:[S]}],py:[{py:[S]}],ps:[{ps:[S]}],pe:[{pe:[S]}],pt:[{pt:[S]}],pr:[{pr:[S]}],pb:[{pb:[S]}],pl:[{pl:[S]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ct,e]}],"min-w":[{"min-w":[Ct,e,"min","max","fit"]}],"max-w":[{"max-w":[Ct,e,"none","full","min","max","fit","prose",{screen:[Lo]},Lo]}],h:[{h:[Ct,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ct,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ct,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ct,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Lo,Bo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",ux]}],"font-family":[{font:[id]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ct]}],"line-clamp":[{"line-clamp":["none",kc,ux]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Us,Ct]}],"list-image":[{"list-image":["none",Ct]}],"list-style-type":[{list:["none","disc","decimal",Ct]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...re(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Us,Bo]}],"underline-offset":[{"underline-offset":["auto",Us,Ct]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:j()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ct]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ct]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...de(),P5]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",I5]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},L5]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:[...re(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:re()}],"border-color":[{border:[r]}],"border-color-x":[{"border-x":[r]}],"border-color-y":[{"border-y":[r]}],"border-color-s":[{"border-s":[r]}],"border-color-e":[{"border-e":[r]}],"border-color-t":[{"border-t":[r]}],"border-color-r":[{"border-r":[r]}],"border-color-b":[{"border-b":[r]}],"border-color-l":[{"border-l":[r]}],"divide-color":[{divide:[r]}],"outline-style":[{outline:["",...re()]}],"outline-offset":[{"outline-offset":[Us,Ct]}],"outline-w":[{outline:[Us,Bo]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:K()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[Us,Bo]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",Lo,D5]}],"shadow-color":[{shadow:[id]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":[...ge(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ge()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[i]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Lo,Ct]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[_]}],sepia:[{sepia:[I]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[i]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[I]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ct]}],duration:[{duration:Y()}],ease:[{ease:["linear","in","out","in-out",Ct]}],delay:[{delay:Y()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ct]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[w]}],"scale-x":[{"scale-x":[w]}],"scale-y":[{"scale-y":[w]}],rotate:[{rotate:[nd,Ct]}],"translate-x":[{"translate-x":[B]}],"translate-y":[{"translate-y":[B]}],"skew-x":[{"skew-x":[T]}],"skew-y":[{"skew-y":[T]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ct]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ct]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":j()}],"scroll-mx":[{"scroll-mx":j()}],"scroll-my":[{"scroll-my":j()}],"scroll-ms":[{"scroll-ms":j()}],"scroll-me":[{"scroll-me":j()}],"scroll-mt":[{"scroll-mt":j()}],"scroll-mr":[{"scroll-mr":j()}],"scroll-mb":[{"scroll-mb":j()}],"scroll-ml":[{"scroll-ml":j()}],"scroll-p":[{"scroll-p":j()}],"scroll-px":[{"scroll-px":j()}],"scroll-py":[{"scroll-py":j()}],"scroll-ps":[{"scroll-ps":j()}],"scroll-pe":[{"scroll-pe":j()}],"scroll-pt":[{"scroll-pt":j()}],"scroll-pr":[{"scroll-pr":j()}],"scroll-pb":[{"scroll-pb":j()}],"scroll-pl":[{"scroll-pl":j()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ct]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[Us,Bo,ux]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},k5=_5(O5);function On(...n){return k5(a5(n))}const z5=()=>{const n=Ft(s=>s.isLoaded),[e,t]=H.useState(0),[i,r]=H.useState(!0);return H.useEffect(()=>{if(n){const s=setInterval(()=>{t(o=>o>=100?(clearInterval(s),setTimeout(()=>{r(!1)},500),100):Math.min(o+5,100))},50);return()=>clearInterval(s)}else{const s=setInterval(()=>{t(o=>o>=90?(clearInterval(s),90):o+Math.random()*5)},200);return()=>clearInterval(s)}},[n]),i?L.jsxs("div",{className:On("fixed inset-0 bg-[#000000] z-50 flex flex-col items-center justify-center","transition-opacity duration-1000",e>=100?"opacity-0":"opacity-100"),children:[L.jsx("h1",{className:"text-[#FFA726] text-5xl md:text-6xl font-bold mb-6 text-center",children:"Cosmic Explorer"}),L.jsx("div",{className:"w-64 md:w-80 bg-[#212121] rounded-full h-3 mb-4 overflow-hidden",children:L.jsx("div",{className:"h-full bg-[#4FC3F7] rounded-full transition-all duration-300 ease-out",style:{width:`${e}%`}})}),L.jsx("p",{className:"text-[#4FC3F7] text-lg",children:e<100?"Loading space assets...":"Launching exploration..."}),L.jsx("div",{className:"mt-10 flex justify-center space-x-1",children:Array.from({length:3}).map((s,o)=>L.jsx("div",{className:"w-3 h-3 rounded-full bg-[#1A237E] animate-pulse",style:{animationDelay:`${o*.2}s`,animationDuration:"1s"}},o))})]}):null},H5=()=>{const[n,e]=H.useState(!0),t=Ft(a=>a.isLoaded),i=Ft(a=>a.setCameraDistance),r=Ft(a=>a.cameraDistance),{isMuted:s,toggleMute:o}=pP();return H.useEffect(()=>{if(t){const a=setTimeout(()=>{e(!1)},5e3);return()=>clearTimeout(a)}},[t]),H.useEffect(()=>{const a=()=>{e(!0);const l=setTimeout(()=>{e(!1)},3e3);return()=>clearTimeout(l)};return window.addEventListener("mousemove",a),()=>window.removeEventListener("mousemove",a)},[]),L.jsxs("div",{className:On("absolute bottom-6 left-1/2 transform -translate-x-1/2 p-4 bg-[#111111] bg-opacity-70","backdrop-blur-md rounded-lg border border-[#1A237E] transition-opacity duration-300",n?"opacity-100":"opacity-0"),children:[L.jsxs("div",{className:"flex space-x-4 items-center",children:[L.jsxs("div",{className:"flex flex-col",children:[L.jsx("span",{className:"text-[#4FC3F7] text-xs mb-1",children:"Camera Distance"}),L.jsx("input",{type:"range",min:"10",max:"200",value:r,onChange:a=>i(Number(a.target.value)),className:"w-40 accent-[#FFA726]"})]}),L.jsxs("button",{onClick:o,className:On("px-3 py-2 rounded-md bg-[#424242] hover:bg-[#616161] transition-colors","border border-[#1A237E] flex items-center gap-2"),children:[L.jsxs("span",{className:"text-white text-sm",children:[s?"Unmute":"Mute"," Sound"]}),L.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-[#4FC3F7]",children:s?L.jsxs(L.Fragment,{children:[L.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"}),L.jsx("path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12M15 9.34V4a3 3 0 0 0-5.94-.6"}),L.jsx("path",{d:"M17 16.95A7 7 0 0 1 5 12v-2m14 0v2a7 7 0 0 1-.11 1.23"}),L.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"23"}),L.jsx("line",{x1:"8",y1:"23",x2:"16",y2:"23"})]}):L.jsxs(L.Fragment,{children:[L.jsx("path",{d:"M3 10v4a1 1 0 0 0 1 1h3l3.29 3.29c.63.63 1.71.18 1.71-.71V6.41c0-.89-1.08-1.34-1.71-.71L7 9H4a1 1 0 0 0-1 1z"}),L.jsx("path",{d:"M16.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z"})]})})]})]}),L.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-x-2 gap-y-1 text-xs text-white",children:[L.jsxs("div",{className:"flex items-center",children:[L.jsx("kbd",{className:"px-2 py-1 bg-[#424242] rounded mr-2",children:"W/↑"}),L.jsx("span",{children:"Move Forward"})]}),L.jsxs("div",{className:"flex items-center",children:[L.jsx("kbd",{className:"px-2 py-1 bg-[#424242] rounded mr-2",children:"S/↓"}),L.jsx("span",{children:"Move Backward"})]}),L.jsxs("div",{className:"flex items-center",children:[L.jsx("kbd",{className:"px-2 py-1 bg-[#424242] rounded mr-2",children:"A/←"}),L.jsx("span",{children:"Move Left"})]}),L.jsxs("div",{className:"flex items-center",children:[L.jsx("kbd",{className:"px-2 py-1 bg-[#424242] rounded mr-2",children:"D/→"}),L.jsx("span",{children:"Move Right"})]}),L.jsxs("div",{className:"flex items-center",children:[L.jsx("kbd",{className:"px-2 py-1 bg-[#424242] rounded mr-2",children:"E"}),L.jsx("span",{children:"Zoom In"})]}),L.jsxs("div",{className:"flex items-center",children:[L.jsx("kbd",{className:"px-2 py-1 bg-[#424242] rounded mr-2",children:"Q"}),L.jsx("span",{children:"Zoom Out"})]}),L.jsxs("div",{className:"flex items-center",children:[L.jsx("kbd",{className:"px-2 py-1 bg-[#424242] rounded mr-2",children:"R"}),L.jsx("span",{children:"Reset Camera"})]}),L.jsxs("div",{className:"flex items-center",children:[L.jsx("kbd",{className:"px-2 py-1 bg-[#424242] rounded mr-2",children:"T"}),L.jsx("span",{children:"Toggle Spacecraft"})]})]})]})},G5=()=>{const n=Ft(s=>s.focusedBody),[e,t]=H.useState(null),[i,r]=H.useState(!1);return H.useEffect(()=>{if(n){const s=Vs.find(o=>o.id===n);t(s),r(!0)}else r(!1)},[n]),!i||!e?null:L.jsxs("div",{className:On("absolute bottom-6 right-6 p-6 w-80 bg-[#111111] bg-opacity-70 backdrop-blur-md","text-white rounded-lg border border-[#1A237E] shadow-lg transition-all duration-300","transform origin-bottom-right hover:scale-105"),children:[L.jsx("h2",{className:"text-[#FFA726] text-2xl font-bold mb-3",children:e.name}),L.jsxs("div",{className:"space-y-2",children:[L.jsxs("div",{className:"flex justify-between",children:[L.jsx("span",{className:"text-[#4FC3F7]",children:"Type:"}),L.jsx("span",{className:"text-white capitalize",children:e.type})]}),e.diameter&&L.jsxs("div",{className:"flex justify-between",children:[L.jsx("span",{className:"text-[#4FC3F7]",children:"Diameter:"}),L.jsxs("span",{className:"text-white",children:[e.diameter," km"]})]}),e.dayLength&&L.jsxs("div",{className:"flex justify-between",children:[L.jsx("span",{className:"text-[#4FC3F7]",children:"Day Length:"}),L.jsx("span",{className:"text-white",children:e.dayLength})]}),e.yearLength&&L.jsxs("div",{className:"flex justify-between",children:[L.jsx("span",{className:"text-[#4FC3F7]",children:"Year Length:"}),L.jsx("span",{className:"text-white",children:e.yearLength})]}),e.temperature&&L.jsxs("div",{className:"flex justify-between",children:[L.jsx("span",{className:"text-[#4FC3F7]",children:"Temperature:"}),L.jsx("span",{className:"text-white",children:e.temperature})]})]}),e.description&&L.jsx("div",{className:"mt-4 border-t border-[#1A237E] pt-3",children:L.jsx("p",{className:"text-white text-sm leading-relaxed",children:e.description})}),L.jsx("button",{className:"mt-4 w-full py-2 bg-[#1A237E] hover:bg-[#283593] text-white rounded-md transition-colors",onClick:()=>r(!1),children:"Close"})]})};function V5(){Ft(e=>e.isEducationalPanelOpen);const n=Ft(e=>e.toggleEducationalPanel);return L.jsxs("button",{onClick:n,className:"flex items-center justify-center w-full p-2 bg-[#FFA726] hover:bg-[#FB8C00] rounded-md transition-all duration-150 text-white font-medium focus:outline-none focus:ring-2 focus:ring-[#4FC3F7] focus:ring-opacity-50",title:"Space Education Center",children:[L.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-2",children:[L.jsx("path",{d:"M12 14l9-5-9-5-9 5 9 5z"}),L.jsx("path",{d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),L.jsx("path",{d:"M12 14l-6.16-3.422a12.083 12.083 0 00-.665 6.479A11.952 11.952 0 0112 20.055a11.952 11.952 0 016.824-2.998a12.078 12.078 0 00-.665-6.479L12 14z"})]}),"Space Education Center"]})}const W5=()=>{const[n,e]=H.useState(!1),t=Ft(a=>a.setFocusedBody),i=Ft(a=>a.focusedBody),r=Ft(a=>a.isLoaded),s=Vs.reduce((a,l)=>(a[l.type]||(a[l.type]=[]),a[l.type].push(l),a),{}),o=["star","planet","moon","dwarf","spacecraft"];return r?L.jsxs("div",{className:"absolute top-6 left-6",children:[L.jsx("button",{onClick:()=>e(!n),className:On("w-12 h-12 rounded-full flex items-center justify-center","bg-[#1A237E] hover:bg-[#283593] text-white transition-colors","border border-[#4FC3F7] shadow-lg"),children:L.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[L.jsx("circle",{cx:"12",cy:"12",r:"10"}),L.jsx("circle",{cx:"12",cy:"12",r:"4"}),L.jsx("line",{x1:"4.93",y1:"4.93",x2:"9.17",y2:"9.17"}),L.jsx("line",{x1:"14.83",y1:"14.83",x2:"19.07",y2:"19.07"}),L.jsx("line",{x1:"14.83",y1:"9.17",x2:"19.07",y2:"4.93"}),L.jsx("line",{x1:"4.93",y1:"19.07",x2:"9.17",y2:"14.83"})]})}),n&&L.jsxs("div",{className:On("mt-2 p-4 bg-[#111111] bg-opacity-80 backdrop-blur-md rounded-lg","border border-[#1A237E] w-64 shadow-lg"),children:[L.jsxs("div",{className:"flex justify-between items-center mb-3",children:[L.jsx("h2",{className:"text-[#FFA726] text-lg font-bold",children:"Navigation"}),L.jsx("button",{onClick:()=>e(!1),className:"text-[#4FC3F7] hover:text-white transition-colors",children:L.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[L.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),L.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),L.jsx("div",{className:"space-y-3",children:o.map(a=>!s[a]||s[a].length===0?null:L.jsxs("div",{children:[L.jsx("h3",{className:"text-[#4FC3F7] text-sm font-semibold mb-1 capitalize",children:a==="dwarf"?"Dwarf Planets":a+"s"}),L.jsx("div",{className:"space-y-1",children:s[a].map(l=>L.jsx("button",{onClick:()=>{t(l.id)},className:On("w-full text-left px-3 py-1.5 rounded-md text-sm transition-colors",i===l.id?"bg-[#1A237E] text-white":"hover:bg-[#424242] text-gray-200 bg-[#212121]"),children:l.name},l.id))})]},a))}),L.jsxs("div",{className:"flex flex-col space-y-2 mt-3",children:[L.jsx("button",{onClick:()=>t(null),className:On("w-full py-2 bg-[#1A237E] hover:bg-[#283593] text-white rounded-md transition-colors","border border-[#1A237E]"),children:"Overview"}),L.jsx("div",{className:"w-full",children:L.jsx(V5,{})})]})]})]}):null},j5=()=>{const[n,e]=H.useState(!0),t=Ft(c=>c.isPaused),i=Ft(c=>c.timeScale),r=Ft(c=>c.setIsPaused),s=Ft(c=>c.setTimeScale),o=Ft(c=>c.isLoaded);H.useEffect(()=>{if(o){const c=setTimeout(()=>{e(!1)},5e3);return()=>clearTimeout(c)}},[o]),H.useEffect(()=>{const c=()=>{e(!0);const h=setTimeout(()=>{e(!1)},3e3);return()=>clearTimeout(h)};return window.addEventListener("mousemove",c),()=>window.removeEventListener("mousemove",c)},[]);const a=[{label:"0.25x",value:.25},{label:"0.5x",value:.5},{label:"1x",value:1},{label:"2x",value:2},{label:"5x",value:5},{label:"10x",value:10}],l=()=>{r(!t)};return L.jsxs("div",{className:On("absolute top-6 right-6 p-3 bg-[#111111] bg-opacity-70","backdrop-blur-md rounded-lg border border-[#1A237E] transition-opacity duration-300",n?"opacity-100":"opacity-0"),children:[L.jsxs("div",{className:"flex items-center gap-3",children:[L.jsx("button",{onClick:l,className:On("w-10 h-10 rounded-full flex items-center justify-center","border border-[#1A237E] transition-colors",t?"bg-[#FFA726] text-black":"bg-[#1A237E] text-white"),title:t?"Resume":"Pause",children:t?L.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:L.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}):L.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[L.jsx("rect",{x:"6",y:"4",width:"4",height:"16"}),L.jsx("rect",{x:"14",y:"4",width:"4",height:"16"})]})}),L.jsxs("div",{className:"flex flex-col",children:[L.jsx("span",{className:"text-[#4FC3F7] text-xs mb-1",children:"Time Scale"}),L.jsx("div",{className:"flex space-x-1",children:a.map(c=>L.jsx("button",{onClick:()=>s(c.value),className:On("px-2 py-1 text-xs rounded transition-colors",i===c.value?"bg-[#1A237E] text-white":"bg-[#424242] text-gray-300 hover:bg-[#616161]"),children:c.label},c.value))})]})]}),L.jsx("div",{className:"mt-2 text-center text-xs text-[#4FC3F7]",children:t?"Simulation Paused":`Simulation running at ${i}x speed`})]})},WC=[{id:"sun",name:"The Sun",type:"Star",overview:"The Sun is the star at the center of our Solar System. It is a nearly perfect sphere of hot plasma, heated to incandescence by nuclear fusion reactions in its core. The Sun radiates energy mainly as light, ultraviolet, and infrared radiation, and is the most important source of energy for life on Earth.",composition:"The Sun is composed primarily of hydrogen (73%) and helium (25%), with the remaining 2% consisting of heavier elements such as oxygen, carbon, neon, and iron.",atmosphere:"The Sun's atmosphere consists of the photosphere (the visible surface), the chromosphere (a thin layer above the photosphere), and the corona (the extended outer atmosphere).",notableFeatures:["Solar flares - sudden, intense brightening on the Sun's surface, often followed by a coronal mass ejection","Sunspots - temporarily dark areas on the Sun's photosphere that appear dark because they are cooler than surrounding areas","Solar wind - a stream of charged particles released from the Sun's corona, which influences Earth's magnetosphere","Core temperature of about 15 million degrees Celsius (27 million degrees Fahrenheit)","Surface temperature of about 5,500 degrees Celsius (9,940 degrees Fahrenheit)"],explorationHistory:[{title:"Early Observations",content:"Humans have observed the Sun since prehistoric times. Many ancient civilizations, including the Egyptians and Aztecs, considered it a deity. Galileo Galilei was one of the first to observe sunspots through a telescope in 1610."},{title:"Solar and Heliospheric Observatory (SOHO)",content:"Launched in 1995, SOHO is a joint mission between NASA and ESA. It has provided valuable data about the Sun's internal structure, outer atmosphere, solar wind, and solar activities.",imageUrl:"/images/educational/soho.jpg"},{title:"Parker Solar Probe",content:"Launched in 2018, NASA's Parker Solar Probe will fly closer to the Sun than any previous spacecraft. It aims to trace how energy and heat move through the Sun's corona and explore what accelerates the solar wind.",imageUrl:"/images/educational/parker.jpg"},{title:"Solar Orbiter",content:"Launched in 2020, the ESA-led Solar Orbiter mission will provide close-up, high-latitude observations of the Sun to better understand the solar wind, the heliospheric magnetic field, solar energetic particles, and the Sun's polar regions."}],funFacts:["The Sun is about 4.6 billion years old and is expected to remain relatively stable for another 5 billion years.","The Sun makes up 99.86% of the mass of the Solar System.","Light from the Sun takes about 8 minutes and 20 seconds to reach Earth.","Every second, the Sun converts about 600 million tons of hydrogen into helium.","The Sun is a yellow dwarf star, classified as a G2V star, with G2 indicating its surface temperature and V representing that it is in the main sequence."]},{id:"mercury",name:"Mercury",type:"Planet",overview:"Mercury is the smallest and innermost planet in the Solar System. It orbits the Sun every 88 days, the fastest of all the planets. Despite being close to the Sun, it is not the hottest planet (Venus is hotter due to its dense atmosphere). Mercury has a large iron core and a very thin atmosphere.",composition:"Mercury is primarily composed of iron, with a thin silicate mantle and crust. Its iron core makes up about 60% of its mass, higher than any other major planet in the Solar System.",atmosphere:"Mercury has a very thin, almost negligible atmosphere (exosphere) consisting mainly of oxygen, sodium, hydrogen, helium, and potassium. This atmosphere is constantly being lost and replenished from various sources.",surfaceFeatures:"Mercury's surface is heavily cratered, similar to the Moon, with smooth plains and no plate tectonics. It has cliff-like escarpments called 'rupes' and valleys called 'valles'. The Caloris Basin is one of the largest impact craters in the Solar System.",notableFeatures:["Extreme temperature variations ranging from -173°C (-280°F) at night to 427°C (800°F) during the day","Caloris Basin, a massive impact crater about 1,550 km in diameter","The presence of ice in permanently shadowed craters at the poles","A global magnetic field, though weaker than Earth's","A 3:2 spin-orbit resonance, meaning it rotates three times for every two orbits around the Sun"],explorationHistory:[{title:"Mariner 10",content:"Launched in 1973, NASA's Mariner 10 was the first spacecraft to visit Mercury. It flew past Mercury three times in 1974-1975 and mapped about 45% of the planet's surface.",imageUrl:"/images/educational/mariner10.jpg"},{title:"MESSENGER",content:"NASA's MESSENGER (MErcury Surface, Space ENvironment, GEochemistry, and Ranging) orbited Mercury from 2011 to 2015. It provided comprehensive data about Mercury's surface, geology, magnetic field, and exosphere.",imageUrl:"/images/educational/messenger.jpg"},{title:"BepiColombo",content:"Launched in 2018, BepiColombo is a joint mission between ESA and JAXA. It consists of two orbiters that will study Mercury's composition, geophysics, atmosphere, magnetosphere, and history. It is scheduled to reach Mercury in 2025.",imageUrl:"/images/educational/bepicolombo.jpg"}],funFacts:["A day on Mercury (from noon to noon) lasts about 176 Earth days, while its year is just 88 Earth days.","Mercury is gradually slowing down; in about 5 billion years, it will be tidally locked with the Sun.","Mercury is shrinking! As its iron core cools and contracts, the planet's diameter has decreased by about 14 kilometers.","Despite being closer to the Sun, Mercury's surface can be colder than Mars at night because it has almost no atmosphere to retain heat.","Mercury's orbit is the most eccentric (oval-shaped) of all the planets, and it has the highest orbital inclination relative to Earth's orbit."]},{id:"venus",name:"Venus",type:"Planet",overview:"Venus is the second planet from the Sun and Earth's closest planetary neighbor. It's a terrestrial planet similar in size and composition to Earth, but with a dense, toxic atmosphere of carbon dioxide and clouds of sulfuric acid. The extreme greenhouse effect makes it the hottest planet in our solar system, despite being farther from the Sun than Mercury.",composition:"Venus is composed of a central iron core, a rocky mantle, and a silicate crust. Its composition is believed to be similar to Earth's, but with less water and more carbon dioxide.",atmosphere:"Venus has an extremely dense atmosphere consisting of 96% carbon dioxide, 3.5% nitrogen, and traces of other gases. The atmospheric pressure at the surface is about 92 times that of Earth's - equivalent to the pressure found 900 m (3,000 ft) underwater on Earth. Its thick cloud layers of sulfuric acid reflect light, making it the brightest natural object in Earth's night sky after the Moon.",surfaceFeatures:"The surface of Venus features vast volcanic plains, highland regions, and numerous large volcanoes. It has few impact craters, suggesting a relatively young surface that has been reshaped by volcanic activity. Notable features include Maxwell Montes, the highest mountain on Venus, and extensive lava flows.",notableFeatures:["Surface temperature of about 462°C (864°F), hot enough to melt lead","Atmospheric pressure at the surface is 92 times that of Earth","Rotates in the opposite direction to most planets (retrograde rotation)","A day on Venus is longer than its year (243 Earth days vs. 225 Earth days)","No magnetic field despite its similar size to Earth"],explorationHistory:[{title:"Early Soviet Missions",content:"The Soviet Union's Venera program (1961-1983) included the first spacecraft to land on another planet. Venera 7 was the first to make a soft landing on Venus in 1970, and Venera 9 provided the first images from the surface in 1975.",imageUrl:"/images/educational/venera.jpg"},{title:"NASA Missions",content:"NASA's Mariner 2 was the first successful planetary flyby mission in 1962. The Pioneer Venus missions (1978) studied the atmosphere and mapped the surface using radar. Magellan (1989-1994) created the first global radar map of Venus, revealing its surface features hidden beneath the clouds.",imageUrl:"/images/educational/magellan.jpg"},{title:"Venus Express",content:"ESA's Venus Express orbited Venus from 2006 to 2014, studying its atmosphere, plasma environment, and surface. It confirmed lightning in Venus's atmosphere and discovered evidence of recent volcanic activity.",imageUrl:"/images/educational/venus_express.jpg"},{title:"Akatsuki",content:"JAXA's Akatsuki (launched in 2010) is currently orbiting Venus, studying its meteorology and searching for evidence of active volcanoes and lightning."}],funFacts:["Venus rotates so slowly that its day (243 Earth days) is longer than its year (225 Earth days).","If you stood on Venus, the Sun would rise in the west and set in the east due to its retrograde rotation.","Venus has more volcanoes than any other planet in our solar system, with over 1,600 major volcanoes.","The atmospheric pressure on Venus's surface is equivalent to being about 900 meters (3,000 feet) underwater on Earth.","Despite its harsh conditions now, Venus may have had oceans and been habitable for billions of years before undergoing a runaway greenhouse effect."]},{id:"earth",name:"Earth",type:"Planet",overview:"Earth is the third planet from the Sun and the only astronomical object known to harbor life. About 71% of Earth's surface is covered with water, with the remaining 29% consisting of continents and islands. Earth's atmosphere, which supports life, consists primarily of nitrogen and oxygen.",composition:"Earth has an inner core, outer core, mantle, and crust. The inner core is solid iron, while the outer core is liquid iron mixed with nickel. The mantle consists of semi-solid rock, and the crust is Earth's outer layer made up of solid rocks and minerals.",atmosphere:"Earth's atmosphere consists of 78% nitrogen, 21% oxygen, and 1% other gases including argon, carbon dioxide, and water vapor. The atmosphere protects Earth from harmful solar radiation and regulates temperature through the greenhouse effect.",surfaceFeatures:"Earth has diverse terrains including mountains, plains, deserts, forests, tundras, and bodies of water. Plate tectonics shapes the surface through the movement of large sections of the crust, creating mountain ranges and ocean trenches.",moons:["The Moon - Earth's only natural satellite, about 1/4 of Earth's diameter and formed around 4.5 billion years ago, likely from a massive collision with a Mars-sized body."],notableFeatures:["The only known planet to support life","71% of surface covered by liquid water","Strong magnetic field that protects against solar radiation","Active plate tectonics that constantly reshape the surface","Diverse ecosystems spanning from deep oceans to high mountains"],explorationHistory:[{title:"First View from Space",content:"The first photographs of Earth from space were taken by the V-2 rockets launched in the late 1940s. The first full-disk image of Earth was taken by the ATS-3 satellite in 1967.",imageUrl:"/images/educational/earth_from_space.jpg"},{title:"Apollo Program",content:"NASA's Apollo missions provided the first human observations of Earth from space and the iconic 'Earthrise' photo taken by Apollo 8 in 1968. The 'Blue Marble' photo from Apollo 17 in 1972 became one of the most reproduced images in history.",imageUrl:"/images/educational/blue_marble.jpg"},{title:"Earth Observation Satellites",content:"Numerous satellites monitor Earth's weather, climate, oceans, land, and atmosphere. Notable programs include NASA's Landsat series (since 1972), which provides the longest continuous space-based record of Earth's land, and the European Space Agency's Copernicus program.",imageUrl:"/images/educational/landsat.jpg"},{title:"International Space Station",content:"The ISS, continuously occupied since 2000, serves as a platform for Earth observation and research on how living in space affects humans. Astronauts on the ISS take thousands of photographs of Earth, documenting changes over time.",imageUrl:"/images/educational/iss_earth.jpg"}],funFacts:["Earth is the only planet not named after a god or goddess from Greek or Roman mythology.","Earth's rotation is gradually slowing at approximately 17 milliseconds per hundred years.","The highest point on Earth is Mount Everest (8,848.86 meters above sea level), and the deepest point is the Challenger Deep in the Mariana Trench (10,994 meters below sea level).","Earth has a powerful magnetic field created by its iron core, which shields us from harmful solar radiation and creates the beautiful aurora borealis and aurora australis.","Earth's atmosphere extends about 10,000 kilometers (6,200 miles) above the planet's surface, gradually becoming thinner until it merges with space."]},{id:"mars",name:"Mars",type:"Planet",overview:"Mars is the fourth planet from the Sun and the second-smallest planet in the Solar System. Known as the 'Red Planet' due to the iron oxide prevalent on its surface, Mars has a thin atmosphere, surface features reminiscent of Earth, and seasons similar to our own due to its axial tilt.",composition:"Mars has a core made primarily of iron, nickel, and sulfur, surrounded by a silicate mantle and a crust composed mainly of basalt. The planet's distinctive red color comes from iron oxide (rust) on its surface.",atmosphere:"Mars has a thin atmosphere consisting of about 95% carbon dioxide, 2.7% nitrogen, 1.6% argon, and traces of oxygen and water vapor. The atmospheric pressure on Mars is less than 1% of Earth's, equivalent to the pressure at about 35 km (22 mi) above Earth's surface.",surfaceFeatures:"Mars has diverse terrain including the largest volcano in the Solar System (Olympus Mons), the largest canyon system (Valles Marineris), polar ice caps, channels, gullies, and vast plains. Evidence suggests water once flowed on the surface.",moons:["Phobos - A small, irregularly shaped moon orbiting close to Mars, likely to crash into Mars or break apart within 50 million years","Deimos - The smaller and outermost of Mars' two moons, orbiting farther from the planet"],notableFeatures:["Olympus Mons, the tallest volcano in the Solar System (about 22 km or 13.6 mi high)","Valles Marineris, a system of canyons stretching over 4,000 km (2,500 mi) long","Polar ice caps composed of water ice and carbon dioxide ice that expand and contract seasonally","Evidence of ancient river valleys, lake beds, and deltas suggesting liquid water once flowed on the surface","Dust storms that can cover the entire planet and last for months"],explorationHistory:[{title:"Early Missions",content:"The first successful Mars flyby was NASA's Mariner 4 in 1965, which sent back 22 images. Mariner 9 (1971-1972) was the first spacecraft to orbit another planet and mapped about 85% of Mars' surface.",imageUrl:"/images/educational/mariner9.jpg"},{title:"Viking Program",content:"NASA's Viking 1 and 2 (1976) were the first successful Mars landers, conducting experiments to search for microbial life. They provided the first detailed surface images and analyzed soil samples.",imageUrl:"/images/educational/viking.jpg"},{title:"Mars Exploration Rovers",content:"NASA's Spirit and Opportunity rovers (2004) significantly advanced our understanding of Mars's geology and past water activity. Opportunity operated for over 14 years, far exceeding its planned 90-day mission.",imageUrl:"/images/educational/opportunity.jpg"},{title:"Curiosity and Perseverance",content:"NASA's Curiosity rover (2012-present) and Perseverance rover (2021-present) are investigating Mars's habitability, climate, geology, and potential for past life. Perseverance is collecting samples for future return to Earth and deployed the Ingenuity helicopter, the first aircraft to fly on another planet.",imageUrl:"/images/educational/perseverance.jpg"},{title:"International Missions",content:"Multiple space agencies have sent missions to Mars, including ESA's Mars Express orbiter (2003-present), India's Mars Orbiter Mission (2014-2022), and the UAE's Hope orbiter (2021-present). China's Tianwen-1 mission (2021) successfully delivered the Zhurong rover to the surface.",imageUrl:"/images/educational/mars_express.jpg"}],funFacts:["A day on Mars (called a sol) is only slightly longer than an Earth day at 24 hours and 37 minutes.","Mars experiences seasons similar to Earth because its axis is tilted at about 25 degrees, comparable to Earth's 23.5-degree tilt.","Gravity on Mars is about 38% of Earth's, so you could jump nearly three times higher on Mars.","Mars has the largest dust storms in the Solar System, sometimes engulfing the entire planet for months.","Scientists have found evidence that liquid water may still flow on Mars's surface during the warmest months, though only briefly and in very small amounts."]},{id:"jupiter",name:"Jupiter",type:"Planet",overview:"Jupiter is the fifth planet from the Sun and the largest in the Solar System. It is a gas giant composed mainly of hydrogen and helium, with a mass more than two and a half times that of all the other planets combined. Jupiter's rapid rotation (a day is just under 10 hours) causes its equatorial regions to bulge and its polar regions to flatten, giving it a slightly oblate shape.",composition:"Jupiter consists primarily of hydrogen (~90%) and helium (~10%), with traces of ammonia, methane, water vapor, and other compounds. Unlike terrestrial planets, Jupiter lacks a solid surface and instead transitions from gaseous to liquid as the pressure increases with depth.",atmosphere:"Jupiter's atmosphere is the largest planetary atmosphere in the Solar System, extending up to 5,000 km (3,000 mi) above the 'surface'. It is organized into latitudinal bands of clouds composed of ammonia crystals, ammonium hydrosulfide, and water that appear as light (zones) and dark (belts) bands.",moons:["Jupiter has at least 79 moons, with the four largest, known as the Galilean moons (Io, Europa, Ganymede, and Callisto), being easily observable with a small telescope.","Ganymede is the largest moon in the Solar System, even larger than the planet Mercury.","Io is the most volcanically active body in the Solar System.","Europa has a global ocean of liquid water beneath its icy crust and is considered a promising place to search for extraterrestrial life."],notableFeatures:["The Great Red Spot, a persistent anticyclonic storm larger than Earth that has existed for at least 400 years","A faint planetary ring system composed of dust particles ejected from its moons","The strongest planetary magnetic field in the Solar System, about 14 times stronger than Earth's","Powerful auroras around Jupiter's poles from charged particles captured by its magnetic field","Cloud bands and atmospheric zones that circulate at different speeds, creating turbulent patterns"],explorationHistory:[{title:"Pioneer Missions",content:"NASA's Pioneer 10 and 11 (1973-1974) were the first spacecraft to fly past Jupiter, capturing close-up images and studying its radiation environment, magnetic field, and atmosphere.",imageUrl:"/images/educational/pioneer_jupiter.jpg"},{title:"Voyager Missions",content:"NASA's Voyager 1 and 2 (1979) provided more detailed images of Jupiter and its moons, discovering Jupiter's rings, volcanic activity on Io, and detailed views of the Great Red Spot.",imageUrl:"/images/educational/voyager_jupiter.jpg"},{title:"Galileo Mission",content:"NASA's Galileo spacecraft (1995-2003) was the first to orbit Jupiter, studying the planet and its moons extensively. It also deployed a probe into Jupiter's atmosphere, providing direct measurements of its composition.",imageUrl:"/images/educational/galileo.jpg"},{title:"Juno Mission",content:"NASA's Juno spacecraft (2016-present) is currently orbiting Jupiter, studying its gravity field, magnetic field, polar magnetosphere, and deep atmospheric composition. Juno's close polar orbits allow it to observe Jupiter's previously unseen polar regions.",imageUrl:"/images/educational/juno.jpg"}],funFacts:["Jupiter is the fastest rotating planet in the Solar System, completing a rotation in just under 10 hours.","Jupiter's Great Red Spot is a storm that could fit about 3 Earths inside it and has been observed since at least the 1600s.","Jupiter acts as a 'cosmic vacuum cleaner', its strong gravity attracting and capturing comets and asteroids that might otherwise hit inner planets.","If Jupiter were about 80 times more massive, it would become a star rather than a planet.","Jupiter emits more heat than it receives from the Sun, primarily due to the Kelvin-Helmholtz mechanism (gravitational contraction) and possibly helium rain in its interior."]},{id:"saturn",name:"Saturn",type:"Planet",overview:"Saturn is the sixth planet from the Sun and the second-largest in the Solar System, after Jupiter. It is a gas giant known for its spectacular ring system, which consists of countless small particles of rock and ice. Like Jupiter, Saturn is primarily composed of hydrogen and helium and lacks a solid surface.",composition:"Saturn is composed primarily of hydrogen (about 96%) and helium (about 3%), with traces of methane, ammonia, water vapor, and other compounds. Saturn's density is the lowest of all planets in the Solar System—less than that of water, meaning it would float if placed in a large enough body of water.",atmosphere:"Saturn's upper atmosphere is divided into bands similar to Jupiter, but Saturn's appear more subdued due to a layer of ammonia haze. Winds in Saturn's atmosphere can reach up to 1,800 km/h (1,120 mph), the second-fastest in the Solar System after Neptune.",moons:["Saturn has at least 83 moons, with the largest being Titan, which is larger than the planet Mercury and the only moon in the Solar System with a substantial atmosphere.","Enceladus features geysers at its south pole that shoot plumes of water vapor, ice particles, and organic compounds from an underground ocean.","Other significant moons include Mimas (with a large crater giving it a 'Death Star' appearance), Tethys, Dione, Rhea, and Iapetus."],notableFeatures:["Saturn's ring system extends up to 282,000 km (175,000 mi) from the planet, yet is typically less than 10 meters (30 feet) thick","The rings are composed primarily of water ice particles ranging from tiny dust-sized grains to chunks several meters across","Saturn has a hexagonal cloud pattern at its north pole, a unique feature in the Solar System","Periodically occurring large storms called 'Great White Spots' that can encircle the entire planet","Saturn's magnetic field is weaker than Jupiter's but still about 578 times stronger than Earth's"],explorationHistory:[{title:"Pioneer and Voyager",content:"NASA's Pioneer 11 (1979) was the first spacecraft to fly by Saturn, followed by Voyager 1 and 2 (1980-1981). These missions discovered new moons and rings and provided detailed images of Saturn's atmosphere and ring system.",imageUrl:"/images/educational/voyager_saturn.jpg"},{title:"Cassini-Huygens",content:"The Cassini-Huygens mission (2004-2017), a joint project of NASA, ESA, and ASI, was the first to orbit Saturn. Cassini extensively studied Saturn, its rings, and moons, while the Huygens probe landed on Titan in 2005, providing the first images from its surface. Cassini's 'Grand Finale' involved 22 orbits diving between Saturn and its rings before intentionally plunging into Saturn's atmosphere.",imageUrl:"/images/educational/cassini.jpg"},{title:"Future Missions",content:"NASA's Dragonfly mission, scheduled to launch in 2027, will send a rotorcraft to explore Titan. While primarily focused on Titan, it will provide new observations of Saturn as well."}],funFacts:["Saturn's rings were first observed by Galileo Galilei in 1610, though he couldn't identify them as rings with his primitive telescope.","The particles in Saturn's rings orbit at different speeds, with inner particles moving faster than outer ones, in accordance with Kepler's laws of planetary motion.","Saturn's moon Enceladus has geysers that shoot water ice particles into space, some of which eventually become part of Saturn's E ring.","A day on Saturn lasts only about 10.7 hours, but a year is equivalent to about 29.5 Earth years.","Saturn has oval-shaped storms similar to Jupiter's Great Red Spot, but they don't last as long, typically surviving for months rather than centuries."]}],jC=[{id:"apollo11",name:"Apollo 11",agency:"NASA",launchDate:"July 16, 1969",endDate:"July 24, 1969",status:"Completed",overview:"Apollo 11 was the first manned mission to land on the Moon. The spacecraft carried three astronauts: Mission Commander Neil Armstrong, Lunar Module Pilot Edwin 'Buzz' Aldrin, and Command Module Pilot Michael Collins.",objectives:["Land humans on the lunar surface and return them safely to Earth","Establish technological superiority in space over the Soviet Union","Collect lunar surface samples for scientific study","Deploy scientific experiments on the lunar surface"],accomplishments:["Neil Armstrong became the first human to step on the Moon on July 21, 1969, with the famous words: 'That's one small step for man, one giant leap for mankind'","Successfully collected 21.5 kg (47.5 lb) of lunar material to return to Earth","Deployed the Early Apollo Scientific Experiments Package (EASEP)","Captured iconic photographs of bootprints on the lunar surface and Earth rising above the lunar horizon","Demonstrated the capability of humans to travel to and work on another celestial body"],images:["/images/educational/apollo11_launch.jpg","/images/educational/apollo11_moonwalk.jpg","/images/educational/apollo11_plaque.jpg"],additionalResources:["NASA Apollo 11 Mission Overview: https://www.nasa.gov/mission_pages/apollo/missions/apollo11.html","Smithsonian National Air and Space Museum Apollo Program: https://airandspace.si.edu/explore/topics/apollo/apollo-program","Apollo Lunar Surface Journal: https://www.hq.nasa.gov/alsj/"]},{id:"voyager",name:"Voyager Program",agency:"NASA",launchDate:"1977 (Voyager 1: September 5, Voyager 2: August 20)",status:"Active",overview:"The Voyager program consists of two spacecraft, Voyager 1 and Voyager 2, launched in 1977 to take advantage of a favorable alignment of Jupiter, Saturn, Uranus, and Neptune. After completing their primary mission of studying these outer planets, both spacecraft continued on an extended mission to study the outer reaches of the Solar System and interstellar space.",objectives:["Study the outer planets Jupiter, Saturn, Uranus, and Neptune, their moons, and ring systems","Investigate the interplanetary medium (the space between planets)","Search for the boundary of the Solar System and study interstellar space beyond","Carry the 'Golden Record' containing sounds and images portraying Earth's diversity of life and culture"],accomplishments:["First detailed, close-up images of Jupiter, Saturn, Uranus, and Neptune and their moons","Discovered previously unknown moons around the outer planets","Revealed active volcanoes on Jupiter's moon Io, the first observed beyond Earth","Discovered that Jupiter, Saturn, Uranus, and Neptune all have ring systems","Observed Neptune's Great Dark Spot and high-speed winds","Voyager 1 became the first human-made object to enter interstellar space in 2012","Both spacecraft continue to send scientific information about their surroundings through the Deep Space Network"],images:["/images/educational/voyager_spacecraft.jpg","/images/educational/voyager_jupiter.jpg","/images/educational/voyager_golden_record.jpg"],additionalResources:["NASA Voyager Mission: https://voyager.jpl.nasa.gov/","The Planetary Society - Voyager: https://www.planetary.org/space-missions/voyager","NASA Solar System Exploration - Voyager: https://solarsystem.nasa.gov/missions/voyager-1/in-depth/"]},{id:"hubble",name:"Hubble Space Telescope",agency:"NASA and ESA",launchDate:"April 24, 1990",status:"Active",overview:"The Hubble Space Telescope (HST) is a space telescope that was launched into low Earth orbit in 1990 and remains in operation. It is one of NASA's Great Observatories and was named after astronomer Edwin Hubble. With a 2.4-meter (7.9 ft) mirror, Hubble's four main instruments observe in the ultraviolet, visible, and near-infrared regions of the electromagnetic spectrum.",objectives:["Study the planets, stars, galaxies, and other celestial objects without the distortion of Earth's atmosphere","Determine the age of the universe","Search for extrasolar planets and study their atmospheres","Analyze the composition and physical processes of celestial bodies","Observe distant galaxies formed shortly after the Big Bang"],accomplishments:["Helped determine the rate of expansion of the universe (the Hubble constant)","Provided evidence that the expansion of the universe is accelerating, leading to the discovery of dark energy","Captured detailed images of the Deep Field and Ultra Deep Field, revealing thousands of galaxies in seemingly empty patches of sky","Observed the collision of Comet Shoemaker-Levy 9 with Jupiter in 1994","Contributed to understanding the atmospheres of planets both in and outside our solar system","Captured iconic images like the 'Pillars of Creation' in the Eagle Nebula","Serviced five times by Space Shuttle missions, with new instruments and repairs extending its lifetime"],images:["/images/educational/hubble.jpg","/images/educational/hubble_deep_field.jpg","/images/educational/hubble_pillars_of_creation.jpg"],additionalResources:["NASA Hubble Space Telescope: https://www.nasa.gov/mission_pages/hubble/main/index.html","ESA Hubble: https://esahubble.org/","HubbleSite: https://hubblesite.org/","Space Telescope Science Institute: https://www.stsci.edu/"]},{id:"iss",name:"International Space Station",agency:"NASA, Roscosmos, ESA, JAXA, CSA",launchDate:"November 20, 1998 (first module launch)",status:"Active",overview:"The International Space Station (ISS) is a modular space station in low Earth orbit. It is a multinational collaborative project involving NASA (United States), Roscosmos (Russia), JAXA (Japan), ESA (Europe), and CSA (Canada). The station serves as a microgravity and space environment research laboratory where scientific research is conducted in astrobiology, astronomy, meteorology, physics, and other fields.",objectives:["Maintain a continuous human presence in space (achieved since November 2000)","Provide a platform for scientific research that cannot be conducted on Earth","Develop and test technologies for future space exploration","Foster international cooperation in space","Study the effects of long-duration spaceflight on humans for future missions to the Moon and Mars"],accomplishments:["Continuous human presence in space for over 20 years","More than 3,000 scientific experiments conducted by researchers from over 100 countries","Significant advances in our understanding of human physiology in space, including bone density loss, muscle atrophy, and vision changes","Development and testing of life support systems, space habitats, and other technologies needed for long-duration spaceflight","Demonstrations of international cooperation in the post-Cold War era","Serves as a platform for testing commercial spaceflight capabilities, including SpaceX and Boeing crew vehicles"],images:["/images/educational/iss_orbit.jpg","/images/educational/iss_interior.jpg","/images/educational/iss_eva.jpg"],additionalResources:["NASA International Space Station: https://www.nasa.gov/mission_pages/station/main/index.html","ESA International Space Station: https://www.esa.int/Science_Exploration/Human_and_Robotic_Exploration/International_Space_Station","JAXA ISS Program: https://iss.jaxa.jp/en/","Canadian Space Agency ISS: https://www.asc-csa.gc.ca/eng/iss/","ISS Live Stream: https://www.nasa.gov/multimedia/nasatv/iss_ustream.html"]},{id:"jwst",name:"James Webb Space Telescope",agency:"NASA, ESA, CSA",launchDate:"December 25, 2021",status:"Active",overview:"The James Webb Space Telescope (JWST) is a space telescope designed primarily to conduct infrared astronomy. As the largest optical telescope in space, its high infrared resolution and sensitivity allow it to view objects too old, distant, or faint for the Hubble Space Telescope. This enables investigations across many fields of astronomy and cosmology, such as observation of the earliest stars and formation of the first galaxies, and detailed atmospheric characterization of potentially habitable exoplanets.",objectives:["Study the formation and evolution of galaxies, stars, and planetary systems","Examine the atmospheres of exoplanets for possible signs of life","Observe the earliest stars and galaxies that formed after the Big Bang","Expand our understanding of dark matter and dark energy","Investigate the formation of stars and planetary systems"],accomplishments:["Successfully deployed at the L2 Lagrange point, 1.5 million kilometers from Earth","Captured unprecedented high-resolution infrared images of the universe, including the deepest and sharpest infrared image of the distant universe to date","Detected water vapor in the atmosphere of distant exoplanets","Observed detailed structure of early galaxies, revealing new information about their formation and evolution","Provided new insights into star formation processes and the chemical composition of galaxies"],images:["/images/educational/jwst.jpg","/images/educational/jwst_deep_field.jpg","/images/educational/jwst_deployment.jpg"],additionalResources:["NASA James Webb Space Telescope: https://www.nasa.gov/mission_pages/webb/main/index.html","ESA Webb: https://www.esa.int/Science_Exploration/Space_Science/Webb","Canadian Space Agency Webb: https://www.asc-csa.gc.ca/eng/satellites/jwst/","Webb Space Telescope at STScI: https://webbtelescope.org/"]}],XC=[{id:"gravity",name:"Gravity and Orbital Mechanics",overview:"Gravity is the force that attracts objects with mass towards each other. Orbital mechanics is the application of physics, specifically Newton's laws of motion and his law of universal gravitation, to the movement of satellites, spacecraft, and celestial bodies.",details:`Sir Isaac Newton's law of universal gravitation states that every particle attracts every other particle in the universe with a force directly proportional to the product of their masses and inversely proportional to the square of the distance between their centers. This force keeps planets in orbit around the Sun and moons around planets.

In the early 20th century, Albert Einstein's theory of general relativity expanded our understanding of gravity, describing it as a consequence of the curvature of spacetime caused by mass. This theory successfully explains phenomena that Newton's theory couldn't, such as the precession of Mercury's orbit.

For spacecraft navigation, several key orbital elements are calculated: semi-major axis (size of the orbit), eccentricity (shape of the orbit), inclination (tilt relative to the reference plane), longitude of the ascending node (orientation of the orbit), argument of periapsis (orientation of the ellipse in the orbital plane), and mean anomaly (position of the orbiting body along the ellipse at a specific time).

Maneuvers in space rely on precise calculations of delta-v (change in velocity) to move between orbits. The most efficient orbital transfer is the Hohmann transfer, which uses two engine burns to move between circular orbits.`,relatedConcepts:["Kepler's Laws of Planetary Motion","Escape Velocity","Lagrange Points","Gravitational Assist","Orbital Resonance"],scientificImportance:"Understanding orbital mechanics is crucial for successful space exploration and satellite deployment. It allows us to predict the motion of natural and artificial satellites, plan spacecraft trajectories for interplanetary missions, perform gravitational assist maneuvers, maintain satellite constellations like GPS, and study the evolution of planetary systems.",illustrations:["/images/educational/orbital_mechanics.jpg","/images/educational/hohmann_transfer.jpg","/images/educational/gravity_assist.jpg"],additionalResources:["NASA's Basics of Space Flight: https://solarsystem.nasa.gov/basics/","European Space Agency Orbital Mechanics: https://www.esa.int/Education/Teach_with_space/Orbital_mechanics","Fundamentals of Astrodynamics by Roger R. Bate, Donald D. Mueller, and Jerry E. White"]},{id:"stellar-evolution",name:"Stellar Evolution",overview:"Stellar evolution is the process by which a star changes over the course of time, from its formation from a gas cloud to its eventual demise. The lifetime and evolutionary path of a star are primarily determined by its initial mass.",details:`Stars begin their lives in dense regions of molecular clouds called stellar nurseries. When parts of these clouds reach a critical density, they begin to collapse under their own gravity. As the cloud collapses, it fragments into smaller clumps that will form individual stars. The central region of a collapsing fragment grows increasingly hot and dense, forming a protostar.

When the core temperature reaches about 10 million Kelvin, nuclear fusion of hydrogen into helium begins, and the star enters the main sequence phase—the longest period of a star's life. Our Sun is currently in this phase and will remain so for about 10 billion years in total.

The fate of a star after it exhausts its hydrogen fuel depends on its mass:

- Low-mass stars (less than about 0.8 solar masses) haven't had enough time in the universe's history to evolve beyond the main sequence.

- Sun-like stars (0.8 to 8 solar masses) expand into red giants, fuse helium into carbon and oxygen, lose their outer layers as planetary nebulae, and end as white dwarfs.

- Massive stars (8 to 50 solar masses) proceed through a series of nuclear fusion stages, producing progressively heavier elements up to iron. They end their lives in spectacular core-collapse supernovae, leaving behind neutron stars.

- Very massive stars (more than 50 solar masses) may experience pair-instability supernovae or directly collapse to form black holes.

Through supernovae and stellar winds, stars enrich the interstellar medium with heavy elements (metals), which are incorporated into new generations of stars and planets.`,relatedConcepts:["Nucleosynthesis","Hertzsprung-Russell Diagram","Supernovae","Neutron Stars","Black Holes"],scientificImportance:"The study of stellar evolution is fundamental to astrophysics and cosmology. It helps us understand the origin of elements heavier than hydrogen and helium (which were produced in the Big Bang), the life cycles of galaxies, the potential for planetary systems around different types of stars, and the ultimate fate of our own Sun and Solar System. The elements created inside stars and distributed by supernovae are essential for the formation of planets and for life as we know it.",illustrations:["/images/educational/stellar_evolution.jpg","/images/educational/hr_diagram.jpg","/images/educational/supernova.jpg"],additionalResources:["NASA's Imagine the Universe: https://imagine.gsfc.nasa.gov/science/objects/stars1.html","European Space Agency Science: Stars: https://www.esa.int/Science_Exploration/Space_Science/Stars","An Introduction to the Theory of Stellar Structure and Evolution by Dina Prialnik"]},{id:"big-bang",name:"The Big Bang and Cosmic Evolution",overview:"The Big Bang theory is the prevailing cosmological model explaining the existence of the observable universe from the earliest known periods through its subsequent large-scale evolution. The model describes how the universe expanded from an initial state of extremely high density and temperature.",details:`According to the Big Bang theory, the universe began about 13.8 billion years ago as an extremely hot, dense point (singularity) and has been expanding ever since. The earliest stages of the universe's existence are subject to much speculation, but the timeline of cosmic evolution according to current understanding proceeds as follows:

- Planck Epoch (before 10^-43 seconds): The laws of physics as we know them may not apply.

- Grand Unification Epoch (10^-43 to 10^-36 seconds): The strong nuclear force separates from the electroweak force.

- Inflationary Epoch (10^-36 to 10^-32 seconds): The universe undergoes exponential expansion.

- Electroweak Epoch (10^-32 to 10^-12 seconds): The electromagnetic and weak nuclear forces separate.

- Quark Epoch (10^-12 to 10^-6 seconds): Quarks and gluons form a quark-gluon plasma.

- Hadron Epoch (10^-6 to 1 second): Quarks combine to form hadrons like protons and neutrons.

- Lepton Epoch (1 to 10 seconds): The universe is dominated by leptons (electrons, positrons, neutrinos).

- Nucleosynthesis (10 seconds to 20 minutes): Protons and neutrons combine to form the nuclei of the lightest elements (primarily hydrogen and helium, with traces of lithium).

- Recombination (380,000 years): The universe cools enough for electrons to combine with nuclei, forming neutral atoms. Photons can now travel freely, creating the Cosmic Microwave Background (CMB) radiation.

- Dark Ages (380,000 to 150 million years): Before the first stars, the universe was filled with neutral hydrogen gas.

- Reionization (150 million to 1 billion years): The first stars and galaxies form and begin to reionize the neutral hydrogen.

- Galaxy Formation (1 billion years onward): Galaxies form, evolve, and organize into clusters and superclusters, creating the large-scale structure we observe today.

Evidence supporting the Big Bang theory includes the expansion of the universe (observed as redshift), the abundance of light elements, and the Cosmic Microwave Background radiation, which is the afterglow of the Big Bang.`,relatedConcepts:["Cosmic Inflation","Dark Matter","Dark Energy","Cosmic Microwave Background","Nucleosynthesis"],scientificImportance:"The Big Bang theory provides the framework for understanding the origin and evolution of the universe. It explains the observed abundance of light elements, the existence of the Cosmic Microwave Background radiation, and the large-scale structure of the universe. Research in this field addresses fundamental questions about the nature of space, time, matter, and energy, as well as the ultimate fate of the universe. The interplay between particle physics and cosmology has led to insights in both fields, demonstrating the fundamental interconnectedness of the very large and the very small.",illustrations:["/images/educational/big_bang.jpg","/images/educational/cmb.jpg","/images/educational/cosmic_timeline.jpg"],additionalResources:["NASA Universe 101: Big Bang Theory: https://map.gsfc.nasa.gov/universe/bb_theory.html","CERN: The Big Bang: https://home.cern/science/physics/early-universe","A Brief History of Time by Stephen Hawking","The First Three Minutes by Steven Weinberg"]},{id:"exoplanets",name:"Exoplanets and Planetary Systems",overview:"Exoplanets are planets outside our Solar System that orbit other stars. The study of exoplanets has revolutionized our understanding of planetary systems, providing insights into the diversity of planets and planetary system architectures throughout the galaxy.",details:`The first confirmed detection of an exoplanet orbiting a main-sequence star occurred in 1995, when a giant planet was discovered in a four-day orbit around the star 51 Pegasi. Since then, thousands of exoplanets have been discovered using various detection methods:

- Transit Method: Observing the slight dimming of a star when a planet passes in front of it.

- Radial Velocity Method: Measuring the slight wobble of a star caused by the gravitational pull of an orbiting planet.

- Direct Imaging: Capturing actual images of exoplanets, typically very large planets far from their host stars.

- Gravitational Microlensing: Detecting the gravitational lensing effect when a planet-star system passes in front of a more distant star.

- Astrometry: Measuring the precise position of a star and detecting its subtle movement caused by orbiting planets.

The discovered exoplanets show incredible diversity, including:

- Hot Jupiters: Gas giants orbiting very close to their stars.

- Super-Earths: Planets with masses between Earth and Neptune.

- Mini-Neptunes: Planets smaller than Neptune but with significant gaseous envelopes.

- Terrestrial planets: Rocky worlds similar in composition to Earth, Venus, Mars, and Mercury.

- Circumbinary planets: Planets that orbit around both stars in a binary star system.

Of particular interest are potentially habitable planets that orbit in the 'habitable zone' of their star, where conditions might be right for liquid water to exist on the surface. Several such planets have been discovered, including those in the TRAPPIST-1 system, which contains seven Earth-sized planets, several potentially in the habitable zone.

Exoplanet atmospheres can be studied through spectroscopy during transits, revealing information about their composition. Atmospheric studies have detected water vapor, methane, carbon dioxide, and other molecules in exoplanet atmospheres.`,relatedConcepts:["Habitable Zone","Planetary Formation","Protoplanetary Disks","Planetary Migration","Astrobiology"],scientificImportance:"The study of exoplanets has transformed our understanding of planetary systems and our place in the universe. It provides context for our own Solar System, showing that planetary systems are common but often quite different from our own. This research helps answer questions about how planets form and evolve, the conditions necessary for life, and the potential prevalence of habitable worlds in the galaxy. Current and future missions like TESS, JWST, and planned missions such as PLATO and HabEx are designed to discover and characterize more exoplanets, with a particular focus on finding potentially habitable worlds and studying their atmospheres for possible biosignatures.",illustrations:["/images/educational/exoplanets.jpg","/images/educational/exoplanet_transit.jpg","/images/educational/habitable_zone.jpg"],additionalResources:["NASA Exoplanet Exploration: https://exoplanets.nasa.gov/","European Space Agency Exoplanets: https://www.esa.int/Science_Exploration/Space_Science/Exoplanets","The Exoplanet Handbook by Michael Perryman","Exoplanet Atmospheres by Sara Seager"]}],X5=({isOpen:n,onClose:e})=>{const[t,i]=H.useState("bodies"),[r,s]=H.useState(null),o=Ft(h=>h.focusedBody);H.useEffect(()=>{o&&(s(o),i("bodies"))},[o]);const l=(()=>{if(!r)return null;switch(t){case"bodies":return WC.find(h=>h.id===r);case"missions":return jC.find(h=>h.id===r);case"concepts":return XC.find(h=>h.id===r);default:return null}})(),c=h=>!!(h&&"details"in h&&"relatedConcepts"in h&&"scientificImportance"in h);return n?L.jsxs("div",{className:"fixed top-0 right-0 w-full sm:w-2/3 md:w-1/2 lg:w-1/3 h-full bg-black bg-opacity-90 text-white overflow-auto z-50 border-l border-[#1A237E] shadow-xl transition-all",children:[L.jsxs("div",{className:"sticky top-0 bg-[#1A237E] p-4 flex justify-between items-center z-10",children:[L.jsx("h2",{className:"text-xl font-bold",children:"Space Education Center"}),L.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-[#4FC3F7] hover:bg-opacity-20 transition-colors",children:L.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[L.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),L.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),L.jsxs("div",{className:"flex border-b border-[#1A237E]",children:[L.jsx("button",{className:On("flex-1 p-4 transition-colors",t==="bodies"?"bg-[#1A237E] text-white":"hover:bg-[#1A237E] hover:bg-opacity-50"),onClick:()=>i("bodies"),children:"Celestial Bodies"}),L.jsx("button",{className:On("flex-1 p-4 transition-colors",t==="missions"?"bg-[#1A237E] text-white":"hover:bg-[#1A237E] hover:bg-opacity-50"),onClick:()=>i("missions"),children:"Space Missions"}),L.jsx("button",{className:On("flex-1 p-4 transition-colors",t==="concepts"?"bg-[#1A237E] text-white":"hover:bg-[#1A237E] hover:bg-opacity-50"),onClick:()=>i("concepts"),children:"Concepts"})]}),L.jsxs("div",{className:"flex h-[calc(100%-112px)]",children:[L.jsxs("div",{className:"w-1/3 border-r border-[#1A237E] overflow-y-auto",children:[t==="bodies"&&L.jsx("ul",{children:WC.map(h=>L.jsxs("li",{className:On("p-3 cursor-pointer hover:bg-[#1A237E] hover:bg-opacity-50 transition-colors border-b border-[#1A237E] border-opacity-50",r===h.id?"bg-[#1A237E] bg-opacity-70":""),onClick:()=>s(h.id),children:[L.jsx("div",{className:"font-medium",children:h.name}),L.jsx("div",{className:"text-xs text-gray-400",children:h.type})]},h.id))}),t==="missions"&&L.jsx("ul",{children:jC.map(h=>L.jsxs("li",{className:On("p-3 cursor-pointer hover:bg-[#1A237E] hover:bg-opacity-50 transition-colors border-b border-[#1A237E] border-opacity-50",r===h.id?"bg-[#1A237E] bg-opacity-70":""),onClick:()=>s(h.id),children:[L.jsx("div",{className:"font-medium",children:h.name}),L.jsx("div",{className:"text-xs text-gray-400",children:h.agency})]},h.id))}),t==="concepts"&&L.jsx("ul",{children:XC.map(h=>L.jsx("li",{className:On("p-3 cursor-pointer hover:bg-[#1A237E] hover:bg-opacity-50 transition-colors border-b border-[#1A237E] border-opacity-50",r===h.id?"bg-[#1A237E] bg-opacity-70":""),onClick:()=>s(h.id),children:L.jsx("div",{className:"font-medium",children:h.name})},h.id))})]}),L.jsx("div",{className:"w-2/3 p-4 overflow-y-auto",children:l?L.jsxs("div",{children:[L.jsx("h3",{className:"text-2xl font-bold mb-2 text-[#4FC3F7]",children:"name"in l?l.name:""}),t==="bodies"&&"type"in l&&L.jsxs("div",{className:"space-y-4",children:[L.jsx("div",{className:"bg-[#1A237E] bg-opacity-30 p-2 rounded text-sm inline-block",children:l.type}),L.jsx("h4",{className:"text-lg font-semibold border-b border-[#4FC3F7] pb-1 mt-4",children:"Overview"}),L.jsx("p",{className:"text-sm leading-relaxed",children:l.overview}),L.jsx("h4",{className:"text-lg font-semibold border-b border-[#4FC3F7] pb-1 mt-4",children:"Composition"}),L.jsx("p",{className:"text-sm leading-relaxed",children:l.composition}),l.atmosphere&&L.jsxs(L.Fragment,{children:[L.jsx("h4",{className:"text-lg font-semibold border-b border-[#4FC3F7] pb-1 mt-4",children:"Atmosphere"}),L.jsx("p",{className:"text-sm leading-relaxed",children:l.atmosphere})]}),L.jsx("h4",{className:"text-lg font-semibold border-b border-[#4FC3F7] pb-1 mt-4",children:"Notable Features"}),L.jsx("ul",{className:"list-disc pl-5 text-sm",children:l.notableFeatures.map((h,f)=>L.jsx("li",{className:"mb-1",children:h},f))}),L.jsx("h4",{className:"text-lg font-semibold border-b border-[#4FC3F7] pb-1 mt-4",children:"Exploration History"}),L.jsx("div",{className:"space-y-3",children:l.explorationHistory.map((h,f)=>L.jsxs("div",{className:"bg-black bg-opacity-40 p-3 rounded",children:[L.jsx("h5",{className:"font-medium text-[#FFA726]",children:h.title}),L.jsx("p",{className:"text-sm mt-1",children:h.content})]},f))}),L.jsx("h4",{className:"text-lg font-semibold border-b border-[#4FC3F7] pb-1 mt-4",children:"Fun Facts"}),L.jsx("ul",{className:"list-disc pl-5 text-sm",children:l.funFacts.map((h,f)=>L.jsx("li",{className:"mb-1",children:h},f))})]}),t==="missions"&&"agency"in l&&L.jsxs("div",{className:"space-y-4",children:[L.jsxs("div",{className:"flex flex-wrap gap-2",children:[L.jsx("div",{className:"bg-[#1A237E] bg-opacity-30 p-2 rounded text-sm inline-block",children:l.agency}),L.jsxs("div",{className:"bg-[#1A237E] bg-opacity-30 p-2 rounded text-sm inline-block",children:["Launch: ",l.launchDate]}),L.jsx("div",{className:On("p-2 rounded text-sm inline-block",l.status==="Active"?"bg-green-800 bg-opacity-50":l.status==="Completed"?"bg-blue-800 bg-opacity-50":l.status==="Planned"?"bg-yellow-800 bg-opacity-50":"bg-red-800 bg-opacity-50"),children:l.status})]}),L.jsx("h4",{className:"text-lg font-semibold border-b border-[#4FC3F7] pb-1 mt-4",children:"Overview"}),L.jsx("p",{className:"text-sm leading-relaxed",children:l.overview}),L.jsx("h4",{className:"text-lg font-semibold border-b border-[#4FC3F7] pb-1 mt-4",children:"Objectives"}),L.jsx("ul",{className:"list-disc pl-5 text-sm",children:l.objectives.map((h,f)=>L.jsx("li",{className:"mb-1",children:h},f))}),l.accomplishments&&L.jsxs(L.Fragment,{children:[L.jsx("h4",{className:"text-lg font-semibold border-b border-[#4FC3F7] pb-1 mt-4",children:"Accomplishments"}),L.jsx("ul",{className:"list-disc pl-5 text-sm",children:l.accomplishments.map((h,f)=>L.jsx("li",{className:"mb-1",children:h},f))})]}),l.additionalResources&&L.jsxs(L.Fragment,{children:[L.jsx("h4",{className:"text-lg font-semibold border-b border-[#4FC3F7] pb-1 mt-4",children:"Additional Resources"}),L.jsx("ul",{className:"list-disc pl-5 text-sm",children:l.additionalResources.map((h,f)=>L.jsxs("li",{className:"mb-1",children:[h.split(": ")[0],":",L.jsx("a",{href:h.split(": ")[1],target:"_blank",rel:"noopener noreferrer",className:"text-[#4FC3F7] hover:underline ml-1",children:h.split(": ")[1]})]},f))})]})]}),t==="concepts"&&c(l)&&L.jsxs("div",{className:"space-y-4",children:[L.jsx("h4",{className:"text-lg font-semibold border-b border-[#4FC3F7] pb-1 mt-4",children:"Overview"}),L.jsx("p",{className:"text-sm leading-relaxed",children:l.overview}),L.jsx("h4",{className:"text-lg font-semibold border-b border-[#4FC3F7] pb-1 mt-4",children:"Details"}),L.jsx("div",{className:"text-sm leading-relaxed whitespace-pre-line",children:l.details}),L.jsx("h4",{className:"text-lg font-semibold border-b border-[#4FC3F7] pb-1 mt-4",children:"Related Concepts"}),L.jsx("ul",{className:"flex flex-wrap gap-2",children:l.relatedConcepts.map((h,f)=>L.jsx("li",{className:"bg-[#1A237E] bg-opacity-30 px-2 py-1 rounded text-sm",children:h},f))}),L.jsx("h4",{className:"text-lg font-semibold border-b border-[#4FC3F7] pb-1 mt-4",children:"Scientific Importance"}),L.jsx("p",{className:"text-sm leading-relaxed",children:l.scientificImportance}),l.additionalResources&&L.jsxs(L.Fragment,{children:[L.jsx("h4",{className:"text-lg font-semibold border-b border-[#4FC3F7] pb-1 mt-4",children:"Additional Resources"}),L.jsx("ul",{className:"list-disc pl-5 text-sm",children:l.additionalResources.map((h,f)=>L.jsxs("li",{className:"mb-1",children:[h.split(": ")[0],":",L.jsx("a",{href:h.split(": ")[1],target:"_blank",rel:"noopener noreferrer",className:"text-[#4FC3F7] hover:underline ml-1",children:h.split(": ")[1]})]},f))})]})]})]}):L.jsx("div",{className:"h-full flex items-center justify-center",children:L.jsxs("div",{className:"text-center text-gray-400",children:[L.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:"mx-auto mb-4",children:[L.jsx("circle",{cx:"12",cy:"12",r:"10"}),L.jsx("circle",{cx:"12",cy:"12",r:"4"}),L.jsx("line",{x1:"4.93",y1:"4.93",x2:"9.17",y2:"9.17"}),L.jsx("line",{x1:"14.83",y1:"14.83",x2:"19.07",y2:"19.07"}),L.jsx("line",{x1:"14.83",y1:"9.17",x2:"19.07",y2:"4.93"}),L.jsx("line",{x1:"14.83",y1:"9.17",x2:"18.36",y2:"5.64"}),L.jsx("line",{x1:"4.93",y1:"19.07",x2:"9.17",y2:"14.83"})]}),L.jsx("p",{children:"Select an item from the list to view detailed information."})]})})})]})]}):null},J5=({hoveredObjectId:n})=>{const[e,t]=H.useState({x:0,y:0}),i=H.useRef(null),[r,s]=H.useState(!1),o=n?Vs.find(a=>a.id===n):null;return H.useEffect(()=>{const a=l=>{t({x:l.clientX+15,y:l.clientY-10})};return window.addEventListener("mousemove",a),()=>{window.removeEventListener("mousemove",a)}},[]),H.useEffect(()=>{s(!!n)},[n]),H.useEffect(()=>{if(i.current&&r){const a=i.current.getBoundingClientRect(),l=window.innerWidth,c=window.innerHeight;let h=!1,f=e.x,p=e.y;e.x+a.width>l&&(f=e.x-a.width-30,h=!0),e.y+a.height>c&&(p=c-a.height-10,h=!0),h&&t({x:f,y:p})}},[r]),!r||!o?null:L.jsx("div",{ref:i,className:On("fixed z-50 p-3 rounded-md shadow-md","bg-black bg-opacity-80 border border-[#1A237E]","text-white backdrop-blur-sm","transition-opacity duration-200",r?"opacity-100":"opacity-0 pointer-events-none"),style:{left:`${e.x}px`,top:`${e.y}px`,maxWidth:"300px"},children:L.jsxs("div",{className:"flex flex-col gap-1",children:[L.jsx("h3",{className:"text-[#4FC3F7] font-bold text-lg",children:o.name}),L.jsx("p",{className:"text-xs text-gray-300 uppercase tracking-wider",children:o.type}),o.description&&L.jsx("p",{className:"text-sm mt-1",children:o.description}),L.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 mt-2 text-xs text-gray-200",children:[o.diameter&&L.jsxs("div",{className:"flex justify-between gap-2",children:[L.jsx("span",{className:"text-gray-400",children:"Diameter:"}),L.jsxs("span",{children:[o.diameter," km"]})]}),o.temperature&&L.jsxs("div",{className:"flex justify-between gap-2",children:[L.jsx("span",{className:"text-gray-400",children:"Temperature:"}),L.jsx("span",{children:o.temperature})]}),o.dayLength&&L.jsxs("div",{className:"flex justify-between gap-2 col-span-2",children:[L.jsx("span",{className:"text-gray-400",children:"Day Length:"}),L.jsx("span",{children:o.dayLength})]}),o.yearLength&&L.jsxs("div",{className:"flex justify-between gap-2 col-span-2",children:[L.jsx("span",{className:"text-gray-400",children:"Year Length:"}),L.jsx("span",{children:o.yearLength})]})]}),L.jsx("p",{className:"text-xs mt-2 text-[#FFA726] italic",children:"Click for more details"})]})})};function K5(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function Y5(...n){return e=>n.forEach(t=>K5(t,e))}var SP=H.forwardRef((n,e)=>{const{children:t,...i}=n,r=H.Children.toArray(t),s=r.find(q5);if(s){const o=s.props.children,a=r.map(l=>l===s?H.Children.count(o)>1?H.Children.only(null):H.isValidElement(o)?o.props.children:null:l);return L.jsx(F_,{...i,ref:e,children:H.isValidElement(o)?H.cloneElement(o,void 0,a):null})}return L.jsx(F_,{...i,ref:e,children:t})});SP.displayName="Slot";var F_=H.forwardRef((n,e)=>{const{children:t,...i}=n;if(H.isValidElement(t)){const r=$5(t);return H.cloneElement(t,{...Z5(i,t.props),ref:e?Y5(e,r):r})}return H.Children.count(t)>1?H.Children.only(null):null});F_.displayName="SlotClone";var Q5=({children:n})=>L.jsx(L.Fragment,{children:n});function q5(n){return H.isValidElement(n)&&n.type===Q5}function Z5(n,e){const t={...e};for(const i in e){const r=n[i],s=e[i];/^on[A-Z]/.test(i)?r&&s?t[i]=(...a)=>{s(...a),r(...a)}:r&&(t[i]=r):i==="style"?t[i]={...r,...s}:i==="className"&&(t[i]=[r,s].filter(Boolean).join(" "))}return{...n,...t}}function $5(n){var i,r;let e=(i=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(r=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function MP(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n))for(e=0;e<n.length;e++)n[e]&&(t=MP(n[e]))&&(i&&(i+=" "),i+=t);else for(e in n)n[e]&&(i&&(i+=" "),i+=e);return i}function e9(){for(var n,e,t=0,i="";t<arguments.length;)(n=arguments[t++])&&(e=MP(n))&&(i&&(i+=" "),i+=e);return i}const JC=n=>typeof n=="boolean"?"".concat(n):n===0?"0":n,KC=e9,t9=(n,e)=>t=>{var i;if((e==null?void 0:e.variants)==null)return KC(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:r,defaultVariants:s}=e,o=Object.keys(r).map(c=>{const h=t==null?void 0:t[c],f=s==null?void 0:s[c];if(h===null)return null;const p=JC(h)||JC(f);return r[c][p]}),a=t&&Object.entries(t).reduce((c,h)=>{let[f,p]=h;return p===void 0||(c[f]=p),c},{}),l=e==null||(i=e.compoundVariants)===null||i===void 0?void 0:i.reduce((c,h)=>{let{class:f,className:p,...m}=h;return Object.entries(m).every(v=>{let[A,x]=v;return Array.isArray(x)?x.includes({...s,...a}[A]):{...s,...a}[A]===x})?[...c,f,p]:c},[]);return KC(n,o,l,t==null?void 0:t.class,t==null?void 0:t.className)},n9=t9("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),wP=H.forwardRef(({className:n,variant:e,size:t,asChild:i=!1,...r},s)=>{const o=i?SP:"button";return L.jsx(o,{className:On(n9({variant:e,size:t,className:n})),ref:s,...r})});wP.displayName="Button";const EP={overview:{position:[0,30,100],target:[0,0,0]},topDown:{position:[0,200,0],target:[0,0,0]},sideView:{position:[200,0,0],target:[0,0,0]},closeUp:{position:[0,10,30],target:[0,0,0]}};function i9(){const{camera:n}=Fn();return window.setCameraPreset=e=>{const{position:t,target:i}=EP[e];n.position.set(...t),n.lookAt(...i)},null}function r9(){const n=e=>{var t;(t=window.setCameraPreset)==null||t.call(window,e)};return L.jsx("div",{className:"absolute bottom-4 left-4 flex flex-col gap-2",children:Object.entries(EP).map(([e])=>L.jsx(wP,{onClick:()=>n(e),className:"text-sm",children:e.charAt(0).toUpperCase()+e.slice(1)},e))})}function s9(){const{gl:n,scene:e,camera:t}=Fn();return window.takeScreenshot=()=>(n.render(e,t),n.domElement.toDataURL()),null}function o9(){const n=()=>{var t;const e=(t=window.takeScreenshot)==null?void 0:t.call(window);if(e){const i=document.createElement("a");i.download="celestial-navigator-screenshot.png",i.href=e,i.click()}};return L.jsx("button",{onClick:n,className:"absolute bottom-4 right-4 p-2 bg-gray-800 text-white rounded",children:"Take Screenshot"})}function a9(){const{camera:n}=Fn(),e=H.useRef(new ue),t=H.useRef(!1);return H.useEffect(()=>{const i=o=>{o.touches.length===1&&(t.current=!0,e.current.set(o.touches[0].clientX,o.touches[0].clientY))},r=o=>{if(!t.current)return;const a=o.touches[0],l=a.clientX-e.current.x,c=a.clientY-e.current.y;n.rotation.y-=l*.01,n.rotation.x-=c*.01,e.current.set(a.clientX,a.clientY)},s=()=>{t.current=!1};return document.addEventListener("touchstart",i),document.addEventListener("touchmove",r),document.addEventListener("touchend",s),()=>{document.removeEventListener("touchstart",i),document.removeEventListener("touchmove",r),document.removeEventListener("touchend",s)}},[n]),null}function YC(n,e){if(e===jA)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===_l||e===_h){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,r=[];if(e===_l)for(let o=1;o<=i;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2===0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}class CP extends di{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new h9(t)}),this.register(function(t){return new f9(t)}),this.register(function(t){return new S9(t)}),this.register(function(t){return new M9(t)}),this.register(function(t){return new w9(t)}),this.register(function(t){return new m9(t)}),this.register(function(t){return new g9(t)}),this.register(function(t){return new v9(t)}),this.register(function(t){return new y9(t)}),this.register(function(t){return new d9(t)}),this.register(function(t){return new x9(t)}),this.register(function(t){return new p9(t)}),this.register(function(t){return new A9(t)}),this.register(function(t){return new _9(t)}),this.register(function(t){return new c9(t)}),this.register(function(t){return new E9(t)}),this.register(function(t){return new C9(t)})}load(e,t,i,r){const s=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const c=dr.extractUrlBase(e);o=dr.resolveURL(c,this.path)}else o=dr.extractUrlBase(e);this.manager.itemStart(e);const a=function(c){r?r(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new ki(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(h){t(h),s.manager.itemEnd(e)},a)}catch(h){a(h)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const o={},a={},l=new TextDecoder;if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(l.decode(new Uint8Array(e,0,4))===bP){try{o[kt.KHR_BINARY_GLTF]=new b9(e)}catch(f){r&&r(f);return}s=JSON.parse(o[kt.KHR_BINARY_GLTF].content)}else s=JSON.parse(l.decode(e));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new z9(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let h=0;h<this.pluginCallbacks.length;h++){const f=this.pluginCallbacks[h](c);f.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[f.name]=f,o[f.name]=!0}if(s.extensionsUsed)for(let h=0;h<s.extensionsUsed.length;++h){const f=s.extensionsUsed[h],p=s.extensionsRequired||[];switch(f){case kt.KHR_MATERIALS_UNLIT:o[f]=new u9;break;case kt.KHR_DRACO_MESH_COMPRESSION:o[f]=new T9(s,this.dracoLoader);break;case kt.KHR_TEXTURE_TRANSFORM:o[f]=new R9;break;case kt.KHR_MESH_QUANTIZATION:o[f]=new I9;break;default:p.indexOf(f)>=0&&a[f]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+f+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}}function l9(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const kt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class c9{constructor(e){this.parser=e,this.name=kt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const h=new Ee(16777215);l.color!==void 0&&h.setRGB(l.color[0],l.color[1],l.color[2],bi);const f=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new x0(h),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new du(h),c.distance=f;break;case"spot":c=new y0(h),c.distance=f,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,Hs(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(c),t.cache.add(i,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return i._getNodeRef(t.cache,a,l)})}}class u9{constructor(){this.name=kt.KHR_MATERIALS_UNLIT}getMaterialType(){return Cn}extendParams(e,t,i){const r=[];e.color=new Ee(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],bi),e.opacity=o[3]}s.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",s.baseColorTexture,Un))}return Promise.all(r)}}class d9{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class h9{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bn}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new ue(a,a)}return Promise.all(s)}}class f9{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_DISPERSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bn}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class p9{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bn}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class m9{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bn}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Ee(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];if(o.sheenColorFactor!==void 0){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],bi)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,Un)),o.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class g9{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bn}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class v9{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bn}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new Ee().setRGB(a[0],a[1],a[2],bi),Promise.all(s)}}class y9{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bn}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class x9{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bn}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new Ee().setRGB(a[0],a[1],a[2],bi),o.specularColorTexture!==void 0&&s.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,Un)),Promise.all(s)}}class _9{constructor(e){this.parser=e,this.name=kt.EXT_MATERIALS_BUMP}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bn}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(i.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}}class A9{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bn}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(i.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class S9{constructor(e){this.parser=e,this.name=kt.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class M9{constructor(e){this.parser=e,this.name=kt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class w9{constructor(e){this.parser=e,this.name=kt.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class E9{constructor(e){this.name=kt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=r.byteOffset||0,c=r.byteLength||0,h=r.count,f=r.byteStride,p=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(h,f,p,r.mode,r.filter).then(function(m){return m.buffer}):o.ready.then(function(){const m=new ArrayBuffer(h*f);return o.decodeGltfBuffer(new Uint8Array(m),h,f,p,r.mode,r.filter),m})})}else return null}}class C9{constructor(e){this.name=kt.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const r=t.meshes[i.mesh];for(const c of r.primitives)if(c.mode!==br.TRIANGLES&&c.mode!==br.TRIANGLE_STRIP&&c.mode!==br.TRIANGLE_FAN&&c.mode!==void 0)return null;const o=i.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(h=>(l[c]=h,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const h=c.pop(),f=h.isGroup?h.children:[h],p=c[0].count,m=[];for(const v of f){const A=new Qe,x=new D,g=new on,S=new D(1,1,1),_=new bh(v.geometry,v.material,p);for(let w=0;w<p;w++)l.TRANSLATION&&x.fromBufferAttribute(l.TRANSLATION,w),l.ROTATION&&g.fromBufferAttribute(l.ROTATION,w),l.SCALE&&S.fromBufferAttribute(l.SCALE,w),_.setMatrixAt(w,A.compose(x,g,S));for(const w in l)if(w==="_COLOR_0"){const I=l[w];_.instanceColor=new na(I.array,I.itemSize,I.normalized)}else w!=="TRANSLATION"&&w!=="ROTATION"&&w!=="SCALE"&&v.geometry.setAttribute(w,l[w]);It.prototype.copy.call(_,v),this.parser.assignFinalMaterial(_),m.push(_)}return h.isGroup?(h.clear(),h.add(...m),h):m[0]}))}}const bP="glTF",rd=12,QC={JSON:1313821514,BIN:5130562};class b9{constructor(e){this.name=kt.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,rd),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==bP)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-rd,s=new DataView(e,rd);let o=0;for(;o<r;){const a=s.getUint32(o,!0);o+=4;const l=s.getUint32(o,!0);if(o+=4,l===QC.JSON){const c=new Uint8Array(e,rd+o,a);this.content=i.decode(c)}else if(l===QC.BIN){const c=rd+o;this.body=e.slice(c,c+a)}o+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class T9{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=kt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const h in o){const f=U_[h]||h.toLowerCase();a[f]=o[h]}for(const h in e.attributes){const f=U_[h]||h.toLowerCase();if(o[h]!==void 0){const p=i.accessors[e.attributes[h]],m=zc[p.componentType];c[f]=m.name,l[f]=p.normalized===!0}}return t.getDependency("bufferView",s).then(function(h){return new Promise(function(f,p){r.decodeDracoFile(h,function(m){for(const v in m.attributes){const A=m.attributes[v],x=l[v];x!==void 0&&(A.normalized=x)}f(m)},a,c,bi,p)})})}}class R9{constructor(){this.name=kt.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class I9{constructor(){this.name=kt.KHR_MESH_QUANTIZATION}}class TP extends bl{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=i[s+o];return t}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,h=r-t,f=(i-t)/h,p=f*f,m=p*f,v=e*c,A=v-c,x=-2*m+3*p,g=m-p,S=1-x,_=g-p+f;for(let w=0;w!==a;w++){const I=o[A+w+a],T=o[A+w+l]*h,P=o[v+w+a],B=o[v+w]*h;s[w]=S*I+_*T+x*P+g*B}return s}}const P9=new on;class B9 extends TP{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return P9.fromArray(s).normalize().toArray(s),s}}const br={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},zc={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},qC={9728:Hn,9729:en,9984:yh,9985:sl,9986:Go,9987:qi},ZC={33071:Qi,33648:gl,10497:fr},dx={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},U_={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Do={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},L9={CUBICSPLINE:void 0,LINEAR:ta,STEP:xl},hx={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function D9(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new jt({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:qr})),n.DefaultMaterial}function Ua(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function Hs(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function N9(n,e,t){let i=!1,r=!1,s=!1;for(let c=0,h=e.length;c<h;c++){const f=e[c];if(f.POSITION!==void 0&&(i=!0),f.NORMAL!==void 0&&(r=!0),f.COLOR_0!==void 0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);const o=[],a=[],l=[];for(let c=0,h=e.length;c<h;c++){const f=e[c];if(i){const p=f.POSITION!==void 0?t.getDependency("accessor",f.POSITION):n.attributes.position;o.push(p)}if(r){const p=f.NORMAL!==void 0?t.getDependency("accessor",f.NORMAL):n.attributes.normal;a.push(p)}if(s){const p=f.COLOR_0!==void 0?t.getDependency("accessor",f.COLOR_0):n.attributes.color;l.push(p)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const h=c[0],f=c[1],p=c[2];return i&&(n.morphAttributes.position=h),r&&(n.morphAttributes.normal=f),s&&(n.morphAttributes.color=p),n.morphTargetsRelative=!0,n})}function F9(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function U9(n){let e;const t=n.extensions&&n.extensions[kt.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+fx(t.attributes):e=n.indices+":"+fx(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,r=n.targets.length;i<r;i++)e+=":"+fx(n.targets[i]);return e}function fx(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function O_(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function O9(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":n.search(/\.ktx2($|\?)/i)>0||n.search(/^data\:image\/ktx2/)===0?"image/ktx2":"image/png"}const k9=new Qe;class z9{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new l9,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=-1,s=!1,o=-1;if(typeof navigator<"u"){const a=navigator.userAgent;i=/^((?!chrome|android).)*safari/i.test(a)===!0;const l=a.match(/Version\/(\d+)/);r=i&&l?parseInt(l[1],10):-1,s=a.indexOf("Firefox")>-1,o=s?a.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||i&&r<17||s&&o<98?this.textureLoader=new ch(this.options.manager):this.textureLoader=new pS(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new ki(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};return Ua(s,a,r),Hs(a,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(const l of a.scenes)l.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,h]of o.children.entries())s(h,a.children[c])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[kt.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){i.load(dr.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const r=t.byteLength||0,s=t.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const o=dx[r.type],a=zc[r.componentType],l=r.normalized===!0,c=new a(r.count*o);return Promise.resolve(new yt(c,o,l))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=dx[r.type],c=zc[r.componentType],h=c.BYTES_PER_ELEMENT,f=h*l,p=r.byteOffset||0,m=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,v=r.normalized===!0;let A,x;if(m&&m!==f){const g=Math.floor(p/m),S="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+g+":"+r.count;let _=t.cache.get(S);_||(A=new c(a,g*m,r.count*m/h),_=new cu(A,m/h),t.cache.add(S,_)),x=new so(_,l,p%m/h,v)}else a===null?A=new c(r.count*l):A=new c(a,p,r.count*l),x=new yt(A,l,v);if(r.sparse!==void 0){const g=dx.SCALAR,S=zc[r.sparse.indices.componentType],_=r.sparse.indices.byteOffset||0,w=r.sparse.values.byteOffset||0,I=new S(o[1],_,r.sparse.count*g),T=new c(o[2],w,r.sparse.count*l);a!==null&&(x=new yt(x.array.slice(),x.itemSize,x.normalized)),x.normalized=!1;for(let P=0,B=I.length;P<B;P++){const R=I[P];if(x.setX(R,T[P*l]),l>=2&&x.setY(R,T[P*l+1]),l>=3&&x.setZ(R,T[P*l+2]),l>=4&&x.setW(R,T[P*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}x.normalized=v}return x})}loadTexture(e){const t=this.json,i=this.options,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=i.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,i){const r=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,i).then(function(h){h.flipY=!1,h.name=o.name||a.name||"",h.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(h.name=a.uri);const p=(s.samplers||{})[o.sampler]||{};return h.magFilter=qC[p.magFilter]||en,h.minFilter=qC[p.minFilter]||qi,h.wrapS=ZC[p.wrapS]||fr,h.wrapT=ZC[p.wrapT]||fr,h.generateMipmaps=!h.isCompressedTexture&&h.minFilter!==Hn&&h.minFilter!==en,r.associations.set(h,{textures:e}),h}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const i=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(f=>f.clone());const o=r.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=i.getDependency("bufferView",o.bufferView).then(function(f){c=!0;const p=new Blob([f],{type:o.mimeType});return l=a.createObjectURL(p),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const h=Promise.resolve(l).then(function(f){return new Promise(function(p,m){let v=p;t.isImageBitmapLoader===!0&&(v=function(A){const x=new tn(A);x.needsUpdate=!0,p(x)}),t.load(dr.resolveURL(f,s.path),v,void 0,m)})}).then(function(f){return c===!0&&a.revokeObjectURL(l),Hs(f,o),f.userData.mimeType=o.mimeType||O9(o.uri),f}).catch(function(f){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),f});return this.sourceCache[e]=h,h}assignTexture(e,t,i,r){const s=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(o=o.clone(),o.channel=i.texCoord),s.extensions[kt.KHR_TEXTURE_TRANSFORM]){const a=i.extensions!==void 0?i.extensions[kt.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[kt.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return r!==void 0&&(o.colorSpace=r),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new Th,mn.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new ui,mn.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(a,l)),i=l}if(r||s||o){let a="ClonedMaterial:"+i.uuid+":";r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return jt}loadMaterial(e){const t=this,i=this.json,r=this.extensions,s=i.materials[e];let o;const a={},l=s.extensions||{},c=[];if(l[kt.KHR_MATERIALS_UNLIT]){const f=r[kt.KHR_MATERIALS_UNLIT];o=f.getMaterialType(),c.push(f.extendParams(a,s,t))}else{const f=s.pbrMetallicRoughness||{};if(a.color=new Ee(1,1,1),a.opacity=1,Array.isArray(f.baseColorFactor)){const p=f.baseColorFactor;a.color.setRGB(p[0],p[1],p[2],bi),a.opacity=p[3]}f.baseColorTexture!==void 0&&c.push(t.assignTexture(a,"map",f.baseColorTexture,Un)),a.metalness=f.metallicFactor!==void 0?f.metallicFactor:1,a.roughness=f.roughnessFactor!==void 0?f.roughnessFactor:1,f.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(a,"metalnessMap",f.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",f.metallicRoughnessTexture))),o=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=zn);const h=s.alphaMode||hx.OPAQUE;if(h===hx.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,h===hx.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==Cn&&(c.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new ue(1,1),s.normalTexture.scale!==void 0)){const f=s.normalTexture.scale;a.normalScale.set(f,f)}if(s.occlusionTexture!==void 0&&o!==Cn&&(c.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==Cn){const f=s.emissiveFactor;a.emissive=new Ee().setRGB(f[0],f[1],f[2],bi)}return s.emissiveTexture!==void 0&&o!==Cn&&c.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,Un)),Promise.all(c).then(function(){const f=new o(a);return s.name&&(f.name=s.name),Hs(f,s),t.associations.set(f,{materials:e}),s.extensions&&Ua(r,f,s),f})}createUniqueName(e){const t=Gt.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(a){return i[kt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return $C(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],h=U9(c),f=r[h];if(f)o.push(f.promise);else{let p;c.extensions&&c.extensions[kt.KHR_DRACO_MESH_COMPRESSION]?p=s(c):p=$C(new gt,c,t),r[h]={primitive:c,promise:p},o.push(p)}}return Promise.all(o)}loadMesh(e){const t=this,i=this.json,r=this.extensions,s=i.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const h=o[l].material===void 0?D9(this.cache):this.getDependency("material",o[l].material);a.push(h)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),h=l[l.length-1],f=[];for(let m=0,v=h.length;m<v;m++){const A=h[m],x=o[m];let g;const S=c[m];if(x.mode===br.TRIANGLES||x.mode===br.TRIANGLE_STRIP||x.mode===br.TRIANGLE_FAN||x.mode===void 0)g=s.isSkinnedMesh===!0?new i0(A,S):new xt(A,S),g.isSkinnedMesh===!0&&g.normalizeSkinWeights(),x.mode===br.TRIANGLE_STRIP?g.geometry=YC(g.geometry,_h):x.mode===br.TRIANGLE_FAN&&(g.geometry=YC(g.geometry,_l));else if(x.mode===br.LINES)g=new Fr(A,S);else if(x.mode===br.LINE_STRIP)g=new Ms(A,S);else if(x.mode===br.LINE_LOOP)g=new r0(A,S);else if(x.mode===br.POINTS)g=new s0(A,S);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+x.mode);Object.keys(g.geometry.morphAttributes).length>0&&F9(g,s),g.name=t.createUniqueName(s.name||"mesh_"+e),Hs(g,s),x.extensions&&Ua(r,g,x),t.assignFinalMaterial(g),f.push(g)}for(let m=0,v=f.length;m<v;m++)t.associations.set(f[m],{meshes:e,primitives:m});if(f.length===1)return s.extensions&&Ua(r,f[0],s),f[0];const p=new Ui;s.extensions&&Ua(r,p,s),t.associations.set(p,{meshes:e});for(let m=0,v=f.length;m<v;m++)p.add(f[m]);return p})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new yn(KA.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(t=new ys(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),Hs(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let r=0,s=t.joints.length;r<s;r++)i.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){const s=r.pop(),o=r,a=[],l=[];for(let c=0,h=o.length;c<h;c++){const f=o[c];if(f){a.push(f);const p=new Qe;s!==null&&p.fromArray(s.array,c*16),l.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new uu(a,l)})}loadAnimation(e){const t=this.json,i=this,r=t.animations[e],s=r.name?r.name:"animation_"+e,o=[],a=[],l=[],c=[],h=[];for(let f=0,p=r.channels.length;f<p;f++){const m=r.channels[f],v=r.samplers[m.sampler],A=m.target,x=A.node,g=r.parameters!==void 0?r.parameters[v.input]:v.input,S=r.parameters!==void 0?r.parameters[v.output]:v.output;A.node!==void 0&&(o.push(this.getDependency("node",x)),a.push(this.getDependency("accessor",g)),l.push(this.getDependency("accessor",S)),c.push(v),h.push(A))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c),Promise.all(h)]).then(function(f){const p=f[0],m=f[1],v=f[2],A=f[3],x=f[4],g=[];for(let S=0,_=p.length;S<_;S++){const w=p[S],I=m[S],T=v[S],P=A[S],B=x[S];if(w===void 0)continue;w.updateMatrix&&w.updateMatrix();const R=i._createAnimationTracks(w,I,T,P,B);if(R)for(let C=0;C<R.length;C++)g.push(R[C])}return new Sl(s,void 0,g)})}createNodeMesh(e){const t=this.json,i=this,r=t.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=r.weights.length;l<c;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(e){const t=this.json,i=this,r=t.nodes[e],s=i._loadNodeShallow(e),o=[],a=r.children||[];for(let c=0,h=a.length;c<h;c++)o.push(i.getDependency("node",a[c]));const l=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),l]).then(function(c){const h=c[0],f=c[1],p=c[2];p!==null&&h.traverse(function(m){m.isSkinnedMesh&&m.bind(p,k9)});for(let m=0,v=f.length;m<v;m++)h.add(f[m]);return h})}_loadNodeShallow(e){const t=this.json,i=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?r.createUniqueName(s.name):"",a=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(r.getDependency("camera",s.camera).then(function(c){return r._getNodeRef(r.cameraCache,s.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let h;if(s.isBone===!0?h=new Ch:c.length>1?h=new Ui:c.length===1?h=c[0]:h=new It,h!==c[0])for(let f=0,p=c.length;f<p;f++)h.add(c[f]);if(s.name&&(h.userData.name=s.name,h.name=o),Hs(h,s),s.extensions&&Ua(i,h,s),s.matrix!==void 0){const f=new Qe;f.fromArray(s.matrix),h.applyMatrix4(f)}else s.translation!==void 0&&h.position.fromArray(s.translation),s.rotation!==void 0&&h.quaternion.fromArray(s.rotation),s.scale!==void 0&&h.scale.fromArray(s.scale);return r.associations.has(h)||r.associations.set(h,{}),r.associations.get(h).nodes=e,h}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],r=this,s=new Ui;i.name&&(s.name=r.createUniqueName(i.name)),Hs(s,i),i.extensions&&Ua(t,s,i);const o=i.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(r.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let h=0,f=l.length;h<f;h++)s.add(l[h]);const c=h=>{const f=new Map;for(const[p,m]of r.associations)(p instanceof mn||p instanceof tn)&&f.set(p,m);return h.traverse(p=>{const m=r.associations.get(p);m!=null&&f.set(p,m)}),f};return r.associations=c(s),s})}_createAnimationTracks(e,t,i,r,s){const o=[],a=e.name?e.name:e.uuid,l=[];Do[s.path]===Do.weights?e.traverse(function(p){p.morphTargetInfluences&&l.push(p.name?p.name:p.uuid)}):l.push(a);let c;switch(Do[s.path]){case Do.weights:c=ao;break;case Do.rotation:c=lo;break;case Do.position:case Do.scale:c=co;break;default:switch(i.itemSize){case 1:c=ao;break;case 2:case 3:default:c=co;break}break}const h=r.interpolation!==void 0?L9[r.interpolation]:ta,f=this._getArrayFromAccessor(i);for(let p=0,m=l.length;p<m;p++){const v=new c(l[p]+"."+Do[s.path],t.array,f,h);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(v),o.push(v)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=O_(t.constructor),r=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)r[s]=t[s]*i;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){const r=this instanceof lo?B9:TP;return new r(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function H9(n,e,t){const i=e.attributes,r=new ai;if(i.POSITION!==void 0){const a=t.json.accessors[i.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(r.set(new D(l[0],l[1],l[2]),new D(c[0],c[1],c[2])),a.normalized){const h=O_(zc[a.componentType]);r.min.multiplyScalar(h),r.max.multiplyScalar(h)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new D,l=new D;for(let c=0,h=s.length;c<h;c++){const f=s[c];if(f.POSITION!==void 0){const p=t.json.accessors[f.POSITION],m=p.min,v=p.max;if(m!==void 0&&v!==void 0){if(l.setX(Math.max(Math.abs(m[0]),Math.abs(v[0]))),l.setY(Math.max(Math.abs(m[1]),Math.abs(v[1]))),l.setZ(Math.max(Math.abs(m[2]),Math.abs(v[2]))),p.normalized){const A=O_(zc[p.componentType]);l.multiplyScalar(A)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;const o=new Gn;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=o}function $C(n,e,t){const i=e.attributes,r=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in i){const a=U_[o]||o.toLowerCase();a in n.attributes||r.push(s(i[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});r.push(o)}return Ut.workingColorSpace!==bi&&"COLOR_0"in i&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${Ut.workingColorSpace}" not supported.`),Hs(n,e),H9(n,e,t),Promise.all(r).then(function(){return e.targets!==void 0?N9(n,e.targets,t):n})}new Qe;new Qe;function G9(n){const e=new Map,t=new Map,i=n.clone();return RP(n,i,function(r,s){e.set(s,r),t.set(r,s)}),i.traverse(function(r){if(!r.isSkinnedMesh)return;const s=r,o=e.get(r),a=o.skeleton.bones;s.skeleton=o.skeleton.clone(),s.bindMatrix.copy(o.bindMatrix),s.skeleton.bones=a.map(function(l){return t.get(l)}),s.bind(s.skeleton,s.bindMatrix)}),i}function RP(n,e,t){t(n,e);for(let i=0;i<n.children.length;i++)RP(n.children[i],e.children[i],t)}function V9({scene:n}){const e=G9(n),t=e.getObjectByProperty("type","SkinnedMesh");if(t==null)throw new Error("missing SkinnedMesh in loaded XRHand model");return t.frustumCulled=!1,e}function W9(n,e){n.renderOrder=(e==null?void 0:e.renderOrder)??0,n.traverse(t=>{t instanceof xt&&t.material instanceof mn&&(t.material.colorWrite=(e==null?void 0:e.colorWrite)??!0)})}const j9=["wrist","thumb-metacarpal","thumb-phalanx-proximal","thumb-phalanx-distal","thumb-tip","index-finger-metacarpal","index-finger-phalanx-proximal","index-finger-phalanx-intermediate","index-finger-phalanx-distal","index-finger-tip","middle-finger-metacarpal","middle-finger-phalanx-proximal","middle-finger-phalanx-intermediate","middle-finger-phalanx-distal","middle-finger-tip","ring-finger-metacarpal","ring-finger-phalanx-proximal","ring-finger-phalanx-intermediate","ring-finger-phalanx-distal","ring-finger-tip","pinky-finger-metacarpal","pinky-finger-phalanx-proximal","pinky-finger-phalanx-intermediate","pinky-finger-phalanx-distal","pinky-finger-tip"];function X9(n,e,t){const i=new Float32Array(n.size*16),r=j9.map(s=>{const o=e.getObjectByName(s);if(o==null)throw new Error(`missing joint "${s}" in hand model`);return o.matrixAutoUpdate=!1,o});return s=>{const o=typeof t=="function"?t():t;if(s==null||o==null)return;s.fillPoses(n.values(),o,i);const a=r.length;for(let l=0;l<a;l++)r[l].matrix.fromArray(i,l*16)}}function J9(n){return n!=null&&typeof n=="object"&&"inputSource"in n}class K9 extends Cn{constructor(){super({transparent:!0,toneMapped:!1,depthWrite:!1})}onBeforeCompile(e,t){super.onBeforeCompile(e,t),e.vertexShader=`varying vec2 vLocalPosition;
`+e.vertexShader,e.vertexShader=e.vertexShader.replace("#include <color_vertex>",`#include <color_vertex>
        vLocalPosition = position.xy * 2.0;`),e.fragmentShader=`varying vec2 vLocalPosition;
`+e.fragmentShader,e.fragmentShader=e.fragmentShader.replace("#include <color_fragment>",`#include <color_fragment>
          float value = max(0.0, 1.0 - sqrt(dot(vLocalPosition, vLocalPosition)));
          diffuseColor.a = diffuseColor.a * value * value;`)}}const Y9=new D(0,0,1),eb=new on,px=new D;function Q9(n,e,t,i,r){var l;const s=i.getIntersection();if(s==null||!i.getEnabled()||s.object.isVoidObject===!0||!IP(n)){e.visible=!1;return}e.visible=!0;const o=typeof r.color=="function"?r.color(i):r.color;Array.isArray(o)?t.color.set(...o):t.color.set(o??"white"),t.opacity=typeof r.opacity=="function"?r.opacity(i):r.opacity??.4,e.position.copy(s.pointOnFace),e.scale.setScalar(r.size??.1);const a=s.normal??((l=s.face)==null?void 0:l.normal);a!=null&&(eb.setFromUnitVectors(Y9,a),s.object.getWorldQuaternion(e.quaternion),e.quaternion.multiply(eb),px.set(0,0,r.cursorOffset??.01),px.applyQuaternion(e.quaternion),e.position.add(px)),e.updateMatrix()}function IP({visible:n,parent:e}){return n?e==null?!0:IP(e):!1}class q9 extends Cn{constructor(){super({transparent:!0,toneMapped:!1})}onBeforeCompile(e,t){super.onBeforeCompile(e,t),e.vertexShader=`varying float vFade;
`+e.vertexShader,e.vertexShader=e.vertexShader.replace("#include <color_vertex>",`#include <color_vertex>
            vFade = position.z + 0.5;`),e.fragmentShader=`varying float vFade;
`+e.fragmentShader,e.fragmentShader=e.fragmentShader.replace("#include <color_fragment>",`#include <color_fragment>
              diffuseColor.a *= vFade;`)}}function Z9(n,e,t,i){const r=t.getIntersection();if(!t.getEnabled()||r==null){n.visible=!1;return}n.visible=!0;const s=typeof i.color=="function"?i.color(t):i.color;Array.isArray(s)?e.color.set(...s):e.color.set(s??"white"),e.opacity=typeof i.opacity=="function"?i.opacity(t):i.opacity??.4;const o=Math.min(i.maxLength??1,r.distance);n.position.z=-o/2;const a=i.size??.005;n.scale.set(a,a,o),n.updateMatrix()}function $9(n,e,t,i,r,s={}){const o=f=>{f.inputSource===t&&n.down(Object.assign(f,{button:s.button??0}))},a=f=>{f.inputSource===t&&n.up(Object.assign(f,{button:s.button??0}))},l=`${i}start`,c=`${i}end`,h=r.length;for(let f=0;f<h;f++){const p=r[f];switch(p.type){case l:o(p);break;case c:a(p);break}}return e.addEventListener(l,o),e.addEventListener(c,a),()=>{e.removeEventListener(l,o),e.removeEventListener(c,a)}}function e8(n){var e;return n.getButtonsDown().size>0?.6:t8(((e=n.getIntersection())==null?void 0:e.distance)??1/0,.07,0,.2,.4)}function t8(n,e,t,i,r){return i+Math.max(0,Math.min(1,(n-e)/(t-e)))*(r-i)}function n8(n,e){return(t,i)=>{if(n===e)return t.identity(),!0;const r=typeof e=="function"?e():e;if(r==null)return!1;const s=i==null?void 0:i.getPose(n,r);return s==null?!1:(t.fromArray(s.transform.matrix),!0)}}function M0(n,e,t,i){i==null||i.copy(n.matrix);const r=PP(n.parent,i);return r??(i!=null&&i8(n,e,i),t)}function i8(n,e,t){if(n.updateWorldMatrix(!0,!1),e==null){t.copy(n.matrixWorld);return}e.updateWorldMatrix(!0,!1),t.copy(e.matrixWorld).invert().multiply(n.matrixWorld)}function PP(n,e){if(n!=null)return n.xrSpace!=null?n.xrSpace:(e==null||e.premultiply(n.matrix),PP(n.parent,e))}new D;new D;new D;new Nr;new ca;async function r8(n,e=J8){const{scene:t}=await e.loadAsync(n.assetPath);return t.clone(!0)}function s8(n,e){n.renderOrder=(e==null?void 0:e.renderOrder)??0,n.traverse(t=>{t instanceof xt&&t.material instanceof mn&&(t.material.colorWrite=(e==null?void 0:e.colorWrite)??!0)})}function o8(n,e,t){const i=[];for(const r in e.components){const s=e.components[r];let o=t[r];o==null&&(t[r]=o={state:"default"}),i.push(...Object.values(s.visualResponses).map(a=>a8(n,o,a)))}return()=>{const r=i.length;for(let s=0;s<r;s++)i[s]()}}function a8(n,e,t){const i=n.getObjectByName(t.valueNodeName);if(e.object=i,i==null)return()=>{};if(t.valueNodeProperty==="visibility")return()=>i.visible=t.states.includes(e.state);const r=n.getObjectByName(t.minNodeName),s=n.getObjectByName(t.maxNodeName);return r==null||s==null?()=>{}:()=>{const o=l8(e,t);i.quaternion.slerpQuaternions(r.quaternion,s.quaternion,o),i.position.lerpVectors(r.position,s.position,o),i.updateMatrix()}}function l8(n,{componentProperty:e,states:t}){const i=t.includes(n.state);switch(e){case"xAxis":return i?tb(n).x:.5;case"yAxis":return i?tb(n).y:.5;case"button":return i?n.button??0:0;case"state":return i?1:0}}const sd=new ue;function tb({xAxis:n=0,yAxis:e=0}){if(sd.lengthSq()>1){const i=Math.atan2(e,n);sd.set(Math.cos(i),Math.sin(i))}else sd.set(n,e);return sd.multiplyScalar(.5).addScalar(.5),sd}class c8{constructor(e){pt(this,"nativeEvent");pt(this,"NONE",0);pt(this,"CAPTURING_PHASE",1);pt(this,"AT_TARGET",2);pt(this,"BUBBLING_PHASE",3);pt(this,"relatedTarget",null);this.nativeEvent=e}get altKey(){return this.getFromNative("altKey",!1)}get button(){return this.getFromNative("button",0)}get buttons(){return this.getFromNative("buttons",0)}get clientX(){return this.getFromNative("clientX",0)}get clientY(){return this.getFromNative("clientY",0)}get ctrlKey(){return this.getFromNative("ctrlKey",!1)}get layerX(){return this.getFromNative("layerX",0)}get layerY(){return this.getFromNative("layerY",0)}get metaKey(){return this.getFromNative("metaKey",!1)}get movementX(){return this.getFromNative("movementX",0)}get movementY(){return this.getFromNative("movementY",0)}get offsetX(){return this.getFromNative("offsetX",0)}get offsetY(){return this.getFromNative("offsetY",0)}get pageX(){return this.getFromNative("pageX",0)}get pageY(){return this.getFromNative("pageY",0)}get screenX(){return this.getFromNative("screenX",0)}get screenY(){return this.getFromNative("screenY",0)}get shiftKey(){return this.getFromNative("shiftKey",!1)}get x(){return this.getFromNative("x",0)}get y(){return this.getFromNative("y",0)}get detail(){return this.getFromNative("detail",0)}get view(){return this.getFromNative("view",null)}get which(){return this.getFromNative("which",0)}get cancelBubble(){return this.getFromNative("cancelBubble",!1)}get composed(){return this.getFromNative("composed",!1)}get eventPhase(){return this.getFromNative("eventPhase",0)}get isTrusted(){return this.getFromNative("isTrusted",!1)}get returnValue(){return this.getFromNative("returnValue",!1)}get timeStamp(){return this.getFromNative("timeStamp",0)}get cancelable(){return this.getFromNative("cancelable",!1)}get defaultPrevented(){return this.getFromNative("defaultPrevented",!1)}getFromNative(e,t){return e in this.nativeEvent?this.nativeEvent[e]:t}}const mx=new D;class Si extends c8{constructor(t,i,r,s,o,a,l=o.object,c=l,h={stopped:!i,stoppedImmediate:!1}){super(r);pt(this,"type");pt(this,"bubbles");pt(this,"internalPointer");pt(this,"intersection");pt(this,"camera");pt(this,"currentObject");pt(this,"object");pt(this,"propagationState");pt(this,"_pointer");pt(this,"_ray");pt(this,"_intersections",[]);pt(this,"_unprojectedPoint");this.type=t,this.bubbles=i,this.internalPointer=s,this.intersection=o,this.camera=a,this.currentObject=l,this.object=c,this.propagationState=h}get pointerId(){return this.internalPointer.id}get pointerType(){return this.internalPointer.type}get pointerState(){return this.internalPointer.state}get distance(){return this.intersection.distance}get distanceToRay(){return this.intersection.distanceToRay}get point(){return this.intersection.point}get index(){return this.intersection.index}get face(){return this.intersection.face}get faceIndex(){return this.intersection.faceIndex}get uv(){return this.intersection.uv}get uv1(){return this.intersection.uv1}get normal(){return this.intersection.normal}get instanceId(){return this.intersection.instanceId}get pointOnLine(){return this.intersection.pointOnLine}get batchId(){return this.intersection.batchId}get pointerPosition(){return this.intersection.pointerPosition}get pointerQuaternion(){return this.intersection.pointerQuaternion}get pointOnFace(){return this.intersection.pointOnFace}get localPoint(){return this.intersection.localPoint}get details(){return this.intersection.details}get target(){return this.object}get currentTarget(){return this.currentObject}get eventObject(){return this.currentObject}get srcElement(){return this.currentObject}get pointer(){return this._pointer==null&&(mx.copy(this.intersection.point).project(this.camera),this._pointer=new ue(mx.x,mx.y)),this._pointer}get ray(){if(this._ray!=null)return this._ray;switch(this.intersection.details.type){case"screen-ray":case"ray":case"sphere":return this._ray=new Ss(this.intersection.pointerPosition,new D(0,0,-1).applyQuaternion(this.intersection.pointerQuaternion));case"lines":return this._ray=new Ss(this.intersection.details.line.start,this.intersection.details.line.end.clone().sub(this.intersection.details.line.start).normalize())}}get intersections(){return this._intersections==null&&(this._intersections=[{...this.intersection,eventObject:this.currentObject}]),this._intersections}get unprojectedPoint(){if(this._unprojectedPoint==null){const t=this.pointer;this._unprojectedPoint=new D(t.x,t.y,0).unproject(this.camera)}return this._unprojectedPoint}get stopped(){return this.propagationState.stoppedImmediate||this.propagationState.stopped}get stoppedImmediate(){return this.propagationState.stoppedImmediate}get delta(){throw new Error("not supported")}stopPropagation(){this.propagationState.stopped=!0}stopImmediatePropagation(){this.propagationState.stoppedImmediate=!0}retarget(t){return new Si(this.type,this.bubbles,this.nativeEvent,this.internalPointer,this.intersection,this.camera,t,this.target,this.propagationState)}}class wg extends Si{get deltaX(){return this.nativeEvent.deltaX}get deltaY(){return this.nativeEvent.deltaY}get deltaZ(){return this.nativeEvent.deltaZ}constructor(e,t,i,r,s,o){super("wheel",!0,e,t,i,r,s,o)}retarget(e){return new wg(this.nativeEvent,this.internalPointer,this.intersection,this.camera,e,this.target)}}function Xi(n){BP(n,n.currentObject)}function BP(n,e){if(e==null)return;const t=d8(e,n.type);if(t!=null&&t.length>0){const i=n.retarget(e),r=t.length;for(let s=0;s<r&&!i.stoppedImmediate;s++)t[s](i)}n.stopped||BP(n,e.parent)}const LP={click:"onClick",contextmenu:"onContextMenu",dblclick:"onDoubleClick",pointercancel:"onPointerCancel",pointerdown:"onPointerDown",pointerenter:"onPointerEnter",pointerleave:"onPointerLeave",pointermove:"onPointerMove",pointerout:"onPointerOut",pointerover:"onPointerOver",pointerup:"onPointerUp",wheel:"onWheel"},u8=Object.keys(LP);function d8(n,e){var i;if(n._listeners!=null&&e in n._listeners)return n._listeners[e];let t;if(n.isVoidObject&&e==="click"&&((i=n.parent)==null?void 0:i.__r3f)!=null&&(t=n.parent.__r3f.root.getState().onPointerMissed),n.__r3f!=null&&(t=n.__r3f.handlers[LP[e]]),t!=null)return[t]}const h8=1e10,f8=new ia(h8),nb=new Map;function p8(n){let e=nb.get(n);return e==null&&(e=new xt(f8),e.isVoidObject=!0,e.parent=n,e.pointerEventsOrder=-1/0,nb.set(n,e)),e}function m8(n,e,t){var r;const i=e.normal??((r=e.face)==null?void 0:r.normal);return i==null?!1:(n.setFromNormalAndCoplanarPoint(i,e.localPoint),n.applyMatrix4(t),!0)}function g8(n,e,t){if(e==="none"||e==="listener"&&!n)return!1;if(t==="all")return!0;if(typeof t=="function")return({id:s,type:o,state:a})=>t(s,o,a);let i,r;return"deny"in t?(r=!0,i=t.deny):(r=!1,i=t.allow),Array.isArray(i)?s=>ib(i.includes(s.type),r):s=>ib(i===s.type,r)}function ib(n,e){return e?!n:n}function DP(n,e,t,i=!1,r,s,o){const a=i||v8(n,e),l=e.pointerEvents??r,c=l??e.defaultPointerEvents??"listener",h=e.pointerEventsType??s??"all",f=e.pointerEventsOrder??o??0,p=g8(a,c,h),m=t.length;if(m===1)(p===!0||typeof p=="function"&&p(t[0]))&&gx(t[0],e,c,h,f);else if(p===!0)for(let x=0;x<m;x++)gx(t[x],e,c,h,f);else if(typeof p=="function")for(let x=0;x<m;x++){const g=t[x];p(g)&&gx(g,e,c,h,f)}if(e.children.length===0||e.intersectChildren===!1)return;const v=e.interactableDescendants??e.children,A=v.length;for(let x=0;x<A;x++)DP(n,v[x],t,a,l,h,f)}function v8(n,e){var r;if(e.ancestorsHaveListeners||n==="pointer"&&e.ancestorsHavePointerListeners||n==="wheel"&&e.ancestorsHaveWheelListeners||e.__r3f!=null&&((r=e.__r3f)==null?void 0:r.eventCount)>0&&(n==="wheel"&&e.__r3f.handlers.onWheel!=null||n==="pointer"&&Object.keys(e.__r3f.handlers).some(s=>s!="onWheel")))return!0;if(e._listeners==null)return!1;if(n==="wheel"){const s=e._listeners.wheel;return s!=null&&s.length>0}const t=Object.entries(e._listeners),i=t.length;for(let s=0;s<i;s++){const o=t[s];if(o[0]!=="wheel"&&u8.includes(o[0])&&o[1]!=null&&o[1].length>0)return!0}return!1}function gx({intersector:n,options:e},t,i,r,s){var o;((o=e.filter)==null?void 0:o.call(e,t,i,r,s))!==!1&&n.executeIntersection(t,s)}function y8(n,e,{customSort:t=x8}={},i){let r,s,o;const a=n.length;for(let l=0;l<a;l++){const c=n[l],h=e==null?void 0:e[l];(r==null||t(c,h,r,s)<0)&&(o=l,r=c,s=h)}return o}function x8(n,e=0,t,i=0){return e!=i?i-e:n.distance-t.distance}const od=Symbol("buttonsDownTime"),vx=Symbol("buttonsClickTime");globalThis.pointerEventspointerMap??(globalThis.pointerEventspointerMap=new Map);It.prototype.setPointerCapture=function(n){var e;(e=TS(n))==null||e.setCapture(this)};It.prototype.releasePointerCapture=function(n){const e=TS(n);e==null||!e.hasCaptured(this)||e.setCapture(void 0)};It.prototype.hasPointerCapture=function(n){var e;return((e=TS(n))==null?void 0:e.hasCaptured(this))??!1};function TS(n){var e;return(e=globalThis.pointerEventspointerMap)==null?void 0:e.get(n)}class NP{constructor(e,t,i,r,s,o,a,l,c={}){pt(this,"id");pt(this,"type");pt(this,"state");pt(this,"intersector");pt(this,"getCamera");pt(this,"onMoveCommited");pt(this,"parentSetPointerCapture");pt(this,"parentReleasePointerCapture");pt(this,"options");pt(this,"prevIntersection");pt(this,"intersection");pt(this,"prevEnabled",!0);pt(this,"enabled",!0);pt(this,"wheelIntersection");pt(this,"pointerEntered",[]);pt(this,"pointerEnteredHelper",[]);pt(this,"pointerCapture");pt(this,"buttonsDownTime",new Map);pt(this,"buttonsDown",new Set);pt(this,"wasMoved",!1);pt(this,"onFirstMove",[]);var h;this.id=e,this.type=t,this.state=i,this.intersector=r,this.getCamera=s,this.onMoveCommited=o,this.parentSetPointerCapture=a,this.parentReleasePointerCapture=l,this.options=c,(h=globalThis.pointerEventspointerMap)==null||h.set(e,this)}getPointerCapture(){return this.pointerCapture}hasCaptured(e){var t;return((t=this.pointerCapture)==null?void 0:t.object)===e}setCapture(e){var t,i,r;((t=this.pointerCapture)==null?void 0:t.object)!==e&&(this.pointerCapture!=null&&((i=this.parentReleasePointerCapture)==null||i.call(this),this.pointerCapture=void 0),e!=null&&this.intersection!=null&&(this.pointerCapture={object:e,intersection:this.intersection},(r=this.parentSetPointerCapture)==null||r.call(this)))}getButtonsDown(){return this.buttonsDown}getIntersection(){return this.intersection}getEnabled(){return this.enabled}setEnabled(e,t,i=!0){var r;this.enabled!==e&&(!e&&this.pointerCapture!=null&&((r=this.parentReleasePointerCapture)==null||r.call(this),this.pointerCapture=void 0),this.enabled=e,i&&this.commit(t,!1))}computeIntersection(e,t,i){return this.pointerCapture!=null?this.intersector.intersectPointerCapture(this.pointerCapture,i):(this.intersector.startIntersection(i),DP(e,t,[this]),this.intersector.finalizeIntersection(t))}setIntersection(e){this.intersection=e}commit(e,t){var l;const i=this.getCamera(),r=this.prevEnabled?this.prevIntersection:void 0,s=this.enabled?this.intersection:void 0;r!=null&&r.object!=(s==null?void 0:s.object)&&Xi(new Si("pointerout",!0,e,this,r,i));const o=this.pointerEntered;this.pointerEntered=[],this.pointerEnteredHelper.length=0,FP(s==null?void 0:s.object,this.pointerEntered,o,this.pointerEnteredHelper);const a=o.length;for(let c=0;c<a;c++){const h=o[c];Xi(new Si("pointerleave",!1,e,this,r,i,h))}s!=null&&(r==null?void 0:r.object)!=s.object&&Xi(new Si("pointerover",!0,e,this,s,i));for(let c=this.pointerEnteredHelper.length-1;c>=0;c--){const h=this.pointerEnteredHelper[c];Xi(new Si("pointerenter",!1,e,this,s,i,h))}if(t&&s!=null&&Xi(new Si("pointermove",!0,e,this,s,i)),this.prevIntersection=this.intersection,this.prevEnabled=this.enabled,!this.wasMoved&&this.intersector.isReady()){this.wasMoved=!0;const c=this.onFirstMove.length;for(let h=0;h<c;h++)this.onFirstMove[h](i);this.onFirstMove.length=0}(l=this.onMoveCommited)==null||l.call(this,this)}move(e,t){this.intersection=this.computeIntersection("pointer",e,t),this.commit(t,!0)}emitMove(e){this.intersection!=null&&Xi(new Si("pointermove",!0,e,this,this.intersection,this.getCamera()))}down(e){if(this.buttonsDown.add(e.button),!this.enabled)return;if(!this.wasMoved){this.onFirstMove.push(this.down.bind(this,e));return}if(this.intersection==null)return;Xi(new Si("pointerdown",!0,e,this,this.intersection,this.getCamera()));const{object:t}=this.intersection;t[od]??(t[od]=new Map),t[od].set(e.button,e.timeStamp),this.buttonsDownTime.set(e.button,e.timeStamp)}up(e){if(this.buttonsDown.delete(e.button),!this.enabled)return;if(!this.wasMoved){this.onFirstMove.push(this.up.bind(this,e));return}if(this.intersection==null)return;const{clickThesholdMs:t,contextMenuButton:i=2,dblClickThresholdMs:r=500,clickThresholdMs:s=t??300}=this.options;this.pointerCapture=void 0;const o=_8(this.buttonsDownTime,this.intersection.object[od],e.button,e.timeStamp,s),a=this.getCamera();if(o&&e.button===i&&Xi(new Si("contextmenu",!0,e,this,this.intersection,a)),Xi(new Si("pointerup",!0,e,this,this.intersection,a)),!o||e.button===i)return;Xi(new Si("click",!0,e,this,this.intersection,a));const{object:l}=this.intersection,c=l[vx]??(l[vx]=new Map),h=c.get(e.button);if(h==null||e.timeStamp-h>r){c.set(e.button,e.timeStamp);return}Xi(new Si("dblclick",!0,e,this,this.intersection,a)),c.delete(e.button)}cancel(e){if(this.enabled){if(!this.wasMoved){this.onFirstMove.push(this.cancel.bind(this,e));return}this.intersection!=null&&Xi(new Si("pointercancel",!0,e,this,this.intersection,this.getCamera()))}}wheel(e,t,i=!1){if(!this.enabled)return;if(!this.wasMoved&&i){this.onFirstMove.push(this.wheel.bind(this,e,t,i));return}i||(this.wheelIntersection=this.computeIntersection("wheel",e,t));const r=i?this.intersection:this.wheelIntersection;r!=null&&Xi(new wg(t,this,r,this.getCamera()))}emitWheel(e,t=!1){if(!this.enabled)return;if(!this.wasMoved&&t){this.onFirstMove.push(this.emitWheel.bind(this,e,t));return}const i=t?this.intersection:this.wheelIntersection;i!=null&&Xi(new wg(e,this,i,this.getCamera()))}exit(e){var t;this.wasMoved&&(this.pointerCapture!=null&&((t=this.parentReleasePointerCapture)==null||t.call(this),this.pointerCapture=void 0),this.intersection=void 0,this.commit(e,!1)),this.onFirstMove.length=0,this.wasMoved=!1}}function FP(n,e,t,i){if(n==null)return;const r=t.indexOf(n);r!=-1?t.splice(r,1):i.push(n),e.push(n),FP(n.parent,e,t,i)}function _8(n,e,t,i,r){if(e==null)return!1;const s=e.get(t);return!(s==null||i-s>r||s!=n.get(t))}function UP(n){return n.transformReady===!1?!1:n.parent==null?(n.matrixWorld.copy(n.matrix),!0):UP(n.parent)?(n.matrixWorld.multiplyMatrices(n.parent.matrixWorld,n.matrix),!0):!1}const ad=new wi,yx=new wi,rb=new ue,sb=new ue,ob=new ue,xx=new D,A8=new Qe,Jp=new D;function OP(n,e,t){Jp.copy(e).applyMatrix4(A8.copy(t.matrixWorld).invert());const i=t.geometry.attributes.uv;if(i==null||!(i instanceof yt))return!1;let r;return S8(t,(s,o,a)=>{t.getVertexPosition(s,ad.a),t.getVertexPosition(o,ad.b),t.getVertexPosition(a,ad.c);const l=ad.closestPointToPoint(Jp,xx).distanceTo(Jp);r!=null&&l>=r||(r=l,yx.copy(ad),rb.fromBufferAttribute(i,s),sb.fromBufferAttribute(i,o),ob.fromBufferAttribute(i,a))}),r==null?!1:(yx.closestPointToPoint(Jp,xx),yx.getInterpolation(xx,rb,sb,ob,n),!0)}function S8(n,e){const t=n.geometry.drawRange;if(n.geometry.index!=null){const o=n.geometry.index,a=Math.max(0,t.start),l=Math.min(o.count,t.start+t.count);for(let c=a;c<l;c+=3)e(o.getX(c),o.getX(c+1),o.getX(c+2));return}const i=n.geometry.attributes.position;if(i==null)return;const r=Math.max(0,t.start),s=Math.min(i.count,t.start+t.count);for(let o=r;o<s;o+=3)e(o,o+1,o+2)}new Qe;new R2;new D;new Ir;new Ss;new ue;new D(0,0,0),new D(0,0,1);new Qe;new D;new D(0,0,-1);new Ir;new ue;new D;const M8=new D,Eg=new ue;class w8{constructor(e,t,i){pt(this,"space");pt(this,"getSphereRadius");pt(this,"options");pt(this,"fromPosition",new D);pt(this,"fromQuaternion",new on);pt(this,"collisionSphere",new Gn);pt(this,"ready");pt(this,"intersects",[]);this.space=e,this.getSphereRadius=t,this.options=i}isReady(){return this.ready??this.prepareTransformation()}prepareTransformation(){const e=this.space.current;return e==null?this.ready=!1:(this.ready=UP(e),this.ready?(e.matrixWorld.decompose(this.fromPosition,this.fromQuaternion,M8),!0):!1)}intersectPointerCapture({intersection:e,object:t}){if(e.details.type!="sphere")throw new Error(`unable to process a pointer capture of type "${e.details.type}" with a sphere intersector`);if(!this.prepareTransformation())return e;ab.copy(e.point).sub(e.pointerPosition),lb.copy(e.pointerQuaternion).invert().multiply(this.fromQuaternion);const i=ab.clone().applyQuaternion(lb).add(this.fromPosition);e.object.updateWorldMatrix(!0,!1),m8(cb,e,e.object.matrixWorld);const r=cb.projectPoint(this.fromPosition,new D);let s=e.uv;return e.object instanceof xt&&OP(Eg,i,e.object)&&(s=Eg.clone()),{details:{type:"sphere"},uv:s,distance:i.distanceTo(r),pointerPosition:this.fromPosition.clone(),pointerQuaternion:this.fromQuaternion.clone(),object:t,point:i,pointOnFace:r,face:e.face,localPoint:e.localPoint}}startIntersection(){this.prepareTransformation()&&(this.collisionSphere.center.copy(this.fromPosition),this.collisionSphere.radius=this.getSphereRadius())}executeIntersection(e){this.isReady()&&E8(this.collisionSphere,e,this.intersects)}finalizeIntersection(e){const t=this.fromPosition.clone(),i=this.fromQuaternion.clone(),r=y8(this.intersects,void 0,this.options),s=r==null?void 0:this.intersects[r];return this.intersects.length=0,s==null?{details:{type:"sphere"},distance:0,point:t,object:p8(e),pointerPosition:t,pointerQuaternion:i,pointOnFace:t,localPoint:t}:(s.object.updateWorldMatrix(!0,!1),Object.assign(s,{details:{type:"sphere"},pointOnFace:s.point,pointerPosition:this.fromPosition.clone(),pointerQuaternion:this.fromQuaternion.clone(),localPoint:s.point.clone().applyMatrix4(Cg.copy(s.object.matrixWorld).invert())}))}}const Kp=new Qe;function E8(n,e,t){if(e.updateWorldMatrix(!0,!1),e.spherecast!=null){e.spherecast(n,t);return}if(e instanceof bh){e.geometry.boundingSphere==null&&e.geometry.computeBoundingSphere(),e.geometry.boundingBox==null&&e.geometry.computeBoundingBox();for(let r=0;r<e.count;r++){if(e.getMatrixAt(r,Kp),Kp.premultiply(e.matrixWorld),!ub(n,e,Kp))continue;const s=hb(n,e,Kp,r);s!=null&&t.push(s)}}if(!(e instanceof xt)||!ub(n,e,e.matrixWorld))return;Cg.copy(e.matrixWorld).invert();const i=hb(n,e,e.matrixWorld);i!=null&&t.push(i)}const ab=new D,lb=new on,cb=new Ir,Hc=new Gn;function ub(n,{geometry:e},t){return e.boundingSphere==null&&e.computeBoundingSphere(),Hc.copy(e.boundingSphere).applyMatrix4(t),Hc.center.distanceToSquared(n.center)<(n.radius+Hc.radius)**2}const Yp=new D,_x=new D,db=new D,C8=new D(1e-4,1e-4,1e-4),Cg=new Qe;function hb(n,e,t,i){Cg.copy(t).invert(),Hc.copy(n).applyMatrix4(Cg);const{geometry:r}=e;r.boundingBox==null&&r.computeBoundingBox(),r.boundingBox.getSize(_x),r.boundingBox.getCenter(db),r.boundingBox.clampPoint(Hc.center,Yp),Yp.applyMatrix4(t);const s=Yp.distanceToSquared(n.center);if(s>n.radius*n.radius)return;_x.max(C8);const o=Hc.center.clone().sub(db);o.divide(_x),b8(o);const a=Yp.clone();let l;return OP(Eg,a,e)&&(l=Eg.clone()),{distance:Math.sqrt(s),face:{a:0,b:0,c:0,materialIndex:0,normal:o},uv:l,normal:o,point:a,instanceId:i,object:e}}function b8(n){const e=Math.abs(n.x),t=Math.abs(n.y),i=Math.abs(n.z);if(e>=t&&e>=i){n.set(n.x<0?-1:1,0,0);return}if(t>=e&&t>=i){n.set(0,n.y<0?-1:1,0);return}n.set(0,0,n.z<0?-1:1)}function T8(n,e,t,i={},r="grab"){return new NP(I8(),r,t,new w8(e,()=>i.radius??.07,i),n,void 0,void 0,void 0,i)}let R8=23412;function I8(){return R8++}function fb(n,e){if(e!=null&&e.createdAt!=null&&e.createdAt>=n.lastChangedTime)return e;const t=new gt;return t.setIndex(new yt(n.indices,1)),t.setAttribute("position",new yt(n.vertices,3)),Object.assign(t,{creationTime:n.lastChangedTime})}function pb(n,e){return e!=null&&e.createdAt!=null&&e.createdAt>=n.lastChangedTime?e:Object.assign(P8(n.polygon),{createdAt:n.lastChangedTime})}const ld=new T2,Qp=new ue;function P8(n){if(n.length===0)return new gt;const e=new qo,t=n.map(({x:r,z:s})=>new ue(r,s));ld.setFromPoints(t),ld.getSize(Qp);for(const r of t)r.sub(ld.min),r.divide(Qp);e.setFromPoints(t);const i=new Ph(e);return i.scale(Qp.x,Qp.y,1),i.translate(ld.min.x,ld.min.y,0),i.rotateX(Math.PI/2),i}function bg(n,e=1){if(n!=null)return{x:n.x,y:n.y,z:n.z,w:"w"in n?n.w:e}}const kP=60/180*Math.PI,B8=60/180*Math.PI,L8=-30/180*Math.PI,D8=30/180*Math.PI;function N8(n,e,t,i,r,s){return n instanceof HTMLVideoElement?F8(n,e,i,r,s):U8(n,e,t,i,r,s)}function F8(n,e,t,{invertStereo:i,layout:r,shape:s="quad"},o={}){var p;const a=M0(t,e.origin,e.originReferenceSpace,nu);if(a==null)return;const l=RS(nu,Ml),c={invertStereo:i,layout:r,space:a,transform:l};PS(s,c,o.centralAngle,Ml);const h=`create${zP(s)}Layer`,f=(p=e.mediaBinding)==null?void 0:p[h](n,c);if(f!=null)return IS(f,o),f}function U8(n,e,t,i,{shape:r="quad",...s},o={}){var p;const a=M0(i,e.origin,e.originReferenceSpace,nu);if(a==null)return;const l=RS(nu,Ml),c={...s,isStatic:!(n instanceof ci),textureType:"texture",viewPixelWidth:s.layout==="stereo-left-right"?n.width/2:n.width,viewPixelHeight:s.layout==="stereo-top-bottom"?n.height/2:n.height,space:a,transform:l};PS(r,c,o.centralAngle,Ml);const h=`create${zP(r)}Layer`,f=(p=t.getBinding())==null?void 0:p[h](c);if(f!=null)return IS(f,o),f}const nu=new Qe,mb=new D,gb=new on,Ml=new D;function RS(n,e=Ml){return n.decompose(mb,gb,e),new XRRigidTransform(bg(mb),bg(gb))}function zP(n){return`${n[0].toUpperCase()}${n.slice(1)}`}function IS(n,e={}){if(n.chromaticAberrationCorrection=e.chromaticAberrationCorrection,n.quality=e.quality??"default",n.blendTextureSourceAlpha=e.blendTextureSourceAlpha??!1,n instanceof XRCylinderLayer){n.centralAngle=(e==null?void 0:e.centralAngle)??kP;return}n instanceof XREquirectLayer&&(n.centralHorizontalAngle=(e==null?void 0:e.centralHorizontalAngle)??B8,n.lowerVerticalAngle=(e==null?void 0:e.lowerVerticalAngle)??L8,n.upperVerticalAngle=(e==null?void 0:e.upperVerticalAngle)??D8)}function O8(n,e,t,i){let r=!1;const s=async()=>{const o=await e.requestFrame();r||z8(n,t,o,i)};return t.addEventListener("redraw",s),s(),()=>{r=!0,t.removeEventListener("redraw",s)}}function k8(n){if(n instanceof ci)return n.texture;const e=n instanceof HTMLVideoElement?new KI(n):new tn(n);return e.colorSpace=Un,e.needsUpdate=!0,e}function z8(n,e,t,i){const r=n.getContext(),s=n.xr.getBinding().getSubImage(e,t);n.state.bindTexture(r.TEXTURE_2D,s.colorTexture),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!0),r.texSubImage2D(r.TEXTURE_2D,0,0,0,i.width,i.height,r.RGBA,r.UNSIGNED_BYTE,i)}function H8(n,e,t,i){n.originReferenceSpace!=null&&(e.space=M0(i,n.origin,n.originReferenceSpace,nu),e.transform=RS(nu,Ml),PS(G8(e),e,t,Ml))}function PS(n,e,t,i){if(n==="cylinder"){const s=(i.x+i.z)/2,o=s*(t??kP);e.radius=s,e.aspectRatio=o/i.y}else n==="quad"?(e.width=i.x/2,e.height=i.y/2):e.radius=(i.x+i.y+i.z)/3}function G8(n){return n instanceof XRCylinderLayer?"cylinder":n instanceof XREquirectLayer?"equirect":"quad"}function HP(n,e,t){return new ci(n*t,e*t,{minFilter:en,magFilter:en,type:aa,depthTexture:new Eh(n,e)})}new Ti(0,0,0,"YXZ");class V8 extends xt{constructor(t){const i=new gV,r=new Float32Array(t.length*3);for(let a=0;a<t.length;a++)t[a].toArray(r,a*3);i.setPoints(r);const s=(t.length*3-3)/(t.length*3-1),o=new AV({lineWidth:.1,resolution:void 0,visibility:s});super(i,o);pt(this,"multiplier");pt(this,"lineLengths");pt(this,"options",{});this.material.transparent=!0,this.multiplier=s,this.material=o,this.lineLengths=t.slice(0,-1).map((a,l)=>a.distanceTo(t[l+1]))}update(t){const i=t.getEnabled(),r=t.getIntersection();if(!i||t.getButtonsDown().size===0||r==null){this.visible=!1;return}if(this.visible=!0,r.details.type!="lines"){this.material.visibility=this.multiplier;return}const{distanceOnLine:s,lineIndex:o}=r.details,a=this.lineLengths[o];this.material.visibility=this.multiplier*(o+s/a)/this.lineLengths.length;const{color:l="white",opacity:c=.4,size:h=.01}=this.options;this.material.lineWidth=h,this.material.opacity=typeof c=="function"?c(t):c;const f=typeof l=="function"?l(t):l;Array.isArray(f)?this.material.color.set(...f):this.material.color.set(f)}}const vb=new Qe,qp=new D,W8=new D,yb=new on;async function j8(n,e,t,i=["point","plane","mesh"]){var h;typeof t=="string"&&(t=await e.requestReferenceSpace(t));const r=Array.isArray(i)?i:[i];let s,o,a;const l=n.getState();if(t instanceof XRSpace)s={space:t,entityTypes:r},a=l.origin;else{const f=M0(t,l.origin,l.originReferenceSpace,vb);if(f==null)return;vb.decompose(qp,yb,W8);const p=bg(qp);qp.set(0,0,-1).applyQuaternion(yb);const m=new XRRay(p,bg(qp,0));a=t,s={space:f,offsetRay:m,entityTypes:r},o=f}const c=await((h=e==null?void 0:e.requestHitTestSource)==null?void 0:h.call(e,s));if(c!=null)return{source:c,getWorldMatrix:X8.bind(null,n,o,a)}}function X8(n,e,t,i,r){if(e??(e=n.getState().originReferenceSpace),e==null)return!1;const s=r.getPose(e);return s==null?!1:(i.fromArray(s.transform.matrix),t!=null&&(t.updateWorldMatrix(!0,!1),i.premultiply(t.matrixWorld)),!0)}new D(1,1,1);new D(0,0,0);new Qe;new Qe;new D;new D;new D;new Ti;new D;new D;const J8=new CP,K8=H.createContext(void 0),GP=H.createContext(void 0),w0=H.createContext(void 0),Y8=H.createContext(void 0),Q8={BASE_URL:"/CelestialNavigator/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},{useDebugValue:q8}=As,{useSyncExternalStoreWithSelector:Z8}=hP;let xb=!1;const $8=n=>n;function BS(n,e=$8,t){(Q8?"production":void 0)!=="production"&&t&&!xb&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),xb=!0);const i=Z8(n.subscribe,n.getState,n.getServerState||n.getInitialState,e,t);return q8(i),i}function e6(n,e){const t=H.useRef(e);t.current=e;const[i,r]=H.useMemo(()=>{let s;return[o=>{let a=!1;return typeof navigator>"u"||navigator.xr==null?(s=!1,()=>{}):(navigator.xr.isSessionSupported(n).then(l=>{s=l,!a&&o()}).catch(l=>{var c;a||(c=t.current)==null||c.call(t,l)}),()=>a=!0)},()=>s]},[n]);return H.useSyncExternalStore(i,r)}function Gc(n){const e=H.useContext(GP);if(e==null)throw new Error("useXRInputSourceStateContext() can only be used inside the xr store config");if(n!=null&&e.type!=n)throw new Error(`useXRInputSourceStateContext(${n}) can not be used inside a component for input type "${e.type}"`);return e}H.forwardRef(({id:n,children:e,onPress:t,onRelease:i},r)=>{const s=Gc("controller"),[o,a]=H.useState(void 0);if(H.useImperativeHandle(r,()=>o,[o]),t6(s,n,l=>l==="pressed"?t==null?void 0:t():i==null?void 0:i()),Vn(()=>{var l;return a((l=s.gamepad[n])==null?void 0:l.object)}),o!=null)return q2(e,o)});function t6(n,e,t){const i=H.useRef(void 0);Vn(()=>{var s;const r=(s=n==null?void 0:n.gamepad[e])==null?void 0:s.state;r!=null&&r!=i.current&&t(r),i.current=r})}const n6=Symbol("loadXRControllerModel");H.forwardRef((n,e)=>{const t=Gc("controller"),i=N2(r8,[t.layout,void 0,n6]);s8(i,n),t.object=i,H.useImperativeHandle(e,()=>i,[i]);const r=H.useMemo(()=>o8(i,t.layout,t.gamepad),[i,t.layout,t.gamepad]);return Vn(r),L.jsx(DS,{space:"grip-space",children:L.jsx("primitive",{object:i})})});H.forwardRef((n,e)=>{const t=Gc("hand"),i=hu(CP,t.assetPath),r=H.useMemo(()=>V9(i),[i]);W9(r,n),t.object=r,H.useImperativeHandle(e,()=>r,[r]);const s=WP(),o=H.useMemo(()=>X9(t.inputSource.hand,r,s),[t.inputSource,r,s]);return Vn((a,l,c)=>o(c)),L.jsx("primitive",{object:r})});H.forwardRef(({joint:n,children:e},t)=>L.jsx(DS,{ref:t,space:n,children:e}));function i6(n){for(const e of Object.keys(n))delete n[e]}function r6(n,e,t,i){const r=H.useMemo(()=>({}),[]);i6(r),Object.assign(r,t);const s=A0(),o=H.useMemo(()=>T8(()=>s.getState().camera,n,e,r,i),[s,n,e,r,i]);return a6(o,t==null?void 0:t.makeDefault),o}H.forwardRef((n,e)=>{const t=H.useMemo(()=>{const r=n.materialClass??q9;return new r},[n.materialClass]),i=H.useRef(null);return H.useImperativeHandle(e,()=>i.current,[]),Vn(()=>i.current!=null&&Z9(i.current,t,n.pointer,n)),L.jsx("mesh",{matrixAutoUpdate:!1,renderOrder:n.renderOrder??2,ref:i,material:t,children:L.jsx("boxGeometry",{})})});const s6=H.forwardRef((n,e)=>{const t=H.useMemo(()=>{const o=n.materialClass??K9;return new o},[n.materialClass]),i=H.useRef(null),r=H.useRef(null);H.useImperativeHandle(e,()=>i.current,[]),Vn(()=>i.current!=null&&r.current!=null&&Q9(r.current,i.current,t,n.pointer,n));const s=Fn(o=>o.scene);return L.jsxs(L.Fragment,{children:[L.jsx("group",{ref:r}),q2(L.jsx("mesh",{renderOrder:n.renderOrder??1,ref:i,matrixAutoUpdate:!1,material:t,children:L.jsx("planeGeometry",{})}),s)]})});function o6(n,e,t,i){const r=iu(s=>s.session);H.useEffect(()=>{if(r!=null)return $9(n,r,e,t,i)},[t,e,n,r,i])}function a6(n,e=!1){const t=H.useContext(Y8);if(t==null)throw new Error("xr pointers can only be used inside the XR component");H.useEffect(()=>{const i=t.register(n,e);return()=>{i()}},[t,n,e]),H.useEffect(()=>{if(n instanceof NP)return()=>n.exit({timeStamp:performance.now()})},[n])}H.forwardRef(({pointer:n,linePoints:e,...t},i)=>{const r=H.useMemo(()=>new V8(e),[e]);return H.useImperativeHandle(i,()=>r,[r]),r.options=t,Vn(()=>r.update(n)),L.jsx("primitive",{object:r})});function VP(n,e,t){const i=H.useContext(GP);if(i==null)throw new Error("DefaultXRInputSourceGrabPointer can only be used inside a XRInputSource");const r=H.useRef(null),s=r6(r,i,t);o6(s,i.inputSource,n,i.events);const o=t.cursorModel;return L.jsx(DS,{ref:r,space:e,children:o!==!1&&L.jsx(s6,{pointer:s,opacity:e8,...l6(o)})})}VP.bind(null,"select","index-finger-tip");VP.bind(null,"squeeze","grip-space");function l6(n){if(n!==!0)return n}function LS(){const n=H.useContext(K8);if(n==null)throw new Error("XR features can only be used inside the <XR> component");return n}function iu(n=t=>t,e){return BS(LS(),n,e)}const DS=H.forwardRef(({space:n,children:e},t)=>{const i=H.useRef(null),r=typeof n=="string"?WP(n):n;H.useImperativeHandle(t,()=>i.current,[]),u6(i,r);const s=H.useCallback(o=>{o!=null&&(o.transformReady=!1,o.visible=!1),i.current=o},[]);return L.jsx("group",{xrSpace:r,matrixAutoUpdate:!1,ref:s,children:r&&L.jsx(w0.Provider,{value:r,children:e})})});function WP(n){var r;switch(n){case"grip-space":return Gc().inputSource.gripSpace;case"target-ray-space":return Gc().inputSource.targetRaySpace;case"wrist":case"thumb-metacarpal":case"thumb-phalanx-proximal":case"thumb-phalanx-distal":case"thumb-tip":case"index-finger-metacarpal":case"index-finger-phalanx-proximal":case"index-finger-phalanx-intermediate":case"index-finger-phalanx-distal":case"index-finger-tip":case"middle-finger-metacarpal":case"middle-finger-phalanx-proximal":case"middle-finger-phalanx-intermediate":case"middle-finger-phalanx-distal":case"middle-finger-tip":case"ring-finger-metacarpal":case"ring-finger-phalanx-proximal":case"ring-finger-phalanx-intermediate":case"ring-finger-phalanx-distal":case"ring-finger-tip":case"pinky-finger-metacarpal":case"pinky-finger-phalanx-proximal":case"pinky-finger-phalanx-intermediate":case"pinky-finger-phalanx-distal":case"pinky-finger-tip":return Gc("hand").inputSource.hand.get(n);case"root":case"hips":case"spine-lower":case"spine-middle":case"spine-upper":case"chest":case"neck":case"head":case"left-shoulder":case"left-scapula":case"left-arm-upper":case"left-arm-lower":case"left-hand-wrist-twist":case"right-shoulder":case"right-scapula":case"right-arm-upper":case"right-arm-lower":case"right-hand-wrist-twist":case"left-hand-palm":case"left-hand-wrist":case"left-hand-thumb-metacarpal":case"left-hand-thumb-phalanx-proximal":case"left-hand-thumb-phalanx-distal":case"left-hand-thumb-tip":case"left-hand-index-metacarpal":case"left-hand-index-phalanx-proximal":case"left-hand-index-phalanx-intermediate":case"left-hand-index-phalanx-distal":case"left-hand-index-tip":case"left-hand-middle-metacarpal":case"left-hand-middle-phalanx-proximal":case"left-hand-middle-phalanx-intermediate":case"left-hand-middle-phalanx-distal":case"left-hand-middle-tip":case"left-hand-ring-metacarpal":case"left-hand-ring-phalanx-proximal":case"left-hand-ring-phalanx-intermediate":case"left-hand-ring-phalanx-distal":case"left-hand-ring-tip":case"left-hand-little-metacarpal":case"left-hand-little-phalanx-proximal":case"left-hand-little-phalanx-intermediate":case"left-hand-little-phalanx-distal":case"left-hand-little-tip":case"right-hand-palm":case"right-hand-wrist":case"right-hand-thumb-metacarpal":case"right-hand-thumb-phalanx-proximal":case"right-hand-thumb-phalanx-distal":case"right-hand-thumb-tip":case"right-hand-index-metacarpal":case"right-hand-index-phalanx-proximal":case"right-hand-index-phalanx-intermediate":case"right-hand-index-phalanx-distal":case"right-hand-index-tip":case"right-hand-middle-metacarpal":case"right-hand-middle-phalanx-proximal":case"right-hand-middle-phalanx-intermediate":case"right-hand-middle-phalanx-distal":case"right-hand-middle-tip":case"right-hand-ring-metacarpal":case"right-hand-ring-phalanx-proximal":case"right-hand-ring-phalanx-intermediate":case"right-hand-ring-phalanx-distal":case"right-hand-ring-tip":case"right-hand-little-metacarpal":case"right-hand-little-phalanx-proximal":case"right-hand-little-phalanx-intermediate":case"right-hand-little-phalanx-distal":case"right-hand-little-tip":case"left-upper-leg":case"left-lower-leg":case"left-foot-ankle-twist":case"left-foot-ankle":case"left-foot-subtalar":case"left-foot-transverse":case"left-foot-ball":case"right-upper-leg":case"right-lower-leg":case"right-foot-ankle-twist":case"right-foot-ankle":case"right-foot-subtalar":case"right-foot-transverse":case"right-foot-ball":return(r=iu(s=>s.body))==null?void 0:r.get(n)}if(n==null){const s=H.useContext(w0);if(s==null)throw new Error("XR objects must be placed inside the XROrigin");return s}const[e,t]=H.useState(void 0),i=iu(s=>s.session);return H.useEffect(()=>{if(i==null)return;let s=!1;return i.requestReferenceSpace(n).then(o=>{s||t(o)}),()=>void(s=!0)},[i,n]),e}function c6(n){const e=H.useContext(w0),t=iu(i=>e??i.originReferenceSpace);return H.useMemo(()=>n==null||t==null?void 0:n8(n,t),[n,t])}function u6(n,e,t){const i=c6(e);Vn((r,s,o)=>{n.current!=null&&(n.current.visible=n.current.transformReady=(i==null?void 0:i(n.current.matrix,o))??!1)},-100)}H.forwardRef(({mesh:n,...e},t)=>{const i=d6(n);return L.jsx("mesh",{ref:t,geometry:i,...e})});function d6(n,e=!0){const[t,i]=H.useState(fb(n,void 0));return Vn(()=>i(r=>fb(n,r))),H.useEffect(()=>{if(e)return()=>t.dispose()},[t]),t}H.forwardRef(({plane:n,...e},t)=>{const i=h6(n);return L.jsx("mesh",{ref:t,geometry:i,...e})});function h6(n,e=!0){const[t,i]=H.useState(pb(n,void 0));return Vn(()=>i(r=>pb(n,r))),H.useEffect(()=>{if(e)return()=>t.dispose()},[t]),t}H.forwardRef(({children:n,...e},t)=>{const i=Fn(o=>o.gl.xr.getCamera()),r=H.useRef(null);H.useImperativeHandle(t,()=>r.current,[]);const s=iu(o=>o.originReferenceSpace);return H.useEffect(()=>{const o=r.current;if(o!=null)return o.add(i),()=>void o.remove(i)},[i]),L.jsx("group",{ref:r,...e,children:s!=null&&L.jsx(w0.Provider,{value:s,children:n})})});function f6(n,e,t){const i=H.useRef(void 0);p6(e,t,H.useCallback(r=>i.current=r,[])),Vn((r,s,o)=>{n==null||o==null||i.current==null||n(o.getHitTestResults(i.current.source),i.current.getWorldMatrix)})}function p6(n,e,t){const i=LS(),r=BS(i,s=>s.session);H.useEffect(()=>{if(r==null)return;let s,o=!1;const a=n instanceof XRSpace||typeof n=="string"?n:n==null?void 0:n.current;if(a!=null)return j8(i,r,a,e).then(l=>{o||(s=l,t(l))}),()=>{t(void 0),o=!0,s==null||s.source.cancel()}},[r,i,n,e,t])}H.forwardRef(({trackableType:n,onResults:e,space:t,...i},r)=>{const s=H.useRef(null);return H.useImperativeHandle(r,()=>s.current),f6(e,t??s,n),L.jsx("group",{...i,ref:s})});H.forwardRef((n,e)=>{const t=iu(s=>s.domOverlayRoot),{In:i,Out:r}=H.useMemo(n5,[]);return H.useEffect(()=>{if(t==null)return;const s=BR(t);return s.render(L.jsx(r,{})),()=>s.unmount()},[t,r]),L.jsx(i,{children:L.jsx("div",{...n,ref:e})})});H.forwardRef(({src:n,shape:e,colorFormat:t,depthFormat:i,layout:r,mipLevels:s,renderOrder:o=0,blendTextureSourceAlpha:a,centralAngle:l,centralHorizontalAngle:c,chromaticAberrationCorrection:h,lowerVerticalAngle:f,quality:p,upperVerticalAngle:m,invertStereo:v,pixelWidth:A,pixelHeight:x,dpr:g,renderTargetRef:S,layerEntryRef:_,...w},I)=>{const T=H.useRef(null),P=Fn(j=>j.gl),B=LS(),R={blendTextureSourceAlpha:a,centralAngle:l,centralHorizontalAngle:c,chromaticAberrationCorrection:h,lowerVerticalAngle:f,quality:p,upperVerticalAngle:m},C=H.useRef(R);C.current=R;const U=H.useRef(o);return U.current=o,H.useEffect(()=>{if(T.current==null)return;const j=n??(S.current=HP(A,x,g)),K=N8(j,B.getState(),P.xr,T.current,{colorFormat:t,depthFormat:i,invertStereo:v,layout:r,mipLevels:s,shape:e},C.current);if(K==null)return;const te=_.current={layer:K,renderOrder:U.current};if(B.addLayerEntry(te),j instanceof HTMLVideoElement||j instanceof ci)return()=>{B.removeLayerEntry(te),K.destroy()};const de=O8(P,B,K,j);return()=>{B.removeLayerEntry(te),de(),K.destroy()}},[t,i,v,_,r,s,x,A,g,S,P,e,n,B]),_.current!=null&&(_.current.renderOrder=o),_.current!=null&&IS(_.current.layer,C.current),Vn(()=>{_.current==null||T.current==null||H8(B.getState(),_.current.layer,C.current.centralAngle,T.current)}),H.useImperativeHandle(I,()=>T.current,[]),L.jsx("mesh",{...w,renderOrder:-1/0,ref:T,children:L.jsx("meshBasicMaterial",{colorWrite:!1})})});H.forwardRef(({src:n,renderTargetRef:e,dpr:t,renderOrder:i,pixelWidth:r,pixelHeight:s,...o},a)=>{const l=H.useRef(null);return H.useEffect(()=>{if(l.current==null)return;const c=n??(e.current=HP(r,s,t)),h=k8(c);return l.current.map=h,l.current.needsUpdate=!0,()=>{if(c instanceof ci){c.dispose();return}h.dispose()}},[n,r,s,t,e]),L.jsx("mesh",{ref:a,...o,children:L.jsx("meshBasicMaterial",{ref:l,toneMapped:!1})})});new Vt;new Vt;const jP=H.forwardRef(({store:n,mode:e,onError:t,children:i,...r},s)=>{const o=BS(n,l=>l.session),a=e6(e,t);return L.jsx("button",{ref:s,...r,onClick:()=>o!=null?o.end():n.enterXR(e).catch(t),children:typeof i=="function"?i(a?o!=null?"entered":"exited":"unsupported"):i})});H.forwardRef((n,e)=>L.jsx(jP,{ref:e,mode:"immersive-ar",...n}));const m6=H.forwardRef((n,e)=>L.jsx(jP,{ref:e,mode:"immersive-vr",...n})),g6={onBlur:"pointerleave",onHover:"pointerenter",onMove:"pointermove",onSelect:{type:"click",filter:n=>n.pointerType==="ray"},onSelectEnd:{type:"pointerup",filter:n=>n.pointerType==="ray"},onSelectStart:{type:"pointerdown",filter:n=>n.pointerType==="ray"},onSqueeze:{type:"click",filter:n=>n.pointerType==="grab"},onSqueezeEnd:{type:"pointerup",filter:n=>n.pointerType==="grab"},onSqueezeStart:{type:"pointerdown",filter:n=>n.pointerType==="grab"}};function Os(n,e,t){const i=H.useRef(t);i.current=t,H.useEffect(()=>{const{current:r}=n;if(r==null)return;const s=g6[e],o=typeof s=="string"?l=>{var c;return(c=i.current)==null?void 0:c.call(i,{intersection:l,intersections:[l],target:l.pointerState})}:l=>{var c;l instanceof Si&&!s.filter(l)||(c=i.current)==null||c.call(i,{intersection:l,intersections:[l],target:l.pointerState})},a=typeof s=="string"?s:s.type;return r.addEventListener(a,o),()=>r.removeEventListener(a,o)},[n,e])}const v6=H.forwardRef(({onHover:n,onBlur:e,onSelectStart:t,onSelectEnd:i,onSelect:r,onSqueezeStart:s,onSqueezeEnd:o,onSqueeze:a,onMove:l,children:c},h)=>{const f=H.useRef(null);return H.useImperativeHandle(h,()=>f.current),Os(f,"onHover",n),Os(f,"onBlur",e),Os(f,"onSelectStart",t),Os(f,"onSelectEnd",i),Os(f,"onSelect",r),Os(f,"onSqueezeStart",s),Os(f,"onSqueezeEnd",o),Os(f,"onSqueeze",a),Os(f,"onMove",l),L.jsx("group",{ref:f,children:c})});H.forwardRef(function({onSelectStart:e,onSelectEnd:t,children:i,...r},s){const o=H.useRef(void 0),a=H.useRef(null),l=H.useMemo(()=>new Qe,[]);return H.useImperativeHandle(s,()=>a.current),Vn(()=>{const c=o.current,h=a.current;!h||!c||(h.applyMatrix4(l),c.updateWorldMatrix(!0,!1),h.applyMatrix4(c.matrixWorld),h.updateMatrixWorld(),l.copy(c.matrixWorld).invert())}),L.jsx(v6,{ref:a,onSelectStart:c=>{J9(c.target)&&(c.target.type==="controller"||c.target.type==="hand")&&c.target.object!=null&&(o.current=c.target.object,c.target.object.updateWorldMatrix(!0,!1),l.copy(c.target.object.matrixWorld).invert(),e==null||e(c))},onSelectEnd:c=>{c.target.controller===o.current&&(o.current=void 0),t==null||t(c)},...r,children:i})});function y6(){return L.jsxs(L.Fragment,{children:[L.jsx(m6,{}),L.jsx(nP,{children:L.jsx(mP,{})})]})}const x6=[{name:"forward",keys:["KeyW","ArrowUp"]},{name:"backward",keys:["KeyS","ArrowDown"]},{name:"leftward",keys:["KeyA","ArrowLeft"]},{name:"rightward",keys:["KeyD","ArrowRight"]},{name:"zoomIn",keys:["KeyE"]},{name:"zoomOut",keys:["KeyQ"]},{name:"reset",keys:["KeyR"]},{name:"toggle",keys:["KeyT"]}];function _6(){const{setBackgroundMusic:n}=pP(),e=Ft(s=>s.isEducationalPanelOpen),t=Ft(s=>s.setEducationalPanelOpen),i=Ft(s=>s.hoveredBody),r=Ft(s=>s.isVRMode);return H.useEffect(()=>{const s=new Audio("/CelestialNavigator/sounds/background.mp3");return s.loop=!0,s.volume=.3,s.addEventListener("error",o=>{console.error("Error loading background music:",o)}),n(s),()=>{s.pause(),s.currentTime=0}},[n]),r?L.jsx(y6,{}):L.jsx("div",{className:"w-full h-full bg-black",children:L.jsxs(yG,{map:x6,children:[L.jsxs(nP,{shadows:!0,camera:{position:[0,30,100],fov:45,near:.1,far:1e4},gl:{antialias:!0,powerPreference:"default"},children:[L.jsx("color",{attach:"background",args:["#000000"]}),L.jsxs(H.Suspense,{fallback:null,children:[L.jsx(mP,{}),L.jsx(a9,{}),L.jsx(i9,{}),L.jsx(s9,{})]})]}),L.jsx(G5,{}),L.jsx(H5,{}),L.jsx(W5,{}),L.jsx(j5,{}),L.jsx(z5,{}),L.jsx(J5,{hoveredObjectId:i}),L.jsx(X5,{isOpen:e,onClose:()=>t(!1)}),L.jsx(r9,{}),L.jsx(o9,{})]})})}Ax.createRoot(document.getElementById("root")).render(L.jsx(As.StrictMode,{children:L.jsx(AN,{basename:"/CelestialNavigator",children:L.jsx(_6,{})})}));
